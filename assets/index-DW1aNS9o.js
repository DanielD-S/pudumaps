(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))h(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function h(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function Mm(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var o=d.default;if(typeof o=="function"){var i=function h(){var c=!1;try{c=this instanceof h}catch{}return c?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};i.prototype=o.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(d).forEach(function(h){var c=Object.getOwnPropertyDescriptor(d,h);Object.defineProperty(i,h,c.get?c:{enumerable:!0,get:function(){return d[h]}})}),i}var Qh={exports:{}},Ql={},ec={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of;function Pm(){if(of)return bt;of=1;var d=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),y=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),T=Symbol.iterator;function $(ie){return ie===null||typeof ie!="object"?null:(ie=T&&ie[T]||ie["@@iterator"],typeof ie=="function"?ie:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,q={};function J(ie,Ee,et){this.props=ie,this.context=Ee,this.refs=q,this.updater=et||F}J.prototype.isReactComponent={},J.prototype.setState=function(ie,Ee){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ee,"setState")},J.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ce(){}ce.prototype=J.prototype;function be(ie,Ee,et){this.props=ie,this.context=Ee,this.refs=q,this.updater=et||F}var he=be.prototype=new ce;he.constructor=be,Z(he,J.prototype),he.isPureReactComponent=!0;var Ae=Array.isArray,Re=Object.prototype.hasOwnProperty,le={current:null},ke={key:!0,ref:!0,__self:!0,__source:!0};function Ke(ie,Ee,et){var Xe,He={},ze=null,kt=null;if(Ee!=null)for(Xe in Ee.ref!==void 0&&(kt=Ee.ref),Ee.key!==void 0&&(ze=""+Ee.key),Ee)Re.call(Ee,Xe)&&!ke.hasOwnProperty(Xe)&&(He[Xe]=Ee[Xe]);var xt=arguments.length-2;if(xt===1)He.children=et;else if(1<xt){for(var Ot=Array(xt),_n=0;_n<xt;_n++)Ot[_n]=arguments[_n+2];He.children=Ot}if(ie&&ie.defaultProps)for(Xe in xt=ie.defaultProps,xt)He[Xe]===void 0&&(He[Xe]=xt[Xe]);return{$$typeof:d,type:ie,key:ze,ref:kt,props:He,_owner:le.current}}function Je(ie,Ee){return{$$typeof:d,type:ie.type,key:Ee,ref:ie.ref,props:ie.props,_owner:ie._owner}}function nt(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===d}function Ne(ie){var Ee={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(et){return Ee[et]})}var ft=/\/+/g;function Mt(ie,Ee){return typeof ie=="object"&&ie!==null&&ie.key!=null?Ne(""+ie.key):Ee.toString(36)}function wt(ie,Ee,et,Xe,He){var ze=typeof ie;(ze==="undefined"||ze==="boolean")&&(ie=null);var kt=!1;if(ie===null)kt=!0;else switch(ze){case"string":case"number":kt=!0;break;case"object":switch(ie.$$typeof){case d:case o:kt=!0}}if(kt)return kt=ie,He=He(kt),ie=Xe===""?"."+Mt(kt,0):Xe,Ae(He)?(et="",ie!=null&&(et=ie.replace(ft,"$&/")+"/"),wt(He,Ee,et,"",function(_n){return _n})):He!=null&&(nt(He)&&(He=Je(He,et+(!He.key||kt&&kt.key===He.key?"":(""+He.key).replace(ft,"$&/")+"/")+ie)),Ee.push(He)),1;if(kt=0,Xe=Xe===""?".":Xe+":",Ae(ie))for(var xt=0;xt<ie.length;xt++){ze=ie[xt];var Ot=Xe+Mt(ze,xt);kt+=wt(ze,Ee,et,Ot,He)}else if(Ot=$(ie),typeof Ot=="function")for(ie=Ot.call(ie),xt=0;!(ze=ie.next()).done;)ze=ze.value,Ot=Xe+Mt(ze,xt++),kt+=wt(ze,Ee,et,Ot,He);else if(ze==="object")throw Ee=String(ie),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.");return kt}function St(ie,Ee,et){if(ie==null)return ie;var Xe=[],He=0;return wt(ie,Xe,"","",function(ze){return Ee.call(et,ze,He++)}),Xe}function mt(ie){if(ie._status===-1){var Ee=ie._result;Ee=Ee(),Ee.then(function(et){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=et)},function(et){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=et)}),ie._status===-1&&(ie._status=0,ie._result=Ee)}if(ie._status===1)return ie._result.default;throw ie._result}var Dt={current:null},Ce={transition:null},rt={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Ce,ReactCurrentOwner:le};function Me(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:St,forEach:function(ie,Ee,et){St(ie,function(){Ee.apply(this,arguments)},et)},count:function(ie){var Ee=0;return St(ie,function(){Ee++}),Ee},toArray:function(ie){return St(ie,function(Ee){return Ee})||[]},only:function(ie){if(!nt(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},bt.Component=J,bt.Fragment=i,bt.Profiler=c,bt.PureComponent=be,bt.StrictMode=h,bt.Suspense=b,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rt,bt.act=Me,bt.cloneElement=function(ie,Ee,et){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var Xe=Z({},ie.props),He=ie.key,ze=ie.ref,kt=ie._owner;if(Ee!=null){if(Ee.ref!==void 0&&(ze=Ee.ref,kt=le.current),Ee.key!==void 0&&(He=""+Ee.key),ie.type&&ie.type.defaultProps)var xt=ie.type.defaultProps;for(Ot in Ee)Re.call(Ee,Ot)&&!ke.hasOwnProperty(Ot)&&(Xe[Ot]=Ee[Ot]===void 0&&xt!==void 0?xt[Ot]:Ee[Ot])}var Ot=arguments.length-2;if(Ot===1)Xe.children=et;else if(1<Ot){xt=Array(Ot);for(var _n=0;_n<Ot;_n++)xt[_n]=arguments[_n+2];Xe.children=xt}return{$$typeof:d,type:ie.type,key:He,ref:ze,props:Xe,_owner:kt}},bt.createContext=function(ie){return ie={$$typeof:y,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:p,_context:ie},ie.Consumer=ie},bt.createElement=Ke,bt.createFactory=function(ie){var Ee=Ke.bind(null,ie);return Ee.type=ie,Ee},bt.createRef=function(){return{current:null}},bt.forwardRef=function(ie){return{$$typeof:k,render:ie}},bt.isValidElement=nt,bt.lazy=function(ie){return{$$typeof:B,_payload:{_status:-1,_result:ie},_init:mt}},bt.memo=function(ie,Ee){return{$$typeof:M,type:ie,compare:Ee===void 0?null:Ee}},bt.startTransition=function(ie){var Ee=Ce.transition;Ce.transition={};try{ie()}finally{Ce.transition=Ee}},bt.unstable_act=Me,bt.useCallback=function(ie,Ee){return Dt.current.useCallback(ie,Ee)},bt.useContext=function(ie){return Dt.current.useContext(ie)},bt.useDebugValue=function(){},bt.useDeferredValue=function(ie){return Dt.current.useDeferredValue(ie)},bt.useEffect=function(ie,Ee){return Dt.current.useEffect(ie,Ee)},bt.useId=function(){return Dt.current.useId()},bt.useImperativeHandle=function(ie,Ee,et){return Dt.current.useImperativeHandle(ie,Ee,et)},bt.useInsertionEffect=function(ie,Ee){return Dt.current.useInsertionEffect(ie,Ee)},bt.useLayoutEffect=function(ie,Ee){return Dt.current.useLayoutEffect(ie,Ee)},bt.useMemo=function(ie,Ee){return Dt.current.useMemo(ie,Ee)},bt.useReducer=function(ie,Ee,et){return Dt.current.useReducer(ie,Ee,et)},bt.useRef=function(ie){return Dt.current.useRef(ie)},bt.useState=function(ie){return Dt.current.useState(ie)},bt.useSyncExternalStore=function(ie,Ee,et){return Dt.current.useSyncExternalStore(ie,Ee,et)},bt.useTransition=function(){return Dt.current.useTransition()},bt.version="18.3.1",bt}var af;function Sc(){return af||(af=1,ec.exports=Pm()),ec.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf;function Sm(){if(lf)return Ql;lf=1;var d=Sc(),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,c=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function y(k,b,M){var B,T={},$=null,F=null;M!==void 0&&($=""+M),b.key!==void 0&&($=""+b.key),b.ref!==void 0&&(F=b.ref);for(B in b)h.call(b,B)&&!p.hasOwnProperty(B)&&(T[B]=b[B]);if(k&&k.defaultProps)for(B in b=k.defaultProps,b)T[B]===void 0&&(T[B]=b[B]);return{$$typeof:o,type:k,key:$,ref:F,props:T,_owner:c.current}}return Ql.Fragment=i,Ql.jsx=y,Ql.jsxs=y,Ql}var uf;function Bm(){return uf||(uf=1,Qh.exports=Sm()),Qh.exports}var X=Bm(),ae=Sc();const cu=lh(ae);var qu={},tc={exports:{}},Br={},nc={exports:{}},rc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function Tm(){return hf||(hf=1,(function(d){function o(Ce,rt){var Me=Ce.length;Ce.push(rt);e:for(;0<Me;){var ie=Me-1>>>1,Ee=Ce[ie];if(0<c(Ee,rt))Ce[ie]=rt,Ce[Me]=Ee,Me=ie;else break e}}function i(Ce){return Ce.length===0?null:Ce[0]}function h(Ce){if(Ce.length===0)return null;var rt=Ce[0],Me=Ce.pop();if(Me!==rt){Ce[0]=Me;e:for(var ie=0,Ee=Ce.length,et=Ee>>>1;ie<et;){var Xe=2*(ie+1)-1,He=Ce[Xe],ze=Xe+1,kt=Ce[ze];if(0>c(He,Me))ze<Ee&&0>c(kt,He)?(Ce[ie]=kt,Ce[ze]=Me,ie=ze):(Ce[ie]=He,Ce[Xe]=Me,ie=Xe);else if(ze<Ee&&0>c(kt,Me))Ce[ie]=kt,Ce[ze]=Me,ie=ze;else break e}}return rt}function c(Ce,rt){var Me=Ce.sortIndex-rt.sortIndex;return Me!==0?Me:Ce.id-rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;d.unstable_now=function(){return p.now()}}else{var y=Date,k=y.now();d.unstable_now=function(){return y.now()-k}}var b=[],M=[],B=1,T=null,$=3,F=!1,Z=!1,q=!1,J=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(Ce){for(var rt=i(M);rt!==null;){if(rt.callback===null)h(M);else if(rt.startTime<=Ce)h(M),rt.sortIndex=rt.expirationTime,o(b,rt);else break;rt=i(M)}}function Ae(Ce){if(q=!1,he(Ce),!Z)if(i(b)!==null)Z=!0,mt(Re);else{var rt=i(M);rt!==null&&Dt(Ae,rt.startTime-Ce)}}function Re(Ce,rt){Z=!1,q&&(q=!1,ce(Ke),Ke=-1),F=!0;var Me=$;try{for(he(rt),T=i(b);T!==null&&(!(T.expirationTime>rt)||Ce&&!Ne());){var ie=T.callback;if(typeof ie=="function"){T.callback=null,$=T.priorityLevel;var Ee=ie(T.expirationTime<=rt);rt=d.unstable_now(),typeof Ee=="function"?T.callback=Ee:T===i(b)&&h(b),he(rt)}else h(b);T=i(b)}if(T!==null)var et=!0;else{var Xe=i(M);Xe!==null&&Dt(Ae,Xe.startTime-rt),et=!1}return et}finally{T=null,$=Me,F=!1}}var le=!1,ke=null,Ke=-1,Je=5,nt=-1;function Ne(){return!(d.unstable_now()-nt<Je)}function ft(){if(ke!==null){var Ce=d.unstable_now();nt=Ce;var rt=!0;try{rt=ke(!0,Ce)}finally{rt?Mt():(le=!1,ke=null)}}else le=!1}var Mt;if(typeof be=="function")Mt=function(){be(ft)};else if(typeof MessageChannel<"u"){var wt=new MessageChannel,St=wt.port2;wt.port1.onmessage=ft,Mt=function(){St.postMessage(null)}}else Mt=function(){J(ft,0)};function mt(Ce){ke=Ce,le||(le=!0,Mt())}function Dt(Ce,rt){Ke=J(function(){Ce(d.unstable_now())},rt)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(Ce){Ce.callback=null},d.unstable_continueExecution=function(){Z||F||(Z=!0,mt(Re))},d.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Je=0<Ce?Math.floor(1e3/Ce):5},d.unstable_getCurrentPriorityLevel=function(){return $},d.unstable_getFirstCallbackNode=function(){return i(b)},d.unstable_next=function(Ce){switch($){case 1:case 2:case 3:var rt=3;break;default:rt=$}var Me=$;$=rt;try{return Ce()}finally{$=Me}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(Ce,rt){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Me=$;$=Ce;try{return rt()}finally{$=Me}},d.unstable_scheduleCallback=function(Ce,rt,Me){var ie=d.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?ie+Me:ie):Me=ie,Ce){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Me+Ee,Ce={id:B++,callback:rt,priorityLevel:Ce,startTime:Me,expirationTime:Ee,sortIndex:-1},Me>ie?(Ce.sortIndex=Me,o(M,Ce),i(b)===null&&Ce===i(M)&&(q?(ce(Ke),Ke=-1):q=!0,Dt(Ae,Me-ie))):(Ce.sortIndex=Ee,o(b,Ce),Z||F||(Z=!0,mt(Re))),Ce},d.unstable_shouldYield=Ne,d.unstable_wrapCallback=function(Ce){var rt=$;return function(){var Me=$;$=rt;try{return Ce.apply(this,arguments)}finally{$=Me}}}})(rc)),rc}var cf;function Am(){return cf||(cf=1,nc.exports=Tm()),nc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function Dm(){if(df)return Br;df=1;var d=Sc(),o=Am();function i(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,c={};function p(e,n){y(e,n),y(e+"Capture",n)}function y(e,n){for(c[e]=n,e=0;e<n.length;e++)h.add(n[e])}var k=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B={},T={};function $(e){return b.call(T,e)?!0:b.call(B,e)?!1:M.test(e)?T[e]=!0:(B[e]=!0,!1)}function F(e,n,l,g){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return g?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Z(e,n,l,g){if(n===null||typeof n>"u"||F(e,n,l,g))return!0;if(g)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function q(e,n,l,g,w,C,O){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=l,this.propertyName=e,this.type=n,this.sanitizeURL=C,this.removeEmptyString=O}var J={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){J[e]=new q(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];J[n]=new q(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){J[e]=new q(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){J[e]=new q(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){J[e]=new q(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){J[e]=new q(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){J[e]=new q(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){J[e]=new q(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){J[e]=new q(e,5,!1,e.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ce,be);J[n]=new q(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ce,be);J[n]=new q(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ce,be);J[n]=new q(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){J[e]=new q(e,1,!1,e.toLowerCase(),null,!1,!1)}),J.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){J[e]=new q(e,1,!1,e.toLowerCase(),null,!0,!0)});function he(e,n,l,g){var w=J.hasOwnProperty(n)?J[n]:null;(w!==null?w.type!==0:g||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Z(n,l,w,g)&&(l=null),g||w===null?$(n)&&(l===null?e.removeAttribute(n):e.setAttribute(n,""+l)):w.mustUseProperty?e[w.propertyName]=l===null?w.type===3?!1:"":l:(n=w.attributeName,g=w.attributeNamespace,l===null?e.removeAttribute(n):(w=w.type,l=w===3||w===4&&l===!0?"":""+l,g?e.setAttributeNS(g,n,l):e.setAttribute(n,l))))}var Ae=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),le=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),Ke=Symbol.for("react.strict_mode"),Je=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),Mt=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),St=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),Dt=Symbol.for("react.offscreen"),Ce=Symbol.iterator;function rt(e){return e===null||typeof e!="object"?null:(e=Ce&&e[Ce]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,ie;function Ee(e){if(ie===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);ie=n&&n[1]||""}return`
`+ie+e}var et=!1;function Xe(e,n){if(!e||et)return"";et=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Le){var g=Le}Reflect.construct(e,[],n)}else{try{n.call()}catch(Le){g=Le}e.call(n.prototype)}else{try{throw Error()}catch(Le){g=Le}e()}}catch(Le){if(Le&&g&&typeof Le.stack=="string"){for(var w=Le.stack.split(`
`),C=g.stack.split(`
`),O=w.length-1,W=C.length-1;1<=O&&0<=W&&w[O]!==C[W];)W--;for(;1<=O&&0<=W;O--,W--)if(w[O]!==C[W]){if(O!==1||W!==1)do if(O--,W--,0>W||w[O]!==C[W]){var ne=`
`+w[O].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=O&&0<=W);break}}}finally{et=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?Ee(e):""}function He(e){switch(e.tag){case 5:return Ee(e.type);case 16:return Ee("Lazy");case 13:return Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 2:case 15:return e=Xe(e.type,!1),e;case 11:return e=Xe(e.type.render,!1),e;case 1:return e=Xe(e.type,!0),e;default:return""}}function ze(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ke:return"Fragment";case le:return"Portal";case Je:return"Profiler";case Ke:return"StrictMode";case Mt:return"Suspense";case wt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ne:return(e.displayName||"Context")+".Consumer";case nt:return(e._context.displayName||"Context")+".Provider";case ft:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case St:return n=e.displayName||null,n!==null?n:ze(e.type)||"Memo";case mt:n=e._payload,e=e._init;try{return ze(e(n))}catch{}}return null}function kt(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(n);case 8:return n===Ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function xt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ot(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function _n(e){var n=Ot(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),g=""+e[n];if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var w=l.get,C=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return w.call(this)},set:function(O){g=""+O,C.call(this,O)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Bi(e){e._valueTracker||(e._valueTracker=_n(e))}function Ti(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),g="";return e&&(g=Ot(e)?e.checked?"true":"false":e.value),e=g,e!==l?(n.setValue(e),!0):!1}function Ai(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hs(e,n){var l=n.checked;return Me({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function Fo(e,n){var l=n.defaultValue==null?"":n.defaultValue,g=n.checked!=null?n.checked:n.defaultChecked;l=xt(n.value!=null?n.value:l),e._wrapperState={initialChecked:g,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function No(e,n){n=n.checked,n!=null&&he(e,"checked",n,!1)}function Di(e,n){No(e,n);var l=xt(n.value),g=n.type;if(l!=null)g==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(g==="submit"||g==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Zs(e,n.type,l):n.hasOwnProperty("defaultValue")&&Zs(e,n.type,xt(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function si(e,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var g=n.type;if(!(g!=="submit"&&g!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,l||n===e.value||(e.value=n),e.defaultValue=n}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function Zs(e,n,l){(n!=="number"||Ai(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var Oi=Array.isArray;function Ur(e,n,l,g){if(e=e.options,n){n={};for(var w=0;w<l.length;w++)n["$"+l[w]]=!0;for(l=0;l<e.length;l++)w=n.hasOwnProperty("$"+e[l].value),e[l].selected!==w&&(e[l].selected=w),w&&g&&(e[l].defaultSelected=!0)}else{for(l=""+xt(l),n=null,w=0;w<e.length;w++){if(e[w].value===l){e[w].selected=!0,g&&(e[w].defaultSelected=!0);return}n!==null||e[w].disabled||(n=e[w])}n!==null&&(n.selected=!0)}}function qs(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(i(91));return Me({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zo(e,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(i(92));if(Oi(l)){if(1<l.length)throw Error(i(93));l=l[0]}n=l}n==null&&(n=""),l=n}e._wrapperState={initialValue:xt(l)}}function Ra(e,n){var l=xt(n.value),g=xt(n.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),n.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),g!=null&&(e.defaultValue=""+g)}function ja(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Ws(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ks(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Ws(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,Uo=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,g,w){MSApp.execUnsafeLocalFunction(function(){return e(n,l,g,w)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function oi(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ji=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(e){ji.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ri[n]=Ri[e]})});function $o(e,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||Ri.hasOwnProperty(e)&&Ri[e]?(""+n).trim():n+"px"}function hs(e,n){e=e.style;for(var l in n)if(n.hasOwnProperty(l)){var g=l.indexOf("--")===0,w=$o(l,n[l],g);l==="float"&&(l="cssFloat"),g?e.setProperty(l,w):e[l]=w}}var Ii=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Js(e,n){if(n){if(Ii[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(i(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(n.style!=null&&typeof n.style!="object")throw Error(i(62))}}function Tr(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=null;function Vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,ai=null,li=null;function Ia(e){if(e=Er(e)){if(typeof cs!="function")throw Error(i(280));var n=e.stateNode;n&&(n=Lo(n),cs(e.stateNode,e.type,n))}}function Fa(e){ai?li?li.push(e):li=[e]:ai=e}function Ho(){if(ai){var e=ai,n=li;if(li=ai=null,Ia(e),n)for(e=0;e<n.length;e++)Ia(n[e])}}function Zo(e,n){return e(n)}function Na(){}var qo=!1;function Ys(e,n,l){if(qo)return e(n,l);qo=!0;try{return Zo(e,n,l)}finally{qo=!1,(ai!==null||li!==null)&&(Na(),Ho())}}function Fi(e,n){var l=e.stateNode;if(l===null)return null;var g=Lo(l);if(g===null)return null;l=g[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(e=e.type,g=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!g;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(i(231,n,typeof l));return l}var Wo=!1;if(k)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Wo=!1}function Pl(e,n,l,g,w,C,O,W,ne){var Le=Array.prototype.slice.call(arguments,3);try{n.apply(l,Le)}catch(De){this.onError(De)}}var yn=!1,Ye=null,fs=!1,Xs=null,Ko={onError:function(e){yn=!0,Ye=e}};function za(e,n,l,g,w,C,O,W,ne){yn=!1,Ye=null,Pl.apply(Ko,arguments)}function Jo(e,n,l,g,w,C,O,W,ne){if(za.apply(this,arguments),yn){if(yn){var Le=Ye;yn=!1,Ye=null}else throw Error(i(198));fs||(fs=!0,Xs=Le)}}function $r(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function ui(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Yo(e){if($r(e)!==e)throw Error(i(188))}function Sl(e){var n=e.alternate;if(!n){if(n=$r(e),n===null)throw Error(i(188));return n!==e?null:e}for(var l=e,g=n;;){var w=l.return;if(w===null)break;var C=w.alternate;if(C===null){if(g=w.return,g!==null){l=g;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===l)return Yo(w),e;if(C===g)return Yo(w),n;C=C.sibling}throw Error(i(188))}if(l.return!==g.return)l=w,g=C;else{for(var O=!1,W=w.child;W;){if(W===l){O=!0,l=w,g=C;break}if(W===g){O=!0,g=w,l=C;break}W=W.sibling}if(!O){for(W=C.child;W;){if(W===l){O=!0,l=C,g=w;break}if(W===g){O=!0,g=C,l=w;break}W=W.sibling}if(!O)throw Error(i(189))}}if(l.alternate!==g)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?e:n}function Ua(e){return e=Sl(e),e!==null?$a(e):null}function $a(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=$a(e);if(n!==null)return n;e=e.sibling}return null}var Ga=o.unstable_scheduleCallback,ps=o.unstable_cancelCallback,Xo=o.unstable_shouldYield,Qs=o.unstable_requestPaint,qt=o.unstable_now,Bl=o.unstable_getCurrentPriorityLevel,Qo=o.unstable_ImmediatePriority,Va=o.unstable_UserBlockingPriority,eo=o.unstable_NormalPriority,ea=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,ms=null,Wn=null;function Gr(e){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(ms,e,void 0,(e.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:zi,Ft=Math.log,gs=Math.LN2;function zi(e){return e>>>=0,e===0?32:31-(Ft(e)/gs|0)|0}var cr=64,Ui=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nt(e,n){var l=e.pendingLanes;if(l===0)return 0;var g=0,w=e.suspendedLanes,C=e.pingedLanes,O=l&268435455;if(O!==0){var W=O&~w;W!==0?g=ut(W):(C&=O,C!==0&&(g=ut(C)))}else O=l&~w,O!==0?g=ut(O):C!==0&&(g=ut(C));if(g===0)return 0;if(n!==0&&n!==g&&(n&w)===0&&(w=g&-g,C=n&-n,w>=C||w===16&&(C&4194240)!==0))return n;if((g&4)!==0&&(g|=l&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=g;0<n;)l=31-pt(n),w=1<<l,g|=e[l],n&=~w;return g}function ta(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function to(e,n){for(var l=e.suspendedLanes,g=e.pingedLanes,w=e.expirationTimes,C=e.pendingLanes;0<C;){var O=31-pt(C),W=1<<O,ne=w[O];ne===-1?((W&l)===0||(W&g)!==0)&&(w[O]=ta(W,n)):ne<=n&&(e.expiredLanes|=W),C&=~W}}function Pn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ha(){var e=cr;return cr<<=1,(cr&4194240)===0&&(cr=64),e}function $i(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function Kn(e,n,l){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-pt(n),e[n]=l}function Kt(e,n){var l=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var g=e.eventTimes;for(e=e.expirationTimes;0<l;){var w=31-pt(l),C=1<<w;n[w]=0,g[w]=-1,e[w]=-1,l&=~C}}function Ar(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var g=31-pt(l),w=1<<g;w&n|e[g]&n&&(e[g]|=n),l&=~w}}var Ct=0;function Gi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var no,Vr,ro,io,_s,ys=!1,Vi=[],Jn=null,Dr=null,dr=null,vs=new Map,lt=new Map,rn=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function na(e,n){switch(e){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":vs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(n.pointerId)}}function hi(e,n,l,g,w,C){return e===null||e.nativeEvent!==C?(e={blockedOn:n,domEventName:l,eventSystemFlags:g,nativeEvent:C,targetContainers:[w]},n!==null&&(n=Er(n),n!==null&&Vr(n)),e):(e.eventSystemFlags|=g,n=e.targetContainers,w!==null&&n.indexOf(w)===-1&&n.push(w),e)}function ra(e,n,l,g,w){switch(n){case"focusin":return Jn=hi(Jn,e,n,l,g,w),!0;case"dragenter":return Dr=hi(Dr,e,n,l,g,w),!0;case"mouseover":return dr=hi(dr,e,n,l,g,w),!0;case"pointerover":var C=w.pointerId;return vs.set(C,hi(vs.get(C)||null,e,n,l,g,w)),!0;case"gotpointercapture":return C=w.pointerId,lt.set(C,hi(lt.get(C)||null,e,n,l,g,w)),!0}return!1}function Or(e){var n=vi(e.target);if(n!==null){var l=$r(n);if(l!==null){if(n=l.tag,n===13){if(n=ui(l),n!==null){e.blockedOn=n,_s(e.priority,function(){ro(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fr(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=oo(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var g=new l.constructor(l.type,l);Go=g,l.target.dispatchEvent(g),Go=null}else return n=Er(l),n!==null&&Vr(n),e.blockedOn=l,!1;n.shift()}return!0}function so(e,n,l){fr(e)&&l.delete(n)}function ws(){ys=!1,Jn!==null&&fr(Jn)&&(Jn=null),Dr!==null&&fr(Dr)&&(Dr=null),dr!==null&&fr(dr)&&(dr=null),vs.forEach(so),lt.forEach(so)}function Wt(e,n){e.blockedOn===n&&(e.blockedOn=null,ys||(ys=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ws)))}function Yn(e){function n(w){return Wt(w,e)}if(0<Vi.length){Wt(Vi[0],e);for(var l=1;l<Vi.length;l++){var g=Vi[l];g.blockedOn===e&&(g.blockedOn=null)}}for(Jn!==null&&Wt(Jn,e),Dr!==null&&Wt(Dr,e),dr!==null&&Wt(dr,e),vs.forEach(n),lt.forEach(n),l=0;l<rn.length;l++)g=rn[l],g.blockedOn===e&&(g.blockedOn=null);for(;0<rn.length&&(l=rn[0],l.blockedOn===null);)Or(l),l.blockedOn===null&&rn.shift()}var ci=Ae.ReactCurrentBatchConfig,xs=!0;function Tl(e,n,l,g){var w=Ct,C=ci.transition;ci.transition=null;try{Ct=1,Ls(e,n,l,g)}finally{Ct=w,ci.transition=C}}function Za(e,n,l,g){var w=Ct,C=ci.transition;ci.transition=null;try{Ct=4,Ls(e,n,l,g)}finally{Ct=w,ci.transition=C}}function Ls(e,n,l,g){if(xs){var w=oo(e,n,l,g);if(w===null)t(e,n,g,di,l),na(e,g);else if(ra(w,e,n,l,g))g.stopPropagation();else if(na(e,g),n&4&&-1<It.indexOf(e)){for(;w!==null;){var C=Er(w);if(C!==null&&no(C),C=oo(e,n,l,g),C===null&&t(e,n,g,di,l),C===w)break;w=C}w!==null&&g.stopPropagation()}else t(e,n,g,null,l)}}var di=null;function oo(e,n,l,g){if(di=null,e=Vo(g),e=vi(e),e!==null)if(n=$r(e),n===null)e=null;else if(l=n.tag,l===13){if(e=ui(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return di=e,null}function Lt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Qo:return 1;case Va:return 4;case eo:case ea:return 16;case Ni:return 536870912;default:return 16}default:return 16}}var Rr=null,ht=null,pr=null;function Hi(){if(pr)return pr;var e,n=ht,l=n.length,g,w="value"in Rr?Rr.value:Rr.textContent,C=w.length;for(e=0;e<l&&n[e]===w[e];e++);var O=l-e;for(g=1;g<=O&&n[l-g]===w[C-g];g++);return pr=w.slice(e,1<g?1-g:void 0)}function ao(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fi(){return!0}function qa(){return!1}function dn(e){function n(l,g,w,C,O){this._reactName=l,this._targetInst=w,this.type=g,this.nativeEvent=C,this.target=O,this.currentTarget=null;for(var W in e)e.hasOwnProperty(W)&&(l=e[W],this[W]=l?l(C):C[W]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?fi:qa,this.isPropagationStopped=qa,this}return Me(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),n}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=dn(jr),Sn=Me({},jr,{view:0,detail:0}),Wa=dn(Sn),sn,sa,Zi,Xn=Me({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zi&&(Zi&&e.type==="mousemove"?(sn=e.screenX-Zi.screenX,sa=e.screenY-Zi.screenY):sa=sn=0,Zi=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:sa}}),oa=dn(Xn),Ka=Me({},Xn,{dataTransfer:0}),aa=dn(Ka),Al=Me({},Sn,{relatedTarget:0}),lo=dn(Al),la=Me({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Dl=dn(la),on=Me({},jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fn=dn(on),Ja=Me({},jr,{data:0}),Hr=dn(Ja),pi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Bn[e])?!!n[e]:!1}function mi(){return Ol}var Tn=Me({},Sn,{key:function(e){if(e.key){var n=pi[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Un=dn(Tn),ua=Me({},Xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=dn(ua),ha=Me({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),$n=dn(ha),mr=Me({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),uo=dn(mr),ca=Me({},Xn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),da=dn(ca),vn=[9,13,27,32],qr=k&&"CompositionEvent"in window,bs=null;k&&"documentMode"in document&&(bs=document.documentMode);var Qn=k&&"TextEvent"in window&&!bs,Ya=k&&(!qr||bs&&8<bs&&11>=bs),gi=" ",Xa=!1;function qi(e,n){switch(e){case"keyup":return vn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ir=!1;function Rl(e,n){switch(e){case"compositionend":return Cs(n);case"keypress":return n.which!==32?null:(Xa=!0,gi);case"textInput":return e=n.data,e===gi&&Xa?null:e;default:return null}}function Fr(e,n){if(Ir)return e==="compositionend"||!qr&&qi(e,n)?(e=Hi(),pr=ht=Rr=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ya&&n.locale!=="ko"?null:n.data;default:return null}}var gr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!gr[e.type]:n==="textarea"}function ho(e,n,l,g){Fa(g),n=m(n,"onChange"),0<n.length&&(l=new ia("onChange","change",null,l,g),e.push({event:l,listeners:n}))}var er=null,jn=null;function jl(e){xr(e,0)}function tr(e){var n=Xr(e);if(Ti(n))return e}function Es(e,n){if(e==="change")return n}var _r=!1;if(k){var Wi;if(k){var co="oninput"in document;if(!co){var Ms=document.createElement("div");Ms.setAttribute("oninput","return;"),co=typeof Ms.oninput=="function"}Wi=co}else Wi=!1;_r=Wi&&(!document.documentMode||9<document.documentMode)}function Ps(){er&&(er.detachEvent("onpropertychange",Ss),jn=er=null)}function Ss(e){if(e.propertyName==="value"&&tr(jn)){var n=[];ho(n,jn,e,Vo(e)),Ys(jl,n)}}function fo(e,n,l){e==="focusin"?(Ps(),er=n,jn=l,er.attachEvent("onpropertychange",Ss)):e==="focusout"&&Ps()}function Ki(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tr(jn)}function po(e,n){if(e==="click")return tr(n)}function mo(e,n){if(e==="input"||e==="change")return tr(n)}function go(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Gn=typeof Object.is=="function"?Object.is:go;function yr(e,n){if(Gn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),g=Object.keys(n);if(l.length!==g.length)return!1;for(g=0;g<l.length;g++){var w=l[g];if(!b.call(n,w)||!Gn(e[w],n[w]))return!1}return!0}function Qa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ji(e,n){var l=Qa(e);e=0;for(var g;l;){if(l.nodeType===3){if(g=e+l.textContent.length,e<=n&&g>=n)return{node:l,offset:n-e};e=g}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qa(l)}}function pa(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?pa(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ma(){for(var e=window,n=Ai();n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=Ai(e.document)}return n}function ga(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function vr(e){var n=ma(),l=e.focusedElem,g=e.selectionRange;if(n!==l&&l&&l.ownerDocument&&pa(l.ownerDocument.documentElement,l)){if(g!==null&&ga(l)){if(n=g.start,e=g.end,e===void 0&&(e=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(e,l.value.length);else if(e=(n=l.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var w=l.textContent.length,C=Math.min(g.start,w);g=g.end===void 0?C:Math.min(g.end,w),!e.extend&&C>g&&(w=g,g=C,C=w),w=Ji(l,C);var O=Ji(l,g);w&&O&&(e.rangeCount!==1||e.anchorNode!==w.node||e.anchorOffset!==w.offset||e.focusNode!==O.node||e.focusOffset!==O.offset)&&(n=n.createRange(),n.setStart(w.node,w.offset),e.removeAllRanges(),C>g?(e.addRange(n),e.extend(O.node,O.offset)):(n.setEnd(O.node,O.offset),e.addRange(n)))}}for(n=[],e=l;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)e=n[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wr=k&&"documentMode"in document&&11>=document.documentMode,Yi=null,Xi=null,Bs=null,_o=!1;function el(e,n,l){var g=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;_o||Yi==null||Yi!==Ai(g)||(g=Yi,"selectionStart"in g&&ga(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Bs&&yr(Bs,g)||(Bs=g,g=m(Xi,"onSelect"),0<g.length&&(n=new ia("onSelect","select",null,n,l),e.push({event:n,listeners:g}),n.target=Yi)))}function Kr(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var Qi={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionend:Kr("Transition","TransitionEnd")},Jr={},yo={};k&&(yo=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function _i(e){if(Jr[e])return Jr[e];if(!Qi[e])return e;var n=Qi[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in yo)return Jr[e]=n[l];return e}var tl=_i("animationend"),wr=_i("animationiteration"),vo=_i("animationstart"),Ts=_i("transitionend"),es=new Map,nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,n){es.set(e,n),p(n,[e])}for(var Qt=0;Qt<nl.length;Qt++){var an=nl[Qt],_a=an.toLowerCase(),nr=an[0].toUpperCase()+an.slice(1);In(_a,"on"+nr)}In(tl,"onAnimationEnd"),In(wr,"onAnimationIteration"),In(vo,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Ts,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var st="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wo=new Set("cancel close invalid load scroll toggle".split(" ").concat(st));function As(e,n,l){var g=e.type||"unknown-event";e.currentTarget=l,Jo(g,n,void 0,e),e.currentTarget=null}function xr(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var g=e[l],w=g.event;g=g.listeners;e:{var C=void 0;if(n)for(var O=g.length-1;0<=O;O--){var W=g[O],ne=W.instance,Le=W.currentTarget;if(W=W.listener,ne!==C&&w.isPropagationStopped())break e;As(w,W,Le),C=ne}else for(O=0;O<g.length;O++){if(W=g[O],ne=W.instance,Le=W.currentTarget,W=W.listener,ne!==C&&w.isPropagationStopped())break e;As(w,W,Le),C=ne}}}if(fs)throw e=Xs,fs=!1,Xs=null,e}function ct(e,n){var l=n[yi];l===void 0&&(l=n[yi]=new Set);var g=e+"__bubble";l.has(g)||(Yr(n,e,2,!1),l.add(g))}function xo(e,n,l){var g=0;n&&(g|=4),Yr(l,e,g,n)}var pn="_reactListening"+Math.random().toString(36).slice(2);function ln(e){if(!e[pn]){e[pn]=!0,h.forEach(function(l){l!=="selectionchange"&&(wo.has(l)||xo(l,!1,e),xo(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[pn]||(n[pn]=!0,xo("selectionchange",!1,n))}}function Yr(e,n,l,g){switch(Lt(n)){case 1:var w=Tl;break;case 4:w=Za;break;default:w=Ls}l=w.bind(null,n,l,e),w=void 0,!Wo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(w=!0),g?w!==void 0?e.addEventListener(n,l,{capture:!0,passive:w}):e.addEventListener(n,l,!0):w!==void 0?e.addEventListener(n,l,{passive:w}):e.addEventListener(n,l,!1)}function t(e,n,l,g,w){var C=g;if((n&1)===0&&(n&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var W=g.stateNode.containerInfo;if(W===w||W.nodeType===8&&W.parentNode===w)break;if(O===4)for(O=g.return;O!==null;){var ne=O.tag;if((ne===3||ne===4)&&(ne=O.stateNode.containerInfo,ne===w||ne.nodeType===8&&ne.parentNode===w))return;O=O.return}for(;W!==null;){if(O=vi(W),O===null)return;if(ne=O.tag,ne===5||ne===6){g=C=O;continue e}W=W.parentNode}}g=g.return}Ys(function(){var Le=C,De=Vo(l),Oe=[];e:{var Te=es.get(e);if(Te!==void 0){var Ge=ia,We=e;switch(e){case"keypress":if(ao(l)===0)break e;case"keydown":case"keyup":Ge=Un;break;case"focusin":We="focus",Ge=lo;break;case"focusout":We="blur",Ge=lo;break;case"beforeblur":case"afterblur":Ge=lo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=$n;break;case tl:case wr:case vo:Ge=Dl;break;case Ts:Ge=uo;break;case"scroll":Ge=Wa;break;case"wheel":Ge=da;break;case"copy":case"cut":case"paste":Ge=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=ks}var Qe=(n&4)!==0,cn=!Qe&&e==="scroll",_e=Qe?Te!==null?Te+"Capture":null:Te;Qe=[];for(var se=Le,ve;se!==null;){ve=se;var je=ve.stateNode;if(ve.tag===5&&je!==null&&(ve=je,_e!==null&&(je=Fi(se,_e),je!=null&&Qe.push(a(se,je,ve)))),cn)break;se=se.return}0<Qe.length&&(Te=new Ge(Te,We,null,l,De),Oe.push({event:Te,listeners:Qe}))}}if((n&7)===0){e:{if(Te=e==="mouseover"||e==="pointerover",Ge=e==="mouseout"||e==="pointerout",Te&&l!==Go&&(We=l.relatedTarget||l.fromElement)&&(vi(We)||We[Tt]))break e;if((Ge||Te)&&(Te=De.window===De?De:(Te=De.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ge?(We=l.relatedTarget||l.toElement,Ge=Le,We=We?vi(We):null,We!==null&&(cn=$r(We),We!==cn||We.tag!==5&&We.tag!==6)&&(We=null)):(Ge=null,We=Le),Ge!==We)){if(Qe=oa,je="onMouseLeave",_e="onMouseEnter",se="mouse",(e==="pointerout"||e==="pointerover")&&(Qe=ks,je="onPointerLeave",_e="onPointerEnter",se="pointer"),cn=Ge==null?Te:Xr(Ge),ve=We==null?Te:Xr(We),Te=new Qe(je,se+"leave",Ge,l,De),Te.target=cn,Te.relatedTarget=ve,je=null,vi(De)===Le&&(Qe=new Qe(_e,se+"enter",We,l,De),Qe.target=ve,Qe.relatedTarget=cn,je=Qe),cn=je,Ge&&We)t:{for(Qe=Ge,_e=We,se=0,ve=Qe;ve;ve=v(ve))se++;for(ve=0,je=_e;je;je=v(je))ve++;for(;0<se-ve;)Qe=v(Qe),se--;for(;0<ve-se;)_e=v(_e),ve--;for(;se--;){if(Qe===_e||_e!==null&&Qe===_e.alternate)break t;Qe=v(Qe),_e=v(_e)}Qe=null}else Qe=null;Ge!==null&&S(Oe,Te,Ge,Qe,!1),We!==null&&cn!==null&&S(Oe,cn,We,Qe,!0)}}e:{if(Te=Le?Xr(Le):window,Ge=Te.nodeName&&Te.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Te.type==="file")var tt=Es;else if(fa(Te))if(_r)tt=mo;else{tt=Ki;var ot=fo}else(Ge=Te.nodeName)&&Ge.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(tt=po);if(tt&&(tt=tt(e,Le))){ho(Oe,tt,l,De);break e}ot&&ot(e,Te,Le),e==="focusout"&&(ot=Te._wrapperState)&&ot.controlled&&Te.type==="number"&&Zs(Te,"number",Te.value)}switch(ot=Le?Xr(Le):window,e){case"focusin":(fa(ot)||ot.contentEditable==="true")&&(Yi=ot,Xi=Le,Bs=null);break;case"focusout":Bs=Xi=Yi=null;break;case"mousedown":_o=!0;break;case"contextmenu":case"mouseup":case"dragend":_o=!1,el(Oe,l,De);break;case"selectionchange":if(Wr)break;case"keydown":case"keyup":el(Oe,l,De)}var at;if(qr)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Ir?qi(e,l)&&(dt="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(dt="onCompositionStart");dt&&(Ya&&l.locale!=="ko"&&(Ir||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Ir&&(at=Hi()):(Rr=De,ht="value"in Rr?Rr.value:Rr.textContent,Ir=!0)),ot=m(Le,dt),0<ot.length&&(dt=new Hr(dt,e,null,l,De),Oe.push({event:dt,listeners:ot}),at?dt.data=at:(at=Cs(l),at!==null&&(dt.data=at)))),(at=Qn?Rl(e,l):Fr(e,l))&&(Le=m(Le,"onBeforeInput"),0<Le.length&&(De=new Hr("onBeforeInput","beforeinput",null,l,De),Oe.push({event:De,listeners:Le}),De.data=at))}xr(Oe,n)})}function a(e,n,l){return{instance:e,listener:n,currentTarget:l}}function m(e,n){for(var l=n+"Capture",g=[];e!==null;){var w=e,C=w.stateNode;w.tag===5&&C!==null&&(w=C,C=Fi(e,l),C!=null&&g.unshift(a(e,C,w)),C=Fi(e,n),C!=null&&g.push(a(e,C,w))),e=e.return}return g}function v(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S(e,n,l,g,w){for(var C=n._reactName,O=[];l!==null&&l!==g;){var W=l,ne=W.alternate,Le=W.stateNode;if(ne!==null&&ne===g)break;W.tag===5&&Le!==null&&(W=Le,w?(ne=Fi(l,C),ne!=null&&O.unshift(a(l,ne,W))):w||(ne=Fi(l,C),ne!=null&&O.push(a(l,ne,W)))),l=l.return}O.length!==0&&e.push({event:n,listeners:O})}var j=/\r\n?/g,Y=/\u0000|\uFFFD/g;function fe(e){return(typeof e=="string"?e:""+e).replace(j,`
`).replace(Y,"")}function xe(e,n,l){if(n=fe(n),fe(e)!==n&&l)throw Error(i(425))}function Se(){}var Fe=null,it=null;function gt(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var un=typeof setTimeout=="function"?setTimeout:void 0,en=typeof clearTimeout=="function"?clearTimeout:void 0,wn=typeof Promise=="function"?Promise:void 0,Gt=typeof queueMicrotask=="function"?queueMicrotask:typeof wn<"u"?function(e){return wn.resolve(null).then(e).catch(Lr)}:un;function Lr(e){setTimeout(function(){throw e})}function Ds(e,n){var l=n,g=0;do{var w=l.nextSibling;if(e.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(g===0){e.removeChild(w),Yn(n);return}g--}else l!=="$"&&l!=="$?"&&l!=="$!"||g++;l=w}while(l);Yn(n)}function rr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ya(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return e;n--}else l==="/$"&&n++}e=e.previousSibling}return null}var kr=Math.random().toString(36).slice(2),br="__reactFiber$"+kr,ts="__reactProps$"+kr,Tt="__reactContainer$"+kr,yi="__reactEvents$"+kr,Il="__reactListeners$"+kr,Cr="__reactHandles$"+kr;function vi(e){var n=e[br];if(n)return n;for(var l=e.parentNode;l;){if(n=l[Tt]||l[br]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=ya(e);e!==null;){if(l=e[br])return l;e=ya(e)}return n}e=l,l=e.parentNode}return null}function Er(e){return e=e[br]||e[Tt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Lo(e){return e[ts]||null}var rl=[],ko=-1;function wi(e){return{current:e}}function Ut(e){0>ko||(e.current=rl[ko],rl[ko]=null,ko--)}function zt(e,n){ko++,rl[ko]=e.current,e.current=n}var ns={},tn=wi(ns),xn=wi(!1),Os=ns;function bo(e,n){var l=e.type.contextTypes;if(!l)return ns;var g=e.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===n)return g.__reactInternalMemoizedMaskedChildContext;var w={},C;for(C in l)w[C]=n[C];return g&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=w),w}function Ln(e){return e=e.childContextTypes,e!=null}function Rs(){Ut(xn),Ut(tn)}function Fl(e,n,l){if(tn.current!==ns)throw Error(i(168));zt(tn,n),zt(xn,l)}function vu(e,n,l){var g=e.stateNode;if(n=n.childContextTypes,typeof g.getChildContext!="function")return l;g=g.getChildContext();for(var w in g)if(!(w in n))throw Error(i(108,kt(e)||"Unknown",w));return Me({},l,g)}function il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ns,Os=tn.current,zt(tn,e),zt(xn,xn.current),!0}function Nl(e,n,l){var g=e.stateNode;if(!g)throw Error(i(169));l?(e=vu(e,n,Os),g.__reactInternalMemoizedMergedChildContext=e,Ut(xn),Ut(tn),zt(tn,e)):Ut(xn),zt(xn,l)}var Qr=null,sl=!1,zl=!1;function Ul(e){Qr===null?Qr=[e]:Qr.push(e)}function fh(e){sl=!0,Ul(e)}function rs(){if(!zl&&Qr!==null){zl=!0;var e=0,n=Ct;try{var l=Qr;for(Ct=1;e<l.length;e++){var g=l[e];do g=g(!0);while(g!==null)}Qr=null,sl=!1}catch(w){throw Qr!==null&&(Qr=Qr.slice(e+1)),Ga(Qo,rs),w}finally{Ct=n,zl=!1}}return null}var Co=[],Eo=0,ol=null,al=0,ir=[],kn=0,ei=null,xi=1,Li="";function js(e,n){Co[Eo++]=al,Co[Eo++]=ol,ol=e,al=n}function hn(e,n,l){ir[kn++]=xi,ir[kn++]=Li,ir[kn++]=ei,ei=e;var g=xi;e=Li;var w=32-pt(g)-1;g&=~(1<<w),l+=1;var C=32-pt(n)+w;if(30<C){var O=w-w%5;C=(g&(1<<O)-1).toString(32),g>>=O,w-=O,xi=1<<32-pt(n)+w|l<<w|g,Li=C+e}else xi=1<<C|l<<w|g,Li=e}function ti(e){e.return!==null&&(js(e,1),hn(e,1,0))}function $l(e){for(;e===ol;)ol=Co[--Eo],Co[Eo]=null,al=Co[--Eo],Co[Eo]=null;for(;e===ei;)ei=ir[--kn],ir[kn]=null,Li=ir[--kn],ir[kn]=null,xi=ir[--kn],ir[kn]=null}var sr=null,Fn=null,Vt=!1,Nr=null;function wu(e,n){var l=ii(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=e,n=e.deletions,n===null?(e.deletions=[l],e.flags|=16):n.push(l)}function r(e,n){switch(e.tag){case 5:var l=e.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,sr=e,Fn=rr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,sr=e,Fn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=ei!==null?{id:xi,overflow:Li}:null,e.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=ii(18,null,null,0),l.stateNode=n,l.return=e,e.child=l,sr=e,Fn=null,!0):!1;default:return!1}}function s(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u(e){if(Vt){var n=Fn;if(n){var l=n;if(!r(e,n)){if(s(e))throw Error(i(418));n=rr(l.nextSibling);var g=sr;n&&r(e,n)?wu(g,l):(e.flags=e.flags&-4097|2,Vt=!1,sr=e)}}else{if(s(e))throw Error(i(418));e.flags=e.flags&-4097|2,Vt=!1,sr=e}}}function f(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sr=e}function _(e){if(e!==sr)return!1;if(!Vt)return f(e),Vt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!gt(e.type,e.memoizedProps)),n&&(n=Fn)){if(s(e))throw x(),Error(i(418));for(;n;)wu(e,n),n=rr(n.nextSibling)}if(f(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(n===0){Fn=rr(e.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}e=e.nextSibling}Fn=null}}else Fn=sr?rr(e.stateNode.nextSibling):null;return!0}function x(){for(var e=Fn;e;)e=rr(e.nextSibling)}function E(){Fn=sr=null,Vt=!1}function P(e){Nr===null?Nr=[e]:Nr.push(e)}var D=Ae.ReactCurrentBatchConfig;function R(e,n,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(i(309));var g=l.stateNode}if(!g)throw Error(i(147,e));var w=g,C=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===C?n.ref:(n=function(O){var W=w.refs;O===null?delete W[C]:W[C]=O},n._stringRef=C,n)}if(typeof e!="string")throw Error(i(284));if(!l._owner)throw Error(i(290,e))}return e}function K(e,n){throw e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function V(e){var n=e._init;return n(e._payload)}function ge(e){function n(_e,se){if(e){var ve=_e.deletions;ve===null?(_e.deletions=[se],_e.flags|=16):ve.push(se)}}function l(_e,se){if(!e)return null;for(;se!==null;)n(_e,se),se=se.sibling;return null}function g(_e,se){for(_e=new Map;se!==null;)se.key!==null?_e.set(se.key,se):_e.set(se.index,se),se=se.sibling;return _e}function w(_e,se){return _e=Ao(_e,se),_e.index=0,_e.sibling=null,_e}function C(_e,se,ve){return _e.index=ve,e?(ve=_e.alternate,ve!==null?(ve=ve.index,ve<se?(_e.flags|=2,se):ve):(_e.flags|=2,se)):(_e.flags|=1048576,se)}function O(_e){return e&&_e.alternate===null&&(_e.flags|=2),_e}function W(_e,se,ve,je){return se===null||se.tag!==6?(se=qh(ve,_e.mode,je),se.return=_e,se):(se=w(se,ve),se.return=_e,se)}function ne(_e,se,ve,je){var tt=ve.type;return tt===ke?De(_e,se,ve.props.children,je,ve.key):se!==null&&(se.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===mt&&V(tt)===se.type)?(je=w(se,ve.props),je.ref=R(_e,se,ve),je.return=_e,je):(je=Fu(ve.type,ve.key,ve.props,null,_e.mode,je),je.ref=R(_e,se,ve),je.return=_e,je)}function Le(_e,se,ve,je){return se===null||se.tag!==4||se.stateNode.containerInfo!==ve.containerInfo||se.stateNode.implementation!==ve.implementation?(se=Wh(ve,_e.mode,je),se.return=_e,se):(se=w(se,ve.children||[]),se.return=_e,se)}function De(_e,se,ve,je,tt){return se===null||se.tag!==7?(se=Ea(ve,_e.mode,je,tt),se.return=_e,se):(se=w(se,ve),se.return=_e,se)}function Oe(_e,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return se=qh(""+se,_e.mode,ve),se.return=_e,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Re:return ve=Fu(se.type,se.key,se.props,null,_e.mode,ve),ve.ref=R(_e,null,se),ve.return=_e,ve;case le:return se=Wh(se,_e.mode,ve),se.return=_e,se;case mt:var je=se._init;return Oe(_e,je(se._payload),ve)}if(Oi(se)||rt(se))return se=Ea(se,_e.mode,ve,null),se.return=_e,se;K(_e,se)}return null}function Te(_e,se,ve,je){var tt=se!==null?se.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return tt!==null?null:W(_e,se,""+ve,je);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Re:return ve.key===tt?ne(_e,se,ve,je):null;case le:return ve.key===tt?Le(_e,se,ve,je):null;case mt:return tt=ve._init,Te(_e,se,tt(ve._payload),je)}if(Oi(ve)||rt(ve))return tt!==null?null:De(_e,se,ve,je,null);K(_e,ve)}return null}function Ge(_e,se,ve,je,tt){if(typeof je=="string"&&je!==""||typeof je=="number")return _e=_e.get(ve)||null,W(se,_e,""+je,tt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case Re:return _e=_e.get(je.key===null?ve:je.key)||null,ne(se,_e,je,tt);case le:return _e=_e.get(je.key===null?ve:je.key)||null,Le(se,_e,je,tt);case mt:var ot=je._init;return Ge(_e,se,ve,ot(je._payload),tt)}if(Oi(je)||rt(je))return _e=_e.get(ve)||null,De(se,_e,je,tt,null);K(se,je)}return null}function We(_e,se,ve,je){for(var tt=null,ot=null,at=se,dt=se=0,On=null;at!==null&&dt<ve.length;dt++){at.index>dt?(On=at,at=null):On=at.sibling;var jt=Te(_e,at,ve[dt],je);if(jt===null){at===null&&(at=On);break}e&&at&&jt.alternate===null&&n(_e,at),se=C(jt,se,dt),ot===null?tt=jt:ot.sibling=jt,ot=jt,at=On}if(dt===ve.length)return l(_e,at),Vt&&js(_e,dt),tt;if(at===null){for(;dt<ve.length;dt++)at=Oe(_e,ve[dt],je),at!==null&&(se=C(at,se,dt),ot===null?tt=at:ot.sibling=at,ot=at);return Vt&&js(_e,dt),tt}for(at=g(_e,at);dt<ve.length;dt++)On=Ge(at,_e,dt,ve[dt],je),On!==null&&(e&&On.alternate!==null&&at.delete(On.key===null?dt:On.key),se=C(On,se,dt),ot===null?tt=On:ot.sibling=On,ot=On);return e&&at.forEach(function(Do){return n(_e,Do)}),Vt&&js(_e,dt),tt}function Qe(_e,se,ve,je){var tt=rt(ve);if(typeof tt!="function")throw Error(i(150));if(ve=tt.call(ve),ve==null)throw Error(i(151));for(var ot=tt=null,at=se,dt=se=0,On=null,jt=ve.next();at!==null&&!jt.done;dt++,jt=ve.next()){at.index>dt?(On=at,at=null):On=at.sibling;var Do=Te(_e,at,jt.value,je);if(Do===null){at===null&&(at=On);break}e&&at&&Do.alternate===null&&n(_e,at),se=C(Do,se,dt),ot===null?tt=Do:ot.sibling=Do,ot=Do,at=On}if(jt.done)return l(_e,at),Vt&&js(_e,dt),tt;if(at===null){for(;!jt.done;dt++,jt=ve.next())jt=Oe(_e,jt.value,je),jt!==null&&(se=C(jt,se,dt),ot===null?tt=jt:ot.sibling=jt,ot=jt);return Vt&&js(_e,dt),tt}for(at=g(_e,at);!jt.done;dt++,jt=ve.next())jt=Ge(at,_e,dt,jt.value,je),jt!==null&&(e&&jt.alternate!==null&&at.delete(jt.key===null?dt:jt.key),se=C(jt,se,dt),ot===null?tt=jt:ot.sibling=jt,ot=jt);return e&&at.forEach(function(Em){return n(_e,Em)}),Vt&&js(_e,dt),tt}function cn(_e,se,ve,je){if(typeof ve=="object"&&ve!==null&&ve.type===ke&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Re:e:{for(var tt=ve.key,ot=se;ot!==null;){if(ot.key===tt){if(tt=ve.type,tt===ke){if(ot.tag===7){l(_e,ot.sibling),se=w(ot,ve.props.children),se.return=_e,_e=se;break e}}else if(ot.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===mt&&V(tt)===ot.type){l(_e,ot.sibling),se=w(ot,ve.props),se.ref=R(_e,ot,ve),se.return=_e,_e=se;break e}l(_e,ot);break}else n(_e,ot);ot=ot.sibling}ve.type===ke?(se=Ea(ve.props.children,_e.mode,je,ve.key),se.return=_e,_e=se):(je=Fu(ve.type,ve.key,ve.props,null,_e.mode,je),je.ref=R(_e,se,ve),je.return=_e,_e=je)}return O(_e);case le:e:{for(ot=ve.key;se!==null;){if(se.key===ot)if(se.tag===4&&se.stateNode.containerInfo===ve.containerInfo&&se.stateNode.implementation===ve.implementation){l(_e,se.sibling),se=w(se,ve.children||[]),se.return=_e,_e=se;break e}else{l(_e,se);break}else n(_e,se);se=se.sibling}se=Wh(ve,_e.mode,je),se.return=_e,_e=se}return O(_e);case mt:return ot=ve._init,cn(_e,se,ot(ve._payload),je)}if(Oi(ve))return We(_e,se,ve,je);if(rt(ve))return Qe(_e,se,ve,je);K(_e,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,se!==null&&se.tag===6?(l(_e,se.sibling),se=w(se,ve),se.return=_e,_e=se):(l(_e,se),se=qh(ve,_e.mode,je),se.return=_e,_e=se),O(_e)):l(_e,se)}return cn}var ye=ge(!0),Be=ge(!1),Ie=wi(null),Ue=null,_t=null,H=null;function ee(){H=_t=Ue=null}function oe(e){var n=Ie.current;Ut(Ie),e._currentValue=n}function we(e,n,l){for(;e!==null;){var g=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,g!==null&&(g.childLanes|=n)):g!==null&&(g.childLanes&n)!==n&&(g.childLanes|=n),e===l)break;e=e.return}}function ue(e,n){Ue=e,H=_t=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Mr=!0),e.firstContext=null)}function me(e){var n=e._currentValue;if(H!==e)if(e={context:e,memoizedValue:n,next:null},_t===null){if(Ue===null)throw Error(i(308));_t=e,Ue.dependencies={lanes:0,firstContext:e}}else _t=_t.next=e;return n}var A=null;function I(e){A===null?A=[e]:A.push(e)}function z(e,n,l,g){var w=n.interleaved;return w===null?(l.next=l,I(n)):(l.next=w.next,w.next=l),n.interleaved=l,N(e,g)}function N(e,n){e.lanes|=n;var l=e.alternate;for(l!==null&&(l.lanes|=n),l=e,e=e.return;e!==null;)e.childLanes|=n,l=e.alternate,l!==null&&(l.childLanes|=n),l=e,e=e.return;return l.tag===3?l.stateNode:null}var U=!1;function G(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function te(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Q(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function re(e,n,l){var g=e.updateQueue;if(g===null)return null;if(g=g.shared,(At&2)!==0){var w=g.pending;return w===null?n.next=n:(n.next=w.next,w.next=n),g.pending=n,N(e,l)}return w=g.interleaved,w===null?(n.next=n,I(g)):(n.next=w.next,w.next=n),g.interleaved=n,N(e,l)}function de(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var g=n.lanes;g&=e.pendingLanes,l|=g,n.lanes=l,Ar(e,l)}}function pe(e,n){var l=e.updateQueue,g=e.alternate;if(g!==null&&(g=g.updateQueue,l===g)){var w=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var O={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};C===null?w=C=O:C=C.next=O,l=l.next}while(l!==null);C===null?w=C=n:C=C.next=n}else w=C=n;l={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:g.shared,effects:g.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}function Pe(e,n,l,g){var w=e.updateQueue;U=!1;var C=w.firstBaseUpdate,O=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var ne=W,Le=ne.next;ne.next=null,O===null?C=Le:O.next=Le,O=ne;var De=e.alternate;De!==null&&(De=De.updateQueue,W=De.lastBaseUpdate,W!==O&&(W===null?De.firstBaseUpdate=Le:W.next=Le,De.lastBaseUpdate=ne))}if(C!==null){var Oe=w.baseState;O=0,De=Le=ne=null,W=C;do{var Te=W.lane,Ge=W.eventTime;if((g&Te)===Te){De!==null&&(De=De.next={eventTime:Ge,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var We=e,Qe=W;switch(Te=n,Ge=l,Qe.tag){case 1:if(We=Qe.payload,typeof We=="function"){Oe=We.call(Ge,Oe,Te);break e}Oe=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Qe.payload,Te=typeof We=="function"?We.call(Ge,Oe,Te):We,Te==null)break e;Oe=Me({},Oe,Te);break e;case 2:U=!0}}W.callback!==null&&W.lane!==0&&(e.flags|=64,Te=w.effects,Te===null?w.effects=[W]:Te.push(W))}else Ge={eventTime:Ge,lane:Te,tag:W.tag,payload:W.payload,callback:W.callback,next:null},De===null?(Le=De=Ge,ne=Oe):De=De.next=Ge,O|=Te;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;Te=W,W=Te.next,Te.next=null,w.lastBaseUpdate=Te,w.shared.pending=null}}while(!0);if(De===null&&(ne=Oe),w.baseState=ne,w.firstBaseUpdate=Le,w.lastBaseUpdate=De,n=w.shared.interleaved,n!==null){w=n;do O|=w.lane,w=w.next;while(w!==n)}else C===null&&(w.shared.lanes=0);La|=O,e.lanes=O,e.memoizedState=Oe}}function $e(e,n,l){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var g=e[n],w=g.callback;if(w!==null){if(g.callback=null,g=l,typeof w!="function")throw Error(i(191,w));w.call(g)}}}var Ve={},Ze=wi(Ve),Pt=wi(Ve),Bt=wi(Ve);function vt(e){if(e===Ve)throw Error(i(174));return e}function Rt(e,n){switch(zt(Bt,n),zt(Pt,e),zt(Ze,Ve),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ks(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Ks(n,e)}Ut(Ze),zt(Ze,n)}function Jt(){Ut(Ze),Ut(Pt),Ut(Bt)}function va(e){vt(Bt.current);var n=vt(Ze.current),l=Ks(n,e.type);n!==l&&(zt(Pt,e),zt(Ze,l))}function wa(e){Pt.current===e&&(Ut(Ze),Ut(Pt))}var $t=wi(0);function or(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Is=[];function Vn(){for(var e=0;e<Is.length;e++)Is[e]._workInProgressVersionPrimary=null;Is.length=0}var mn=Ae.ReactCurrentDispatcher,Ht=Ae.ReactCurrentBatchConfig,xa=0,Yt=null,bn=null,An=null,xu=!1,Gl=!1,Vl=0,Wp=0;function Hn(){throw Error(i(321))}function ph(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!Gn(e[l],n[l]))return!1;return!0}function mh(e,n,l,g,w,C){if(xa=C,Yt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,mn.current=e===null||e.memoizedState===null?Xp:Qp,e=l(g,w),Gl){C=0;do{if(Gl=!1,Vl=0,25<=C)throw Error(i(301));C+=1,An=bn=null,n.updateQueue=null,mn.current=em,e=l(g,w)}while(Gl)}if(mn.current=bu,n=bn!==null&&bn.next!==null,xa=0,An=bn=Yt=null,xu=!1,n)throw Error(i(300));return e}function gh(){var e=Vl!==0;return Vl=0,e}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Yt.memoizedState=An=e:An=An.next=e,An}function ni(){if(bn===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=bn.next;var n=An===null?Yt.memoizedState:An.next;if(n!==null)An=n,bn=e;else{if(e===null)throw Error(i(310));bn=e,e={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},An===null?Yt.memoizedState=An=e:An=An.next=e}return An}function Hl(e,n){return typeof n=="function"?n(e):n}function _h(e){var n=ni(),l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=e;var g=bn,w=g.baseQueue,C=l.pending;if(C!==null){if(w!==null){var O=w.next;w.next=C.next,C.next=O}g.baseQueue=w=C,l.pending=null}if(w!==null){C=w.next,g=g.baseState;var W=O=null,ne=null,Le=C;do{var De=Le.lane;if((xa&De)===De)ne!==null&&(ne=ne.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),g=Le.hasEagerState?Le.eagerState:e(g,Le.action);else{var Oe={lane:De,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};ne===null?(W=ne=Oe,O=g):ne=ne.next=Oe,Yt.lanes|=De,La|=De}Le=Le.next}while(Le!==null&&Le!==C);ne===null?O=g:ne.next=W,Gn(g,n.memoizedState)||(Mr=!0),n.memoizedState=g,n.baseState=O,n.baseQueue=ne,l.lastRenderedState=g}if(e=l.interleaved,e!==null){w=e;do C=w.lane,Yt.lanes|=C,La|=C,w=w.next;while(w!==e)}else w===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function yh(e){var n=ni(),l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=e;var g=l.dispatch,w=l.pending,C=n.memoizedState;if(w!==null){l.pending=null;var O=w=w.next;do C=e(C,O.action),O=O.next;while(O!==w);Gn(C,n.memoizedState)||(Mr=!0),n.memoizedState=C,n.baseQueue===null&&(n.baseState=C),l.lastRenderedState=C}return[C,g]}function Vc(){}function Hc(e,n){var l=Yt,g=ni(),w=n(),C=!Gn(g.memoizedState,w);if(C&&(g.memoizedState=w,Mr=!0),g=g.queue,vh(Wc.bind(null,l,g,e),[e]),g.getSnapshot!==n||C||An!==null&&An.memoizedState.tag&1){if(l.flags|=2048,Zl(9,qc.bind(null,l,g,w,n),void 0,null),Dn===null)throw Error(i(349));(xa&30)!==0||Zc(l,n,w)}return w}function Zc(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=Yt.updateQueue,n===null?(n={lastEffect:null,stores:null},Yt.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function qc(e,n,l,g){n.value=l,n.getSnapshot=g,Kc(n)&&Jc(e)}function Wc(e,n,l){return l(function(){Kc(n)&&Jc(e)})}function Kc(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!Gn(e,l)}catch{return!0}}function Jc(e){var n=N(e,1);n!==null&&Ei(n,e,1,-1)}function Yc(e){var n=is();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:e},n.queue=e,e=e.dispatch=Yp.bind(null,Yt,e),[n.memoizedState,e]}function Zl(e,n,l,g){return e={tag:e,create:n,destroy:l,deps:g,next:null},n=Yt.updateQueue,n===null?(n={lastEffect:null,stores:null},Yt.updateQueue=n,n.lastEffect=e.next=e):(l=n.lastEffect,l===null?n.lastEffect=e.next=e:(g=l.next,l.next=e,e.next=g,n.lastEffect=e)),e}function Xc(){return ni().memoizedState}function Lu(e,n,l,g){var w=is();Yt.flags|=e,w.memoizedState=Zl(1|n,l,void 0,g===void 0?null:g)}function ku(e,n,l,g){var w=ni();g=g===void 0?null:g;var C=void 0;if(bn!==null){var O=bn.memoizedState;if(C=O.destroy,g!==null&&ph(g,O.deps)){w.memoizedState=Zl(n,l,C,g);return}}Yt.flags|=e,w.memoizedState=Zl(1|n,l,C,g)}function Qc(e,n){return Lu(8390656,8,e,n)}function vh(e,n){return ku(2048,8,e,n)}function ed(e,n){return ku(4,2,e,n)}function td(e,n){return ku(4,4,e,n)}function nd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function rd(e,n,l){return l=l!=null?l.concat([e]):null,ku(4,4,nd.bind(null,n,e),l)}function wh(){}function id(e,n){var l=ni();n=n===void 0?null:n;var g=l.memoizedState;return g!==null&&n!==null&&ph(n,g[1])?g[0]:(l.memoizedState=[e,n],e)}function sd(e,n){var l=ni();n=n===void 0?null:n;var g=l.memoizedState;return g!==null&&n!==null&&ph(n,g[1])?g[0]:(e=e(),l.memoizedState=[e,n],e)}function od(e,n,l){return(xa&21)===0?(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=l):(Gn(l,n)||(l=Ha(),Yt.lanes|=l,La|=l,e.baseState=!0),n)}function Kp(e,n){var l=Ct;Ct=l!==0&&4>l?l:4,e(!0);var g=Ht.transition;Ht.transition={};try{e(!1),n()}finally{Ct=l,Ht.transition=g}}function ad(){return ni().memoizedState}function Jp(e,n,l){var g=Bo(e);if(l={lane:g,action:l,hasEagerState:!1,eagerState:null,next:null},ld(e))ud(n,l);else if(l=z(e,n,l,g),l!==null){var w=lr();Ei(l,e,g,w),hd(l,n,g)}}function Yp(e,n,l){var g=Bo(e),w={lane:g,action:l,hasEagerState:!1,eagerState:null,next:null};if(ld(e))ud(n,w);else{var C=e.alternate;if(e.lanes===0&&(C===null||C.lanes===0)&&(C=n.lastRenderedReducer,C!==null))try{var O=n.lastRenderedState,W=C(O,l);if(w.hasEagerState=!0,w.eagerState=W,Gn(W,O)){var ne=n.interleaved;ne===null?(w.next=w,I(n)):(w.next=ne.next,ne.next=w),n.interleaved=w;return}}catch{}finally{}l=z(e,n,w,g),l!==null&&(w=lr(),Ei(l,e,g,w),hd(l,n,g))}}function ld(e){var n=e.alternate;return e===Yt||n!==null&&n===Yt}function ud(e,n){Gl=xu=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function hd(e,n,l){if((l&4194240)!==0){var g=n.lanes;g&=e.pendingLanes,l|=g,n.lanes=l,Ar(e,l)}}var bu={readContext:me,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},Xp={readContext:me,useCallback:function(e,n){return is().memoizedState=[e,n===void 0?null:n],e},useContext:me,useEffect:Qc,useImperativeHandle:function(e,n,l){return l=l!=null?l.concat([e]):null,Lu(4194308,4,nd.bind(null,n,e),l)},useLayoutEffect:function(e,n){return Lu(4194308,4,e,n)},useInsertionEffect:function(e,n){return Lu(4,2,e,n)},useMemo:function(e,n){var l=is();return n=n===void 0?null:n,e=e(),l.memoizedState=[e,n],e},useReducer:function(e,n,l){var g=is();return n=l!==void 0?l(n):n,g.memoizedState=g.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},g.queue=e,e=e.dispatch=Jp.bind(null,Yt,e),[g.memoizedState,e]},useRef:function(e){var n=is();return e={current:e},n.memoizedState=e},useState:Yc,useDebugValue:wh,useDeferredValue:function(e){return is().memoizedState=e},useTransition:function(){var e=Yc(!1),n=e[0];return e=Kp.bind(null,e[1]),is().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,l){var g=Yt,w=is();if(Vt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=n(),Dn===null)throw Error(i(349));(xa&30)!==0||Zc(g,n,l)}w.memoizedState=l;var C={value:l,getSnapshot:n};return w.queue=C,Qc(Wc.bind(null,g,C,e),[e]),g.flags|=2048,Zl(9,qc.bind(null,g,C,l,n),void 0,null),l},useId:function(){var e=is(),n=Dn.identifierPrefix;if(Vt){var l=Li,g=xi;l=(g&~(1<<32-pt(g)-1)).toString(32)+l,n=":"+n+"R"+l,l=Vl++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=Wp++,n=":"+n+"r"+l.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Qp={readContext:me,useCallback:id,useContext:me,useEffect:vh,useImperativeHandle:rd,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:_h,useRef:Xc,useState:function(){return _h(Hl)},useDebugValue:wh,useDeferredValue:function(e){var n=ni();return od(n,bn.memoizedState,e)},useTransition:function(){var e=_h(Hl)[0],n=ni().memoizedState;return[e,n]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:ad,unstable_isNewReconciler:!1},em={readContext:me,useCallback:id,useContext:me,useEffect:vh,useImperativeHandle:rd,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:yh,useRef:Xc,useState:function(){return yh(Hl)},useDebugValue:wh,useDeferredValue:function(e){var n=ni();return bn===null?n.memoizedState=e:od(n,bn.memoizedState,e)},useTransition:function(){var e=yh(Hl)[0],n=ni().memoizedState;return[e,n]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:ad,unstable_isNewReconciler:!1};function ki(e,n){if(e&&e.defaultProps){n=Me({},n),e=e.defaultProps;for(var l in e)n[l]===void 0&&(n[l]=e[l]);return n}return n}function xh(e,n,l,g){n=e.memoizedState,l=l(g,n),l=l==null?n:Me({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Cu={isMounted:function(e){return(e=e._reactInternals)?$r(e)===e:!1},enqueueSetState:function(e,n,l){e=e._reactInternals;var g=lr(),w=Bo(e),C=Q(g,w);C.payload=n,l!=null&&(C.callback=l),n=re(e,C,w),n!==null&&(Ei(n,e,w,g),de(n,e,w))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var g=lr(),w=Bo(e),C=Q(g,w);C.tag=1,C.payload=n,l!=null&&(C.callback=l),n=re(e,C,w),n!==null&&(Ei(n,e,w,g),de(n,e,w))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=lr(),g=Bo(e),w=Q(l,g);w.tag=2,n!=null&&(w.callback=n),n=re(e,w,g),n!==null&&(Ei(n,e,g,l),de(n,e,g))}};function cd(e,n,l,g,w,C,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(g,C,O):n.prototype&&n.prototype.isPureReactComponent?!yr(l,g)||!yr(w,C):!0}function dd(e,n,l){var g=!1,w=ns,C=n.contextType;return typeof C=="object"&&C!==null?C=me(C):(w=Ln(n)?Os:tn.current,g=n.contextTypes,C=(g=g!=null)?bo(e,w):ns),n=new n(l,C),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Cu,e.stateNode=n,n._reactInternals=e,g&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=w,e.__reactInternalMemoizedMaskedChildContext=C),n}function fd(e,n,l,g){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,g),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,g),n.state!==e&&Cu.enqueueReplaceState(n,n.state,null)}function Lh(e,n,l,g){var w=e.stateNode;w.props=l,w.state=e.memoizedState,w.refs={},G(e);var C=n.contextType;typeof C=="object"&&C!==null?w.context=me(C):(C=Ln(n)?Os:tn.current,w.context=bo(e,C)),w.state=e.memoizedState,C=n.getDerivedStateFromProps,typeof C=="function"&&(xh(e,n,C,l),w.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(n=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),n!==w.state&&Cu.enqueueReplaceState(w,w.state,null),Pe(e,l,w,g),w.state=e.memoizedState),typeof w.componentDidMount=="function"&&(e.flags|=4194308)}function ll(e,n){try{var l="",g=n;do l+=He(g),g=g.return;while(g);var w=l}catch(C){w=`
Error generating stack: `+C.message+`
`+C.stack}return{value:e,source:n,stack:w,digest:null}}function kh(e,n,l){return{value:e,source:null,stack:l??null,digest:n??null}}function bh(e,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var tm=typeof WeakMap=="function"?WeakMap:Map;function pd(e,n,l){l=Q(-1,l),l.tag=3,l.payload={element:null};var g=n.value;return l.callback=function(){Au||(Au=!0,Nh=g),bh(e,n)},l}function md(e,n,l){l=Q(-1,l),l.tag=3;var g=e.type.getDerivedStateFromError;if(typeof g=="function"){var w=n.value;l.payload=function(){return g(w)},l.callback=function(){bh(e,n)}}var C=e.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(l.callback=function(){bh(e,n),typeof g!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var O=n.stack;this.componentDidCatch(n.value,{componentStack:O!==null?O:""})}),l}function gd(e,n,l){var g=e.pingCache;if(g===null){g=e.pingCache=new tm;var w=new Set;g.set(n,w)}else w=g.get(n),w===void 0&&(w=new Set,g.set(n,w));w.has(l)||(w.add(l),e=mm.bind(null,e,n,l),n.then(e,e))}function _d(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function yd(e,n,l,g,w){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Q(-1,1),n.tag=2,re(l,n,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=w,e)}var nm=Ae.ReactCurrentOwner,Mr=!1;function ar(e,n,l,g){n.child=e===null?Be(n,null,l,g):ye(n,e.child,l,g)}function vd(e,n,l,g,w){l=l.render;var C=n.ref;return ue(n,w),g=mh(e,n,l,g,C,w),l=gh(),e!==null&&!Mr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~w,Fs(e,n,w)):(Vt&&l&&ti(n),n.flags|=1,ar(e,n,g,w),n.child)}function wd(e,n,l,g,w){if(e===null){var C=l.type;return typeof C=="function"&&!Zh(C)&&C.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=C,xd(e,n,C,g,w)):(e=Fu(l.type,null,g,n,n.mode,w),e.ref=n.ref,e.return=n,n.child=e)}if(C=e.child,(e.lanes&w)===0){var O=C.memoizedProps;if(l=l.compare,l=l!==null?l:yr,l(O,g)&&e.ref===n.ref)return Fs(e,n,w)}return n.flags|=1,e=Ao(C,g),e.ref=n.ref,e.return=n,n.child=e}function xd(e,n,l,g,w){if(e!==null){var C=e.memoizedProps;if(yr(C,g)&&e.ref===n.ref)if(Mr=!1,n.pendingProps=g=C,(e.lanes&w)!==0)(e.flags&131072)!==0&&(Mr=!0);else return n.lanes=e.lanes,Fs(e,n,w)}return Ch(e,n,l,g,w)}function Ld(e,n,l){var g=n.pendingProps,w=g.children,C=e!==null?e.memoizedState:null;if(g.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(hl,zr),zr|=l;else{if((l&1073741824)===0)return e=C!==null?C.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,zt(hl,zr),zr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=C!==null?C.baseLanes:l,zt(hl,zr),zr|=g}else C!==null?(g=C.baseLanes|l,n.memoizedState=null):g=l,zt(hl,zr),zr|=g;return ar(e,n,w,l),n.child}function kd(e,n){var l=n.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function Ch(e,n,l,g,w){var C=Ln(l)?Os:tn.current;return C=bo(n,C),ue(n,w),l=mh(e,n,l,g,C,w),g=gh(),e!==null&&!Mr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~w,Fs(e,n,w)):(Vt&&g&&ti(n),n.flags|=1,ar(e,n,l,w),n.child)}function bd(e,n,l,g,w){if(Ln(l)){var C=!0;il(n)}else C=!1;if(ue(n,w),n.stateNode===null)Mu(e,n),dd(n,l,g),Lh(n,l,g,w),g=!0;else if(e===null){var O=n.stateNode,W=n.memoizedProps;O.props=W;var ne=O.context,Le=l.contextType;typeof Le=="object"&&Le!==null?Le=me(Le):(Le=Ln(l)?Os:tn.current,Le=bo(n,Le));var De=l.getDerivedStateFromProps,Oe=typeof De=="function"||typeof O.getSnapshotBeforeUpdate=="function";Oe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==g||ne!==Le)&&fd(n,O,g,Le),U=!1;var Te=n.memoizedState;O.state=Te,Pe(n,g,O,w),ne=n.memoizedState,W!==g||Te!==ne||xn.current||U?(typeof De=="function"&&(xh(n,l,De,g),ne=n.memoizedState),(W=U||cd(n,l,W,g,Te,ne,Le))?(Oe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(n.flags|=4194308)):(typeof O.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=g,n.memoizedState=ne),O.props=g,O.state=ne,O.context=Le,g=W):(typeof O.componentDidMount=="function"&&(n.flags|=4194308),g=!1)}else{O=n.stateNode,te(e,n),W=n.memoizedProps,Le=n.type===n.elementType?W:ki(n.type,W),O.props=Le,Oe=n.pendingProps,Te=O.context,ne=l.contextType,typeof ne=="object"&&ne!==null?ne=me(ne):(ne=Ln(l)?Os:tn.current,ne=bo(n,ne));var Ge=l.getDerivedStateFromProps;(De=typeof Ge=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==Oe||Te!==ne)&&fd(n,O,g,ne),U=!1,Te=n.memoizedState,O.state=Te,Pe(n,g,O,w);var We=n.memoizedState;W!==Oe||Te!==We||xn.current||U?(typeof Ge=="function"&&(xh(n,l,Ge,g),We=n.memoizedState),(Le=U||cd(n,l,Le,g,Te,We,ne)||!1)?(De||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,We,ne),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,We,ne)),typeof O.componentDidUpdate=="function"&&(n.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===e.memoizedProps&&Te===e.memoizedState||(n.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===e.memoizedProps&&Te===e.memoizedState||(n.flags|=1024),n.memoizedProps=g,n.memoizedState=We),O.props=g,O.state=We,O.context=ne,g=Le):(typeof O.componentDidUpdate!="function"||W===e.memoizedProps&&Te===e.memoizedState||(n.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===e.memoizedProps&&Te===e.memoizedState||(n.flags|=1024),g=!1)}return Eh(e,n,l,g,C,w)}function Eh(e,n,l,g,w,C){kd(e,n);var O=(n.flags&128)!==0;if(!g&&!O)return w&&Nl(n,l,!1),Fs(e,n,C);g=n.stateNode,nm.current=n;var W=O&&typeof l.getDerivedStateFromError!="function"?null:g.render();return n.flags|=1,e!==null&&O?(n.child=ye(n,e.child,null,C),n.child=ye(n,null,W,C)):ar(e,n,W,C),n.memoizedState=g.state,w&&Nl(n,l,!0),n.child}function Cd(e){var n=e.stateNode;n.pendingContext?Fl(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Fl(e,n.context,!1),Rt(e,n.containerInfo)}function Ed(e,n,l,g,w){return E(),P(w),n.flags|=256,ar(e,n,l,g),n.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function Ph(e){return{baseLanes:e,cachePool:null,transitions:null}}function Md(e,n,l){var g=n.pendingProps,w=$t.current,C=!1,O=(n.flags&128)!==0,W;if((W=O)||(W=e!==null&&e.memoizedState===null?!1:(w&2)!==0),W?(C=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(w|=1),zt($t,w&1),e===null)return u(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(O=g.children,e=g.fallback,C?(g=n.mode,C=n.child,O={mode:"hidden",children:O},(g&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=O):C=Nu(O,g,0,null),e=Ea(e,g,l,null),C.return=n,e.return=n,C.sibling=e,n.child=C,n.child.memoizedState=Ph(l),n.memoizedState=Mh,e):Sh(n,O));if(w=e.memoizedState,w!==null&&(W=w.dehydrated,W!==null))return rm(e,n,O,g,W,w,l);if(C){C=g.fallback,O=n.mode,w=e.child,W=w.sibling;var ne={mode:"hidden",children:g.children};return(O&1)===0&&n.child!==w?(g=n.child,g.childLanes=0,g.pendingProps=ne,n.deletions=null):(g=Ao(w,ne),g.subtreeFlags=w.subtreeFlags&14680064),W!==null?C=Ao(W,C):(C=Ea(C,O,l,null),C.flags|=2),C.return=n,g.return=n,g.sibling=C,n.child=g,g=C,C=n.child,O=e.child.memoizedState,O=O===null?Ph(l):{baseLanes:O.baseLanes|l,cachePool:null,transitions:O.transitions},C.memoizedState=O,C.childLanes=e.childLanes&~l,n.memoizedState=Mh,g}return C=e.child,e=C.sibling,g=Ao(C,{mode:"visible",children:g.children}),(n.mode&1)===0&&(g.lanes=l),g.return=n,g.sibling=null,e!==null&&(l=n.deletions,l===null?(n.deletions=[e],n.flags|=16):l.push(e)),n.child=g,n.memoizedState=null,g}function Sh(e,n){return n=Nu({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Eu(e,n,l,g){return g!==null&&P(g),ye(n,e.child,null,l),e=Sh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function rm(e,n,l,g,w,C,O){if(l)return n.flags&256?(n.flags&=-257,g=kh(Error(i(422))),Eu(e,n,O,g)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(C=g.fallback,w=n.mode,g=Nu({mode:"visible",children:g.children},w,0,null),C=Ea(C,w,O,null),C.flags|=2,g.return=n,C.return=n,g.sibling=C,n.child=g,(n.mode&1)!==0&&ye(n,e.child,null,O),n.child.memoizedState=Ph(O),n.memoizedState=Mh,C);if((n.mode&1)===0)return Eu(e,n,O,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var W=g.dgst;return g=W,C=Error(i(419)),g=kh(C,g,void 0),Eu(e,n,O,g)}if(W=(O&e.childLanes)!==0,Mr||W){if(g=Dn,g!==null){switch(O&-O){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|O))!==0?0:w,w!==0&&w!==C.retryLane&&(C.retryLane=w,N(e,w),Ei(g,e,w,-1))}return Hh(),g=kh(Error(i(421))),Eu(e,n,O,g)}return w.data==="$?"?(n.flags|=128,n.child=e.child,n=gm.bind(null,e),w._reactRetry=n,null):(e=C.treeContext,Fn=rr(w.nextSibling),sr=n,Vt=!0,Nr=null,e!==null&&(ir[kn++]=xi,ir[kn++]=Li,ir[kn++]=ei,xi=e.id,Li=e.overflow,ei=n),n=Sh(n,g.children),n.flags|=4096,n)}function Pd(e,n,l){e.lanes|=n;var g=e.alternate;g!==null&&(g.lanes|=n),we(e.return,n,l)}function Bh(e,n,l,g,w){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:g,tail:l,tailMode:w}:(C.isBackwards=n,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=l,C.tailMode=w)}function Sd(e,n,l){var g=n.pendingProps,w=g.revealOrder,C=g.tail;if(ar(e,n,g.children,l),g=$t.current,(g&2)!==0)g=g&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pd(e,l,n);else if(e.tag===19)Pd(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}g&=1}if(zt($t,g),(n.mode&1)===0)n.memoizedState=null;else switch(w){case"forwards":for(l=n.child,w=null;l!==null;)e=l.alternate,e!==null&&or(e)===null&&(w=l),l=l.sibling;l=w,l===null?(w=n.child,n.child=null):(w=l.sibling,l.sibling=null),Bh(n,!1,w,l,C);break;case"backwards":for(l=null,w=n.child,n.child=null;w!==null;){if(e=w.alternate,e!==null&&or(e)===null){n.child=w;break}e=w.sibling,w.sibling=l,l=w,w=e}Bh(n,!0,l,null,C);break;case"together":Bh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Mu(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Fs(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),La|=n.lanes,(l&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,l=Ao(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=Ao(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function im(e,n,l){switch(n.tag){case 3:Cd(n),E();break;case 5:va(n);break;case 1:Ln(n.type)&&il(n);break;case 4:Rt(n,n.stateNode.containerInfo);break;case 10:var g=n.type._context,w=n.memoizedProps.value;zt(Ie,g._currentValue),g._currentValue=w;break;case 13:if(g=n.memoizedState,g!==null)return g.dehydrated!==null?(zt($t,$t.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?Md(e,n,l):(zt($t,$t.current&1),e=Fs(e,n,l),e!==null?e.sibling:null);zt($t,$t.current&1);break;case 19:if(g=(l&n.childLanes)!==0,(e.flags&128)!==0){if(g)return Sd(e,n,l);n.flags|=128}if(w=n.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),zt($t,$t.current),g)break;return null;case 22:case 23:return n.lanes=0,Ld(e,n,l)}return Fs(e,n,l)}var Bd,Th,Td,Ad;Bd=function(e,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Th=function(){},Td=function(e,n,l,g){var w=e.memoizedProps;if(w!==g){e=n.stateNode,vt(Ze.current);var C=null;switch(l){case"input":w=Hs(e,w),g=Hs(e,g),C=[];break;case"select":w=Me({},w,{value:void 0}),g=Me({},g,{value:void 0}),C=[];break;case"textarea":w=qs(e,w),g=qs(e,g),C=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(e.onclick=Se)}Js(l,g);var O;l=null;for(Le in w)if(!g.hasOwnProperty(Le)&&w.hasOwnProperty(Le)&&w[Le]!=null)if(Le==="style"){var W=w[Le];for(O in W)W.hasOwnProperty(O)&&(l||(l={}),l[O]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(c.hasOwnProperty(Le)?C||(C=[]):(C=C||[]).push(Le,null));for(Le in g){var ne=g[Le];if(W=w?.[Le],g.hasOwnProperty(Le)&&ne!==W&&(ne!=null||W!=null))if(Le==="style")if(W){for(O in W)!W.hasOwnProperty(O)||ne&&ne.hasOwnProperty(O)||(l||(l={}),l[O]="");for(O in ne)ne.hasOwnProperty(O)&&W[O]!==ne[O]&&(l||(l={}),l[O]=ne[O])}else l||(C||(C=[]),C.push(Le,l)),l=ne;else Le==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,W=W?W.__html:void 0,ne!=null&&W!==ne&&(C=C||[]).push(Le,ne)):Le==="children"?typeof ne!="string"&&typeof ne!="number"||(C=C||[]).push(Le,""+ne):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(c.hasOwnProperty(Le)?(ne!=null&&Le==="onScroll"&&ct("scroll",e),C||W===ne||(C=[])):(C=C||[]).push(Le,ne))}l&&(C=C||[]).push("style",l);var Le=C;(n.updateQueue=Le)&&(n.flags|=4)}},Ad=function(e,n,l,g){l!==g&&(n.flags|=4)};function ql(e,n){if(!Vt)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:g.sibling=null}}function Zn(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,g=0;if(n)for(var w=e.child;w!==null;)l|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=e,w=w.sibling;else for(w=e.child;w!==null;)l|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=e,w=w.sibling;return e.subtreeFlags|=g,e.childLanes=l,n}function sm(e,n,l){var g=n.pendingProps;switch($l(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(n),null;case 1:return Ln(n.type)&&Rs(),Zn(n),null;case 3:return g=n.stateNode,Jt(),Ut(xn),Ut(tn),Vn(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(e===null||e.child===null)&&(_(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Nr!==null&&($h(Nr),Nr=null))),Th(e,n),Zn(n),null;case 5:wa(n);var w=vt(Bt.current);if(l=n.type,e!==null&&n.stateNode!=null)Td(e,n,l,g,w),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!g){if(n.stateNode===null)throw Error(i(166));return Zn(n),null}if(e=vt(Ze.current),_(n)){g=n.stateNode,l=n.type;var C=n.memoizedProps;switch(g[br]=n,g[ts]=C,e=(n.mode&1)!==0,l){case"dialog":ct("cancel",g),ct("close",g);break;case"iframe":case"object":case"embed":ct("load",g);break;case"video":case"audio":for(w=0;w<st.length;w++)ct(st[w],g);break;case"source":ct("error",g);break;case"img":case"image":case"link":ct("error",g),ct("load",g);break;case"details":ct("toggle",g);break;case"input":Fo(g,C),ct("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},ct("invalid",g);break;case"textarea":zo(g,C),ct("invalid",g)}Js(l,C),w=null;for(var O in C)if(C.hasOwnProperty(O)){var W=C[O];O==="children"?typeof W=="string"?g.textContent!==W&&(C.suppressHydrationWarning!==!0&&xe(g.textContent,W,e),w=["children",W]):typeof W=="number"&&g.textContent!==""+W&&(C.suppressHydrationWarning!==!0&&xe(g.textContent,W,e),w=["children",""+W]):c.hasOwnProperty(O)&&W!=null&&O==="onScroll"&&ct("scroll",g)}switch(l){case"input":Bi(g),si(g,C,!0);break;case"textarea":Bi(g),ja(g);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(g.onclick=Se)}g=w,n.updateQueue=g,g!==null&&(n.flags|=4)}else{O=w.nodeType===9?w:w.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ws(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=O.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof g.is=="string"?e=O.createElement(l,{is:g.is}):(e=O.createElement(l),l==="select"&&(O=e,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):e=O.createElementNS(e,l),e[br]=n,e[ts]=g,Bd(e,n,!1,!1),n.stateNode=e;e:{switch(O=Tr(l,g),l){case"dialog":ct("cancel",e),ct("close",e),w=g;break;case"iframe":case"object":case"embed":ct("load",e),w=g;break;case"video":case"audio":for(w=0;w<st.length;w++)ct(st[w],e);w=g;break;case"source":ct("error",e),w=g;break;case"img":case"image":case"link":ct("error",e),ct("load",e),w=g;break;case"details":ct("toggle",e),w=g;break;case"input":Fo(e,g),w=Hs(e,g),ct("invalid",e);break;case"option":w=g;break;case"select":e._wrapperState={wasMultiple:!!g.multiple},w=Me({},g,{value:void 0}),ct("invalid",e);break;case"textarea":zo(e,g),w=qs(e,g),ct("invalid",e);break;default:w=g}Js(l,w),W=w;for(C in W)if(W.hasOwnProperty(C)){var ne=W[C];C==="style"?hs(e,ne):C==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&Uo(e,ne)):C==="children"?typeof ne=="string"?(l!=="textarea"||ne!=="")&&oi(e,ne):typeof ne=="number"&&oi(e,""+ne):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(c.hasOwnProperty(C)?ne!=null&&C==="onScroll"&&ct("scroll",e):ne!=null&&he(e,C,ne,O))}switch(l){case"input":Bi(e),si(e,g,!1);break;case"textarea":Bi(e),ja(e);break;case"option":g.value!=null&&e.setAttribute("value",""+xt(g.value));break;case"select":e.multiple=!!g.multiple,C=g.value,C!=null?Ur(e,!!g.multiple,C,!1):g.defaultValue!=null&&Ur(e,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(e.onclick=Se)}switch(l){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Zn(n),null;case 6:if(e&&n.stateNode!=null)Ad(e,n,e.memoizedProps,g);else{if(typeof g!="string"&&n.stateNode===null)throw Error(i(166));if(l=vt(Bt.current),vt(Ze.current),_(n)){if(g=n.stateNode,l=n.memoizedProps,g[br]=n,(C=g.nodeValue!==l)&&(e=sr,e!==null))switch(e.tag){case 3:xe(g.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xe(g.nodeValue,l,(e.mode&1)!==0)}C&&(n.flags|=4)}else g=(l.nodeType===9?l:l.ownerDocument).createTextNode(g),g[br]=n,n.stateNode=g}return Zn(n),null;case 13:if(Ut($t),g=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&Fn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)x(),E(),n.flags|=98560,C=!1;else if(C=_(n),g!==null&&g.dehydrated!==null){if(e===null){if(!C)throw Error(i(318));if(C=n.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[br]=n}else E(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zn(n),C=!1}else Nr!==null&&($h(Nr),Nr=null),C=!0;if(!C)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(g=g!==null,g!==(e!==null&&e.memoizedState!==null)&&g&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||($t.current&1)!==0?Cn===0&&(Cn=3):Hh())),n.updateQueue!==null&&(n.flags|=4),Zn(n),null);case 4:return Jt(),Th(e,n),e===null&&ln(n.stateNode.containerInfo),Zn(n),null;case 10:return oe(n.type._context),Zn(n),null;case 17:return Ln(n.type)&&Rs(),Zn(n),null;case 19:if(Ut($t),C=n.memoizedState,C===null)return Zn(n),null;if(g=(n.flags&128)!==0,O=C.rendering,O===null)if(g)ql(C,!1);else{if(Cn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(O=or(e),O!==null){for(n.flags|=128,ql(C,!1),g=O.updateQueue,g!==null&&(n.updateQueue=g,n.flags|=4),n.subtreeFlags=0,g=l,l=n.child;l!==null;)C=l,e=g,C.flags&=14680066,O=C.alternate,O===null?(C.childLanes=0,C.lanes=e,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=O.childLanes,C.lanes=O.lanes,C.child=O.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=O.memoizedProps,C.memoizedState=O.memoizedState,C.updateQueue=O.updateQueue,C.type=O.type,e=O.dependencies,C.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return zt($t,$t.current&1|2),n.child}e=e.sibling}C.tail!==null&&qt()>cl&&(n.flags|=128,g=!0,ql(C,!1),n.lanes=4194304)}else{if(!g)if(e=or(O),e!==null){if(n.flags|=128,g=!0,l=e.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),ql(C,!0),C.tail===null&&C.tailMode==="hidden"&&!O.alternate&&!Vt)return Zn(n),null}else 2*qt()-C.renderingStartTime>cl&&l!==1073741824&&(n.flags|=128,g=!0,ql(C,!1),n.lanes=4194304);C.isBackwards?(O.sibling=n.child,n.child=O):(l=C.last,l!==null?l.sibling=O:n.child=O,C.last=O)}return C.tail!==null?(n=C.tail,C.rendering=n,C.tail=n.sibling,C.renderingStartTime=qt(),n.sibling=null,l=$t.current,zt($t,g?l&1|2:l&1),n):(Zn(n),null);case 22:case 23:return Vh(),g=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==g&&(n.flags|=8192),g&&(n.mode&1)!==0?(zr&1073741824)!==0&&(Zn(n),n.subtreeFlags&6&&(n.flags|=8192)):Zn(n),null;case 24:return null;case 25:return null}throw Error(i(156,n.tag))}function om(e,n){switch($l(n),n.tag){case 1:return Ln(n.type)&&Rs(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Jt(),Ut(xn),Ut(tn),Vn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return wa(n),null;case 13:if(Ut($t),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));E()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ut($t),null;case 4:return Jt(),null;case 10:return oe(n.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var Pu=!1,qn=!1,am=typeof WeakSet=="function"?WeakSet:Set,qe=null;function ul(e,n){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(g){nn(e,n,g)}else l.current=null}function Ah(e,n,l){try{l()}catch(g){nn(e,n,g)}}var Dd=!1;function lm(e,n){if(Fe=xs,e=ma(),ga(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var g=l.getSelection&&l.getSelection();if(g&&g.rangeCount!==0){l=g.anchorNode;var w=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break e}var O=0,W=-1,ne=-1,Le=0,De=0,Oe=e,Te=null;t:for(;;){for(var Ge;Oe!==l||w!==0&&Oe.nodeType!==3||(W=O+w),Oe!==C||g!==0&&Oe.nodeType!==3||(ne=O+g),Oe.nodeType===3&&(O+=Oe.nodeValue.length),(Ge=Oe.firstChild)!==null;)Te=Oe,Oe=Ge;for(;;){if(Oe===e)break t;if(Te===l&&++Le===w&&(W=O),Te===C&&++De===g&&(ne=O),(Ge=Oe.nextSibling)!==null)break;Oe=Te,Te=Oe.parentNode}Oe=Ge}l=W===-1||ne===-1?null:{start:W,end:ne}}else l=null}l=l||{start:0,end:0}}else l=null;for(it={focusedElem:e,selectionRange:l},xs=!1,qe=n;qe!==null;)if(n=qe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,qe=e;else for(;qe!==null;){n=qe;try{var We=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var Qe=We.memoizedProps,cn=We.memoizedState,_e=n.stateNode,se=_e.getSnapshotBeforeUpdate(n.elementType===n.type?Qe:ki(n.type,Qe),cn);_e.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var ve=n.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(je){nn(n,n.return,je)}if(e=n.sibling,e!==null){e.return=n.return,qe=e;break}qe=n.return}return We=Dd,Dd=!1,We}function Wl(e,n,l){var g=n.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&e)===e){var C=w.destroy;w.destroy=void 0,C!==void 0&&Ah(n,l,C)}w=w.next}while(w!==g)}}function Su(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var g=l.create;l.destroy=g()}l=l.next}while(l!==n)}}function Dh(e){var n=e.ref;if(n!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof n=="function"?n(e):n.current=e}}function Od(e){var n=e.alternate;n!==null&&(e.alternate=null,Od(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[br],delete n[ts],delete n[yi],delete n[Il],delete n[Cr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rd(e){return e.tag===5||e.tag===3||e.tag===4}function jd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oh(e,n,l){var g=e.tag;if(g===5||g===6)e=e.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(e,n):l.insertBefore(e,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(e,l)):(n=l,n.appendChild(e)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Se));else if(g!==4&&(e=e.child,e!==null))for(Oh(e,n,l),e=e.sibling;e!==null;)Oh(e,n,l),e=e.sibling}function Rh(e,n,l){var g=e.tag;if(g===5||g===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(g!==4&&(e=e.child,e!==null))for(Rh(e,n,l),e=e.sibling;e!==null;)Rh(e,n,l),e=e.sibling}var Nn=null,bi=!1;function Mo(e,n,l){for(l=l.child;l!==null;)Id(e,n,l),l=l.sibling}function Id(e,n,l){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(ms,l)}catch{}switch(l.tag){case 5:qn||ul(l,n);case 6:var g=Nn,w=bi;Nn=null,Mo(e,n,l),Nn=g,bi=w,Nn!==null&&(bi?(e=Nn,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):Nn.removeChild(l.stateNode));break;case 18:Nn!==null&&(bi?(e=Nn,l=l.stateNode,e.nodeType===8?Ds(e.parentNode,l):e.nodeType===1&&Ds(e,l),Yn(e)):Ds(Nn,l.stateNode));break;case 4:g=Nn,w=bi,Nn=l.stateNode.containerInfo,bi=!0,Mo(e,n,l),Nn=g,bi=w;break;case 0:case 11:case 14:case 15:if(!qn&&(g=l.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var C=w,O=C.destroy;C=C.tag,O!==void 0&&((C&2)!==0||(C&4)!==0)&&Ah(l,n,O),w=w.next}while(w!==g)}Mo(e,n,l);break;case 1:if(!qn&&(ul(l,n),g=l.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=l.memoizedProps,g.state=l.memoizedState,g.componentWillUnmount()}catch(W){nn(l,n,W)}Mo(e,n,l);break;case 21:Mo(e,n,l);break;case 22:l.mode&1?(qn=(g=qn)||l.memoizedState!==null,Mo(e,n,l),qn=g):Mo(e,n,l);break;default:Mo(e,n,l)}}function Fd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new am),n.forEach(function(g){var w=_m.bind(null,e,g);l.has(g)||(l.add(g),g.then(w,w))})}}function Ci(e,n){var l=n.deletions;if(l!==null)for(var g=0;g<l.length;g++){var w=l[g];try{var C=e,O=n,W=O;e:for(;W!==null;){switch(W.tag){case 5:Nn=W.stateNode,bi=!1;break e;case 3:Nn=W.stateNode.containerInfo,bi=!0;break e;case 4:Nn=W.stateNode.containerInfo,bi=!0;break e}W=W.return}if(Nn===null)throw Error(i(160));Id(C,O,w),Nn=null,bi=!1;var ne=w.alternate;ne!==null&&(ne.return=null),w.return=null}catch(Le){nn(w,n,Le)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Nd(n,e),n=n.sibling}function Nd(e,n){var l=e.alternate,g=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ci(n,e),ss(e),g&4){try{Wl(3,e,e.return),Su(3,e)}catch(Qe){nn(e,e.return,Qe)}try{Wl(5,e,e.return)}catch(Qe){nn(e,e.return,Qe)}}break;case 1:Ci(n,e),ss(e),g&512&&l!==null&&ul(l,l.return);break;case 5:if(Ci(n,e),ss(e),g&512&&l!==null&&ul(l,l.return),e.flags&32){var w=e.stateNode;try{oi(w,"")}catch(Qe){nn(e,e.return,Qe)}}if(g&4&&(w=e.stateNode,w!=null)){var C=e.memoizedProps,O=l!==null?l.memoizedProps:C,W=e.type,ne=e.updateQueue;if(e.updateQueue=null,ne!==null)try{W==="input"&&C.type==="radio"&&C.name!=null&&No(w,C),Tr(W,O);var Le=Tr(W,C);for(O=0;O<ne.length;O+=2){var De=ne[O],Oe=ne[O+1];De==="style"?hs(w,Oe):De==="dangerouslySetInnerHTML"?Uo(w,Oe):De==="children"?oi(w,Oe):he(w,De,Oe,Le)}switch(W){case"input":Di(w,C);break;case"textarea":Ra(w,C);break;case"select":var Te=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!C.multiple;var Ge=C.value;Ge!=null?Ur(w,!!C.multiple,Ge,!1):Te!==!!C.multiple&&(C.defaultValue!=null?Ur(w,!!C.multiple,C.defaultValue,!0):Ur(w,!!C.multiple,C.multiple?[]:"",!1))}w[ts]=C}catch(Qe){nn(e,e.return,Qe)}}break;case 6:if(Ci(n,e),ss(e),g&4){if(e.stateNode===null)throw Error(i(162));w=e.stateNode,C=e.memoizedProps;try{w.nodeValue=C}catch(Qe){nn(e,e.return,Qe)}}break;case 3:if(Ci(n,e),ss(e),g&4&&l!==null&&l.memoizedState.isDehydrated)try{Yn(n.containerInfo)}catch(Qe){nn(e,e.return,Qe)}break;case 4:Ci(n,e),ss(e);break;case 13:Ci(n,e),ss(e),w=e.child,w.flags&8192&&(C=w.memoizedState!==null,w.stateNode.isHidden=C,!C||w.alternate!==null&&w.alternate.memoizedState!==null||(Fh=qt())),g&4&&Fd(e);break;case 22:if(De=l!==null&&l.memoizedState!==null,e.mode&1?(qn=(Le=qn)||De,Ci(n,e),qn=Le):Ci(n,e),ss(e),g&8192){if(Le=e.memoizedState!==null,(e.stateNode.isHidden=Le)&&!De&&(e.mode&1)!==0)for(qe=e,De=e.child;De!==null;){for(Oe=qe=De;qe!==null;){switch(Te=qe,Ge=Te.child,Te.tag){case 0:case 11:case 14:case 15:Wl(4,Te,Te.return);break;case 1:ul(Te,Te.return);var We=Te.stateNode;if(typeof We.componentWillUnmount=="function"){g=Te,l=Te.return;try{n=g,We.props=n.memoizedProps,We.state=n.memoizedState,We.componentWillUnmount()}catch(Qe){nn(g,l,Qe)}}break;case 5:ul(Te,Te.return);break;case 22:if(Te.memoizedState!==null){$d(Oe);continue}}Ge!==null?(Ge.return=Te,qe=Ge):$d(Oe)}De=De.sibling}e:for(De=null,Oe=e;;){if(Oe.tag===5){if(De===null){De=Oe;try{w=Oe.stateNode,Le?(C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(W=Oe.stateNode,ne=Oe.memoizedProps.style,O=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,W.style.display=$o("display",O))}catch(Qe){nn(e,e.return,Qe)}}}else if(Oe.tag===6){if(De===null)try{Oe.stateNode.nodeValue=Le?"":Oe.memoizedProps}catch(Qe){nn(e,e.return,Qe)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===e)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===e)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===e)break e;De===Oe&&(De=null),Oe=Oe.return}De===Oe&&(De=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:Ci(n,e),ss(e),g&4&&Fd(e);break;case 21:break;default:Ci(n,e),ss(e)}}function ss(e){var n=e.flags;if(n&2){try{e:{for(var l=e.return;l!==null;){if(Rd(l)){var g=l;break e}l=l.return}throw Error(i(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(oi(w,""),g.flags&=-33);var C=jd(e);Rh(e,C,w);break;case 3:case 4:var O=g.stateNode.containerInfo,W=jd(e);Oh(e,W,O);break;default:throw Error(i(161))}}catch(ne){nn(e,e.return,ne)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function um(e,n,l){qe=e,zd(e)}function zd(e,n,l){for(var g=(e.mode&1)!==0;qe!==null;){var w=qe,C=w.child;if(w.tag===22&&g){var O=w.memoizedState!==null||Pu;if(!O){var W=w.alternate,ne=W!==null&&W.memoizedState!==null||qn;W=Pu;var Le=qn;if(Pu=O,(qn=ne)&&!Le)for(qe=w;qe!==null;)O=qe,ne=O.child,O.tag===22&&O.memoizedState!==null?Gd(w):ne!==null?(ne.return=O,qe=ne):Gd(w);for(;C!==null;)qe=C,zd(C),C=C.sibling;qe=w,Pu=W,qn=Le}Ud(e)}else(w.subtreeFlags&8772)!==0&&C!==null?(C.return=w,qe=C):Ud(e)}}function Ud(e){for(;qe!==null;){var n=qe;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:qn||Su(5,n);break;case 1:var g=n.stateNode;if(n.flags&4&&!qn)if(l===null)g.componentDidMount();else{var w=n.elementType===n.type?l.memoizedProps:ki(n.type,l.memoizedProps);g.componentDidUpdate(w,l.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var C=n.updateQueue;C!==null&&$e(n,C,g);break;case 3:var O=n.updateQueue;if(O!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}$e(n,O,l)}break;case 5:var W=n.stateNode;if(l===null&&n.flags&4){l=W;var ne=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&l.focus();break;case"img":ne.src&&(l.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Le=n.alternate;if(Le!==null){var De=Le.memoizedState;if(De!==null){var Oe=De.dehydrated;Oe!==null&&Yn(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}qn||n.flags&512&&Dh(n)}catch(Te){nn(n,n.return,Te)}}if(n===e){qe=null;break}if(l=n.sibling,l!==null){l.return=n.return,qe=l;break}qe=n.return}}function $d(e){for(;qe!==null;){var n=qe;if(n===e){qe=null;break}var l=n.sibling;if(l!==null){l.return=n.return,qe=l;break}qe=n.return}}function Gd(e){for(;qe!==null;){var n=qe;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Su(4,n)}catch(ne){nn(n,l,ne)}break;case 1:var g=n.stateNode;if(typeof g.componentDidMount=="function"){var w=n.return;try{g.componentDidMount()}catch(ne){nn(n,w,ne)}}var C=n.return;try{Dh(n)}catch(ne){nn(n,C,ne)}break;case 5:var O=n.return;try{Dh(n)}catch(ne){nn(n,O,ne)}}}catch(ne){nn(n,n.return,ne)}if(n===e){qe=null;break}var W=n.sibling;if(W!==null){W.return=n.return,qe=W;break}qe=n.return}}var hm=Math.ceil,Bu=Ae.ReactCurrentDispatcher,jh=Ae.ReactCurrentOwner,ri=Ae.ReactCurrentBatchConfig,At=0,Dn=null,gn=null,zn=0,zr=0,hl=wi(0),Cn=0,Kl=null,La=0,Tu=0,Ih=0,Jl=null,Pr=null,Fh=0,cl=1/0,Ns=null,Au=!1,Nh=null,Po=null,Du=!1,So=null,Ou=0,Yl=0,zh=null,Ru=-1,ju=0;function lr(){return(At&6)!==0?qt():Ru!==-1?Ru:Ru=qt()}function Bo(e){return(e.mode&1)===0?1:(At&2)!==0&&zn!==0?zn&-zn:D.transition!==null?(ju===0&&(ju=Ha()),ju):(e=Ct,e!==0||(e=window.event,e=e===void 0?16:Lt(e.type)),e)}function Ei(e,n,l,g){if(50<Yl)throw Yl=0,zh=null,Error(i(185));Kn(e,l,g),((At&2)===0||e!==Dn)&&(e===Dn&&((At&2)===0&&(Tu|=l),Cn===4&&To(e,zn)),Sr(e,g),l===1&&At===0&&(n.mode&1)===0&&(cl=qt()+500,sl&&rs()))}function Sr(e,n){var l=e.callbackNode;to(e,n);var g=Nt(e,e===Dn?zn:0);if(g===0)l!==null&&ps(l),e.callbackNode=null,e.callbackPriority=0;else if(n=g&-g,e.callbackPriority!==n){if(l!=null&&ps(l),n===1)e.tag===0?fh(Hd.bind(null,e)):Ul(Hd.bind(null,e)),Gt(function(){(At&6)===0&&rs()}),l=null;else{switch(Gi(g)){case 1:l=Qo;break;case 4:l=Va;break;case 16:l=eo;break;case 536870912:l=Ni;break;default:l=eo}l=Qd(l,Vd.bind(null,e))}e.callbackPriority=n,e.callbackNode=l}}function Vd(e,n){if(Ru=-1,ju=0,(At&6)!==0)throw Error(i(327));var l=e.callbackNode;if(dl()&&e.callbackNode!==l)return null;var g=Nt(e,e===Dn?zn:0);if(g===0)return null;if((g&30)!==0||(g&e.expiredLanes)!==0||n)n=Iu(e,g);else{n=g;var w=At;At|=2;var C=qd();(Dn!==e||zn!==n)&&(Ns=null,cl=qt()+500,ba(e,n));do try{fm();break}catch(W){Zd(e,W)}while(!0);ee(),Bu.current=C,At=w,gn!==null?n=0:(Dn=null,zn=0,n=Cn)}if(n!==0){if(n===2&&(w=Pn(e),w!==0&&(g=w,n=Uh(e,w))),n===1)throw l=Kl,ba(e,0),To(e,g),Sr(e,qt()),l;if(n===6)To(e,g);else{if(w=e.current.alternate,(g&30)===0&&!cm(w)&&(n=Iu(e,g),n===2&&(C=Pn(e),C!==0&&(g=C,n=Uh(e,C))),n===1))throw l=Kl,ba(e,0),To(e,g),Sr(e,qt()),l;switch(e.finishedWork=w,e.finishedLanes=g,n){case 0:case 1:throw Error(i(345));case 2:Ca(e,Pr,Ns);break;case 3:if(To(e,g),(g&130023424)===g&&(n=Fh+500-qt(),10<n)){if(Nt(e,0)!==0)break;if(w=e.suspendedLanes,(w&g)!==g){lr(),e.pingedLanes|=e.suspendedLanes&w;break}e.timeoutHandle=un(Ca.bind(null,e,Pr,Ns),n);break}Ca(e,Pr,Ns);break;case 4:if(To(e,g),(g&4194240)===g)break;for(n=e.eventTimes,w=-1;0<g;){var O=31-pt(g);C=1<<O,O=n[O],O>w&&(w=O),g&=~C}if(g=w,g=qt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*hm(g/1960))-g,10<g){e.timeoutHandle=un(Ca.bind(null,e,Pr,Ns),g);break}Ca(e,Pr,Ns);break;case 5:Ca(e,Pr,Ns);break;default:throw Error(i(329))}}}return Sr(e,qt()),e.callbackNode===l?Vd.bind(null,e):null}function Uh(e,n){var l=Jl;return e.current.memoizedState.isDehydrated&&(ba(e,n).flags|=256),e=Iu(e,n),e!==2&&(n=Pr,Pr=l,n!==null&&$h(n)),e}function $h(e){Pr===null?Pr=e:Pr.push.apply(Pr,e)}function cm(e){for(var n=e;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var g=0;g<l.length;g++){var w=l[g],C=w.getSnapshot;w=w.value;try{if(!Gn(C(),w))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function To(e,n){for(n&=~Ih,n&=~Tu,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var l=31-pt(n),g=1<<l;e[l]=-1,n&=~g}}function Hd(e){if((At&6)!==0)throw Error(i(327));dl();var n=Nt(e,0);if((n&1)===0)return Sr(e,qt()),null;var l=Iu(e,n);if(e.tag!==0&&l===2){var g=Pn(e);g!==0&&(n=g,l=Uh(e,g))}if(l===1)throw l=Kl,ba(e,0),To(e,n),Sr(e,qt()),l;if(l===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ca(e,Pr,Ns),Sr(e,qt()),null}function Gh(e,n){var l=At;At|=1;try{return e(n)}finally{At=l,At===0&&(cl=qt()+500,sl&&rs())}}function ka(e){So!==null&&So.tag===0&&(At&6)===0&&dl();var n=At;At|=1;var l=ri.transition,g=Ct;try{if(ri.transition=null,Ct=1,e)return e()}finally{Ct=g,ri.transition=l,At=n,(At&6)===0&&rs()}}function Vh(){zr=hl.current,Ut(hl)}function ba(e,n){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,en(l)),gn!==null)for(l=gn.return;l!==null;){var g=l;switch($l(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Rs();break;case 3:Jt(),Ut(xn),Ut(tn),Vn();break;case 5:wa(g);break;case 4:Jt();break;case 13:Ut($t);break;case 19:Ut($t);break;case 10:oe(g.type._context);break;case 22:case 23:Vh()}l=l.return}if(Dn=e,gn=e=Ao(e.current,null),zn=zr=n,Cn=0,Kl=null,Ih=Tu=La=0,Pr=Jl=null,A!==null){for(n=0;n<A.length;n++)if(l=A[n],g=l.interleaved,g!==null){l.interleaved=null;var w=g.next,C=l.pending;if(C!==null){var O=C.next;C.next=w,g.next=O}l.pending=g}A=null}return e}function Zd(e,n){do{var l=gn;try{if(ee(),mn.current=bu,xu){for(var g=Yt.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}xu=!1}if(xa=0,An=bn=Yt=null,Gl=!1,Vl=0,jh.current=null,l===null||l.return===null){Cn=1,Kl=n,gn=null;break}e:{var C=e,O=l.return,W=l,ne=n;if(n=zn,W.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Le=ne,De=W,Oe=De.tag;if((De.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var Te=De.alternate;Te?(De.updateQueue=Te.updateQueue,De.memoizedState=Te.memoizedState,De.lanes=Te.lanes):(De.updateQueue=null,De.memoizedState=null)}var Ge=_d(O);if(Ge!==null){Ge.flags&=-257,yd(Ge,O,W,C,n),Ge.mode&1&&gd(C,Le,n),n=Ge,ne=Le;var We=n.updateQueue;if(We===null){var Qe=new Set;Qe.add(ne),n.updateQueue=Qe}else We.add(ne);break e}else{if((n&1)===0){gd(C,Le,n),Hh();break e}ne=Error(i(426))}}else if(Vt&&W.mode&1){var cn=_d(O);if(cn!==null){(cn.flags&65536)===0&&(cn.flags|=256),yd(cn,O,W,C,n),P(ll(ne,W));break e}}C=ne=ll(ne,W),Cn!==4&&(Cn=2),Jl===null?Jl=[C]:Jl.push(C),C=O;do{switch(C.tag){case 3:C.flags|=65536,n&=-n,C.lanes|=n;var _e=pd(C,ne,n);pe(C,_e);break e;case 1:W=ne;var se=C.type,ve=C.stateNode;if((C.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(Po===null||!Po.has(ve)))){C.flags|=65536,n&=-n,C.lanes|=n;var je=md(C,W,n);pe(C,je);break e}}C=C.return}while(C!==null)}Kd(l)}catch(tt){n=tt,gn===l&&l!==null&&(gn=l=l.return);continue}break}while(!0)}function qd(){var e=Bu.current;return Bu.current=bu,e===null?bu:e}function Hh(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Dn===null||(La&268435455)===0&&(Tu&268435455)===0||To(Dn,zn)}function Iu(e,n){var l=At;At|=2;var g=qd();(Dn!==e||zn!==n)&&(Ns=null,ba(e,n));do try{dm();break}catch(w){Zd(e,w)}while(!0);if(ee(),At=l,Bu.current=g,gn!==null)throw Error(i(261));return Dn=null,zn=0,Cn}function dm(){for(;gn!==null;)Wd(gn)}function fm(){for(;gn!==null&&!Xo();)Wd(gn)}function Wd(e){var n=Xd(e.alternate,e,zr);e.memoizedProps=e.pendingProps,n===null?Kd(e):gn=n,jh.current=null}function Kd(e){var n=e;do{var l=n.alternate;if(e=n.return,(n.flags&32768)===0){if(l=sm(l,n,zr),l!==null){gn=l;return}}else{if(l=om(l,n),l!==null){l.flags&=32767,gn=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cn=6,gn=null;return}}if(n=n.sibling,n!==null){gn=n;return}gn=n=e}while(n!==null);Cn===0&&(Cn=5)}function Ca(e,n,l){var g=Ct,w=ri.transition;try{ri.transition=null,Ct=1,pm(e,n,l,g)}finally{ri.transition=w,Ct=g}return null}function pm(e,n,l,g){do dl();while(So!==null);if((At&6)!==0)throw Error(i(327));l=e.finishedWork;var w=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var C=l.lanes|l.childLanes;if(Kt(e,C),e===Dn&&(gn=Dn=null,zn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Du||(Du=!0,Qd(eo,function(){return dl(),null})),C=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||C){C=ri.transition,ri.transition=null;var O=Ct;Ct=1;var W=At;At|=4,jh.current=null,lm(e,l),Nd(l,e),vr(it),xs=!!Fe,it=Fe=null,e.current=l,um(l),Qs(),At=W,Ct=O,ri.transition=C}else e.current=l;if(Du&&(Du=!1,So=e,Ou=w),C=e.pendingLanes,C===0&&(Po=null),Gr(l.stateNode),Sr(e,qt()),n!==null)for(g=e.onRecoverableError,l=0;l<n.length;l++)w=n[l],g(w.value,{componentStack:w.stack,digest:w.digest});if(Au)throw Au=!1,e=Nh,Nh=null,e;return(Ou&1)!==0&&e.tag!==0&&dl(),C=e.pendingLanes,(C&1)!==0?e===zh?Yl++:(Yl=0,zh=e):Yl=0,rs(),null}function dl(){if(So!==null){var e=Gi(Ou),n=ri.transition,l=Ct;try{if(ri.transition=null,Ct=16>e?16:e,So===null)var g=!1;else{if(e=So,So=null,Ou=0,(At&6)!==0)throw Error(i(331));var w=At;for(At|=4,qe=e.current;qe!==null;){var C=qe,O=C.child;if((qe.flags&16)!==0){var W=C.deletions;if(W!==null){for(var ne=0;ne<W.length;ne++){var Le=W[ne];for(qe=Le;qe!==null;){var De=qe;switch(De.tag){case 0:case 11:case 15:Wl(8,De,C)}var Oe=De.child;if(Oe!==null)Oe.return=De,qe=Oe;else for(;qe!==null;){De=qe;var Te=De.sibling,Ge=De.return;if(Od(De),De===Le){qe=null;break}if(Te!==null){Te.return=Ge,qe=Te;break}qe=Ge}}}var We=C.alternate;if(We!==null){var Qe=We.child;if(Qe!==null){We.child=null;do{var cn=Qe.sibling;Qe.sibling=null,Qe=cn}while(Qe!==null)}}qe=C}}if((C.subtreeFlags&2064)!==0&&O!==null)O.return=C,qe=O;else e:for(;qe!==null;){if(C=qe,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Wl(9,C,C.return)}var _e=C.sibling;if(_e!==null){_e.return=C.return,qe=_e;break e}qe=C.return}}var se=e.current;for(qe=se;qe!==null;){O=qe;var ve=O.child;if((O.subtreeFlags&2064)!==0&&ve!==null)ve.return=O,qe=ve;else e:for(O=se;qe!==null;){if(W=qe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Su(9,W)}}catch(tt){nn(W,W.return,tt)}if(W===O){qe=null;break e}var je=W.sibling;if(je!==null){je.return=W.return,qe=je;break e}qe=W.return}}if(At=w,rs(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(ms,e)}catch{}g=!0}return g}finally{Ct=l,ri.transition=n}}return!1}function Jd(e,n,l){n=ll(l,n),n=pd(e,n,1),e=re(e,n,1),n=lr(),e!==null&&(Kn(e,1,n),Sr(e,n))}function nn(e,n,l){if(e.tag===3)Jd(e,e,l);else for(;n!==null;){if(n.tag===3){Jd(n,e,l);break}else if(n.tag===1){var g=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Po===null||!Po.has(g))){e=ll(l,e),e=md(n,e,1),n=re(n,e,1),e=lr(),n!==null&&(Kn(n,1,e),Sr(n,e));break}}n=n.return}}function mm(e,n,l){var g=e.pingCache;g!==null&&g.delete(n),n=lr(),e.pingedLanes|=e.suspendedLanes&l,Dn===e&&(zn&l)===l&&(Cn===4||Cn===3&&(zn&130023424)===zn&&500>qt()-Fh?ba(e,0):Ih|=l),Sr(e,n)}function Yd(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ui,Ui<<=1,(Ui&130023424)===0&&(Ui=4194304)));var l=lr();e=N(e,n),e!==null&&(Kn(e,n,l),Sr(e,l))}function gm(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),Yd(e,l)}function _m(e,n){var l=0;switch(e.tag){case 13:var g=e.stateNode,w=e.memoizedState;w!==null&&(l=w.retryLane);break;case 19:g=e.stateNode;break;default:throw Error(i(314))}g!==null&&g.delete(n),Yd(e,l)}var Xd;Xd=function(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps||xn.current)Mr=!0;else{if((e.lanes&l)===0&&(n.flags&128)===0)return Mr=!1,im(e,n,l);Mr=(e.flags&131072)!==0}else Mr=!1,Vt&&(n.flags&1048576)!==0&&hn(n,al,n.index);switch(n.lanes=0,n.tag){case 2:var g=n.type;Mu(e,n),e=n.pendingProps;var w=bo(n,tn.current);ue(n,l),w=mh(null,n,g,e,w,l);var C=gh();return n.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ln(g)?(C=!0,il(n)):C=!1,n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,G(n),w.updater=Cu,n.stateNode=w,w._reactInternals=n,Lh(n,g,e,l),n=Eh(null,n,g,!0,C,l)):(n.tag=0,Vt&&C&&ti(n),ar(null,n,w,l),n=n.child),n;case 16:g=n.elementType;e:{switch(Mu(e,n),e=n.pendingProps,w=g._init,g=w(g._payload),n.type=g,w=n.tag=vm(g),e=ki(g,e),w){case 0:n=Ch(null,n,g,e,l);break e;case 1:n=bd(null,n,g,e,l);break e;case 11:n=vd(null,n,g,e,l);break e;case 14:n=wd(null,n,g,ki(g.type,e),l);break e}throw Error(i(306,g,""))}return n;case 0:return g=n.type,w=n.pendingProps,w=n.elementType===g?w:ki(g,w),Ch(e,n,g,w,l);case 1:return g=n.type,w=n.pendingProps,w=n.elementType===g?w:ki(g,w),bd(e,n,g,w,l);case 3:e:{if(Cd(n),e===null)throw Error(i(387));g=n.pendingProps,C=n.memoizedState,w=C.element,te(e,n),Pe(n,g,null,l);var O=n.memoizedState;if(g=O.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},n.updateQueue.baseState=C,n.memoizedState=C,n.flags&256){w=ll(Error(i(423)),n),n=Ed(e,n,g,l,w);break e}else if(g!==w){w=ll(Error(i(424)),n),n=Ed(e,n,g,l,w);break e}else for(Fn=rr(n.stateNode.containerInfo.firstChild),sr=n,Vt=!0,Nr=null,l=Be(n,null,g,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(E(),g===w){n=Fs(e,n,l);break e}ar(e,n,g,l)}n=n.child}return n;case 5:return va(n),e===null&&u(n),g=n.type,w=n.pendingProps,C=e!==null?e.memoizedProps:null,O=w.children,gt(g,w)?O=null:C!==null&&gt(g,C)&&(n.flags|=32),kd(e,n),ar(e,n,O,l),n.child;case 6:return e===null&&u(n),null;case 13:return Md(e,n,l);case 4:return Rt(n,n.stateNode.containerInfo),g=n.pendingProps,e===null?n.child=ye(n,null,g,l):ar(e,n,g,l),n.child;case 11:return g=n.type,w=n.pendingProps,w=n.elementType===g?w:ki(g,w),vd(e,n,g,w,l);case 7:return ar(e,n,n.pendingProps,l),n.child;case 8:return ar(e,n,n.pendingProps.children,l),n.child;case 12:return ar(e,n,n.pendingProps.children,l),n.child;case 10:e:{if(g=n.type._context,w=n.pendingProps,C=n.memoizedProps,O=w.value,zt(Ie,g._currentValue),g._currentValue=O,C!==null)if(Gn(C.value,O)){if(C.children===w.children&&!xn.current){n=Fs(e,n,l);break e}}else for(C=n.child,C!==null&&(C.return=n);C!==null;){var W=C.dependencies;if(W!==null){O=C.child;for(var ne=W.firstContext;ne!==null;){if(ne.context===g){if(C.tag===1){ne=Q(-1,l&-l),ne.tag=2;var Le=C.updateQueue;if(Le!==null){Le=Le.shared;var De=Le.pending;De===null?ne.next=ne:(ne.next=De.next,De.next=ne),Le.pending=ne}}C.lanes|=l,ne=C.alternate,ne!==null&&(ne.lanes|=l),we(C.return,l,n),W.lanes|=l;break}ne=ne.next}}else if(C.tag===10)O=C.type===n.type?null:C.child;else if(C.tag===18){if(O=C.return,O===null)throw Error(i(341));O.lanes|=l,W=O.alternate,W!==null&&(W.lanes|=l),we(O,l,n),O=C.sibling}else O=C.child;if(O!==null)O.return=C;else for(O=C;O!==null;){if(O===n){O=null;break}if(C=O.sibling,C!==null){C.return=O.return,O=C;break}O=O.return}C=O}ar(e,n,w.children,l),n=n.child}return n;case 9:return w=n.type,g=n.pendingProps.children,ue(n,l),w=me(w),g=g(w),n.flags|=1,ar(e,n,g,l),n.child;case 14:return g=n.type,w=ki(g,n.pendingProps),w=ki(g.type,w),wd(e,n,g,w,l);case 15:return xd(e,n,n.type,n.pendingProps,l);case 17:return g=n.type,w=n.pendingProps,w=n.elementType===g?w:ki(g,w),Mu(e,n),n.tag=1,Ln(g)?(e=!0,il(n)):e=!1,ue(n,l),dd(n,g,w),Lh(n,g,w,l),Eh(null,n,g,!0,e,l);case 19:return Sd(e,n,l);case 22:return Ld(e,n,l)}throw Error(i(156,n.tag))};function Qd(e,n){return Ga(e,n)}function ym(e,n,l,g){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,n,l,g){return new ym(e,n,l,g)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vm(e){if(typeof e=="function")return Zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ft)return 11;if(e===St)return 14}return 2}function Ao(e,n){var l=e.alternate;return l===null?(l=ii(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function Fu(e,n,l,g,w,C){var O=2;if(g=e,typeof e=="function")Zh(e)&&(O=1);else if(typeof e=="string")O=5;else e:switch(e){case ke:return Ea(l.children,w,C,n);case Ke:O=8,w|=8;break;case Je:return e=ii(12,l,n,w|2),e.elementType=Je,e.lanes=C,e;case Mt:return e=ii(13,l,n,w),e.elementType=Mt,e.lanes=C,e;case wt:return e=ii(19,l,n,w),e.elementType=wt,e.lanes=C,e;case Dt:return Nu(l,w,C,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nt:O=10;break e;case Ne:O=9;break e;case ft:O=11;break e;case St:O=14;break e;case mt:O=16,g=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return n=ii(O,l,n,w),n.elementType=e,n.type=g,n.lanes=C,n}function Ea(e,n,l,g){return e=ii(7,e,g,n),e.lanes=l,e}function Nu(e,n,l,g){return e=ii(22,e,g,n),e.elementType=Dt,e.lanes=l,e.stateNode={isHidden:!1},e}function qh(e,n,l){return e=ii(6,e,null,n),e.lanes=l,e}function Wh(e,n,l){return n=ii(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function wm(e,n,l,g,w){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Kh(e,n,l,g,w,C,O,W,ne){return e=new wm(e,n,l,W,ne),n===1?(n=1,C===!0&&(n|=8)):n=0,C=ii(3,null,null,n),e.current=C,C.stateNode=e,C.memoizedState={element:g,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},G(C),e}function xm(e,n,l){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:g==null?null:""+g,children:e,containerInfo:n,implementation:l}}function ef(e){if(!e)return ns;e=e._reactInternals;e:{if($r(e)!==e||e.tag!==1)throw Error(i(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ln(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(i(171))}if(e.tag===1){var l=e.type;if(Ln(l))return vu(e,l,n)}return n}function tf(e,n,l,g,w,C,O,W,ne){return e=Kh(l,g,!0,e,w,C,O,W,ne),e.context=ef(null),l=e.current,g=lr(),w=Bo(l),C=Q(g,w),C.callback=n??null,re(l,C,w),e.current.lanes=w,Kn(e,w,g),Sr(e,g),e}function zu(e,n,l,g){var w=n.current,C=lr(),O=Bo(w);return l=ef(l),n.context===null?n.context=l:n.pendingContext=l,n=Q(C,O),n.payload={element:e},g=g===void 0?null:g,g!==null&&(n.callback=g),e=re(w,n,O),e!==null&&(Ei(e,w,O,C),de(e,w,O)),O}function Uu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function Jh(e,n){nf(e,n),(e=e.alternate)&&nf(e,n)}function Lm(){return null}var rf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yh(e){this._internalRoot=e}$u.prototype.render=Yh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));zu(e,n,null,null)},$u.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ka(function(){zu(null,e,null,null)}),n[Tt]=null}};function $u(e){this._internalRoot=e}$u.prototype.unstable_scheduleHydration=function(e){if(e){var n=io();e={blockedOn:null,target:e,priority:n};for(var l=0;l<rn.length&&n!==0&&n<rn[l].priority;l++);rn.splice(l,0,e),l===0&&Or(e)}};function Xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function km(e,n,l,g,w){if(w){if(typeof g=="function"){var C=g;g=function(){var Le=Uu(O);C.call(Le)}}var O=tf(n,g,e,0,null,!1,!1,"",sf);return e._reactRootContainer=O,e[Tt]=O.current,ln(e.nodeType===8?e.parentNode:e),ka(),O}for(;w=e.lastChild;)e.removeChild(w);if(typeof g=="function"){var W=g;g=function(){var Le=Uu(ne);W.call(Le)}}var ne=Kh(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=ne,e[Tt]=ne.current,ln(e.nodeType===8?e.parentNode:e),ka(function(){zu(n,ne,l,g)}),ne}function Vu(e,n,l,g,w){var C=l._reactRootContainer;if(C){var O=C;if(typeof w=="function"){var W=w;w=function(){var ne=Uu(O);W.call(ne)}}zu(n,O,e,w)}else O=km(l,n,e,w,g);return Uu(O)}no=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var l=ut(n.pendingLanes);l!==0&&(Ar(n,l|1),Sr(n,qt()),(At&6)===0&&(cl=qt()+500,rs()))}break;case 13:ka(function(){var g=N(e,1);if(g!==null){var w=lr();Ei(g,e,1,w)}}),Jh(e,1)}},Vr=function(e){if(e.tag===13){var n=N(e,134217728);if(n!==null){var l=lr();Ei(n,e,134217728,l)}Jh(e,134217728)}},ro=function(e){if(e.tag===13){var n=Bo(e),l=N(e,n);if(l!==null){var g=lr();Ei(l,e,n,g)}Jh(e,n)}},io=function(){return Ct},_s=function(e,n){var l=Ct;try{return Ct=e,n()}finally{Ct=l}},cs=function(e,n,l){switch(n){case"input":if(Di(e,l),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var g=l[n];if(g!==e&&g.form===e.form){var w=Lo(g);if(!w)throw Error(i(90));Ti(g),Di(g,w)}}}break;case"textarea":Ra(e,l);break;case"select":n=l.value,n!=null&&Ur(e,!!l.multiple,n,!1)}},Zo=Gh,Na=ka;var bm={usingClientEntryPoint:!1,Events:[Er,Xr,Lo,Fa,Ho,Gh]},Xl={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cm={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ua(e),e===null?null:e.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||Lm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{ms=Hu.inject(Cm),Wn=Hu}catch{}}return Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bm,Br.createPortal=function(e,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(n))throw Error(i(200));return xm(e,n,null,l)},Br.createRoot=function(e,n){if(!Xh(e))throw Error(i(299));var l=!1,g="",w=rf;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(g=n.identifierPrefix),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),n=Kh(e,1,!1,null,null,l,!1,g,w),e[Tt]=n.current,ln(e.nodeType===8?e.parentNode:e),new Yh(n)},Br.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Ua(n),e=e===null?null:e.stateNode,e},Br.flushSync=function(e){return ka(e)},Br.hydrate=function(e,n,l){if(!Gu(n))throw Error(i(200));return Vu(null,e,n,!0,l)},Br.hydrateRoot=function(e,n,l){if(!Xh(e))throw Error(i(405));var g=l!=null&&l.hydratedSources||null,w=!1,C="",O=rf;if(l!=null&&(l.unstable_strictMode===!0&&(w=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onRecoverableError!==void 0&&(O=l.onRecoverableError)),n=tf(n,null,e,1,l??null,w,!1,C,O),e[Tt]=n.current,ln(e),g)for(e=0;e<g.length;e++)l=g[e],w=l._getVersion,w=w(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,w]:n.mutableSourceEagerHydrationData.push(l,w);return new $u(n)},Br.render=function(e,n,l){if(!Gu(n))throw Error(i(200));return Vu(null,e,n,!1,l)},Br.unmountComponentAtNode=function(e){if(!Gu(e))throw Error(i(40));return e._reactRootContainer?(ka(function(){Vu(null,null,e,!1,function(){e._reactRootContainer=null,e[Tt]=null})}),!0):!1},Br.unstable_batchedUpdates=Gh,Br.unstable_renderSubtreeIntoContainer=function(e,n,l,g){if(!Gu(l))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Vu(e,n,l,!1,g)},Br.version="18.3.1-next-f1338f8080-20240426",Br}var ff;function np(){if(ff)return tc.exports;ff=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(o){console.error(o)}}return d(),tc.exports=Dm(),tc.exports}var pf;function Om(){if(pf)return qu;pf=1;var d=np();return qu.createRoot=d.createRoot,qu.hydrateRoot=d.hydrateRoot,qu}var Rm=Om();const jm=lh(Rm),Im="modulepreload",Fm=function(d){return"/pudumaps/"+d},mf={},pu=function(o,i,h){let c=Promise.resolve();if(i&&i.length>0){let M=function(B){return Promise.all(B.map(T=>Promise.resolve(T).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};var y=M;document.getElementsByTagName("link");const k=document.querySelector("meta[property=csp-nonce]"),b=k?.nonce||k?.getAttribute("nonce");c=M(i.map(B=>{if(B=Fm(B),B in mf)return;mf[B]=!0;const T=B.endsWith(".css"),$=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${B}"]${$}`))return;const F=document.createElement("link");if(F.rel=T?"stylesheet":Im,T||(F.as="script"),F.crossOrigin="",F.href=B,b&&F.setAttribute("nonce",b),document.head.appendChild(F),T)return new Promise((Z,q)=>{F.addEventListener("load",Z),F.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${B}`)))})}))}function p(k){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=k,window.dispatchEvent(b),!b.defaultPrevented)throw k}return c.then(k=>{for(const b of k||[])b.status==="rejected"&&p(b.reason);return o().catch(p)})},Nm=d=>{let o;return d?o=d:typeof fetch>"u"?o=(...i)=>pu(async()=>{const{default:h}=await Promise.resolve().then(()=>El);return{default:h}},[]).then(({default:h})=>h(...i)):o=fetch,(...i)=>o(...i)};class Bc extends Error{constructor(o,i="FunctionsError",h){super(o),this.name=i,this.context=h}}class zm extends Bc{constructor(o){super("Failed to send a request to the Edge Function","FunctionsFetchError",o)}}class gf extends Bc{constructor(o){super("Relay Error invoking the Edge Function","FunctionsRelayError",o)}}class _f extends Bc{constructor(o){super("Edge Function returned a non-2xx status code","FunctionsHttpError",o)}}var pc;(function(d){d.Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2"})(pc||(pc={}));var Um=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};class $m{constructor(o,{headers:i={},customFetch:h,region:c=pc.Any}={}){this.url=o,this.headers=i,this.region=c,this.fetch=Nm(h)}setAuth(o){this.headers.Authorization=`Bearer ${o}`}invoke(o,i={}){var h;return Um(this,void 0,void 0,function*(){try{const{headers:c,method:p,body:y}=i;let k={},{region:b}=i;b||(b=this.region);const M=new URL(`${this.url}/${o}`);b&&b!=="any"&&(k["x-region"]=b,M.searchParams.set("forceFunctionRegion",b));let B;y&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)&&(typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",B=y):typeof y=="string"?(k["Content-Type"]="text/plain",B=y):typeof FormData<"u"&&y instanceof FormData?B=y:(k["Content-Type"]="application/json",B=JSON.stringify(y)));const T=yield this.fetch(M.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),c),body:B}).catch(q=>{throw new zm(q)}),$=T.headers.get("x-relay-error");if($&&$==="true")throw new gf(T);if(!T.ok)throw new _f(T);let F=((h=T.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),Z;return F==="application/json"?Z=yield T.json():F==="application/octet-stream"?Z=yield T.blob():F==="text/event-stream"?Z=T:F==="multipart/form-data"?Z=yield T.formData():Z=yield T.text(),{data:Z,error:null,response:T}}catch(c){return{data:null,error:c,response:c instanceof _f||c instanceof gf?c.context:void 0}}})}}var Rn={},fl={},pl={},ml={},gl={},_l={},Gm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cl=Gm();const Vm=Cl.fetch,rp=Cl.fetch.bind(Cl),ip=Cl.Headers,Hm=Cl.Request,Zm=Cl.Response,El=Object.freeze(Object.defineProperty({__proto__:null,Headers:ip,Request:Hm,Response:Zm,default:rp,fetch:Vm},Symbol.toStringTag,{value:"Module"})),qm=Mm(El);var Wu={},yf;function sp(){if(yf)return Wu;yf=1,Object.defineProperty(Wu,"__esModule",{value:!0});class d extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Wu.default=d,Wu}var vf;function op(){if(vf)return _l;vf=1;var d=_l&&_l.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(_l,"__esModule",{value:!0});const o=d(qm),i=d(sp());class h{constructor(p){this.shouldThrowOnError=!1,this.method=p.method,this.url=p.url,this.headers=p.headers,this.schema=p.schema,this.body=p.body,this.shouldThrowOnError=p.shouldThrowOnError,this.signal=p.signal,this.isMaybeSingle=p.isMaybeSingle,p.fetch?this.fetch=p.fetch:typeof fetch>"u"?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(p,y){return this.headers=Object.assign({},this.headers),this.headers[p]=y,this}then(p,y){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const k=this.fetch;let b=k(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async M=>{var B,T,$;let F=null,Z=null,q=null,J=M.status,ce=M.statusText;if(M.ok){if(this.method!=="HEAD"){const Re=await M.text();Re===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?Z=Re:Z=JSON.parse(Re))}const he=(B=this.headers.Prefer)===null||B===void 0?void 0:B.match(/count=(exact|planned|estimated)/),Ae=(T=M.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");he&&Ae&&Ae.length>1&&(q=parseInt(Ae[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(Z)&&(Z.length>1?(F={code:"PGRST116",details:`Results contain ${Z.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Z=null,q=null,J=406,ce="Not Acceptable"):Z.length===1?Z=Z[0]:Z=null)}else{const he=await M.text();try{F=JSON.parse(he),Array.isArray(F)&&M.status===404&&(Z=[],F=null,J=200,ce="OK")}catch{M.status===404&&he===""?(J=204,ce="No Content"):F={message:he}}if(F&&this.isMaybeSingle&&(!(($=F?.details)===null||$===void 0)&&$.includes("0 rows"))&&(F=null,J=200,ce="OK"),F&&this.shouldThrowOnError)throw new i.default(F)}return{error:F,data:Z,count:q,status:J,statusText:ce}});return this.shouldThrowOnError||(b=b.catch(M=>{var B,T,$;return{error:{message:`${(B=M?.name)!==null&&B!==void 0?B:"FetchError"}: ${M?.message}`,details:`${(T=M?.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${($=M?.code)!==null&&$!==void 0?$:""}`},data:null,count:null,status:0,statusText:""}})),b.then(p,y)}returns(){return this}overrideTypes(){return this}}return _l.default=h,_l}var wf;function ap(){if(wf)return gl;wf=1;var d=gl&&gl.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(gl,"__esModule",{value:!0});const o=d(op());class i extends o.default{select(c){let p=!1;const y=(c??"*").split("").map(k=>/\s/.test(k)&&!p?"":(k==='"'&&(p=!p),k)).join("");return this.url.searchParams.set("select",y),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(c,{ascending:p=!0,nullsFirst:y,foreignTable:k,referencedTable:b=k}={}){const M=b?`${b}.order`:"order",B=this.url.searchParams.get(M);return this.url.searchParams.set(M,`${B?`${B},`:""}${c}.${p?"asc":"desc"}${y===void 0?"":y?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:p,referencedTable:y=p}={}){const k=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(k,`${c}`),this}range(c,p,{foreignTable:y,referencedTable:k=y}={}){const b=typeof k>"u"?"offset":`${k}.offset`,M=typeof k>"u"?"limit":`${k}.limit`;return this.url.searchParams.set(b,`${c}`),this.url.searchParams.set(M,`${p-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:c=!1,verbose:p=!1,settings:y=!1,buffers:k=!1,wal:b=!1,format:M="text"}={}){var B;const T=[c?"analyze":null,p?"verbose":null,y?"settings":null,k?"buffers":null,b?"wal":null].filter(Boolean).join("|"),$=(B=this.headers.Accept)!==null&&B!==void 0?B:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${M}; for="${$}"; options=${T};`,M==="json"?this:this}rollback(){var c;return((c=this.headers.Prefer)!==null&&c!==void 0?c:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gl.default=i,gl}var xf;function Tc(){if(xf)return ml;xf=1;var d=ml&&ml.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ml,"__esModule",{value:!0});const o=d(ap());class i extends o.default{eq(c,p){return this.url.searchParams.append(c,`eq.${p}`),this}neq(c,p){return this.url.searchParams.append(c,`neq.${p}`),this}gt(c,p){return this.url.searchParams.append(c,`gt.${p}`),this}gte(c,p){return this.url.searchParams.append(c,`gte.${p}`),this}lt(c,p){return this.url.searchParams.append(c,`lt.${p}`),this}lte(c,p){return this.url.searchParams.append(c,`lte.${p}`),this}like(c,p){return this.url.searchParams.append(c,`like.${p}`),this}likeAllOf(c,p){return this.url.searchParams.append(c,`like(all).{${p.join(",")}}`),this}likeAnyOf(c,p){return this.url.searchParams.append(c,`like(any).{${p.join(",")}}`),this}ilike(c,p){return this.url.searchParams.append(c,`ilike.${p}`),this}ilikeAllOf(c,p){return this.url.searchParams.append(c,`ilike(all).{${p.join(",")}}`),this}ilikeAnyOf(c,p){return this.url.searchParams.append(c,`ilike(any).{${p.join(",")}}`),this}is(c,p){return this.url.searchParams.append(c,`is.${p}`),this}in(c,p){const y=Array.from(new Set(p)).map(k=>typeof k=="string"&&new RegExp("[,()]").test(k)?`"${k}"`:`${k}`).join(",");return this.url.searchParams.append(c,`in.(${y})`),this}contains(c,p){return typeof p=="string"?this.url.searchParams.append(c,`cs.${p}`):Array.isArray(p)?this.url.searchParams.append(c,`cs.{${p.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(p)}`),this}containedBy(c,p){return typeof p=="string"?this.url.searchParams.append(c,`cd.${p}`):Array.isArray(p)?this.url.searchParams.append(c,`cd.{${p.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(p)}`),this}rangeGt(c,p){return this.url.searchParams.append(c,`sr.${p}`),this}rangeGte(c,p){return this.url.searchParams.append(c,`nxl.${p}`),this}rangeLt(c,p){return this.url.searchParams.append(c,`sl.${p}`),this}rangeLte(c,p){return this.url.searchParams.append(c,`nxr.${p}`),this}rangeAdjacent(c,p){return this.url.searchParams.append(c,`adj.${p}`),this}overlaps(c,p){return typeof p=="string"?this.url.searchParams.append(c,`ov.${p}`):this.url.searchParams.append(c,`ov.{${p.join(",")}}`),this}textSearch(c,p,{config:y,type:k}={}){let b="";k==="plain"?b="pl":k==="phrase"?b="ph":k==="websearch"&&(b="w");const M=y===void 0?"":`(${y})`;return this.url.searchParams.append(c,`${b}fts${M}.${p}`),this}match(c){return Object.entries(c).forEach(([p,y])=>{this.url.searchParams.append(p,`eq.${y}`)}),this}not(c,p,y){return this.url.searchParams.append(c,`not.${p}.${y}`),this}or(c,{foreignTable:p,referencedTable:y=p}={}){const k=y?`${y}.or`:"or";return this.url.searchParams.append(k,`(${c})`),this}filter(c,p,y){return this.url.searchParams.append(c,`${p}.${y}`),this}}return ml.default=i,ml}var Lf;function lp(){if(Lf)return pl;Lf=1;var d=pl&&pl.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(pl,"__esModule",{value:!0});const o=d(Tc());class i{constructor(c,{headers:p={},schema:y,fetch:k}){this.url=c,this.headers=p,this.schema=y,this.fetch=k}select(c,{head:p=!1,count:y}={}){const k=p?"HEAD":"GET";let b=!1;const M=(c??"*").split("").map(B=>/\s/.test(B)&&!b?"":(B==='"'&&(b=!b),B)).join("");return this.url.searchParams.set("select",M),y&&(this.headers.Prefer=`count=${y}`),new o.default({method:k,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(c,{count:p,defaultToNull:y=!0}={}){const k="POST",b=[];if(this.headers.Prefer&&b.push(this.headers.Prefer),p&&b.push(`count=${p}`),y||b.push("missing=default"),this.headers.Prefer=b.join(","),Array.isArray(c)){const M=c.reduce((B,T)=>B.concat(Object.keys(T)),[]);if(M.length>0){const B=[...new Set(M)].map(T=>`"${T}"`);this.url.searchParams.set("columns",B.join(","))}}return new o.default({method:k,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}upsert(c,{onConflict:p,ignoreDuplicates:y=!1,count:k,defaultToNull:b=!0}={}){const M="POST",B=[`resolution=${y?"ignore":"merge"}-duplicates`];if(p!==void 0&&this.url.searchParams.set("on_conflict",p),this.headers.Prefer&&B.push(this.headers.Prefer),k&&B.push(`count=${k}`),b||B.push("missing=default"),this.headers.Prefer=B.join(","),Array.isArray(c)){const T=c.reduce(($,F)=>$.concat(Object.keys(F)),[]);if(T.length>0){const $=[...new Set(T)].map(F=>`"${F}"`);this.url.searchParams.set("columns",$.join(","))}}return new o.default({method:M,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}update(c,{count:p}={}){const y="PATCH",k=[];return this.headers.Prefer&&k.push(this.headers.Prefer),p&&k.push(`count=${p}`),this.headers.Prefer=k.join(","),new o.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}delete({count:c}={}){const p="DELETE",y=[];return c&&y.push(`count=${c}`),this.headers.Prefer&&y.unshift(this.headers.Prefer),this.headers.Prefer=y.join(","),new o.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pl.default=i,pl}var eu={},tu={},kf;function Wm(){return kf||(kf=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.version=void 0,tu.version="0.0.0-automated"),tu}var bf;function Km(){if(bf)return eu;bf=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.DEFAULT_HEADERS=void 0;const d=Wm();return eu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${d.version}`},eu}var Cf;function Jm(){if(Cf)return fl;Cf=1;var d=fl&&fl.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(fl,"__esModule",{value:!0});const o=d(lp()),i=d(Tc()),h=Km();class c{constructor(y,{headers:k={},schema:b,fetch:M}={}){this.url=y,this.headers=Object.assign(Object.assign({},h.DEFAULT_HEADERS),k),this.schemaName=b,this.fetch=M}from(y){const k=new URL(`${this.url}/${y}`);return new o.default(k,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(y){return new c(this.url,{headers:this.headers,schema:y,fetch:this.fetch})}rpc(y,k={},{head:b=!1,get:M=!1,count:B}={}){let T;const $=new URL(`${this.url}/rpc/${y}`);let F;b||M?(T=b?"HEAD":"GET",Object.entries(k).filter(([q,J])=>J!==void 0).map(([q,J])=>[q,Array.isArray(J)?`{${J.join(",")}}`:`${J}`]).forEach(([q,J])=>{$.searchParams.append(q,J)})):(T="POST",F=k);const Z=Object.assign({},this.headers);return B&&(Z.Prefer=`count=${B}`),new i.default({method:T,url:$,headers:Z,schema:this.schemaName,body:F,fetch:this.fetch,allowEmpty:!1})}}return fl.default=c,fl}var Ef;function Ym(){if(Ef)return Rn;Ef=1;var d=Rn&&Rn.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PostgrestError=Rn.PostgrestBuilder=Rn.PostgrestTransformBuilder=Rn.PostgrestFilterBuilder=Rn.PostgrestQueryBuilder=Rn.PostgrestClient=void 0;const o=d(Jm());Rn.PostgrestClient=o.default;const i=d(lp());Rn.PostgrestQueryBuilder=i.default;const h=d(Tc());Rn.PostgrestFilterBuilder=h.default;const c=d(ap());Rn.PostgrestTransformBuilder=c.default;const p=d(op());Rn.PostgrestBuilder=p.default;const y=d(sp());return Rn.PostgrestError=y.default,Rn.default={PostgrestClient:o.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:h.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:p.default,PostgrestError:y.default},Rn}var Xm=Ym();const Qm=lh(Xm),{PostgrestClient:eg,PostgrestQueryBuilder:Gy,PostgrestFilterBuilder:Vy,PostgrestTransformBuilder:Hy,PostgrestBuilder:Zy,PostgrestError:qy}=Qm;class tg{static detectEnvironment(){var o;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((o=navigator.userAgent)===null||o===void 0)&&o.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const i=parseInt(process.versions.node.split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const o=this.detectEnvironment();if(o.constructor)return o.constructor;let i=o.error||"WebSocket not supported in this environment.";throw o.workaround&&(i+=`

Suggested solution: ${o.workaround}`),new Error(i)}static createWebSocket(o,i){const h=this.getWebSocketConstructor();return new h(o,i)}static isWebSocketSupported(){try{const o=this.detectEnvironment();return o.type==="native"||o.type==="ws"}catch{return!1}}}const ng="2.15.1",rg=`realtime-js/${ng}`,ig="1.0.0",mc=1e4,sg=1e3,og=100;var au;(function(d){d[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed"})(au||(au={}));var En;(function(d){d.closed="closed",d.errored="errored",d.joined="joined",d.joining="joining",d.leaving="leaving"})(En||(En={}));var Pi;(function(d){d.close="phx_close",d.error="phx_error",d.join="phx_join",d.reply="phx_reply",d.leave="phx_leave",d.access_token="access_token"})(Pi||(Pi={}));var gc;(function(d){d.websocket="websocket"})(gc||(gc={}));var Ba;(function(d){d.Connecting="connecting",d.Open="open",d.Closing="closing",d.Closed="closed"})(Ba||(Ba={}));class ag{constructor(){this.HEADER_LENGTH=1}decode(o,i){return o.constructor===ArrayBuffer?i(this._binaryDecode(o)):i(typeof o=="string"?JSON.parse(o):{})}_binaryDecode(o){const i=new DataView(o),h=new TextDecoder;return this._decodeBroadcast(o,i,h)}_decodeBroadcast(o,i,h){const c=i.getUint8(1),p=i.getUint8(2);let y=this.HEADER_LENGTH+2;const k=h.decode(o.slice(y,y+c));y=y+c;const b=h.decode(o.slice(y,y+p));y=y+p;const M=JSON.parse(h.decode(o.slice(y,o.byteLength)));return{ref:null,topic:k,event:b,payload:M}}}class up{constructor(o,i){this.callback=o,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=o,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zt;(function(d){d.abstime="abstime",d.bool="bool",d.date="date",d.daterange="daterange",d.float4="float4",d.float8="float8",d.int2="int2",d.int4="int4",d.int4range="int4range",d.int8="int8",d.int8range="int8range",d.json="json",d.jsonb="jsonb",d.money="money",d.numeric="numeric",d.oid="oid",d.reltime="reltime",d.text="text",d.time="time",d.timestamp="timestamp",d.timestamptz="timestamptz",d.timetz="timetz",d.tsrange="tsrange",d.tstzrange="tstzrange"})(Zt||(Zt={}));const Mf=(d,o,i={})=>{var h;const c=(h=i.skipTypes)!==null&&h!==void 0?h:[];return Object.keys(o).reduce((p,y)=>(p[y]=lg(y,d,o,c),p),{})},lg=(d,o,i,h)=>{const c=o.find(k=>k.name===d),p=c?.type,y=i[d];return p&&!h.includes(p)?hp(p,y):_c(y)},hp=(d,o)=>{if(d.charAt(0)==="_"){const i=d.slice(1,d.length);return dg(o,i)}switch(d){case Zt.bool:return ug(o);case Zt.float4:case Zt.float8:case Zt.int2:case Zt.int4:case Zt.int8:case Zt.numeric:case Zt.oid:return hg(o);case Zt.json:case Zt.jsonb:return cg(o);case Zt.timestamp:return fg(o);case Zt.abstime:case Zt.date:case Zt.daterange:case Zt.int4range:case Zt.int8range:case Zt.money:case Zt.reltime:case Zt.text:case Zt.time:case Zt.timestamptz:case Zt.timetz:case Zt.tsrange:case Zt.tstzrange:return _c(o);default:return _c(o)}},_c=d=>d,ug=d=>{switch(d){case"t":return!0;case"f":return!1;default:return d}},hg=d=>{if(typeof d=="string"){const o=parseFloat(d);if(!Number.isNaN(o))return o}return d},cg=d=>{if(typeof d=="string")try{return JSON.parse(d)}catch(o){return console.log(`JSON parse error: ${o}`),d}return d},dg=(d,o)=>{if(typeof d!="string")return d;const i=d.length-1,h=d[i];if(d[0]==="{"&&h==="}"){let p;const y=d.slice(1,i);try{p=JSON.parse("["+y+"]")}catch{p=y?y.split(","):[]}return p.map(k=>hp(o,k))}return d},fg=d=>typeof d=="string"?d.replace(" ","T"):d,cp=d=>{let o=d;return o=o.replace(/^ws/i,"http"),o=o.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),o.replace(/\/+$/,"")+"/api/broadcast"};class ic{constructor(o,i,h={},c=mc){this.channel=o,this.event=i,this.payload=h,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(o){this.timeout=o,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(o){this.payload=Object.assign(Object.assign({},this.payload),o)}receive(o,i){var h;return this._hasReceived(o)&&i((h=this.receivedResp)===null||h===void 0?void 0:h.response),this.recHooks.push({status:o,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const o=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},o),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(o,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:o,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:o,response:i}){this.recHooks.filter(h=>h.status===o).forEach(h=>h.callback(i))}_hasReceived(o){return this.receivedResp&&this.receivedResp.status===o}}var Pf;(function(d){d.SYNC="sync",d.JOIN="join",d.LEAVE="leave"})(Pf||(Pf={}));class lu{constructor(o,i){this.channel=o,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const h=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(h.state,{},c=>{const{onJoin:p,onLeave:y,onSync:k}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,c,p,y),this.pendingDiffs.forEach(b=>{this.state=lu.syncDiff(this.state,b,p,y)}),this.pendingDiffs=[],k()}),this.channel._on(h.diff,{},c=>{const{onJoin:p,onLeave:y,onSync:k}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=lu.syncDiff(this.state,c,p,y),k())}),this.onJoin((c,p,y)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:p,newPresences:y})}),this.onLeave((c,p,y)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:p,leftPresences:y})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(o,i,h,c){const p=this.cloneDeep(o),y=this.transformState(i),k={},b={};return this.map(p,(M,B)=>{y[M]||(b[M]=B)}),this.map(y,(M,B)=>{const T=p[M];if(T){const $=B.map(J=>J.presence_ref),F=T.map(J=>J.presence_ref),Z=B.filter(J=>F.indexOf(J.presence_ref)<0),q=T.filter(J=>$.indexOf(J.presence_ref)<0);Z.length>0&&(k[M]=Z),q.length>0&&(b[M]=q)}else k[M]=B}),this.syncDiff(p,{joins:k,leaves:b},h,c)}static syncDiff(o,i,h,c){const{joins:p,leaves:y}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return h||(h=()=>{}),c||(c=()=>{}),this.map(p,(k,b)=>{var M;const B=(M=o[k])!==null&&M!==void 0?M:[];if(o[k]=this.cloneDeep(b),B.length>0){const T=o[k].map(F=>F.presence_ref),$=B.filter(F=>T.indexOf(F.presence_ref)<0);o[k].unshift(...$)}h(k,B,b)}),this.map(y,(k,b)=>{let M=o[k];if(!M)return;const B=b.map(T=>T.presence_ref);M=M.filter(T=>B.indexOf(T.presence_ref)<0),o[k]=M,c(k,M,b),M.length===0&&delete o[k]}),o}static map(o,i){return Object.getOwnPropertyNames(o).map(h=>i(h,o[h]))}static transformState(o){return o=this.cloneDeep(o),Object.getOwnPropertyNames(o).reduce((i,h)=>{const c=o[h];return"metas"in c?i[h]=c.metas.map(p=>(p.presence_ref=p.phx_ref,delete p.phx_ref,delete p.phx_ref_prev,p)):i[h]=c,i},{})}static cloneDeep(o){return JSON.parse(JSON.stringify(o))}onJoin(o){this.caller.onJoin=o}onLeave(o){this.caller.onLeave=o}onSync(o){this.caller.onSync=o}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sf;(function(d){d.ALL="*",d.INSERT="INSERT",d.UPDATE="UPDATE",d.DELETE="DELETE"})(Sf||(Sf={}));var uu;(function(d){d.BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system"})(uu||(uu={}));var Us;(function(d){d.SUBSCRIBED="SUBSCRIBED",d.TIMED_OUT="TIMED_OUT",d.CLOSED="CLOSED",d.CHANNEL_ERROR="CHANNEL_ERROR"})(Us||(Us={}));class Ac{constructor(o,i={config:{}},h){this.topic=o,this.params=i,this.socket=h,this.bindings={},this.state=En.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=o.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new ic(this,Pi.join,this.params,this.timeout),this.rejoinTimer=new up(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=En.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=En.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pi.reply,{},(c,p)=>{this._trigger(this._replyEventName(p),c)}),this.presence=new lu(this),this.broadcastEndpointURL=cp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(o,i=this.timeout){var h,c;if(this.socket.isConnected()||this.socket.connect(),this.state==En.closed){const{config:{broadcast:p,presence:y,private:k}}=this.params,b=(c=(h=this.bindings.postgres_changes)===null||h===void 0?void 0:h.map($=>$.filter))!==null&&c!==void 0?c:[],M=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0,B={},T={broadcast:p,presence:Object.assign(Object.assign({},y),{enabled:M}),postgres_changes:b,private:k};this.socket.accessTokenValue&&(B.access_token=this.socket.accessTokenValue),this._onError($=>o?.(Us.CHANNEL_ERROR,$)),this._onClose(()=>o?.(Us.CLOSED)),this.updateJoinPayload(Object.assign({config:T},B)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:$})=>{var F;if(this.socket.setAuth(),$===void 0){o?.(Us.SUBSCRIBED);return}else{const Z=this.bindings.postgres_changes,q=(F=Z?.length)!==null&&F!==void 0?F:0,J=[];for(let ce=0;ce<q;ce++){const be=Z[ce],{filter:{event:he,schema:Ae,table:Re,filter:le}}=be,ke=$&&$[ce];if(ke&&ke.event===he&&ke.schema===Ae&&ke.table===Re&&ke.filter===le)J.push(Object.assign(Object.assign({},be),{id:ke.id}));else{this.unsubscribe(),this.state=En.errored,o?.(Us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,o&&o(Us.SUBSCRIBED);return}}).receive("error",$=>{this.state=En.errored,o?.(Us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values($).join(", ")||"error")))}).receive("timeout",()=>{o?.(Us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(o,i={}){return await this.send({type:"presence",event:"track",payload:o},i.timeout||this.timeout)}async untrack(o={}){return await this.send({type:"presence",event:"untrack"},o)}on(o,i,h){return this.state===En.joined&&o===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(o,i,h)}async send(o,i={}){var h,c;if(!this._canPush()&&o.type==="broadcast"){const{event:p,payload:y}=o,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:p,payload:y,private:this.private}]})};try{const M=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(h=i.timeout)!==null&&h!==void 0?h:this.timeout);return await((c=M.body)===null||c===void 0?void 0:c.cancel()),M.ok?"ok":"error"}catch(M){return M.name==="AbortError"?"timed out":"error"}}else return new Promise(p=>{var y,k,b;const M=this._push(o.type,o,i.timeout||this.timeout);o.type==="broadcast"&&!(!((b=(k=(y=this.params)===null||y===void 0?void 0:y.config)===null||k===void 0?void 0:k.broadcast)===null||b===void 0)&&b.ack)&&p("ok"),M.receive("ok",()=>p("ok")),M.receive("error",()=>p("error")),M.receive("timeout",()=>p("timed out"))})}updateJoinPayload(o){this.joinPush.updatePayload(o)}unsubscribe(o=this.timeout){this.state=En.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pi.close,"leave",this._joinRef())};this.joinPush.destroy();let h=null;return new Promise(c=>{h=new ic(this,Pi.leave,{},o),h.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),h.send(),this._canPush()||h.trigger("ok",{})}).finally(()=>{h?.destroy()})}teardown(){this.pushBuffer.forEach(o=>o.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=En.closed,this.bindings={}}async _fetchWithTimeout(o,i,h){const c=new AbortController,p=setTimeout(()=>c.abort(),h),y=await this.socket.fetch(o,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(p),y}_push(o,i,h=this.timeout){if(!this.joinedOnce)throw`tried to push '${o}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new ic(this,o,i,h);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(o){if(o.startTimeout(),this.pushBuffer.push(o),this.pushBuffer.length>og){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(o,i,h){return i}_isMember(o){return this.topic===o}_joinRef(){return this.joinPush.ref}_trigger(o,i,h){var c,p;const y=o.toLocaleLowerCase(),{close:k,error:b,leave:M,join:B}=Pi;if(h&&[k,b,M,B].indexOf(y)>=0&&h!==this._joinRef())return;let $=this._onMessage(y,i,h);if(i&&!$)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(y)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(F=>{var Z,q,J;return((Z=F.filter)===null||Z===void 0?void 0:Z.event)==="*"||((J=(q=F.filter)===null||q===void 0?void 0:q.event)===null||J===void 0?void 0:J.toLocaleLowerCase())===y}).map(F=>F.callback($,h)):(p=this.bindings[y])===null||p===void 0||p.filter(F=>{var Z,q,J,ce,be,he;if(["broadcast","presence","postgres_changes"].includes(y))if("id"in F){const Ae=F.id,Re=(Z=F.filter)===null||Z===void 0?void 0:Z.event;return Ae&&((q=i.ids)===null||q===void 0?void 0:q.includes(Ae))&&(Re==="*"||Re?.toLocaleLowerCase()===((J=i.data)===null||J===void 0?void 0:J.type.toLocaleLowerCase()))}else{const Ae=(be=(ce=F?.filter)===null||ce===void 0?void 0:ce.event)===null||be===void 0?void 0:be.toLocaleLowerCase();return Ae==="*"||Ae===((he=i?.event)===null||he===void 0?void 0:he.toLocaleLowerCase())}else return F.type.toLocaleLowerCase()===y}).map(F=>{if(typeof $=="object"&&"ids"in $){const Z=$.data,{schema:q,table:J,commit_timestamp:ce,type:be,errors:he}=Z;$=Object.assign(Object.assign({},{schema:q,table:J,commit_timestamp:ce,eventType:be,new:{},old:{},errors:he}),this._getPayloadRecords(Z))}F.callback($,h)})}_isClosed(){return this.state===En.closed}_isJoined(){return this.state===En.joined}_isJoining(){return this.state===En.joining}_isLeaving(){return this.state===En.leaving}_replyEventName(o){return`chan_reply_${o}`}_on(o,i,h){const c=o.toLocaleLowerCase(),p={type:c,filter:i,callback:h};return this.bindings[c]?this.bindings[c].push(p):this.bindings[c]=[p],this}_off(o,i){const h=o.toLocaleLowerCase();return this.bindings[h]&&(this.bindings[h]=this.bindings[h].filter(c=>{var p;return!(((p=c.type)===null||p===void 0?void 0:p.toLocaleLowerCase())===h&&Ac.isEqual(c.filter,i))})),this}static isEqual(o,i){if(Object.keys(o).length!==Object.keys(i).length)return!1;for(const h in o)if(o[h]!==i[h])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(o){this._on(Pi.close,{},o)}_onError(o){this._on(Pi.error,{},i=>o(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(o=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=En.joining,this.joinPush.resend(o))}_getPayloadRecords(o){const i={new:{},old:{}};return(o.type==="INSERT"||o.type==="UPDATE")&&(i.new=Mf(o.columns,o.record)),(o.type==="UPDATE"||o.type==="DELETE")&&(i.old=Mf(o.columns,o.old_record)),i}}const Bf=()=>{},Ku={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pg=[1e3,2e3,5e3,1e4],mg=1e4,gg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _g{constructor(o,i){var h;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=Ku.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bf,this.ref=0,this.reconnectTimer=null,this.logger=Bf,this.conn=null,this.sendBuffer=[],this.serializer=new ag,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>{let p;return c?p=c:typeof fetch>"u"?p=(...y)=>pu(async()=>{const{default:k}=await Promise.resolve().then(()=>El);return{default:k}},void 0).then(({default:k})=>k(...y)).catch(k=>{throw new Error(`Failed to load @supabase/node-fetch: ${k.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):p=fetch,(...y)=>p(...y)},!(!((h=i?.params)===null||h===void 0)&&h.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${o}/${gc.websocket}`,this.httpEndpoint=cp(o),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tg.createWebSocket(this.endpointURL())}catch(o){this._setConnectionState("disconnected");const i=o.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ig}))}disconnect(o,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const h=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(h),this._setConnectionState("disconnected")},o?this.conn.close(o,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(o){const i=await o.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const o=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),o}log(o,i,h){this.logger(o,i,h)}connectionState(){switch(this.conn&&this.conn.readyState){case au.connecting:return Ba.Connecting;case au.open:return Ba.Open;case au.closing:return Ba.Closing;default:return Ba.Closed}}isConnected(){return this.connectionState()===Ba.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(o,i={config:{}}){const h=`realtime:${o}`,c=this.getChannels().find(p=>p.topic===h);if(c)return c;{const p=new Ac(`realtime:${o}`,i,this);return this.channels.push(p),p}}push(o){const{topic:i,event:h,payload:c,ref:p}=o,y=()=>{this.encode(o,k=>{var b;(b=this.conn)===null||b===void 0||b.send(k)})};this.log("push",`${i} ${h} (${p})`,c),this.isConnected()?y():this.sendBuffer.push(y)}async setAuth(o=null){this._authPromise=this._performAuth(o);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var o;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(o=this.conn)===null||o===void 0||o.close(sg,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Ku.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(o){this.heartbeatCallback=o}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(o=>o()),this.sendBuffer=[])}_makeRef(){let o=this.ref+1;return o===this.ref?this.ref=0:this.ref=o,this.ref.toString()}_leaveOpenTopic(o){let i=this.channels.find(h=>h.topic===o&&(h._isJoined()||h._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${o}"`),i.unsubscribe())}_remove(o){this.channels=this.channels.filter(i=>i.topic!==o.topic)}_onConnMessage(o){this.decode(o.data,i=>{i.topic==="phoenix"&&i.event==="phx_reply"&&this.heartbeatCallback(i.payload.status==="ok"?"ok":"error"),i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:h,event:c,payload:p,ref:y}=i,k=y?`(${y})`:"",b=p.status||"";this.log("receive",`${b} ${h} ${c} ${k}`.trim(),p),this.channels.filter(M=>M._isMember(h)).forEach(M=>M._trigger(c,p,y)),this._triggerStateCallbacks("message",i)})}_clearTimer(o){var i;o==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):o==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=o=>this._onConnError(o),this.conn.onmessage=o=>this._onConnMessage(o),this.conn.onclose=o=>this._onConnClose(o))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(o=>o.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const o=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(o),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(o){var i;this._setConnectionState("disconnected"),this.log("transport","close",o),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",o)}_onConnError(o){this._setConnectionState("disconnected"),this.log("transport",`${o}`),this._triggerChanError(),this._triggerStateCallbacks("error",o)}_triggerChanError(){this.channels.forEach(o=>o._trigger(Pi.error))}_appendParams(o,i){if(Object.keys(i).length===0)return o;const h=o.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${o}${h}${c}`}_workerObjectUrl(o){let i;if(o)i=o;else{const h=new Blob([gg],{type:"application/javascript"});i=URL.createObjectURL(h)}return i}_setConnectionState(o,i=!1){this._connectionState=o,o==="connecting"?this._wasManualDisconnect=!1:o==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(o=null){let i;o?i=o:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(h=>{const c={access_token:i,version:rg};i&&h.updateJoinPayload(c),h.joinedOnce&&h._isJoined()&&h._push(Pi.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(o="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${o}`,i)})}_triggerStateCallbacks(o,i){try{this.stateChangeCallbacks[o].forEach(h=>{try{h(i)}catch(c){this.log("error",`error in ${o} callback`,c)}})}catch(h){this.log("error",`error triggering ${o} callbacks`,h)}}_setupReconnectionTimer(){this.reconnectTimer=new up(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ku.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(o){var i,h,c,p,y,k,b,M;if(this.transport=(i=o?.transport)!==null&&i!==void 0?i:null,this.timeout=(h=o?.timeout)!==null&&h!==void 0?h:mc,this.heartbeatIntervalMs=(c=o?.heartbeatIntervalMs)!==null&&c!==void 0?c:Ku.HEARTBEAT_INTERVAL,this.worker=(p=o?.worker)!==null&&p!==void 0?p:!1,this.accessToken=(y=o?.accessToken)!==null&&y!==void 0?y:null,o?.params&&(this.params=o.params),o?.logger&&(this.logger=o.logger),(o?.logLevel||o?.log_level)&&(this.logLevel=o.logLevel||o.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(k=o?.reconnectAfterMs)!==null&&k!==void 0?k:(B=>pg[B-1]||mg),this.encode=(b=o?.encode)!==null&&b!==void 0?b:((B,T)=>T(JSON.stringify(B))),this.decode=(M=o?.decode)!==null&&M!==void 0?M:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=o?.workerUrl}}}class Dc extends Error{constructor(o){super(o),this.__isStorageError=!0,this.name="StorageError"}}function Mn(d){return typeof d=="object"&&d!==null&&"__isStorageError"in d}class yg extends Dc{constructor(o,i,h){super(o),this.name="StorageApiError",this.status=i,this.statusCode=h}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yc extends Dc{constructor(o,i){super(o),this.name="StorageUnknownError",this.originalError=i}}var vg=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};const dp=d=>{let o;return d?o=d:typeof fetch>"u"?o=(...i)=>pu(async()=>{const{default:h}=await Promise.resolve().then(()=>El);return{default:h}},void 0).then(({default:h})=>h(...i)):o=fetch,(...i)=>o(...i)},wg=()=>vg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pu(()=>Promise.resolve().then(()=>El),void 0)).Response:Response}),vc=d=>{if(Array.isArray(d))return d.map(i=>vc(i));if(typeof d=="function"||d!==Object(d))return d;const o={};return Object.entries(d).forEach(([i,h])=>{const c=i.replace(/([-_][a-z])/gi,p=>p.toUpperCase().replace(/[-_]/g,""));o[c]=vc(h)}),o},xg=d=>{if(typeof d!="object"||d===null)return!1;const o=Object.getPrototypeOf(d);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)};var Ta=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};const sc=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Lg=(d,o,i)=>Ta(void 0,void 0,void 0,function*(){const h=yield wg();d instanceof h&&!i?.noResolveJson?d.json().then(c=>{const p=d.status||500,y=c?.statusCode||p+"";o(new yg(sc(c),p,y))}).catch(c=>{o(new yc(sc(c),c))}):o(new yc(sc(d),d))}),kg=(d,o,i,h)=>{const c={method:d,headers:o?.headers||{}};return d==="GET"||!h?c:(xg(h)?(c.headers=Object.assign({"Content-Type":"application/json"},o?.headers),c.body=JSON.stringify(h)):c.body=h,o?.duplex&&(c.duplex=o.duplex),Object.assign(Object.assign({},c),i))};function mu(d,o,i,h,c,p){return Ta(this,void 0,void 0,function*(){return new Promise((y,k)=>{d(i,kg(o,h,c,p)).then(b=>{if(!b.ok)throw b;return h?.noResolveJson?b:b.json()}).then(b=>y(b)).catch(b=>Lg(b,k,h))})})}function sh(d,o,i,h){return Ta(this,void 0,void 0,function*(){return mu(d,"GET",o,i,h)})}function os(d,o,i,h,c){return Ta(this,void 0,void 0,function*(){return mu(d,"POST",o,h,c,i)})}function wc(d,o,i,h,c){return Ta(this,void 0,void 0,function*(){return mu(d,"PUT",o,h,c,i)})}function bg(d,o,i,h){return Ta(this,void 0,void 0,function*(){return mu(d,"HEAD",o,Object.assign(Object.assign({},i),{noResolveJson:!0}),h)})}function fp(d,o,i,h,c){return Ta(this,void 0,void 0,function*(){return mu(d,"DELETE",o,h,c,i)})}var ur=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};const Cg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Eg{constructor(o,i={},h,c){this.url=o,this.headers=i,this.bucketId=h,this.fetch=dp(c)}uploadOrUpdate(o,i,h,c){return ur(this,void 0,void 0,function*(){try{let p;const y=Object.assign(Object.assign({},Tf),c);let k=Object.assign(Object.assign({},this.headers),o==="POST"&&{"x-upsert":String(y.upsert)});const b=y.metadata;typeof Blob<"u"&&h instanceof Blob?(p=new FormData,p.append("cacheControl",y.cacheControl),b&&p.append("metadata",this.encodeMetadata(b)),p.append("",h)):typeof FormData<"u"&&h instanceof FormData?(p=h,p.append("cacheControl",y.cacheControl),b&&p.append("metadata",this.encodeMetadata(b))):(p=h,k["cache-control"]=`max-age=${y.cacheControl}`,k["content-type"]=y.contentType,b&&(k["x-metadata"]=this.toBase64(this.encodeMetadata(b)))),c?.headers&&(k=Object.assign(Object.assign({},k),c.headers));const M=this._removeEmptyFolders(i),B=this._getFinalPath(M),T=yield(o=="PUT"?wc:os)(this.fetch,`${this.url}/object/${B}`,p,Object.assign({headers:k},y?.duplex?{duplex:y.duplex}:{}));return{data:{path:M,id:T.Id,fullPath:T.Key},error:null}}catch(p){if(Mn(p))return{data:null,error:p};throw p}})}upload(o,i,h){return ur(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",o,i,h)})}uploadToSignedUrl(o,i,h,c){return ur(this,void 0,void 0,function*(){const p=this._removeEmptyFolders(o),y=this._getFinalPath(p),k=new URL(this.url+`/object/upload/sign/${y}`);k.searchParams.set("token",i);try{let b;const M=Object.assign({upsert:Tf.upsert},c),B=Object.assign(Object.assign({},this.headers),{"x-upsert":String(M.upsert)});typeof Blob<"u"&&h instanceof Blob?(b=new FormData,b.append("cacheControl",M.cacheControl),b.append("",h)):typeof FormData<"u"&&h instanceof FormData?(b=h,b.append("cacheControl",M.cacheControl)):(b=h,B["cache-control"]=`max-age=${M.cacheControl}`,B["content-type"]=M.contentType);const T=yield wc(this.fetch,k.toString(),b,{headers:B});return{data:{path:p,fullPath:T.Key},error:null}}catch(b){if(Mn(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(o,i){return ur(this,void 0,void 0,function*(){try{let h=this._getFinalPath(o);const c=Object.assign({},this.headers);i?.upsert&&(c["x-upsert"]="true");const p=yield os(this.fetch,`${this.url}/object/upload/sign/${h}`,{},{headers:c}),y=new URL(this.url+p.url),k=y.searchParams.get("token");if(!k)throw new Dc("No token returned by API");return{data:{signedUrl:y.toString(),path:o,token:k},error:null}}catch(h){if(Mn(h))return{data:null,error:h};throw h}})}update(o,i,h){return ur(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",o,i,h)})}move(o,i,h){return ur(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:o,destinationKey:i,destinationBucket:h?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(Mn(c))return{data:null,error:c};throw c}})}copy(o,i,h){return ur(this,void 0,void 0,function*(){try{return{data:{path:(yield os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:o,destinationKey:i,destinationBucket:h?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(Mn(c))return{data:null,error:c};throw c}})}createSignedUrl(o,i,h){return ur(this,void 0,void 0,function*(){try{let c=this._getFinalPath(o),p=yield os(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:i},h?.transform?{transform:h.transform}:{}),{headers:this.headers});const y=h?.download?`&download=${h.download===!0?"":h.download}`:"";return p={signedUrl:encodeURI(`${this.url}${p.signedURL}${y}`)},{data:p,error:null}}catch(c){if(Mn(c))return{data:null,error:c};throw c}})}createSignedUrls(o,i,h){return ur(this,void 0,void 0,function*(){try{const c=yield os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:o},{headers:this.headers}),p=h?.download?`&download=${h.download===!0?"":h.download}`:"";return{data:c.map(y=>Object.assign(Object.assign({},y),{signedUrl:y.signedURL?encodeURI(`${this.url}${y.signedURL}${p}`):null})),error:null}}catch(c){if(Mn(c))return{data:null,error:c};throw c}})}download(o,i){return ur(this,void 0,void 0,function*(){const c=typeof i?.transform<"u"?"render/image/authenticated":"object",p=this.transformOptsToQueryString(i?.transform||{}),y=p?`?${p}`:"";try{const k=this._getFinalPath(o);return{data:yield(yield sh(this.fetch,`${this.url}/${c}/${k}${y}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(k){if(Mn(k))return{data:null,error:k};throw k}})}info(o){return ur(this,void 0,void 0,function*(){const i=this._getFinalPath(o);try{const h=yield sh(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:vc(h),error:null}}catch(h){if(Mn(h))return{data:null,error:h};throw h}})}exists(o){return ur(this,void 0,void 0,function*(){const i=this._getFinalPath(o);try{return yield bg(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(h){if(Mn(h)&&h instanceof yc){const c=h.originalError;if([400,404].includes(c?.status))return{data:!1,error:h}}throw h}})}getPublicUrl(o,i){const h=this._getFinalPath(o),c=[],p=i?.download?`download=${i.download===!0?"":i.download}`:"";p!==""&&c.push(p);const k=typeof i?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(i?.transform||{});b!==""&&c.push(b);let M=c.join("&");return M!==""&&(M=`?${M}`),{data:{publicUrl:encodeURI(`${this.url}/${k}/public/${h}${M}`)}}}remove(o){return ur(this,void 0,void 0,function*(){try{return{data:yield fp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:o},{headers:this.headers}),error:null}}catch(i){if(Mn(i))return{data:null,error:i};throw i}})}list(o,i,h){return ur(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},Cg),i),{prefix:o||""});return{data:yield os(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},h),error:null}}catch(c){if(Mn(c))return{data:null,error:c};throw c}})}listV2(o,i){return ur(this,void 0,void 0,function*(){try{const h=Object.assign({},o);return{data:yield os(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,h,{headers:this.headers},i),error:null}}catch(h){if(Mn(h))return{data:null,error:h};throw h}})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const i=[];return o.width&&i.push(`width=${o.width}`),o.height&&i.push(`height=${o.height}`),o.resize&&i.push(`resize=${o.resize}`),o.format&&i.push(`format=${o.format}`),o.quality&&i.push(`quality=${o.quality}`),i.join("&")}}const Mg="2.11.0",Pg={"X-Client-Info":`storage-js/${Mg}`};var yl=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};class Sg{constructor(o,i={},h,c){const p=new URL(o);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase.")),this.url=p.href,this.headers=Object.assign(Object.assign({},Pg),i),this.fetch=dp(h)}listBuckets(){return yl(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(o){if(Mn(o))return{data:null,error:o};throw o}})}getBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket/${o}`,{headers:this.headers}),error:null}}catch(i){if(Mn(i))return{data:null,error:i};throw i}})}createBucket(o,i={public:!1}){return yl(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{id:o,name:o,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(Mn(h))return{data:null,error:h};throw h}})}updateBucket(o,i){return yl(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${o}`,{id:o,name:o,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(Mn(h))return{data:null,error:h};throw h}})}emptyBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${o}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(Mn(i))return{data:null,error:i};throw i}})}deleteBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield fp(this.fetch,`${this.url}/bucket/${o}`,{},{headers:this.headers}),error:null}}catch(i){if(Mn(i))return{data:null,error:i};throw i}})}}class Bg extends Sg{constructor(o,i={},h,c){super(o,i,h,c)}from(o){return new Eg(this.url,this.headers,o,this.fetch)}}const Tg="2.55.0";let ru="";typeof Deno<"u"?ru="deno":typeof document<"u"?ru="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ru="react-native":ru="node";const Ag={"X-Client-Info":`supabase-js-${ru}/${Tg}`},Dg={headers:Ag},Og={schema:"public"},Rg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jg={};var Ig=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};const Fg=d=>{let o;return d?o=d:typeof fetch>"u"?o=rp:o=fetch,(...i)=>o(...i)},Ng=()=>typeof Headers>"u"?ip:Headers,zg=(d,o,i)=>{const h=Fg(i),c=Ng();return(p,y)=>Ig(void 0,void 0,void 0,function*(){var k;const b=(k=yield o())!==null&&k!==void 0?k:d;let M=new c(y?.headers);return M.has("apikey")||M.set("apikey",d),M.has("Authorization")||M.set("Authorization",`Bearer ${b}`),h(p,Object.assign(Object.assign({},y),{headers:M}))})};var Ug=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};function $g(d){return d.endsWith("/")?d:d+"/"}function Gg(d,o){var i,h;const{db:c,auth:p,realtime:y,global:k}=d,{db:b,auth:M,realtime:B,global:T}=o,$={db:Object.assign(Object.assign({},b),c),auth:Object.assign(Object.assign({},M),p),realtime:Object.assign(Object.assign({},B),y),storage:{},global:Object.assign(Object.assign(Object.assign({},T),k),{headers:Object.assign(Object.assign({},(i=T?.headers)!==null&&i!==void 0?i:{}),(h=k?.headers)!==null&&h!==void 0?h:{})}),accessToken:()=>Ug(this,void 0,void 0,function*(){return""})};return d.accessToken?$.accessToken=d.accessToken:delete $.accessToken,$}const pp="2.71.1",kl=30*1e3,xc=3,oc=xc*kl,Vg="http://localhost:9999",Hg="supabase.auth.token",Zg={"X-Client-Info":`gotrue-js/${pp}`},Lc="X-Supabase-Api-Version",mp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wg=600*1e3;class Oc extends Error{constructor(o,i,h){super(o),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=h}}function yt(d){return typeof d=="object"&&d!==null&&"__isAuthError"in d}class Kg extends Oc{constructor(o,i,h){super(o,i,h),this.name="AuthApiError",this.status=i,this.code=h}}function Jg(d){return yt(d)&&d.name==="AuthApiError"}class gp extends Oc{constructor(o,i){super(o),this.name="AuthUnknownError",this.originalError=i}}class Io extends Oc{constructor(o,i,h,c){super(o,h,c),this.name=i,this.status=h}}class Ro extends Io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yg(d){return yt(d)&&d.name==="AuthSessionMissingError"}class Ju extends Io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yu extends Io{constructor(o){super(o,"AuthInvalidCredentialsError",400,void 0)}}class Xu extends Io{constructor(o,i=null){super(o,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xg(d){return yt(d)&&d.name==="AuthImplicitGrantRedirectError"}class Af extends Io{constructor(o,i=null){super(o,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kc extends Io{constructor(o,i){super(o,"AuthRetryableFetchError",i,void 0)}}function ac(d){return yt(d)&&d.name==="AuthRetryableFetchError"}class Df extends Io{constructor(o,i,h){super(o,"AuthWeakPasswordError",i,"weak_password"),this.reasons=h}}class bc extends Io{constructor(o){super(o,"AuthInvalidJwtError",400,"invalid_jwt")}}const oh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Of=` 	
\r=`.split(""),Qg=(()=>{const d=new Array(128);for(let o=0;o<d.length;o+=1)d[o]=-1;for(let o=0;o<Of.length;o+=1)d[Of[o].charCodeAt(0)]=-2;for(let o=0;o<oh.length;o+=1)d[oh[o].charCodeAt(0)]=o;return d})();function Rf(d,o,i){if(d!==null)for(o.queue=o.queue<<8|d,o.queuedBits+=8;o.queuedBits>=6;){const h=o.queue>>o.queuedBits-6&63;i(oh[h]),o.queuedBits-=6}else if(o.queuedBits>0)for(o.queue=o.queue<<6-o.queuedBits,o.queuedBits=6;o.queuedBits>=6;){const h=o.queue>>o.queuedBits-6&63;i(oh[h]),o.queuedBits-=6}}function _p(d,o,i){const h=Qg[d];if(h>-1)for(o.queue=o.queue<<6|h,o.queuedBits+=6;o.queuedBits>=8;)i(o.queue>>o.queuedBits-8&255),o.queuedBits-=8;else{if(h===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(d)}"`)}}function jf(d){const o=[],i=y=>{o.push(String.fromCodePoint(y))},h={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},p=y=>{n0(y,h,i)};for(let y=0;y<d.length;y+=1)_p(d.charCodeAt(y),c,p);return o.join("")}function e0(d,o){if(d<=127){o(d);return}else if(d<=2047){o(192|d>>6),o(128|d&63);return}else if(d<=65535){o(224|d>>12),o(128|d>>6&63),o(128|d&63);return}else if(d<=1114111){o(240|d>>18),o(128|d>>12&63),o(128|d>>6&63),o(128|d&63);return}throw new Error(`Unrecognized Unicode codepoint: ${d.toString(16)}`)}function t0(d,o){for(let i=0;i<d.length;i+=1){let h=d.charCodeAt(i);if(h>55295&&h<=56319){const c=(h-55296)*1024&65535;h=(d.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}e0(h,o)}}function n0(d,o,i){if(o.utf8seq===0){if(d<=127){i(d);return}for(let h=1;h<6;h+=1)if((d>>7-h&1)===0){o.utf8seq=h;break}if(o.utf8seq===2)o.codepoint=d&31;else if(o.utf8seq===3)o.codepoint=d&15;else if(o.utf8seq===4)o.codepoint=d&7;else throw new Error("Invalid UTF-8 sequence");o.utf8seq-=1}else if(o.utf8seq>0){if(d<=127)throw new Error("Invalid UTF-8 sequence");o.codepoint=o.codepoint<<6|d&63,o.utf8seq-=1,o.utf8seq===0&&i(o.codepoint)}}function r0(d){const o=[],i={queue:0,queuedBits:0},h=c=>{o.push(c)};for(let c=0;c<d.length;c+=1)_p(d.charCodeAt(c),i,h);return new Uint8Array(o)}function i0(d){const o=[];return t0(d,i=>o.push(i)),new Uint8Array(o)}function s0(d){const o=[],i={queue:0,queuedBits:0},h=c=>{o.push(c)};return d.forEach(c=>Rf(c,i,h)),Rf(null,i,h),o.join("")}function o0(d){return Math.round(Date.now()/1e3)+d}function a0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){const o=Math.random()*16|0;return(d=="x"?o:o&3|8).toString(16)})}const Mi=()=>typeof window<"u"&&typeof document<"u",Ma={tested:!1,writable:!1},yp=()=>{if(!Mi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ma.tested)return Ma.writable;const d=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(d,d),globalThis.localStorage.removeItem(d),Ma.tested=!0,Ma.writable=!0}catch{Ma.tested=!0,Ma.writable=!1}return Ma.writable};function l0(d){const o={},i=new URL(d);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,p)=>{o[p]=c})}catch{}return i.searchParams.forEach((h,c)=>{o[c]=h}),o}const vp=d=>{let o;return d?o=d:typeof fetch>"u"?o=(...i)=>pu(async()=>{const{default:h}=await Promise.resolve().then(()=>El);return{default:h}},void 0).then(({default:h})=>h(...i)):o=fetch,(...i)=>o(...i)},u0=d=>typeof d=="object"&&d!==null&&"status"in d&&"ok"in d&&"json"in d&&typeof d.json=="function",bl=async(d,o,i)=>{await d.setItem(o,JSON.stringify(i))},Pa=async(d,o)=>{const i=await d.getItem(o);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Oo=async(d,o)=>{await d.removeItem(o)};class uh{constructor(){this.promise=new uh.promiseConstructor((o,i)=>{this.resolve=o,this.reject=i})}}uh.promiseConstructor=Promise;function lc(d){const o=d.split(".");if(o.length!==3)throw new bc("Invalid JWT structure");for(let h=0;h<o.length;h++)if(!qg.test(o[h]))throw new bc("JWT not in base64url format");return{header:JSON.parse(jf(o[0])),payload:JSON.parse(jf(o[1])),signature:r0(o[2]),raw:{header:o[0],payload:o[1]}}}async function h0(d){return await new Promise(o=>{setTimeout(()=>o(null),d)})}function c0(d,o){return new Promise((h,c)=>{(async()=>{for(let p=0;p<1/0;p++)try{const y=await d(p);if(!o(p,null,y)){h(y);return}}catch(y){if(!o(p,y)){c(y);return}}})()})}function d0(d){return("0"+d.toString(16)).substr(-2)}function f0(){const o=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",h=i.length;let c="";for(let p=0;p<56;p++)c+=i.charAt(Math.floor(Math.random()*h));return c}return crypto.getRandomValues(o),Array.from(o,d0).join("")}async function p0(d){const i=new TextEncoder().encode(d),h=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(h);return Array.from(c).map(p=>String.fromCharCode(p)).join("")}async function m0(d){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),d;const i=await p0(d);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vl(d,o,i=!1){const h=f0();let c=h;i&&(c+="/PASSWORD_RECOVERY"),await bl(d,`${o}-code-verifier`,c);const p=await m0(h);return[p,h===p?"plain":"s256"]}const g0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _0(d){const o=d.headers.get(Lc);if(!o||!o.match(g0))return null;try{return new Date(`${o}T00:00:00.0Z`)}catch{return null}}function y0(d){if(!d)throw new Error("Missing exp claim");const o=Math.floor(Date.now()/1e3);if(d<=o)throw new Error("JWT has expired")}function v0(d){switch(d){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wl(d){if(!w0.test(d))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uc(){const d={};return new Proxy(d,{get:(o,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const h=i.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(o,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(o,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function If(d){return JSON.parse(JSON.stringify(d))}var x0=function(d,o){var i={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&o.indexOf(h)<0&&(i[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,h=Object.getOwnPropertySymbols(d);c<h.length;c++)o.indexOf(h[c])<0&&Object.prototype.propertyIsEnumerable.call(d,h[c])&&(i[h[c]]=d[h[c]]);return i};const Sa=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),L0=[502,503,504];async function Ff(d){var o;if(!u0(d))throw new kc(Sa(d),0);if(L0.includes(d.status))throw new kc(Sa(d),d.status);let i;try{i=await d.json()}catch(p){throw new gp(Sa(p),p)}let h;const c=_0(d);if(c&&c.getTime()>=mp["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?h=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(h=i.error_code),h){if(h==="weak_password")throw new Df(Sa(i),d.status,((o=i.weak_password)===null||o===void 0?void 0:o.reasons)||[]);if(h==="session_not_found")throw new Ro}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((p,y)=>p&&typeof y=="string",!0))throw new Df(Sa(i),d.status,i.weak_password.reasons);throw new Kg(Sa(i),d.status||500,h)}const k0=(d,o,i,h)=>{const c={method:d,headers:o?.headers||{}};return d==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},o?.headers),c.body=JSON.stringify(h),Object.assign(Object.assign({},c),i))};async function Et(d,o,i,h){var c;const p=Object.assign({},h?.headers);p[Lc]||(p[Lc]=mp["2024-01-01"].name),h?.jwt&&(p.Authorization=`Bearer ${h.jwt}`);const y=(c=h?.query)!==null&&c!==void 0?c:{};h?.redirectTo&&(y.redirect_to=h.redirectTo);const k=Object.keys(y).length?"?"+new URLSearchParams(y).toString():"",b=await b0(d,o,i+k,{headers:p,noResolveJson:h?.noResolveJson},{},h?.body);return h?.xform?h?.xform(b):{data:Object.assign({},b),error:null}}async function b0(d,o,i,h,c,p){const y=k0(o,h,c,p);let k;try{k=await d(i,Object.assign({},y))}catch(b){throw console.error(b),new kc(Sa(b),0)}if(k.ok||await Ff(k),h?.noResolveJson)return k;try{return await k.json()}catch(b){await Ff(b)}}function zs(d){var o;let i=null;P0(d)&&(i=Object.assign({},d),d.expires_at||(i.expires_at=o0(d.expires_in)));const h=(o=d.user)!==null&&o!==void 0?o:d;return{data:{session:i,user:h},error:null}}function Nf(d){const o=zs(d);return!o.error&&d.weak_password&&typeof d.weak_password=="object"&&Array.isArray(d.weak_password.reasons)&&d.weak_password.reasons.length&&d.weak_password.message&&typeof d.weak_password.message=="string"&&d.weak_password.reasons.reduce((i,h)=>i&&typeof h=="string",!0)&&(o.data.weak_password=d.weak_password),o}function jo(d){var o;return{data:{user:(o=d.user)!==null&&o!==void 0?o:d},error:null}}function C0(d){return{data:d,error:null}}function E0(d){const{action_link:o,email_otp:i,hashed_token:h,redirect_to:c,verification_type:p}=d,y=x0(d,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),k={action_link:o,email_otp:i,hashed_token:h,redirect_to:c,verification_type:p},b=Object.assign({},y);return{data:{properties:k,user:b},error:null}}function M0(d){return d}function P0(d){return d.access_token&&d.refresh_token&&d.expires_in}const hc=["global","local","others"];var S0=function(d,o){var i={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&o.indexOf(h)<0&&(i[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,h=Object.getOwnPropertySymbols(d);c<h.length;c++)o.indexOf(h[c])<0&&Object.prototype.propertyIsEnumerable.call(d,h[c])&&(i[h[c]]=d[h[c]]);return i};class B0{constructor({url:o="",headers:i={},fetch:h}){this.url=o,this.headers=i,this.fetch=vp(h),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(o,i=hc[0]){if(hc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hc.join(", ")}`);try{return await Et(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:o,noResolveJson:!0}),{data:null,error:null}}catch(h){if(yt(h))return{data:null,error:h};throw h}}async inviteUserByEmail(o,i={}){try{return await Et(this.fetch,"POST",`${this.url}/invite`,{body:{email:o,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:jo})}catch(h){if(yt(h))return{data:{user:null},error:h};throw h}}async generateLink(o){try{const{options:i}=o,h=S0(o,["options"]),c=Object.assign(Object.assign({},h),i);return"newEmail"in h&&(c.new_email=h?.newEmail,delete c.newEmail),await Et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:E0,redirectTo:i?.redirectTo})}catch(i){if(yt(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(o){try{return await Et(this.fetch,"POST",`${this.url}/admin/users`,{body:o,headers:this.headers,xform:jo})}catch(i){if(yt(i))return{data:{user:null},error:i};throw i}}async listUsers(o){var i,h,c,p,y,k,b;try{const M={nextPage:null,lastPage:0,total:0},B=await Et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(i=o?.page)===null||i===void 0?void 0:i.toString())!==null&&h!==void 0?h:"",per_page:(p=(c=o?.perPage)===null||c===void 0?void 0:c.toString())!==null&&p!==void 0?p:""},xform:M0});if(B.error)throw B.error;const T=await B.json(),$=(y=B.headers.get("x-total-count"))!==null&&y!==void 0?y:0,F=(b=(k=B.headers.get("link"))===null||k===void 0?void 0:k.split(","))!==null&&b!==void 0?b:[];return F.length>0&&(F.forEach(Z=>{const q=parseInt(Z.split(";")[0].split("=")[1].substring(0,1)),J=JSON.parse(Z.split(";")[1].split("=")[1]);M[`${J}Page`]=q}),M.total=parseInt($)),{data:Object.assign(Object.assign({},T),M),error:null}}catch(M){if(yt(M))return{data:{users:[]},error:M};throw M}}async getUserById(o){wl(o);try{return await Et(this.fetch,"GET",`${this.url}/admin/users/${o}`,{headers:this.headers,xform:jo})}catch(i){if(yt(i))return{data:{user:null},error:i};throw i}}async updateUserById(o,i){wl(o);try{return await Et(this.fetch,"PUT",`${this.url}/admin/users/${o}`,{body:i,headers:this.headers,xform:jo})}catch(h){if(yt(h))return{data:{user:null},error:h};throw h}}async deleteUser(o,i=!1){wl(o);try{return await Et(this.fetch,"DELETE",`${this.url}/admin/users/${o}`,{headers:this.headers,body:{should_soft_delete:i},xform:jo})}catch(h){if(yt(h))return{data:{user:null},error:h};throw h}}async _listFactors(o){wl(o.userId);try{const{data:i,error:h}=await Et(this.fetch,"GET",`${this.url}/admin/users/${o.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:h}}catch(i){if(yt(i))return{data:null,error:i};throw i}}async _deleteFactor(o){wl(o.userId),wl(o.id);try{return{data:await Et(this.fetch,"DELETE",`${this.url}/admin/users/${o.userId}/factors/${o.id}`,{headers:this.headers}),error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}}}function zf(d={}){return{getItem:o=>d[o]||null,setItem:(o,i)=>{d[o]=i},removeItem:o=>{delete d[o]}}}function T0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xl={debug:!!(globalThis&&yp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wp extends Error{constructor(o){super(o),this.isAcquireTimeout=!0}}class A0 extends wp{}async function D0(d,o,i){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",d,o);const h=new globalThis.AbortController;return o>0&&setTimeout(()=>{h.abort(),xl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",d)},o),await Promise.resolve().then(()=>globalThis.navigator.locks.request(d,o===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:h.signal},async c=>{if(c){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",d,c.name);try{return await i()}finally{xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",d,c.name)}}else{if(o===0)throw xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",d),new A0(`Acquiring an exclusive Navigator LockManager lock "${d}" immediately failed`);if(xl.debug)try{const p=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(p,null,"  "))}catch(p){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",p)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}T0();const O0={url:Vg,storageKey:Hg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uf(d,o,i){return await i()}const Ll={};class du{constructor(o){var i,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=du.nextInstanceID,du.nextInstanceID+=1,this.instanceID>0&&Mi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},O0),o);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new B0({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=vp(c.fetch),this.lock=c.lock||Uf,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,c.lock?this.lock=c.lock:Mi()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=D0:this.lock=Uf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:yp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zf(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=zf(this.memoryStorage)),Mi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(p){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",p)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async p=>{this._debug("received broadcast notification from other tab or client",p),await this._notifyAllSubscribers(p.data.event,p.data.session,!1)})}this.initialize()}get jwks(){var o,i;return(i=(o=Ll[this.storageKey])===null||o===void 0?void 0:o.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(o){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{jwks:o})}get jwks_cached_at(){var o,i;return(i=(o=Ll[this.storageKey])===null||o===void 0?void 0:o.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(o){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{cachedAt:o})}_debug(...o){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pp}) ${new Date().toISOString()}`,...o),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var o;try{const i=l0(window.location.href);let h="none";if(this._isImplicitGrantCallback(i)?h="implicit":await this._isPKCECallback(i)&&(h="pkce"),Mi()&&this.detectSessionInUrl&&h!=="none"){const{data:c,error:p}=await this._getSessionFromURL(i,h);if(p){if(this._debug("#_initialize()","error detecting session from URL",p),Xg(p)){const b=(o=p.details)===null||o===void 0?void 0:o.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:p}}return await this._removeSession(),{error:p}}const{session:y,redirectType:k}=c;return this._debug("#_initialize()","detected session in URL",y,"redirect type",k),await this._saveSession(y),setTimeout(async()=>{k==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",y):await this._notifyAllSubscribers("SIGNED_IN",y)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return yt(i)?{error:i}:{error:new gp("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(o){var i,h,c;try{const p=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(h=(i=o?.options)===null||i===void 0?void 0:i.data)!==null&&h!==void 0?h:{},gotrue_meta_security:{captcha_token:(c=o?.options)===null||c===void 0?void 0:c.captchaToken}},xform:zs}),{data:y,error:k}=p;if(k||!y)return{data:{user:null,session:null},error:k};const b=y.session,M=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:M,session:b},error:null}}catch(p){if(yt(p))return{data:{user:null,session:null},error:p};throw p}}async signUp(o){var i,h,c;try{let p;if("email"in o){const{email:B,password:T,options:$}=o;let F=null,Z=null;this.flowType==="pkce"&&([F,Z]=await vl(this.storage,this.storageKey)),p=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:$?.emailRedirectTo,body:{email:B,password:T,data:(i=$?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:$?.captchaToken},code_challenge:F,code_challenge_method:Z},xform:zs})}else if("phone"in o){const{phone:B,password:T,options:$}=o;p=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:B,password:T,data:(h=$?.data)!==null&&h!==void 0?h:{},channel:(c=$?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:$?.captchaToken}},xform:zs})}else throw new Yu("You must provide either an email or phone number and a password");const{data:y,error:k}=p;if(k||!y)return{data:{user:null,session:null},error:k};const b=y.session,M=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",b)),{data:{user:M,session:b},error:null}}catch(p){if(yt(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithPassword(o){try{let i;if("email"in o){const{email:p,password:y,options:k}=o;i=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:p,password:y,gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Nf})}else if("phone"in o){const{phone:p,password:y,options:k}=o;i=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:p,password:y,gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Nf})}else throw new Yu("You must provide either an email or phone number and a password");const{data:h,error:c}=i;return c?{data:{user:null,session:null},error:c}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ju}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:Object.assign({user:h.user,session:h.session},h.weak_password?{weakPassword:h.weak_password}:null),error:c})}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(o){var i,h,c,p;return await this._handleProviderSignIn(o.provider,{redirectTo:(i=o.options)===null||i===void 0?void 0:i.redirectTo,scopes:(h=o.options)===null||h===void 0?void 0:h.scopes,queryParams:(c=o.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(p=o.options)===null||p===void 0?void 0:p.skipBrowserRedirect})}async exchangeCodeForSession(o){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(o))}async signInWithWeb3(o){const{chain:i}=o;if(i==="solana")return await this.signInWithSolana(o);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(o){var i,h,c,p,y,k,b,M,B,T,$,F;let Z,q;if("message"in o)Z=o.message,q=o.signature;else{const{chain:J,wallet:ce,statement:be,options:he}=o;let Ae;if(Mi())if(typeof ce=="object")Ae=ce;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))Ae=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ce!="object"||!he?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Ae=ce}const Re=new URL((i=he?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Ae&&Ae.signIn){const le=await Ae.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},he?.signInWithSolana),{version:"1",domain:Re.host,uri:Re.href}),be?{statement:be}:null));let ke;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")ke=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)ke=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ke&&"signature"in ke&&(typeof ke.signedMessage=="string"||ke.signedMessage instanceof Uint8Array)&&ke.signature instanceof Uint8Array)Z=typeof ke.signedMessage=="string"?ke.signedMessage:new TextDecoder().decode(ke.signedMessage),q=ke.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Ae)||typeof Ae.signMessage!="function"||!("publicKey"in Ae)||typeof Ae!="object"||!Ae.publicKey||!("toBase58"in Ae.publicKey)||typeof Ae.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");Z=[`${Re.host} wants you to sign in with your Solana account:`,Ae.publicKey.toBase58(),...be?["",be,""]:[""],"Version: 1",`URI: ${Re.href}`,`Issued At: ${(c=(h=he?.signInWithSolana)===null||h===void 0?void 0:h.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((p=he?.signInWithSolana)===null||p===void 0)&&p.notBefore?[`Not Before: ${he.signInWithSolana.notBefore}`]:[],...!((y=he?.signInWithSolana)===null||y===void 0)&&y.expirationTime?[`Expiration Time: ${he.signInWithSolana.expirationTime}`]:[],...!((k=he?.signInWithSolana)===null||k===void 0)&&k.chainId?[`Chain ID: ${he.signInWithSolana.chainId}`]:[],...!((b=he?.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${he.signInWithSolana.nonce}`]:[],...!((M=he?.signInWithSolana)===null||M===void 0)&&M.requestId?[`Request ID: ${he.signInWithSolana.requestId}`]:[],...!((T=(B=he?.signInWithSolana)===null||B===void 0?void 0:B.resources)===null||T===void 0)&&T.length?["Resources",...he.signInWithSolana.resources.map(ke=>`- ${ke}`)]:[]].join(`
`);const le=await Ae.signMessage(new TextEncoder().encode(Z),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");q=le}}try{const{data:J,error:ce}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:Z,signature:s0(q)},!(($=o.options)===null||$===void 0)&&$.captchaToken?{gotrue_meta_security:{captcha_token:(F=o.options)===null||F===void 0?void 0:F.captchaToken}}:null),xform:zs});if(ce)throw ce;return!J||!J.session||!J.user?{data:{user:null,session:null},error:new Ju}:(J.session&&(await this._saveSession(J.session),await this._notifyAllSubscribers("SIGNED_IN",J.session)),{data:Object.assign({},J),error:ce})}catch(J){if(yt(J))return{data:{user:null,session:null},error:J};throw J}}async _exchangeCodeForSession(o){const i=await Pa(this.storage,`${this.storageKey}-code-verifier`),[h,c]=(i??"").split("/");try{const{data:p,error:y}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:o,code_verifier:h},xform:zs});if(await Oo(this.storage,`${this.storageKey}-code-verifier`),y)throw y;return!p||!p.session||!p.user?{data:{user:null,session:null,redirectType:null},error:new Ju}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign(Object.assign({},p),{redirectType:c??null}),error:y})}catch(p){if(yt(p))return{data:{user:null,session:null,redirectType:null},error:p};throw p}}async signInWithIdToken(o){try{const{options:i,provider:h,token:c,access_token:p,nonce:y}=o,k=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:h,id_token:c,access_token:p,nonce:y,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:zs}),{data:b,error:M}=k;return M?{data:{user:null,session:null},error:M}:!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ju}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:b,error:M})}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(o){var i,h,c,p,y;try{if("email"in o){const{email:k,options:b}=o;let M=null,B=null;this.flowType==="pkce"&&([M,B]=await vl(this.storage,this.storageKey));const{error:T}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:k,data:(i=b?.data)!==null&&i!==void 0?i:{},create_user:(h=b?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:M,code_challenge_method:B},redirectTo:b?.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in o){const{phone:k,options:b}=o,{data:M,error:B}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:k,data:(c=b?.data)!==null&&c!==void 0?c:{},create_user:(p=b?.shouldCreateUser)!==null&&p!==void 0?p:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},channel:(y=b?.channel)!==null&&y!==void 0?y:"sms"}});return{data:{user:null,session:null,messageId:M?.message_id},error:B}}throw new Yu("You must provide either an email or phone number.")}catch(k){if(yt(k))return{data:{user:null,session:null},error:k};throw k}}async verifyOtp(o){var i,h;try{let c,p;"options"in o&&(c=(i=o.options)===null||i===void 0?void 0:i.redirectTo,p=(h=o.options)===null||h===void 0?void 0:h.captchaToken);const{data:y,error:k}=await Et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},o),{gotrue_meta_security:{captcha_token:p}}),redirectTo:c,xform:zs});if(k)throw k;if(!y)throw new Error("An error occurred on token verification.");const b=y.session,M=y.user;return b?.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(o.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),{data:{user:M,session:b},error:null}}catch(c){if(yt(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithSSO(o){var i,h,c;try{let p=null,y=null;return this.flowType==="pkce"&&([p,y]=await vl(this.storage,this.storageKey)),await Et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in o?{provider_id:o.providerId}:null),"domain"in o?{domain:o.domain}:null),{redirect_to:(h=(i=o.options)===null||i===void 0?void 0:i.redirectTo)!==null&&h!==void 0?h:void 0}),!((c=o?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:o.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:y}),headers:this.headers,xform:C0})}catch(p){if(yt(p))return{data:null,error:p};throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async o=>{const{data:{session:i},error:h}=o;if(h)throw h;if(!i)throw new Ro;const{error:c}=await Et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:c}})}catch(o){if(yt(o))return{data:{user:null,session:null},error:o};throw o}}async resend(o){try{const i=`${this.url}/resend`;if("email"in o){const{email:h,type:c,options:p}=o,{error:y}=await Et(this.fetch,"POST",i,{headers:this.headers,body:{email:h,type:c,gotrue_meta_security:{captcha_token:p?.captchaToken}},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:y}}else if("phone"in o){const{phone:h,type:c,options:p}=o,{data:y,error:k}=await Et(this.fetch,"POST",i,{headers:this.headers,body:{phone:h,type:c,gotrue_meta_security:{captcha_token:p?.captchaToken}}});return{data:{user:null,session:null,messageId:y?.message_id},error:k}}throw new Yu("You must provide either an email or phone number and a type")}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(o,i){this._debug("#_acquireLock","begin",o);try{if(this.lockAcquired){const h=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await h,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,o,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const h=i();for(this.pendingInLock.push((async()=>{try{await h}catch{}})()),await h;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await h}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(o){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await o(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let o=null;const i=await Pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?o=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!o)return{data:{session:null},error:null};const h=o.expires_at?o.expires_at*1e3-Date.now()<oc:!1;if(this._debug("#__loadSession()",`session has${h?"":" not"} expired`,"expires_at",o.expires_at),!h){if(this.userStorage){const y=await Pa(this.userStorage,this.storageKey+"-user");y?.user?o.user=y.user:o.user=uc()}if(this.storage.isServer&&o.user){let y=this.suppressGetSessionWarning;o=new Proxy(o,{get:(b,M,B)=>(!y&&M==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),y=!0,this.suppressGetSessionWarning=!0),Reflect.get(b,M,B))})}return{data:{session:o},error:null}}const{session:c,error:p}=await this._callRefreshToken(o.refresh_token);return p?{data:{session:null},error:p}:{data:{session:c},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(o){return o?await this._getUser(o):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(o){try{return o?await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:o,xform:jo}):await this._useSession(async i=>{var h,c,p;const{data:y,error:k}=i;if(k)throw k;return!(!((h=y.session)===null||h===void 0)&&h.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ro}:await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(p=(c=y.session)===null||c===void 0?void 0:c.access_token)!==null&&p!==void 0?p:void 0,xform:jo})})}catch(i){if(yt(i))return Yg(i)&&(await this._removeSession(),await Oo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(o,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(o,i))}async _updateUser(o,i={}){try{return await this._useSession(async h=>{const{data:c,error:p}=h;if(p)throw p;if(!c.session)throw new Ro;const y=c.session;let k=null,b=null;this.flowType==="pkce"&&o.email!=null&&([k,b]=await vl(this.storage,this.storageKey));const{data:M,error:B}=await Et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:k,code_challenge_method:b}),jwt:y.access_token,xform:jo});if(B)throw B;return y.user=M.user,await this._saveSession(y),await this._notifyAllSubscribers("USER_UPDATED",y),{data:{user:y.user},error:null}})}catch(h){if(yt(h))return{data:{user:null},error:h};throw h}}async setSession(o){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(o))}async _setSession(o){try{if(!o.access_token||!o.refresh_token)throw new Ro;const i=Date.now()/1e3;let h=i,c=!0,p=null;const{payload:y}=lc(o.access_token);if(y.exp&&(h=y.exp,c=h<=i),c){const{session:k,error:b}=await this._callRefreshToken(o.refresh_token);if(b)return{data:{user:null,session:null},error:b};if(!k)return{data:{user:null,session:null},error:null};p=k}else{const{data:k,error:b}=await this._getUser(o.access_token);if(b)throw b;p={access_token:o.access_token,refresh_token:o.refresh_token,user:k.user,token_type:"bearer",expires_in:h-i,expires_at:h},await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)}return{data:{user:p.user,session:p},error:null}}catch(i){if(yt(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(o){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(o))}async _refreshSession(o){try{return await this._useSession(async i=>{var h;if(!o){const{data:y,error:k}=i;if(k)throw k;o=(h=y.session)!==null&&h!==void 0?h:void 0}if(!o?.refresh_token)throw new Ro;const{session:c,error:p}=await this._callRefreshToken(o.refresh_token);return p?{data:{user:null,session:null},error:p}:c?{data:{user:c.user,session:c},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(yt(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(o,i){try{if(!Mi())throw new Xu("No browser detected.");if(o.error||o.error_description||o.error_code)throw new Xu(o.error_description||"Error in URL with unspecified error_description",{error:o.error||"unspecified_error",code:o.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Af("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xu("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!o.code)throw new Af("No code detected.");const{data:be,error:he}=await this._exchangeCodeForSession(o.code);if(he)throw he;const Ae=new URL(window.location.href);return Ae.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Ae.toString()),{data:{session:be.session,redirectType:null},error:null}}const{provider_token:h,provider_refresh_token:c,access_token:p,refresh_token:y,expires_in:k,expires_at:b,token_type:M}=o;if(!p||!k||!y||!M)throw new Xu("No session defined in URL");const B=Math.round(Date.now()/1e3),T=parseInt(k);let $=B+T;b&&($=parseInt(b));const F=$-B;F*1e3<=kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${F}s, should have been closer to ${T}s`);const Z=$-T;B-Z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",Z,$,B):B-Z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",Z,$,B);const{data:q,error:J}=await this._getUser(p);if(J)throw J;const ce={provider_token:h,provider_refresh_token:c,access_token:p,expires_in:T,expires_at:$,refresh_token:y,token_type:M,user:q.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ce,redirectType:o.type},error:null}}catch(h){if(yt(h))return{data:{session:null,redirectType:null},error:h};throw h}}_isImplicitGrantCallback(o){return!!(o.access_token||o.error_description)}async _isPKCECallback(o){const i=await Pa(this.storage,`${this.storageKey}-code-verifier`);return!!(o.code&&i)}async signOut(o={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(o))}async _signOut({scope:o}={scope:"global"}){return await this._useSession(async i=>{var h;const{data:c,error:p}=i;if(p)return{error:p};const y=(h=c.session)===null||h===void 0?void 0:h.access_token;if(y){const{error:k}=await this.admin.signOut(y,o);if(k&&!(Jg(k)&&(k.status===404||k.status===401||k.status===403)))return{error:k}}return o!=="others"&&(await this._removeSession(),await Oo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(o){const i=a0(),h={id:i,callback:o,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,h),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:h}}}async _emitInitialSession(o){return await this._useSession(async i=>{var h,c;try{const{data:{session:p},error:y}=i;if(y)throw y;await((h=this.stateChangeEmitters.get(o))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",p)),this._debug("INITIAL_SESSION","callback id",o,"session",p)}catch(p){await((c=this.stateChangeEmitters.get(o))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",o,"error",p),console.error(p)}})}async resetPasswordForEmail(o,i={}){let h=null,c=null;this.flowType==="pkce"&&([h,c]=await vl(this.storage,this.storageKey,!0));try{return await Et(this.fetch,"POST",`${this.url}/recover`,{body:{email:o,code_challenge:h,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(p){if(yt(p))return{data:null,error:p};throw p}}async getUserIdentities(){var o;try{const{data:i,error:h}=await this.getUser();if(h)throw h;return{data:{identities:(o=i.user.identities)!==null&&o!==void 0?o:[]},error:null}}catch(i){if(yt(i))return{data:null,error:i};throw i}}async linkIdentity(o){var i;try{const{data:h,error:c}=await this._useSession(async p=>{var y,k,b,M,B;const{data:T,error:$}=p;if($)throw $;const F=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,o.provider,{redirectTo:(y=o.options)===null||y===void 0?void 0:y.redirectTo,scopes:(k=o.options)===null||k===void 0?void 0:k.scopes,queryParams:(b=o.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Et(this.fetch,"GET",F,{headers:this.headers,jwt:(B=(M=T.session)===null||M===void 0?void 0:M.access_token)!==null&&B!==void 0?B:void 0})});if(c)throw c;return Mi()&&!(!((i=o.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(h?.url),{data:{provider:o.provider,url:h?.url},error:null}}catch(h){if(yt(h))return{data:{provider:o.provider,url:null},error:h};throw h}}async unlinkIdentity(o){try{return await this._useSession(async i=>{var h,c;const{data:p,error:y}=i;if(y)throw y;return await Et(this.fetch,"DELETE",`${this.url}/user/identities/${o.identity_id}`,{headers:this.headers,jwt:(c=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(yt(i))return{data:null,error:i};throw i}}async _refreshAccessToken(o){const i=`#_refreshAccessToken(${o.substring(0,5)}...)`;this._debug(i,"begin");try{const h=Date.now();return await c0(async c=>(c>0&&await h0(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await Et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:o},headers:this.headers,xform:zs})),(c,p)=>{const y=200*Math.pow(2,c);return p&&ac(p)&&Date.now()+y-h<kl})}catch(h){if(this._debug(i,"error",h),yt(h))return{data:{session:null,user:null},error:h};throw h}finally{this._debug(i,"end")}}_isValidSession(o){return typeof o=="object"&&o!==null&&"access_token"in o&&"refresh_token"in o&&"expires_at"in o}async _handleProviderSignIn(o,i){const h=await this._getUrlForProvider(`${this.url}/authorize`,o,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",o,"options",i,"url",h),Mi()&&!i.skipBrowserRedirect&&window.location.assign(h),{data:{provider:o,url:h},error:null}}async _recoverAndRefresh(){var o,i;const h="#_recoverAndRefresh()";this._debug(h,"begin");try{const c=await Pa(this.storage,this.storageKey);if(c&&this.userStorage){let y=await Pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!y&&(y={user:c.user},await bl(this.userStorage,this.storageKey+"-user",y)),c.user=(o=y?.user)!==null&&o!==void 0?o:uc()}else if(c&&!c.user&&!c.user){const y=await Pa(this.storage,this.storageKey+"-user");y&&y?.user?(c.user=y.user,await Oo(this.storage,this.storageKey+"-user"),await bl(this.storage,this.storageKey,c)):c.user=uc()}if(this._debug(h,"session from storage",c),!this._isValidSession(c)){this._debug(h,"session is not valid"),c!==null&&await this._removeSession();return}const p=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<oc;if(this._debug(h,`session has${p?"":" not"} expired with margin of ${oc}s`),p){if(this.autoRefreshToken&&c.refresh_token){const{error:y}=await this._callRefreshToken(c.refresh_token);y&&(console.error(y),ac(y)||(this._debug(h,"refresh failed with a non-retryable error, removing the session",y),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:y,error:k}=await this._getUser(c.access_token);!k&&y?.user?(c.user=y.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(h,"could not get user data, skipping SIGNED_IN notification")}catch(y){console.error("Error getting user data:",y),this._debug(h,"error getting user data, skipping SIGNED_IN notification",y)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(h,"error",c),console.error(c);return}finally{this._debug(h,"end")}}async _callRefreshToken(o){var i,h;if(!o)throw new Ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${o.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new uh;const{data:p,error:y}=await this._refreshAccessToken(o);if(y)throw y;if(!p.session)throw new Ro;await this._saveSession(p.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",p.session);const k={session:p.session,error:null};return this.refreshingDeferred.resolve(k),k}catch(p){if(this._debug(c,"error",p),yt(p)){const y={session:null,error:p};return ac(p)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(y),y}throw(h=this.refreshingDeferred)===null||h===void 0||h.reject(p),p}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(o,i,h=!0){const c=`#_notifyAllSubscribers(${o})`;this._debug(c,"begin",i,`broadcast = ${h}`);try{this.broadcastChannel&&h&&this.broadcastChannel.postMessage({event:o,session:i});const p=[],y=Array.from(this.stateChangeEmitters.values()).map(async k=>{try{await k.callback(o,i)}catch(b){p.push(b)}});if(await Promise.all(y),p.length>0){for(let k=0;k<p.length;k+=1)console.error(p[k]);throw p[0]}}finally{this._debug(c,"end")}}async _saveSession(o){this._debug("#_saveSession()",o),this.suppressGetSessionWarning=!0;const i=Object.assign({},o),h=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!h&&i.user&&await bl(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const p=If(c);await bl(this.storage,this.storageKey,p)}else{const c=If(i);await bl(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Oo(this.storage,this.storageKey),await Oo(this.storage,this.storageKey+"-code-verifier"),await Oo(this.storage,this.storageKey+"-user"),this.userStorage&&await Oo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const o=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{o&&Mi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",o)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const o=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=o,o&&typeof o=="object"&&typeof o.unref=="function"?o.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(o),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const o=this.autoRefreshTicker;this.autoRefreshTicker=null,o&&clearInterval(o)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const o=Date.now();try{return await this._useSession(async i=>{const{data:{session:h}}=i;if(!h||!h.refresh_token||!h.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((h.expires_at*1e3-o)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${kl}ms, refresh threshold is ${xc} ticks`),c<=xc&&await this._callRefreshToken(h.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(o){if(o.isAcquireTimeout||o instanceof wp)this._debug("auto refresh token tick lock not available");else throw o}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(o){console.error("_handleVisibilityChange",o)}}async _onVisibilityChanged(o){const i=`#_onVisibilityChanged(${o})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),o||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(o,i,h){const c=[`provider=${encodeURIComponent(i)}`];if(h?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(h.redirectTo)}`),h?.scopes&&c.push(`scopes=${encodeURIComponent(h.scopes)}`),this.flowType==="pkce"){const[p,y]=await vl(this.storage,this.storageKey),k=new URLSearchParams({code_challenge:`${encodeURIComponent(p)}`,code_challenge_method:`${encodeURIComponent(y)}`});c.push(k.toString())}if(h?.queryParams){const p=new URLSearchParams(h.queryParams);c.push(p.toString())}return h?.skipBrowserRedirect&&c.push(`skip_http_redirect=${h.skipBrowserRedirect}`),`${o}?${c.join("&")}`}async _unenroll(o){try{return await this._useSession(async i=>{var h;const{data:c,error:p}=i;return p?{data:null,error:p}:await Et(this.fetch,"DELETE",`${this.url}/factors/${o.factorId}`,{headers:this.headers,jwt:(h=c?.session)===null||h===void 0?void 0:h.access_token})})}catch(i){if(yt(i))return{data:null,error:i};throw i}}async _enroll(o){try{return await this._useSession(async i=>{var h,c;const{data:p,error:y}=i;if(y)return{data:null,error:y};const k=Object.assign({friendly_name:o.friendlyName,factor_type:o.factorType},o.factorType==="phone"?{phone:o.phone}:{issuer:o.issuer}),{data:b,error:M}=await Et(this.fetch,"POST",`${this.url}/factors`,{body:k,headers:this.headers,jwt:(h=p?.session)===null||h===void 0?void 0:h.access_token});return M?{data:null,error:M}:(o.factorType==="totp"&&(!((c=b?.totp)===null||c===void 0)&&c.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),{data:b,error:null})})}catch(i){if(yt(i))return{data:null,error:i};throw i}}async _verify(o){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var h;const{data:c,error:p}=i;if(p)return{data:null,error:p};const{data:y,error:k}=await Et(this.fetch,"POST",`${this.url}/factors/${o.factorId}/verify`,{body:{code:o.code,challenge_id:o.challengeId},headers:this.headers,jwt:(h=c?.session)===null||h===void 0?void 0:h.access_token});return k?{data:null,error:k}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+y.expires_in},y)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",y),{data:y,error:k})})}catch(i){if(yt(i))return{data:null,error:i};throw i}})}async _challenge(o){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var h;const{data:c,error:p}=i;return p?{data:null,error:p}:await Et(this.fetch,"POST",`${this.url}/factors/${o.factorId}/challenge`,{body:{channel:o.channel},headers:this.headers,jwt:(h=c?.session)===null||h===void 0?void 0:h.access_token})})}catch(i){if(yt(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(o){const{data:i,error:h}=await this._challenge({factorId:o.factorId});return h?{data:null,error:h}:await this._verify({factorId:o.factorId,challengeId:i.id,code:o.code})}async _listFactors(){const{data:{user:o},error:i}=await this.getUser();if(i)return{data:null,error:i};const h=o?.factors||[],c=h.filter(y=>y.factor_type==="totp"&&y.status==="verified"),p=h.filter(y=>y.factor_type==="phone"&&y.status==="verified");return{data:{all:h,totp:c,phone:p},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async o=>{var i,h;const{data:{session:c},error:p}=o;if(p)return{data:null,error:p};if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=lc(c.access_token);let k=null;y.aal&&(k=y.aal);let b=k;((h=(i=c.user.factors)===null||i===void 0?void 0:i.filter(T=>T.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const B=y.amr||[];return{data:{currentLevel:k,nextLevel:b,currentAuthenticationMethods:B},error:null}}))}async fetchJwk(o,i={keys:[]}){let h=i.keys.find(k=>k.kid===o);if(h)return h;const c=Date.now();if(h=this.jwks.keys.find(k=>k.kid===o),h&&this.jwks_cached_at+Wg>c)return h;const{data:p,error:y}=await Et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(y)throw y;return!p.keys||p.keys.length===0||(this.jwks=p,this.jwks_cached_at=c,h=p.keys.find(k=>k.kid===o),!h)?null:h}async getClaims(o,i={}){try{let h=o;if(!h){const{data:F,error:Z}=await this.getSession();if(Z||!F.session)return{data:null,error:Z};h=F.session.access_token}const{header:c,payload:p,signature:y,raw:{header:k,payload:b}}=lc(h);i?.allowExpired||y0(p.exp);const M=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!M){const{error:F}=await this.getUser(h);if(F)throw F;return{data:{claims:p,header:c,signature:y},error:null}}const B=v0(c.alg),T=await crypto.subtle.importKey("jwk",M,B,!0,["verify"]);if(!await crypto.subtle.verify(B,T,y,i0(`${k}.${b}`)))throw new bc("Invalid JWT signature");return{data:{claims:p,header:c,signature:y},error:null}}catch(h){if(yt(h))return{data:null,error:h};throw h}}}du.nextInstanceID=0;const R0=du;class j0 extends R0{constructor(o){super(o)}}var I0=function(d,o,i,h){function c(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function k(B){try{M(h.next(B))}catch(T){y(T)}}function b(B){try{M(h.throw(B))}catch(T){y(T)}}function M(B){B.done?p(B.value):c(B.value).then(k,b)}M((h=h.apply(d,o||[])).next())})};class F0{constructor(o,i,h){var c,p,y;if(this.supabaseUrl=o,this.supabaseKey=i,!o)throw new Error("supabaseUrl is required.");if(!i)throw new Error("supabaseKey is required.");const k=$g(o),b=new URL(k);this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const M=`sb-${b.hostname.split(".")[0]}-auth-token`,B={db:Og,realtime:jg,auth:Object.assign(Object.assign({},Rg),{storageKey:M}),global:Dg},T=Gg(h??{},B);this.storageKey=(c=T.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(p=T.global.headers)!==null&&p!==void 0?p:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:($,F)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(F)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((y=T.auth)!==null&&y!==void 0?y:{},this.headers,T.global.fetch),this.fetch=zg(i,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.rest=new eg(new URL("rest/v1",b).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),this.storage=new Bg(this.storageUrl.href,this.headers,this.fetch,h?.storage),T.accessToken||this._listenForAuthEvents()}get functions(){return new $m(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,i={},h={}){return this.rest.rpc(o,i,h)}channel(o,i={config:{}}){return this.realtime.channel(o,i)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var o,i;return I0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:h}=yield this.auth.getSession();return(i=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:i,detectSessionInUrl:h,storage:c,storageKey:p,flowType:y,lock:k,debug:b},M,B){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j0({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),M),storageKey:p,autoRefreshToken:o,persistSession:i,detectSessionInUrl:h,storage:c,flowType:y,lock:k,debug:b,fetch:B,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(o){return new _g(this.realtimeUrl.href,Object.assign(Object.assign({},o),{params:Object.assign({apikey:this.supabaseKey},o?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,h)=>{this._handleTokenChanged(i,"CLIENT",h?.access_token)})}_handleTokenChanged(o,i,h){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==h?this.changedAccessToken=h:o==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N0=(d,o,i)=>new F0(d,o,i);function z0(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const o=d.match(/^v(\d+)\./);return o?parseInt(o[1],10)<=18:!1}z0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const U0="https://tyftyoexdxrjvxjbdyux.supabase.co",$0="sb_publishable_CUCrsx84syqTmA-uMJyF3g_EnrX-aW6",hr=N0(U0,$0),G0="/pudumaps/assets/pudulogo-pI67wG3d.png";/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $f="popstate";function V0(d={}){function o(c,p){let{pathname:y="/",search:k="",hash:b=""}=Aa(c.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),Cc("",{pathname:y,search:k,hash:b},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function i(c,p){let y=c.document.querySelector("base"),k="";if(y&&y.getAttribute("href")){let b=c.location.href,M=b.indexOf("#");k=M===-1?b:b.slice(0,M)}return k+"#"+(typeof p=="string"?p:fu(p))}function h(c,p){Si(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(p)})`)}return Z0(o,i,h,d)}function Xt(d,o){if(d===!1||d===null||typeof d>"u")throw new Error(o)}function Si(d,o){if(!d){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function H0(){return Math.random().toString(36).substring(2,10)}function Gf(d,o){return{usr:d.state,key:d.key,idx:o}}function Cc(d,o,i=null,h){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof o=="string"?Aa(o):o,state:i,key:o&&o.key||h||H0()}}function fu({pathname:d="/",search:o="",hash:i=""}){return o&&o!=="?"&&(d+=o.charAt(0)==="?"?o:"?"+o),i&&i!=="#"&&(d+=i.charAt(0)==="#"?i:"#"+i),d}function Aa(d){let o={};if(d){let i=d.indexOf("#");i>=0&&(o.hash=d.substring(i),d=d.substring(0,i));let h=d.indexOf("?");h>=0&&(o.search=d.substring(h),d=d.substring(0,h)),d&&(o.pathname=d)}return o}function Z0(d,o,i,h={}){let{window:c=document.defaultView,v5Compat:p=!1}=h,y=c.history,k="POP",b=null,M=B();M==null&&(M=0,y.replaceState({...y.state,idx:M},""));function B(){return(y.state||{idx:null}).idx}function T(){k="POP";let J=B(),ce=J==null?null:J-M;M=J,b&&b({action:k,location:q.location,delta:ce})}function $(J,ce){k="PUSH";let be=Cc(q.location,J,ce);i&&i(be,J),M=B()+1;let he=Gf(be,M),Ae=q.createHref(be);try{y.pushState(he,"",Ae)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;c.location.assign(Ae)}p&&b&&b({action:k,location:q.location,delta:1})}function F(J,ce){k="REPLACE";let be=Cc(q.location,J,ce);i&&i(be,J),M=B();let he=Gf(be,M),Ae=q.createHref(be);y.replaceState(he,"",Ae),p&&b&&b({action:k,location:q.location,delta:0})}function Z(J){return q0(J)}let q={get action(){return k},get location(){return d(c,y)},listen(J){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener($f,T),b=J,()=>{c.removeEventListener($f,T),b=null}},createHref(J){return o(c,J)},createURL:Z,encodeLocation(J){let ce=Z(J);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:$,replace:F,go(J){return y.go(J)}};return q}function q0(d,o=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Xt(i,"No window.location.(origin|href) available to create URL");let h=typeof d=="string"?d:fu(d);return h=h.replace(/ $/,"%20"),!o&&h.startsWith("//")&&(h=i+h),new URL(h,i)}function xp(d,o,i="/"){return W0(d,o,i,!1)}function W0(d,o,i,h){let c=typeof o=="string"?Aa(o):o,p=Vs(c.pathname||"/",i);if(p==null)return null;let y=Lp(d);K0(y);let k=null;for(let b=0;k==null&&b<y.length;++b){let M=o_(p);k=i_(y[b],M,h)}return k}function Lp(d,o=[],i=[],h=""){let c=(p,y,k)=>{let b={relativePath:k===void 0?p.path||"":k,caseSensitive:p.caseSensitive===!0,childrenIndex:y,route:p};b.relativePath.startsWith("/")&&(Xt(b.relativePath.startsWith(h),`Absolute route path "${b.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(h.length));let M=Gs([h,b.relativePath]),B=i.concat(b);p.children&&p.children.length>0&&(Xt(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),Lp(p.children,o,B,M)),!(p.path==null&&!p.index)&&o.push({path:M,score:n_(M,p.index),routesMeta:B})};return d.forEach((p,y)=>{if(p.path===""||!p.path?.includes("?"))c(p,y);else for(let k of kp(p.path))c(p,y,k)}),o}function kp(d){let o=d.split("/");if(o.length===0)return[];let[i,...h]=o,c=i.endsWith("?"),p=i.replace(/\?$/,"");if(h.length===0)return c?[p,""]:[p];let y=kp(h.join("/")),k=[];return k.push(...y.map(b=>b===""?p:[p,b].join("/"))),c&&k.push(...y),k.map(b=>d.startsWith("/")&&b===""?"/":b)}function K0(d){d.sort((o,i)=>o.score!==i.score?i.score-o.score:r_(o.routesMeta.map(h=>h.childrenIndex),i.routesMeta.map(h=>h.childrenIndex)))}var J0=/^:[\w-]+$/,Y0=3,X0=2,Q0=1,e_=10,t_=-2,Vf=d=>d==="*";function n_(d,o){let i=d.split("/"),h=i.length;return i.some(Vf)&&(h+=t_),o&&(h+=X0),i.filter(c=>!Vf(c)).reduce((c,p)=>c+(J0.test(p)?Y0:p===""?Q0:e_),h)}function r_(d,o){return d.length===o.length&&d.slice(0,-1).every((h,c)=>h===o[c])?d[d.length-1]-o[o.length-1]:0}function i_(d,o,i=!1){let{routesMeta:h}=d,c={},p="/",y=[];for(let k=0;k<h.length;++k){let b=h[k],M=k===h.length-1,B=p==="/"?o:o.slice(p.length)||"/",T=ah({path:b.relativePath,caseSensitive:b.caseSensitive,end:M},B),$=b.route;if(!T&&M&&i&&!h[h.length-1].route.index&&(T=ah({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},B)),!T)return null;Object.assign(c,T.params),y.push({params:c,pathname:Gs([p,T.pathname]),pathnameBase:h_(Gs([p,T.pathnameBase])),route:$}),T.pathnameBase!=="/"&&(p=Gs([p,T.pathnameBase]))}return y}function ah(d,o){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[i,h]=s_(d.path,d.caseSensitive,d.end),c=o.match(i);if(!c)return null;let p=c[0],y=p.replace(/(.)\/+$/,"$1"),k=c.slice(1);return{params:h.reduce((M,{paramName:B,isOptional:T},$)=>{if(B==="*"){let Z=k[$]||"";y=p.slice(0,p.length-Z.length).replace(/(.)\/+$/,"$1")}const F=k[$];return T&&!F?M[B]=void 0:M[B]=(F||"").replace(/%2F/g,"/"),M},{}),pathname:p,pathnameBase:y,pattern:d}}function s_(d,o=!1,i=!0){Si(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let h=[],c="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,k,b)=>(h.push({paramName:k,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(h.push({paramName:"*"}),c+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":d!==""&&d!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,o?void 0:"i"),h]}function o_(d){try{return d.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Si(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),d}}function Vs(d,o){if(o==="/")return d;if(!d.toLowerCase().startsWith(o.toLowerCase()))return null;let i=o.endsWith("/")?o.length-1:o.length,h=d.charAt(i);return h&&h!=="/"?null:d.slice(i)||"/"}function a_(d,o="/"){let{pathname:i,search:h="",hash:c=""}=typeof d=="string"?Aa(d):d;return{pathname:i?i.startsWith("/")?i:l_(i,o):o,search:c_(h),hash:d_(c)}}function l_(d,o){let i=o.replace(/\/+$/,"").split("/");return d.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function cc(d,o,i,h){return`Cannot include a '${d}' character in a manually specified \`to.${o}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u_(d){return d.filter((o,i)=>i===0||o.route.path&&o.route.path.length>0)}function bp(d){let o=u_(d);return o.map((i,h)=>h===o.length-1?i.pathname:i.pathnameBase)}function Cp(d,o,i,h=!1){let c;typeof d=="string"?c=Aa(d):(c={...d},Xt(!c.pathname||!c.pathname.includes("?"),cc("?","pathname","search",c)),Xt(!c.pathname||!c.pathname.includes("#"),cc("#","pathname","hash",c)),Xt(!c.search||!c.search.includes("#"),cc("#","search","hash",c)));let p=d===""||c.pathname==="",y=p?"/":c.pathname,k;if(y==null)k=i;else{let T=o.length-1;if(!h&&y.startsWith("..")){let $=y.split("/");for(;$[0]==="..";)$.shift(),T-=1;c.pathname=$.join("/")}k=T>=0?o[T]:"/"}let b=a_(c,k),M=y&&y!=="/"&&y.endsWith("/"),B=(p||y===".")&&i.endsWith("/");return!b.pathname.endsWith("/")&&(M||B)&&(b.pathname+="/"),b}var Gs=d=>d.join("/").replace(/\/\/+/g,"/"),h_=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),c_=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,d_=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function f_(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}var Ep=["POST","PUT","PATCH","DELETE"];new Set(Ep);var p_=["GET",...Ep];new Set(p_);var Ml=ae.createContext(null);Ml.displayName="DataRouter";var hh=ae.createContext(null);hh.displayName="DataRouterState";ae.createContext(!1);var Mp=ae.createContext({isTransitioning:!1});Mp.displayName="ViewTransition";var m_=ae.createContext(new Map);m_.displayName="Fetchers";var g_=ae.createContext(null);g_.displayName="Await";var as=ae.createContext(null);as.displayName="Navigation";var gu=ae.createContext(null);gu.displayName="Location";var ls=ae.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var Rc=ae.createContext(null);Rc.displayName="RouteError";function __(d,{relative:o}={}){Xt(_u(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:h}=ae.useContext(as),{hash:c,pathname:p,search:y}=yu(d,{relative:o}),k=p;return i!=="/"&&(k=p==="/"?i:Gs([i,p])),h.createHref({pathname:k,search:y,hash:c})}function _u(){return ae.useContext(gu)!=null}function Da(){return Xt(_u(),"useLocation() may be used only in the context of a <Router> component."),ae.useContext(gu).location}var Pp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sp(d){ae.useContext(as).static||ae.useLayoutEffect(d)}function Bp(){let{isDataRoute:d}=ae.useContext(ls);return d?T_():y_()}function y_(){Xt(_u(),"useNavigate() may be used only in the context of a <Router> component.");let d=ae.useContext(Ml),{basename:o,navigator:i}=ae.useContext(as),{matches:h}=ae.useContext(ls),{pathname:c}=Da(),p=JSON.stringify(bp(h)),y=ae.useRef(!1);return Sp(()=>{y.current=!0}),ae.useCallback((b,M={})=>{if(Si(y.current,Pp),!y.current)return;if(typeof b=="number"){i.go(b);return}let B=Cp(b,JSON.parse(p),c,M.relative==="path");d==null&&o!=="/"&&(B.pathname=B.pathname==="/"?o:Gs([o,B.pathname])),(M.replace?i.replace:i.push)(B,M.state,M)},[o,i,p,c,d])}ae.createContext(null);function v_(){let{matches:d}=ae.useContext(ls),o=d[d.length-1];return o?o.params:{}}function yu(d,{relative:o}={}){let{matches:i}=ae.useContext(ls),{pathname:h}=Da(),c=JSON.stringify(bp(i));return ae.useMemo(()=>Cp(d,JSON.parse(c),h,o==="path"),[d,c,h,o])}function w_(d,o){return Tp(d,o)}function Tp(d,o,i,h){Xt(_u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=ae.useContext(as),{matches:p}=ae.useContext(ls),y=p[p.length-1],k=y?y.params:{},b=y?y.pathname:"/",M=y?y.pathnameBase:"/",B=y&&y.route;{let ce=B&&B.path||"";Ap(b,!B||ce.endsWith("*")||ce.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${ce}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ce}"> to <Route path="${ce==="/"?"*":`${ce}/*`}">.`)}let T=Da(),$;if(o){let ce=typeof o=="string"?Aa(o):o;Xt(M==="/"||ce.pathname?.startsWith(M),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${M}" but pathname "${ce.pathname}" was given in the \`location\` prop.`),$=ce}else $=T;let F=$.pathname||"/",Z=F;if(M!=="/"){let ce=M.replace(/^\//,"").split("/");Z="/"+F.replace(/^\//,"").split("/").slice(ce.length).join("/")}let q=xp(d,{pathname:Z});Si(B||q!=null,`No routes matched location "${$.pathname}${$.search}${$.hash}" `),Si(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${$.pathname}${$.search}${$.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=C_(q&&q.map(ce=>Object.assign({},ce,{params:Object.assign({},k,ce.params),pathname:Gs([M,c.encodeLocation?c.encodeLocation(ce.pathname).pathname:ce.pathname]),pathnameBase:ce.pathnameBase==="/"?M:Gs([M,c.encodeLocation?c.encodeLocation(ce.pathnameBase).pathname:ce.pathnameBase])})),p,i,h);return o&&J?ae.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...$},navigationType:"POP"}},J):J}function x_(){let d=B_(),o=f_(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),i=d instanceof Error?d.stack:null,h="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:h},p={padding:"2px 4px",backgroundColor:h},y=null;return console.error("Error handled by React Router default ErrorBoundary:",d),y=ae.createElement(ae.Fragment,null,ae.createElement("p",null,"💿 Hey developer 👋"),ae.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ae.createElement("code",{style:p},"ErrorBoundary")," or"," ",ae.createElement("code",{style:p},"errorElement")," prop on your route.")),ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},o),i?ae.createElement("pre",{style:c},i):null,y)}var L_=ae.createElement(x_,null),k_=class extends ae.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,o){return o.location!==d.location||o.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:o.error,location:o.location,revalidation:d.revalidation||o.revalidation}}componentDidCatch(d,o){console.error("React Router caught the following error during render",d,o)}render(){return this.state.error!==void 0?ae.createElement(ls.Provider,{value:this.props.routeContext},ae.createElement(Rc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b_({routeContext:d,match:o,children:i}){let h=ae.useContext(Ml);return h&&h.static&&h.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=o.route.id),ae.createElement(ls.Provider,{value:d},i)}function C_(d,o=[],i=null,h=null){if(d==null){if(!i)return null;if(i.errors)d=i.matches;else if(o.length===0&&!i.initialized&&i.matches.length>0)d=i.matches;else return null}let c=d,p=i?.errors;if(p!=null){let b=c.findIndex(M=>M.route.id&&p?.[M.route.id]!==void 0);Xt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let y=!1,k=-1;if(i)for(let b=0;b<c.length;b++){let M=c[b];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(k=b),M.route.id){let{loaderData:B,errors:T}=i,$=M.route.loader&&!B.hasOwnProperty(M.route.id)&&(!T||T[M.route.id]===void 0);if(M.route.lazy||$){y=!0,k>=0?c=c.slice(0,k+1):c=[c[0]];break}}}return c.reduceRight((b,M,B)=>{let T,$=!1,F=null,Z=null;i&&(T=p&&M.route.id?p[M.route.id]:void 0,F=M.route.errorElement||L_,y&&(k<0&&B===0?(Ap("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,Z=null):k===B&&($=!0,Z=M.route.hydrateFallbackElement||null)));let q=o.concat(c.slice(0,B+1)),J=()=>{let ce;return T?ce=F:$?ce=Z:M.route.Component?ce=ae.createElement(M.route.Component,null):M.route.element?ce=M.route.element:ce=b,ae.createElement(b_,{match:M,routeContext:{outlet:b,matches:q,isDataRoute:i!=null},children:ce})};return i&&(M.route.ErrorBoundary||M.route.errorElement||B===0)?ae.createElement(k_,{location:i.location,revalidation:i.revalidation,component:F,error:T,children:J(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):J()},null)}function jc(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E_(d){let o=ae.useContext(Ml);return Xt(o,jc(d)),o}function M_(d){let o=ae.useContext(hh);return Xt(o,jc(d)),o}function P_(d){let o=ae.useContext(ls);return Xt(o,jc(d)),o}function Ic(d){let o=P_(d),i=o.matches[o.matches.length-1];return Xt(i.route.id,`${d} can only be used on routes that contain a unique "id"`),i.route.id}function S_(){return Ic("useRouteId")}function B_(){let d=ae.useContext(Rc),o=M_("useRouteError"),i=Ic("useRouteError");return d!==void 0?d:o.errors?.[i]}function T_(){let{router:d}=E_("useNavigate"),o=Ic("useNavigate"),i=ae.useRef(!1);return Sp(()=>{i.current=!0}),ae.useCallback(async(c,p={})=>{Si(i.current,Pp),i.current&&(typeof c=="number"?d.navigate(c):await d.navigate(c,{fromRouteId:o,...p}))},[d,o])}var Hf={};function Ap(d,o,i){!o&&!Hf[d]&&(Hf[d]=!0,Si(!1,i))}ae.memo(A_);function A_({routes:d,future:o,state:i}){return Tp(d,void 0,i,o)}function iu(d){Xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D_({basename:d="/",children:o=null,location:i,navigationType:h="POP",navigator:c,static:p=!1}){Xt(!_u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=d.replace(/^\/*/,"/"),k=ae.useMemo(()=>({basename:y,navigator:c,static:p,future:{}}),[y,c,p]);typeof i=="string"&&(i=Aa(i));let{pathname:b="/",search:M="",hash:B="",state:T=null,key:$="default"}=i,F=ae.useMemo(()=>{let Z=Vs(b,y);return Z==null?null:{location:{pathname:Z,search:M,hash:B,state:T,key:$},navigationType:h}},[y,b,M,B,T,$,h]);return Si(F!=null,`<Router basename="${y}"> is not able to match the URL "${b}${M}${B}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:ae.createElement(as.Provider,{value:k},ae.createElement(gu.Provider,{children:o,value:F}))}function O_({children:d,location:o}){return w_(Ec(d),o)}function Ec(d,o=[]){let i=[];return ae.Children.forEach(d,(h,c)=>{if(!ae.isValidElement(h))return;let p=[...o,c];if(h.type===ae.Fragment){i.push.apply(i,Ec(h.props.children,p));return}Xt(h.type===iu,`[${typeof h.type=="string"?h.type:h.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xt(!h.props.index||!h.props.children,"An index route cannot have child routes.");let y={id:h.props.id||p.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,loader:h.props.loader,action:h.props.action,hydrateFallbackElement:h.props.hydrateFallbackElement,HydrateFallback:h.props.HydrateFallback,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.hasErrorBoundary===!0||h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(y.children=Ec(h.props.children,p)),i.push(y)}),i}var nh="get",rh="application/x-www-form-urlencoded";function ch(d){return d!=null&&typeof d.tagName=="string"}function R_(d){return ch(d)&&d.tagName.toLowerCase()==="button"}function j_(d){return ch(d)&&d.tagName.toLowerCase()==="form"}function I_(d){return ch(d)&&d.tagName.toLowerCase()==="input"}function F_(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function N_(d,o){return d.button===0&&(!o||o==="_self")&&!F_(d)}var Qu=null;function z_(){if(Qu===null)try{new FormData(document.createElement("form"),0),Qu=!1}catch{Qu=!0}return Qu}var U_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dc(d){return d!=null&&!U_.has(d)?(Si(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rh}"`),null):d}function $_(d,o){let i,h,c,p,y;if(j_(d)){let k=d.getAttribute("action");h=k?Vs(k,o):null,i=d.getAttribute("method")||nh,c=dc(d.getAttribute("enctype"))||rh,p=new FormData(d)}else if(R_(d)||I_(d)&&(d.type==="submit"||d.type==="image")){let k=d.form;if(k==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=d.getAttribute("formaction")||k.getAttribute("action");if(h=b?Vs(b,o):null,i=d.getAttribute("formmethod")||k.getAttribute("method")||nh,c=dc(d.getAttribute("formenctype"))||dc(k.getAttribute("enctype"))||rh,p=new FormData(k,d),!z_()){let{name:M,type:B,value:T}=d;if(B==="image"){let $=M?`${M}.`:"";p.append(`${$}x`,"0"),p.append(`${$}y`,"0")}else M&&p.append(M,T)}}else{if(ch(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=nh,h=null,c=rh,y=d}return p&&c==="text/plain"&&(y=p,p=void 0),{action:h,method:i.toLowerCase(),encType:c,formData:p,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fc(d,o){if(d===!1||d===null||typeof d>"u")throw new Error(o)}function G_(d,o,i){let h=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return h.pathname==="/"?h.pathname=`_root.${i}`:o&&Vs(h.pathname,o)==="/"?h.pathname=`${o.replace(/\/$/,"")}/_root.${i}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${i}`,h}async function V_(d,o){if(d.id in o)return o[d.id];try{let i=await import(d.module);return o[d.id]=i,i}catch(i){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H_(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function Z_(d,o,i){let h=await Promise.all(d.map(async c=>{let p=o.routes[c.route.id];if(p){let y=await V_(p,i);return y.links?y.links():[]}return[]}));return J_(h.flat(1).filter(H_).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Zf(d,o,i,h,c,p){let y=(b,M)=>i[M]?b.route.id!==i[M].route.id:!0,k=(b,M)=>i[M].pathname!==b.pathname||i[M].route.path?.endsWith("*")&&i[M].params["*"]!==b.params["*"];return p==="assets"?o.filter((b,M)=>y(b,M)||k(b,M)):p==="data"?o.filter((b,M)=>{let B=h.routes[b.route.id];if(!B||!B.hasLoader)return!1;if(y(b,M)||k(b,M))return!0;if(b.route.shouldRevalidate){let T=b.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(d,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function q_(d,o,{includeHydrateFallback:i}={}){return W_(d.map(h=>{let c=o.routes[h.route.id];if(!c)return[];let p=[c.module];return c.clientActionModule&&(p=p.concat(c.clientActionModule)),c.clientLoaderModule&&(p=p.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(p=p.concat(c.hydrateFallbackModule)),c.imports&&(p=p.concat(c.imports)),p}).flat(1))}function W_(d){return[...new Set(d)]}function K_(d){let o={},i=Object.keys(d).sort();for(let h of i)o[h]=d[h];return o}function J_(d,o){let i=new Set;return new Set(o),d.reduce((h,c)=>{let p=JSON.stringify(K_(c));return i.has(p)||(i.add(p),h.push({key:p,link:c})),h},[])}function Dp(){let d=ae.useContext(Ml);return Fc(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function Y_(){let d=ae.useContext(hh);return Fc(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var Nc=ae.createContext(void 0);Nc.displayName="FrameworkContext";function Op(){let d=ae.useContext(Nc);return Fc(d,"You must render this element inside a <HydratedRouter> element"),d}function X_(d,o){let i=ae.useContext(Nc),[h,c]=ae.useState(!1),[p,y]=ae.useState(!1),{onFocus:k,onBlur:b,onMouseEnter:M,onMouseLeave:B,onTouchStart:T}=o,$=ae.useRef(null);ae.useEffect(()=>{if(d==="render"&&y(!0),d==="viewport"){let q=ce=>{ce.forEach(be=>{y(be.isIntersecting)})},J=new IntersectionObserver(q,{threshold:.5});return $.current&&J.observe($.current),()=>{J.disconnect()}}},[d]),ae.useEffect(()=>{if(h){let q=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(q)}}},[h]);let F=()=>{c(!0)},Z=()=>{c(!1),y(!1)};return i?d!=="intent"?[p,$,{}]:[p,$,{onFocus:nu(k,F),onBlur:nu(b,Z),onMouseEnter:nu(M,F),onMouseLeave:nu(B,Z),onTouchStart:nu(T,F)}]:[!1,$,{}]}function nu(d,o){return i=>{d&&d(i),i.defaultPrevented||o(i)}}function Q_({page:d,...o}){let{router:i}=Dp(),h=ae.useMemo(()=>xp(i.routes,d,i.basename),[i.routes,d,i.basename]);return h?ae.createElement(ty,{page:d,matches:h,...o}):null}function ey(d){let{manifest:o,routeModules:i}=Op(),[h,c]=ae.useState([]);return ae.useEffect(()=>{let p=!1;return Z_(d,o,i).then(y=>{p||c(y)}),()=>{p=!0}},[d,o,i]),h}function ty({page:d,matches:o,...i}){let h=Da(),{manifest:c,routeModules:p}=Op(),{basename:y}=Dp(),{loaderData:k,matches:b}=Y_(),M=ae.useMemo(()=>Zf(d,o,b,c,h,"data"),[d,o,b,c,h]),B=ae.useMemo(()=>Zf(d,o,b,c,h,"assets"),[d,o,b,c,h]),T=ae.useMemo(()=>{if(d===h.pathname+h.search+h.hash)return[];let Z=new Set,q=!1;if(o.forEach(ce=>{let be=c.routes[ce.route.id];!be||!be.hasLoader||(!M.some(he=>he.route.id===ce.route.id)&&ce.route.id in k&&p[ce.route.id]?.shouldRevalidate||be.hasClientLoader?q=!0:Z.add(ce.route.id))}),Z.size===0)return[];let J=G_(d,y,"data");return q&&Z.size>0&&J.searchParams.set("_routes",o.filter(ce=>Z.has(ce.route.id)).map(ce=>ce.route.id).join(",")),[J.pathname+J.search]},[y,k,h,c,M,o,d,p]),$=ae.useMemo(()=>q_(B,c),[B,c]),F=ey(B);return ae.createElement(ae.Fragment,null,T.map(Z=>ae.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...i})),$.map(Z=>ae.createElement("link",{key:Z,rel:"modulepreload",href:Z,...i})),F.map(({key:Z,link:q})=>ae.createElement("link",{key:Z,nonce:i.nonce,...q})))}function ny(...d){return o=>{d.forEach(i=>{typeof i=="function"?i(o):i!=null&&(i.current=o)})}}var Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rp&&(window.__reactRouterVersion="7.8.0")}catch{}function ry({basename:d,children:o,window:i}){let h=ae.useRef();h.current==null&&(h.current=V0({window:i,v5Compat:!0}));let c=h.current,[p,y]=ae.useState({action:c.action,location:c.location}),k=ae.useCallback(b=>{ae.startTransition(()=>y(b))},[y]);return ae.useLayoutEffect(()=>c.listen(k),[c,k]),ae.createElement(D_,{basename:d,children:o,location:p.location,navigationType:p.action,navigator:c})}var jp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dh=ae.forwardRef(function({onClick:o,discover:i="render",prefetch:h="none",relative:c,reloadDocument:p,replace:y,state:k,target:b,to:M,preventScrollReset:B,viewTransition:T,...$},F){let{basename:Z}=ae.useContext(as),q=typeof M=="string"&&jp.test(M),J,ce=!1;if(typeof M=="string"&&q&&(J=M,Rp))try{let Je=new URL(window.location.href),nt=M.startsWith("//")?new URL(Je.protocol+M):new URL(M),Ne=Vs(nt.pathname,Z);nt.origin===Je.origin&&Ne!=null?M=Ne+nt.search+nt.hash:ce=!0}catch{Si(!1,`<Link to="${M}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let be=__(M,{relative:c}),[he,Ae,Re]=X_(h,$),le=ay(M,{replace:y,state:k,target:b,preventScrollReset:B,relative:c,viewTransition:T});function ke(Je){o&&o(Je),Je.defaultPrevented||le(Je)}let Ke=ae.createElement("a",{...$,...Re,href:J||be,onClick:ce||p?o:ke,ref:ny(F,Ae),target:b,"data-discover":!q&&i==="render"?"true":void 0});return he&&!q?ae.createElement(ae.Fragment,null,Ke,ae.createElement(Q_,{page:be})):Ke});dh.displayName="Link";var iy=ae.forwardRef(function({"aria-current":o="page",caseSensitive:i=!1,className:h="",end:c=!1,style:p,to:y,viewTransition:k,children:b,...M},B){let T=yu(y,{relative:M.relative}),$=Da(),F=ae.useContext(hh),{navigator:Z,basename:q}=ae.useContext(as),J=F!=null&&dy(T)&&k===!0,ce=Z.encodeLocation?Z.encodeLocation(T).pathname:T.pathname,be=$.pathname,he=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;i||(be=be.toLowerCase(),he=he?he.toLowerCase():null,ce=ce.toLowerCase()),he&&q&&(he=Vs(he,q)||he);const Ae=ce!=="/"&&ce.endsWith("/")?ce.length-1:ce.length;let Re=be===ce||!c&&be.startsWith(ce)&&be.charAt(Ae)==="/",le=he!=null&&(he===ce||!c&&he.startsWith(ce)&&he.charAt(ce.length)==="/"),ke={isActive:Re,isPending:le,isTransitioning:J},Ke=Re?o:void 0,Je;typeof h=="function"?Je=h(ke):Je=[h,Re?"active":null,le?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let nt=typeof p=="function"?p(ke):p;return ae.createElement(dh,{...M,"aria-current":Ke,className:Je,ref:B,style:nt,to:y,viewTransition:k},typeof b=="function"?b(ke):b)});iy.displayName="NavLink";var sy=ae.forwardRef(({discover:d="render",fetcherKey:o,navigate:i,reloadDocument:h,replace:c,state:p,method:y=nh,action:k,onSubmit:b,relative:M,preventScrollReset:B,viewTransition:T,...$},F)=>{let Z=hy(),q=cy(k,{relative:M}),J=y.toLowerCase()==="get"?"get":"post",ce=typeof k=="string"&&jp.test(k),be=he=>{if(b&&b(he),he.defaultPrevented)return;he.preventDefault();let Ae=he.nativeEvent.submitter,Re=Ae?.getAttribute("formmethod")||y;Z(Ae||he.currentTarget,{fetcherKey:o,method:Re,navigate:i,replace:c,state:p,relative:M,preventScrollReset:B,viewTransition:T})};return ae.createElement("form",{ref:F,method:J,action:q,onSubmit:h?b:be,...$,"data-discover":!ce&&d==="render"?"true":void 0})});sy.displayName="Form";function oy(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ip(d){let o=ae.useContext(Ml);return Xt(o,oy(d)),o}function ay(d,{target:o,replace:i,state:h,preventScrollReset:c,relative:p,viewTransition:y}={}){let k=Bp(),b=Da(),M=yu(d,{relative:p});return ae.useCallback(B=>{if(N_(B,o)){B.preventDefault();let T=i!==void 0?i:fu(b)===fu(M);k(d,{replace:T,state:h,preventScrollReset:c,relative:p,viewTransition:y})}},[b,k,M,i,h,o,d,c,p,y])}var ly=0,uy=()=>`__${String(++ly)}__`;function hy(){let{router:d}=Ip("useSubmit"),{basename:o}=ae.useContext(as),i=S_();return ae.useCallback(async(h,c={})=>{let{action:p,method:y,encType:k,formData:b,body:M}=$_(h,o);if(c.navigate===!1){let B=c.fetcherKey||uy();await d.fetch(B,i,c.action||p,{preventScrollReset:c.preventScrollReset,formData:b,body:M,formMethod:c.method||y,formEncType:c.encType||k,flushSync:c.flushSync})}else await d.navigate(c.action||p,{preventScrollReset:c.preventScrollReset,formData:b,body:M,formMethod:c.method||y,formEncType:c.encType||k,replace:c.replace,state:c.state,fromRouteId:i,flushSync:c.flushSync,viewTransition:c.viewTransition})},[d,o,i])}function cy(d,{relative:o}={}){let{basename:i}=ae.useContext(as),h=ae.useContext(ls);Xt(h,"useFormAction must be used inside a RouteContext");let[c]=h.matches.slice(-1),p={...yu(d||".",{relative:o})},y=Da();if(d==null){p.search=y.search;let k=new URLSearchParams(p.search),b=k.getAll("index");if(b.some(B=>B==="")){k.delete("index"),b.filter(T=>T).forEach(T=>k.append("index",T));let B=k.toString();p.search=B?`?${B}`:""}}return(!d||d===".")&&c.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(p.pathname=p.pathname==="/"?i:Gs([i,p.pathname])),fu(p)}function dy(d,{relative:o}={}){let i=ae.useContext(Mp);Xt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:h}=Ip("useViewTransitionState"),c=yu(d,{relative:o});if(!i.isTransitioning)return!1;let p=Vs(i.currentLocation.pathname,h)||i.currentLocation.pathname,y=Vs(i.nextLocation.pathname,h)||i.nextLocation.pathname;return ah(c.pathname,y)!=null||ah(c.pathname,p)!=null}np();function eh(){const[d,o]=ae.useState(""),[i,h]=ae.useState(""),[c,p]=ae.useState(!1),[y,k]=ae.useState(!1),[b,M]=ae.useState(null),B=Bp(),T=async F=>{F.preventDefault(),p(!0),M(null);const{error:Z}=await hr.auth.signInWithPassword({email:d,password:i});Z?M(Z.message):B("/dashboard",{replace:!0}),p(!1)},$=async()=>{k(!0),M(null);const{error:F}=await hr.auth.signUp({email:d,password:i});F?M(F.message):B("/dashboard",{replace:!0}),k(!1)};return X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:X.jsxs("div",{className:"card max-w-md w-full",children:[X.jsxs("div",{className:"text-center mb-6",children:[X.jsx("img",{src:G0,alt:"Pudumaps logo",className:"w-16 h-16 mx-auto"}),X.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Pudumaps"}),X.jsx("p",{className:"text-gray-400 text-sm",children:"Inicia sesión o crea tu cuenta"})]}),X.jsxs("form",{className:"space-y-5",onSubmit:T,children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Correo electrónico"}),X.jsx("input",{type:"email",className:"input",value:d,onChange:F=>o(F.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Contraseña"}),X.jsx("input",{type:"password",className:"input",value:i,onChange:F=>h(F.target.value),placeholder:"********",required:!0})]}),b&&X.jsx("p",{className:"text-red-400 text-sm",children:b}),X.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:c,children:c?"Entrando...":"Entrar"}),X.jsx("button",{type:"button",onClick:$,className:"btn btn-secondary w-full",disabled:y,children:y?"Creando...":"Crear cuenta"})]}),X.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["¿Primera vez?"," ",X.jsx("span",{className:"text-green-400",children:"Crea tu cuenta"})," y revisa tu correo para confirmar."]}),X.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-4 text-sm text-gray-400",children:[X.jsx("h3",{className:"text-gray-200 font-semibold mb-3",children:"🚀 Roadmap Pudumaps"}),X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-300 font-medium",children:"✅ Ahora"}),X.jsxs("ul",{className:"list-disc list-inside",children:[X.jsx("li",{children:"Gestión de proyectos (crear, editar, eliminar, favoritos)"}),X.jsx("li",{children:"Capas GeoJSON con estilos editables y persistentes"}),X.jsx("li",{children:"Capas externas WMS con consulta GetFeatureInfo"}),X.jsx("li",{children:"Exportación de mapas a KMZ y PDF"})]})]}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-300 font-medium",children:"⏳ Próximo"}),X.jsxs("ul",{className:"list-disc list-inside",children:[X.jsx("li",{children:"Soporte para servicios ArcGIS REST"}),X.jsx("li",{children:"Herramientas de medición y dibujo en el mapa"}),X.jsx("li",{children:"Compartir proyectos de forma pública/privada"})]})]}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-300 font-medium",children:"🌌 Futuro"}),X.jsxs("ul",{className:"list-disc list-inside",children:[X.jsx("li",{children:"Roles y permisos colaborativos por proyecto"}),X.jsx("li",{children:"Filtros y estadísticas por atributos"}),X.jsx("li",{children:"Optimización para grandes volúmenes de datos"})]})]})]})]})]})})}function fy({id:d,initialName:o,initialDescription:i,onClose:h,onUpdated:c,onNotify:p}){const[y,k]=ae.useState(o),[b,M]=ae.useState(i||""),[B,T]=ae.useState(!1);async function $(){if(!y){p?.("❌ El proyecto debe tener un nombre","error");return}T(!0);const{error:F}=await hr.from("projects").update({name:y,description:b}).eq("id",d);if(T(!1),F){p?.("❌ No se pudo actualizar el proyecto","error");return}c(),h(),p?.("✅ Proyecto actualizado","success")}return X.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:X.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[X.jsx("h2",{className:"text-lg font-semibold text-white",children:"✏️ Editar proyecto"}),X.jsxs("div",{className:"space-y-3",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm text-gray-300",children:"Nombre"}),X.jsx("input",{type:"text",className:"input w-full",value:y,onChange:F=>k(F.target.value)})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm text-gray-300",children:"Descripción"}),X.jsx("input",{type:"text",className:"input w-full",value:b,onChange:F=>M(F.target.value)})]})]}),X.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[X.jsx("button",{onClick:h,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),X.jsx("button",{onClick:$,disabled:B,className:"px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white transition disabled:opacity-60",children:B?"Guardando…":"Guardar"})]})]})})}function py({id:d,name:o,description:i,isFavorite:h,onDelete:c,onUpdated:p,onToggleFavorite:y,onNotify:k}){const[b,M]=ae.useState(!1);return X.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-md p-5 flex justify-between items-center hover:bg-gray-750 transition",children:[X.jsxs("div",{children:[X.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:["📂 ",o,X.jsx("button",{onClick:y,className:"ml-2 text-lg focus:outline-none hover:scale-110 transition",title:h?"Quitar de favoritos":"Marcar como favorito",children:h?"⭐":"☆"})]}),i?X.jsx("p",{className:"text-sm text-gray-400",children:i}):X.jsx("p",{className:"text-sm text-gray-600 italic",children:"Sin descripción"})]}),X.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[X.jsx(dh,{to:`/project/${d}`,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-blue-600 hover:bg-blue-700 text-white transition",children:"Abrir"}),X.jsx("button",{onClick:()=>M(!0),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-white transition",children:"✏️ Editar"}),X.jsx("button",{onClick:()=>c(d),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition",children:"🗑️ Eliminar"})]}),b&&X.jsx(fy,{id:d,initialName:o,initialDescription:i,onClose:()=>M(!1),onUpdated:p,onNotify:k})]})}function my({onProjectCreated:d,onNotify:o}){const[i,h]=ae.useState(""),[c,p]=ae.useState(""),[y,k]=ae.useState(!1);async function b(){if(!i){o?.("❌ El proyecto debe tener un nombre","error");return}k(!0);const{data:{user:M}}=await hr.auth.getUser(),{error:B}=await hr.from("projects").insert([{name:i,description:c,owner_id:M?.id}]);if(k(!1),B){o?.("❌ No se pudo crear el proyecto","error");return}h(""),p(""),d(),o?.("✅ Proyecto creado","success")}return X.jsxs("div",{className:"card space-y-4",children:[X.jsx("h2",{className:"subtitle",children:"Tus proyectos"}),X.jsx("input",{type:"text",placeholder:"Nombre del proyecto",value:i,onChange:M=>h(M.target.value),className:"input"}),X.jsx("input",{type:"text",placeholder:"Descripción (ej: Capas base de Chile)",value:c,onChange:M=>p(M.target.value),className:"input"}),X.jsx("div",{className:"flex gap-3",children:X.jsx("button",{onClick:b,disabled:y,className:"btn btn-primary disabled:opacity-60",children:y?"Creando…":"Crear y abrir"})})]})}function Fp({message:d,type:o="info",duration:i=3e3,onClose:h}){const[c,p]=ae.useState(!0);if(ae.useEffect(()=>{const M=setTimeout(()=>p(!1),i-300),B=setTimeout(()=>h&&h(),i);return()=>{clearTimeout(M),clearTimeout(B)}},[i,h]),!c)return null;const y="px-4 py-2 rounded-md shadow-md text-sm font-medium flex items-center gap-2 transition-opacity duration-300",k={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-blue-600 text-white"},b={success:"✔️",error:"❌",info:"ℹ️"};return X.jsxs("div",{className:`${y} ${k[o]}`,children:[X.jsx("span",{children:b[o]}),X.jsx("span",{children:d})]})}function gy({message:d,onConfirm:o,onCancel:i}){return X.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:X.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 space-y-4",children:[X.jsx("h2",{className:"text-lg font-semibold text-white",children:"⚠️ Confirmar acción"}),X.jsx("p",{className:"text-gray-300",children:d}),X.jsxs("div",{className:"flex justify-end gap-3",children:[X.jsx("button",{onClick:i,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),X.jsx("button",{onClick:o,className:"px-3 py-1.5 rounded-md bg-red-600 hover:bg-red-700 text-white transition",children:"Eliminar"})]})]})})}function _y({email:d}){const[o,i]=ae.useState([]),[h,c]=ae.useState(null),[p,y]=ae.useState(null),[k,b]=ae.useState("");function M(q,J="info"){c({msg:q,type:J})}async function B(){const{data:q,error:J}=await hr.from("projects").select("id, name, description, owner_id, is_favorite").order("is_favorite",{ascending:!1}).order("created_at",{ascending:!1});if(J){M("❌ No se pudieron cargar los proyectos","error");return}q&&i(q)}async function T(q,J=!1){const{error:ce}=await hr.from("projects").update({is_favorite:!J}).eq("id",q);if(ce){M("❌ No se pudo actualizar favorito","error");return}B(),M(J?"⭐ Proyecto quitado de favoritos":"⭐ Proyecto marcado como favorito","success")}async function $(q){const{error:J}=await hr.from("projects").delete().eq("id",q);if(J){M("❌ Error al eliminar proyecto","error");return}i(ce=>ce.filter(be=>be.id!==q)),M("🗑️ Proyecto eliminado","success")}async function F(){await hr.auth.signOut(),M("👋 Sesión cerrada","info"),setTimeout(()=>window.location.reload(),1e3)}ae.useEffect(()=>{B()},[]);const Z=o.filter(q=>q.name.toLowerCase().includes(k.toLowerCase())||(q.description?.toLowerCase()||"").includes(k.toLowerCase()));return X.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-6 relative",children:[h&&X.jsx("div",{className:"fixed top-4 right-4 z-50",children:X.jsx(Fp,{message:h.msg,type:h.type,duration:3e3,onClose:()=>c(null)})}),X.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("div",{children:[X.jsx("h1",{className:"title",children:"Sesión iniciada en Pudumaps"}),X.jsx("p",{className:"text-muted",children:d})]}),X.jsx("button",{onClick:F,className:"btn btn-danger",children:"Cerrar sesión"})]}),X.jsx(my,{onProjectCreated:()=>{B(),M("✅ Proyecto creado","success")},onNotify:M}),X.jsx("div",{children:X.jsx("input",{type:"text",placeholder:"🔍 Buscar proyectos...",value:k,onChange:q=>b(q.target.value),className:"input w-full"})}),X.jsxs("div",{className:"space-y-3",children:[Z.map(q=>X.jsx(py,{id:q.id,name:q.name,description:q.description,isFavorite:q.is_favorite??!1,onDelete:J=>y(J),onUpdated:()=>{B(),M("✅ Proyecto actualizado","success")},onToggleFavorite:()=>T(q.id,q.is_favorite??!1),onNotify:M},q.id)),Z.length===0&&X.jsx("p",{className:"text-muted text-center",children:"No se encontraron proyectos."})]})]}),p&&X.jsx(gy,{message:"¿Seguro que deseas eliminar este proyecto?",onCancel:()=>y(null),onConfirm:()=>{$(p),y(null)}})]})}function qf({children:d,fallback:o}){const[i,h]=ae.useState(null),[c,p]=ae.useState(!0);return ae.useEffect(()=>{hr.auth.getSession().then(({data:k})=>{h(k.session),p(!1)});const{data:{subscription:y}}=hr.auth.onAuthStateChange((k,b)=>{h(b)});return()=>y.unsubscribe()},[]),c?X.jsx("div",{className:"flex min-h-screen items-center justify-center",children:X.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-xl shadow p-6",children:"Cargando…"})}):i?X.jsx(X.Fragment,{children:d(i)}):X.jsx(X.Fragment,{children:o})}function yy({projectId:d,onLayerAdded:o,onError:i}){const h=ae.useRef(null),[c,p]=ae.useState(!1);async function y(k){if(!k||k.length===0)return;const b=k[0];p(!0);try{const M=await b.text(),B=JSON.parse(M),{data:T,error:$}=await hr.from("project_layers").insert({project_id:d,name:b.name.replace(/\.[^.]+$/,""),geojson:B}).select().single();if($)throw $;const F={layer_id:T.id,color:"#3388ff",weight:2,opacity:1,fillColor:"#3388ff",fillOpacity:.2,radius:6};o?.(T,F)}catch(M){console.error(M),i?.(M.message||"No se pudo subir el archivo")}finally{p(!1)}}return X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{ref:h,type:"file",accept:".geojson,.json",className:"hidden",onChange:k=>y(k.target.files)}),X.jsx("button",{type:"button",onClick:()=>h.current?.click(),disabled:c,className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow disabled:opacity-60 transition",children:c?"Subiendo…":"📤 Subir GeoJSON/KMZ/KML"})]})}function vy({layers:d,visible:o,onToggleVisible:i,onZoom:h,onDelete:c}){return d.length===0?X.jsx("div",{className:"hint",children:"No hay capas todavía. Sube una para empezar."}):X.jsx("div",{className:"layer-list",children:d.map(p=>X.jsxs("div",{className:"layer-item",children:[X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:o[p.id],onChange:()=>i(p.id)}),p.name]}),X.jsx("button",{onClick:()=>h(p),children:"🔍"}),X.jsx("button",{onClick:()=>c(p),children:"🗑️"})]},p.id))})}function wy(d,o){const i=ae.useRef(o);ae.useEffect(function(){o!==i.current&&d.attributionControl!=null&&(i.current!=null&&d.attributionControl.removeAttribution(i.current),o!=null&&d.attributionControl.addAttribution(o)),i.current=o},[d,o])}const xy=1;function Ly(d){return Object.freeze({__version:xy,map:d})}function Np(d,o){return Object.freeze({...d,...o})}const zp=ae.createContext(null),zc=zp.Provider;function Uc(){const d=ae.useContext(zp);if(d==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return d}function ky(d){function o(i,h){const{instance:c,context:p}=d(i).current;return ae.useImperativeHandle(h,()=>c),i.children==null?null:cu.createElement(zc,{value:p},i.children)}return ae.forwardRef(o)}function Up(d){function o(i,h){const{instance:c}=d(i).current;return ae.useImperativeHandle(h,()=>c),null}return ae.forwardRef(o)}function $p(d){return function(i){const h=Uc(),c=d(i,h),{instance:p}=c.current,y=ae.useRef(i.position),{position:k}=i;return ae.useEffect(function(){return p.addTo(h.map),function(){p.remove()}},[h.map,p]),ae.useEffect(function(){k!=null&&k!==y.current&&(p.setPosition(k),y.current=k)},[p,k]),c}}function by(d,o){const i=ae.useRef();ae.useEffect(function(){return o!=null&&d.instance.on(o),i.current=o,function(){i.current!=null&&d.instance.off(i.current),i.current=null}},[d,o])}function Gp(d,o){const i=d.pane??o.pane;return i?{...d,pane:i}:d}var su={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Cy=su.exports,Wf;function Vp(){return Wf||(Wf=1,(function(d,o){(function(i,h){h(o)})(Cy,(function(i){var h="1.9.4";function c(t){var a,m,v,S;for(m=1,v=arguments.length;m<v;m++){S=arguments[m];for(a in S)t[a]=S[a]}return t}var p=Object.create||(function(){function t(){}return function(a){return t.prototype=a,new t}})();function y(t,a){var m=Array.prototype.slice;if(t.bind)return t.bind.apply(t,m.call(arguments,1));var v=m.call(arguments,2);return function(){return t.apply(a,v.length?v.concat(m.call(arguments)):arguments)}}var k=0;function b(t){return"_leaflet_id"in t||(t._leaflet_id=++k),t._leaflet_id}function M(t,a,m){var v,S,j,Y;return Y=function(){v=!1,S&&(j.apply(m,S),S=!1)},j=function(){v?S=arguments:(t.apply(m,arguments),setTimeout(Y,a),v=!0)},j}function B(t,a,m){var v=a[1],S=a[0],j=v-S;return t===v&&m?t:((t-S)%j+j)%j+S}function T(){return!1}function $(t,a){if(a===!1)return t;var m=Math.pow(10,a===void 0?6:a);return Math.round(t*m)/m}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return F(t).split(/\s+/)}function q(t,a){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var m in a)t.options[m]=a[m];return t.options}function J(t,a,m){var v=[];for(var S in t)v.push(encodeURIComponent(m?S.toUpperCase():S)+"="+encodeURIComponent(t[S]));return(!a||a.indexOf("?")===-1?"?":"&")+v.join("&")}var ce=/\{ *([\w_ -]+) *\}/g;function be(t,a){return t.replace(ce,function(m,v){var S=a[v];if(S===void 0)throw new Error("No value provided for variable "+m);return typeof S=="function"&&(S=S(a)),S})}var he=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Ae(t,a){for(var m=0;m<t.length;m++)if(t[m]===a)return m;return-1}var Re="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ke=0;function Ke(t){var a=+new Date,m=Math.max(0,16-(a-ke));return ke=a+m,window.setTimeout(t,m)}var Je=window.requestAnimationFrame||le("RequestAnimationFrame")||Ke,nt=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Ne(t,a,m){if(m&&Je===Ke)t.call(a);else return Je.call(window,y(t,a))}function ft(t){t&&nt.call(window,t)}var Mt={__proto__:null,extend:c,create:p,bind:y,get lastId(){return k},stamp:b,throttle:M,wrapNum:B,falseFn:T,formatNum:$,trim:F,splitWords:Z,setOptions:q,getParamString:J,template:be,isArray:he,indexOf:Ae,emptyImageUrl:Re,requestFn:Je,cancelFn:nt,requestAnimFrame:Ne,cancelAnimFrame:ft};function wt(){}wt.extend=function(t){var a=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=a.__super__=this.prototype,v=p(m);v.constructor=a,a.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(a[S]=this[S]);return t.statics&&c(a,t.statics),t.includes&&(St(t.includes),c.apply(null,[v].concat(t.includes))),c(v,t),delete v.statics,delete v.includes,v.options&&(v.options=m.options?p(m.options):{},c(v.options,t.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,Y=v._initHooks.length;j<Y;j++)v._initHooks[j].call(this)}},a},wt.include=function(t){var a=this.prototype.options;return c(this.prototype,t),t.options&&(this.prototype.options=a,this.mergeOptions(t.options)),this},wt.mergeOptions=function(t){return c(this.prototype.options,t),this},wt.addInitHook=function(t){var a=Array.prototype.slice.call(arguments,1),m=typeof t=="function"?t:function(){this[t].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function St(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=he(t)?t:[t];for(var a=0;a<t.length;a++)t[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var mt={on:function(t,a,m){if(typeof t=="object")for(var v in t)this._on(v,t[v],a);else{t=Z(t);for(var S=0,j=t.length;S<j;S++)this._on(t[S],a,m)}return this},off:function(t,a,m){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var v in t)this._off(v,t[v],a);else{t=Z(t);for(var S=arguments.length===1,j=0,Y=t.length;j<Y;j++)S?this._off(t[j]):this._off(t[j],a,m)}return this},_on:function(t,a,m,v){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(t,a,m)===!1){m===this&&(m=void 0);var S={fn:a,ctx:m};v&&(S.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(S)}},_off:function(t,a,m){var v,S,j;if(this._events&&(v=this._events[t],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,j=v.length;S<j;S++)v[S].fn=T;delete this._events[t];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var Y=this._listens(t,a,m);if(Y!==!1){var fe=v[Y];this._firingCount&&(fe.fn=T,this._events[t]=v=v.slice()),v.splice(Y,1)}}},fire:function(t,a,m){if(!this.listens(t,m))return this;var v=c({},a,{type:t,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var S=this._events[t];if(S){this._firingCount=this._firingCount+1||1;for(var j=0,Y=S.length;j<Y;j++){var fe=S[j],xe=fe.fn;fe.once&&this.off(t,xe,fe.ctx),xe.call(fe.ctx||this,v)}this._firingCount--}}return m&&this._propagateEvent(v),this},listens:function(t,a,m,v){typeof t!="string"&&console.warn('"string" type argument expected');var S=a;typeof a!="function"&&(v=!!a,S=void 0,m=void 0);var j=this._events&&this._events[t];if(j&&j.length&&this._listens(t,S,m)!==!1)return!0;if(v){for(var Y in this._eventParents)if(this._eventParents[Y].listens(t,a,m,v))return!0}return!1},_listens:function(t,a,m){if(!this._events)return!1;var v=this._events[t]||[];if(!a)return!!v.length;m===this&&(m=void 0);for(var S=0,j=v.length;S<j;S++)if(v[S].fn===a&&v[S].ctx===m)return S;return!1},once:function(t,a,m){if(typeof t=="object")for(var v in t)this._on(v,t[v],a,!0);else{t=Z(t);for(var S=0,j=t.length;S<j;S++)this._on(t[S],a,m,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[b(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[b(t)],this},_propagateEvent:function(t){for(var a in this._eventParents)this._eventParents[a].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};mt.addEventListener=mt.on,mt.removeEventListener=mt.clearAllEventListeners=mt.off,mt.addOneTimeEventListener=mt.once,mt.fireEvent=mt.fire,mt.hasEventListeners=mt.listens;var Dt=wt.extend(mt);function Ce(t,a,m){this.x=m?Math.round(t):t,this.y=m?Math.round(a):a}var rt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(t){return this.clone()._add(Me(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Me(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Ce(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Ce(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=rt(this.x),this.y=rt(this.y),this},distanceTo:function(t){t=Me(t);var a=t.x-this.x,m=t.y-this.y;return Math.sqrt(a*a+m*m)},equals:function(t){return t=Me(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Me(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+$(this.x)+", "+$(this.y)+")"}};function Me(t,a,m){return t instanceof Ce?t:he(t)?new Ce(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Ce(t.x,t.y):new Ce(t,a,m)}function ie(t,a){if(t)for(var m=a?[t,a]:t,v=0,S=m.length;v<S;v++)this.extend(m[v])}ie.prototype={extend:function(t){var a,m;if(!t)return this;if(t instanceof Ce||typeof t[0]=="number"||"x"in t)a=m=Me(t);else if(t=Ee(t),a=t.min,m=t.max,!a||!m)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=m.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(t){return Me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Me(this.min.x,this.max.y)},getTopRight:function(){return Me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var a,m;return typeof t[0]=="number"||t instanceof Ce?t=Me(t):t=Ee(t),t instanceof ie?(a=t.min,m=t.max):a=m=t,a.x>=this.min.x&&m.x<=this.max.x&&a.y>=this.min.y&&m.y<=this.max.y},intersects:function(t){t=Ee(t);var a=this.min,m=this.max,v=t.min,S=t.max,j=S.x>=a.x&&v.x<=m.x,Y=S.y>=a.y&&v.y<=m.y;return j&&Y},overlaps:function(t){t=Ee(t);var a=this.min,m=this.max,v=t.min,S=t.max,j=S.x>a.x&&v.x<m.x,Y=S.y>a.y&&v.y<m.y;return j&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var a=this.min,m=this.max,v=Math.abs(a.x-m.x)*t,S=Math.abs(a.y-m.y)*t;return Ee(Me(a.x-v,a.y-S),Me(m.x+v,m.y+S))},equals:function(t){return t?(t=Ee(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Ee(t,a){return!t||t instanceof ie?t:new ie(t,a)}function et(t,a){if(t)for(var m=a?[t,a]:t,v=0,S=m.length;v<S;v++)this.extend(m[v])}et.prototype={extend:function(t){var a=this._southWest,m=this._northEast,v,S;if(t instanceof He)v=t,S=t;else if(t instanceof et){if(v=t._southWest,S=t._northEast,!v||!S)return this}else return t?this.extend(ze(t)||Xe(t)):this;return!a&&!m?(this._southWest=new He(v.lat,v.lng),this._northEast=new He(S.lat,S.lng)):(a.lat=Math.min(v.lat,a.lat),a.lng=Math.min(v.lng,a.lng),m.lat=Math.max(S.lat,m.lat),m.lng=Math.max(S.lng,m.lng)),this},pad:function(t){var a=this._southWest,m=this._northEast,v=Math.abs(a.lat-m.lat)*t,S=Math.abs(a.lng-m.lng)*t;return new et(new He(a.lat-v,a.lng-S),new He(m.lat+v,m.lng+S))},getCenter:function(){return new He((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new He(this.getNorth(),this.getWest())},getSouthEast:function(){return new He(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof He||"lat"in t?t=ze(t):t=Xe(t);var a=this._southWest,m=this._northEast,v,S;return t instanceof et?(v=t.getSouthWest(),S=t.getNorthEast()):v=S=t,v.lat>=a.lat&&S.lat<=m.lat&&v.lng>=a.lng&&S.lng<=m.lng},intersects:function(t){t=Xe(t);var a=this._southWest,m=this._northEast,v=t.getSouthWest(),S=t.getNorthEast(),j=S.lat>=a.lat&&v.lat<=m.lat,Y=S.lng>=a.lng&&v.lng<=m.lng;return j&&Y},overlaps:function(t){t=Xe(t);var a=this._southWest,m=this._northEast,v=t.getSouthWest(),S=t.getNorthEast(),j=S.lat>a.lat&&v.lat<m.lat,Y=S.lng>a.lng&&v.lng<m.lng;return j&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,a){return t?(t=Xe(t),this._southWest.equals(t.getSouthWest(),a)&&this._northEast.equals(t.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Xe(t,a){return t instanceof et?t:new et(t,a)}function He(t,a,m){if(isNaN(t)||isNaN(a))throw new Error("Invalid LatLng object: ("+t+", "+a+")");this.lat=+t,this.lng=+a,m!==void 0&&(this.alt=+m)}He.prototype={equals:function(t,a){if(!t)return!1;t=ze(t);var m=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return m<=(a===void 0?1e-9:a)},toString:function(t){return"LatLng("+$(this.lat,t)+", "+$(this.lng,t)+")"},distanceTo:function(t){return xt.distance(this,ze(t))},wrap:function(){return xt.wrapLatLng(this)},toBounds:function(t){var a=180*t/40075017,m=a/Math.cos(Math.PI/180*this.lat);return Xe([this.lat-a,this.lng-m],[this.lat+a,this.lng+m])},clone:function(){return new He(this.lat,this.lng,this.alt)}};function ze(t,a,m){return t instanceof He?t:he(t)&&typeof t[0]!="object"?t.length===3?new He(t[0],t[1],t[2]):t.length===2?new He(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new He(t.lat,"lng"in t?t.lng:t.lon,t.alt):a===void 0?null:new He(t,a,m)}var kt={latLngToPoint:function(t,a){var m=this.projection.project(t),v=this.scale(a);return this.transformation._transform(m,v)},pointToLatLng:function(t,a){var m=this.scale(a),v=this.transformation.untransform(t,m);return this.projection.unproject(v)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var a=this.projection.bounds,m=this.scale(t),v=this.transformation.transform(a.min,m),S=this.transformation.transform(a.max,m);return new ie(v,S)},infinite:!1,wrapLatLng:function(t){var a=this.wrapLng?B(t.lng,this.wrapLng,!0):t.lng,m=this.wrapLat?B(t.lat,this.wrapLat,!0):t.lat,v=t.alt;return new He(m,a,v)},wrapLatLngBounds:function(t){var a=t.getCenter(),m=this.wrapLatLng(a),v=a.lat-m.lat,S=a.lng-m.lng;if(v===0&&S===0)return t;var j=t.getSouthWest(),Y=t.getNorthEast(),fe=new He(j.lat-v,j.lng-S),xe=new He(Y.lat-v,Y.lng-S);return new et(fe,xe)}},xt=c({},kt,{wrapLng:[-180,180],R:6371e3,distance:function(t,a){var m=Math.PI/180,v=t.lat*m,S=a.lat*m,j=Math.sin((a.lat-t.lat)*m/2),Y=Math.sin((a.lng-t.lng)*m/2),fe=j*j+Math.cos(v)*Math.cos(S)*Y*Y,xe=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*xe}}),Ot=6378137,_n={R:Ot,MAX_LATITUDE:85.0511287798,project:function(t){var a=Math.PI/180,m=this.MAX_LATITUDE,v=Math.max(Math.min(m,t.lat),-m),S=Math.sin(v*a);return new Ce(this.R*t.lng*a,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(t){var a=180/Math.PI;return new He((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*a,t.x*a/this.R)},bounds:(function(){var t=Ot*Math.PI;return new ie([-t,-t],[t,t])})()};function Bi(t,a,m,v){if(he(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=a,this._c=m,this._d=v}Bi.prototype={transform:function(t,a){return this._transform(t.clone(),a)},_transform:function(t,a){return a=a||1,t.x=a*(this._a*t.x+this._b),t.y=a*(this._c*t.y+this._d),t},untransform:function(t,a){return a=a||1,new Ce((t.x/a-this._b)/this._a,(t.y/a-this._d)/this._c)}};function Ti(t,a,m,v){return new Bi(t,a,m,v)}var Ai=c({},xt,{code:"EPSG:3857",projection:_n,transformation:(function(){var t=.5/(Math.PI*_n.R);return Ti(t,.5,-t,.5)})()}),Hs=c({},Ai,{code:"EPSG:900913"});function Fo(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function No(t,a){var m="",v,S,j,Y,fe,xe;for(v=0,j=t.length;v<j;v++){for(fe=t[v],S=0,Y=fe.length;S<Y;S++)xe=fe[S],m+=(S?"L":"M")+xe.x+" "+xe.y;m+=a?Ye.svg?"z":"x":""}return m||"M0 0"}var Di=document.documentElement.style,si="ActiveXObject"in window,Zs=si&&!document.addEventListener,Oi="msLaunchUri"in navigator&&!("documentMode"in document),Ur=yn("webkit"),qs=yn("android"),zo=yn("android 2")||yn("android 3"),Ra=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ja=qs&&yn("Google")&&Ra<537&&!("AudioNode"in window),Ws=!!window.opera,Ks=!Oi&&yn("chrome"),us=yn("gecko")&&!Ur&&!Ws&&!si,Uo=!Ks&&yn("safari"),oi=yn("phantom"),Ri="OTransition"in Di,ji=navigator.platform.indexOf("Win")===0,$o=si&&"transition"in Di,hs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zo,Ii="MozPerspective"in Di,Js=!window.L_DISABLE_3D&&($o||hs||Ii)&&!Ri&&!oi,Tr=typeof orientation<"u"||yn("mobile"),Go=Tr&&Ur,Vo=Tr&&hs,cs=!window.PointerEvent&&window.MSPointerEvent,ai=!!(window.PointerEvent||cs),li="ontouchstart"in window||!!window.TouchEvent,Ia=!window.L_NO_TOUCH&&(li||ai),Fa=Tr&&Ws,Ho=Tr&&us,Zo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Na=(function(){var t=!1;try{var a=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",T,a),window.removeEventListener("testPassiveEventSupport",T,a)}catch{}return t})(),qo=(function(){return!!document.createElement("canvas").getContext})(),Ys=!!(document.createElementNS&&Fo("svg").createSVGRect),Fi=!!Ys&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Wo=!Ys&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var a=t.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}})(),ds=navigator.platform.indexOf("Mac")===0,Pl=navigator.platform.indexOf("Linux")===0;function yn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ye={ie:si,ielt9:Zs,edge:Oi,webkit:Ur,android:qs,android23:zo,androidStock:ja,opera:Ws,chrome:Ks,gecko:us,safari:Uo,phantom:oi,opera12:Ri,win:ji,ie3d:$o,webkit3d:hs,gecko3d:Ii,any3d:Js,mobile:Tr,mobileWebkit:Go,mobileWebkit3d:Vo,msPointer:cs,pointer:ai,touch:Ia,touchNative:li,mobileOpera:Fa,mobileGecko:Ho,retina:Zo,passiveEvents:Na,canvas:qo,svg:Ys,vml:Wo,inlineSvg:Fi,mac:ds,linux:Pl},fs=Ye.msPointer?"MSPointerDown":"pointerdown",Xs=Ye.msPointer?"MSPointerMove":"pointermove",Ko=Ye.msPointer?"MSPointerUp":"pointerup",za=Ye.msPointer?"MSPointerCancel":"pointercancel",Jo={touchstart:fs,touchmove:Xs,touchend:Ko,touchcancel:za},$r={touchstart:qt,touchmove:Qs,touchend:Qs,touchcancel:Qs},ui={},Yo=!1;function Sl(t,a,m){return a==="touchstart"&&Xo(),$r[a]?(m=$r[a].bind(this,m),t.addEventListener(Jo[a],m,!1),m):(console.warn("wrong event specified:",a),T)}function Ua(t,a,m){if(!Jo[a]){console.warn("wrong event specified:",a);return}t.removeEventListener(Jo[a],m,!1)}function $a(t){ui[t.pointerId]=t}function Ga(t){ui[t.pointerId]&&(ui[t.pointerId]=t)}function ps(t){delete ui[t.pointerId]}function Xo(){Yo||(document.addEventListener(fs,$a,!0),document.addEventListener(Xs,Ga,!0),document.addEventListener(Ko,ps,!0),document.addEventListener(za,ps,!0),Yo=!0)}function Qs(t,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var m in ui)a.touches.push(ui[m]);a.changedTouches=[a],t(a)}}function qt(t,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Wt(a),Qs(t,a)}function Bl(t){var a={},m,v;for(v in t)m=t[v],a[v]=m&&m.bind?m.bind(t):m;return t=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Qo=200;function Va(t,a){t.addEventListener("dblclick",a);var m=0,v;function S(j){if(j.detail!==1){v=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var Y=ci(j);if(!(Y.some(function(xe){return xe instanceof HTMLLabelElement&&xe.attributes.for})&&!Y.some(function(xe){return xe instanceof HTMLInputElement||xe instanceof HTMLSelectElement}))){var fe=Date.now();fe-m<=Qo?(v++,v===2&&a(Bl(j))):v=1,m=fe}}}return t.addEventListener("click",S),{dblclick:a,simDblclick:S}}function eo(t,a){t.removeEventListener("dblclick",a.dblclick),t.removeEventListener("click",a.simDblclick)}var ea=$i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=$i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ms=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Wn(t){return typeof t=="string"?document.getElementById(t):t}function Gr(t,a){var m=t.style[a]||t.currentStyle&&t.currentStyle[a];if((!m||m==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(t,null);m=v?v[a]:null}return m==="auto"?null:m}function pt(t,a,m){var v=document.createElement(t);return v.className=a||"",m&&m.appendChild(v),v}function Ft(t){var a=t.parentNode;a&&a.removeChild(t)}function gs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function zi(t){var a=t.parentNode;a&&a.lastChild!==t&&a.appendChild(t)}function cr(t){var a=t.parentNode;a&&a.firstChild!==t&&a.insertBefore(t,a.firstChild)}function Ui(t,a){if(t.classList!==void 0)return t.classList.contains(a);var m=to(t);return m.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(m)}function ut(t,a){if(t.classList!==void 0)for(var m=Z(a),v=0,S=m.length;v<S;v++)t.classList.add(m[v]);else if(!Ui(t,a)){var j=to(t);ta(t,(j?j+" ":"")+a)}}function Nt(t,a){t.classList!==void 0?t.classList.remove(a):ta(t,F((" "+to(t)+" ").replace(" "+a+" "," ")))}function ta(t,a){t.className.baseVal===void 0?t.className=a:t.className.baseVal=a}function to(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Pn(t,a){"opacity"in t.style?t.style.opacity=a:"filter"in t.style&&Ha(t,a)}function Ha(t,a){var m=!1,v="DXImageTransform.Microsoft.Alpha";try{m=t.filters.item(v)}catch{if(a===1)return}a=Math.round(a*100),m?(m.Enabled=a!==100,m.Opacity=a):t.style.filter+=" progid:"+v+"(opacity="+a+")"}function $i(t){for(var a=document.documentElement.style,m=0;m<t.length;m++)if(t[m]in a)return t[m];return!1}function Kn(t,a,m){var v=a||new Ce(0,0);t.style[ea]=(Ye.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(m?" scale("+m+")":"")}function Kt(t,a){t._leaflet_pos=a,Ye.any3d?Kn(t,a):(t.style.left=a.x+"px",t.style.top=a.y+"px")}function Ar(t){return t._leaflet_pos||new Ce(0,0)}var Ct,Gi,no;if("onselectstart"in document)Ct=function(){lt(window,"selectstart",Wt)},Gi=function(){It(window,"selectstart",Wt)};else{var Vr=$i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ct=function(){if(Vr){var t=document.documentElement.style;no=t[Vr],t[Vr]="none"}},Gi=function(){Vr&&(document.documentElement.style[Vr]=no,no=void 0)}}function ro(){lt(window,"dragstart",Wt)}function io(){It(window,"dragstart",Wt)}var _s,ys;function Vi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Jn(),_s=t,ys=t.style.outlineStyle,t.style.outlineStyle="none",lt(window,"keydown",Jn))}function Jn(){_s&&(_s.style.outlineStyle=ys,_s=void 0,ys=void 0,It(window,"keydown",Jn))}function Dr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function dr(t){var a=t.getBoundingClientRect();return{x:a.width/t.offsetWidth||1,y:a.height/t.offsetHeight||1,boundingClientRect:a}}var vs={__proto__:null,TRANSFORM:ea,TRANSITION:Ni,TRANSITION_END:ms,get:Wn,getStyle:Gr,create:pt,remove:Ft,empty:gs,toFront:zi,toBack:cr,hasClass:Ui,addClass:ut,removeClass:Nt,setClass:ta,getClass:to,setOpacity:Pn,testProp:$i,setTransform:Kn,setPosition:Kt,getPosition:Ar,get disableTextSelection(){return Ct},get enableTextSelection(){return Gi},disableImageDrag:ro,enableImageDrag:io,preventOutline:Vi,restoreOutline:Jn,getSizedParentNode:Dr,getScale:dr};function lt(t,a,m,v){if(a&&typeof a=="object")for(var S in a)ra(t,S,a[S],m);else{a=Z(a);for(var j=0,Y=a.length;j<Y;j++)ra(t,a[j],m,v)}return this}var rn="_leaflet_events";function It(t,a,m,v){if(arguments.length===1)na(t),delete t[rn];else if(a&&typeof a=="object")for(var S in a)Or(t,S,a[S],m);else if(a=Z(a),arguments.length===2)na(t,function(fe){return Ae(a,fe)!==-1});else for(var j=0,Y=a.length;j<Y;j++)Or(t,a[j],m,v);return this}function na(t,a){for(var m in t[rn]){var v=m.split(/\d/)[0];(!a||a(v))&&Or(t,v,null,null,m)}}var hi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ra(t,a,m,v){var S=a+b(m)+(v?"_"+b(v):"");if(t[rn]&&t[rn][S])return this;var j=function(fe){return m.call(v||t,fe||window.event)},Y=j;!Ye.touchNative&&Ye.pointer&&a.indexOf("touch")===0?j=Sl(t,a,j):Ye.touch&&a==="dblclick"?j=Va(t,j):"addEventListener"in t?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?t.addEventListener(hi[a]||a,j,Ye.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(j=function(fe){fe=fe||window.event,Ls(t,fe)&&Y(fe)},t.addEventListener(hi[a],j,!1)):t.addEventListener(a,Y,!1):t.attachEvent("on"+a,j),t[rn]=t[rn]||{},t[rn][S]=j}function Or(t,a,m,v,S){S=S||a+b(m)+(v?"_"+b(v):"");var j=t[rn]&&t[rn][S];if(!j)return this;!Ye.touchNative&&Ye.pointer&&a.indexOf("touch")===0?Ua(t,a,j):Ye.touch&&a==="dblclick"?eo(t,j):"removeEventListener"in t?t.removeEventListener(hi[a]||a,j,!1):t.detachEvent("on"+a,j),t[rn][S]=null}function fr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function so(t){return ra(t,"wheel",fr),this}function ws(t){return lt(t,"mousedown touchstart dblclick contextmenu",fr),t._leaflet_disable_click=!0,this}function Wt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Yn(t){return Wt(t),fr(t),this}function ci(t){if(t.composedPath)return t.composedPath();for(var a=[],m=t.target;m;)a.push(m),m=m.parentNode;return a}function xs(t,a){if(!a)return new Ce(t.clientX,t.clientY);var m=dr(a),v=m.boundingClientRect;return new Ce((t.clientX-v.left)/m.x-a.clientLeft,(t.clientY-v.top)/m.y-a.clientTop)}var Tl=Ye.linux&&Ye.chrome?window.devicePixelRatio:Ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Za(t){return Ye.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Tl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ls(t,a){var m=a.relatedTarget;if(!m)return!0;try{for(;m&&m!==t;)m=m.parentNode}catch{return!1}return m!==t}var di={__proto__:null,on:lt,off:It,stopPropagation:fr,disableScrollPropagation:so,disableClickPropagation:ws,preventDefault:Wt,stop:Yn,getPropagationPath:ci,getMousePosition:xs,getWheelDelta:Za,isExternalTarget:Ls,addListener:lt,removeListener:It},oo=Dt.extend({run:function(t,a,m,v){this.stop(),this._el=t,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Ar(t),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ne(this._animate,this),this._step()},_step:function(t){var a=+new Date-this._startTime,m=this._duration*1e3;a<m?this._runFrame(this._easeOut(a/m),t):(this._runFrame(1),this._complete())},_runFrame:function(t,a){var m=this._startPos.add(this._offset.multiplyBy(t));a&&m._round(),Kt(this._el,m),this.fire("step")},_complete:function(){ft(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Lt=Dt.extend({options:{crs:Ai,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,a){a=q(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ze(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&Ye.any3d&&!Ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),lt(this._proxy,ms,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,a,m){if(a=a===void 0?this._zoom:this._limitZoom(a),t=this._limitCenter(ze(t),a,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=c({animate:m.animate},m.zoom),m.pan=c({animate:m.animate,duration:m.duration},m.pan));var v=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,a,m.zoom):this._tryAnimatedPan(t,m.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(t,a,m.pan&&m.pan.noMoveStart),this},setZoom:function(t,a){return this._loaded?this.setView(this.getCenter(),t,{zoom:a}):(this._zoom=t,this)},zoomIn:function(t,a){return t=t||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,a)},zoomOut:function(t,a){return t=t||(Ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,a)},setZoomAround:function(t,a,m){var v=this.getZoomScale(a),S=this.getSize().divideBy(2),j=t instanceof Ce?t:this.latLngToContainerPoint(t),Y=j.subtract(S).multiplyBy(1-1/v),fe=this.containerPointToLatLng(S.add(Y));return this.setView(fe,a,{zoom:m})},_getBoundsCenterZoom:function(t,a){a=a||{},t=t.getBounds?t.getBounds():Xe(t);var m=Me(a.paddingTopLeft||a.padding||[0,0]),v=Me(a.paddingBottomRight||a.padding||[0,0]),S=this.getBoundsZoom(t,!1,m.add(v));if(S=typeof a.maxZoom=="number"?Math.min(a.maxZoom,S):S,S===1/0)return{center:t.getCenter(),zoom:S};var j=v.subtract(m).divideBy(2),Y=this.project(t.getSouthWest(),S),fe=this.project(t.getNorthEast(),S),xe=this.unproject(Y.add(fe).divideBy(2).add(j),S);return{center:xe,zoom:S}},fitBounds:function(t,a){if(t=Xe(t),!t.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(t,a);return this.setView(m.center,m.zoom,a)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,a){return this.setView(t,this._zoom,{pan:a})},panBy:function(t,a){if(t=Me(t).round(),a=a||{},!t.x&&!t.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new oo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ut(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,m,a.duration||.25,a.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,a,m){if(m=m||{},m.animate===!1||!Ye.any3d)return this.setView(t,a,m);this._stop();var v=this.project(this.getCenter()),S=this.project(t),j=this.getSize(),Y=this._zoom;t=ze(t),a=a===void 0?Y:a;var fe=Math.max(j.x,j.y),xe=fe*this.getZoomScale(Y,a),Se=S.distanceTo(v)||1,Fe=1.42,it=Fe*Fe;function gt(Tt){var yi=Tt?-1:1,Il=Tt?xe:fe,Cr=xe*xe-fe*fe+yi*it*it*Se*Se,vi=2*Il*it*Se,Er=Cr/vi,Xr=Math.sqrt(Er*Er+1)-Er,Lo=Xr<1e-9?-18:Math.log(Xr);return Lo}function un(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function en(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}function wn(Tt){return un(Tt)/en(Tt)}var Gt=gt(0);function Lr(Tt){return fe*(en(Gt)/en(Gt+Fe*Tt))}function Ds(Tt){return fe*(en(Gt)*wn(Gt+Fe*Tt)-un(Gt))/it}function rr(Tt){return 1-Math.pow(1-Tt,1.5)}var ya=Date.now(),kr=(gt(1)-Gt)/Fe,br=m.duration?1e3*m.duration:1e3*kr*.8;function ts(){var Tt=(Date.now()-ya)/br,yi=rr(Tt)*kr;Tt<=1?(this._flyToFrame=Ne(ts,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(Ds(yi)/Se)),Y),this.getScaleZoom(fe/Lr(yi),Y),{flyTo:!0})):this._move(t,a)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),ts.call(this),this},flyToBounds:function(t,a){var m=this._getBoundsCenterZoom(t,a);return this.flyTo(m.center,m.zoom,a)},setMaxBounds:function(t){return t=Xe(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var a=this.options.minZoom;return this.options.minZoom=t,this._loaded&&a!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var a=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&a!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,a){this._enforcingBounds=!0;var m=this.getCenter(),v=this._limitCenter(m,this._zoom,Xe(t));return m.equals(v)||this.panTo(v,a),this._enforcingBounds=!1,this},panInside:function(t,a){a=a||{};var m=Me(a.paddingTopLeft||a.padding||[0,0]),v=Me(a.paddingBottomRight||a.padding||[0,0]),S=this.project(this.getCenter()),j=this.project(t),Y=this.getPixelBounds(),fe=Ee([Y.min.add(m),Y.max.subtract(v)]),xe=fe.getSize();if(!fe.contains(j)){this._enforcingBounds=!0;var Se=j.subtract(fe.getCenter()),Fe=fe.extend(j).getSize().subtract(xe);S.x+=Se.x<0?-Fe.x:Fe.x,S.y+=Se.y<0?-Fe.y:Fe.y,this.panTo(this.unproject(S),a),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),v=a.divideBy(2).round(),S=m.divideBy(2).round(),j=v.subtract(S);return!j.x&&!j.y?this:(t.animate&&t.pan?this.panBy(j):(t.pan&&this._rawPanBy(j),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=y(this._handleGeolocationResponse,this),m=y(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,m,t):navigator.geolocation.getCurrentPosition(a,m,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var a=t.code,m=t.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var a=t.coords.latitude,m=t.coords.longitude,v=new He(a,m),S=v.toBounds(t.coords.accuracy*2),j=this._locateOptions;if(j.setView){var Y=this.getBoundsZoom(S);this.setView(v,j.maxZoom?Math.min(Y,j.maxZoom):Y)}var fe={latlng:v,bounds:S,timestamp:t.timestamp};for(var xe in t.coords)typeof t.coords[xe]=="number"&&(fe[xe]=t.coords[xe]);this.fire("locationfound",fe)}},addHandler:function(t,a){if(!a)return this;var m=this[t]=new a(this);return this._handlers.push(m),this.options[t]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ft(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ft(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,a){var m="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),v=pt("div",m,a||this._mapPane);return t&&(this._panes[t]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),a=this.unproject(t.getBottomLeft()),m=this.unproject(t.getTopRight());return new et(a,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,a,m){t=Xe(t),m=Me(m||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),j=this.getMaxZoom(),Y=t.getNorthWest(),fe=t.getSouthEast(),xe=this.getSize().subtract(m),Se=Ee(this.project(fe,v),this.project(Y,v)).getSize(),Fe=Ye.any3d?this.options.zoomSnap:1,it=xe.x/Se.x,gt=xe.y/Se.y,un=a?Math.max(it,gt):Math.min(it,gt);return v=this.getScaleZoom(un,v),Fe&&(v=Math.round(v/(Fe/100))*(Fe/100),v=a?Math.ceil(v/Fe)*Fe:Math.floor(v/Fe)*Fe),Math.max(S,Math.min(j,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ce(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,a){var m=this._getTopLeftPoint(t,a);return new ie(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,a){var m=this.options.crs;return a=a===void 0?this._zoom:a,m.scale(t)/m.scale(a)},getScaleZoom:function(t,a){var m=this.options.crs;a=a===void 0?this._zoom:a;var v=m.zoom(t*m.scale(a));return isNaN(v)?1/0:v},project:function(t,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ze(t),a)},unproject:function(t,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Me(t),a)},layerPointToLatLng:function(t){var a=Me(t).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(t){var a=this.project(ze(t))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ze(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Xe(t))},distance:function(t,a){return this.options.crs.distance(ze(t),ze(a))},containerPointToLayerPoint:function(t){return Me(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Me(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var a=this.containerPointToLayerPoint(Me(t));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ze(t)))},mouseEventToContainerPoint:function(t){return xs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var a=this._container=Wn(t);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");lt(a,"scroll",this._onScroll,this),this._containerId=b(a)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ye.any3d,ut(t,"leaflet-container"+(Ye.touch?" leaflet-touch":"")+(Ye.retina?" leaflet-retina":"")+(Ye.ielt9?" leaflet-oldie":"")+(Ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Gr(t,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kt(this._mapPane,new Ce(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ut(t.markerPane,"leaflet-zoom-hide"),ut(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,a,m){Kt(this._mapPane,new Ce(0,0));var v=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var S=this._zoom!==a;this._moveStart(S,m)._move(t,a)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(t,a){return t&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(t,a,m,v){a===void 0&&(a=this._zoom);var S=this._zoom!==a;return this._zoom=a,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),v?m&&m.pinch&&this.fire("zoom",m):((S||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ft(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Kt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[b(this._container)]=this;var a=t?It:lt;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),Ye.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ft(this._resizeRequest),this._resizeRequest=Ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,a){for(var m=[],v,S=a==="mouseout"||a==="mouseover",j=t.target||t.srcElement,Y=!1;j;){if(v=this._targets[b(j)],v&&(a==="click"||a==="preclick")&&this._draggableMoved(v)){Y=!0;break}if(v&&v.listens(a,!0)&&(S&&!Ls(j,t)||(m.push(v),S))||j===this._container)break;j=j.parentNode}return!m.length&&!Y&&!S&&this.listens(a,!0)&&(m=[this]),m},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var a=t.target||t.srcElement;if(!(!this._loaded||a._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(a))){var m=t.type;m==="mousedown"&&Vi(a),this._fireDOMEvent(t,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,a,m){if(t.type==="click"){var v=c({},t);v.type="preclick",this._fireDOMEvent(v,v.type,m)}var S=this._findEventTargets(t,a);if(m){for(var j=[],Y=0;Y<m.length;Y++)m[Y].listens(a,!0)&&j.push(m[Y]);S=j.concat(S)}if(S.length){a==="contextmenu"&&Wt(t);var fe=S[0],xe={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Se=fe.getLatLng&&(!fe._radius||fe._radius<=10);xe.containerPoint=Se?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(t),xe.layerPoint=this.containerPointToLayerPoint(xe.containerPoint),xe.latlng=Se?fe.getLatLng():this.layerPointToLatLng(xe.layerPoint)}for(Y=0;Y<S.length;Y++)if(S[Y].fire(a,xe,!0),xe.originalEvent._stopped||S[Y].options.bubblingMouseEvents===!1&&Ae(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,a=this._handlers.length;t<a;t++)this._handlers[t].disable()},whenReady:function(t,a){return this._loaded?t.call(a||this,{target:this}):this.on("load",t,a),this},_getMapPanePos:function(){return Ar(this._mapPane)||new Ce(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,a){var m=t&&a!==void 0?this._getNewPixelOrigin(t,a):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,a){var m=this.getSize()._divideBy(2);return this.project(t,a)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,a,m){var v=this._getNewPixelOrigin(m,a);return this.project(t,a)._subtract(v)},_latLngBoundsToNewLayerBounds:function(t,a,m){var v=this._getNewPixelOrigin(m,a);return Ee([this.project(t.getSouthWest(),a)._subtract(v),this.project(t.getNorthWest(),a)._subtract(v),this.project(t.getSouthEast(),a)._subtract(v),this.project(t.getNorthEast(),a)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,a,m){if(!m)return t;var v=this.project(t,a),S=this.getSize().divideBy(2),j=new ie(v.subtract(S),v.add(S)),Y=this._getBoundsOffset(j,m,a);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?t:this.unproject(v.add(Y),a)},_limitOffset:function(t,a){if(!a)return t;var m=this.getPixelBounds(),v=new ie(m.min.add(t),m.max.add(t));return t.add(this._getBoundsOffset(v,a))},_getBoundsOffset:function(t,a,m){var v=Ee(this.project(a.getNorthEast(),m),this.project(a.getSouthWest(),m)),S=v.min.subtract(t.min),j=v.max.subtract(t.max),Y=this._rebound(S.x,-j.x),fe=this._rebound(S.y,-j.y);return new Ce(Y,fe)},_rebound:function(t,a){return t+a>0?Math.round(t-a)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(a))},_limitZoom:function(t){var a=this.getMinZoom(),m=this.getMaxZoom(),v=Ye.any3d?this.options.zoomSnap:1;return v&&(t=Math.round(t/v)*v),Math.max(a,Math.min(m,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,a){var m=this._getCenterOffset(t)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,a),!0)},_createAnimProxy:function(){var t=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(a){var m=ea,v=this._proxy.style[m];Kn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),v===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),a=this.getZoom();Kn(this._proxy,this.project(t,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,a,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(a),S=this._getCenterOffset(t)._divideBy(1-1/v);return m.animate!==!0&&!this.getSize().contains(S)?!1:(Ne(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(t,a,!0)},this),!0)},_animateZoom:function(t,a,m,v){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=a,ut(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:a,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Rr(t,a){return new Lt(t,a)}var ht=wt.extend({options:{position:"topright"},initialize:function(t){q(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var a=this._map;return a&&a.removeControl(this),this.options.position=t,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var a=this._container=this.onAdd(t),m=this.getPosition(),v=t._controlCorners[m];return ut(a,"leaflet-control"),m.indexOf("bottom")!==-1?v.insertBefore(a,v.firstChild):v.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),pr=function(t){return new ht(t)};Lt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},a="leaflet-",m=this._controlContainer=pt("div",a+"control-container",this._container);function v(S,j){var Y=a+S+" "+a+j;t[S+j]=pt("div",Y,m)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ft(this._controlCorners[t]);Ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hi=ht.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,a,m,v){return m<v?-1:v<m?1:0}},initialize:function(t,a,m){q(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in t)this._addLayer(t[v],v);for(v in a)this._addLayer(a[v],v,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ht.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,a){return this._addLayer(t,a),this._map?this._update():this},addOverlay:function(t,a){return this._addLayer(t,a,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var a=this._getLayer(b(t));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ut(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ut(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",a=this._container=pt("div",t),m=this.options.collapsed;a.setAttribute("aria-haspopup",!0),ws(a),so(a);var v=this._section=pt("section",t+"-list");m&&(this._map.on("click",this.collapse,this),lt(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=pt("a",t+"-toggle",a);S.href="#",S.title="Layers",S.setAttribute("role","button"),lt(S,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){Wt(j),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=pt("div",t+"-base",v),this._separator=pt("div",t+"-separator",v),this._overlaysList=pt("div",t+"-overlays",v),a.appendChild(v)},_getLayer:function(t){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&b(this._layers[a].layer)===t)return this._layers[a]},_addLayer:function(t,a,m){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:a,overlay:m}),this.options.sortLayers&&this._layers.sort(y(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gs(this._baseLayersList),gs(this._overlaysList),this._layerControlInputs=[];var t,a,m,v,S=0;for(m=0;m<this._layers.length;m++)v=this._layers[m],this._addItem(v),a=a||v.overlay,t=t||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(t=t&&S>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=a&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var a=this._getLayer(b(t.target)),m=a.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;m&&this._map.fire(m,a)},_createRadioElement:function(t,a){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(a?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=m,v.firstChild},_addItem:function(t){var a=document.createElement("label"),m=this._map.hasLayer(t.layer),v;t.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=m):v=this._createRadioElement("leaflet-base-layers_"+b(this),m),this._layerControlInputs.push(v),v.layerId=b(t.layer),lt(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+t.name;var j=document.createElement("span");a.appendChild(j),j.appendChild(v),j.appendChild(S);var Y=t.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,a,m,v=[],S=[];this._handlingClick=!0;for(var j=t.length-1;j>=0;j--)a=t[j],m=this._getLayer(a.layerId).layer,a.checked?v.push(m):a.checked||S.push(m);for(j=0;j<S.length;j++)this._map.hasLayer(S[j])&&this._map.removeLayer(S[j]);for(j=0;j<v.length;j++)this._map.hasLayer(v[j])||this._map.addLayer(v[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,a,m,v=this._map.getZoom(),S=t.length-1;S>=0;S--)a=t[S],m=this._getLayer(a.layerId).layer,a.disabled=m.options.minZoom!==void 0&&v<m.options.minZoom||m.options.maxZoom!==void 0&&v>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,lt(t,"click",Wt),this.expand();var a=this;setTimeout(function(){It(t,"click",Wt),a._preventClick=!1})}}),ao=function(t,a,m){return new Hi(t,a,m)},fi=ht.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var a="leaflet-control-zoom",m=pt("div",a+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,a+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,a+"-out",m,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,a,m,v,S){var j=pt("a",m,v);return j.innerHTML=t,j.href="#",j.title=a,j.setAttribute("role","button"),j.setAttribute("aria-label",a),ws(j),lt(j,"click",Yn),lt(j,"click",S,this),lt(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var t=this._map,a="leaflet-disabled";Nt(this._zoomInButton,a),Nt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ut(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ut(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Lt.mergeOptions({zoomControl:!0}),Lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fi,this.addControl(this.zoomControl))});var qa=function(t){return new fi(t)},dn=ht.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var a="leaflet-control-scale",m=pt("div",a),v=this.options;return this._addScales(v,a+"-line",m),t.on(v.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),m},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,a,m){t.metric&&(this._mScale=pt("div",a,m)),t.imperial&&(this._iScale=pt("div",a,m))},_update:function(){var t=this._map,a=t.getSize().y/2,m=t.distance(t.containerPointToLatLng([0,a]),t.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(m)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var a=this._getRoundNum(t),m=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,m,a/t)},_updateImperial:function(t){var a=t*3.2808399,m,v,S;a>5280?(m=a/5280,v=this._getRoundNum(m),this._updateScale(this._iScale,v+" mi",v/m)):(S=this._getRoundNum(a),this._updateScale(this._iScale,S+" ft",S/a))},_updateScale:function(t,a,m){t.style.width=Math.round(this.options.maxWidth*m)+"px",t.innerHTML=a},_getRoundNum:function(t){var a=Math.pow(10,(Math.floor(t)+"").length-1),m=t/a;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,a*m}}),jr=function(t){return new dn(t)},ia='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Sn=ht.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ye.inlineSvg?ia+" ":"")+"Leaflet</a>"},initialize:function(t){q(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),ws(this._container);for(var a in t._layers)t._layers[a].getAttribution&&this.addAttribution(t._layers[a].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var a in this._attributions)this._attributions[a]&&t.push(a);var m=[];this.options.prefix&&m.push(this.options.prefix),t.length&&m.push(t.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Lt.mergeOptions({attributionControl:!0}),Lt.addInitHook(function(){this.options.attributionControl&&new Sn().addTo(this)});var Wa=function(t){return new Sn(t)};ht.Layers=Hi,ht.Zoom=fi,ht.Scale=dn,ht.Attribution=Sn,pr.layers=ao,pr.zoom=qa,pr.scale=jr,pr.attribution=Wa;var sn=wt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(t,a){return t.addHandler(a,this),this};var sa={Events:mt},Zi=Ye.touch?"touchstart mousedown":"mousedown",Xn=Dt.extend({options:{clickTolerance:3},initialize:function(t,a,m,v){q(this,v),this._element=t,this._dragStartTarget=a||t,this._preventOutline=m},enable:function(){this._enabled||(lt(this._dragStartTarget,Zi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xn._dragging===this&&this.finishDrag(!0),It(this._dragStartTarget,Zi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ui(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Xn._dragging===this&&this.finishDrag();return}if(!(Xn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Xn._dragging=this,this._preventOutline&&Vi(this._element),ro(),Ct(),!this._moving)){this.fire("down");var a=t.touches?t.touches[0]:t,m=Dr(this._element);this._startPoint=new Ce(a.clientX,a.clientY),this._startPos=Ar(this._element),this._parentScale=dr(m);var v=t.type==="mousedown";lt(document,v?"mousemove":"touchmove",this._onMove,this),lt(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var a=t.touches&&t.touches.length===1?t.touches[0]:t,m=new Ce(a.clientX,a.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,Wt(t),this._moved||(this.fire("dragstart"),this._moved=!0,ut(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ut(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Kt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),It(document,"mousemove touchmove",this._onMove,this),It(document,"mouseup touchend touchcancel",this._onUp,this),io(),Gi();var a=this._moved&&this._moving;this._moving=!1,Xn._dragging=!1,a&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function oa(t,a,m){var v,S=[1,4,2,8],j,Y,fe,xe,Se,Fe,it,gt;for(j=0,Fe=t.length;j<Fe;j++)t[j]._code=Bn(t[j],a);for(fe=0;fe<4;fe++){for(it=S[fe],v=[],j=0,Fe=t.length,Y=Fe-1;j<Fe;Y=j++)xe=t[j],Se=t[Y],xe._code&it?Se._code&it||(gt=Zr(Se,xe,it,a,m),gt._code=Bn(gt,a),v.push(gt)):(Se._code&it&&(gt=Zr(Se,xe,it,a,m),gt._code=Bn(gt,a),v.push(gt)),v.push(xe));t=v}return t}function Ka(t,a){var m,v,S,j,Y,fe,xe,Se,Fe;if(!t||t.length===0)throw new Error("latlngs not passed");Tn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var it=ze([0,0]),gt=Xe(t),un=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());un<1700&&(it=aa(t));var en=t.length,wn=[];for(m=0;m<en;m++){var Gt=ze(t[m]);wn.push(a.project(ze([Gt.lat-it.lat,Gt.lng-it.lng])))}for(fe=xe=Se=0,m=0,v=en-1;m<en;v=m++)S=wn[m],j=wn[v],Y=S.y*j.x-j.y*S.x,xe+=(S.x+j.x)*Y,Se+=(S.y+j.y)*Y,fe+=Y*3;fe===0?Fe=wn[0]:Fe=[xe/fe,Se/fe];var Lr=a.unproject(Me(Fe));return ze([Lr.lat+it.lat,Lr.lng+it.lng])}function aa(t){for(var a=0,m=0,v=0,S=0;S<t.length;S++){var j=ze(t[S]);a+=j.lat,m+=j.lng,v++}return ze([a/v,m/v])}var Al={__proto__:null,clipPolygon:oa,polygonCenter:Ka,centroid:aa};function lo(t,a){if(!a||!t.length)return t.slice();var m=a*a;return t=Ja(t,m),t=on(t,m),t}function la(t,a,m){return Math.sqrt(mi(t,a,m,!0))}function Dl(t,a,m){return mi(t,a,m)}function on(t,a){var m=t.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(m);S[0]=S[m-1]=1,fn(t,S,a,0,m-1);var j,Y=[];for(j=0;j<m;j++)S[j]&&Y.push(t[j]);return Y}function fn(t,a,m,v,S){var j=0,Y,fe,xe;for(fe=v+1;fe<=S-1;fe++)xe=mi(t[fe],t[v],t[S],!0),xe>j&&(Y=fe,j=xe);j>m&&(a[Y]=1,fn(t,a,m,v,Y),fn(t,a,m,Y,S))}function Ja(t,a){for(var m=[t[0]],v=1,S=0,j=t.length;v<j;v++)Ol(t[v],t[S])>a&&(m.push(t[v]),S=v);return S<j-1&&m.push(t[j-1]),m}var Hr;function pi(t,a,m,v,S){var j=v?Hr:Bn(t,m),Y=Bn(a,m),fe,xe,Se;for(Hr=Y;;){if(!(j|Y))return[t,a];if(j&Y)return!1;fe=j||Y,xe=Zr(t,a,fe,m,S),Se=Bn(xe,m),fe===j?(t=xe,j=Se):(a=xe,Y=Se)}}function Zr(t,a,m,v,S){var j=a.x-t.x,Y=a.y-t.y,fe=v.min,xe=v.max,Se,Fe;return m&8?(Se=t.x+j*(xe.y-t.y)/Y,Fe=xe.y):m&4?(Se=t.x+j*(fe.y-t.y)/Y,Fe=fe.y):m&2?(Se=xe.x,Fe=t.y+Y*(xe.x-t.x)/j):m&1&&(Se=fe.x,Fe=t.y+Y*(fe.x-t.x)/j),new Ce(Se,Fe,S)}function Bn(t,a){var m=0;return t.x<a.min.x?m|=1:t.x>a.max.x&&(m|=2),t.y<a.min.y?m|=4:t.y>a.max.y&&(m|=8),m}function Ol(t,a){var m=a.x-t.x,v=a.y-t.y;return m*m+v*v}function mi(t,a,m,v){var S=a.x,j=a.y,Y=m.x-S,fe=m.y-j,xe=Y*Y+fe*fe,Se;return xe>0&&(Se=((t.x-S)*Y+(t.y-j)*fe)/xe,Se>1?(S=m.x,j=m.y):Se>0&&(S+=Y*Se,j+=fe*Se)),Y=t.x-S,fe=t.y-j,v?Y*Y+fe*fe:new Ce(S,j)}function Tn(t){return!he(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Un(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tn(t)}function ua(t,a){var m,v,S,j,Y,fe,xe,Se;if(!t||t.length===0)throw new Error("latlngs not passed");Tn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Fe=ze([0,0]),it=Xe(t),gt=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());gt<1700&&(Fe=aa(t));var un=t.length,en=[];for(m=0;m<un;m++){var wn=ze(t[m]);en.push(a.project(ze([wn.lat-Fe.lat,wn.lng-Fe.lng])))}for(m=0,v=0;m<un-1;m++)v+=en[m].distanceTo(en[m+1])/2;if(v===0)Se=en[0];else for(m=0,j=0;m<un-1;m++)if(Y=en[m],fe=en[m+1],S=Y.distanceTo(fe),j+=S,j>v){xe=(j-v)/S,Se=[fe.x-xe*(fe.x-Y.x),fe.y-xe*(fe.y-Y.y)];break}var Gt=a.unproject(Me(Se));return ze([Gt.lat+Fe.lat,Gt.lng+Fe.lng])}var ks={__proto__:null,simplify:lo,pointToSegmentDistance:la,closestPointOnSegment:Dl,clipSegment:pi,_getEdgeIntersection:Zr,_getBitCode:Bn,_sqClosestPointOnSegment:mi,isFlat:Tn,_flat:Un,polylineCenter:ua},ha={project:function(t){return new Ce(t.lng,t.lat)},unproject:function(t){return new He(t.y,t.x)},bounds:new ie([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var a=Math.PI/180,m=this.R,v=t.lat*a,S=this.R_MINOR/m,j=Math.sqrt(1-S*S),Y=j*Math.sin(v),fe=Math.tan(Math.PI/4-v/2)/Math.pow((1-Y)/(1+Y),j/2);return v=-m*Math.log(Math.max(fe,1e-10)),new Ce(t.lng*a*m,v)},unproject:function(t){for(var a=180/Math.PI,m=this.R,v=this.R_MINOR/m,S=Math.sqrt(1-v*v),j=Math.exp(-t.y/m),Y=Math.PI/2-2*Math.atan(j),fe=0,xe=.1,Se;fe<15&&Math.abs(xe)>1e-7;fe++)Se=S*Math.sin(Y),Se=Math.pow((1-Se)/(1+Se),S/2),xe=Math.PI/2-2*Math.atan(j*Se)-Y,Y+=xe;return new He(Y*a,t.x*a/m)}},mr={__proto__:null,LonLat:ha,Mercator:$n,SphericalMercator:_n},uo=c({},xt,{code:"EPSG:3395",projection:$n,transformation:(function(){var t=.5/(Math.PI*$n.R);return Ti(t,.5,-t,.5)})()}),ca=c({},xt,{code:"EPSG:4326",projection:ha,transformation:Ti(1/180,1,-1/180,.5)}),da=c({},kt,{projection:ha,transformation:Ti(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,a){var m=a.lng-t.lng,v=a.lat-t.lat;return Math.sqrt(m*m+v*v)},infinite:!0});kt.Earth=xt,kt.EPSG3395=uo,kt.EPSG3857=Ai,kt.EPSG900913=Hs,kt.EPSG4326=ca,kt.Simple=da;var vn=Dt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[b(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[b(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var a=t.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var m=this.getEvents();a.on(m,this),this.once("remove",function(){a.off(m,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Lt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var a=b(t);return this._layers[a]?this:(this._layers[a]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var a=b(t);return this._layers[a]?(this._loaded&&t.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return b(t)in this._layers},eachLayer:function(t,a){for(var m in this._layers)t.call(a,this._layers[m]);return this},_addLayers:function(t){t=t?he(t)?t:[t]:[];for(var a=0,m=t.length;a<m;a++)this.addLayer(t[a])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[b(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var a=b(t);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,a=-1/0,m=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;t=S.minZoom===void 0?t:Math.min(t,S.minZoom),a=S.maxZoom===void 0?a:Math.max(a,S.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=t===1/0?void 0:t,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qr=vn.extend({initialize:function(t,a){q(this,a),this._layers={};var m,v;if(t)for(m=0,v=t.length;m<v;m++)this.addLayer(t[m])},addLayer:function(t){var a=this.getLayerId(t);return this._layers[a]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var a=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(t){var a=typeof t=="number"?t:this.getLayerId(t);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var a=Array.prototype.slice.call(arguments,1),m,v;for(m in this._layers)v=this._layers[m],v[t]&&v[t].apply(v,a);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,a){for(var m in this._layers)t.call(a,this._layers[m]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return b(t)}}),bs=function(t,a){return new qr(t,a)},Qn=qr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new et;for(var a in this._layers){var m=this._layers[a];t.extend(m.getBounds?m.getBounds():m.getLatLng())}return t}}),Ya=function(t,a){return new Qn(t,a)},gi=wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){q(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,a){var m=this._getIconUrl(t);if(!m){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(m,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(v,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(t,a){var m=this.options,v=m[a+"Size"];typeof v=="number"&&(v=[v,v]);var S=Me(v),j=Me(a==="shadow"&&m.shadowAnchor||m.iconAnchor||S&&S.divideBy(2,!0));t.className="leaflet-marker-"+a+" "+(m.className||""),j&&(t.style.marginLeft=-j.x+"px",t.style.marginTop=-j.y+"px"),S&&(t.style.width=S.x+"px",t.style.height=S.y+"px")},_createImg:function(t,a){return a=a||document.createElement("img"),a.src=t,a},_getIconUrl:function(t){return Ye.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Xa(t){return new gi(t)}var qi=gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof qi.imagePath!="string"&&(qi.imagePath=this._detectIconPath()),(this.options.imagePath||qi.imagePath)+gi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var a=function(m,v,S){var j=v.exec(m);return j&&j[S]};return t=a(t,/^url\((['"])?(.+)\1\)$/,2),t&&a(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=pt("div","leaflet-default-icon-path",document.body),a=Gr(t,"background-image")||Gr(t,"backgroundImage");if(document.body.removeChild(t),a=this._stripUrl(a),a)return a;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Cs=sn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ut(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var a=this._marker,m=a._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,j=Ar(a._icon),Y=m.getPixelBounds(),fe=m.getPixelOrigin(),xe=Ee(Y.min._subtract(fe).add(S),Y.max._subtract(fe).subtract(S));if(!xe.contains(j)){var Se=Me((Math.max(xe.max.x,j.x)-xe.max.x)/(Y.max.x-xe.max.x)-(Math.min(xe.min.x,j.x)-xe.min.x)/(Y.min.x-xe.min.x),(Math.max(xe.max.y,j.y)-xe.max.y)/(Y.max.y-xe.max.y)-(Math.min(xe.min.y,j.y)-xe.min.y)/(Y.min.y-xe.min.y)).multiplyBy(v);m.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),Kt(a._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Ne(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ft(this._panRequest),this._panRequest=Ne(this._adjustPan.bind(this,t)))},_onDrag:function(t){var a=this._marker,m=a._shadow,v=Ar(a._icon),S=a._map.layerPointToLatLng(v);m&&Kt(m,v),a._latlng=S,t.latlng=S,t.oldLatLng=this._oldLatLng,a.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ft(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ir=vn.extend({options:{icon:new qi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,a){q(this,a),this._latlng=ze(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var a=this._latlng;return this._latlng=ze(t),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=t.icon.createIcon(this._icon),v=!1;m!==this._icon&&(this._icon&&this._removeIcon(),v=!0,t.title&&(m.title=t.title),m.tagName==="IMG"&&(m.alt=t.alt||"")),ut(m,a),t.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&lt(m,"focus",this._panOnFocus,this);var S=t.icon.createShadow(this._shadow),j=!1;S!==this._shadow&&(this._removeShadow(),j=!0),S&&(ut(S,a),S.alt=""),this._shadow=S,t.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&j&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&It(this._icon,"focus",this._panOnFocus,this),Ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ft(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Kt(this._icon,t),this._shadow&&Kt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var a=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ut(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cs)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cs(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Pn(this._icon,t),this._shadow&&Pn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var a=this.options.icon.options,m=a.iconSize?Me(a.iconSize):Me(0,0),v=a.iconAnchor?Me(a.iconAnchor):Me(0,0);t.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:m.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Rl(t,a){return new Ir(t,a)}var Fr=vn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return q(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gr=Fr.extend({options:{fill:!0,radius:10},initialize:function(t,a){q(this,a),this._latlng=ze(t),this._radius=this.options.radius},setLatLng:function(t){var a=this._latlng;return this._latlng=ze(t),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var a=t&&t.radius||this._radius;return Fr.prototype.setStyle.call(this,t),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,a=this._radiusY||t,m=this._clickTolerance(),v=[t+m,a+m];this._pxBounds=new ie(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fa(t,a){return new gr(t,a)}var ho=gr.extend({initialize:function(t,a,m){if(typeof a=="number"&&(a=c({},m,{radius:a})),q(this,a),this._latlng=ze(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new et(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Fr.prototype.setStyle,_project:function(){var t=this._latlng.lng,a=this._latlng.lat,m=this._map,v=m.options.crs;if(v.distance===xt.distance){var S=Math.PI/180,j=this._mRadius/xt.R/S,Y=m.project([a+j,t]),fe=m.project([a-j,t]),xe=Y.add(fe).divideBy(2),Se=m.unproject(xe).lat,Fe=Math.acos((Math.cos(j*S)-Math.sin(a*S)*Math.sin(Se*S))/(Math.cos(a*S)*Math.cos(Se*S)))/S;(isNaN(Fe)||Fe===0)&&(Fe=j/Math.cos(Math.PI/180*a)),this._point=xe.subtract(m.getPixelOrigin()),this._radius=isNaN(Fe)?0:xe.x-m.project([Se,t-Fe]).x,this._radiusY=xe.y-Y.y}else{var it=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(it).x}this._updateBounds()}});function er(t,a,m){return new ho(t,a,m)}var jn=Fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,a){q(this,a),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var a=1/0,m=null,v=mi,S,j,Y=0,fe=this._parts.length;Y<fe;Y++)for(var xe=this._parts[Y],Se=1,Fe=xe.length;Se<Fe;Se++){S=xe[Se-1],j=xe[Se];var it=v(t,S,j,!0);it<a&&(a=it,m=v(t,S,j))}return m&&(m.distance=Math.sqrt(a)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ua(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,a){return a=a||this._defaultShape(),t=ze(t),a.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new et,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var a=[],m=Tn(t),v=0,S=t.length;v<S;v++)m?(a[v]=ze(t[v]),this._bounds.extend(a[v])):a[v]=this._convertLatLngs(t[v]);return a},_project:function(){var t=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),a=new Ce(t,t);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(t,a,m){var v=t[0]instanceof He,S=t.length,j,Y;if(v){for(Y=[],j=0;j<S;j++)Y[j]=this._map.latLngToLayerPoint(t[j]),m.extend(Y[j]);a.push(Y)}else for(j=0;j<S;j++)this._projectLatlngs(t[j],a,m)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,m,v,S,j,Y,fe,xe;for(m=0,S=0,j=this._rings.length;m<j;m++)for(xe=this._rings[m],v=0,Y=xe.length;v<Y-1;v++)fe=pi(xe[v],xe[v+1],t,v,!0),fe&&(a[S]=a[S]||[],a[S].push(fe[0]),(fe[1]!==xe[v+1]||v===Y-2)&&(a[S].push(fe[1]),S++))}},_simplifyPoints:function(){for(var t=this._parts,a=this.options.smoothFactor,m=0,v=t.length;m<v;m++)t[m]=lo(t[m],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,a){var m,v,S,j,Y,fe,xe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,j=this._parts.length;m<j;m++)for(fe=this._parts[m],v=0,Y=fe.length,S=Y-1;v<Y;S=v++)if(!(!a&&v===0)&&la(t,fe[S],fe[v])<=xe)return!0;return!1}});function jl(t,a){return new jn(t,a)}jn._flat=Un;var tr=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ka(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var a=jn.prototype._convertLatLngs.call(this,t),m=a.length;return m>=2&&a[0]instanceof He&&a[0].equals(a[m-1])&&a.pop(),a},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),Tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,a=this.options.weight,m=new Ce(a,a);if(t=new ie(t.min.subtract(m),t.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,j;v<S;v++)j=oa(this._rings[v],t,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var a=!1,m,v,S,j,Y,fe,xe,Se;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(j=0,xe=this._parts.length;j<xe;j++)for(m=this._parts[j],Y=0,Se=m.length,fe=Se-1;Y<Se;fe=Y++)v=m[Y],S=m[fe],v.y>t.y!=S.y>t.y&&t.x<(S.x-v.x)*(t.y-v.y)/(S.y-v.y)+v.x&&(a=!a);return a||jn.prototype._containsPoint.call(this,t,!0)}});function Es(t,a){return new tr(t,a)}var _r=Qn.extend({initialize:function(t,a){q(this,a),this._layers={},t&&this.addData(t)},addData:function(t){var a=he(t)?t:t.features,m,v,S;if(a){for(m=0,v=a.length;m<v;m++)S=a[m],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var j=this.options;if(j.filter&&!j.filter(t))return this;var Y=Wi(t,j);return Y?(Y.feature=po(t),Y.defaultOptions=Y.options,this.resetStyle(Y),j.onEachFeature&&j.onEachFeature(t,Y),this.addLayer(Y)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(a){this._setLayerStyle(a,t)},this)},_setLayerStyle:function(t,a){t.setStyle&&(typeof a=="function"&&(a=a(t.feature)),t.setStyle(a))}});function Wi(t,a){var m=t.type==="Feature"?t.geometry:t,v=m?m.coordinates:null,S=[],j=a&&a.pointToLayer,Y=a&&a.coordsToLatLng||Ms,fe,xe,Se,Fe;if(!v&&!m)return null;switch(m.type){case"Point":return fe=Y(v),co(j,t,fe,a);case"MultiPoint":for(Se=0,Fe=v.length;Se<Fe;Se++)fe=Y(v[Se]),S.push(co(j,t,fe,a));return new Qn(S);case"LineString":case"MultiLineString":return xe=Ps(v,m.type==="LineString"?0:1,Y),new jn(xe,a);case"Polygon":case"MultiPolygon":return xe=Ps(v,m.type==="Polygon"?1:2,Y),new tr(xe,a);case"GeometryCollection":for(Se=0,Fe=m.geometries.length;Se<Fe;Se++){var it=Wi({geometry:m.geometries[Se],type:"Feature",properties:t.properties},a);it&&S.push(it)}return new Qn(S);case"FeatureCollection":for(Se=0,Fe=m.features.length;Se<Fe;Se++){var gt=Wi(m.features[Se],a);gt&&S.push(gt)}return new Qn(S);default:throw new Error("Invalid GeoJSON object.")}}function co(t,a,m,v){return t?t(a,m):new Ir(m,v&&v.markersInheritOptions&&v)}function Ms(t){return new He(t[1],t[0],t[2])}function Ps(t,a,m){for(var v=[],S=0,j=t.length,Y;S<j;S++)Y=a?Ps(t[S],a-1,m):(m||Ms)(t[S]),v.push(Y);return v}function Ss(t,a){return t=ze(t),t.alt!==void 0?[$(t.lng,a),$(t.lat,a),$(t.alt,a)]:[$(t.lng,a),$(t.lat,a)]}function fo(t,a,m,v){for(var S=[],j=0,Y=t.length;j<Y;j++)S.push(a?fo(t[j],Tn(t[j])?0:a-1,m,v):Ss(t[j],v));return!a&&m&&S.length>0&&S.push(S[0].slice()),S}function Ki(t,a){return t.feature?c({},t.feature,{geometry:a}):po(a)}function po(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var mo={toGeoJSON:function(t){return Ki(this,{type:"Point",coordinates:Ss(this.getLatLng(),t)})}};Ir.include(mo),ho.include(mo),gr.include(mo),jn.include({toGeoJSON:function(t){var a=!Tn(this._latlngs),m=fo(this._latlngs,a?1:0,!1,t);return Ki(this,{type:(a?"Multi":"")+"LineString",coordinates:m})}}),tr.include({toGeoJSON:function(t){var a=!Tn(this._latlngs),m=a&&!Tn(this._latlngs[0]),v=fo(this._latlngs,m?2:a?1:0,!0,t);return a||(v=[v]),Ki(this,{type:(m?"Multi":"")+"Polygon",coordinates:v})}}),qr.include({toMultiPoint:function(t){var a=[];return this.eachLayer(function(m){a.push(m.toGeoJSON(t).geometry.coordinates)}),Ki(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(t){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(t);var m=a==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var j=S.toGeoJSON(t);if(m)v.push(j.geometry);else{var Y=po(j);Y.type==="FeatureCollection"?v.push.apply(v,Y.features):v.push(Y)}}}),m?Ki(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function go(t,a){return new _r(t,a)}var Gn=go,yr=vn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,a,m){this._url=t,this._bounds=Xe(a),q(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ut(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&zi(this._image),this},bringToBack:function(){return this._map&&cr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Xe(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",a=this._image=t?this._url:pt("img");if(ut(a,"leaflet-image-layer"),this._zoomAnimated&&ut(a,"leaflet-zoom-animated"),this.options.className&&ut(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onload=y(this.fire,this,"load"),a.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(t){var a=this._map.getZoomScale(t.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Kn(this._image,m,a)},_reset:function(){var t=this._image,a=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=a.getSize();Kt(t,a.min),t.style.width=m.x+"px",t.style.height=m.y+"px"},_updateOpacity:function(){Pn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Qa=function(t,a,m){return new yr(t,a,m)},Ji=yr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",a=this._image=t?this._url:pt("video");if(ut(a,"leaflet-image-layer"),this._zoomAnimated&&ut(a,"leaflet-zoom-animated"),this.options.className&&ut(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onloadeddata=y(this.fire,this,"load"),t){for(var m=a.getElementsByTagName("source"),v=[],S=0;S<m.length;S++)v.push(m[S].src);this._url=m.length>0?v:[a.src];return}he(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var Y=pt("source");Y.src=this._url[j],a.appendChild(Y)}}});function pa(t,a,m){return new Ji(t,a,m)}var ma=yr.extend({_initImage:function(){var t=this._image=this._url;ut(t,"leaflet-image-layer"),this._zoomAnimated&&ut(t,"leaflet-zoom-animated"),this.options.className&&ut(t,this.options.className),t.onselectstart=T,t.onmousemove=T}});function ga(t,a,m){return new ma(t,a,m)}var vr=vn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,a){t&&(t instanceof He||he(t))?(this._latlng=ze(t),q(this,a)):(q(this,t),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Pn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Pn(this._container,1),this.bringToFront(),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Pn(this._container,0),this._removeTimeout=setTimeout(y(Ft,void 0,this._container),200)):Ft(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ze(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zi(this._container),this},bringToBack:function(){return this._map&&cr(this._container),this},_prepareOpen:function(t){var a=this._source;if(!a._map)return!1;if(a instanceof Qn){a=null;var m=this._source._layers;for(var v in m)if(m[v]._map){a=m[v];break}if(!a)return!1;this._source=a}if(!t)if(a.getCenter)t=a.getCenter();else if(a.getLatLng)t=a.getLatLng();else if(a.getBounds)t=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")t.innerHTML=a;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),a=Me(this.options.offset),m=this._getAnchor();this._zoomAnimated?Kt(this._container,t.add(m)):a=a.add(t).add(m);var v=this._containerBottom=-a.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});Lt.include({_initOverlay:function(t,a,m,v){var S=a;return S instanceof t||(S=new t(v).setContent(a)),m&&S.setLatLng(m),S}}),vn.include({_initOverlay:function(t,a,m,v){var S=m;return S instanceof t?(q(S,v),S._source=this):(S=a&&!v?a:new t(v,this),S.setContent(m)),S}});var Wr=vr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,vr.prototype.openOn.call(this,t)},onAdd:function(t){vr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fr||this._source.on("preclick",fr))},onRemove:function(t){vr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fr||this._source.off("preclick",fr))},getEvents:function(){var t=vr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",a=this._container=pt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=pt("div",t+"-content-wrapper",a);if(this._contentNode=pt("div",t+"-content",m),ws(a),so(this._contentNode),lt(a,"contextmenu",fr),this._tipContainer=pt("div",t+"-tip-container",a),this._tip=pt("div",t+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=pt("a",t+"-close-button",a);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',lt(v,"click",function(S){Wt(S),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,a=t.style;a.width="",a.whiteSpace="nowrap";var m=t.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),a.width=m+1+"px",a.whiteSpace="",a.height="";var v=t.offsetHeight,S=this.options.maxHeight,j="leaflet-popup-scrolled";S&&v>S?(a.height=S+"px",ut(t,j)):Nt(t,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var a=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),m=this._getAnchor();Kt(this._container,a.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,a=parseInt(Gr(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+a,v=this._containerWidth,S=new Ce(this._containerLeft,-m-this._containerBottom);S._add(Ar(this._container));var j=t.layerPointToContainerPoint(S),Y=Me(this.options.autoPanPadding),fe=Me(this.options.autoPanPaddingTopLeft||Y),xe=Me(this.options.autoPanPaddingBottomRight||Y),Se=t.getSize(),Fe=0,it=0;j.x+v+xe.x>Se.x&&(Fe=j.x+v-Se.x+xe.x),j.x-Fe-fe.x<0&&(Fe=j.x-fe.x),j.y+m+xe.y>Se.y&&(it=j.y+m-Se.y+xe.y),j.y-it-fe.y<0&&(it=j.y-fe.y),(Fe||it)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Fe,it]))}},_getAnchor:function(){return Me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Yi=function(t,a){return new Wr(t,a)};Lt.mergeOptions({closePopupOnClick:!0}),Lt.include({openPopup:function(t,a,m){return this._initOverlay(Wr,t,a,m).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),vn.include({bindPopup:function(t,a){return this._popup=this._initOverlay(Wr,this._popup,t,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Yn(t);var a=t.layer||t.target;if(this._popup._source===a&&!(a instanceof Fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=a,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Xi=vr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){vr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){vr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=vr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",a=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+b(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var a,m,v=this._map,S=this._container,j=v.latLngToContainerPoint(v.getCenter()),Y=v.layerPointToContainerPoint(t),fe=this.options.direction,xe=S.offsetWidth,Se=S.offsetHeight,Fe=Me(this.options.offset),it=this._getAnchor();fe==="top"?(a=xe/2,m=Se):fe==="bottom"?(a=xe/2,m=0):fe==="center"?(a=xe/2,m=Se/2):fe==="right"?(a=0,m=Se/2):fe==="left"?(a=xe,m=Se/2):Y.x<j.x?(fe="right",a=0,m=Se/2):(fe="left",a=xe+(Fe.x+it.x)*2,m=Se/2),t=t.subtract(Me(a,m,!0)).add(Fe).add(it),Nt(S,"leaflet-tooltip-right"),Nt(S,"leaflet-tooltip-left"),Nt(S,"leaflet-tooltip-top"),Nt(S,"leaflet-tooltip-bottom"),ut(S,"leaflet-tooltip-"+fe),Kt(S,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Pn(this._container,t)},_animateZoom:function(t){var a=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(a)},_getAnchor:function(){return Me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bs=function(t,a){return new Xi(t,a)};Lt.include({openTooltip:function(t,a,m){return this._initOverlay(Xi,t,a,m).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),vn.include({bindTooltip:function(t,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xi,this._tooltip,t,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var a=t?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[a](m),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var a=typeof t.getElement=="function"&&t.getElement();a&&(lt(a,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),lt(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var a=typeof t.getElement=="function"&&t.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var a=t.latlng,m,v;this._tooltip.options.sticky&&t.originalEvent&&(m=this._map.mouseEventToContainerPoint(t.originalEvent),v=this._map.containerPointToLayerPoint(m),a=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(a)}});var _o=gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var a=t&&t.tagName==="DIV"?t:document.createElement("div"),m=this.options;if(m.html instanceof Element?(gs(a),a.appendChild(m.html)):a.innerHTML=m.html!==!1?m.html:"",m.bgPos){var v=Me(m.bgPos);a.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function el(t){return new _o(t)}gi.Default=qi;var Kr=vn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){q(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ft(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(cr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Ce?t:new Ce(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var a=this.getPane().children,m=-t(-1/0,1/0),v=0,S=a.length,j;v<S;v++)j=a[v].style.zIndex,a[v]!==this._container&&j&&(m=t(m,+j));isFinite(m)&&(this.options.zIndex=m+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ye.ielt9){Pn(this._container,this.options.opacity);var t=+new Date,a=!1,m=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var j=Math.min(1,(t-S.loaded)/200);Pn(S.el,j),j<1?a=!0:(S.active?m=!0:this._onOpaqueTile(S),S.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),a&&(ft(this._fadeFrame),this._fadeFrame=Ne(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,a=this.options.maxZoom;if(t!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===t?(this._levels[m].el.style.zIndex=a-Math.abs(t-m),this._onUpdateLevel(m)):(Ft(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var v=this._levels[t],S=this._map;return v||(v=this._levels[t]={},v.el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=a,v.origin=S.project(S.unproject(S.getPixelOrigin()),t).round(),v.zoom=t,this._setZoomTransform(v,S.getCenter(),S.getZoom()),T(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var t,a,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)a=this._tiles[t],a.retain=a.current;for(t in this._tiles)if(a=this._tiles[t],a.current&&!a.active){var v=a.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var a in this._tiles)this._tiles[a].coords.z===t&&this._removeTile(a)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ft(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,a,m,v){var S=Math.floor(t/2),j=Math.floor(a/2),Y=m-1,fe=new Ce(+S,+j);fe.z=+Y;var xe=this._tileCoordsToKey(fe),Se=this._tiles[xe];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),Y>v?this._retainParent(S,j,Y,v):!1)},_retainChildren:function(t,a,m,v){for(var S=2*t;S<2*t+2;S++)for(var j=2*a;j<2*a+2;j++){var Y=new Ce(S,j);Y.z=m+1;var fe=this._tileCoordsToKey(Y),xe=this._tiles[fe];if(xe&&xe.active){xe.retain=!0;continue}else xe&&xe.loaded&&(xe.retain=!0);m+1<v&&this._retainChildren(S,j,m+1,v)}},_resetView:function(t){var a=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var a=this.options;return a.minNativeZoom!==void 0&&t<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<t?a.maxNativeZoom:t},_setView:function(t,a,m,v){var S=Math.round(a);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var j=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||j)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(t),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(t,a)},_setZoomTransforms:function(t,a){for(var m in this._levels)this._setZoomTransform(this._levels[m],t,a)},_setZoomTransform:function(t,a,m){var v=this._map.getZoomScale(m,t.zoom),S=t.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(a,m)).round();Ye.any3d?Kn(t.el,S,v):Kt(t.el,S)},_resetGrid:function(){var t=this._map,a=t.options.crs,m=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,a.wrapLng[0]],v).x/m.x),Math.ceil(t.project([0,a.wrapLng[1]],v).x/m.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([a.wrapLat[0],0],v).y/m.x),Math.ceil(t.project([a.wrapLat[1],0],v).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var a=this._map,m=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),v=a.getZoomScale(m,this._tileZoom),S=a.project(t,this._tileZoom).floor(),j=a.getSize().divideBy(v*2);return new ie(S.subtract(j),S.add(j))},_update:function(t){var a=this._map;if(a){var m=this._clampZoom(a.getZoom());if(t===void 0&&(t=a.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(t),S=this._pxBoundsToTileRange(v),j=S.getCenter(),Y=[],fe=this.options.keepBuffer,xe=new ie(S.getBottomLeft().subtract([fe,-fe]),S.getTopRight().add([fe,-fe]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var Fe=this._tiles[Se].coords;(Fe.z!==this._tileZoom||!xe.contains(new Ce(Fe.x,Fe.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(t,m);return}for(var it=S.min.y;it<=S.max.y;it++)for(var gt=S.min.x;gt<=S.max.x;gt++){var un=new Ce(gt,it);if(un.z=this._tileZoom,!!this._isValidTile(un)){var en=this._tiles[this._tileCoordsToKey(un)];en?en.current=!0:Y.push(un)}}if(Y.sort(function(Gt,Lr){return Gt.distanceTo(j)-Lr.distanceTo(j)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wn=document.createDocumentFragment();for(gt=0;gt<Y.length;gt++)this._addTile(Y[gt],wn);this._level.el.appendChild(wn)}}}},_isValidTile:function(t){var a=this._map.options.crs;if(!a.infinite){var m=this._globalTileRange;if(!a.wrapLng&&(t.x<m.min.x||t.x>m.max.x)||!a.wrapLat&&(t.y<m.min.y||t.y>m.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(t);return Xe(this.options.bounds).overlaps(v)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var a=this._map,m=this.getTileSize(),v=t.scaleBy(m),S=v.add(m),j=a.unproject(v,t.z),Y=a.unproject(S,t.z);return[j,Y]},_tileCoordsToBounds:function(t){var a=this._tileCoordsToNwSe(t),m=new et(a[0],a[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var a=t.split(":"),m=new Ce(+a[0],+a[1]);return m.z=+a[2],m},_removeTile:function(t){var a=this._tiles[t];a&&(Ft(a.el),delete this._tiles[t],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ut(t,"leaflet-tile");var a=this.getTileSize();t.style.width=a.x+"px",t.style.height=a.y+"px",t.onselectstart=T,t.onmousemove=T,Ye.ielt9&&this.options.opacity<1&&Pn(t,this.options.opacity)},_addTile:function(t,a){var m=this._getTilePos(t),v=this._tileCoordsToKey(t),S=this.createTile(this._wrapCoords(t),y(this._tileReady,this,t));this._initTile(S),this.createTile.length<2&&Ne(y(this._tileReady,this,t,null,S)),Kt(S,m),this._tiles[v]={el:S,coords:t,current:!0},a.appendChild(S),this.fire("tileloadstart",{tile:S,coords:t})},_tileReady:function(t,a,m){a&&this.fire("tileerror",{error:a,tile:m,coords:t});var v=this._tileCoordsToKey(t);m=this._tiles[v],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Pn(m.el,0),ft(this._fadeFrame),this._fadeFrame=Ne(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),a||(ut(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ye.ielt9||!this._map._fadeAnimated?Ne(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var a=new Ce(this._wrapX?B(t.x,this._wrapX):t.x,this._wrapY?B(t.y,this._wrapY):t.y);return a.z=t.z,a},_pxBoundsToTileRange:function(t){var a=this.getTileSize();return new ie(t.min.unscaleBy(a).floor(),t.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Qi(t){return new Kr(t)}var Jr=Kr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,a){this._url=t,a=q(this,a),a.detectRetina&&Ye.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,a){return this._url===t&&a===void 0&&(a=!0),this._url=t,a||this.redraw(),this},createTile:function(t,a){var m=document.createElement("img");return lt(m,"load",y(this._tileOnLoad,this,a,m)),lt(m,"error",y(this._tileOnError,this,a,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(t),m},getTileUrl:function(t){var a={r:Ye.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-t.y;this.options.tms&&(a.y=m),a["-y"]=m}return be(this._url,c(a,this.options))},_tileOnLoad:function(t,a){Ye.ielt9?setTimeout(y(t,this,null,a),0):t(null,a)},_tileOnError:function(t,a,m){var v=this.options.errorTileUrl;v&&a.getAttribute("src")!==v&&(a.src=v),t(m,a)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,a=this.options.maxZoom,m=this.options.zoomReverse,v=this.options.zoomOffset;return m&&(t=a-t),t+v},_getSubdomain:function(t){var a=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var t,a;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(a=this._tiles[t].el,a.onload=T,a.onerror=T,!a.complete)){a.src=Re;var m=this._tiles[t].coords;Ft(a),delete this._tiles[t],this.fire("tileabort",{tile:a,coords:m})}},_removeTile:function(t){var a=this._tiles[t];if(a)return a.el.setAttribute("src",Re),Kr.prototype._removeTile.call(this,t)},_tileReady:function(t,a,m){if(!(!this._map||m&&m.getAttribute("src")===Re))return Kr.prototype._tileReady.call(this,t,a,m)}});function yo(t,a){return new Jr(t,a)}var _i=Jr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,a){this._url=t;var m=c({},this.defaultWmsParams);for(var v in a)v in this.options||(m[v]=a[v]);a=q(this,a);var S=a.detectRetina&&Ye.retina?2:1,j=this.getTileSize();m.width=j.x*S,m.height=j.y*S,this.wmsParams=m},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Jr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var a=this._tileCoordsToNwSe(t),m=this._crs,v=Ee(m.project(a[0]),m.project(a[1])),S=v.min,j=v.max,Y=(this._wmsVersion>=1.3&&this._crs===ca?[S.y,S.x,j.y,j.x]:[S.x,S.y,j.x,j.y]).join(","),fe=Jr.prototype.getTileUrl.call(this,t);return fe+J(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(t,a){return c(this.wmsParams,t),a||this.redraw(),this}});function tl(t,a){return new _i(t,a)}Jr.WMS=_i,yo.wms=tl;var wr=vn.extend({options:{padding:.1},initialize:function(t){q(this,t),b(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ut(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,a){var m=this._map.getZoomScale(a,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,a),j=v.multiplyBy(-m).add(S).subtract(this._map._getNewPixelOrigin(t,a));Ye.any3d?Kn(this._container,j,m):Kt(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,a=this._map.getSize(),m=this._map.containerPointToLayerPoint(a.multiplyBy(-t)).round();this._bounds=new ie(m,m.add(a.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vo=wr.extend({options:{tolerance:0},getEvents:function(){var t=wr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");lt(t,"mousemove",this._onMouseMove,this),lt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),lt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ft(this._redrawRequest),delete this._ctx,Ft(this._container),It(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var a in this._layers)t=this._layers[a],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wr.prototype._update.call(this);var t=this._bounds,a=this._container,m=t.getSize(),v=Ye.retina?2:1;Kt(a,t.min),a.width=v*m.x,a.height=v*m.y,a.style.width=m.x+"px",a.style.height=m.y+"px",Ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){wr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[b(t)]=t;var a=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var a=t._order,m=a.next,v=a.prev;m?m.prev=v:this._drawLast=v,v?v.next=m:this._drawFirst=m,delete t._order,delete this._layers[b(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var a=t.options.dashArray.split(/[, ]+/),m=[],v,S;for(S=0;S<a.length;S++){if(v=Number(a[S]),isNaN(v))return;m.push(v)}t.options._dashArray=m}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Ne(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var a=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(t._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(t._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var a=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,a=this._redrawBounds;if(this._ctx.save(),a){var m=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)t=v.layer,(!a||t._pxBounds&&t._pxBounds.intersects(a))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,a){if(this._drawing){var m,v,S,j,Y=t._parts,fe=Y.length,xe=this._ctx;if(fe){for(xe.beginPath(),m=0;m<fe;m++){for(v=0,S=Y[m].length;v<S;v++)j=Y[m][v],xe[v?"lineTo":"moveTo"](j.x,j.y);a&&xe.closePath()}this._fillStroke(xe,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var a=t._point,m=this._ctx,v=Math.max(Math.round(t._radius),1),S=(Math.max(Math.round(t._radiusY),1)||v)/v;S!==1&&(m.save(),m.scale(1,S)),m.beginPath(),m.arc(a.x,a.y/S,v,0,Math.PI*2,!1),S!==1&&m.restore(),this._fillStroke(m,t)}},_fillStroke:function(t,a){var m=a.options;m.fill&&(t.globalAlpha=m.fillOpacity,t.fillStyle=m.fillColor||m.color,t.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(t.setLineDash&&t.setLineDash(a.options&&a.options._dashArray||[]),t.globalAlpha=m.opacity,t.lineWidth=m.weight,t.strokeStyle=m.color,t.lineCap=m.lineCap,t.lineJoin=m.lineJoin,t.stroke())},_onClick:function(t){for(var a=this._map.mouseEventToLayerPoint(t),m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(a)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(m))&&(v=m);this._fireEvent(v?[v]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,a)}},_handleMouseOut:function(t){var a=this._hoveredLayer;a&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,a){if(!this._mouseHoverThrottled){for(var m,v,S=this._drawFirst;S;S=S.next)m=S.layer,m.options.interactive&&m._containsPoint(a)&&(v=m);v!==this._hoveredLayer&&(this._handleMouseOut(t),v&&(ut(this._container,"leaflet-interactive"),this._fireEvent([v],t,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,a,m){this._map._fireDOMEvent(a,m||a.type,t)},_bringToFront:function(t){var a=t._order;if(a){var m=a.next,v=a.prev;if(m)m.prev=v;else return;v?v.next=m:m&&(this._drawFirst=m),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(t)}},_bringToBack:function(t){var a=t._order;if(a){var m=a.next,v=a.prev;if(v)v.next=m;else return;m?m.prev=v:v&&(this._drawLast=v),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(t)}}});function Ts(t){return Ye.canvas?new vo(t):null}var es=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),nl={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var a=t._container=es("shape");ut(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",t._path=es("path"),a.appendChild(t._path),this._updateStyle(t),this._layers[b(t)]=t},_addPath:function(t){var a=t._container;this._container.appendChild(a),t.options.interactive&&t.addInteractiveTarget(a)},_removePath:function(t){var a=t._container;Ft(a),t.removeInteractiveTarget(a),delete this._layers[b(t)]},_updateStyle:function(t){var a=t._stroke,m=t._fill,v=t.options,S=t._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(a||(a=t._stroke=es("stroke")),S.appendChild(a),a.weight=v.weight+"px",a.color=v.color,a.opacity=v.opacity,v.dashArray?a.dashStyle=he(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=v.lineCap.replace("butt","flat"),a.joinstyle=v.lineJoin):a&&(S.removeChild(a),t._stroke=null),v.fill?(m||(m=t._fill=es("fill")),S.appendChild(m),m.color=v.fillColor||v.color,m.opacity=v.fillOpacity):m&&(S.removeChild(m),t._fill=null)},_updateCircle:function(t){var a=t._point.round(),m=Math.round(t._radius),v=Math.round(t._radiusY||m);this._setPath(t,t._empty()?"M0 0":"AL "+a.x+","+a.y+" "+m+","+v+" 0,"+65535*360)},_setPath:function(t,a){t._path.v=a},_bringToFront:function(t){zi(t._container)},_bringToBack:function(t){cr(t._container)}},In=Ye.vml?es:Fo,Qt=wr.extend({_initContainer:function(){this._container=In("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=In("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ft(this._container),It(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wr.prototype._update.call(this);var t=this._bounds,a=t.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,m.setAttribute("width",a.x),m.setAttribute("height",a.y)),Kt(m,t.min),m.setAttribute("viewBox",[t.min.x,t.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(t){var a=t._path=In("path");t.options.className&&ut(a,t.options.className),t.options.interactive&&ut(a,"leaflet-interactive"),this._updateStyle(t),this._layers[b(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ft(t._path),t.removeInteractiveTarget(t._path),delete this._layers[b(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var a=t._path,m=t.options;a&&(m.stroke?(a.setAttribute("stroke",m.color),a.setAttribute("stroke-opacity",m.opacity),a.setAttribute("stroke-width",m.weight),a.setAttribute("stroke-linecap",m.lineCap),a.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?a.setAttribute("stroke-dasharray",m.dashArray):a.removeAttribute("stroke-dasharray"),m.dashOffset?a.setAttribute("stroke-dashoffset",m.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),m.fill?(a.setAttribute("fill",m.fillColor||m.color),a.setAttribute("fill-opacity",m.fillOpacity),a.setAttribute("fill-rule",m.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(t,a){this._setPath(t,No(t._parts,a))},_updateCircle:function(t){var a=t._point,m=Math.max(Math.round(t._radius),1),v=Math.max(Math.round(t._radiusY),1)||m,S="a"+m+","+v+" 0 1,0 ",j=t._empty()?"M0 0":"M"+(a.x-m)+","+a.y+S+m*2+",0 "+S+-m*2+",0 ";this._setPath(t,j)},_setPath:function(t,a){t._path.setAttribute("d",a)},_bringToFront:function(t){zi(t._path)},_bringToBack:function(t){cr(t._path)}});Ye.vml&&Qt.include(nl);function an(t){return Ye.svg||Ye.vml?new Qt(t):null}Lt.include({getRenderer:function(t){var a=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var a=this._paneRenderers[t];return a===void 0&&(a=this._createRenderer({pane:t}),this._paneRenderers[t]=a),a},_createRenderer:function(t){return this.options.preferCanvas&&Ts(t)||an(t)}});var _a=tr.extend({initialize:function(t,a){tr.prototype.initialize.call(this,this._boundsToLatLngs(t),a)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Xe(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function nr(t,a){return new _a(t,a)}Qt.create=In,Qt.pointsToPath=No,_r.geometryToLayer=Wi,_r.coordsToLatLng=Ms,_r.coordsToLatLngs=Ps,_r.latLngToCoords=Ss,_r.latLngsToCoords=fo,_r.getFeature=Ki,_r.asFeature=po,Lt.mergeOptions({boxZoom:!0});var st=sn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){It(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ct(),ro(),this._startPoint=this._map.mouseEventToContainerPoint(t),lt(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),ut(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var a=new ie(this._point,this._startPoint),m=a.getSize();Kt(this._box,a.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Ft(this._box),Nt(this._container,"leaflet-crosshair")),Gi(),io(),It(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var a=new et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Lt.addInitHook("addHandler","boxZoom",st),Lt.mergeOptions({doubleClickZoom:!0});var wo=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var a=this._map,m=a.getZoom(),v=a.options.zoomDelta,S=t.originalEvent.shiftKey?m-v:m+v;a.options.doubleClickZoom==="center"?a.setZoom(S):a.setZoomAround(t.containerPoint,S)}});Lt.addInitHook("addHandler","doubleClickZoom",wo),Lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var As=sn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ut(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Xe(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var a=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(a),this._prunePositions(a)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,a){return t-(t-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;t.x<a.min.x&&(t.x=this._viscousLimit(t.x,a.min.x)),t.y<a.min.y&&(t.y=this._viscousLimit(t.y,a.min.y)),t.x>a.max.x&&(t.x=this._viscousLimit(t.x,a.max.x)),t.y>a.max.y&&(t.y=this._viscousLimit(t.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,a=Math.round(t/2),m=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-a+m)%t+a-m,j=(v+a+m)%t-a-m,Y=Math.abs(S+m)<Math.abs(j+m)?S:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(t){var a=this._map,m=a.options,v=!m.inertia||t.noInertia||this._times.length<2;if(a.fire("dragend",t),v)a.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,Y=m.easeLinearity,fe=S.multiplyBy(Y/j),xe=fe.distanceTo([0,0]),Se=Math.min(m.inertiaMaxSpeed,xe),Fe=fe.multiplyBy(Se/xe),it=Se/(m.inertiaDeceleration*Y),gt=Fe.multiplyBy(-it/2).round();!gt.x&&!gt.y?a.fire("moveend"):(gt=a._limitOffset(gt,a.options.maxBounds),Ne(function(){a.panBy(gt,{duration:it,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});Lt.addInitHook("addHandler","dragging",As),Lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xr=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),lt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),It(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,a=document.documentElement,m=t.scrollTop||a.scrollTop,v=t.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(v,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var a=this._panKeys={},m=this.keyCodes,v,S;for(v=0,S=m.left.length;v<S;v++)a[m.left[v]]=[-1*t,0];for(v=0,S=m.right.length;v<S;v++)a[m.right[v]]=[t,0];for(v=0,S=m.down.length;v<S;v++)a[m.down[v]]=[0,t];for(v=0,S=m.up.length;v<S;v++)a[m.up[v]]=[0,-1*t]},_setZoomDelta:function(t){var a=this._zoomKeys={},m=this.keyCodes,v,S;for(v=0,S=m.zoomIn.length;v<S;v++)a[m.zoomIn[v]]=t;for(v=0,S=m.zoomOut.length;v<S;v++)a[m.zoomOut[v]]=-t},_addHooks:function(){lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){It(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var a=t.keyCode,m=this._map,v;if(a in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(v=this._panKeys[a],t.shiftKey&&(v=Me(v).multiplyBy(3)),m.options.maxBounds&&(v=m._limitOffset(Me(v),m.options.maxBounds)),m.options.worldCopyJump){var S=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(v)));m.panTo(S)}else m.panBy(v)}else if(a in this._zoomKeys)m.setZoom(m.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Yn(t)}}});Lt.addInitHook("addHandler","keyboard",xr),Lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ct=sn.extend({addHooks:function(){lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){It(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var a=Za(t),m=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var v=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),v),Yn(t)},_performZoom:function(){var t=this._map,a=t.getZoom(),m=this._map.options.zoomSnap||0;t._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,j=m?Math.ceil(S/m)*m:S,Y=t._limitZoom(a+(this._delta>0?j:-j))-a;this._delta=0,this._startTime=null,Y&&(t.options.scrollWheelZoom==="center"?t.setZoom(a+Y):t.setZoomAround(this._lastMousePos,a+Y))}});Lt.addInitHook("addHandler","scrollWheelZoom",ct);var xo=600;Lt.mergeOptions({tapHold:Ye.touchNative&&Ye.safari&&Ye.mobile,tapTolerance:15});var pn=sn.extend({addHooks:function(){lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){It(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var a=t.touches[0];this._startPos=this._newPos=new Ce(a.clientX,a.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&(lt(document,"touchend",Wt),lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),xo),lt(document,"touchend touchcancel contextmenu",this._cancel,this),lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){It(document,"touchend",Wt),It(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),It(document,"touchend touchcancel contextmenu",this._cancel,this),It(document,"touchmove",this._onMove,this)},_onMove:function(t){var a=t.touches[0];this._newPos=new Ce(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,a){var m=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});m._simulated=!0,a.target.dispatchEvent(m)}});Lt.addInitHook("addHandler","tapHold",pn),Lt.mergeOptions({touchZoom:Ye.touch,bounceAtZoomLimits:!0});var ln=sn.extend({addHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),It(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var a=this._map;if(!(!t.touches||t.touches.length!==2||a._animatingZoom||this._zooming)){var m=a.mouseEventToContainerPoint(t.touches[0]),v=a.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(m.add(v)._divideBy(2))),this._startDist=m.distanceTo(v),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),lt(document,"touchmove",this._onTouchMove,this),lt(document,"touchend touchcancel",this._onTouchEnd,this),Wt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var a=this._map,m=a.mouseEventToContainerPoint(t.touches[0]),v=a.mouseEventToContainerPoint(t.touches[1]),S=m.distanceTo(v)/this._startDist;if(this._zoom=a.getScaleZoom(S,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&S<1||this._zoom>a.getMaxZoom()&&S>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var j=m._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&j.x===0&&j.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),ft(this._animRequest);var Y=y(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ne(Y,this,!0),Wt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ft(this._animRequest),It(document,"touchmove",this._onTouchMove,this),It(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Lt.addInitHook("addHandler","touchZoom",ln),Lt.BoxZoom=st,Lt.DoubleClickZoom=wo,Lt.Drag=As,Lt.Keyboard=xr,Lt.ScrollWheelZoom=ct,Lt.TapHold=pn,Lt.TouchZoom=ln,i.Bounds=ie,i.Browser=Ye,i.CRS=kt,i.Canvas=vo,i.Circle=ho,i.CircleMarker=gr,i.Class=wt,i.Control=ht,i.DivIcon=_o,i.DivOverlay=vr,i.DomEvent=di,i.DomUtil=vs,i.Draggable=Xn,i.Evented=Dt,i.FeatureGroup=Qn,i.GeoJSON=_r,i.GridLayer=Kr,i.Handler=sn,i.Icon=gi,i.ImageOverlay=yr,i.LatLng=He,i.LatLngBounds=et,i.Layer=vn,i.LayerGroup=qr,i.LineUtil=ks,i.Map=Lt,i.Marker=Ir,i.Mixin=sa,i.Path=Fr,i.Point=Ce,i.PolyUtil=Al,i.Polygon=tr,i.Polyline=jn,i.Popup=Wr,i.PosAnimation=oo,i.Projection=mr,i.Rectangle=_a,i.Renderer=wr,i.SVG=Qt,i.SVGOverlay=ma,i.TileLayer=Jr,i.Tooltip=Xi,i.Transformation=Bi,i.Util=Mt,i.VideoOverlay=Ji,i.bind=y,i.bounds=Ee,i.canvas=Ts,i.circle=er,i.circleMarker=fa,i.control=pr,i.divIcon=el,i.extend=c,i.featureGroup=Ya,i.geoJSON=go,i.geoJson=Gn,i.gridLayer=Qi,i.icon=Xa,i.imageOverlay=Qa,i.latLng=ze,i.latLngBounds=Xe,i.layerGroup=bs,i.map=Rr,i.marker=Rl,i.point=Me,i.polygon=Es,i.polyline=jl,i.popup=Yi,i.rectangle=nr,i.setOptions=q,i.stamp=b,i.svg=an,i.svgOverlay=ga,i.tileLayer=yo,i.tooltip=Bs,i.transformation=Ti,i.version=h,i.videoOverlay=pa;var Yr=window.L;i.noConflict=function(){return window.L=Yr,this},window.L=i}))})(su,su.exports)),su.exports}var Oa=Vp();const $s=lh(Oa);function $c(d,o,i){return Object.freeze({instance:d,context:o,container:i})}function Gc(d,o){return o==null?function(h,c){const p=ae.useRef();return p.current||(p.current=d(h,c)),p}:function(h,c){const p=ae.useRef();p.current||(p.current=d(h,c));const y=ae.useRef(h),{instance:k}=p.current;return ae.useEffect(function(){y.current!==h&&(o(k,h,y.current),y.current=h)},[k,h,c]),p}}function Ey(d,o){ae.useEffect(function(){return(o.layerContainer??o.map).addLayer(d.instance),function(){o.layerContainer?.removeLayer(d.instance),o.map.removeLayer(d.instance)}},[o,d])}function My(d){return function(i){const h=Uc(),c=d(Gp(i,h),h);return wy(h.map,i.attribution),by(c.current,i.eventHandlers),Ey(c.current,h),c}}function Hp(d){function o(c,p){return $c(d(c),p)}const i=Gc(o),h=$p(i);return Up(h)}function Py(d,o){const i=Gc(d,o),h=My(i);return Up(h)}function Sy(d,o,i){const{opacity:h,zIndex:c}=o;h!=null&&h!==i.opacity&&d.setOpacity(h),c!=null&&c!==i.zIndex&&d.setZIndex(c)}const By=Gc(function({children:o,...i},h){const c=new Oa.Control.Layers(void 0,void 0,i);return $c(c,Np(h,{layersControl:c}))},function(o,i,h){i.collapsed!==h.collapsed&&(i.collapsed===!0?o.collapse():o.expand())}),Ty=$p(By),hu=ky(Ty);function Zp(d){return function(i){const h=Uc(),c=ae.useRef(i),[p,y]=ae.useState(null),{layersControl:k,map:b}=h,M=ae.useCallback($=>{k!=null&&(c.current.checked&&b.addLayer($),d(k,$,c.current.name),y($))},[k,b]),B=ae.useCallback($=>{k?.removeLayer($),y(null)},[k]),T=ae.useMemo(()=>Np(h,{layerContainer:{addLayer:M,removeLayer:B}}),[h,M,B]);return ae.useEffect(()=>{p!==null&&c.current!==i&&(i.checked===!0&&(c.current.checked==null||c.current.checked===!1)?b.addLayer(p):c.current.checked===!0&&(i.checked==null||i.checked===!1)&&b.removeLayer(p),c.current=i)}),i.children?cu.createElement(zc,{value:T},i.children):null}}hu.BaseLayer=Zp(function(o,i,h){o.addBaseLayer(i,h)});hu.Overlay=Zp(function(o,i,h){o.addOverlay(i,h)});function Mc(){return Mc=Object.assign||function(d){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(d[h]=i[h])}return d},Mc.apply(this,arguments)}function Ay({bounds:d,boundsOptions:o,center:i,children:h,className:c,id:p,placeholder:y,style:k,whenReady:b,zoom:M,...B},T){const[$]=ae.useState({className:c,id:p,style:k}),[F,Z]=ae.useState(null);ae.useImperativeHandle(T,()=>F?.map??null,[F]);const q=ae.useCallback(ce=>{if(ce!==null&&F===null){const be=new Oa.Map(ce,B);i!=null&&M!=null?be.setView(i,M):d!=null&&be.fitBounds(d,o),b!=null&&be.whenReady(b),Z(Ly(be))}},[]);ae.useEffect(()=>()=>{F?.map.remove()},[F]);const J=F?cu.createElement(zc,{value:F},h):y??null;return cu.createElement("div",Mc({},$,{ref:q}),J)}const Dy=ae.forwardRef(Ay),Oy=Hp(function(o){return new Oa.Control.Scale(o)}),Kf=Py(function({url:o,...i},h){const c=new Oa.TileLayer(o,Gp(i,h));return $c(c,h)},function(o,i,h){Sy(o,i,h);const{url:c}=i;c!=null&&c!==h.url&&o.setUrl(c)}),Ry=Hp(function(o){return new Oa.Control.Zoom(o)});var Jf={},Yf;function jy(){return Yf||(Yf=1,(()=>{var d=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,y=(r,s)=>()=>(s||r((s={exports:{}}).exports,s),s.exports),k=(r,s,u,f)=>{if(s&&typeof s=="object"||typeof s=="function")for(let _ of h(s))!p.call(r,_)&&_!==u&&o(r,_,{get:()=>s[_],enumerable:!(f=i(s,_))||f.enumerable});return r},b=(r,s,u)=>(u=r!=null?d(c(r)):{},k(s||!r||!r.__esModule?o(u,"default",{value:r,enumerable:!0}):u,r)),M=y((r,s)=>{function u(){this.__data__=[],this.size=0}s.exports=u}),B=y((r,s)=>{function u(f,_){return f===_||f!==f&&_!==_}s.exports=u}),T=y((r,s)=>{var u=B();function f(_,x){for(var E=_.length;E--;)if(u(_[E][0],x))return E;return-1}s.exports=f}),$=y((r,s)=>{var u=T(),f=Array.prototype,_=f.splice;function x(E){var P=this.__data__,D=u(P,E);if(D<0)return!1;var R=P.length-1;return D==R?P.pop():_.call(P,D,1),--this.size,!0}s.exports=x}),F=y((r,s)=>{var u=T();function f(_){var x=this.__data__,E=u(x,_);return E<0?void 0:x[E][1]}s.exports=f}),Z=y((r,s)=>{var u=T();function f(_){return u(this.__data__,_)>-1}s.exports=f}),q=y((r,s)=>{var u=T();function f(_,x){var E=this.__data__,P=u(E,_);return P<0?(++this.size,E.push([_,x])):E[P][1]=x,this}s.exports=f}),J=y((r,s)=>{var u=M(),f=$(),_=F(),x=Z(),E=q();function P(D){var R=-1,K=D==null?0:D.length;for(this.clear();++R<K;){var V=D[R];this.set(V[0],V[1])}}P.prototype.clear=u,P.prototype.delete=f,P.prototype.get=_,P.prototype.has=x,P.prototype.set=E,s.exports=P}),ce=y((r,s)=>{var u=J();function f(){this.__data__=new u,this.size=0}s.exports=f}),be=y((r,s)=>{function u(f){var _=this.__data__,x=_.delete(f);return this.size=_.size,x}s.exports=u}),he=y((r,s)=>{function u(f){return this.__data__.get(f)}s.exports=u}),Ae=y((r,s)=>{function u(f){return this.__data__.has(f)}s.exports=u}),Re=y((r,s)=>{var u=typeof Zu=="object"&&Zu&&Zu.Object===Object&&Zu;s.exports=u}),le=y((r,s)=>{var u=Re(),f=typeof self=="object"&&self&&self.Object===Object&&self,_=u||f||Function("return this")();s.exports=_}),ke=y((r,s)=>{var u=le(),f=u.Symbol;s.exports=f}),Ke=y((r,s)=>{var u=ke(),f=Object.prototype,_=f.hasOwnProperty,x=f.toString,E=u?u.toStringTag:void 0;function P(D){var R=_.call(D,E),K=D[E];try{D[E]=void 0;var V=!0}catch{}var ge=x.call(D);return V&&(R?D[E]=K:delete D[E]),ge}s.exports=P}),Je=y((r,s)=>{var u=Object.prototype,f=u.toString;function _(x){return f.call(x)}s.exports=_}),nt=y((r,s)=>{var u=ke(),f=Ke(),_=Je(),x="[object Null]",E="[object Undefined]",P=u?u.toStringTag:void 0;function D(R){return R==null?R===void 0?E:x:P&&P in Object(R)?f(R):_(R)}s.exports=D}),Ne=y((r,s)=>{function u(f){var _=typeof f;return f!=null&&(_=="object"||_=="function")}s.exports=u}),ft=y((r,s)=>{var u=nt(),f=Ne(),_="[object AsyncFunction]",x="[object Function]",E="[object GeneratorFunction]",P="[object Proxy]";function D(R){if(!f(R))return!1;var K=u(R);return K==x||K==E||K==_||K==P}s.exports=D}),Mt=y((r,s)=>{var u=le(),f=u["__core-js_shared__"];s.exports=f}),wt=y((r,s)=>{var u=Mt(),f=(function(){var x=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""})();function _(x){return!!f&&f in x}s.exports=_}),St=y((r,s)=>{var u=Function.prototype,f=u.toString;function _(x){if(x!=null){try{return f.call(x)}catch{}try{return x+""}catch{}}return""}s.exports=_}),mt=y((r,s)=>{var u=ft(),f=wt(),_=Ne(),x=St(),E=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,D=Function.prototype,R=Object.prototype,K=D.toString,V=R.hasOwnProperty,ge=RegExp("^"+K.call(V).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ye(Be){if(!_(Be)||f(Be))return!1;var Ie=u(Be)?ge:P;return Ie.test(x(Be))}s.exports=ye}),Dt=y((r,s)=>{function u(f,_){return f?.[_]}s.exports=u}),Ce=y((r,s)=>{var u=mt(),f=Dt();function _(x,E){var P=f(x,E);return u(P)?P:void 0}s.exports=_}),rt=y((r,s)=>{var u=Ce(),f=le(),_=u(f,"Map");s.exports=_}),Me=y((r,s)=>{var u=Ce(),f=u(Object,"create");s.exports=f}),ie=y((r,s)=>{var u=Me();function f(){this.__data__=u?u(null):{},this.size=0}s.exports=f}),Ee=y((r,s)=>{function u(f){var _=this.has(f)&&delete this.__data__[f];return this.size-=_?1:0,_}s.exports=u}),et=y((r,s)=>{var u=Me(),f="__lodash_hash_undefined__",_=Object.prototype,x=_.hasOwnProperty;function E(P){var D=this.__data__;if(u){var R=D[P];return R===f?void 0:R}return x.call(D,P)?D[P]:void 0}s.exports=E}),Xe=y((r,s)=>{var u=Me(),f=Object.prototype,_=f.hasOwnProperty;function x(E){var P=this.__data__;return u?P[E]!==void 0:_.call(P,E)}s.exports=x}),He=y((r,s)=>{var u=Me(),f="__lodash_hash_undefined__";function _(x,E){var P=this.__data__;return this.size+=this.has(x)?0:1,P[x]=u&&E===void 0?f:E,this}s.exports=_}),ze=y((r,s)=>{var u=ie(),f=Ee(),_=et(),x=Xe(),E=He();function P(D){var R=-1,K=D==null?0:D.length;for(this.clear();++R<K;){var V=D[R];this.set(V[0],V[1])}}P.prototype.clear=u,P.prototype.delete=f,P.prototype.get=_,P.prototype.has=x,P.prototype.set=E,s.exports=P}),kt=y((r,s)=>{var u=ze(),f=J(),_=rt();function x(){this.size=0,this.__data__={hash:new u,map:new(_||f),string:new u}}s.exports=x}),xt=y((r,s)=>{function u(f){var _=typeof f;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?f!=="__proto__":f===null}s.exports=u}),Ot=y((r,s)=>{var u=xt();function f(_,x){var E=_.__data__;return u(x)?E[typeof x=="string"?"string":"hash"]:E.map}s.exports=f}),_n=y((r,s)=>{var u=Ot();function f(_){var x=u(this,_).delete(_);return this.size-=x?1:0,x}s.exports=f}),Bi=y((r,s)=>{var u=Ot();function f(_){return u(this,_).get(_)}s.exports=f}),Ti=y((r,s)=>{var u=Ot();function f(_){return u(this,_).has(_)}s.exports=f}),Ai=y((r,s)=>{var u=Ot();function f(_,x){var E=u(this,_),P=E.size;return E.set(_,x),this.size+=E.size==P?0:1,this}s.exports=f}),Hs=y((r,s)=>{var u=kt(),f=_n(),_=Bi(),x=Ti(),E=Ai();function P(D){var R=-1,K=D==null?0:D.length;for(this.clear();++R<K;){var V=D[R];this.set(V[0],V[1])}}P.prototype.clear=u,P.prototype.delete=f,P.prototype.get=_,P.prototype.has=x,P.prototype.set=E,s.exports=P}),Fo=y((r,s)=>{var u=J(),f=rt(),_=Hs(),x=200;function E(P,D){var R=this.__data__;if(R instanceof u){var K=R.__data__;if(!f||K.length<x-1)return K.push([P,D]),this.size=++R.size,this;R=this.__data__=new _(K)}return R.set(P,D),this.size=R.size,this}s.exports=E}),No=y((r,s)=>{var u=J(),f=ce(),_=be(),x=he(),E=Ae(),P=Fo();function D(R){var K=this.__data__=new u(R);this.size=K.size}D.prototype.clear=f,D.prototype.delete=_,D.prototype.get=x,D.prototype.has=E,D.prototype.set=P,s.exports=D}),Di=y((r,s)=>{var u=Ce(),f=(function(){try{var _=u(Object,"defineProperty");return _({},"",{}),_}catch{}})();s.exports=f}),si=y((r,s)=>{var u=Di();function f(_,x,E){x=="__proto__"&&u?u(_,x,{configurable:!0,enumerable:!0,value:E,writable:!0}):_[x]=E}s.exports=f}),Zs=y((r,s)=>{var u=si(),f=B();function _(x,E,P){(P!==void 0&&!f(x[E],P)||P===void 0&&!(E in x))&&u(x,E,P)}s.exports=_}),Oi=y((r,s)=>{function u(f){return function(_,x,E){for(var P=-1,D=Object(_),R=E(_),K=R.length;K--;){var V=R[f?K:++P];if(x(D[V],V,D)===!1)break}return _}}s.exports=u}),Ur=y((r,s)=>{var u=Oi(),f=u();s.exports=f}),qs=y((r,s)=>{var u=le(),f=typeof r=="object"&&r&&!r.nodeType&&r,_=f&&typeof s=="object"&&s&&!s.nodeType&&s,x=_&&_.exports===f,E=x?u.Buffer:void 0,P=E?E.allocUnsafe:void 0;function D(R,K){if(K)return R.slice();var V=R.length,ge=P?P(V):new R.constructor(V);return R.copy(ge),ge}s.exports=D}),zo=y((r,s)=>{var u=le(),f=u.Uint8Array;s.exports=f}),Ra=y((r,s)=>{var u=zo();function f(_){var x=new _.constructor(_.byteLength);return new u(x).set(new u(_)),x}s.exports=f}),ja=y((r,s)=>{var u=Ra();function f(_,x){var E=x?u(_.buffer):_.buffer;return new _.constructor(E,_.byteOffset,_.length)}s.exports=f}),Ws=y((r,s)=>{function u(f,_){var x=-1,E=f.length;for(_||(_=Array(E));++x<E;)_[x]=f[x];return _}s.exports=u}),Ks=y((r,s)=>{var u=Ne(),f=Object.create,_=(function(){function x(){}return function(E){if(!u(E))return{};if(f)return f(E);x.prototype=E;var P=new x;return x.prototype=void 0,P}})();s.exports=_}),us=y((r,s)=>{function u(f,_){return function(x){return f(_(x))}}s.exports=u}),Uo=y((r,s)=>{var u=us(),f=u(Object.getPrototypeOf,Object);s.exports=f}),oi=y((r,s)=>{var u=Object.prototype;function f(_){var x=_&&_.constructor,E=typeof x=="function"&&x.prototype||u;return _===E}s.exports=f}),Ri=y((r,s)=>{var u=Ks(),f=Uo(),_=oi();function x(E){return typeof E.constructor=="function"&&!_(E)?u(f(E)):{}}s.exports=x}),ji=y((r,s)=>{function u(f){return f!=null&&typeof f=="object"}s.exports=u}),$o=y((r,s)=>{var u=nt(),f=ji(),_="[object Arguments]";function x(E){return f(E)&&u(E)==_}s.exports=x}),hs=y((r,s)=>{var u=$o(),f=ji(),_=Object.prototype,x=_.hasOwnProperty,E=_.propertyIsEnumerable,P=u((function(){return arguments})())?u:function(D){return f(D)&&x.call(D,"callee")&&!E.call(D,"callee")};s.exports=P}),Ii=y((r,s)=>{var u=Array.isArray;s.exports=u}),Js=y((r,s)=>{var u=9007199254740991;function f(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=u}s.exports=f}),Tr=y((r,s)=>{var u=ft(),f=Js();function _(x){return x!=null&&f(x.length)&&!u(x)}s.exports=_}),Go=y((r,s)=>{var u=Tr(),f=ji();function _(x){return f(x)&&u(x)}s.exports=_}),Vo=y((r,s)=>{function u(){return!1}s.exports=u}),cs=y((r,s)=>{var u=le(),f=Vo(),_=typeof r=="object"&&r&&!r.nodeType&&r,x=_&&typeof s=="object"&&s&&!s.nodeType&&s,E=x&&x.exports===_,P=E?u.Buffer:void 0,D=P?P.isBuffer:void 0,R=D||f;s.exports=R}),ai=y((r,s)=>{var u=nt(),f=Uo(),_=ji(),x="[object Object]",E=Function.prototype,P=Object.prototype,D=E.toString,R=P.hasOwnProperty,K=D.call(Object);function V(ge){if(!_(ge)||u(ge)!=x)return!1;var ye=f(ge);if(ye===null)return!0;var Be=R.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&D.call(Be)==K}s.exports=V}),li=y((r,s)=>{var u=nt(),f=Js(),_=ji(),x="[object Arguments]",E="[object Array]",P="[object Boolean]",D="[object Date]",R="[object Error]",K="[object Function]",V="[object Map]",ge="[object Number]",ye="[object Object]",Be="[object RegExp]",Ie="[object Set]",Ue="[object String]",_t="[object WeakMap]",H="[object ArrayBuffer]",ee="[object DataView]",oe="[object Float32Array]",we="[object Float64Array]",ue="[object Int8Array]",me="[object Int16Array]",A="[object Int32Array]",I="[object Uint8Array]",z="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",G={};G[oe]=G[we]=G[ue]=G[me]=G[A]=G[I]=G[z]=G[N]=G[U]=!0,G[x]=G[E]=G[H]=G[P]=G[ee]=G[D]=G[R]=G[K]=G[V]=G[ge]=G[ye]=G[Be]=G[Ie]=G[Ue]=G[_t]=!1;function te(Q){return _(Q)&&f(Q.length)&&!!G[u(Q)]}s.exports=te}),Ia=y((r,s)=>{function u(f){return function(_){return f(_)}}s.exports=u}),Fa=y((r,s)=>{var u=Re(),f=typeof r=="object"&&r&&!r.nodeType&&r,_=f&&typeof s=="object"&&s&&!s.nodeType&&s,x=_&&_.exports===f,E=x&&u.process,P=(function(){try{var D=_&&_.require&&_.require("util").types;return D||E&&E.binding&&E.binding("util")}catch{}})();s.exports=P}),Ho=y((r,s)=>{var u=li(),f=Ia(),_=Fa(),x=_&&_.isTypedArray,E=x?f(x):u;s.exports=E}),Zo=y((r,s)=>{function u(f,_){if(!(_==="constructor"&&typeof f[_]=="function")&&_!="__proto__")return f[_]}s.exports=u}),Na=y((r,s)=>{var u=si(),f=B(),_=Object.prototype,x=_.hasOwnProperty;function E(P,D,R){var K=P[D];(!(x.call(P,D)&&f(K,R))||R===void 0&&!(D in P))&&u(P,D,R)}s.exports=E}),qo=y((r,s)=>{var u=Na(),f=si();function _(x,E,P,D){var R=!P;P||(P={});for(var K=-1,V=E.length;++K<V;){var ge=E[K],ye=D?D(P[ge],x[ge],ge,P,x):void 0;ye===void 0&&(ye=x[ge]),R?f(P,ge,ye):u(P,ge,ye)}return P}s.exports=_}),Ys=y((r,s)=>{function u(f,_){for(var x=-1,E=Array(f);++x<f;)E[x]=_(x);return E}s.exports=u}),Fi=y((r,s)=>{var u=9007199254740991,f=/^(?:0|[1-9]\d*)$/;function _(x,E){var P=typeof x;return E=E??u,!!E&&(P=="number"||P!="symbol"&&f.test(x))&&x>-1&&x%1==0&&x<E}s.exports=_}),Wo=y((r,s)=>{var u=Ys(),f=hs(),_=Ii(),x=cs(),E=Fi(),P=Ho(),D=Object.prototype,R=D.hasOwnProperty;function K(V,ge){var ye=_(V),Be=!ye&&f(V),Ie=!ye&&!Be&&x(V),Ue=!ye&&!Be&&!Ie&&P(V),_t=ye||Be||Ie||Ue,H=_t?u(V.length,String):[],ee=H.length;for(var oe in V)(ge||R.call(V,oe))&&!(_t&&(oe=="length"||Ie&&(oe=="offset"||oe=="parent")||Ue&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||E(oe,ee)))&&H.push(oe);return H}s.exports=K}),ds=y((r,s)=>{function u(f){var _=[];if(f!=null)for(var x in Object(f))_.push(x);return _}s.exports=u}),Pl=y((r,s)=>{var u=Ne(),f=oi(),_=ds(),x=Object.prototype,E=x.hasOwnProperty;function P(D){if(!u(D))return _(D);var R=f(D),K=[];for(var V in D)V=="constructor"&&(R||!E.call(D,V))||K.push(V);return K}s.exports=P}),yn=y((r,s)=>{var u=Wo(),f=Pl(),_=Tr();function x(E){return _(E)?u(E,!0):f(E)}s.exports=x}),Ye=y((r,s)=>{var u=qo(),f=yn();function _(x){return u(x,f(x))}s.exports=_}),fs=y((r,s)=>{var u=Zs(),f=qs(),_=ja(),x=Ws(),E=Ri(),P=hs(),D=Ii(),R=Go(),K=cs(),V=ft(),ge=Ne(),ye=ai(),Be=Ho(),Ie=Zo(),Ue=Ye();function _t(H,ee,oe,we,ue,me,A){var I=Ie(H,oe),z=Ie(ee,oe),N=A.get(z);if(N){u(H,oe,N);return}var U=me?me(I,z,oe+"",H,ee,A):void 0,G=U===void 0;if(G){var te=D(z),Q=!te&&K(z),re=!te&&!Q&&Be(z);U=z,te||Q||re?D(I)?U=I:R(I)?U=x(I):Q?(G=!1,U=f(z,!0)):re?(G=!1,U=_(z,!0)):U=[]:ye(z)||P(z)?(U=I,P(I)?U=Ue(I):(!ge(I)||V(I))&&(U=E(z))):G=!1}G&&(A.set(z,U),ue(U,z,we,me,A),A.delete(z)),u(H,oe,U)}s.exports=_t}),Xs=y((r,s)=>{var u=No(),f=Zs(),_=Ur(),x=fs(),E=Ne(),P=yn(),D=Zo();function R(K,V,ge,ye,Be){K!==V&&_(V,function(Ie,Ue){if(Be||(Be=new u),E(Ie))x(K,V,Ue,ge,R,ye,Be);else{var _t=ye?ye(D(K,Ue),Ie,Ue+"",K,V,Be):void 0;_t===void 0&&(_t=Ie),f(K,Ue,_t)}},P)}s.exports=R}),Ko=y((r,s)=>{function u(f){return f}s.exports=u}),za=y((r,s)=>{function u(f,_,x){switch(x.length){case 0:return f.call(_);case 1:return f.call(_,x[0]);case 2:return f.call(_,x[0],x[1]);case 3:return f.call(_,x[0],x[1],x[2])}return f.apply(_,x)}s.exports=u}),Jo=y((r,s)=>{var u=za(),f=Math.max;function _(x,E,P){return E=f(E===void 0?x.length-1:E,0),function(){for(var D=arguments,R=-1,K=f(D.length-E,0),V=Array(K);++R<K;)V[R]=D[E+R];R=-1;for(var ge=Array(E+1);++R<E;)ge[R]=D[R];return ge[E]=P(V),u(x,this,ge)}}s.exports=_}),$r=y((r,s)=>{function u(f){return function(){return f}}s.exports=u}),ui=y((r,s)=>{var u=$r(),f=Di(),_=Ko(),x=f?function(E,P){return f(E,"toString",{configurable:!0,enumerable:!1,value:u(P),writable:!0})}:_;s.exports=x}),Yo=y((r,s)=>{var u=800,f=16,_=Date.now;function x(E){var P=0,D=0;return function(){var R=_(),K=f-(R-D);if(D=R,K>0){if(++P>=u)return arguments[0]}else P=0;return E.apply(void 0,arguments)}}s.exports=x}),Sl=y((r,s)=>{var u=ui(),f=Yo(),_=f(u);s.exports=_}),Ua=y((r,s)=>{var u=Ko(),f=Jo(),_=Sl();function x(E,P){return _(f(E,P,u),E+"")}s.exports=x}),$a=y((r,s)=>{var u=B(),f=Tr(),_=Fi(),x=Ne();function E(P,D,R){if(!x(R))return!1;var K=typeof D;return(K=="number"?f(R)&&_(D,R.length):K=="string"&&D in R)?u(R[D],P):!1}s.exports=E}),Ga=y((r,s)=>{var u=Ua(),f=$a();function _(x){return u(function(E,P){var D=-1,R=P.length,K=R>1?P[R-1]:void 0,V=R>2?P[2]:void 0;for(K=x.length>3&&typeof K=="function"?(R--,K):void 0,V&&f(P[0],P[1],V)&&(K=R<3?void 0:K,R=1),E=Object(E);++D<R;){var ge=P[D];ge&&x(E,ge,D,K)}return E})}s.exports=_}),ps=y((r,s)=>{var u=Xs(),f=Ga(),_=f(function(x,E,P){u(x,E,P)});s.exports=_}),Xo=y((r,s)=>{var u=nt(),f=ji(),_="[object Symbol]";function x(E){return typeof E=="symbol"||f(E)&&u(E)==_}s.exports=x}),Qs=y((r,s)=>{var u=Ii(),f=Xo(),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;function E(P,D){if(u(P))return!1;var R=typeof P;return R=="number"||R=="symbol"||R=="boolean"||P==null||f(P)?!0:x.test(P)||!_.test(P)||D!=null&&P in Object(D)}s.exports=E}),qt=y((r,s)=>{var u=Hs(),f="Expected a function";function _(x,E){if(typeof x!="function"||E!=null&&typeof E!="function")throw new TypeError(f);var P=function(){var D=arguments,R=E?E.apply(this,D):D[0],K=P.cache;if(K.has(R))return K.get(R);var V=x.apply(this,D);return P.cache=K.set(R,V)||K,V};return P.cache=new(_.Cache||u),P}_.Cache=u,s.exports=_}),Bl=y((r,s)=>{var u=qt(),f=500;function _(x){var E=u(x,function(D){return P.size===f&&P.clear(),D}),P=E.cache;return E}s.exports=_}),Qo=y((r,s)=>{var u=Bl(),f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,x=u(function(E){var P=[];return E.charCodeAt(0)===46&&P.push(""),E.replace(f,function(D,R,K,V){P.push(K?V.replace(_,"$1"):R||D)}),P});s.exports=x}),Va=y((r,s)=>{function u(f,_){for(var x=-1,E=f==null?0:f.length,P=Array(E);++x<E;)P[x]=_(f[x],x,f);return P}s.exports=u}),eo=y((r,s)=>{var u=ke(),f=Va(),_=Ii(),x=Xo(),E=u?u.prototype:void 0,P=E?E.toString:void 0;function D(R){if(typeof R=="string")return R;if(_(R))return f(R,D)+"";if(x(R))return P?P.call(R):"";var K=R+"";return K=="0"&&1/R==-1/0?"-0":K}s.exports=D}),ea=y((r,s)=>{var u=eo();function f(_){return _==null?"":u(_)}s.exports=f}),Ni=y((r,s)=>{var u=Ii(),f=Qs(),_=Qo(),x=ea();function E(P,D){return u(P)?P:f(P,D)?[P]:_(x(P))}s.exports=E}),ms=y((r,s)=>{var u=Xo();function f(_){if(typeof _=="string"||u(_))return _;var x=_+"";return x=="0"&&1/_==-1/0?"-0":x}s.exports=f}),Wn=y((r,s)=>{var u=Ni(),f=ms();function _(x,E){E=u(E,x);for(var P=0,D=E.length;x!=null&&P<D;)x=x[f(E[P++])];return P&&P==D?x:void 0}s.exports=_}),Gr=y((r,s)=>{var u=Wn();function f(_,x,E){var P=_==null?void 0:u(_,x);return P===void 0?E:P}s.exports=f}),pt=y((r,s)=>{(function(u,f){typeof r=="object"&&typeof s<"u"?s.exports=f():(u=u||self).RBush=f()})(r,function(){function u(H,ee,oe,we,ue){(function me(A,I,z,N,U){for(;N>z;){if(N-z>600){var G=N-z+1,te=I-z+1,Q=Math.log(G),re=.5*Math.exp(2*Q/3),de=.5*Math.sqrt(Q*re*(G-re)/G)*(te-G/2<0?-1:1),pe=Math.max(z,Math.floor(I-te*re/G+de)),Pe=Math.min(N,Math.floor(I+(G-te)*re/G+de));me(A,I,pe,Pe,U)}var $e=A[I],Ve=z,Ze=N;for(f(A,z,I),U(A[N],$e)>0&&f(A,z,N);Ve<Ze;){for(f(A,Ve,Ze),Ve++,Ze--;U(A[Ve],$e)<0;)Ve++;for(;U(A[Ze],$e)>0;)Ze--}U(A[z],$e)===0?f(A,z,Ze):f(A,++Ze,N),Ze<=I&&(z=Ze+1),I<=Ze&&(N=Ze-1)}})(H,ee,oe||0,we||H.length-1,ue||_)}function f(H,ee,oe){var we=H[ee];H[ee]=H[oe],H[oe]=we}function _(H,ee){return H<ee?-1:H>ee?1:0}var x=function(H){H===void 0&&(H=9),this._maxEntries=Math.max(4,H),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function E(H,ee,oe){if(!oe)return ee.indexOf(H);for(var we=0;we<ee.length;we++)if(oe(H,ee[we]))return we;return-1}function P(H,ee){D(H,0,H.children.length,ee,H)}function D(H,ee,oe,we,ue){ue||(ue=Ue(null)),ue.minX=1/0,ue.minY=1/0,ue.maxX=-1/0,ue.maxY=-1/0;for(var me=ee;me<oe;me++){var A=H.children[me];R(ue,H.leaf?we(A):A)}return ue}function R(H,ee){return H.minX=Math.min(H.minX,ee.minX),H.minY=Math.min(H.minY,ee.minY),H.maxX=Math.max(H.maxX,ee.maxX),H.maxY=Math.max(H.maxY,ee.maxY),H}function K(H,ee){return H.minX-ee.minX}function V(H,ee){return H.minY-ee.minY}function ge(H){return(H.maxX-H.minX)*(H.maxY-H.minY)}function ye(H){return H.maxX-H.minX+(H.maxY-H.minY)}function Be(H,ee){return H.minX<=ee.minX&&H.minY<=ee.minY&&ee.maxX<=H.maxX&&ee.maxY<=H.maxY}function Ie(H,ee){return ee.minX<=H.maxX&&ee.minY<=H.maxY&&ee.maxX>=H.minX&&ee.maxY>=H.minY}function Ue(H){return{children:H,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _t(H,ee,oe,we,ue){for(var me=[ee,oe];me.length;)if(!((oe=me.pop())-(ee=me.pop())<=we)){var A=ee+Math.ceil((oe-ee)/we/2)*we;u(H,A,ee,oe,ue),me.push(ee,A,A,oe)}}return x.prototype.all=function(){return this._all(this.data,[])},x.prototype.search=function(H){var ee=this.data,oe=[];if(!Ie(H,ee))return oe;for(var we=this.toBBox,ue=[];ee;){for(var me=0;me<ee.children.length;me++){var A=ee.children[me],I=ee.leaf?we(A):A;Ie(H,I)&&(ee.leaf?oe.push(A):Be(H,I)?this._all(A,oe):ue.push(A))}ee=ue.pop()}return oe},x.prototype.collides=function(H){var ee=this.data;if(!Ie(H,ee))return!1;for(var oe=[];ee;){for(var we=0;we<ee.children.length;we++){var ue=ee.children[we],me=ee.leaf?this.toBBox(ue):ue;if(Ie(H,me)){if(ee.leaf||Be(H,me))return!0;oe.push(ue)}}ee=oe.pop()}return!1},x.prototype.load=function(H){if(!H||!H.length)return this;if(H.length<this._minEntries){for(var ee=0;ee<H.length;ee++)this.insert(H[ee]);return this}var oe=this._build(H.slice(),0,H.length-1,0);if(this.data.children.length)if(this.data.height===oe.height)this._splitRoot(this.data,oe);else{if(this.data.height<oe.height){var we=this.data;this.data=oe,oe=we}this._insert(oe,this.data.height-oe.height-1,!0)}else this.data=oe;return this},x.prototype.insert=function(H){return H&&this._insert(H,this.data.height-1),this},x.prototype.clear=function(){return this.data=Ue([]),this},x.prototype.remove=function(H,ee){if(!H)return this;for(var oe,we,ue,me=this.data,A=this.toBBox(H),I=[],z=[];me||I.length;){if(me||(me=I.pop(),we=I[I.length-1],oe=z.pop(),ue=!0),me.leaf){var N=E(H,me.children,ee);if(N!==-1)return me.children.splice(N,1),I.push(me),this._condense(I),this}ue||me.leaf||!Be(me,A)?we?(oe++,me=we.children[oe],ue=!1):me=null:(I.push(me),z.push(oe),oe=0,we=me,me=me.children[0])}return this},x.prototype.toBBox=function(H){return H},x.prototype.compareMinX=function(H,ee){return H.minX-ee.minX},x.prototype.compareMinY=function(H,ee){return H.minY-ee.minY},x.prototype.toJSON=function(){return this.data},x.prototype.fromJSON=function(H){return this.data=H,this},x.prototype._all=function(H,ee){for(var oe=[];H;)H.leaf?ee.push.apply(ee,H.children):oe.push.apply(oe,H.children),H=oe.pop();return ee},x.prototype._build=function(H,ee,oe,we){var ue,me=oe-ee+1,A=this._maxEntries;if(me<=A)return P(ue=Ue(H.slice(ee,oe+1)),this.toBBox),ue;we||(we=Math.ceil(Math.log(me)/Math.log(A)),A=Math.ceil(me/Math.pow(A,we-1))),(ue=Ue([])).leaf=!1,ue.height=we;var I=Math.ceil(me/A),z=I*Math.ceil(Math.sqrt(A));_t(H,ee,oe,z,this.compareMinX);for(var N=ee;N<=oe;N+=z){var U=Math.min(N+z-1,oe);_t(H,N,U,I,this.compareMinY);for(var G=N;G<=U;G+=I){var te=Math.min(G+I-1,U);ue.children.push(this._build(H,G,te,we-1))}}return P(ue,this.toBBox),ue},x.prototype._chooseSubtree=function(H,ee,oe,we){for(;we.push(ee),!ee.leaf&&we.length-1!==oe;){for(var ue=1/0,me=1/0,A=void 0,I=0;I<ee.children.length;I++){var z=ee.children[I],N=ge(z),U=(G=H,te=z,(Math.max(te.maxX,G.maxX)-Math.min(te.minX,G.minX))*(Math.max(te.maxY,G.maxY)-Math.min(te.minY,G.minY))-N);U<me?(me=U,ue=N<ue?N:ue,A=z):U===me&&N<ue&&(ue=N,A=z)}ee=A||ee.children[0]}var G,te;return ee},x.prototype._insert=function(H,ee,oe){var we=oe?H:this.toBBox(H),ue=[],me=this._chooseSubtree(we,this.data,ee,ue);for(me.children.push(H),R(me,we);ee>=0&&ue[ee].children.length>this._maxEntries;)this._split(ue,ee),ee--;this._adjustParentBBoxes(we,ue,ee)},x.prototype._split=function(H,ee){var oe=H[ee],we=oe.children.length,ue=this._minEntries;this._chooseSplitAxis(oe,ue,we);var me=this._chooseSplitIndex(oe,ue,we),A=Ue(oe.children.splice(me,oe.children.length-me));A.height=oe.height,A.leaf=oe.leaf,P(oe,this.toBBox),P(A,this.toBBox),ee?H[ee-1].children.push(A):this._splitRoot(oe,A)},x.prototype._splitRoot=function(H,ee){this.data=Ue([H,ee]),this.data.height=H.height+1,this.data.leaf=!1,P(this.data,this.toBBox)},x.prototype._chooseSplitIndex=function(H,ee,oe){for(var we,ue,me,A,I,z,N,U=1/0,G=1/0,te=ee;te<=oe-ee;te++){var Q=D(H,0,te,this.toBBox),re=D(H,te,oe,this.toBBox),de=(ue=Q,me=re,A=void 0,I=void 0,z=void 0,N=void 0,A=Math.max(ue.minX,me.minX),I=Math.max(ue.minY,me.minY),z=Math.min(ue.maxX,me.maxX),N=Math.min(ue.maxY,me.maxY),Math.max(0,z-A)*Math.max(0,N-I)),pe=ge(Q)+ge(re);de<U?(U=de,we=te,G=pe<G?pe:G):de===U&&pe<G&&(G=pe,we=te)}return we||oe-ee},x.prototype._chooseSplitAxis=function(H,ee,oe){var we=H.leaf?this.compareMinX:K,ue=H.leaf?this.compareMinY:V;this._allDistMargin(H,ee,oe,we)<this._allDistMargin(H,ee,oe,ue)&&H.children.sort(we)},x.prototype._allDistMargin=function(H,ee,oe,we){H.children.sort(we);for(var ue=this.toBBox,me=D(H,0,ee,ue),A=D(H,oe-ee,oe,ue),I=ye(me)+ye(A),z=ee;z<oe-ee;z++){var N=H.children[z];R(me,H.leaf?ue(N):N),I+=ye(me)}for(var U=oe-ee-1;U>=ee;U--){var G=H.children[U];R(A,H.leaf?ue(G):G),I+=ye(A)}return I},x.prototype._adjustParentBBoxes=function(H,ee,oe){for(var we=oe;we>=0;we--)R(ee[we],H)},x.prototype._condense=function(H){for(var ee=H.length-1,oe=void 0;ee>=0;ee--)H[ee].children.length===0?ee>0?(oe=H[ee-1].children).splice(oe.indexOf(H[ee]),1):this.clear():P(H[ee],this.toBBox)},x})}),Ft=y(r=>{Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:r.earthRadius*100,centimetres:r.earthRadius*100,degrees:r.earthRadius/111325,feet:r.earthRadius*3.28084,inches:r.earthRadius*39.37,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:r.earthRadius*1e3,millimetres:r.earthRadius*1e3,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius*1.0936},r.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(N,U,G){G===void 0&&(G={});var te={type:"Feature"};return(G.id===0||G.id)&&(te.id=G.id),G.bbox&&(te.bbox=G.bbox),te.properties=U||{},te.geometry=N,te}r.feature=s;function u(N,U,G){switch(N){case"Point":return f(U).geometry;case"LineString":return P(U).geometry;case"Polygon":return x(U).geometry;case"MultiPoint":return V(U).geometry;case"MultiLineString":return K(U).geometry;case"MultiPolygon":return ge(U).geometry;default:throw new Error(N+" is invalid")}}r.geometry=u;function f(N,U,G){if(G===void 0&&(G={}),!N)throw new Error("coordinates is required");if(!Array.isArray(N))throw new Error("coordinates must be an Array");if(N.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!me(N[0])||!me(N[1]))throw new Error("coordinates must contain numbers");var te={type:"Point",coordinates:N};return s(te,U,G)}r.point=f;function _(N,U,G){return G===void 0&&(G={}),R(N.map(function(te){return f(te,U)}),G)}r.points=_;function x(N,U,G){G===void 0&&(G={});for(var te=0,Q=N;te<Q.length;te++){var re=Q[te];if(re.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var de=0;de<re[re.length-1].length;de++)if(re[re.length-1][de]!==re[0][de])throw new Error("First and last Position are not equivalent.")}var pe={type:"Polygon",coordinates:N};return s(pe,U,G)}r.polygon=x;function E(N,U,G){return G===void 0&&(G={}),R(N.map(function(te){return x(te,U)}),G)}r.polygons=E;function P(N,U,G){if(G===void 0&&(G={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");var te={type:"LineString",coordinates:N};return s(te,U,G)}r.lineString=P;function D(N,U,G){return G===void 0&&(G={}),R(N.map(function(te){return P(te,U)}),G)}r.lineStrings=D;function R(N,U){U===void 0&&(U={});var G={type:"FeatureCollection"};return U.id&&(G.id=U.id),U.bbox&&(G.bbox=U.bbox),G.features=N,G}r.featureCollection=R;function K(N,U,G){G===void 0&&(G={});var te={type:"MultiLineString",coordinates:N};return s(te,U,G)}r.multiLineString=K;function V(N,U,G){G===void 0&&(G={});var te={type:"MultiPoint",coordinates:N};return s(te,U,G)}r.multiPoint=V;function ge(N,U,G){G===void 0&&(G={});var te={type:"MultiPolygon",coordinates:N};return s(te,U,G)}r.multiPolygon=ge;function ye(N,U,G){G===void 0&&(G={});var te={type:"GeometryCollection",geometries:N};return s(te,U,G)}r.geometryCollection=ye;function Be(N,U){if(U===void 0&&(U=0),U&&!(U>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,U||0);return Math.round(N*G)/G}r.round=Be;function Ie(N,U){U===void 0&&(U="kilometers");var G=r.factors[U];if(!G)throw new Error(U+" units is invalid");return N*G}r.radiansToLength=Ie;function Ue(N,U){U===void 0&&(U="kilometers");var G=r.factors[U];if(!G)throw new Error(U+" units is invalid");return N/G}r.lengthToRadians=Ue;function _t(N,U){return ee(Ue(N,U))}r.lengthToDegrees=_t;function H(N){var U=N%360;return U<0&&(U+=360),U}r.bearingToAzimuth=H;function ee(N){var U=N%(2*Math.PI);return U*180/Math.PI}r.radiansToDegrees=ee;function oe(N){var U=N%360;return U*Math.PI/180}r.degreesToRadians=oe;function we(N,U,G){if(U===void 0&&(U="kilometers"),G===void 0&&(G="kilometers"),!(N>=0))throw new Error("length must be a positive number");return Ie(Ue(N,U),G)}r.convertLength=we;function ue(N,U,G){if(U===void 0&&(U="meters"),G===void 0&&(G="kilometers"),!(N>=0))throw new Error("area must be a positive number");var te=r.areaFactors[U];if(!te)throw new Error("invalid original units");var Q=r.areaFactors[G];if(!Q)throw new Error("invalid final units");return N/te*Q}r.convertArea=ue;function me(N){return!isNaN(N)&&N!==null&&!Array.isArray(N)}r.isNumber=me;function A(N){return!!N&&N.constructor===Object}r.isObject=A;function I(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(N.length!==4&&N.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(U){if(!me(U))throw new Error("bbox must only contain numbers")})}r.validateBBox=I;function z(N){if(!N)throw new Error("id is required");if(["string","number"].indexOf(typeof N)===-1)throw new Error("id must be a number or a string")}r.validateId=z}),gs=y(r=>{Object.defineProperty(r,"__esModule",{value:!0});var s=Ft();function u(ee,oe,we){if(ee!==null)for(var ue,me,A,I,z,N,U,G=0,te=0,Q,re=ee.type,de=re==="FeatureCollection",pe=re==="Feature",Pe=de?ee.features.length:1,$e=0;$e<Pe;$e++){U=de?ee.features[$e].geometry:pe?ee.geometry:ee,Q=U?U.type==="GeometryCollection":!1,z=Q?U.geometries.length:1;for(var Ve=0;Ve<z;Ve++){var Ze=0,Pt=0;if(I=Q?U.geometries[Ve]:U,I!==null){N=I.coordinates;var Bt=I.type;switch(G=we&&(Bt==="Polygon"||Bt==="MultiPolygon")?1:0,Bt){case null:break;case"Point":if(oe(N,te,$e,Ze,Pt)===!1)return!1;te++,Ze++;break;case"LineString":case"MultiPoint":for(ue=0;ue<N.length;ue++){if(oe(N[ue],te,$e,Ze,Pt)===!1)return!1;te++,Bt==="MultiPoint"&&Ze++}Bt==="LineString"&&Ze++;break;case"Polygon":case"MultiLineString":for(ue=0;ue<N.length;ue++){for(me=0;me<N[ue].length-G;me++){if(oe(N[ue][me],te,$e,Ze,Pt)===!1)return!1;te++}Bt==="MultiLineString"&&Ze++,Bt==="Polygon"&&Pt++}Bt==="Polygon"&&Ze++;break;case"MultiPolygon":for(ue=0;ue<N.length;ue++){for(Pt=0,me=0;me<N[ue].length;me++){for(A=0;A<N[ue][me].length-G;A++){if(oe(N[ue][me][A],te,$e,Ze,Pt)===!1)return!1;te++}Pt++}Ze++}break;case"GeometryCollection":for(ue=0;ue<I.geometries.length;ue++)if(u(I.geometries[ue],oe,we)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(ee,oe,we,ue){var me=we;return u(ee,function(A,I,z,N,U){I===0&&we===void 0?me=A:me=oe(me,A,I,z,N,U)},ue),me}function _(ee,oe){var we;switch(ee.type){case"FeatureCollection":for(we=0;we<ee.features.length&&oe(ee.features[we].properties,we)!==!1;we++);break;case"Feature":oe(ee.properties,0);break}}function x(ee,oe,we){var ue=we;return _(ee,function(me,A){A===0&&we===void 0?ue=me:ue=oe(ue,me,A)}),ue}function E(ee,oe){if(ee.type==="Feature")oe(ee,0);else if(ee.type==="FeatureCollection")for(var we=0;we<ee.features.length&&oe(ee.features[we],we)!==!1;we++);}function P(ee,oe,we){var ue=we;return E(ee,function(me,A){A===0&&we===void 0?ue=me:ue=oe(ue,me,A)}),ue}function D(ee){var oe=[];return u(ee,function(we){oe.push(we)}),oe}function R(ee,oe){var we,ue,me,A,I,z,N,U,G,te,Q=0,re=ee.type==="FeatureCollection",de=ee.type==="Feature",pe=re?ee.features.length:1;for(we=0;we<pe;we++){for(z=re?ee.features[we].geometry:de?ee.geometry:ee,U=re?ee.features[we].properties:de?ee.properties:{},G=re?ee.features[we].bbox:de?ee.bbox:void 0,te=re?ee.features[we].id:de?ee.id:void 0,N=z?z.type==="GeometryCollection":!1,I=N?z.geometries.length:1,me=0;me<I;me++){if(A=N?z.geometries[me]:z,A===null){if(oe(null,Q,U,G,te)===!1)return!1;continue}switch(A.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(oe(A,Q,U,G,te)===!1)return!1;break}case"GeometryCollection":{for(ue=0;ue<A.geometries.length;ue++)if(oe(A.geometries[ue],Q,U,G,te)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Q++}}function K(ee,oe,we){var ue=we;return R(ee,function(me,A,I,z,N){A===0&&we===void 0?ue=me:ue=oe(ue,me,A,I,z,N)}),ue}function V(ee,oe){R(ee,function(we,ue,me,A,I){var z=we===null?null:we.type;switch(z){case null:case"Point":case"LineString":case"Polygon":return oe(s.feature(we,me,{bbox:A,id:I}),ue,0)===!1?!1:void 0}var N;switch(z){case"MultiPoint":N="Point";break;case"MultiLineString":N="LineString";break;case"MultiPolygon":N="Polygon";break}for(var U=0;U<we.coordinates.length;U++){var G=we.coordinates[U],te={type:N,coordinates:G};if(oe(s.feature(te,me),ue,U)===!1)return!1}})}function ge(ee,oe,we){var ue=we;return V(ee,function(me,A,I){A===0&&I===0&&we===void 0?ue=me:ue=oe(ue,me,A,I)}),ue}function ye(ee,oe){V(ee,function(we,ue,me){var A=0;if(we.geometry){var I=we.geometry.type;if(!(I==="Point"||I==="MultiPoint")){var z,N=0,U=0,G=0;if(u(we,function(te,Q,re,de,pe){if(z===void 0||ue>N||de>U||pe>G){z=te,N=ue,U=de,G=pe,A=0;return}var Pe=s.lineString([z,te],we.properties);if(oe(Pe,ue,me,pe,A)===!1)return!1;A++,z=te})===!1)return!1}}})}function Be(ee,oe,we){var ue=we,me=!1;return ye(ee,function(A,I,z,N,U){me===!1&&we===void 0?ue=A:ue=oe(ue,A,I,z,N,U),me=!0}),ue}function Ie(ee,oe){if(!ee)throw new Error("geojson is required");V(ee,function(we,ue,me){if(we.geometry!==null){var A=we.geometry.type,I=we.geometry.coordinates;switch(A){case"LineString":if(oe(we,ue,me,0,0)===!1)return!1;break;case"Polygon":for(var z=0;z<I.length;z++)if(oe(s.lineString(I[z],we.properties),ue,me,z)===!1)return!1;break}}})}function Ue(ee,oe,we){var ue=we;return Ie(ee,function(me,A,I,z){A===0&&we===void 0?ue=me:ue=oe(ue,me,A,I,z)}),ue}function _t(ee,oe){if(oe=oe||{},!s.isObject(oe))throw new Error("options is invalid");var we=oe.featureIndex||0,ue=oe.multiFeatureIndex||0,me=oe.geometryIndex||0,A=oe.segmentIndex||0,I=oe.properties,z;switch(ee.type){case"FeatureCollection":we<0&&(we=ee.features.length+we),I=I||ee.features[we].properties,z=ee.features[we].geometry;break;case"Feature":I=I||ee.properties,z=ee.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":z=ee;break;default:throw new Error("geojson is invalid")}if(z===null)return null;var N=z.coordinates;switch(z.type){case"Point":case"MultiPoint":return null;case"LineString":return A<0&&(A=N.length+A-1),s.lineString([N[A],N[A+1]],I,oe);case"Polygon":return me<0&&(me=N.length+me),A<0&&(A=N[me].length+A-1),s.lineString([N[me][A],N[me][A+1]],I,oe);case"MultiLineString":return ue<0&&(ue=N.length+ue),A<0&&(A=N[ue].length+A-1),s.lineString([N[ue][A],N[ue][A+1]],I,oe);case"MultiPolygon":return ue<0&&(ue=N.length+ue),me<0&&(me=N[ue].length+me),A<0&&(A=N[ue][me].length-A-1),s.lineString([N[ue][me][A],N[ue][me][A+1]],I,oe)}throw new Error("geojson is invalid")}function H(ee,oe){if(oe=oe||{},!s.isObject(oe))throw new Error("options is invalid");var we=oe.featureIndex||0,ue=oe.multiFeatureIndex||0,me=oe.geometryIndex||0,A=oe.coordIndex||0,I=oe.properties,z;switch(ee.type){case"FeatureCollection":we<0&&(we=ee.features.length+we),I=I||ee.features[we].properties,z=ee.features[we].geometry;break;case"Feature":I=I||ee.properties,z=ee.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":z=ee;break;default:throw new Error("geojson is invalid")}if(z===null)return null;var N=z.coordinates;switch(z.type){case"Point":return s.point(N,I,oe);case"MultiPoint":return ue<0&&(ue=N.length+ue),s.point(N[ue],I,oe);case"LineString":return A<0&&(A=N.length+A),s.point(N[A],I,oe);case"Polygon":return me<0&&(me=N.length+me),A<0&&(A=N[me].length+A),s.point(N[me][A],I,oe);case"MultiLineString":return ue<0&&(ue=N.length+ue),A<0&&(A=N[ue].length+A),s.point(N[ue][A],I,oe);case"MultiPolygon":return ue<0&&(ue=N.length+ue),me<0&&(me=N[ue].length+me),A<0&&(A=N[ue][me].length-A),s.point(N[ue][me][A],I,oe)}throw new Error("geojson is invalid")}r.coordAll=D,r.coordEach=u,r.coordReduce=f,r.featureEach=E,r.featureReduce=P,r.findPoint=H,r.findSegment=_t,r.flattenEach=V,r.flattenReduce=ge,r.geomEach=R,r.geomReduce=K,r.lineEach=Ie,r.lineReduce=Ue,r.propEach=_,r.propReduce=x,r.segmentEach=ye,r.segmentReduce=Be}),zi=y(r=>{Object.defineProperty(r,"__esModule",{value:!0});var s=gs();function u(f){var _=[1/0,1/0,-1/0,-1/0];return s.coordEach(f,function(x){_[0]>x[0]&&(_[0]=x[0]),_[1]>x[1]&&(_[1]=x[1]),_[2]<x[0]&&(_[2]=x[0]),_[3]<x[1]&&(_[3]=x[1])}),_}u.default=u,r.default=u}),cr=y((r,s)=>{var u=pt(),f=Ft(),_=gs(),x=zi().default,E=_.featureEach;_.coordEach,f.polygon;var P=f.featureCollection;function D(R){var K=new u(R);return K.insert=function(V){if(V.type!=="Feature")throw new Error("invalid feature");return V.bbox=V.bbox?V.bbox:x(V),u.prototype.insert.call(this,V)},K.load=function(V){var ge=[];return Array.isArray(V)?V.forEach(function(ye){if(ye.type!=="Feature")throw new Error("invalid features");ye.bbox=ye.bbox?ye.bbox:x(ye),ge.push(ye)}):E(V,function(ye){if(ye.type!=="Feature")throw new Error("invalid features");ye.bbox=ye.bbox?ye.bbox:x(ye),ge.push(ye)}),u.prototype.load.call(this,ge)},K.remove=function(V,ge){if(V.type!=="Feature")throw new Error("invalid feature");return V.bbox=V.bbox?V.bbox:x(V),u.prototype.remove.call(this,V,ge)},K.clear=function(){return u.prototype.clear.call(this)},K.search=function(V){var ge=u.prototype.search.call(this,this.toBBox(V));return P(ge)},K.collides=function(V){return u.prototype.collides.call(this,this.toBBox(V))},K.all=function(){var V=u.prototype.all.call(this);return P(V)},K.toJSON=function(){return u.prototype.toJSON.call(this)},K.fromJSON=function(V){return u.prototype.fromJSON.call(this,V)},K.toBBox=function(V){var ge;if(V.bbox)ge=V.bbox;else if(Array.isArray(V)&&V.length===4)ge=V;else if(Array.isArray(V)&&V.length===6)ge=[V[0],V[1],V[3],V[4]];else if(V.type==="Feature")ge=x(V);else if(V.type==="FeatureCollection")ge=x(V);else throw new Error("invalid geojson");return{minX:ge[0],minY:ge[1],maxX:ge[2],maxY:ge[3]}},K}s.exports=D,s.exports.default=D});Array.prototype.findIndex=Array.prototype.findIndex||function(r){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof r!="function")throw new TypeError("callback must be a function");for(var s=Object(this),u=s.length>>>0,f=arguments[1],_=0;_<u;_++)if(r.call(f,s[_],_,s))return _;return-1},Array.prototype.find=Array.prototype.find||function(r){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof r!="function")throw new TypeError("callback must be a function");for(var s=Object(this),u=s.length>>>0,f=arguments[1],_=0;_<u;_++){var x=s[_];if(r.call(f,x,_,s))return x}},typeof Object.assign!="function"&&(Object.assign=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");r=Object(r);for(var s=1;s<arguments.length;s++){var u=arguments[s];if(u!=null)for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(r[f]=u[f])}return r}),(function(r){r.forEach(function(s){s.hasOwnProperty("remove")||Object.defineProperty(s,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,s){if(this==null)throw new TypeError('"this" is null or not defined');var u=Object(this),f=u.length>>>0;if(f===0)return!1;var _=s|0,x=Math.max(_>=0?_:f-Math.abs(_),0);function E(P,D){return P===D||typeof P=="number"&&typeof D=="number"&&isNaN(P)&&isNaN(D)}for(;x<f;){if(E(u[x],r))return!0;x++}return!1}});var Ui={version:"2.18.3"},ut=b(ps()),Nt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},ta={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},to={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Pn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ha={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},$i={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Kn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Kt={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ar={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ct={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Gi={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},no={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Vr={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ro={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},io={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},_s={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},ys={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Vi={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Jn={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Dr={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},dr={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},vs={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},lt={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},rn={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},It={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},na={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},hi={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},ra=Vr,Or={en:Nt,de:ta,it:to,id:Pn,ro:Ha,ru:$i,es:Kn,nl:Kt,fr:Ar,pt:ra,pt_br:no,pt_pt:Vr,zh:Ct,zh_tw:Gi,pl:ro,sv:io,el:_s,hu:ys,da:Vi,no:Jn,fa:Dr,ua:dr,tr:vs,cz:lt,ja:rn,fi:It,ko:na,ky:hi},fr={_globalEditModeEnabled:!1,enableGlobalEditMode(r){let s={...r};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(u=>{this._isRelevantForEdit(u)&&u.pm.enable(s)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(r=>{r.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(r=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(r)},handleLayerAdditionInGlobalEditMode(){let r=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let s in r){let u=r[s];this._isRelevantForEdit(u)&&u.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:r}){this._addedLayersEdit[L.stamp(r)]=r},_isRelevantForEdit(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowEditing}},so=fr,ws={_globalDragModeEnabled:!1,enableGlobalDragMode(){let r=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},r.forEach(s=>{this._isRelevantForDrag(s)&&s.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let r=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,r.forEach(s=>{s.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let r=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let s in r){let u=r[s];this._isRelevantForDrag(u)&&u.pm.enableLayerDrag()}},_layerAddedDrag({layer:r}){this._addedLayersDrag[L.stamp(r)]=r},_isRelevantForDrag(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.draggable}},Wt=ws,Yn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(r=>{this._isRelevantForRemoval(r)&&(r.pm.enabled()&&r.pm.disable(),r.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(r=>{r.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(r){let s=r.target;this._isRelevantForRemoval(s)&&!s.pm.dragging()&&(s.removeFrom(this.map.pm._getContainingLayer()),s.remove(),s instanceof L.LayerGroup?(this._fireRemoveLayerGroup(s),this._fireRemoveLayerGroup(this.map,s)):(s.pm._fireRemove(s),s.pm._fireRemove(this.map,s)))},_isRelevantForRemoval(r){return r.pm&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let r=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let s in r){let u=r[s];this._isRelevantForRemoval(u)&&(u.pm.enabled()&&u.pm.disable(),u.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:r}){this._addedLayersRemoval[L.stamp(r)]=r}},ci=Yn,xs={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(r=>r instanceof L.Polyline).forEach(r=>{this._isRelevantForRotate(r)&&r.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(r=>r instanceof L.Polyline).forEach(r=>{r.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(r){return r.pm&&r instanceof L.Polyline&&!(r instanceof L.LayerGroup)&&(!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1)&&!r._pmTempLayer&&r.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let r=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let s in r){let u=r[s];this._isRelevantForRemoval(u)&&u.pm.enableRotate()}},_layerAddedRotate({layer:r}){this._addedLayersRotate[L.stamp(r)]=r}},Tl=xs,Za=b(ps()),Ls={_fireDrawStart(r="Draw",s={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},r,s)},_fireDrawEnd(r="Draw",s={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},r,s)},_fireCreate(r,s="Draw",u={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:r,layer:r},s,u)},_fireCenterPlaced(r="Draw",s={}){let u=r==="Draw"?this._layer:void 0,f=r!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:u,layer:f,latlng:this._layer.getLatLng()},r,s)},_fireCut(r,s,u,f="Draw",_={}){this.__fire(r,"pm:cut",{shape:this._shape,layer:s,originalLayer:u},f,_)},_fireEdit(r=this._layer,s="Edit",u={}){this.__fire(r,"pm:edit",{layer:this._layer,shape:this.getShape()},s,u)},_fireEnable(r="Edit",s={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},r,s)},_fireDisable(r="Edit",s={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},r,s)},_fireUpdate(r="Edit",s={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},r,s)},_fireMarkerDragStart(r,s=void 0,u="Edit",f={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:s},u,f)},_fireMarkerDrag(r,s=void 0,u="Edit",f={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:s},u,f)},_fireMarkerDragEnd(r,s=void 0,u=void 0,f="Edit",_={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:r,shape:this.getShape(),indexPath:s,intersectionReset:u},f,_)},_fireDragStart(r="Edit",s={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},r,s)},_fireDrag(r,s="Edit",u={}){this.__fire(this._layer,"pm:drag",{...r,shape:this.getShape()},s,u)},_fireDragEnd(r="Edit",s={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},r,s)},_fireDragEnable(r="Edit",s={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},r,s)},_fireDragDisable(r="Edit",s={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},r,s)},_fireRemove(r,s=r,u="Edit",f={}){this.__fire(r,"pm:remove",{layer:s,shape:this.getShape()},u,f)},_fireVertexAdded(r,s,u,f="Edit",_={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:r,indexPath:s,latlng:u,shape:this.getShape()},f,_)},_fireVertexRemoved(r,s,u="Edit",f={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:r,indexPath:s,shape:this.getShape()},u,f)},_fireVertexClick(r,s,u="Edit",f={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:r,indexPath:s,shape:this.getShape()},u,f)},_fireIntersect(r,s=this._layer,u="Edit",f={}){this.__fire(s,"pm:intersect",{layer:this._layer,intersection:r,shape:this.getShape()},u,f)},_fireLayerReset(r,s,u="Edit",f={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:r,indexPath:s,shape:this.getShape()},u,f)},_fireChange(r,s="Edit",u={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:r,shape:this.getShape()},s,u)},_fireTextChange(r,s="Edit",u={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:r,shape:this.getShape()},s,u)},_fireTextFocus(r="Edit",s={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},r,s)},_fireTextBlur(r="Edit",s={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},r,s)},_fireSnapDrag(r,s,u="Snapping",f={}){this.__fire(r,"pm:snapdrag",s,u,f)},_fireSnap(r,s,u="Snapping",f={}){this.__fire(r,"pm:snap",s,u,f)},_fireUnsnap(r,s,u="Snapping",f={}){this.__fire(r,"pm:unsnap",s,u,f)},_fireRotationEnable(r,s,u="Rotation",f={}){this.__fire(r,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},u,f)},_fireRotationDisable(r,s="Rotation",u={}){this.__fire(r,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},s,u)},_fireRotationStart(r,s,u="Rotation",f={}){this.__fire(r,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:s},u,f)},_fireRotation(r,s,u,f=this._rotationLayer,_="Rotation",x={}){this.__fire(r,"pm:rotate",{layer:f,helpLayer:this._layer,startAngle:this._startAngle,angle:f.pm.getAngle(),angleDiff:s,oldLatLngs:u,newLatLngs:f.getLatLngs()},_,x)},_fireRotationEnd(r,s,u,f="Rotation",_={}){this.__fire(r,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:s,angle:this._rotationLayer.pm.getAngle(),originLatLngs:u,newLatLngs:this._rotationLayer.getLatLngs()},f,_)},_fireActionClick(r,s,u,f="Toolbar",_={}){this.__fire(this._map,"pm:actionclick",{text:r.text,action:r,btnName:s,button:u},f,_)},_fireButtonClick(r,s,u="Toolbar",f={}){this.__fire(this._map,"pm:buttonclick",{btnName:r,button:s},u,f)},_fireLangChange(r,s,u,f,_="Global",x={}){this.__fire(this.map,"pm:langchange",{oldLang:r,activeLang:s,fallback:u,translations:f},_,x)},_fireGlobalDragModeToggled(r,s="Global",u={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:r,map:this.map},s,u)},_fireGlobalEditModeToggled(r,s="Global",u={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:r,map:this.map},s,u)},_fireGlobalRemovalModeToggled(r,s="Global",u={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:r,map:this.map},s,u)},_fireGlobalCutModeToggled(r="Global",s={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},r,s)},_fireGlobalDrawModeToggled(r="Global",s={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},r,s)},_fireGlobalRotateModeToggled(r="Global",s={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},r,s)},_fireRemoveLayerGroup(r,s=r,u="Edit",f={}){this.__fire(r,"pm:remove",{layer:s,shape:void 0},u,f)},_fireKeyeventEvent(r,s,u,f="Global",_={}){this.__fire(this.map,"pm:keyevent",{event:r,eventType:s,focusOn:u},f,_)},__fire(r,s,u,f,_={}){u=(0,Za.default)(u,_,{source:f}),L.PM.Utils._fireEvent(r,s,u)}},di=Ls,oo=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(r){this.map=r,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),r.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(r){let s="document";this.map.getContainer().contains(r.target)&&(s="map");let u={event:r,eventType:r.type,focusOn:s};this._lastEvents[r.type]=u,this._lastEvents.current=u,this.map.pm._fireKeyeventEvent(r,r.type,s)},_onBlur(r){r.altKey=!1;let s={event:r,eventType:r.type,focusOn:"document"};this._lastEvents[r.type]=s,this._lastEvents.current=s},getLastKeyEvent(r="current"){return this._lastEvents[r]},isShiftKeyPressed(){return this._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return this._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return this._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return this._lastEvents.current?.event.metaKey},getPressedKey(){return this._lastEvents.current?.event.key}}),Lt=oo,Rr=b(Gr());function ht(r){let s=L.PM.activeLang;return(0,Rr.default)(Or[s],r)||(0,Rr.default)(Or.en,r)||r}function pr(r){for(let s=0;s<r.length;s+=1){let u=r[s];if(Array.isArray(u)){if(pr(u))return!0}else if(u!=null&&u!=="")return!0}return!1}function Hi(r){return r.reduce((s,u)=>{if(u.length!==0){let f=Array.isArray(u)?Hi(u):u;Array.isArray(f)?f.length!==0&&s.push(f):s.push(f)}return s},[])}function ao(r,s,u){let f={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:_,b:x,f:E}=f,P=r.lng,D=r.lat,R=u,K=Math.PI,V=s*K/180,ge=Math.sin(V),ye=Math.cos(V),Be=(1-E)*Math.tan(D*K/180),Ie=1/Math.sqrt(1+Be*Be),Ue=Be*Ie,_t=Math.atan2(Be,ye),H=Ie*ge,ee=1-H*H,oe=ee*(_*_-x*x)/(x*x),we=1+oe/16384*(4096+oe*(-768+oe*(320-175*oe))),ue=oe/1024*(256+oe*(-128+oe*(74-47*oe))),me=R/(x*we),A=2*Math.PI,I,z,N;for(;Math.abs(me-A)>1e-12;){I=Math.cos(2*_t+me),z=Math.sin(me),N=Math.cos(me);let Pe=ue*z*(I+ue/4*(N*(-1+2*I*I)-ue/6*I*(-3+4*z*z)*(-3+4*I*I)));A=me,me=R/(x*we)+Pe}let U=Ue*z-Ie*N*ye,G=Math.atan2(Ue*N+Ie*z*ye,(1-E)*Math.sqrt(H*H+U*U)),te=Math.atan2(z*ge,Ie*N-Ue*z*ye),Q=E/16*ee*(4+E*(4-3*ee)),re=te-(1-Q)*E*H*(me+Q*z*(I+Q*N*(-1+2*I*I))),de=P+re*180/K,pe=G*180/K;return L.latLng(de,pe)}function fi(r,s,u,f,_=!0){let x,E,P,D=[];for(let R=0;R<u;R+=1){if(_)x=R*360/u+f,E=ao(r,x,s),P=L.latLng(E.lng,E.lat);else{let K=r.lat+Math.cos(2*R*Math.PI/u)*s,V=r.lng+Math.sin(2*R*Math.PI/u)*s;P=L.latLng(K,V)}D.push(P)}return D}function qa(r,s,u){s=(s+360)%360;let f=Math.PI/180,_=180/Math.PI,{R:x}=L.CRS.Earth,E=r.lng*f,P=r.lat*f,D=s*f,R=Math.sin(P),K=Math.cos(P),V=Math.cos(u/x),ge=Math.sin(u/x),ye=Math.asin(R*V+K*ge*Math.cos(D)),Be=E+Math.atan2(Math.sin(D)*ge*K,V-R*Math.sin(ye));Be*=_;let Ie=Be-360,Ue=Be<-180?Be+360:Be;return Be=Be>180?Ie:Ue,L.latLng([ye*_,Be])}function dn(r,s,u){let f=r.latLngToContainerPoint(s),_=r.latLngToContainerPoint(u),x=Math.atan2(_.y-f.y,_.x-f.x)*180/Math.PI+90;return x+=x<0?360:0,x}function jr(r,s,u,f){let _=dn(r,s,u);return qa(s,_,f)}function ia(r,s,u="asc"){if(!s||Object.keys(s).length===0)return(D,R)=>D-R;let f=Object.keys(s),_,x=f.length-1,E={};for(;x>=0;)_=f[x],E[_.toLowerCase()]=s[_],x-=1;function P(D){if(D instanceof L.Marker)return"Marker";if(D instanceof L.Circle)return"Circle";if(D instanceof L.CircleMarker)return"CircleMarker";if(D instanceof L.Rectangle)return"Rectangle";if(D instanceof L.Polygon)return"Polygon";if(D instanceof L.Polyline)return"Line"}return(D,R)=>{let K,V;if(K=P(D.layer).toLowerCase(),V=P(R.layer).toLowerCase(),!K||!V)return 0;let ge=K in E?E[K]:Number.MAX_SAFE_INTEGER,ye=V in E?E[V]:Number.MAX_SAFE_INTEGER,Be=0;return ge<ye?Be=-1:ge>ye&&(Be=1),u==="desc"?Be*-1:Be}}function Sn(r,s=r.getLatLngs()){return r instanceof L.Polygon?L.polygon(s).getLatLngs():L.polyline(s).getLatLngs()}function Wa(r,s){if(s.options.crs?.projection?.MAX_LATITUDE){let u=s.options.crs?.projection?.MAX_LATITUDE;r.lat=Math.max(Math.min(u,r.lat),-u)}return r}function sn(r){return r.options.renderer||r._map&&(r._map._getPaneRenderer(r.options.pane)||r._map.options.renderer||r._map._renderer)||r._renderer}var sa=L.Class.extend({includes:[so,Wt,ci,Tl,di],initialize(r){this.map=r,this.Draw=new L.PM.Draw(r),this.Toolbar=new L.PM.Toolbar(r),this.Keyboard=Lt(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(r)},setLang(r="en",s,u="en"){if(r=r.trim().toLowerCase(),!/^[a-z]{2}$/.test(r)){let _=r.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(_){let x=[`${_[1]}_${_[2]}`,`${_[1]}`];for(let E of x)if(Or[E]){r=E;break}}}let f=L.PM.activeLang;s&&(Or[r]=(0,ut.default)(Or[u],s)),L.PM.activeLang=r,this.map.pm.Toolbar.reinit(),this._fireLangChange(f,r,u,Or[r])},addControls(r){this.Toolbar.addControls(r)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(r="Polygon",s){r==="Poly"&&(r="Polygon"),this.Draw.enable(r,s)},disableDraw(r="Polygon"){r==="Poly"&&(r="Polygon"),this.Draw.disable(r)},setPathOptions(r,s={}){let u=s.ignoreShapes||[],f=s.merge||!1;this.map.pm.Draw.shapes.forEach(_=>{u.indexOf(_)===-1&&this.map.pm.Draw[_].setPathOptions(r,f)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(r){let s=(0,ut.default)(this.globalOptions,r);s.editable&&(s.resizeableCircleMarker=s.editable,delete s.editable);let u=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!s.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),u=!0);let f=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!s.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),f=!0),this.map.pm.Draw.shapes.forEach(_=>{this.map.pm.Draw[_].setOptions(s)}),u&&this.map.pm.Draw.CircleMarker.enable(),f&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(_=>{_.pm.setOptions(s)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=s,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(r=>{r.pm.enabled()&&r.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(r){return this.Draw.Cut.enable(r)},toggleGlobalCutMode(r){return this.Draw.Cut.toggle(r)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(r=!1){let s=L.PM.Utils.findLayers(this.map);if(!r)return s;let u=L.featureGroup();return u._pmTempLayer=!0,s.forEach(f=>{u.addLayer(f)}),u},getGeomanDrawLayers(r=!1){let s=L.PM.Utils.findLayers(this.map).filter(f=>f._drawnByGeoman===!0);if(!r)return s;let u=L.featureGroup();return u._pmTempLayer=!0,s.forEach(f=>{u.addLayer(f)}),u},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(r){this._touchEventCounter===0&&(L.DomEvent.on(r,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(r,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(r){this._touchEventCounter===1&&(L.DomEvent.off(r,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(r,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(r){sn(this.map)._onMouseMove(this._createMouseEvent("mousemove",r))},_canvasTouchClick(r){let s="";r.type==="touchstart"||r.type==="pointerdown"?s="mousedown":(r.type==="touchend"||r.type==="pointerup"||r.type==="touchcancel"||r.type==="pointercancel")&&(s="mouseup"),s&&sn(this.map)._onClick(this._createMouseEvent(s,r))},_createMouseEvent(r,s){let u,f=s.touches[0]||s.changedTouches[0];try{u=new MouseEvent(r,{bubbles:s.bubbles,cancelable:s.cancelable,view:s.view,detail:f.detail,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY,ctrlKey:s.ctrlKey,altKey:s.altKey,shiftKey:s.shiftKey,metaKey:s.metaKey,button:s.button,relatedTarget:s.relatedTarget})}catch{u=document.createEvent("MouseEvents"),u.initMouseEvent(r,s.bubbles,s.cancelable,s.view,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget)}return u}}),Zi=sa,Xn=L.Control.extend({includes:[di],options:{position:"topleft",disableByOtherButtons:!0},initialize(r){this._button=L.Util.extend({},this.options,r)},onAdd(r){return this._map=r,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let r=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),r?r.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(r){return typeof r=="boolean"?this._button.toggleStatus=r:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(r){r&&r.preventDefault(),!this._button.disabled&&(this._button.onClick(r,{button:this,event:r}),this._clicked(r),this._button.afterClick(r,{button:this,event:r}))},_makeButton(r){let s=this.options.position.indexOf("right")>-1?"pos-right":"",u=L.DomUtil.create("div",`button-container  ${s}`,this._container);r.title&&u.setAttribute("title",r.title);let f=L.DomUtil.create("a","leaflet-buttons-control-button",u);f.setAttribute("role","button"),f.setAttribute("tabindex","0"),f.href="#";let _=L.DomUtil.create("div",`leaflet-pm-actions-container ${s}`,u),x=r.actions,E={cancel:{text:ht("actions.cancel"),title:ht("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ht("actions.finish"),title:ht("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ht("actions.removeLastVertex"),title:ht("actions.removeLastVertex"),onClick(){this._map.pm.Draw[r.jsClass]._removeLastVertex()}},finish:{text:ht("actions.finish"),title:ht("actions.finish"),onClick(D){this._map.pm.Draw[r.jsClass]._finishShape(D)}}};r._preparedActions=x.map(D=>{let R=typeof D=="string"?D:D.name,K;if(E[R])K=E[R];else if(D.text)K=D;else return K;let V=L.DomUtil.create("a",`leaflet-pm-action ${s} action-${R}`,_);if(V.setAttribute("role","button"),V.setAttribute("tabindex","0"),V.href="#",K.title&&(V.title=K.title),V.innerHTML=K.text,L.DomEvent.disableClickPropagation(V),L.DomEvent.on(V,"click",L.DomEvent.stop),K._node=V,!r.disabled&&K.onClick){let ge=ye=>{ye.preventDefault();let Be="",{buttons:Ie}=this._map.pm.Toolbar;for(let Ue in Ie)if(Ie[Ue]._button===r){Be=Ue;break}this._fireActionClick(K,Be,r)};L.DomEvent.addListener(V,"click",ge,this),L.DomEvent.addListener(V,"click",K.onClick,this),L.DomEvent.addListener(V,"click",()=>this._updateActiveAction(r))}return K}),this._updateActiveAction(r),r.toggleStatus&&L.DomUtil.addClass(u,"active");let P=L.DomUtil.create("div","control-icon",f);return r.iconUrl&&P.setAttribute("src",r.iconUrl),r.className&&L.DomUtil.addClass(P,r.className),L.DomEvent.disableClickPropagation(f),L.DomEvent.on(f,"click",L.DomEvent.stop),r.disabled||(L.DomEvent.addListener(f,"click",this._onBtnClick,this),L.DomEvent.addListener(f,"click",this._triggerClick,this)),r.disabled&&(L.DomUtil.addClass(f,"pm-disabled"),f.setAttribute("aria-disabled","true")),u},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let r="",{buttons:s}=this._map.pm.Toolbar;for(let u in s)if(s[u]._button===this._button){r=u;break}this._fireButtonClick(r,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let r="pm-disabled",s=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(s,r),s.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(s,r),s.setAttribute("aria-disabled","false"))},_updateActiveAction(r){r._preparedActions?.forEach(s=>{s?._node&&(s.isActive&&s.isActive.call(this)?L.DomUtil.addClass(s._node,"active-action"):L.DomUtil.removeClass(s._node,"active-action"))})}}),oa=Xn;L.Control.PMButton=oa;var Ka=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(r){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(r)},reinit(){let r=this.isVisible;this.removeControls(),this._defineButtons(),r&&this.addControls()},init(r){this.map=r,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(r){let s=`${r}Container`;return this[s]||(this[s]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${r} leaflet-bar leaflet-control`)),this[s]},getButtons(){return this.buttons},addControls(r=this.options){typeof r.editPolygon<"u"&&(r.editMode=r.editPolygon),typeof r.deleteLayer<"u"&&(r.removalMode=r.deleteLayer),L.Util.setOptions(this,r),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let r=this.getButtons(),s={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let u in r){let f=r[u];L.Util.setOptions(f,{className:s.geomanIcons[u]})}},removeControls(){let r=this.getButtons();for(let s in r)r[s].remove();this.isVisible=!1},toggleControls(r=this.options){this.isVisible?this.removeControls():this.addControls(r)},_addButton(r,s){return this.buttons[r]=s,this.options[r]=!!this.options[r]||!1,this.buttons[r]},triggerClickOnToggledButtons(r){for(let s in this.buttons){let u=this.buttons[s];u._button.disableByOtherButtons&&u!==r&&u.toggled()&&u._triggerClick()}},toggleButton(r,s,u=!0){r==="editPolygon"&&(r="editMode"),r==="deleteLayer"&&(r="removalMode");let f=r;return u&&this.triggerClickOnToggledButtons(this.buttons[f]),this.buttons[f]?this.buttons[f].toggle(s):!1},_defineButtons(){let r={className:"control-icon leaflet-pm-icon-marker",title:ht("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:ht("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={className:"control-icon leaflet-pm-icon-polyline",title:ht("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},f={title:ht("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:ht("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:ht("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},E={title:ht("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},P={title:ht("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},D={title:ht("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},R={title:ht("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={title:ht("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},V={className:"control-icon leaflet-pm-icon-text",title:ht("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ge,ye)=>{this.map.pm.Draw[ye.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(r)),this._addButton("drawPolyline",new L.Control.PMButton(u)),this._addButton("drawRectangle",new L.Control.PMButton(x)),this._addButton("drawPolygon",new L.Control.PMButton(s)),this._addButton("drawCircle",new L.Control.PMButton(f)),this._addButton("drawCircleMarker",new L.Control.PMButton(_)),this._addButton("drawText",new L.Control.PMButton(V)),this._addButton("editMode",new L.Control.PMButton(E)),this._addButton("dragMode",new L.Control.PMButton(P)),this._addButton("cutPolygon",new L.Control.PMButton(D)),this._addButton("removalMode",new L.Control.PMButton(R)),this._addButton("rotateMode",new L.Control.PMButton(K))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let r=this.getButtons(),s=[];this.options.drawControls===!1&&(s=s.concat(Object.keys(r).filter(u=>!r[u]._button.tool))),this.options.editControls===!1&&(s=s.concat(Object.keys(r).filter(u=>r[u]._button.tool==="edit"))),this.options.optionsControls===!1&&(s=s.concat(Object.keys(r).filter(u=>r[u]._button.tool==="options"))),this.options.customControls===!1&&(s=s.concat(Object.keys(r).filter(u=>r[u]._button.tool==="custom")));for(let u in r)if(this.options[u]&&s.indexOf(u)===-1){let f=r[u]._button.tool;f||(f="draw"),r[u].setPosition(this._getBtnPosition(f)),r[u].addTo(this.map)}},_getBtnPosition(r){return this.options.positions&&this.options.positions[r]?this.options.positions[r]:this.options.position},setBlockPosition(r,s){this.options.positions[r]=s,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(r,s){if(s)typeof s!="object"&&(s={name:s});else throw new TypeError("Button has no name");let u=this._btnNameMapping(r);if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");let f=this.map.pm.Draw.createNewDrawInstance(s.name,u);s={...this.buttons[u]._button,...s};let _=this.createCustomControl(s);return{drawInstance:f,control:_}},createCustomControl(r){if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");r.onClick||(r.onClick=()=>{}),r.afterClick||(r.afterClick=()=>{}),r.toggle!==!1&&(r.toggle=!0),r.block&&(r.block=r.block.toLowerCase()),(!r.block||r.block==="draw")&&(r.block=""),r.className?r.className.indexOf("control-icon")===-1&&(r.className=`control-icon ${r.className}`):r.className="control-icon";let s={tool:r.block,className:r.className,title:r.title||"",jsClass:r.name,onClick:r.onClick,afterClick:r.afterClick,doToggle:r.toggle,toggleStatus:!1,disableOtherButtons:r.disableOtherButtons??!0,disableByOtherButtons:r.disableByOtherButtons??!0,cssToggle:r.toggle,position:this.options.position,actions:r.actions||[],disabled:!!r.disabled};this.options[r.name]!==!1&&(this.options[r.name]=!0);let u=this._addButton(r.name,new L.Control.PMButton(s));return this.changeControlOrder(),u},controlExists(r){return!!this.getButton(r)},getButton(r){return this.getButtons()[r]},getButtonsInBlock(r){let s={};if(r)for(let u in this.getButtons()){let f=this.getButtons()[u];(f._button.tool===r||r==="draw"&&!f._button.tool)&&(s[u]=f)}return s},changeControlOrder(r=[]){let s=this._shapeMapping(),u=[];r.forEach(x=>{s[x]?u.push(s[x]):u.push(x)});let f=this.getButtons(),_={};u.forEach(x=>{f[x]&&(_[x]=f[x])}),Object.keys(f).filter(x=>!f[x]._button.tool||f[x]._button.tool==="draw").forEach(x=>{u.indexOf(x)===-1&&(_[x]=f[x])}),Object.keys(f).filter(x=>f[x]._button.tool==="edit").forEach(x=>{u.indexOf(x)===-1&&(_[x]=f[x])}),Object.keys(f).filter(x=>f[x]._button.tool==="options").forEach(x=>{u.indexOf(x)===-1&&(_[x]=f[x])}),Object.keys(f).filter(x=>f[x]._button.tool==="custom").forEach(x=>{u.indexOf(x)===-1&&(_[x]=f[x])}),Object.keys(f).forEach(x=>{u.indexOf(x)===-1&&(_[x]=f[x])}),this.map.pm.Toolbar.buttons=_,this._showHideButtons()},getControlOrder(){let r=this.getButtons(),s=[];for(let u in r)s.push(u);return s},changeActionsOfControl(r,s){let u=this._btnNameMapping(r);if(!u)throw new TypeError("No name passed");if(!s)throw new TypeError("No actions passed");if(!this.buttons[u])throw new TypeError("Button with this name not exists");this.buttons[u]._button.actions=s,this.changeControlOrder()},setButtonDisabled(r,s){let u=this._btnNameMapping(r);s?this.buttons[u].disable():this.buttons[u].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(r){let s=this._shapeMapping();return s[r]?s[r]:r}}),aa=Ka,Al=b(ps()),lo={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(r){r.forEach(s=>{if(Array.isArray(s)){this._assignEvents(s);return}s.off("drag",this._handleSnapping,this),s.on("drag",this._handleSnapping,this),s.off("dragend",this._cleanupSnapping,this),s.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(r){if(r){let s=r.target;s._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(s=>{s.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(r){let s=r.target;if(s._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),r?.originalEvent?.altKey||this._map?.pm?.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let u=this._calcClosestLayer(s.getLatLng(),this._snapList);if(Object.keys(u).length===0)return!1;let f=u.layer instanceof L.Marker||u.layer instanceof L.CircleMarker||!this.options.snapSegment,_;f?_=u.latlng:_=this._checkPrioritiySnapping(u);let x=this.options.snapDistance,E={marker:s,shape:this._shape,snapLatLng:_,segment:u.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:u.layer,distance:u.distance};if(this._fireSnapDrag(E.marker,E),this._fireSnapDrag(this._layer,E),u.distance<x){s._orgLatLng=s.getLatLng(),s.setLatLng(_),s._snapped=!0,s._snapInfo=E;let P=()=>{this._snapLatLng=_,this._fireSnap(s,E),this._fireSnap(this._layer,E)},D=this._snapLatLng||{},R=_||{};(D.lat!==R.lat||D.lng!==R.lng)&&P()}else this._snapLatLng&&(this._unsnap(E),s._snapped=!1,s._snapInfo=void 0,this._fireUnsnap(E.marker,E),this._fireUnsnap(this._layer,E));return!0},_createSnapList(){let r=[],s=[],u=this._map;u.off("layerremove",this._handleSnapLayerRemoval,this),u.on("layerremove",this._handleSnapLayerRemoval,this),u.eachLayer(f=>{if((f instanceof L.Polyline||f instanceof L.Marker||f instanceof L.CircleMarker||f instanceof L.ImageOverlay)&&f.options.snapIgnore!==!0){if(f.options.snapIgnore===void 0&&(!L.PM.optIn&&f.options.pmIgnore===!0||L.PM.optIn&&f.options.pmIgnore!==!1))return;(f instanceof L.Circle||f instanceof L.CircleMarker)&&f.pm&&f.pm._hiddenPolyCircle?r.push(f.pm._hiddenPolyCircle):f instanceof L.ImageOverlay&&(f=L.rectangle(f.getBounds())),r.push(f);let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,s.push(_),(f instanceof L.Circle||f instanceof L.CircleMarker)&&s.push(_)}}),r=r.filter(f=>this._layer!==f),r=r.filter(f=>f._latlng||f._latlngs&&pr(f._latlngs)),r=r.filter(f=>!f._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let f=L.polyline([],{color:"red",pmIgnore:!0});f._pmTempLayer=!0,s.push(f)}),this._snapList=r.concat(this._otherSnapLayers)):this._snapList=r,this.debugIndicatorLines=s},_handleSnapLayerRemoval({layer:r}){if(!r._leaflet_id)return;let s=this._snapList.findIndex(u=>u._leaflet_id===r._leaflet_id);s>-1&&this._snapList.splice(s,1)},_calcClosestLayer(r,s){return this._calcClosestLayers(r,s,1)[0]},_calcClosestLayers(r,s,u=1){let f=[],_={};s.forEach((E,P)=>{if(E._parentCopy&&E._parentCopy===this._layer||E.getLatLngs?.().flat(5).length<2)return;let D=this._calcLayerDistances(r,E);if(D.distance=Math.floor(D.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[P]){let R=L.polyline([],{color:"red",pmIgnore:!0});R._pmTempLayer=!0,this.debugIndicatorLines[P]=R}this.debugIndicatorLines[P].setLatLngs([r,D.latlng])}u===1&&(_.distance===void 0||D.distance-5<=_.distance)?(D.distance+5<_.distance&&(f=[]),_=D,_.layer=E,f.push(_)):u!==1&&(_={},_=D,_.layer=E,f.push(_))}),u!==1&&(f=f.sort((E,P)=>E.distance-P.distance)),u===-1&&(u=f.length);let x=this._getClosestLayerByPriority(f,u);return L.Util.isArray(x)?x:[x]},_calcLayerDistances(r,s){let u=this._map,f=s instanceof L.Marker||s instanceof L.CircleMarker,_=s instanceof L.Polygon,x=r;if(f){let E=s.getLatLng();return{latlng:{...E},distance:this._getDistance(u,E,x)}}return this._calcLatLngDistances(x,s.getLatLngs(),u,_)},_calcLatLngDistances(r,s,u,f=!1){let _,x,E,P=D=>{D.forEach((R,K)=>{if(Array.isArray(R)){P(R);return}if(this.options.snapSegment){let V=R,ge;f?ge=K+1===D.length?0:K+1:ge=K+1===D.length?void 0:K+1;let ye=D[ge];if(ye){let Be=this._getDistanceToSegment(u,r,V,ye);(x===void 0||Be<x)&&(x=Be,E=[V,ye])}}else{let V=this._getDistance(u,r,R);(x===void 0||V<x)&&(x=V,_=R)}})};return P(s),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(u,r,E[0],E[1])},segment:E,distance:x}:{latlng:_,distance:x}},_getClosestLayerByPriority(r,s=1){r=r.sort((E,P)=>E._leaflet_id-P._leaflet_id);let u=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],f=this._map.pm.globalOptions.snappingOrder||[],_=0,x={};return f.concat(u).forEach(E=>{x[E]||(_+=1,x[E]=_)}),r.sort(ia("instanceofShape",x)),s===1?r[0]||{}:r.slice(0,s)},_checkPrioritiySnapping(r){let s=this._map,u=r.segment[0],f=r.segment[1],_=r.latlng,x=_;if(this.options.snapVertex){let E=this._getDistance(s,u,_),P=this._getDistance(s,f,_),D=E<P?u:f,R=E<P?E:P;if(this.options.snapMiddle){let V=L.PM.Utils.calcMiddleLatLng(s,u,f),ge=this._getDistance(s,V,_);ge<E&&ge<P&&(D=V,R=ge)}let K=this.options.snapDistance;R<K&&(x=D)}return{...x}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(r,s,u,f){let _=r.getMaxZoom();_===1/0&&(_=r.getZoom());let x=r.project(s,_),E=r.project(u,_),P=r.project(f,_),D=L.LineUtil.closestPointOnSegment(x,E,P);return r.unproject(D,_)},_getDistanceToSegment(r,s,u,f){let _=r.latLngToContainerPoint(s),x=r.latLngToContainerPoint(u),E=r.latLngToContainerPoint(f);return L.LineUtil.pointToSegmentDistance(_,x,E)},_getDistance(r,s,u){return r.latLngToContainerPoint(s).distanceTo(r.latLngToContainerPoint(u))}},la=lo,Dl=L.Class.extend({includes:[la,di],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(r){L.Util.setOptions(this,r),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(r){let s=new L.Icon.Default;s.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=s,this._map=r,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(u=>{this[u]=new L.PM.Draw[u](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(r,s=!1){s?this.options.pathOptions=(0,Al.default)(this.options.pathOptions,r):this.options.pathOptions=r},getShapes(){return this.shapes},getShape(){return this._shape},enable(r,s){if(!r)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[r].enable(s)},disable(){this.shapes.forEach(r=>{this[r].disable()})},addControls(){this.shapes.forEach(r=>{this[r].addButton()})},getActiveShape(){let r;return this.shapes.forEach(s=>{this[s]._enabled&&(r=s)}),r},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let r=[];this._map.eachLayer(s=>{(s instanceof L.Polyline||s instanceof L.Marker||s instanceof L.Circle||s instanceof L.CircleMarker||s instanceof L.ImageOverlay)&&(s._pmTempLayer||r.push(s))}),this._enabled?r.forEach(s=>{L.PM.Utils.disablePopup(s)}):r.forEach(s=>{L.PM.Utils.enablePopup(s)})},createNewDrawInstance(r,s){let u=this._getShapeFromBtnName(s);if(this[r])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[u])throw new TypeError(`There is no class L.PM.Draw.${u}`);return this[r]=new L.PM.Draw[u](this._map),this[r].toolbarButtonName=r,this[r]._shape=r,this.shapes.push(r),this[s]&&this[r].setOptions(this[s].options),this[r].setOptions(this[r].options),this[r]},_getShapeFromBtnName(r){let s={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return s[r]?s[r]:this[r]?this[r]._shape:r},_finishLayer(r){r.pm&&(r.pm.setOptions(this.options),r.pm._shape=this._shape,r.pm._map=this._map),this._addDrawnLayerProp(r)},_addDrawnLayerProp(r){r._drawnByGeoman=!0},_setPane(r,s){s==="layerPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":s==="vertexPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":s==="markerPane"&&(r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),on=Dl;on.Marker=on.extend({initialize(r){this._map=r,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(r){L.Util.setOptions(this,r),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(r){this.enabled()?this.disable():this.enable(r)},isRelevantMarker(r){return r instanceof L.Marker&&r.pm&&!r._pmTempLayer&&!r.pm._initTextMarker},_syncHintMarker(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){let s=r;s.target=this._hintMarker,this._handleSnapping(s)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(r){if(!r.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng(),u=new L.Marker(s,this.options.markerStyle);this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm&&this.options.markerEditable?u.pm.enable():u.dragging&&u.dragging.disable(),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){this.options.markerStyle?.icon&&this._hintMarker?.setIcon(this.options.markerStyle.icon)}});var fn=63710088e-1,Ja={centimeters:fn*100,centimetres:fn*100,degrees:fn/111325,feet:fn*3.28084,inches:fn*39.37,kilometers:fn/1e3,kilometres:fn/1e3,meters:fn,metres:fn,miles:fn/1609.344,millimeters:fn*1e3,millimetres:fn*1e3,nauticalmiles:fn/1852,radians:1,yards:fn*1.0936};function Hr(r,s,u){u===void 0&&(u={});var f={type:"Feature"};return(u.id===0||u.id)&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.properties=s||{},f.geometry=r,f}function pi(r,s,u){if(u===void 0&&(u={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ua(r[0])||!ua(r[1]))throw new Error("coordinates must contain numbers");var f={type:"Point",coordinates:r};return Hr(f,s,u)}function Zr(r,s,u){if(u===void 0&&(u={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");var f={type:"LineString",coordinates:r};return Hr(f,s,u)}function Bn(r,s){s===void 0&&(s={});var u={type:"FeatureCollection"};return s.id&&(u.id=s.id),s.bbox&&(u.bbox=s.bbox),u.features=r,u}function Ol(r,s){s===void 0&&(s="kilometers");var u=Ja[s];if(!u)throw new Error(s+" units is invalid");return r*u}function mi(r,s){s===void 0&&(s="kilometers");var u=Ja[s];if(!u)throw new Error(s+" units is invalid");return r/u}function Tn(r){var s=r%(2*Math.PI);return s*180/Math.PI}function Un(r){var s=r%360;return s*Math.PI/180}function ua(r){return!isNaN(r)&&r!==null&&!Array.isArray(r)}function ks(r){var s,u,f={type:"FeatureCollection",features:[]};if(r.type==="Feature"?u=r.geometry:u=r,u.type==="LineString")s=[u.coordinates];else if(u.type==="MultiLineString")s=u.coordinates;else if(u.type==="MultiPolygon")s=[].concat.apply([],u.coordinates);else if(u.type==="Polygon")s=u.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return s.forEach(function(_){s.forEach(function(x){for(var E=0;E<_.length-1;E++)for(var P=E;P<x.length-1;P++)if(!(_===x&&(Math.abs(E-P)===1||E===0&&P===_.length-2&&_[E][0]===_[_.length-1][0]&&_[E][1]===_[_.length-1][1]))){var D=ha(_[E][0],_[E][1],_[E+1][0],_[E+1][1],x[P][0],x[P][1],x[P+1][0],x[P+1][1]);D&&f.features.push(pi([D[0],D[1]]))}})}),f}function ha(r,s,u,f,_,x,E,P){var D,R,K,V,ge,ye={x:null,y:null,onLine1:!1,onLine2:!1};return D=(P-x)*(u-r)-(E-_)*(f-s),D===0?ye.x!==null&&ye.y!==null?ye:!1:(R=s-x,K=r-_,V=(E-_)*R-(P-x)*K,ge=(u-r)*R-(f-s)*K,R=V/D,K=ge/D,ye.x=r+R*(u-r),ye.y=s+R*(f-s),R>=0&&R<=1&&(ye.onLine1=!0),K>=0&&K<=1&&(ye.onLine2=!0),ye.onLine1&&ye.onLine2?[ye.x,ye.y]:!1)}on.Line=on.extend({initialize(r){this._map=r,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(r){L.Util.setOptions(this,r),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(r){this.enabled()?this.disable():this.enable(r)},_syncHintLine(){let r=this._layer.getLatLngs();if(r.length>0){let s=r[r.length-1];this._hintline.setLatLngs([s,this._hintMarker.getLatLng()])}},_syncHintMarker(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){let u=r;u.target=this._hintMarker,this._handleSnapping(u)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let s=this._layer._defaultShape().slice();s.push(this._hintMarker.getLatLng()),this._change(s)},hasSelfIntersection(){return ks(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(r,s){let u=L.polyline(this._layer.getLatLngs());r&&(s||(s=this._hintMarker.getLatLng()),u.addLatLng(s));let f=ks(u.toGeoJSON(15));this._doesSelfIntersect=f.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(f,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(r){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,r.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng(),u=this._layer.getLatLngs(),f=u[u.length-1];if(s.equals(u[0])||u.length>0&&s.equals(f)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:s,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(s);let _=this._createMarker(s);this._setTooltipText(),this._setHintLineAfterNewVertex(s),this._fireVertexAdded(_,void 0,s,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(r)},_setHintLineAfterNewVertex(r){this._hintline.setLatLngs([r,r])},_removeLastVertex(){let r=this._markers;if(r.length<=1){this.disable();return}let s=this._layer.getLatLngs(),u=r[r.length-1],{indexPath:f}=L.PM.Utils.findDeepMarkerIndex(r,u);r.pop(),this._layerGroup.removeLayer(u);let _=r[r.length-1],x=s.indexOf(_.getLatLng());s=s.slice(0,x+1),this._layer.setLatLngs(s),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(u,f,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let r=this._layer.getLatLngs();if(r.length<=1)return;let s=L.polyline(r,this.options.pathOptions);this._setPane(s,"layerPane"),this._finishLayer(s),s.addTo(this._map.pm._getContainingLayer()),this._fireCreate(s),this.options.snappable&&this._cleanupSnapping();let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},_createMarker(r){let s=new L.Marker(r,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this._layerGroup.addLayer(s),this._markers.push(s),s.on("click",this._finishShape,this),s},_setTooltipText(){let{length:r}=this._layer.getLatLngs().flat(),s="";r<=1?s=ht("tooltips.continueLine"):s=ht("tooltips.finishLine"),this._hintMarker.setTooltipContent(s)},_change(r){this._fireChange(r,"Draw")},setStyle(){this._layer?.setStyle(this.options.templineStyle),this._hintline?.setStyle(this.options.hintlineStyle)}}),on.Polygon=on.Line.extend({initialize(r){this._map=r,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(r){L.PM.Draw.Line.prototype.enable.call(this,r),this._layer.pm._shape="Polygon"},_createMarker(r){let s=new L.Marker(r,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this._layerGroup.addLayer(s),this._markers.push(s),this._layer.getLatLngs().flat().length===1?(s.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(s)-1,this.options.snappable&&this._cleanupSnapping()):s.on("click",()=>1),s},_setTooltipText(){let{length:r}=this._layer.getLatLngs().flat(),s="";r<=2?s=ht("tooltips.continueLine"):s=ht("tooltips.finishPoly"),this._hintMarker.setTooltipContent(s)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let r=this._layer.getLatLngs();if(r.length<=2)return;let s=L.polygon(r,this.options.pathOptions);this._setPane(s,"layerPane"),this._finishLayer(s),s.addTo(this._map.pm._getContainingLayer()),this._fireCreate(s),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))}}),on.Rectangle=on.extend({initialize(r){this._map=r,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(r){if(L.Util.setOptions(this,r),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let s=0;s<2;s+=1){let u=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._styleMarkers.push(u)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(r){this.enabled()?this.disable():this.enable(r)},_placeStartingMarkers(r){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(s),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(u=>{L.DomUtil.addClass(u._icon,"visible"),u.setLatLng(s)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ht("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let r=this._startMarker.getLatLng();r&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([r,r]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){let u=r;u.target=this._hintMarker,this._handleSnapping(u)}let s=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(s,"Draw")},_syncRectangleSize(){let r=Wa(this._startMarker.getLatLng(),this._map),s=Wa(this._hintMarker.getLatLng(),this._map),u=L.PM.Utils._getRotatedRectangle(r,s,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(u),this.options.cursorMarker&&this._styleMarkers){let f=[];u.forEach(_=>{!_.equals(r,1e-8)&&!_.equals(s,1e-8)&&f.push(_)}),f.forEach((_,x)=>{try{this._styleMarkers[x].setLatLng(_)}catch{}})}},_findCorners(){let r=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(r[0],r[2],this.options.rectangleAngle||0,this._map)},_finishShape(r){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng(),u=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||u.equals(s))return;let f=L.rectangle([u,s],this.options.pathOptions);if(this.options.rectangleAngle){let x=L.PM.Utils._getRotatedRectangle(u,s,this.options.rectangleAngle||0,this._map);f.setLatLngs(x),f.pm&&f.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(f,"layerPane"),this._finishLayer(f),f.addTo(this._map.pm._getContainingLayer()),this._fireCreate(f);let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},setStyle(){this._layer?.setStyle(this.options.pathOptions)}}),on.CircleMarker=on.extend({initialize(r){this._map=r,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(r){if(L.Util.setOptions(this,r),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let s={};L.extend(s,this.options.templineStyle),s.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),s),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.disable()})},enabled(){return this._enabled},toggle(r){this.enabled()?this.disable():this.enable(r)},_placeCenterMarker(r){this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let s=this._hintMarker.getLatLng();this._centerMarker.setLatLng(s),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let r=this._centerMarker.getLatLng();r&&(this._layer.setLatLng(r),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ht("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let r=this._centerMarker.getLatLng(),s=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([r,s])},_syncCircleRadius(){let r=this._centerMarker.getLatLng(),s=this._hintMarker.getLatLng(),u=this._distanceCalculation(r,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u)},_syncHintMarker(r){if(this._hintMarker.setLatLng(r.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let u=r;u.target=this._hintMarker,this._handleSnapping(u)}this._handleHintMarkerSnapping();let s=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(s,"Draw")},isRelevantMarker(r){return r instanceof L.CircleMarker&&!(r instanceof L.Circle)&&r.pm&&!r._pmTempLayer},_createMarker(r){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!r.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng(),u=new this._BaseCircleClass(s,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(u),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(r){r.pm&&this.options.markerEditable&&r.pm.enable()},_finishShape(r){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._centerMarker.getLatLng(),u=this._defaultRadius;if(this.options[this._editableOption]){let E=this._hintMarker.getLatLng();u=this._distanceCalculation(s,E),this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?u=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(u=this.options[this._maxRadiusOption])}let f={...this.options.pathOptions,radius:u},_=new this._BaseCircleClass(s,f);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&_.pm._updateHiddenPolyCircle(),this._fireCreate(_);let x=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(x))},_getNewDestinationOfHintMarker(){let r=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return r;let s=this._centerMarker.getLatLng(),u=this._distanceCalculation(s,r);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?r=jr(this._map,s,r,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(r=jr(this._map,s,r,this._getMaxDistanceInMeter()))}return r},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let r=this._centerMarker.getLatLng(),s=this._hintMarker.getLatLng(),u=this._distanceCalculation(r,s);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let r={};L.extend(r,this.options.templineStyle),this.options[this._editableOption]&&(r.radius=0),this._layer?.setStyle(r),this._hintline?.setStyle(this.options.hintlineStyle)},_distanceCalculation(r,s){return this._map.project(r).distanceTo(this._map.project(s))}}),on.Circle=on.CircleMarker.extend({initialize(r){this._map=r,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(r,s){return this._map.distance(r,s)}});function $n(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return r.geometry.coordinates;if(r.type==="Point")return r.coordinates}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return r;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function mr(r){if(Array.isArray(r))return r;if(r.type==="Feature"){if(r.geometry!==null)return r.geometry.coordinates}else if(r.coordinates)return r.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function uo(r){return r.type==="Feature"?r.geometry:r}function ca(r,s){return r.type==="FeatureCollection"?"FeatureCollection":r.type==="GeometryCollection"?"GeometryCollection":r.type==="Feature"&&r.geometry!==null?r.geometry.type:r.type}function da(r,s,u){if(r!==null)for(var f,_,x,E,P,D,R,K=0,V=0,ge,ye=r.type,Be=ye==="FeatureCollection",Ie=ye==="Feature",Ue=Be?r.features.length:1,_t=0;_t<Ue;_t++){R=Be?r.features[_t].geometry:Ie?r.geometry:r,ge=R?R.type==="GeometryCollection":!1,P=ge?R.geometries.length:1;for(var H=0;H<P;H++){var ee=0,oe=0;if(E=ge?R.geometries[H]:R,E!==null){D=E.coordinates;var we=E.type;switch(K=0,we){case null:break;case"Point":if(s(D,V,_t,ee,oe)===!1)return!1;V++,ee++;break;case"LineString":case"MultiPoint":for(f=0;f<D.length;f++){if(s(D[f],V,_t,ee,oe)===!1)return!1;V++,we==="MultiPoint"&&ee++}we==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(f=0;f<D.length;f++){for(_=0;_<D[f].length-K;_++){if(s(D[f][_],V,_t,ee,oe)===!1)return!1;V++}we==="MultiLineString"&&ee++,we==="Polygon"&&oe++}we==="Polygon"&&ee++;break;case"MultiPolygon":for(f=0;f<D.length;f++){for(oe=0,_=0;_<D[f].length;_++){for(x=0;x<D[f][_].length-K;x++){if(s(D[f][_][x],V,_t,ee,oe)===!1)return!1;V++}oe++}ee++}break;case"GeometryCollection":for(f=0;f<E.geometries.length;f++)if(da(E.geometries[f],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function vn(r,s){if(r.type==="Feature")s(r,0);else if(r.type==="FeatureCollection")for(var u=0;u<r.features.length&&s(r.features[u],u)!==!1;u++);}function qr(r,s,u){var f=u;return vn(r,function(_,x){x===0&&u===void 0?f=_:f=s(f,_,x)}),f}function bs(r,s){var u,f,_,x,E,P,D,R,K,V,ge=0,ye=r.type==="FeatureCollection",Be=r.type==="Feature",Ie=ye?r.features.length:1;for(u=0;u<Ie;u++){for(P=ye?r.features[u].geometry:Be?r.geometry:r,R=ye?r.features[u].properties:Be?r.properties:{},K=ye?r.features[u].bbox:Be?r.bbox:void 0,V=ye?r.features[u].id:Be?r.id:void 0,D=P?P.type==="GeometryCollection":!1,E=D?P.geometries.length:1,_=0;_<E;_++){if(x=D?P.geometries[_]:P,x===null){if(s(null,ge,R,K,V)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(x,ge,R,K,V)===!1)return!1;break}case"GeometryCollection":{for(f=0;f<x.geometries.length;f++)if(s(x.geometries[f],ge,R,K,V)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ge++}}function Qn(r,s){bs(r,function(u,f,_,x,E){var P=u===null?null:u.type;switch(P){case null:case"Point":case"LineString":case"Polygon":return s(Hr(u,_,{bbox:x,id:E}),f,0)===!1?!1:void 0}var D;switch(P){case"MultiPoint":D="Point";break;case"MultiLineString":D="LineString";break;case"MultiPolygon":D="Polygon";break}for(var R=0;R<u.coordinates.length;R++){var K=u.coordinates[R],V={type:D,coordinates:K};if(s(Hr(V,_),f,R)===!1)return!1}})}function Ya(r){if(!r)throw new Error("geojson is required");var s=[];return Qn(r,function(u){gi(u,s)}),Bn(s)}function gi(r,s){var u=[],f=r.geometry;if(f!==null){switch(f.type){case"Polygon":u=mr(f);break;case"LineString":u=[mr(f)]}u.forEach(function(_){var x=Xa(_,r.properties);x.forEach(function(E){E.id=s.length,s.push(E)})})}}function Xa(r,s){var u=[];return r.reduce(function(f,_){var x=Zr([f,_],s);return x.bbox=qi(f,_),u.push(x),_}),u}function qi(r,s){var u=r[0],f=r[1],_=s[0],x=s[1],E=u<_?u:_,P=f<x?f:x,D=u>_?u:_,R=f>x?f:x;return[E,P,D,R]}var Cs=Ya,Ir=b(cr(),1);function Rl(r,s){var u={},f=[];if(r.type==="LineString"&&(r=Hr(r)),s.type==="LineString"&&(s=Hr(s)),r.type==="Feature"&&s.type==="Feature"&&r.geometry!==null&&s.geometry!==null&&r.geometry.type==="LineString"&&s.geometry.type==="LineString"&&r.geometry.coordinates.length===2&&s.geometry.coordinates.length===2){var _=Fr(r,s);return _&&f.push(_),Bn(f)}var x=(0,Ir.default)();return x.load(Cs(s)),vn(Cs(r),function(E){vn(x.search(E),function(P){var D=Fr(E,P);if(D){var R=mr(D).join(",");u[R]||(u[R]=!0,f.push(D))}})}),Bn(f)}function Fr(r,s){var u=mr(r),f=mr(s);if(u.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(f.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var _=u[0][0],x=u[0][1],E=u[1][0],P=u[1][1],D=f[0][0],R=f[0][1],K=f[1][0],V=f[1][1],ge=(V-R)*(E-_)-(K-D)*(P-x),ye=(K-D)*(x-R)-(V-R)*(_-D),Be=(E-_)*(x-R)-(P-x)*(_-D);if(ge===0)return null;var Ie=ye/ge,Ue=Be/ge;if(Ie>=0&&Ie<=1&&Ue>=0&&Ue<=1){var _t=_+Ie*(E-_),H=x+Ie*(P-x);return pi([_t,H])}return null}var gr=Rl,fa=b(cr(),1);function ho(r,s,u){u===void 0&&(u={});var f=$n(r),_=$n(s),x=Un(_[1]-f[1]),E=Un(_[0]-f[0]),P=Un(f[1]),D=Un(_[1]),R=Math.pow(Math.sin(x/2),2)+Math.pow(Math.sin(E/2),2)*Math.cos(P)*Math.cos(D);return Ol(2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R)),u.units)}var er=ho;function jn(r){var s=r[0],u=r[1],f=r[2],_=r[3],x=er(r.slice(0,2),[f,u]),E=er(r.slice(0,2),[s,_]);if(x>=E){var P=(u+_)/2;return[s,P-(f-s)/2,f,P+(f-s)/2]}else{var D=(s+f)/2;return[D-(_-u)/2,u,D+(_-u)/2,_]}}var jl=jn;function tr(r){var s=[1/0,1/0,-1/0,-1/0];return da(r,function(u){s[0]>u[0]&&(s[0]=u[0]),s[1]>u[1]&&(s[1]=u[1]),s[2]<u[0]&&(s[2]=u[0]),s[3]<u[1]&&(s[3]=u[1])}),s}tr.default=tr;var Es=tr;function _r(r,s){s===void 0&&(s={});var u=s.precision,f=s.coordinates,_=s.mutate;if(u=u==null||isNaN(u)?6:u,f=f==null||isNaN(f)?3:f,!r)throw new Error("<geojson> is required");if(typeof u!="number")throw new Error("<precision> must be a number");if(typeof f!="number")throw new Error("<coordinates> must be a number");(_===!1||_===void 0)&&(r=JSON.parse(JSON.stringify(r)));var x=Math.pow(10,u);return da(r,function(E){Wi(E,x,f)}),r}function Wi(r,s,u){r.length>u&&r.splice(u,r.length);for(var f=0;f<r.length;f++)r[f]=Math.round(r[f]*s)/s;return r}var co=_r;function Ms(r,s,u){if(u===void 0&&(u={}),u.final===!0)return Ps(r,s);var f=$n(r),_=$n(s),x=Un(f[0]),E=Un(_[0]),P=Un(f[1]),D=Un(_[1]),R=Math.sin(E-x)*Math.cos(D),K=Math.cos(P)*Math.sin(D)-Math.sin(P)*Math.cos(D)*Math.cos(E-x);return Tn(Math.atan2(R,K))}function Ps(r,s){var u=Ms(s,r);return u=(u+180)%360,u}function Ss(r,s,u,f){f===void 0&&(f={});var _=$n(r),x=Un(_[0]),E=Un(_[1]),P=Un(u),D=mi(s,f.units),R=Math.asin(Math.sin(E)*Math.cos(D)+Math.cos(E)*Math.sin(D)*Math.cos(P)),K=x+Math.atan2(Math.sin(P)*Math.sin(D)*Math.cos(E),Math.cos(D)-Math.sin(E)*Math.sin(R)),V=Tn(K),ge=Tn(R);return pi([V,ge],f.properties)}function fo(r,s,u){u===void 0&&(u={});var f=pi([1/0,1/0],{dist:1/0}),_=0;return Qn(r,function(x){for(var E=mr(x),P=0;P<E.length-1;P++){var D=pi(E[P]);D.properties.dist=er(s,D,u);var R=pi(E[P+1]);R.properties.dist=er(s,R,u);var K=er(D,R,u),V=Math.max(D.properties.dist,R.properties.dist),ge=Ms(D,R),ye=Ss(s,V,ge+90,u),Be=Ss(s,V,ge-90,u),Ie=gr(Zr([ye.geometry.coordinates,Be.geometry.coordinates]),Zr([D.geometry.coordinates,R.geometry.coordinates])),Ue=null;Ie.features.length>0&&(Ue=Ie.features[0],Ue.properties.dist=er(s,Ue,u),Ue.properties.location=_+er(D,Ue,u)),D.properties.dist<f.properties.dist&&(f=D,f.properties.index=P,f.properties.location=_),R.properties.dist<f.properties.dist&&(f=R,f.properties.index=P+1,f.properties.location=_+K),Ue&&Ue.properties.dist<f.properties.dist&&(f=Ue,f.properties.index=P),_+=K}}),f}var Ki=fo;function po(r,s){if(!r)throw new Error("line is required");if(!s)throw new Error("splitter is required");var u=ca(r),f=ca(s);if(u!=="LineString")throw new Error("line must be LineString");if(f==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(f==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var _=co(s,{precision:7});switch(f){case"Point":return go(r,_);case"MultiPoint":return mo(r,_);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return mo(r,gr(r,_))}}function mo(r,s){var u=[],f=(0,fa.default)();return Qn(s,function(_){if(u.forEach(function(P,D){P.id=D}),!u.length)u=go(r,_).features,u.forEach(function(P){P.bbox||(P.bbox=jl(Es(P)))}),f.load(Bn(u));else{var x=f.search(_);if(x.features.length){var E=Gn(_,x);u=u.filter(function(P){return P.id!==E.id}),f.remove(E),vn(go(E,_),function(P){u.push(P),f.insert(P)})}}}),Bn(u)}function go(r,s){var u=[],f=mr(r)[0],_=mr(r)[r.geometry.coordinates.length-1];if(yr(f,$n(s))||yr(_,$n(s)))return Bn([r]);var x=(0,fa.default)(),E=Cs(r);x.load(E);var P=x.search(s);if(!P.features.length)return Bn([r]);var D=Gn(s,P),R=[f],K=qr(E,function(V,ge,ye){var Be=mr(ge)[1],Ie=$n(s);return ye===D.id?(V.push(Ie),u.push(Zr(V)),yr(Ie,Be)?[Ie]:[Ie,Be]):(V.push(Be),V)},R);return K.length>1&&u.push(Zr(K)),Bn(u)}function Gn(r,s){if(!s.features.length)throw new Error("lines must contain features");if(s.features.length===1)return s.features[0];var u,f=1/0;return vn(s,function(_){var x=Ki(_,r),E=x.properties.dist;E<f&&(u=_,f=E)}),u}function yr(r,s){return r[0]===s[0]&&r[1]===s[1]}var Qa=po;function Ji(r,s,u){if(u===void 0&&(u={}),!r)throw new Error("point is required");if(!s)throw new Error("polygon is required");var f=$n(r),_=uo(s),x=_.type,E=s.bbox,P=_.coordinates;if(E&&ma(f,E)===!1)return!1;x==="Polygon"&&(P=[P]);for(var D=!1,R=0;R<P.length&&!D;R++)if(pa(f,P[R][0],u.ignoreBoundary)){for(var K=!1,V=1;V<P[R].length&&!K;)pa(f,P[R][V],!u.ignoreBoundary)&&(K=!0),V++;K||(D=!0)}return D}function pa(r,s,u){var f=!1;s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]&&(s=s.slice(0,s.length-1));for(var _=0,x=s.length-1;_<s.length;x=_++){var E=s[_][0],P=s[_][1],D=s[x][0],R=s[x][1],K=r[1]*(E-D)+P*(D-r[0])+R*(r[0]-E)===0&&(E-r[0])*(D-r[0])<=0&&(P-r[1])*(R-r[1])<=0;if(K)return!u;var V=P>r[1]!=R>r[1]&&r[0]<(D-E)*(r[1]-P)/(R-P)+E;V&&(f=!f)}return f}function ma(r,s){return s[0]<=r[0]&&s[1]<=r[1]&&s[2]>=r[0]&&s[3]>=r[1]}function ga(r,s,u){u===void 0&&(u={});for(var f=$n(r),_=mr(s),x=0;x<_.length-1;x++){var E=!1;if(u.ignoreEndVertices&&(x===0&&(E="start"),x===_.length-2&&(E="end"),x===0&&x+1===_.length-1&&(E="both")),vr(_[x],_[x+1],f,E,typeof u.epsilon>"u"?null:u.epsilon))return!0}return!1}function vr(r,s,u,f,_){var x=u[0],E=u[1],P=r[0],D=r[1],R=s[0],K=s[1],V=u[0]-P,ge=u[1]-D,ye=R-P,Be=K-D,Ie=V*Be-ge*ye;if(_!==null){if(Math.abs(Ie)>_)return!1}else if(Ie!==0)return!1;if(f){if(f==="start")return Math.abs(ye)>=Math.abs(Be)?ye>0?P<x&&x<=R:R<=x&&x<P:Be>0?D<E&&E<=K:K<=E&&E<D;if(f==="end")return Math.abs(ye)>=Math.abs(Be)?ye>0?P<=x&&x<R:R<x&&x<=P:Be>0?D<=E&&E<K:K<E&&E<=D;if(f==="both")return Math.abs(ye)>=Math.abs(Be)?ye>0?P<x&&x<R:R<x&&x<P:Be>0?D<E&&E<K:K<E&&E<D}else return Math.abs(ye)>=Math.abs(Be)?ye>0?P<=x&&x<=R:R<=x&&x<=P:Be>0?D<=E&&E<=K:K<=E&&E<=D;return!1}var Wr=ga;function Yi(r,s){var u=uo(r),f=uo(s),_=u.type,x=f.type,E=u.coordinates,P=f.coordinates;switch(_){case"Point":switch(x){case"Point":return _i(E,P);default:throw new Error("feature2 "+x+" geometry not supported")}case"MultiPoint":switch(x){case"Point":return Xi(u,f);case"MultiPoint":return Bs(u,f);default:throw new Error("feature2 "+x+" geometry not supported")}case"LineString":switch(x){case"Point":return Wr(f,u,{ignoreEndVertices:!0});case"LineString":return Kr(u,f);case"MultiPoint":return _o(u,f);default:throw new Error("feature2 "+x+" geometry not supported")}case"Polygon":switch(x){case"Point":return Ji(f,u,{ignoreBoundary:!0});case"LineString":return Qi(u,f);case"Polygon":return Jr(u,f);case"MultiPoint":return el(u,f);default:throw new Error("feature2 "+x+" geometry not supported")}default:throw new Error("feature1 "+_+" geometry not supported")}}function Xi(r,s){var u,f=!1;for(u=0;u<r.coordinates.length;u++)if(_i(r.coordinates[u],s.coordinates)){f=!0;break}return f}function Bs(r,s){for(var u=0,f=s.coordinates;u<f.length;u++){for(var _=f[u],x=!1,E=0,P=r.coordinates;E<P.length;E++){var D=P[E];if(_i(_,D)){x=!0;break}}if(!x)return!1}return!0}function _o(r,s){for(var u=!1,f=0,_=s.coordinates;f<_.length;f++){var x=_[f];if(Wr(x,r,{ignoreEndVertices:!0})&&(u=!0),!Wr(x,r))return!1}return!!u}function el(r,s){for(var u=0,f=s.coordinates;u<f.length;u++){var _=f[u];if(!Ji(_,r,{ignoreBoundary:!0}))return!1}return!0}function Kr(r,s){for(var u=!1,f=0,_=s.coordinates;f<_.length;f++){var x=_[f];if(Wr({type:"Point",coordinates:x},r,{ignoreEndVertices:!0})&&(u=!0),!Wr({type:"Point",coordinates:x},r,{ignoreEndVertices:!1}))return!1}return u}function Qi(r,s){var u=!1,f=0,_=Es(r),x=Es(s);if(!yo(_,x))return!1;for(f;f<s.coordinates.length-1;f++){var E=tl(s.coordinates[f],s.coordinates[f+1]);if(Ji({type:"Point",coordinates:E},r,{ignoreBoundary:!0})){u=!0;break}}return u}function Jr(r,s){if(r.type==="Feature"&&r.geometry===null||s.type==="Feature"&&s.geometry===null)return!1;var u=Es(r),f=Es(s);if(!yo(u,f))return!1;for(var _=uo(s).coordinates,x=0,E=_;x<E.length;x++)for(var P=E[x],D=0,R=P;D<R.length;D++){var K=R[D];if(!Ji(K,r))return!1}return!0}function yo(r,s){return!(r[0]>s[0]||r[2]<s[2]||r[1]>s[1]||r[3]<s[3])}function _i(r,s){return r[0]===s[0]&&r[1]===s[1]}function tl(r,s){return[(r[0]+s[0])/2,(r[1]+s[1])/2]}var wr=b(Gr()),vo=r=>()=>r,Ts=r=>{let s=r?(u,f)=>f.minus(u).abs().isLessThanOrEqualTo(r):vo(!1);return(u,f)=>s(u,f)?0:u.comparedTo(f)};function es(r){let s=r?(u,f,_,x,E)=>u.exponentiatedBy(2).isLessThanOrEqualTo(x.minus(f).exponentiatedBy(2).plus(E.minus(_).exponentiatedBy(2)).times(r)):vo(!1);return(u,f,_)=>{let x=u.x,E=u.y,P=_.x,D=_.y,R=E.minus(D).times(f.x.minus(P)).minus(x.minus(P).times(f.y.minus(D)));return s(R,x,E,P,D)?0:R.comparedTo(0)}}var nl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,In=Math.ceil,Qt=Math.floor,an="[BigNumber Error] ",_a=an+"Number primitive has more than 15 significant digits: ",nr=1e14,st=14,wo=9007199254740991,As=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],xr=1e7,ct=1e9;function xo(r){var s,u,f,_=H.prototype={constructor:H,toString:null,valueOf:null},x=new H(1),E=20,P=4,D=-7,R=21,K=-1e7,V=1e7,ge=!1,ye=1,Be=0,Ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ue="0123456789abcdefghijklmnopqrstuvwxyz",_t=!0;function H(A,I){var z,N,U,G,te,Q,re,de,pe=this;if(!(pe instanceof H))return new H(A,I);if(I==null){if(A&&A._isBigNumber===!0){pe.s=A.s,!A.c||A.e>V?pe.c=pe.e=null:A.e<K?pe.c=[pe.e=0]:(pe.e=A.e,pe.c=A.c.slice());return}if((Q=typeof A=="number")&&A*0==0){if(pe.s=1/A<0?(A=-A,-1):1,A===~~A){for(G=0,te=A;te>=10;te/=10,G++);G>V?pe.c=pe.e=null:(pe.e=G,pe.c=[A]);return}de=String(A)}else{if(!nl.test(de=String(A)))return f(pe,de,Q);pe.s=de.charCodeAt(0)==45?(de=de.slice(1),-1):1}(G=de.indexOf("."))>-1&&(de=de.replace(".","")),(te=de.search(/e/i))>0?(G<0&&(G=te),G+=+de.slice(te+1),de=de.substring(0,te)):G<0&&(G=de.length)}else{if(t(I,2,Ue.length,"Base"),I==10&&_t)return pe=new H(A),ue(pe,E+pe.e+1,P);if(de=String(A),Q=typeof A=="number"){if(A*0!=0)return f(pe,de,Q,I);if(pe.s=1/A<0?(de=de.slice(1),-1):1,H.DEBUG&&de.replace(/^0\.0*|\./,"").length>15)throw Error(_a+A)}else pe.s=de.charCodeAt(0)===45?(de=de.slice(1),-1):1;for(z=Ue.slice(0,I),G=te=0,re=de.length;te<re;te++)if(z.indexOf(N=de.charAt(te))<0){if(N=="."){if(te>G){G=re;continue}}else if(!U&&(de==de.toUpperCase()&&(de=de.toLowerCase())||de==de.toLowerCase()&&(de=de.toUpperCase()))){U=!0,te=-1,G=0;continue}return f(pe,String(A),Q,I)}Q=!1,de=u(de,I,10,pe.s),(G=de.indexOf("."))>-1?de=de.replace(".",""):G=de.length}for(te=0;de.charCodeAt(te)===48;te++);for(re=de.length;de.charCodeAt(--re)===48;);if(de=de.slice(te,++re)){if(re-=te,Q&&H.DEBUG&&re>15&&(A>wo||A!==Qt(A)))throw Error(_a+pe.s*A);if((G=G-te-1)>V)pe.c=pe.e=null;else if(G<K)pe.c=[pe.e=0];else{if(pe.e=G,pe.c=[],te=(G+1)%st,G<0&&(te+=st),te<re){for(te&&pe.c.push(+de.slice(0,te)),re-=st;te<re;)pe.c.push(+de.slice(te,te+=st));te=st-(de=de.slice(te)).length}else te-=re;for(;te--;de+="0");pe.c.push(+de)}}else pe.c=[pe.e=0]}H.clone=xo,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(A){var I,z;if(A!=null)if(typeof A=="object"){if(A.hasOwnProperty(I="DECIMAL_PLACES")&&(z=A[I],t(z,0,ct,I),E=z),A.hasOwnProperty(I="ROUNDING_MODE")&&(z=A[I],t(z,0,8,I),P=z),A.hasOwnProperty(I="EXPONENTIAL_AT")&&(z=A[I],z&&z.pop?(t(z[0],-ct,0,I),t(z[1],0,ct,I),D=z[0],R=z[1]):(t(z,-ct,ct,I),D=-(R=z<0?-z:z))),A.hasOwnProperty(I="RANGE"))if(z=A[I],z&&z.pop)t(z[0],-ct,-1,I),t(z[1],1,ct,I),K=z[0],V=z[1];else if(t(z,-ct,ct,I),z)K=-(V=z<0?-z:z);else throw Error(an+I+" cannot be zero: "+z);if(A.hasOwnProperty(I="CRYPTO"))if(z=A[I],z===!!z)if(z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ge=z;else throw ge=!z,Error(an+"crypto unavailable");else ge=z;else throw Error(an+I+" not true or false: "+z);if(A.hasOwnProperty(I="MODULO_MODE")&&(z=A[I],t(z,0,9,I),ye=z),A.hasOwnProperty(I="POW_PRECISION")&&(z=A[I],t(z,0,ct,I),Be=z),A.hasOwnProperty(I="FORMAT"))if(z=A[I],typeof z=="object")Ie=z;else throw Error(an+I+" not an object: "+z);if(A.hasOwnProperty(I="ALPHABET"))if(z=A[I],typeof z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(z))_t=z.slice(0,10)=="0123456789",Ue=z;else throw Error(an+I+" invalid: "+z)}else throw Error(an+"Object expected: "+A);return{DECIMAL_PLACES:E,ROUNDING_MODE:P,EXPONENTIAL_AT:[D,R],RANGE:[K,V],CRYPTO:ge,MODULO_MODE:ye,POW_PRECISION:Be,FORMAT:Ie,ALPHABET:Ue}},H.isBigNumber=function(A){if(!A||A._isBigNumber!==!0)return!1;if(!H.DEBUG)return!0;var I,z,N=A.c,U=A.e,G=A.s;e:if({}.toString.call(N)=="[object Array]"){if((G===1||G===-1)&&U>=-ct&&U<=ct&&U===Qt(U)){if(N[0]===0){if(U===0&&N.length===1)return!0;break e}if(I=(U+1)%st,I<1&&(I+=st),String(N[0]).length==I){for(I=0;I<N.length;I++)if(z=N[I],z<0||z>=nr||z!==Qt(z))break e;if(z!==0)return!0}}}else if(N===null&&U===null&&(G===null||G===1||G===-1))return!0;throw Error(an+"Invalid BigNumber: "+A)},H.maximum=H.max=function(){return oe(arguments,-1)},H.minimum=H.min=function(){return oe(arguments,1)},H.random=(function(){var A=9007199254740992,I=Math.random()*A&2097151?function(){return Qt(Math.random()*A)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(z){var N,U,G,te,Q,re=0,de=[],pe=new H(x);if(z==null?z=E:t(z,0,ct),te=In(z/st),ge)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(te*=2));re<te;)Q=N[re]*131072+(N[re+1]>>>11),Q>=9e15?(U=crypto.getRandomValues(new Uint32Array(2)),N[re]=U[0],N[re+1]=U[1]):(de.push(Q%1e14),re+=2);re=te/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(te*=7);re<te;)Q=(N[re]&31)*281474976710656+N[re+1]*1099511627776+N[re+2]*4294967296+N[re+3]*16777216+(N[re+4]<<16)+(N[re+5]<<8)+N[re+6],Q>=9e15?crypto.randomBytes(7).copy(N,re):(de.push(Q%1e14),re+=7);re=te/7}else throw ge=!1,Error(an+"crypto unavailable");if(!ge)for(;re<te;)Q=I(),Q<9e15&&(de[re++]=Q%1e14);for(te=de[--re],z%=st,te&&z&&(Q=As[st-z],de[re]=Qt(te/Q)*Q);de[re]===0;de.pop(),re--);if(re<0)de=[G=0];else{for(G=-1;de[0]===0;de.splice(0,1),G-=st);for(re=1,Q=de[0];Q>=10;Q/=10,re++);re<st&&(G-=st-re)}return pe.e=G,pe.c=de,pe}})(),H.sum=function(){for(var A=1,I=arguments,z=new H(I[0]);A<I.length;)z=z.plus(I[A++]);return z},u=(function(){var A="0123456789";function I(z,N,U,G){for(var te,Q=[0],re,de=0,pe=z.length;de<pe;){for(re=Q.length;re--;Q[re]*=N);for(Q[0]+=G.indexOf(z.charAt(de++)),te=0;te<Q.length;te++)Q[te]>U-1&&(Q[te+1]==null&&(Q[te+1]=0),Q[te+1]+=Q[te]/U|0,Q[te]%=U)}return Q.reverse()}return function(z,N,U,G,te){var Q,re,de,pe,Pe,$e,Ve,Ze,Pt=z.indexOf("."),Bt=E,vt=P;for(Pt>=0&&(pe=Be,Be=0,z=z.replace(".",""),Ze=new H(N),$e=Ze.pow(z.length-Pt),Be=pe,Ze.c=I(v(ln($e.c),$e.e,"0"),10,U,A),Ze.e=Ze.c.length),Ve=I(z,N,U,te?(Q=Ue,A):(Q=A,Ue)),de=pe=Ve.length;Ve[--pe]==0;Ve.pop());if(!Ve[0])return Q.charAt(0);if(Pt<0?--de:($e.c=Ve,$e.e=de,$e.s=G,$e=s($e,Ze,Bt,vt,U),Ve=$e.c,Pe=$e.r,de=$e.e),re=de+Bt+1,Pt=Ve[re],pe=U/2,Pe=Pe||re<0||Ve[re+1]!=null,Pe=vt<4?(Pt!=null||Pe)&&(vt==0||vt==($e.s<0?3:2)):Pt>pe||Pt==pe&&(vt==4||Pe||vt==6&&Ve[re-1]&1||vt==($e.s<0?8:7)),re<1||!Ve[0])z=Pe?v(Q.charAt(1),-Bt,Q.charAt(0)):Q.charAt(0);else{if(Ve.length=re,Pe)for(--U;++Ve[--re]>U;)Ve[re]=0,re||(++de,Ve=[1].concat(Ve));for(pe=Ve.length;!Ve[--pe];);for(Pt=0,z="";Pt<=pe;z+=Q.charAt(Ve[Pt++]));z=v(z,de,Q.charAt(0))}return z}})(),s=(function(){function A(N,U,G){var te,Q,re,de,pe=0,Pe=N.length,$e=U%xr,Ve=U/xr|0;for(N=N.slice();Pe--;)re=N[Pe]%xr,de=N[Pe]/xr|0,te=Ve*re+de*$e,Q=$e*re+te%xr*xr+pe,pe=(Q/G|0)+(te/xr|0)+Ve*de,N[Pe]=Q%G;return pe&&(N=[pe].concat(N)),N}function I(N,U,G,te){var Q,re;if(G!=te)re=G>te?1:-1;else for(Q=re=0;Q<G;Q++)if(N[Q]!=U[Q]){re=N[Q]>U[Q]?1:-1;break}return re}function z(N,U,G,te){for(var Q=0;G--;)N[G]-=Q,Q=N[G]<U[G]?1:0,N[G]=Q*te+N[G]-U[G];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,U,G,te,Q){var re,de,pe,Pe,$e,Ve,Ze,Pt,Bt,vt,Rt,Jt,va,wa,$t,or,Is,Vn=N.s==U.s?1:-1,mn=N.c,Ht=U.c;if(!mn||!mn[0]||!Ht||!Ht[0])return new H(!N.s||!U.s||(mn?Ht&&mn[0]==Ht[0]:!Ht)?NaN:mn&&mn[0]==0||!Ht?Vn*0:Vn/0);for(Pt=new H(Vn),Bt=Pt.c=[],de=N.e-U.e,Vn=G+de+1,Q||(Q=nr,de=pn(N.e/st)-pn(U.e/st),Vn=Vn/st|0),pe=0;Ht[pe]==(mn[pe]||0);pe++);if(Ht[pe]>(mn[pe]||0)&&de--,Vn<0)Bt.push(1),Pe=!0;else{for(wa=mn.length,or=Ht.length,pe=0,Vn+=2,$e=Qt(Q/(Ht[0]+1)),$e>1&&(Ht=A(Ht,$e,Q),mn=A(mn,$e,Q),or=Ht.length,wa=mn.length),va=or,vt=mn.slice(0,or),Rt=vt.length;Rt<or;vt[Rt++]=0);Is=Ht.slice(),Is=[0].concat(Is),$t=Ht[0],Ht[1]>=Q/2&&$t++;do{if($e=0,re=I(Ht,vt,or,Rt),re<0){if(Jt=vt[0],or!=Rt&&(Jt=Jt*Q+(vt[1]||0)),$e=Qt(Jt/$t),$e>1)for($e>=Q&&($e=Q-1),Ve=A(Ht,$e,Q),Ze=Ve.length,Rt=vt.length;I(Ve,vt,Ze,Rt)==1;)$e--,z(Ve,or<Ze?Is:Ht,Ze,Q),Ze=Ve.length,re=1;else $e==0&&(re=$e=1),Ve=Ht.slice(),Ze=Ve.length;if(Ze<Rt&&(Ve=[0].concat(Ve)),z(vt,Ve,Rt,Q),Rt=vt.length,re==-1)for(;I(Ht,vt,or,Rt)<1;)$e++,z(vt,or<Rt?Is:Ht,Rt,Q),Rt=vt.length}else re===0&&($e++,vt=[0]);Bt[pe++]=$e,vt[0]?vt[Rt++]=mn[va]||0:(vt=[mn[va]],Rt=1)}while((va++<wa||vt[0]!=null)&&Vn--);Pe=vt[0]!=null,Bt[0]||Bt.splice(0,1)}if(Q==nr){for(pe=1,Vn=Bt[0];Vn>=10;Vn/=10,pe++);ue(Pt,G+(Pt.e=pe+de*st-1)+1,te,Pe)}else Pt.e=de,Pt.r=+Pe;return Pt}})();function ee(A,I,z,N){var U,G,te,Q,re;if(z==null?z=P:t(z,0,8),!A.c)return A.toString();if(U=A.c[0],te=A.e,I==null)re=ln(A.c),re=N==1||N==2&&(te<=D||te>=R)?m(re,te):v(re,te,"0");else if(A=ue(new H(A),I,z),G=A.e,re=ln(A.c),Q=re.length,N==1||N==2&&(I<=G||G<=D)){for(;Q<I;re+="0",Q++);re=m(re,G)}else if(I-=te,re=v(re,G,"0"),G+1>Q){if(--I>0)for(re+=".";I--;re+="0");}else if(I+=G-Q,I>0)for(G+1==Q&&(re+=".");I--;re+="0");return A.s<0&&U?"-"+re:re}function oe(A,I){for(var z,N,U=1,G=new H(A[0]);U<A.length;U++)N=new H(A[U]),(!N.s||(z=Yr(G,N))===I||z===0&&G.s===I)&&(G=N);return G}function we(A,I,z){for(var N=1,U=I.length;!I[--U];I.pop());for(U=I[0];U>=10;U/=10,N++);return(z=N+z*st-1)>V?A.c=A.e=null:z<K?A.c=[A.e=0]:(A.e=z,A.c=I),A}f=(function(){var A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,z=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,te,Q,re){var de,pe=Q?te:te.replace(U,"");if(N.test(pe))G.s=isNaN(pe)?null:pe<0?-1:1;else{if(!Q&&(pe=pe.replace(A,function(Pe,$e,Ve){return de=(Ve=Ve.toLowerCase())=="x"?16:Ve=="b"?2:8,!re||re==de?$e:Pe}),re&&(de=re,pe=pe.replace(I,"$1").replace(z,"0.$1")),te!=pe))return new H(pe,de);if(H.DEBUG)throw Error(an+"Not a"+(re?" base "+re:"")+" number: "+te);G.s=null}G.c=G.e=null}})();function ue(A,I,z,N){var U,G,te,Q,re,de,pe,Pe=A.c,$e=As;if(Pe){e:{for(U=1,Q=Pe[0];Q>=10;Q/=10,U++);if(G=I-U,G<0)G+=st,te=I,re=Pe[de=0],pe=Qt(re/$e[U-te-1]%10);else if(de=In((G+1)/st),de>=Pe.length)if(N){for(;Pe.length<=de;Pe.push(0));re=pe=0,U=1,G%=st,te=G-st+1}else break e;else{for(re=Q=Pe[de],U=1;Q>=10;Q/=10,U++);G%=st,te=G-st+U,pe=te<0?0:Qt(re/$e[U-te-1]%10)}if(N=N||I<0||Pe[de+1]!=null||(te<0?re:re%$e[U-te-1]),N=z<4?(pe||N)&&(z==0||z==(A.s<0?3:2)):pe>5||pe==5&&(z==4||N||z==6&&(G>0?te>0?re/$e[U-te]:0:Pe[de-1])%10&1||z==(A.s<0?8:7)),I<1||!Pe[0])return Pe.length=0,N?(I-=A.e+1,Pe[0]=$e[(st-I%st)%st],A.e=-I||0):Pe[0]=A.e=0,A;if(G==0?(Pe.length=de,Q=1,de--):(Pe.length=de+1,Q=$e[st-G],Pe[de]=te>0?Qt(re/$e[U-te]%$e[te])*Q:0),N)for(;;)if(de==0){for(G=1,te=Pe[0];te>=10;te/=10,G++);for(te=Pe[0]+=Q,Q=1;te>=10;te/=10,Q++);G!=Q&&(A.e++,Pe[0]==nr&&(Pe[0]=1));break}else{if(Pe[de]+=Q,Pe[de]!=nr)break;Pe[de--]=0,Q=1}for(G=Pe.length;Pe[--G]===0;Pe.pop());}A.e>V?A.c=A.e=null:A.e<K&&(A.c=[A.e=0])}return A}function me(A){var I,z=A.e;return z===null?A.toString():(I=ln(A.c),I=z<=D||z>=R?m(I,z):v(I,z,"0"),A.s<0?"-"+I:I)}return _.absoluteValue=_.abs=function(){var A=new H(this);return A.s<0&&(A.s=1),A},_.comparedTo=function(A,I){return Yr(this,new H(A,I))},_.decimalPlaces=_.dp=function(A,I){var z,N,U,G=this;if(A!=null)return t(A,0,ct),I==null?I=P:t(I,0,8),ue(new H(G),A+G.e+1,I);if(!(z=G.c))return null;if(N=((U=z.length-1)-pn(this.e/st))*st,U=z[U])for(;U%10==0;U/=10,N--);return N<0&&(N=0),N},_.dividedBy=_.div=function(A,I){return s(this,new H(A,I),E,P)},_.dividedToIntegerBy=_.idiv=function(A,I){return s(this,new H(A,I),0,1)},_.exponentiatedBy=_.pow=function(A,I){var z,N,U,G,te,Q,re,de,pe,Pe=this;if(A=new H(A),A.c&&!A.isInteger())throw Error(an+"Exponent not an integer: "+me(A));if(I!=null&&(I=new H(I)),Q=A.e>14,!Pe.c||!Pe.c[0]||Pe.c[0]==1&&!Pe.e&&Pe.c.length==1||!A.c||!A.c[0])return pe=new H(Math.pow(+me(Pe),Q?A.s*(2-a(A)):+me(A))),I?pe.mod(I):pe;if(re=A.s<0,I){if(I.c?!I.c[0]:!I.s)return new H(NaN);N=!re&&Pe.isInteger()&&I.isInteger(),N&&(Pe=Pe.mod(I))}else{if(A.e>9&&(Pe.e>0||Pe.e<-1||(Pe.e==0?Pe.c[0]>1||Q&&Pe.c[1]>=24e7:Pe.c[0]<8e13||Q&&Pe.c[0]<=9999975e7)))return G=Pe.s<0&&a(A)?-0:0,Pe.e>-1&&(G=1/G),new H(re?1/G:G);Be&&(G=In(Be/st+2))}for(Q?(z=new H(.5),re&&(A.s=1),de=a(A)):(U=Math.abs(+me(A)),de=U%2),pe=new H(x);;){if(de){if(pe=pe.times(Pe),!pe.c)break;G?pe.c.length>G&&(pe.c.length=G):N&&(pe=pe.mod(I))}if(U){if(U=Qt(U/2),U===0)break;de=U%2}else if(A=A.times(z),ue(A,A.e+1,1),A.e>14)de=a(A);else{if(U=+me(A),U===0)break;de=U%2}Pe=Pe.times(Pe),G?Pe.c&&Pe.c.length>G&&(Pe.c.length=G):N&&(Pe=Pe.mod(I))}return N?pe:(re&&(pe=x.div(pe)),I?pe.mod(I):G?ue(pe,Be,P,te):pe)},_.integerValue=function(A){var I=new H(this);return A==null?A=P:t(A,0,8),ue(I,I.e+1,A)},_.isEqualTo=_.eq=function(A,I){return Yr(this,new H(A,I))===0},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(A,I){return Yr(this,new H(A,I))>0},_.isGreaterThanOrEqualTo=_.gte=function(A,I){return(I=Yr(this,new H(A,I)))===1||I===0},_.isInteger=function(){return!!this.c&&pn(this.e/st)>this.c.length-2},_.isLessThan=_.lt=function(A,I){return Yr(this,new H(A,I))<0},_.isLessThanOrEqualTo=_.lte=function(A,I){return(I=Yr(this,new H(A,I)))===-1||I===0},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&this.c[0]==0},_.minus=function(A,I){var z,N,U,G,te=this,Q=te.s;if(A=new H(A,I),I=A.s,!Q||!I)return new H(NaN);if(Q!=I)return A.s=-I,te.plus(A);var re=te.e/st,de=A.e/st,pe=te.c,Pe=A.c;if(!re||!de){if(!pe||!Pe)return pe?(A.s=-I,A):new H(Pe?te:NaN);if(!pe[0]||!Pe[0])return Pe[0]?(A.s=-I,A):new H(pe[0]?te:P==3?-0:0)}if(re=pn(re),de=pn(de),pe=pe.slice(),Q=re-de){for((G=Q<0)?(Q=-Q,U=pe):(de=re,U=Pe),U.reverse(),I=Q;I--;U.push(0));U.reverse()}else for(N=(G=(Q=pe.length)<(I=Pe.length))?Q:I,Q=I=0;I<N;I++)if(pe[I]!=Pe[I]){G=pe[I]<Pe[I];break}if(G&&(U=pe,pe=Pe,Pe=U,A.s=-A.s),I=(N=Pe.length)-(z=pe.length),I>0)for(;I--;pe[z++]=0);for(I=nr-1;N>Q;){if(pe[--N]<Pe[N]){for(z=N;z&&!pe[--z];pe[z]=I);--pe[z],pe[N]+=nr}pe[N]-=Pe[N]}for(;pe[0]==0;pe.splice(0,1),--de);return pe[0]?we(A,pe,de):(A.s=P==3?-1:1,A.c=[A.e=0],A)},_.modulo=_.mod=function(A,I){var z,N,U=this;return A=new H(A,I),!U.c||!A.s||A.c&&!A.c[0]?new H(NaN):!A.c||U.c&&!U.c[0]?new H(U):(ye==9?(N=A.s,A.s=1,z=s(U,A,0,3),A.s=N,z.s*=N):z=s(U,A,0,ye),A=U.minus(z.times(A)),!A.c[0]&&ye==1&&(A.s=U.s),A)},_.multipliedBy=_.times=function(A,I){var z,N,U,G,te,Q,re,de,pe,Pe,$e,Ve,Ze,Pt,Bt,vt=this,Rt=vt.c,Jt=(A=new H(A,I)).c;if(!Rt||!Jt||!Rt[0]||!Jt[0])return!vt.s||!A.s||Rt&&!Rt[0]&&!Jt||Jt&&!Jt[0]&&!Rt?A.c=A.e=A.s=null:(A.s*=vt.s,!Rt||!Jt?A.c=A.e=null:(A.c=[0],A.e=0)),A;for(N=pn(vt.e/st)+pn(A.e/st),A.s*=vt.s,re=Rt.length,Pe=Jt.length,re<Pe&&(Ze=Rt,Rt=Jt,Jt=Ze,U=re,re=Pe,Pe=U),U=re+Pe,Ze=[];U--;Ze.push(0));for(Pt=nr,Bt=xr,U=Pe;--U>=0;){for(z=0,$e=Jt[U]%Bt,Ve=Jt[U]/Bt|0,te=re,G=U+te;G>U;)de=Rt[--te]%Bt,pe=Rt[te]/Bt|0,Q=Ve*de+pe*$e,de=$e*de+Q%Bt*Bt+Ze[G]+z,z=(de/Pt|0)+(Q/Bt|0)+Ve*pe,Ze[G--]=de%Pt;Ze[G]=z}return z?++N:Ze.splice(0,1),we(A,Ze,N)},_.negated=function(){var A=new H(this);return A.s=-A.s||null,A},_.plus=function(A,I){var z,N=this,U=N.s;if(A=new H(A,I),I=A.s,!U||!I)return new H(NaN);if(U!=I)return A.s=-I,N.minus(A);var G=N.e/st,te=A.e/st,Q=N.c,re=A.c;if(!G||!te){if(!Q||!re)return new H(U/0);if(!Q[0]||!re[0])return re[0]?A:new H(Q[0]?N:U*0)}if(G=pn(G),te=pn(te),Q=Q.slice(),U=G-te){for(U>0?(te=G,z=re):(U=-U,z=Q),z.reverse();U--;z.push(0));z.reverse()}for(U=Q.length,I=re.length,U-I<0&&(z=re,re=Q,Q=z,I=U),U=0;I;)U=(Q[--I]=Q[I]+re[I]+U)/nr|0,Q[I]=nr===Q[I]?0:Q[I]%nr;return U&&(Q=[U].concat(Q),++te),we(A,Q,te)},_.precision=_.sd=function(A,I){var z,N,U,G=this;if(A!=null&&A!==!!A)return t(A,1,ct),I==null?I=P:t(I,0,8),ue(new H(G),A,I);if(!(z=G.c))return null;if(U=z.length-1,N=U*st+1,U=z[U]){for(;U%10==0;U/=10,N--);for(U=z[0];U>=10;U/=10,N++);}return A&&G.e+1>N&&(N=G.e+1),N},_.shiftedBy=function(A){return t(A,-wo,wo),this.times("1e"+A)},_.squareRoot=_.sqrt=function(){var A,I,z,N,U,G=this,te=G.c,Q=G.s,re=G.e,de=E+4,pe=new H("0.5");if(Q!==1||!te||!te[0])return new H(!Q||Q<0&&(!te||te[0])?NaN:te?G:1/0);if(Q=Math.sqrt(+me(G)),Q==0||Q==1/0?(I=ln(te),(I.length+re)%2==0&&(I+="0"),Q=Math.sqrt(+I),re=pn((re+1)/2)-(re<0||re%2),Q==1/0?I="5e"+re:(I=Q.toExponential(),I=I.slice(0,I.indexOf("e")+1)+re),z=new H(I)):z=new H(Q+""),z.c[0]){for(re=z.e,Q=re+de,Q<3&&(Q=0);;)if(U=z,z=pe.times(U.plus(s(G,U,de,1))),ln(U.c).slice(0,Q)===(I=ln(z.c)).slice(0,Q))if(z.e<re&&--Q,I=I.slice(Q-3,Q+1),I=="9999"||!N&&I=="4999"){if(!N&&(ue(U,U.e+E+2,0),U.times(U).eq(G))){z=U;break}de+=4,Q+=4,N=1}else{(!+I||!+I.slice(1)&&I.charAt(0)=="5")&&(ue(z,z.e+E+2,1),A=!z.times(z).eq(G));break}}return ue(z,z.e+E+1,P,A)},_.toExponential=function(A,I){return A!=null&&(t(A,0,ct),A++),ee(this,A,I,1)},_.toFixed=function(A,I){return A!=null&&(t(A,0,ct),A=A+this.e+1),ee(this,A,I)},_.toFormat=function(A,I,z){var N,U=this;if(z==null)A!=null&&I&&typeof I=="object"?(z=I,I=null):A&&typeof A=="object"?(z=A,A=I=null):z=Ie;else if(typeof z!="object")throw Error(an+"Argument not an object: "+z);if(N=U.toFixed(A,I),U.c){var G,te=N.split("."),Q=+z.groupSize,re=+z.secondaryGroupSize,de=z.groupSeparator||"",pe=te[0],Pe=te[1],$e=U.s<0,Ve=$e?pe.slice(1):pe,Ze=Ve.length;if(re&&(G=Q,Q=re,re=G,Ze-=G),Q>0&&Ze>0){for(G=Ze%Q||Q,pe=Ve.substr(0,G);G<Ze;G+=Q)pe+=de+Ve.substr(G,Q);re>0&&(pe+=de+Ve.slice(G)),$e&&(pe="-"+pe)}N=Pe?pe+(z.decimalSeparator||"")+((re=+z.fractionGroupSize)?Pe.replace(new RegExp("\\d{"+re+"}\\B","g"),"$&"+(z.fractionGroupSeparator||"")):Pe):pe}return(z.prefix||"")+N+(z.suffix||"")},_.toFraction=function(A){var I,z,N,U,G,te,Q,re,de,pe,Pe,$e,Ve=this,Ze=Ve.c;if(A!=null&&(Q=new H(A),!Q.isInteger()&&(Q.c||Q.s!==1)||Q.lt(x)))throw Error(an+"Argument "+(Q.isInteger()?"out of range: ":"not an integer: ")+me(Q));if(!Ze)return new H(Ve);for(I=new H(x),de=z=new H(x),N=re=new H(x),$e=ln(Ze),G=I.e=$e.length-Ve.e-1,I.c[0]=As[(te=G%st)<0?st+te:te],A=!A||Q.comparedTo(I)>0?G>0?I:de:Q,te=V,V=1/0,Q=new H($e),re.c[0]=0;pe=s(Q,I,0,1),U=z.plus(pe.times(N)),U.comparedTo(A)!=1;)z=N,N=U,de=re.plus(pe.times(U=de)),re=U,I=Q.minus(pe.times(U=I)),Q=U;return U=s(A.minus(z),N,0,1),re=re.plus(U.times(de)),z=z.plus(U.times(N)),re.s=de.s=Ve.s,G=G*2,Pe=s(de,N,G,P).minus(Ve).abs().comparedTo(s(re,z,G,P).minus(Ve).abs())<1?[de,N]:[re,z],V=te,Pe},_.toNumber=function(){return+me(this)},_.toPrecision=function(A,I){return A!=null&&t(A,1,ct),ee(this,A,I,2)},_.toString=function(A){var I,z=this,N=z.s,U=z.e;return U===null?N?(I="Infinity",N<0&&(I="-"+I)):I="NaN":(A==null?I=U<=D||U>=R?m(ln(z.c),U):v(ln(z.c),U,"0"):A===10&&_t?(z=ue(new H(z),E+U+1,P),I=v(ln(z.c),z.e,"0")):(t(A,2,Ue.length,"Base"),I=u(v(ln(z.c),U,"0"),10,A,N,!0)),N<0&&z.c[0]&&(I="-"+I)),I},_.valueOf=_.toJSON=function(){return me(this)},_._isBigNumber=!0,_[Symbol.toStringTag]="BigNumber",_[Symbol.for("nodejs.util.inspect.custom")]=_.valueOf,r!=null&&H.set(r),H}function pn(r){var s=r|0;return r>0||r===s?s:s-1}function ln(r){for(var s,u,f=1,_=r.length,x=r[0]+"";f<_;){for(s=r[f++]+"",u=st-s.length;u--;s="0"+s);x+=s}for(_=x.length;x.charCodeAt(--_)===48;);return x.slice(0,_+1||1)}function Yr(r,s){var u,f,_=r.c,x=s.c,E=r.s,P=s.s,D=r.e,R=s.e;if(!E||!P)return null;if(u=_&&!_[0],f=x&&!x[0],u||f)return u?f?0:-P:E;if(E!=P)return E;if(u=E<0,f=D==R,!_||!x)return f?0:!_^u?1:-1;if(!f)return D>R^u?1:-1;for(P=(D=_.length)<(R=x.length)?D:R,E=0;E<P;E++)if(_[E]!=x[E])return _[E]>x[E]^u?1:-1;return D==R?0:D>R^u?1:-1}function t(r,s,u,f){if(r<s||r>u||r!==Qt(r))throw Error(an+(f||"Argument")+(typeof r=="number"?r<s||r>u?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function a(r){var s=r.c.length-1;return pn(r.e/st)==s&&r.c[s]%2!=0}function m(r,s){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(s<0?"e":"e+")+s}function v(r,s,u){var f,_;if(s<0){for(_=u+".";++s;_+=u);r=_+r}else if(f=r.length,++s>f){for(_=u,s-=f;--s;_+=u);r+=_}else s<f&&(r=r.slice(0,s)+"."+r.slice(s));return r}var S=xo(),j=S,Y=class{key;left=null;right=null;constructor(r){this.key=r}},fe=class extends Y{constructor(r){super(r)}},xe=class{size=0;modificationCount=0;splayCount=0;splay(r){let s=this.root;if(s==null)return this.compare(r,r),-1;let u=null,f=null,_=null,x=null,E=s,P=this.compare,D;for(;;)if(D=P(E.key,r),D>0){let R=E.left;if(R==null||(D=P(R.key,r),D>0&&(E.left=R.right,R.right=E,E=R,R=E.left,R==null)))break;u==null?f=E:u.left=E,u=E,E=R}else if(D<0){let R=E.right;if(R==null||(D=P(R.key,r),D<0&&(E.right=R.left,R.left=E,E=R,R=E.right,R==null)))break;_==null?x=E:_.right=E,_=E,E=R}else break;return _!=null&&(_.right=E.left,E.left=x),u!=null&&(u.left=E.right,E.right=f),this.root!==E&&(this.root=E,this.splayCount++),D}splayMin(r){let s=r,u=s.left;for(;u!=null;){let f=u;s.left=f.right,f.right=s,s=f,u=s.left}return s}splayMax(r){let s=r,u=s.right;for(;u!=null;){let f=u;s.right=f.left,f.left=s,s=f,u=s.right}return s}_delete(r){if(this.root==null||this.splay(r)!=0)return null;let s=this.root,u=s,f=s.left;if(this.size--,f==null)this.root=s.right;else{let _=s.right;s=this.splayMax(f),s.right=_,this.root=s}return this.modificationCount++,u}addNewRoot(r,s){this.size++,this.modificationCount++;let u=this.root;if(u==null){this.root=r;return}s<0?(r.left=u,r.right=u.right,u.right=null):(r.right=u,r.left=u.left,u.left=null),this.root=r}_first(){let r=this.root;return r==null?null:(this.root=this.splayMin(r),this.root)}_last(){let r=this.root;return r==null?null:(this.root=this.splayMax(r),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(r){return this.validKey(r)&&this.splay(r)==0}defaultCompare(){return(r,s)=>r<s?-1:r>s?1:0}wrap(){return{getRoot:()=>this.root,setRoot:r=>{this.root=r},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:r=>{this.splayCount=r},splay:r=>this.splay(r),has:r=>this.has(r)}}},Se=class ou extends xe{root=null;compare;validKey;constructor(s,u){super(),this.compare=s??this.defaultCompare(),this.validKey=u??(f=>f!=null&&f!=null)}delete(s){return this.validKey(s)?this._delete(s)!=null:!1}deleteAll(s){for(let u of s)this.delete(u)}forEach(s){let u=this[Symbol.iterator](),f;for(;f=u.next(),!f.done;)s(f.value,f.value,this)}add(s){let u=this.splay(s);return u!=0&&this.addNewRoot(new fe(s),u),this}addAndReturn(s){let u=this.splay(s);return u!=0&&this.addNewRoot(new fe(s),u),this.root.key}addAll(s){for(let u of s)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let f=u.right;for(;f!=null;)u=f,f=u.right;return u.key}firstAfter(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let f=u.left;for(;f!=null;)u=f,f=u.left;return u.key}retainAll(s){let u=new ou(this.compare,this.validKey),f=this.modificationCount;for(let _ of s){if(f!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(_)&&this.splay(_)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(s){return!this.validKey(s)||this.splay(s)!=0?null:this.root.key}intersection(s){let u=new ou(this.compare,this.validKey);for(let f of this)s.has(f)&&u.add(f);return u}difference(s){let u=new ou(this.compare,this.validKey);for(let f of this)s.has(f)||u.add(f);return u}union(s){let u=this.clone();return u.addAll(s),u}clone(){let s=new ou(this.compare,this.validKey);return s.size=this.size,s.root=this.copyNode(this.root),s}copyNode(s){if(s==null)return null;function u(_,x){let E,P;do{if(E=_.left,P=_.right,E!=null){let D=new fe(E.key);x.left=D,u(E,D)}if(P!=null){let D=new fe(P.key);x.right=D,_=P,x=D}}while(P!=null)}let f=new fe(s.key);return u(s,f),f}toSet(){return this.clone()}entries(){return new gt(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new it(this.wrap())}[Symbol.toStringTag]="[object Set]"},Fe=class{tree;path=new Array;modificationCount=null;splayCount;constructor(r){this.tree=r,this.splayCount=r.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let r=this.path[this.path.length-1];return this.getValue(r)}rebuildPath(r){this.path.splice(0,this.path.length),this.tree.splay(r),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(r){for(;r!=null;)this.path.push(r),r=r.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let u=this.tree.getRoot();for(;u!=null;)this.path.push(u),u=u.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let r=this.path[this.path.length-1],s=r.right;if(s!=null){for(;s!=null;)this.path.push(s),s=s.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===r;)r=this.path.pop();return this.path.length>0}},it=class extends Fe{getValue(r){return r.key}},gt=class extends Fe{getValue(r){return[r.key,r.key]}},un=r=>r,en=r=>{if(r){let s=new Se(Ts(r)),u=new Se(Ts(r)),f=(x,E)=>E.addAndReturn(x),_=x=>({x:f(x.x,s),y:f(x.y,u)});return _({x:new j(0),y:new j(0)}),_}return un},wn=r=>({set:s=>{Gt=wn(s)},reset:()=>wn(r),compare:Ts(r),snap:en(r),orient:es(r)}),Gt=wn(),Lr=(r,s)=>r.ll.x.isLessThanOrEqualTo(s.x)&&s.x.isLessThanOrEqualTo(r.ur.x)&&r.ll.y.isLessThanOrEqualTo(s.y)&&s.y.isLessThanOrEqualTo(r.ur.y),Ds=(r,s)=>{if(s.ur.x.isLessThan(r.ll.x)||r.ur.x.isLessThan(s.ll.x)||s.ur.y.isLessThan(r.ll.y)||r.ur.y.isLessThan(s.ll.y))return null;let u=r.ll.x.isLessThan(s.ll.x)?s.ll.x:r.ll.x,f=r.ur.x.isLessThan(s.ur.x)?r.ur.x:s.ur.x,_=r.ll.y.isLessThan(s.ll.y)?s.ll.y:r.ll.y,x=r.ur.y.isLessThan(s.ur.y)?r.ur.y:s.ur.y;return{ll:{x:u,y:_},ur:{x:f,y:x}}},rr=(r,s)=>r.x.times(s.y).minus(r.y.times(s.x)),ya=(r,s)=>r.x.times(s.x).plus(r.y.times(s.y)),kr=r=>ya(r,r).sqrt(),br=(r,s,u)=>{let f={x:s.x.minus(r.x),y:s.y.minus(r.y)},_={x:u.x.minus(r.x),y:u.y.minus(r.y)};return rr(_,f).div(kr(_)).div(kr(f))},ts=(r,s,u)=>{let f={x:s.x.minus(r.x),y:s.y.minus(r.y)},_={x:u.x.minus(r.x),y:u.y.minus(r.y)};return ya(_,f).div(kr(_)).div(kr(f))},Tt=(r,s,u)=>s.y.isZero()?null:{x:r.x.plus(s.x.div(s.y).times(u.minus(r.y))),y:u},yi=(r,s,u)=>s.x.isZero()?null:{x:u,y:r.y.plus(s.y.div(s.x).times(u.minus(r.x)))},Il=(r,s,u,f)=>{if(s.x.isZero())return yi(u,f,r.x);if(f.x.isZero())return yi(r,s,u.x);if(s.y.isZero())return Tt(u,f,r.y);if(f.y.isZero())return Tt(r,s,u.y);let _=rr(s,f);if(_.isZero())return null;let x={x:u.x.minus(r.x),y:u.y.minus(r.y)},E=rr(x,s).div(_),P=rr(x,f).div(_),D=r.x.plus(P.times(s.x)),R=u.x.plus(E.times(f.x)),K=r.y.plus(P.times(s.y)),V=u.y.plus(E.times(f.y)),ge=D.plus(R).div(2),ye=K.plus(V).div(2);return{x:ge,y:ye}},Cr=class qp{point;isLeft;segment;otherSE;consumedBy;static compare(s,u){let f=qp.comparePoints(s.point,u.point);return f!==0?f:(s.point!==u.point&&s.link(u),s.isLeft!==u.isLeft?s.isLeft?1:-1:Er.compare(s.segment,u.segment))}static comparePoints(s,u){return s.x.isLessThan(u.x)?-1:s.x.isGreaterThan(u.x)?1:s.y.isLessThan(u.y)?-1:s.y.isGreaterThan(u.y)?1:0}constructor(s,u){s.events===void 0?s.events=[this]:s.events.push(this),this.point=s,this.isLeft=u}link(s){if(s.point===this.point)throw new Error("Tried to link already linked events");let u=s.point.events;for(let f=0,_=u.length;f<_;f++){let x=u[f];this.point.events.push(x),x.point=this.point}this.checkForConsuming()}checkForConsuming(){let s=this.point.events.length;for(let u=0;u<s;u++){let f=this.point.events[u];if(f.segment.consumedBy===void 0)for(let _=u+1;_<s;_++){let x=this.point.events[_];x.consumedBy===void 0&&f.otherSE.point.events===x.otherSE.point.events&&f.segment.consume(x.segment)}}}getAvailableLinkedEvents(){let s=[];for(let u=0,f=this.point.events.length;u<f;u++){let _=this.point.events[u];_!==this&&!_.segment.ringOut&&_.segment.isInResult()&&s.push(_)}return s}getLeftmostComparator(s){let u=new Map,f=_=>{let x=_.otherSE;u.set(_,{sine:br(this.point,s.point,x.point),cosine:ts(this.point,s.point,x.point)})};return(_,x)=>{u.has(_)||f(_),u.has(x)||f(x);let{sine:E,cosine:P}=u.get(_),{sine:D,cosine:R}=u.get(x);return E.isGreaterThanOrEqualTo(0)&&D.isGreaterThanOrEqualTo(0)?P.isLessThan(R)?1:P.isGreaterThan(R)?-1:0:E.isLessThan(0)&&D.isLessThan(0)?P.isLessThan(R)?-1:P.isGreaterThan(R)?1:0:D.isLessThan(E)?-1:D.isGreaterThan(E)?1:0}}},vi=0,Er=class ih{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(s,u){let f=s.leftSE.point.x,_=u.leftSE.point.x,x=s.rightSE.point.x,E=u.rightSE.point.x;if(E.isLessThan(f))return 1;if(x.isLessThan(_))return-1;let P=s.leftSE.point.y,D=u.leftSE.point.y,R=s.rightSE.point.y,K=u.rightSE.point.y;if(f.isLessThan(_)){if(D.isLessThan(P)&&D.isLessThan(R))return 1;if(D.isGreaterThan(P)&&D.isGreaterThan(R))return-1;let V=s.comparePoint(u.leftSE.point);if(V<0)return 1;if(V>0)return-1;let ge=u.comparePoint(s.rightSE.point);return ge!==0?ge:-1}if(f.isGreaterThan(_)){if(P.isLessThan(D)&&P.isLessThan(K))return-1;if(P.isGreaterThan(D)&&P.isGreaterThan(K))return 1;let V=u.comparePoint(s.leftSE.point);if(V!==0)return V;let ge=s.comparePoint(u.rightSE.point);return ge<0?1:ge>0?-1:1}if(P.isLessThan(D))return-1;if(P.isGreaterThan(D))return 1;if(x.isLessThan(E)){let V=u.comparePoint(s.rightSE.point);if(V!==0)return V}if(x.isGreaterThan(E)){let V=s.comparePoint(u.rightSE.point);if(V<0)return 1;if(V>0)return-1}if(!x.eq(E)){let V=R.minus(P),ge=x.minus(f),ye=K.minus(D),Be=E.minus(_);if(V.isGreaterThan(ge)&&ye.isLessThan(Be))return 1;if(V.isLessThan(ge)&&ye.isGreaterThan(Be))return-1}return x.isGreaterThan(E)?1:x.isLessThan(E)||R.isLessThan(K)?-1:R.isGreaterThan(K)?1:s.id<u.id?-1:s.id>u.id?1:0}constructor(s,u,f,_){this.id=++vi,this.leftSE=s,s.segment=this,s.otherSE=u,this.rightSE=u,u.segment=this,u.otherSE=s,this.rings=f,this.windings=_}static fromRing(s,u,f){let _,x,E,P=Cr.comparePoints(s,u);if(P<0)_=s,x=u,E=1;else if(P>0)_=u,x=s,E=-1;else throw new Error(`Tried to create degenerate segment at [${s.x}, ${s.y}]`);let D=new Cr(_,!0),R=new Cr(x,!1);return new ih(D,R,[f],[E])}replaceRightSE(s){this.rightSE=s,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let s=this.leftSE.point.y,u=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:s.isLessThan(u)?s:u},ur:{x:this.rightSE.point.x,y:s.isGreaterThan(u)?s:u}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(s){return s.x.eq(this.leftSE.point.x)&&s.y.eq(this.leftSE.point.y)||s.x.eq(this.rightSE.point.x)&&s.y.eq(this.rightSE.point.y)}comparePoint(s){return Gt.orient(this.leftSE.point,s,this.rightSE.point)}getIntersection(s){let u=this.bbox(),f=s.bbox(),_=Ds(u,f);if(_===null)return null;let x=this.leftSE.point,E=this.rightSE.point,P=s.leftSE.point,D=s.rightSE.point,R=Lr(u,P)&&this.comparePoint(P)===0,K=Lr(f,x)&&s.comparePoint(x)===0,V=Lr(u,D)&&this.comparePoint(D)===0,ge=Lr(f,E)&&s.comparePoint(E)===0;if(K&&R)return ge&&!V?E:!ge&&V?D:null;if(K)return V&&x.x.eq(D.x)&&x.y.eq(D.y)?null:x;if(R)return ge&&E.x.eq(P.x)&&E.y.eq(P.y)?null:P;if(ge&&V)return null;if(ge)return E;if(V)return D;let ye=Il(x,this.vector(),P,s.vector());return ye===null||!Lr(_,ye)?null:Gt.snap(ye)}split(s){let u=[],f=s.events!==void 0,_=new Cr(s,!0),x=new Cr(s,!1),E=this.rightSE;this.replaceRightSE(x),u.push(x),u.push(_);let P=new ih(_,E,this.rings.slice(),this.windings.slice());return Cr.comparePoints(P.leftSE.point,P.rightSE.point)>0&&P.swapEvents(),Cr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),f&&(_.checkForConsuming(),x.checkForConsuming()),u}swapEvents(){let s=this.rightSE;this.rightSE=this.leftSE,this.leftSE=s,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let u=0,f=this.windings.length;u<f;u++)this.windings[u]*=-1}consume(s){let u=this,f=s;for(;u.consumedBy;)u=u.consumedBy;for(;f.consumedBy;)f=f.consumedBy;let _=ih.compare(u,f);if(_!==0){if(_>0){let x=u;u=f,f=x}if(u.prev===f){let x=u;u=f,f=x}for(let x=0,E=f.rings.length;x<E;x++){let P=f.rings[x],D=f.windings[x],R=u.rings.indexOf(P);R===-1?(u.rings.push(P),u.windings.push(D)):u.windings[R]+=D}f.rings=null,f.windings=null,f.consumedBy=u,f.leftSE.consumedBy=u.leftSE,f.rightSE.consumedBy=u.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let s=this.prev.consumedBy||this.prev;this._beforeState=s.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let s=this.beforeState();this._afterState={rings:s.rings.slice(0),windings:s.windings.slice(0),multiPolys:[]};let u=this._afterState.rings,f=this._afterState.windings,_=this._afterState.multiPolys;for(let P=0,D=this.rings.length;P<D;P++){let R=this.rings[P],K=this.windings[P],V=u.indexOf(R);V===-1?(u.push(R),f.push(K)):f[V]+=K}let x=[],E=[];for(let P=0,D=u.length;P<D;P++){if(f[P]===0)continue;let R=u[P],K=R.poly;if(E.indexOf(K)===-1)if(R.isExterior)x.push(K);else{E.indexOf(K)===-1&&E.push(K);let V=x.indexOf(R.poly);V!==-1&&x.splice(V,1)}}for(let P=0,D=x.length;P<D;P++){let R=x[P].multiPoly;_.indexOf(R)===-1&&_.push(R)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let s=this.beforeState().multiPolys,u=this.afterState().multiPolys;switch(xn.type){case"union":{let f=s.length===0,_=u.length===0;this._isInResult=f!==_;break}case"intersection":{let f,_;s.length<u.length?(f=s.length,_=u.length):(f=u.length,_=s.length),this._isInResult=_===xn.numMultiPolys&&f<_;break}case"xor":{let f=Math.abs(s.length-u.length);this._isInResult=f%2===1;break}case"difference":{let f=_=>_.length===1&&_[0].isSubject;this._isInResult=f(s)!==f(u);break}}return this._isInResult}},Xr=class{poly;isExterior;segments;bbox;constructor(r,s,u){if(!Array.isArray(r)||r.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=u,this.segments=[],typeof r[0][0]!="number"||typeof r[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let f=Gt.snap({x:new j(r[0][0]),y:new j(r[0][1])});this.bbox={ll:{x:f.x,y:f.y},ur:{x:f.x,y:f.y}};let _=f;for(let x=1,E=r.length;x<E;x++){if(typeof r[x][0]!="number"||typeof r[x][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let P=Gt.snap({x:new j(r[x][0]),y:new j(r[x][1])});P.x.eq(_.x)&&P.y.eq(_.y)||(this.segments.push(Er.fromRing(_,P,this)),P.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.x),P.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.y),P.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.x),P.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.y),_=P)}(!f.x.eq(_.x)||!f.y.eq(_.y))&&this.segments.push(Er.fromRing(_,f,this))}getSweepEvents(){let r=[];for(let s=0,u=this.segments.length;s<u;s++){let f=this.segments[s];r.push(f.leftSE),r.push(f.rightSE)}return r}},Lo=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(r,s){if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Xr(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let u=1,f=r.length;u<f;u++){let _=new Xr(r[u],this,!1);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.interiorRings.push(_)}this.multiPoly=s}getSweepEvents(){let r=this.exteriorRing.getSweepEvents();for(let s=0,u=this.interiorRings.length;s<u;s++){let f=this.interiorRings[s].getSweepEvents();for(let _=0,x=f.length;_<x;_++)r.push(f[_])}return r}},rl=class{isSubject;polys;bbox;constructor(r,s){if(!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof r[0][0][0]=="number"&&(r=[r])}catch{}this.polys=[],this.bbox={ll:{x:new j(Number.POSITIVE_INFINITY),y:new j(Number.POSITIVE_INFINITY)},ur:{x:new j(Number.NEGATIVE_INFINITY),y:new j(Number.NEGATIVE_INFINITY)}};for(let u=0,f=r.length;u<f;u++){let _=new Lo(r[u],this);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.polys.push(_)}this.isSubject=s}getSweepEvents(){let r=[];for(let s=0,u=this.polys.length;s<u;s++){let f=this.polys[s].getSweepEvents();for(let _=0,x=f.length;_<x;_++)r.push(f[_])}return r}},ko=class Pc{events;poly;_isExteriorRing;_enclosingRing;static factory(s){let u=[];for(let f=0,_=s.length;f<_;f++){let x=s[f];if(!x.isInResult()||x.ringOut)continue;let E=null,P=x.leftSE,D=x.rightSE,R=[P],K=P.point,V=[];for(;E=P,P=D,R.push(P),P.point!==K;)for(;;){let ge=P.getAvailableLinkedEvents();if(ge.length===0){let Ie=R[0].point,Ue=R[R.length-1].point;throw new Error(`Unable to complete output ring starting at [${Ie.x}, ${Ie.y}]. Last matching segment found ends at [${Ue.x}, ${Ue.y}].`)}if(ge.length===1){D=ge[0].otherSE;break}let ye=null;for(let Ie=0,Ue=V.length;Ie<Ue;Ie++)if(V[Ie].point===P.point){ye=Ie;break}if(ye!==null){let Ie=V.splice(ye)[0],Ue=R.splice(Ie.index);Ue.unshift(Ue[0].otherSE),u.push(new Pc(Ue.reverse()));continue}V.push({index:R.length,point:P.point});let Be=P.getLeftmostComparator(E);D=ge.sort(Be)[0].otherSE;break}u.push(new Pc(R))}return u}constructor(s){this.events=s;for(let u=0,f=s.length;u<f;u++)s[u].segment.ringOut=this;this.poly=null}getGeom(){let s=this.events[0].point,u=[s];for(let R=1,K=this.events.length-1;R<K;R++){let V=this.events[R].point,ge=this.events[R+1].point;Gt.orient(V,s,ge)!==0&&(u.push(V),s=V)}if(u.length===1)return null;let f=u[0],_=u[1];Gt.orient(f,s,_)===0&&u.shift(),u.push(u[0]);let x=this.isExteriorRing()?1:-1,E=this.isExteriorRing()?0:u.length-1,P=this.isExteriorRing()?u.length:-1,D=[];for(let R=E;R!=P;R+=x)D.push([u[R].x.toNumber(),u[R].y.toNumber()]);return D}isExteriorRing(){if(this._isExteriorRing===void 0){let s=this.enclosingRing();this._isExteriorRing=s?!s.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let s=this.events[0];for(let _=1,x=this.events.length;_<x;_++){let E=this.events[_];Cr.compare(s,E)>0&&(s=E)}let u=s.segment.prevInResult(),f=u?u.prevInResult():null;for(;;){if(!u)return null;if(!f)return u.ringOut;if(f.ringOut!==u.ringOut)return f.ringOut?.enclosingRing()!==u.ringOut?u.ringOut:u.ringOut?.enclosingRing();u=f.prevInResult(),f=u?u.prevInResult():null}}},wi=class{exteriorRing;interiorRings;constructor(r){this.exteriorRing=r,r.poly=this,this.interiorRings=[]}addInterior(r){this.interiorRings.push(r),r.poly=this}getGeom(){let r=this.exteriorRing.getGeom();if(r===null)return null;let s=[r];for(let u=0,f=this.interiorRings.length;u<f;u++){let _=this.interiorRings[u].getGeom();_!==null&&s.push(_)}return s}},Ut=class{rings;polys;constructor(r){this.rings=r,this.polys=this._composePolys(r)}getGeom(){let r=[];for(let s=0,u=this.polys.length;s<u;s++){let f=this.polys[s].getGeom();f!==null&&r.push(f)}return r}_composePolys(r){let s=[];for(let u=0,f=r.length;u<f;u++){let _=r[u];if(!_.poly)if(_.isExteriorRing())s.push(new wi(_));else{let x=_.enclosingRing();x?.poly||s.push(new wi(x)),x?.poly?.addInterior(_)}}return s}},zt=class{queue;tree;segments;constructor(r,s=Er.compare){this.queue=r,this.tree=new Se(s),this.segments=[]}process(r){let s=r.segment,u=[];if(r.consumedBy)return r.isLeft?this.queue.delete(r.otherSE):this.tree.delete(s),u;r.isLeft&&this.tree.add(s);let f=s,_=s;do f=this.tree.lastBefore(f);while(f!=null&&f.consumedBy!=null);do _=this.tree.firstAfter(_);while(_!=null&&_.consumedBy!=null);if(r.isLeft){let x=null;if(f){let P=f.getIntersection(s);if(P!==null&&(s.isAnEndpoint(P)||(x=P),!f.isAnEndpoint(P))){let D=this._splitSafely(f,P);for(let R=0,K=D.length;R<K;R++)u.push(D[R])}}let E=null;if(_){let P=_.getIntersection(s);if(P!==null&&(s.isAnEndpoint(P)||(E=P),!_.isAnEndpoint(P))){let D=this._splitSafely(_,P);for(let R=0,K=D.length;R<K;R++)u.push(D[R])}}if(x!==null||E!==null){let P=null;x===null?P=E:E===null?P=x:P=Cr.comparePoints(x,E)<=0?x:E,this.queue.delete(s.rightSE),u.push(s.rightSE);let D=s.split(P);for(let R=0,K=D.length;R<K;R++)u.push(D[R])}u.length>0?(this.tree.delete(s),u.push(r)):(this.segments.push(s),s.prev=f)}else{if(f&&_){let x=f.getIntersection(_);if(x!==null){if(!f.isAnEndpoint(x)){let E=this._splitSafely(f,x);for(let P=0,D=E.length;P<D;P++)u.push(E[P])}if(!_.isAnEndpoint(x)){let E=this._splitSafely(_,x);for(let P=0,D=E.length;P<D;P++)u.push(E[P])}}}this.tree.delete(s)}return u}_splitSafely(r,s){this.tree.delete(r);let u=r.rightSE;this.queue.delete(u);let f=r.split(s);return f.push(u),r.consumedBy===void 0&&this.tree.add(r),f}},ns=class{type;numMultiPolys;run(r,s,u){tn.type=r;let f=[new rl(s,!0)];for(let D=0,R=u.length;D<R;D++)f.push(new rl(u[D],!1));if(tn.numMultiPolys=f.length,tn.type==="difference"){let D=f[0],R=1;for(;R<f.length;)Ds(f[R].bbox,D.bbox)!==null?R++:f.splice(R,1)}if(tn.type==="intersection")for(let D=0,R=f.length;D<R;D++){let K=f[D];for(let V=D+1,ge=f.length;V<ge;V++)if(Ds(K.bbox,f[V].bbox)===null)return[]}let _=new Se(Cr.compare);for(let D=0,R=f.length;D<R;D++){let K=f[D].getSweepEvents();for(let V=0,ge=K.length;V<ge;V++)_.add(K[V])}let x=new zt(_),E=null;for(_.size!=0&&(E=_.first(),_.delete(E));E;){let D=x.process(E);for(let R=0,K=D.length;R<K;R++){let V=D[R];V.consumedBy===void 0&&_.add(V)}_.size!=0?(E=_.first(),_.delete(E)):E=null}Gt.reset();let P=ko.factory(x.segments);return new Ut(P).getGeom()}},tn=new ns,xn=tn,Os=(r,...s)=>xn.run("intersection",r,s),bo=(r,...s)=>xn.run("difference",r,s);Gt.set;function Ln(r){let s={type:"Feature"};return s.geometry=r,s}function Rs(r){return r.type==="Feature"?r.geometry:r}function Fl(r){return r&&r.geometry&&r.geometry.coordinates?r.geometry.coordinates:r}function vu(r){return Ln({type:"LineString",coordinates:r})}function il(r){return Ln({type:"MultiLineString",coordinates:r})}function Nl(r){return Ln({type:"Polygon",coordinates:r})}function Qr(r){return Ln({type:"MultiPolygon",coordinates:r})}function sl(r,s){let u=Rs(r),f=Rs(s),_=Os(u.coordinates,f.coordinates);return _.length===0?null:_.length===1?Nl(_[0]):Qr(_)}function zl(r,s){let u=Rs(r),f=Rs(s),_=bo(u.coordinates,f.coordinates);return _.length===0?null:_.length===1?Nl(_[0]):Qr(_)}function Ul(r){return Array.isArray(r)?1+Ul(r[0]):-1}function fh(r){r instanceof L.Polyline&&(r=r.toGeoJSON(15));let s=Fl(r),u=Ul(s),f=[];return u>1?s.forEach(_=>{f.push(vu(_))}):f.push(r),f}function rs(r){let s=[];return r.eachLayer(u=>{s.push(Fl(u.toGeoJSON(15)))}),il(s)}on.Cut=on.Polygon.extend({initialize(r){this._map=r,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let r=this._layer.getLatLngs();if(r.length<=2)return;let s=L.polygon(r,this.options.pathOptions);s._latlngInfos=this._layer._latlngInfo,this.cut(s),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:f,originalLayer:_})=>{this._fireCut(_,f,_),this._fireCut(this._map,f,_),_.pm._fireEdit()}),this._editedLayers=[];let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},cut(r){let s=this._map._layers,u=r._latlngInfos||[];Object.keys(s).map(f=>s[f]).filter(f=>f.pm).filter(f=>!f._pmTempLayer).filter(f=>!L.PM.optIn&&!f.options.pmIgnore||L.PM.optIn&&f.options.pmIgnore===!1).filter(f=>f instanceof L.Polyline).filter(f=>f!==r).filter(f=>f.pm.options.allowCutting).filter(f=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(f)>-1:!0).filter(f=>!this._layerGroup.hasLayer(f)).filter(f=>{try{let _=!!gr(r.toGeoJSON(15),f.toGeoJSON(15)).features.length>0;return _||f instanceof L.Polyline&&!(f instanceof L.Polygon)?_:!!sl(r.toGeoJSON(15),f.toGeoJSON(15))}catch{return f instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(f=>{let _;if(f instanceof L.Polygon){_=L.polygon(f.getLatLngs());let D=_.getLatLngs();u.forEach(R=>{if(R&&R.snapInfo){let{latlng:K}=R,V=this._calcClosestLayer(K,[_]);if(V&&V.segment&&V.distance<this.options.snapDistance){let{segment:ge}=V;if(ge&&ge.length===2){let{indexPath:ye,parentPath:Be,newIndex:Ie}=L.PM.Utils._getIndexFromSegment(D,ge);(ye.length>1?(0,wr.default)(D,Be):D).splice(Ie,0,K)}}}})}else _=f;let x=this._cutLayer(r,_),E=L.geoJSON(x,f.options);E.getLayers().length===1&&([E]=E.getLayers()),this._setPane(E,"layerPane");let P=E.addTo(this._map.pm._getContainingLayer());if(P.pm.enable(f.pm.options),P.pm.disable(),f._pmTempLayer=!0,r._pmTempLayer=!0,f.remove(),f.removeFrom(this._map.pm._getContainingLayer()),r.remove(),r.removeFrom(this._map.pm._getContainingLayer()),P.getLayers&&P.getLayers().length===0&&this._map.pm.removeLayer({target:P}),P instanceof L.LayerGroup?(P.eachLayer(D=>{this._addDrawnLayerProp(D)}),this._addDrawnLayerProp(P)):this._addDrawnLayerProp(P),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let D=this.options.layersToCut.indexOf(f);D>-1&&this.options.layersToCut.splice(D,1)}this._editedLayers.push({layer:P,originalLayer:f})})},_cutLayer(r,s){let u=L.geoJSON(),f;if(s instanceof L.Polygon)f=zl(s.toGeoJSON(15),r.toGeoJSON(15));else{let _=fh(s);_.forEach(x=>{let E=Qa(x,r.toGeoJSON(15)),P;E&&E.features.length>0?P=L.geoJSON(E):P=L.geoJSON(x),P.getLayers().forEach(D=>{Yi(r.toGeoJSON(15),D.toGeoJSON(15))||D.addTo(u)})}),_.length>1?f=rs(u):f=u.toGeoJSON(15)}return f},_change:L.Util.falseFn}),on.Text=on.extend({initialize(r){this._map=r,this._shape="Text",this.toolbarButtonName="drawText"},enable(r){L.Util.setOptions(this,r),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ht("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker?.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(r){this.enabled()?this.disable():this.enable(r)},_syncHintMarker(r){if(this._hintMarker.setLatLng(r.latlng),this.options.snappable){let s=r;s.target=this._hintMarker,this._handleSnapping(s)}},_createMarker(r){if(!r.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(r.latlng);let s=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),this.options.textOptions?.className){let _=this.options.textOptions.className.split(" ");this.textArea.classList.add(..._)}let u=this._createTextIcon(this.textArea),f=new L.Marker(s,{textMarker:!0,_textMarkerOverPM:!0,icon:u});if(this._setPane(f,"markerPane"),this._finishLayer(f),f.pm||(f.options.draggable=!1),f.addTo(this._map.pm._getContainingLayer()),f.pm){f.pm.textArea=this.textArea,L.setOptions(f.pm,{removeIfEmpty:this.options.textOptions?.removeIfEmpty??!0});let _=this.options.textOptions?.focusAfterDraw??!0;f.pm._createTextMarker(_),this.options.textOptions?.text&&f.pm.setText(this.options.textOptions.text)}this._fireCreate(f),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(r){this.enable(),this._hintMarker.setLatLng(r.latlng)},_createTextArea(){let r=document.createElement("textarea");return r.readOnly=!0,r.classList.add("pm-textarea","pm-disabled"),r},_createTextIcon(r){return L.divIcon({className:"pm-text-marker",html:r})}});var Co={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,sn(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let r=this._getDOMElem();r&&(sn(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(r)):L.DomEvent.on(r,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,sn(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let r=this._getDOMElem();r&&(sn(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(r)):L.DomEvent.off(r,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(r){let s=r.touches?r.touches[0]:r,u={originalEvent:s,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseDown(u),!1},_simulateMouseMoveEvent(r){let s=r.touches?r.touches[0]:r,u={originalEvent:s,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseMove(u),!1},_simulateMouseUpEvent(r){let s={originalEvent:r.touches?r.touches[0]:r,target:this._layer};return r.type.indexOf("touch")===-1&&(s.containerPoint=this._map.mouseEventToContainerPoint(r),s.latlng=this._map.containerPointToLatLng(s.containerPoint)),this._dragMixinOnMouseUp(s),!1},_dragMixinOnMouseDown(r){if(r.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(r);let s=r._fromLayerSync,u=this._syncLayers("_dragMixinOnMouseDown",r);if(this._layer instanceof L.Marker&&(this.options.snappable&&!s&&!u?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let f="resizeableCircleMarker";this._layer instanceof L.Circle&&(f="resizeableCircle"),this.options.snappable&&!s&&!u?this._layer.pm.options[f]||this._initSnappableMarkersDrag():this._layer.pm.options[f]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=r.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(r){this._overwriteEventIfItComesFromMarker(r);let s=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",r),this._dragging||(this._dragging=!0,L.DomUtil.addClass(s,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=r.latlng),this._onLayerDrag(r),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(r){let s=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",r),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,s&&L.DomUtil.removeClass(s,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(r){let{latlng:s}=r,u={lat:s.lat-this._tempDragCoord.lat,lng:s.lng-this._tempDragCoord.lng},f=_=>_.map(x=>{if(Array.isArray(x))return f(x);let E={lat:x.lat+u.lat,lng:x.lng+u.lng};return(x.alt||x.alt===0)&&(E.alt=x.alt),E});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let _=f([this._layer.getLatLng()]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);let x=f([_]);this._layer.setLatLng(x[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let _=f([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{let _=f(this._layer.getLatLngs());this._layer.setLatLngs(_),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=s,r.layer=this._layer,this._fireDrag(r)},addDraggingClass(){let r=this._getDOMElem();r&&L.DomUtil.addClass(r,"leaflet-pm-draggable")},removeDraggingClass(){let r=this._getDOMElem();r&&L.DomUtil.removeClass(r,"leaflet-pm-draggable")},_getDOMElem(){let r=null;return this._layer._path?r=this._layer._path:this._layer._renderer&&this._layer._renderer._container?r=this._layer._renderer._container:this._layer._image?r=this._layer._image:this._layer._icon&&(r=this._layer._icon),r},_overwriteEventIfItComesFromMarker(r){r.target.getLatLng&&(!r.target._radius||r.target._radius<=10)&&(r.containerPoint=this._map.mouseEventToContainerPoint(r.originalEvent),r.latlng=this._map.containerPointToLatLng(r.containerPoint))},_syncLayers(r,s){if(this.enabled())return!1;if(!s._fromLayerSync&&this._layer===s.target&&this.options.syncLayersOnDrag){s._fromLayerSync=!0;let u=[];if(L.Util.isArray(this.options.syncLayersOnDrag))u=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(f=>{f instanceof L.LayerGroup&&(u=u.concat(f.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let f in this._parentLayerGroup){let _=this._parentLayerGroup[f];_.pm&&(u=_.pm.getLayers(!0))}return L.Util.isArray(u)&&u.length>0&&(u=u.filter(f=>!!f.pm).filter(f=>!!f.pm.options.draggable),u.forEach(f=>{f!==this._layer&&f.pm[r]&&(f._snapped=!1,f.pm[r](s))})),u.length>0}return!1},_stopDOMImageDrag(r){return r.preventDefault(),!1}},Eo=Co,ol=b(Gr());function al(r,s,u,f){return u.unproject(s.transform(u.project(r,f)),f)}function ir(r,s,u){let f=u.getMaxZoom();if(f===1/0&&(f=u.getZoom()),L.Util.isArray(r)){let _=[];return r.forEach(x=>{_.push(ir(x,s,u))}),_}return r instanceof L.LatLng?al(r,s,u,f):null}function kn(r,s){s instanceof L.Layer&&(s=s.getLatLng());let u=r.getMaxZoom();return u===1/0&&(u=r.getZoom()),r.project(s,u)}function ei(r,s){let u=r.getMaxZoom();return u===1/0&&(u=r.getZoom()),r.unproject(s,u)}var xi={_onRotateStart(r){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=kn(this._map,this._rotationOriginLatLng),this._rotationStartPoint=kn(this._map,r.target.getLatLng()),this._initialRotateLatLng=Sn(this._layer),this._startAngle=this.getAngle();let s=Sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,s),this._fireRotationStart(this._map,s)},_onRotate(r){let s=kn(this._map,r.target.getLatLng()),u=this._rotationStartPoint,f=this._rotationOriginPoint,_=Math.atan2(s.y-f.y,s.x-f.x)-Math.atan2(u.y-f.y,u.x-f.x);this._layer.setLatLngs(this._rotateLayer(_,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let x=this;function E(K,V=[],ge=-1){if(ge>-1&&V.push(ge),L.Util.isArray(K[0]))K.forEach((ye,Be)=>E(ye,V.slice(),Be));else{let ye=V.length>0?(0,ol.default)(x._markers,V):x._markers[0];K.forEach((Be,Ie)=>{ye[Ie].setLatLng(Be)})}}E(this._layer.getLatLngs());let P=Sn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(_,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let D=_*180/Math.PI;D=D<0?D+360:D;let R=D+this._startAngle;this._setAngle(R),this._rotationLayer.pm._setAngle(R),this._fireRotation(this._rotationLayer,D,P),this._fireRotation(this._map,D,P),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let r=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let s=Sn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Sn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,r,s),this._fireRotationEnd(this._map,r,s),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(r,s,u,f,_){let x=kn(_,u);return this._matrix=f.clone().rotate(r,x).flip(),ir(s,this._matrix,_)},_setAngle(r){r=r<0?r+360:r,this._angle=r%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let r=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),s=r.getCenter();return r.removeFrom(this._layer._map),s},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(dn(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let r={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),r),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Sn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(r){let s=this.getAngle(),u=this._layer.getLatLngs(),f=r*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(f,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+r),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(f,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let _=this.getAngle()-s;_=_<0?_+360:_,this._startAngle=s,this._fireRotation(this._layer,_,u,this._layer),this._fireRotation(this._map||this._layer._map,_,u,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(r){let s=r-this.getAngle();this.rotateLayer(s)},getAngle(){return this._angle||0},setInitAngle(r){this._setAngle(r)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(r){this._rotationCenter=r,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(r)}},Li=xi,js=L.Class.extend({includes:[Eo,la,Li,di],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(r){L.Util.setOptions(this,r)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(r,s){s==="layerPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":s==="vertexPane"?r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":s==="markerPane"&&(r.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(r,s){let u=s.target,f={layer:this._layer,marker:u,event:s},_="";return r==="move"?_="moveVertexValidation":r==="add"?_="addVertexValidation":r==="remove"&&(_="removeVertexValidation"),this.options[_]&&typeof this.options[_]=="function"&&!this.options[_](f)?(r==="move"&&(u._cancelDragEventChain=u.getLatLng()),!1):(u._cancelDragEventChain=null,!0)},_vertexValidationDrag(r){return r._cancelDragEventChain?(r._latlng=r._cancelDragEventChain,r.update(),!1):!0},_vertexValidationDragEnd(r){return r._cancelDragEventChain?(r._cancelDragEventChain=null,!1):!0}}),hn=js;hn.LayerGroup=L.Class.extend({initialize(r){this._layerGroup=r,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(f=>this._initLayer(f));let s=f=>{if(f.layer._pmTempLayer)return;this._layers=this.getLayers();let _=this._layers.filter(x=>!x.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in x.pm._parentLayerGroup));_.forEach(x=>{this._initLayer(x)}),_.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(s,100,this),this),this._layerGroup.on("layerremove",f=>{this._removeLayerFromGroup(f.target)},this);let u=f=>{f.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(u,100,this),this)},enable(r,s=[]){s.length===0&&(this._layers=this.getLayers()),this._options=r,this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.enable(r,s)):u.pm.enable(r)})},disable(r=[]){r.length===0&&(this._layers=this.getLayers()),this._layers.forEach(s=>{s instanceof L.LayerGroup?r.indexOf(s._leaflet_id)===-1&&(r.push(s._leaflet_id),s.pm.disable(r)):s.pm.disable()})},enabled(r=[]){return r.length===0&&(this._layers=this.getLayers()),!!this._layers.find(s=>s instanceof L.LayerGroup?r.indexOf(s._leaflet_id)===-1?(r.push(s._leaflet_id),s.pm.enabled(r)):!1:s.pm.enabled())},toggleEdit(r,s=[]){s.length===0&&(this._layers=this.getLayers()),this._options=r,this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.toggleEdit(r,s)):u.pm.toggleEdit(r)})},_initLayer(r){let s=L.Util.stamp(this._layerGroup);r.pm._parentLayerGroup||(r.pm._parentLayerGroup={}),r.pm._parentLayerGroup[s]=this._layerGroup},_removeLayerFromGroup(r){if(r.pm&&r.pm._layerGroup){let s=L.Util.stamp(this._layerGroup);delete r.pm._layerGroup[s]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(r=>r.pm.dragging()):!1},getOptions(){return this.options},_getMap(){return this._map||this._layers.find(r=>!!r._map)?._map||null},getLayers(r=!1,s=!0,u=!0,f=[]){let _=[];return r?this._layerGroup.getLayers().forEach(x=>{_.push(x),x instanceof L.LayerGroup&&f.indexOf(x._leaflet_id)===-1&&(f.push(x._leaflet_id),_=_.concat(x.pm.getLayers(!0,!0,!0,f)))}):_=this._layerGroup.getLayers(),u&&(_=_.filter(x=>!(x instanceof L.LayerGroup))),s&&(_=_.filter(x=>!!x.pm),_=_.filter(x=>!x._pmTempLayer),_=_.filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1)),_},setOptions(r,s=[]){s.length===0&&(this._layers=this.getLayers()),this.options=r,this._layers.forEach(u=>{u.pm&&(u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.setOptions(r,s)):u.pm.setOptions(r))})}}),hn.Marker=hn.extend({_shape:"Marker",initialize(r){this._layer=r,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(r={draggable:!0}){if(L.Util.setOptions(this,r),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(r){this.enabled()?this.disable():this.enable(r)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(r){let s=r.target;s.remove(),this._fireRemove(s),this._fireRemove(this._map,s)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)}});var ti=b(Gr()),$l={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let r=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=r.filter((s,u,f)=>f.indexOf(s)===u)},_removeFromCache(r){let s=this.markerCache.indexOf(r);s>-1&&this.markerCache.splice(s,1)},renderLimits(r){this.markerCache.forEach(s=>{r.includes(s)?this._markerGroup.addLayer(s):this._markerGroup.removeLayer(s)})},applyLimitFilters({latlng:r={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let s=[...this._filterClosestMarkers(r)];this.renderLimits(s)},_filterClosestMarkers(r){let s=[...this.markerCache],u=this.options.limitMarkersToCount;return u===-1?s:(s.sort((f,_)=>{let x=f._latlng.distanceTo(r),E=_._latlng.distanceTo(r);return x-E}),s.filter((f,_)=>u>-1?_<u:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(r){this._preventRenderMarkers=!!r}},sr=$l;hn.Line=hn.extend({includes:[sr],_shape:"Line",initialize(r){this._layer=r,this._enabled=!1},enable(r){if(L.Util.setOptions(this,r),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let r=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(r,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(r){return this.enabled()?this.disable():this.enable(r),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let r=this._map,s=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(r),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let u=f=>{if(Array.isArray(f[0]))return f.map(u,this);let _=f.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&f.map((x,E)=>{let P=this.isPolygon()?(E+1)%f.length:E+1;return this._createMiddleMarker(_[E],_[P])}),_};this._markers=u(s),this.filterMarkerGroup(),r.addLayer(this._markerGroup)},_createMarker(r){let s=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._pmTempLayer=!0,this.options.rotate?(s.on("dragstart",this._onRotateStart,this),s.on("drag",this._onRotate,this),s.on("dragend",this._onRotateEnd,this)):(s.on("click",this._onVertexClick,this),s.on("dragstart",this._onMarkerDragStart,this),s.on("move",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(s),s},_createMiddleMarker(r,s){if(!r||!s)return!1;let u=L.PM.Utils.calcMiddleLatLng(this._map,r.getLatLng(),s.getLatLng()),f=this._createMarker(u),_=L.divIcon({className:"marker-icon marker-icon-middle"});return f.setIcon(_),f.leftM=r,f.rightM=s,r._middleMarkerNext=f,s._middleMarkerPrev=f,f.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),f.on("movestart",this._onMiddleMarkerMoveStart,this),f},_onMiddleMarkerClick(r){let s=r.target;if(!this._vertexValidation("add",r))return;let u=L.divIcon({className:"marker-icon"});s.setIcon(u),this._addMarker(s,s.leftM,s.rightM)},_onMiddleMarkerMoveStart(r){let s=r.target;if(s.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",r)){s.on("move",this._onMiddleMarkerMovePrevent,this);return}s._dragging=!0,this._addMarker(s,s.leftM,s.rightM)},_onMiddleMarkerMovePrevent(r){let s=r.target;this._vertexValidationDrag(s)},_onMiddleMarkerMoveEnd(r){let s=r.target;if(s.off("move",this._onMiddleMarkerMovePrevent,this),s.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(s))return;let u=L.divIcon({className:"marker-icon"});s.setIcon(u),setTimeout(()=>{delete s._dragging},100)},_addMarker(r,s,u){r.off("movestart",this._onMiddleMarkerMoveStart,this),r.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let f=r.getLatLng(),_=this._layer._latlngs;delete r.leftM,delete r.rightM;let{indexPath:x,index:E,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),D=x.length>1?(0,ti.default)(_,P):_,R=x.length>1?(0,ti.default)(this._markers,P):this._markers;D.splice(E+1,0,f),R.splice(E+1,0,r),this._layer.setLatLngs(_),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(s,r),this._createMiddleMarker(r,u)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(r,L.PM.Utils.findDeepMarkerIndex(this._markers,r).indexPath,f),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return ks(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(r){let s=this._layer,u,f;if(this.options.allowSelfIntersection?u=!1:(f=ks(this._layer.toGeoJSON(15)),u=f.features.length>0),u){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return u;r?this._flashLayer():(s.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(f)}else s.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return u},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(r,s){r.forEach(u=>{Array.isArray(u)?this._updateDisabledMarkerStyle(u,s):u._icon&&(s&&!this._checkMarkerAllowedToDrag(u)?L.DomUtil.addClass(u._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(u._icon,"vertexmarker-disabled"))})},_removeMarker(r){let s=r.target;if(!this._vertexValidation("remove",r))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Sn(this._layer,this._layer.getLatLngs()));let u=this._layer.getLatLngs(),{indexPath:f,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);if(!f)return;let E=f.length>1?(0,ti.default)(u,x):u,P=f.length>1?(0,ti.default)(this._markers,x):this._markers,D=x[x.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!D&&(E.length<=2||this.isPolygon()&&E.length<=3)){this._flashLayer();return}E.splice(_,1),this._layer.setLatLngs(u),this.isPolygon()&&E.length<=2&&E.splice(0,E.length);let R=!1;if(E.length<=1&&(E.splice(0,E.length),x.length>1&&f.length>1&&(u=Hi(u)),this._layer.setLatLngs(u),this._initMarkers(),R=!0),pr(u)||this._layer.remove(),u=Hi(u),this._layer.setLatLngs(u),this._markers=Hi(this._markers),!R&&(P=f.length>1?(0,ti.default)(this._markers,x):this._markers,s._middleMarkerPrev&&(this._markerGroup.removeLayer(s._middleMarkerPrev),this._removeFromCache(s._middleMarkerPrev)),s._middleMarkerNext&&(this._markerGroup.removeLayer(s._middleMarkerNext),this._removeFromCache(s._middleMarkerNext)),this._markerGroup.removeLayer(s),this._removeFromCache(s),P)){let K,V;if(this.isPolygon()?(K=(_+1)%P.length,V=(_+(P.length-1))%P.length):(V=_-1<0?void 0:_-1,K=_+1>=P.length?void 0:_+1),K!==V){let ge=P[V],ye=P[K];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ge,ye)}P.splice(_,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(s,f),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(r){let s=this._layer.getLatLngs(),u=r.getLatLng(),{indexPath:f,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);(f.length>1?(0,ti.default)(s,x):s).splice(_,1,u),this._layer.setLatLngs(s)},_getNeighborMarkers(r){let{indexPath:s,index:u,parentPath:f}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),_=s.length>1?(0,ti.default)(this._markers,f):this._markers,x=(u+1)%_.length,E=(u+(_.length-1))%_.length,P=_[E],D=_[x];return{prevMarker:P,nextMarker:D}},_checkMarkerAllowedToDrag(r){let{prevMarker:s,nextMarker:u}=this._getNeighborMarkers(r),f=L.polyline([s.getLatLng(),r.getLatLng()]),_=L.polyline([r.getLatLng(),u.getLatLng()]),x=gr(this._layer.toGeoJSON(15),f.toGeoJSON(15)).features.length,E=gr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return r.getLatLng()===this._markers[0][0].getLatLng()?E+=1:r.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(x+=1),!(x<=2&&E<=2)},_onMarkerDragStart(r){let s=r.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",r))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragStart(r,u),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Sn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(s):this._markerAllowedToDrag=null},_onMarkerDrag(r){let s=r.target;if(!this._vertexValidationDrag(s))return;let{indexPath:u,index:f,parentPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);if(!u)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(s);let x=u.length>1?(0,ti.default)(this._markers,_):this._markers,E=(f+1)%x.length,P=(f+(x.length-1))%x.length,D=s.getLatLng(),R=x[P].getLatLng(),K=x[E].getLatLng();if(s._middleMarkerNext){let V=L.PM.Utils.calcMiddleLatLng(this._map,D,K);s._middleMarkerNext.setLatLng(V)}if(s._middleMarkerPrev){let V=L.PM.Utils.calcMiddleLatLng(this._map,D,R);s._middleMarkerPrev.setLatLng(V)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(r){let s=r.target;if(!this._vertexValidationDragEnd(s))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),f=!this.options.allowSelfIntersection&&this.hasSelfIntersection();f&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(f=!1);let _=!this.options.allowSelfIntersection&&f;if(this._fireMarkerDragEnd(r,u,_),_){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(r,u);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(r){let s=r.target;if(s._dragging)return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireVertexClick(r,u)}}),hn.Polygon=hn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(r){let{prevMarker:s,nextMarker:u}=this._getNeighborMarkers(r),f=L.polyline([s.getLatLng(),r.getLatLng()]),_=L.polyline([r.getLatLng(),u.getLatLng()]),x=gr(this._layer.toGeoJSON(15),f.toGeoJSON(15)).features.length,E=gr(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return!(x<=2&&E<=2)}}),hn.Rectangle=hn.Polygon.extend({_shape:"Rectangle",_initMarkers(){let r=this._map,s=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,r.addLayer(this._markerGroup),this._markers=[],this._markers[0]=s.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((u,f)=>{let _=this._cornerMarkers.find(x=>x._index===f);_&&_.setLatLng(u)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(r,s){let u=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._origLatLng=r,u._index=s,u._pmTempLayer=!0,u.on("click",this._onVertexClick,this),this._markerGroup.addLayer(u),u},_addMarkerEvents(){this._markers[0].forEach(r=>{r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(r){if(!this._vertexValidation("move",r))return;let s=r.target,u=this._cornerMarkers;s._oppositeCornerLatLng=u.find(_=>_._index===(s._index+2)%4).getLatLng(),s._snapped=!1;let{indexPath:f}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragStart(r,f)},_onMarkerDrag(r){let s=r.target;if(!this._vertexValidationDrag(s)||s._index===void 0)return;this._adjustRectangleForMarkerMove(s);let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDrag(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(r){let s=r.target;if(!this._vertexValidationDragEnd(s))return;this._cornerMarkers.forEach(f=>{delete f._oppositeCornerLatLng});let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);this._fireMarkerDragEnd(r,u),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(r){L.extend(r._origLatLng,r._latlng);let s=L.PM.Utils._getRotatedRectangle(r.getLatLng(),r._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(s),this._adjustAllMarkers(r),this._layer.redraw()},_adjustAllMarkers(r){let s=this._layer.getLatLngs()[0];if(s&&s.length!==4&&s.length>0)s.forEach((u,f)=>{this._cornerMarkers[f].setLatLng(u)}),this._cornerMarkers.slice(s.length).forEach(u=>{u.setLatLng(s[0])});else if(!s||!s.length)console.error("The layer has no LatLngs");else{let u=s.findIndex(f=>r.getLatLng().equals(f));u>-1?(this._cornerMarkers[(r._index+1)%4].setLatLng(s[(u+1)%4]),this._cornerMarkers[(r._index+2)%4].setLatLng(s[(u+2)%4]),this._cornerMarkers[(r._index+3)%4].setLatLng(s[(u+3)%4])):this._cornerMarkers.forEach(f=>{f.setLatLng(s[f._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(dn(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let r=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(r[0],r[2],this.getAngle(),this._map||this)}}),hn.CircleMarker=hn.extend({_shape:"CircleMarker",initialize(r){this._layer=r,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(r={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,r),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(r){this.enabled()?this.disable():this.enable(r)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let r=this._map;this._helperLayers&&(this._helperLayers.removeFrom(r),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(r);let s=this._layer.getLatLng(),u=this._layer._radius,f=this._getLatLngOnCircle(s,u);this._centerMarker=this._createCenterMarker(s),this._outerMarker=this._createOuterMarker(f),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(r,s){let u=this._map.project(r),f=L.point(u.x+s,u.y);return this._map.unproject(f)},_createHintLine(r,s){let u=r.getLatLng(),f=s.getLatLng();this._hintline=L.polyline([u,f],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(r){let s=this._createMarker(r);return this.options.draggable?(L.DomUtil.addClass(s._icon,"leaflet-pm-draggable"),s.on("move",this._moveCircle,this)):s.dragging.disable(),s},_createOuterMarker(r){let s=this._createMarker(r);return s.on("drag",this._resizeCircle,this),s},_createMarker(r){let s=new L.Marker(r,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(s,"vertexPane"),s._origLatLng=r,s._pmTempLayer=!0,s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),s.on("click",this._onVertexClick,this),this._helperLayers.addLayer(s),s},_moveCircle(r){if(r.target._cancelDragEventChain)return;let s=this._centerMarker.getLatLng();this._layer.setLatLng(s);let u=this._layer._radius,f=this._getLatLngOnCircle(s,u);this._outerMarker._latlng=f,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let r=this._layer.getLatLng(),s=this._layer._radius,u=this._getLatLngOnCircle(r,s);this._outerMarker.setLatLng(u),this._centerMarker.setLatLng(r),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let r=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(r,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let r=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng();this._hintline.setLatLngs([r,s])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(r){this._vertexValidation("move",r)&&this._fireMarkerDragStart(r)},_onMarkerDrag(r){let s=r.target;s instanceof L.Marker&&!this._vertexValidationDrag(s)||this._fireMarkerDrag(r)},_onMarkerDragEnd(r){this._extedingMarkerDragEnd();let s=r.target;this._vertexValidationDragEnd(s)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(r))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let r=this._layer._map||this._map;if(r){let s=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),r,this._layer.getLatLng()),u=L.circle(this._layer.getLatLng(),this._layer.options);u.setRadius(s);let f=r&&r.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(u,200,!f).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(u,200,!f),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let r=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(r,s);return this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?s=jr(this._map,r,s,this._getMinDistanceInMeter(r)):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(s=jr(this._map,r,s,this._getMaxDistanceInMeter(r))),s},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let r=this._centerMarker.getLatLng(),s=this._outerMarker.getLatLng(),u=this._distanceCalculation(r,s);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(r,s){return this._map.project(r).distanceTo(this._map.project(s))},_getMinDistanceInMeter(r){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,r)},_getMaxDistanceInMeter(r){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,r)},_onVertexClick(r){r.target._dragging||this._fireVertexClick(r,void 0)}}),hn.Circle=hn.CircleMarker.extend({_shape:"Circle",initialize(r){this._layer=r,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(r){L.PM.Edit.CircleMarker.prototype.enable.call(this,r||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let r=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(r,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let r=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(r,s){return this._map.distance(r,s)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(r){r.target._dragging||this._fireVertexClick(r,void 0)}}),hn.ImageOverlay=hn.extend({_shape:"ImageOverlay",initialize(r){this._layer=r,this._enabled=!1},toggleEdit(r){this.enabled()?this.disable():this.enable(r)},enabled(){return this._enabled},enable(r={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,r),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let r=this._layer.getBounds(),s=r.getNorthWest(),u=r.getNorthEast(),f=r.getSouthEast(),_=r.getSouthWest();return[s,u,f,_]}}),hn.Text=hn.extend({_shape:"Text",initialize(r){this._layer=r,this._enabled=!1},enable(r){if(L.Util.setOptions(this,r),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let r=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),r.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(r){this.enabled()?this.disable():this.enable(r)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let r=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,r.off("pm:drag",this._handleSnapping,this),r.on("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.on("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this),r.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let r=this._layer;r.off("pm:drag",this._handleSnapping,this),r.off("pm:dragend",this._cleanupSnapping,this),r.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let r=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,s=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${r}px`,this.textArea.style.width=`${s}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(r){r.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(r={}){let s=this._hasFocus;this._hasFocus=r.type==="focus",!s!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(r){r&&(this.textArea.value=r),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let s=this.options.className.split(" ");this.textArea.classList.add(...s)}let r=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(r),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(r=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),r===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(r){r.preventDefault()}});var Fn=function(r,s,u,f,_,x){this._matrix=[r,s,u,f,_,x]};Fn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Fn.prototype={transform(r){return this._transform(r.clone())},_transform(r){let s=this._matrix,{x:u,y:f}=r;return r.x=s[0]*u+s[1]*f+s[4],r.y=s[2]*u+s[3]*f+s[5],r},untransform(r){let s=this._matrix;return new L.Point((r.x/s[0]-s[4])/s[0],(r.y/s[2]-s[5])/s[2])},clone(){let r=this._matrix;return new L.PM.Matrix(r[0],r[1],r[2],r[3],r[4],r[5])},translate(r){if(r===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let s,u;return typeof r=="number"?(s=r,u=r):(s=r.x,u=r.y),this._add(1,0,0,1,s,u)},scale(r,s){if(r===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let u,f;return s=s||L.point(0,0),typeof r=="number"?(u=r,f=r):(u=r.x,f=r.y),this._add(u,0,0,f,s.x,s.y)._add(1,0,0,1,-s.x,-s.y)},rotate(r,s){let u=Math.cos(r),f=Math.sin(r);return s=s||new L.Point(0,0),this._add(u,f,-f,u,s.x,s.y)._add(1,0,0,1,-s.x,-s.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(r,s,u,f,_,x){let E=[[],[],[]],P=this._matrix,D=[[P[0],P[2],P[4]],[P[1],P[3],P[5]],[0,0,1]],R=[[r,u,_],[s,f,x],[0,0,1]],K;r&&r instanceof L.PM.Matrix&&(P=r._matrix,R=[[P[0],P[2],P[4]],[P[1],P[3],P[5]],[0,0,1]]);for(let V=0;V<3;V+=1)for(let ge=0;ge<3;ge+=1){K=0;for(let ye=0;ye<3;ye+=1)K+=D[V][ye]*R[ye][ge];E[V][ge]=K}return this._matrix=[E[0][0],E[1][0],E[0][1],E[1][1],E[0][2],E[1][2]],this}};var Vt=Fn,Nr={calcMiddleLatLng(r,s,u){let f=r.project(s),_=r.project(u);return r.unproject(f._add(_)._divideBy(2))},findLayers(r){let s=[];return r.eachLayer(u=>{(u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.Circle||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&s.push(u)}),s=s.filter(u=>!!u.pm),s=s.filter(u=>!u._pmTempLayer),s=s.filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1),s},circleToPolygon(r,s=60,u=!0){let f=r.getLatLng(),_=r.getRadius(),x=fi(f,_,s,0,u),E=[];for(let P=0;P<x.length;P+=1){let D=[x[P].lat,x[P].lng];E.push(D)}return L.polygon(E,r.options)},disablePopup(r){r.getPopup()&&(r._tempPopupCopy=r.getPopup(),r.unbindPopup())},enablePopup(r){r._tempPopupCopy&&(r.bindPopup(r._tempPopupCopy),delete r._tempPopupCopy)},_fireEvent(r,s,u,f=!1){r.fire(s,u,f);let{groups:_}=this.getAllParentGroups(r);_.forEach(x=>{x.fire(s,u,f)})},getAllParentGroups(r){let s=[],u=[],f=_=>{for(let x in _._eventParents)if(s.indexOf(x)===-1){s.push(x);let E=_._eventParents[x];u.push(E),f(E)}};return!r._pmLastGroupFetch||!r._pmLastGroupFetch.time||new Date().getTime()-r._pmLastGroupFetch.time>1e3?(f(r),r._pmLastGroupFetch={time:new Date().getTime(),groups:u,groupIds:s},{groupIds:s,groups:u}):{groups:r._pmLastGroupFetch.groups,groupIds:r._pmLastGroupFetch.groupIds}},createGeodesicPolygon:fi,getTranslation:ht,findDeepCoordIndex(r,s,u=!0){let f,_=E=>(P,D)=>{let R=E.concat(D);if(u){if(P.lat&&P.lat===s.lat&&P.lng===s.lng)return f=R,!0}else if(P.lat&&L.latLng(P).equals(s))return f=R,!0;return Array.isArray(P)&&P.some(_(R))};r.some(_([]));let x={};return f&&(x={indexPath:f,index:f[f.length-1],parentPath:f.slice(0,f.length-1)}),x},findDeepMarkerIndex(r,s){let u,f=x=>(E,P)=>{let D=x.concat(P);return E._leaflet_id===s._leaflet_id?(u=D,!0):Array.isArray(E)&&E.some(f(D))};r.some(f([]));let _={};return u&&(_={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),_},_getIndexFromSegment(r,s){if(s&&s.length===2){let u=this.findDeepCoordIndex(r,s[0]),f=this.findDeepCoordIndex(r,s[1]),_=Math.max(u.index,f.index);return(u.index===0||f.index===0)&&_!==1&&(_+=1),{indexA:u,indexB:f,newIndex:_,indexPath:u.indexPath,parentPath:u.parentPath}}return null},_getRotatedRectangle(r,s,u,f){let _=kn(f,r),x=kn(f,s),E=u*Math.PI/180,P=Math.cos(E),D=Math.sin(E),R=(x.x-_.x)*P+(x.y-_.y)*D,K=(x.y-_.y)*P-(x.x-_.x)*D,V=R*P+_.x,ge=R*D+_.y,ye=-K*D+_.x,Be=K*P+_.y,Ie=ei(f,_),Ue=ei(f,{x:V,y:ge}),_t=ei(f,x),H=ei(f,{x:ye,y:Be});return[Ie,Ue,_t,H]},pxRadiusToMeterRadius(r,s,u){let f=s.project(u),_=L.point(f.x+r,f.y);return s.distance(s.unproject(_),u)}},wu=Nr;L.PM=L.PM||{version:Ui.version,Map:Zi,Toolbar:aa,Draw:on,Edit:hn,Utils:wu,Matrix:Vt,activeLang:"en",optIn:!1,initialize(r){this.addInitHooks(r)},setOptIn(r){this.optIn=!!r},addInitHooks(){function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(r);function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(s);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(u);function f(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(f);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(_);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(x);function E(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(E);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(P);function D(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(D)},reInitLayer(r){r instanceof L.LayerGroup&&r.eachLayer(s=>{this.reInitLayer(s)}),r.pm||L.PM.optIn&&r.options.pmIgnore!==!1||r.options.pmIgnore||(r instanceof L.Map?r.pm=new L.PM.Map(r):r instanceof L.Marker?r.options.textMarker?(r.pm=new L.PM.Edit.Text(r),r.pm._initTextMarker(),r.pm._createTextMarker(!1)):r.pm=new L.PM.Edit.Marker(r):r instanceof L.Circle?r.pm=new L.PM.Edit.Circle(r):r instanceof L.CircleMarker?r.pm=new L.PM.Edit.CircleMarker(r):r instanceof L.Rectangle?r.pm=new L.PM.Edit.Rectangle(r):r instanceof L.Polygon?r.pm=new L.PM.Edit.Polygon(r):r instanceof L.Polyline?r.pm=new L.PM.Edit.Line(r):r instanceof L.LayerGroup?r.pm=new L.PM.Edit.LayerGroup(r):r instanceof L.ImageOverlay&&(r.pm=new L.PM.Edit.ImageOverlay(r)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(r){let s=this._map.mouseEventToLayerPoint(r),u,f;for(let _=this._drawFirst;_;_=_.next)u=_.layer,u.options.interactive&&u._containsPoint(s)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);f&&(L.DomEvent.fakeStop(r),this._fireEvent([f],r))}}),L.PM.initialize()})()),Jf}jy();var Xf={},Qf;function Iy(){return Qf||(Qf=1,(function(d){function o(h){if(i[h])return i[h].exports;var c=i[h]={i:h,l:!1,exports:{}};return d[h].call(c.exports,c,c.exports,o),c.l=!0,c.exports}var i={};o.m=d,o.c=i,o.d=function(h,c,p){o.o(h,c)||Object.defineProperty(h,c,{configurable:!1,enumerable:!0,get:p})},o.n=function(h){var c=h&&h.__esModule?function(){return h.default}:function(){return h};return o.d(c,"a",c),c},o.o=function(h,c){return Object.prototype.hasOwnProperty.call(h,c)},o.p="/dist/",o(o.s=28)})([function(d,o,i){function h(B){return B==null?B===void 0?b:k:M&&M in Object(B)?p(B):y(B)}var c=i(4),p=i(38),y=i(39),k="[object Null]",b="[object Undefined]",M=c?c.toStringTag:void 0;d.exports=h},function(d,o){function i(h){return h!=null&&typeof h=="object"}d.exports=i},function(d,o){function i(h){var c=typeof h;return h!=null&&(c=="object"||c=="function")}d.exports=i},function(d,o,i){function h(F,Z,q){if(q=q||{},!M(q))throw new Error("options is invalid");var J=q.bbox,ce=q.id;if(F===void 0)throw new Error("geometry is required");if(Z&&Z.constructor!==Object)throw new Error("properties must be an Object");J&&B(J),ce&&T(ce);var be={type:"Feature"};return ce&&(be.id=ce),J&&(be.bbox=J),be.properties=Z||{},be.geometry=F,be}function c(F,Z,q){if(!F)throw new Error("coordinates is required");if(!Array.isArray(F))throw new Error("coordinates must be an Array");if(F.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(F[0])||!b(F[1]))throw new Error("coordinates must contain numbers");return h({type:"Point",coordinates:F},Z,q)}function p(F,Z,q){if(!F)throw new Error("coordinates is required");if(F.length<2)throw new Error("coordinates must be an array of two or more positions");if(!b(F[0][1])||!b(F[0][1]))throw new Error("coordinates must contain numbers");return h({type:"LineString",coordinates:F},Z,q)}function y(F,Z){if(F==null)throw new Error("radians is required");if(Z&&typeof Z!="string")throw new Error("units must be a string");var q=$[Z||"kilometers"];if(!q)throw new Error(Z+" units is invalid");return F*q}function k(F){if(F==null)throw new Error("degrees is required");return F%360*Math.PI/180}function b(F){return!isNaN(F)&&F!==null&&!Array.isArray(F)}function M(F){return!!F&&F.constructor===Object}function B(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(F.length!==4&&F.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(Z){if(!b(Z))throw new Error("bbox must only contain numbers")})}function T(F){if(!F)throw new Error("id is required");if(["string","number"].indexOf(typeof F)===-1)throw new Error("id must be a number or a string")}i.d(o,"b",function(){return h}),i.d(o,"f",function(){return c}),i.d(o,"e",function(){return p}),i.d(o,"g",function(){return y}),i.d(o,"a",function(){return k}),i.d(o,"c",function(){return b}),i.d(o,"d",function(){return M});var $={meters:63710088e-1,metres:63710088e-1,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:63710088e-1/1852,inches:63710088e-1*39.37,yards:63710088e-1/1.0936,feet:20902260511392e-6,radians:1,degrees:63710088e-1/111325}},function(d,o,i){var h=i(5),c=h.Symbol;d.exports=c},function(d,o,i){var h=i(11),c=typeof self=="object"&&self&&self.Object===Object&&self,p=h||c||Function("return this")();d.exports=p},function(d,o){function i(h,c){return h===c||h!==h&&c!==c}d.exports=i},function(d,o,i){function h(y){return y!=null&&p(y.length)&&!c(y)}var c=i(10),p=i(16);d.exports=h},function(d,o,i){function h(p,y,k){y=="__proto__"&&c?c(p,y,{configurable:!0,enumerable:!0,value:k,writable:!0}):p[y]=k}var c=i(9);d.exports=h},function(d,o,i){var h=i(35),c=(function(){try{var p=h(Object,"defineProperty");return p({},"",{}),p}catch{}})();d.exports=c},function(d,o,i){function h(B){if(!p(B))return!1;var T=c(B);return T==k||T==b||T==y||T==M}var c=i(0),p=i(2),y="[object AsyncFunction]",k="[object Function]",b="[object GeneratorFunction]",M="[object Proxy]";d.exports=h},function(d,o,i){(function(h){var c=typeof h=="object"&&h&&h.Object===Object&&h;d.exports=c}).call(o,i(37))},function(d,o,i){function h(k,b){return y(p(k,b,c),k+"")}var c=i(13),p=i(45),y=i(46);d.exports=h},function(d,o){function i(h){return h}d.exports=i},function(d,o){function i(h,c,p){switch(p.length){case 0:return h.call(c);case 1:return h.call(c,p[0]);case 2:return h.call(c,p[0],p[1]);case 3:return h.call(c,p[0],p[1],p[2])}return h.apply(c,p)}d.exports=i},function(d,o,i){function h(b,M,B){if(!k(B))return!1;var T=typeof M;return!!(T=="number"?p(B)&&y(M,B.length):T=="string"&&M in B)&&c(B[M],b)}var c=i(6),p=i(7),y=i(17),k=i(2);d.exports=h},function(d,o){function i(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=h}var h=9007199254740991;d.exports=i},function(d,o){function i(p,y){var k=typeof p;return!!(y=y??h)&&(k=="number"||k!="symbol"&&c.test(p))&&p>-1&&p%1==0&&p<y}var h=9007199254740991,c=/^(?:0|[1-9]\d*)$/;d.exports=i},function(d,o,i){function h($,F){var Z=y($),q=!Z&&p($),J=!Z&&!q&&k($),ce=!Z&&!q&&!J&&M($),be=Z||q||J||ce,he=be?c($.length,String):[],Ae=he.length;for(var Re in $)!F&&!T.call($,Re)||be&&(Re=="length"||J&&(Re=="offset"||Re=="parent")||ce&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||b(Re,Ae))||he.push(Re);return he}var c=i(51),p=i(52),y=i(19),k=i(54),b=i(17),M=i(56),B=Object.prototype,T=B.hasOwnProperty;d.exports=h},function(d,o){var i=Array.isArray;d.exports=i},function(d,o){d.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(d,o){function i(c){var p=c&&c.constructor;return c===(typeof p=="function"&&p.prototype||h)}var h=Object.prototype;d.exports=i},function(d,o,i){function h(M){if(!p(M))return!1;var B=c(M);return B==b||B==k||typeof M.message=="string"&&typeof M.name=="string"&&!y(M)}var c=i(0),p=i(1),y=i(63),k="[object DOMException]",b="[object Error]";d.exports=h},function(d,o){function i(h,c){return function(p){return h(c(p))}}d.exports=i},function(d,o){function i(h,c){for(var p=-1,y=h==null?0:h.length,k=Array(y);++p<y;)k[p]=c(h[p],p,h);return k}d.exports=i},function(d,o){var i=/<%=([\s\S]+?)%>/g;d.exports=i},function(d,o,i){function h(p){return p==null?"":c(p)}var c=i(75);d.exports=h},function(d,o,i){function h(B,T,$){if(B!==null)for(var F,Z,q,J,ce,be,he,Ae,Re=0,le=0,ke=B.type,Ke=ke==="FeatureCollection",Je=ke==="Feature",nt=Ke?B.features.length:1,Ne=0;Ne<nt;Ne++){he=Ke?B.features[Ne].geometry:Je?B.geometry:B,Ae=!!he&&he.type==="GeometryCollection",ce=Ae?he.geometries.length:1;for(var ft=0;ft<ce;ft++){var Mt=0,wt=0;if((J=Ae?he.geometries[ft]:he)!==null){be=J.coordinates;var St=J.type;switch(Re=0,St){case null:break;case"Point":if(T(be,le,Ne,Mt,wt)===!1)return!1;le++,Mt++;break;case"LineString":case"MultiPoint":for(F=0;F<be.length;F++){if(T(be[F],le,Ne,Mt,wt)===!1)return!1;le++,St==="MultiPoint"&&Mt++}St==="LineString"&&Mt++;break;case"Polygon":case"MultiLineString":for(F=0;F<be.length;F++){for(Z=0;Z<be[F].length-Re;Z++){if(T(be[F][Z],le,Ne,Mt,wt)===!1)return!1;le++}St==="MultiLineString"&&Mt++,St==="Polygon"&&wt++}St==="Polygon"&&Mt++;break;case"MultiPolygon":for(F=0;F<be.length;F++){for(St==="MultiPolygon"&&(wt=0),Z=0;Z<be[F].length;Z++){for(q=0;q<be[F][Z].length-Re;q++){if(T(be[F][Z][q],le,Ne,Mt,wt)===!1)return!1;le++}wt++}Mt++}break;case"GeometryCollection":for(F=0;F<J.geometries.length;F++)if(h(J.geometries[F],T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(B,T){var $,F,Z,q,J,ce,be,he,Ae,Re,le=0,ke=B.type==="FeatureCollection",Ke=B.type==="Feature",Je=ke?B.features.length:1;for($=0;$<Je;$++){for(ce=ke?B.features[$].geometry:Ke?B.geometry:B,he=ke?B.features[$].properties:Ke?B.properties:{},Ae=ke?B.features[$].bbox:Ke?B.bbox:void 0,Re=ke?B.features[$].id:Ke?B.id:void 0,be=!!ce&&ce.type==="GeometryCollection",J=be?ce.geometries.length:1,Z=0;Z<J;Z++)if((q=be?ce.geometries[Z]:ce)!==null)switch(q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(T(q,le,he,Ae,Re)===!1)return!1;break;case"GeometryCollection":for(F=0;F<q.geometries.length;F++)if(T(q.geometries[F],le,he,Ae,Re)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(T(null,le,he,Ae,Re)===!1)return!1;le++}}function p(B,T,$){var F=$;return c(B,function(Z,q,J,ce,be){F=q===0&&$===void 0?Z:T(F,Z,q,J,ce,be)}),F}function y(B,T){c(B,function($,F,Z,q,J){var ce=$===null?null:$.type;switch(ce){case null:case"Point":case"LineString":case"Polygon":return T(Object(M.b)($,Z,{bbox:q,id:J}),F,0)===!1?!1:void 0}var be;switch(ce){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon"}for(var he=0;he<$.coordinates.length;he++){var Ae=$.coordinates[he],Re={type:be,coordinates:Ae};if(T(Object(M.b)(Re,Z),F,he)===!1)return!1}})}function k(B,T){y(B,function($,F,Z){var q=0;if($.geometry){var J=$.geometry.type;if(J!=="Point"&&J!=="MultiPoint"){var ce;return h($,function(be,he,Ae,Re,le){if(ce===void 0)return void(ce=be);var ke=Object(M.e)([ce,be],$.properties);if(T(ke,F,Z,le,q)===!1)return!1;q++,ce=be})!==!1&&void 0}}})}function b(B,T,$){var F=$,Z=!1;return k(B,function(q,J,ce,be,he){F=Z===!1&&$===void 0?q:T(F,q,J,ce,be,he),Z=!0}),F}i.d(o,"a",function(){return p}),i.d(o,"b",function(){return b});var M=i(3)},function(d,o,i){d.exports=i(29)},function(d,o,i){function h(le){return le&&le.__esModule?le:{default:le}}i(30);var c=i(31),p=h(c),y=i(79),k=h(y),b=i(80),M=h(b),B=i(85),T=(function(le){if(le&&le.__esModule)return le;var ke={};if(le!=null)for(var Ke in le)Object.prototype.hasOwnProperty.call(le,Ke)&&(ke[Ke]=le[Ke]);return ke.default=le,ke})(B),$=i(86),F=h($),Z=i(87),q=i(88),J={imports:{numberFormat:Z.numberFormat},interpolate:/{{([\s\S]+?)}}/g},ce=(0,p.default)(q.controlTemplate,J),be=(0,p.default)(q.resultsTemplate,J),he=(0,p.default)(q.pointPopupTemplate,J),Ae=(0,p.default)(q.linePopupTemplate,J),Re=(0,p.default)(q.areaPopupTemplate,J);L.Control.Measure=L.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(le){L.setOptions(this,le);var ke=this.options,Ke=ke.activeColor,Je=ke.completedColor;this._symbols=new F.default({activeColor:Ke,completedColor:Je}),this.options.units=L.extend({},k.default,this.options.units)},onAdd:function(le){return this._map=le,this._latlngs=[],this._initLayout(),le.on("click",this._collapse,this),this._layer=L.layerGroup().addTo(le),this._container},onRemove:function(le){le.off("click",this._collapse,this),le.removeLayer(this._layer)},_initLayout:function(){var le=this._className,ke=this._container=L.DomUtil.create("div",le+" leaflet-bar");ke.innerHTML=ce({model:{className:le}}),ke.setAttribute("aria-haspopup",!0),L.DomEvent.disableClickPropagation(ke),L.DomEvent.disableScrollPropagation(ke);var Ke=this.$toggle=(0,B.selectOne)(".js-toggle",ke);this.$interaction=(0,B.selectOne)(".js-interaction",ke);var Je=(0,B.selectOne)(".js-start",ke),nt=(0,B.selectOne)(".js-cancel",ke),Ne=(0,B.selectOne)(".js-finish",ke);this.$startPrompt=(0,B.selectOne)(".js-startprompt",ke),this.$measuringPrompt=(0,B.selectOne)(".js-measuringprompt",ke),this.$startHelp=(0,B.selectOne)(".js-starthelp",ke),this.$results=(0,B.selectOne)(".js-results",ke),this.$measureTasks=(0,B.selectOne)(".js-measuretasks",ke),this._collapse(),this._updateMeasureNotStarted(),L.Browser.android||(L.DomEvent.on(ke,"mouseenter",this._expand,this),L.DomEvent.on(ke,"mouseleave",this._collapse,this)),L.DomEvent.on(Ke,"click",L.DomEvent.stop),L.Browser.touch?L.DomEvent.on(Ke,"click",this._expand,this):L.DomEvent.on(Ke,"focus",this._expand,this),L.DomEvent.on(Je,"click",L.DomEvent.stop),L.DomEvent.on(Je,"click",this._startMeasure,this),L.DomEvent.on(nt,"click",L.DomEvent.stop),L.DomEvent.on(nt,"click",this._finishMeasure,this),L.DomEvent.on(Ne,"click",L.DomEvent.stop),L.DomEvent.on(Ne,"click",this._handleMeasureDoubleClick,this)},_expand:function(){T.hide(this.$toggle),T.show(this.$interaction)},_collapse:function(){this._locked||(T.hide(this.$interaction),T.show(this.$toggle))},_updateMeasureNotStarted:function(){T.hide(this.$startHelp),T.hide(this.$results),T.hide(this.$measureTasks),T.hide(this.$measuringPrompt),T.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){T.hide(this.$results),T.show(this.$startHelp),T.show(this.$measureTasks),T.hide(this.$startPrompt),T.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){T.hide(this.$startHelp),T.show(this.$results),T.show(this.$measureTasks),T.hide(this.$startPrompt),T.show(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureVertexes=L.featureGroup().addTo(this._layer),this._captureMarker=L.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),L.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var le=L.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,L.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",le,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(L.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(le){function ke(nt,Ne,ft,Mt,wt){if(Ne&&Je[Ne]){var St=Ke(nt,Je[Ne],Mt,wt);return ft&&Je[ft]&&(St=St+" ("+Ke(nt,Je[ft],Mt,wt)+")"),St}return Ke(nt,null,Mt,wt)}function Ke(nt,Ne,ft,Mt){var wt={acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles"},St=L.extend({factor:1,decimals:0},Ne);return[(0,Z.numberFormat)(nt*St.factor,St.decimals,ft||".",Mt||","),wt[St.display]||St.display].join(" ")}var Je=this.options.units;return{lengthDisplay:ke(le.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:ke(le.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)}},_updateResults:function(){var le=(0,M.default)(this._latlngs),ke=this._resultsModel=L.extend({},le,this._getMeasurementDisplayStrings(le),{pointCount:this._latlngs.length});this.$results.innerHTML=be({model:ke})},_handleMeasureMove:function(le){this._measureDrag?this._measureDrag.setLatLng(le.latlng):this._measureDrag=L.circleMarker(le.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var le=this._latlngs,ke=void 0,Ke=void 0;if(this._finishMeasure(),le.length){le.length>2&&le.push(le[0]);var Je=(0,M.default)(le);le.length===1?(ke=L.circleMarker(le[0],this._symbols.getSymbol("resultPoint")),Ke=he({model:Je})):le.length===2?(ke=L.polyline(le,this._symbols.getSymbol("resultLine")),Ke=Ae({model:L.extend({},Je,this._getMeasurementDisplayStrings(Je))})):(ke=L.polygon(le,this._symbols.getSymbol("resultArea")),Ke=Re({model:L.extend({},Je,this._getMeasurementDisplayStrings(Je))}));var nt=L.DomUtil.create("div","");nt.innerHTML=Ke;var Ne=(0,B.selectOne)(".js-zoomto",nt);Ne&&(L.DomEvent.on(Ne,"click",L.DomEvent.stop),L.DomEvent.on(Ne,"click",function(){ke.getBounds?this._map.fitBounds(ke.getBounds(),{padding:[20,20],maxZoom:17}):ke.getLatLng&&this._map.panTo(ke.getLatLng())},this));var ft=(0,B.selectOne)(".js-deletemarkup",nt);ft&&(L.DomEvent.on(ft,"click",L.DomEvent.stop),L.DomEvent.on(ft,"click",function(){this._layer.removeLayer(ke)},this)),ke.addTo(this._layer),ke.bindPopup(nt,this.options.popupOptions),ke.getBounds?ke.openPopup(ke.getBounds().getCenter()):ke.getLatLng&&ke.openPopup(ke.getLatLng())}},_handleMeasureClick:function(le){var ke=this._map.mouseEventToLatLng(le.originalEvent),Ke=this._latlngs[this._latlngs.length-1],Je=this._symbols.getSymbol("measureVertex");Ke&&ke.equals(Ke)||(this._latlngs.push(ke),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(nt){nt.setStyle(Je),nt._path&&nt._path.setAttribute("class",Je.className)}),this._addNewVertex(ke),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(le){L.circleMarker(le,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(le){if(le.length<3)return void(this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null));this._measureArea?this._measureArea.setLatLngs(le):this._measureArea=L.polygon(le,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(le){if(le.length<2)return void(this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null));this._measureBoundary?this._measureBoundary.setLatLngs(le):this._measureBoundary=L.polyline(le,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}}),L.Map.mergeOptions({measureControl:!1}),L.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=new L.Control.Measure().addTo(this))}),L.control.measure=function(le){return new L.Control.Measure(le)}},function(d,o){},function(d,o,i){function h(Re,le,ke){var Ke=F.imports._.templateSettings||F;ke&&B(Re,le,ke)&&(le=void 0),Re=Z(Re),le=c({},le,Ke,k);var Je,nt,Ne=c({},le.imports,Ke.imports,k),ft=T(Ne),Mt=y(Ne,ft),wt=0,St=le.interpolate||he,mt="__p += '",Dt=RegExp((le.escape||he).source+"|"+St.source+"|"+(St===$?be:he).source+"|"+(le.evaluate||he).source+"|$","g"),Ce="sourceURL"in le?"//# sourceURL="+le.sourceURL+`
`:"";Re.replace(Dt,function(ie,Ee,et,Xe,He,ze){return et||(et=Xe),mt+=Re.slice(wt,ze).replace(Ae,b),Ee&&(Je=!0,mt+=`' +
__e(`+Ee+`) +
'`),He&&(nt=!0,mt+=`';
`+He+`;
__p += '`),et&&(mt+=`' +
((__t = (`+et+`)) == null ? '' : __t) +
'`),wt=ze+ie.length,ie}),mt+=`';
`;var rt=le.variable;rt||(mt=`with (obj) {
`+mt+`
}
`),mt=(nt?mt.replace(q,""):mt).replace(J,"$1").replace(ce,"$1;"),mt="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Je?", __e = _.escape":"")+(nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mt+`return __p
}`;var Me=p(function(){return Function(ft,Ce+"return "+mt).apply(void 0,Mt)});if(Me.source=mt,M(Me))throw Me;return Me}var c=i(32),p=i(62),y=i(65),k=i(66),b=i(67),M=i(22),B=i(15),T=i(68),$=i(25),F=i(71),Z=i(26),q=/\b__p \+= '';/g,J=/\b(__p \+=) '' \+/g,ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,he=/($^)/,Ae=/['\n\r\u2028\u2029\\]/g;d.exports=h},function(d,o,i){var h=i(33),c=i(44),p=i(50),y=c(function(k,b,M,B){h(b,p(b),k,B)});d.exports=y},function(d,o,i){function h(y,k,b,M){var B=!b;b||(b={});for(var T=-1,$=k.length;++T<$;){var F=k[T],Z=M?M(b[F],y[F],F,b,y):void 0;Z===void 0&&(Z=y[F]),B?p(b,F,Z):c(b,F,Z)}return b}var c=i(34),p=i(8);d.exports=h},function(d,o,i){function h(b,M,B){var T=b[M];k.call(b,M)&&p(T,B)&&(B!==void 0||M in b)||c(b,M,B)}var c=i(8),p=i(6),y=Object.prototype,k=y.hasOwnProperty;d.exports=h},function(d,o,i){function h(y,k){var b=p(y,k);return c(b)?b:void 0}var c=i(36),p=i(43);d.exports=h},function(d,o,i){function h(q){return!(!y(q)||p(q))&&(c(q)?Z:M).test(k(q))}var c=i(10),p=i(40),y=i(2),k=i(42),b=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,B=Function.prototype,T=Object.prototype,$=B.toString,F=T.hasOwnProperty,Z=RegExp("^"+$.call(F).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");d.exports=h},function(d,o){var i;i=(function(){return this})();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}d.exports=i},function(d,o,i){function h(M){var B=y.call(M,b),T=M[b];try{M[b]=void 0;var $=!0}catch{}var F=k.call(M);return $&&(B?M[b]=T:delete M[b]),F}var c=i(4),p=Object.prototype,y=p.hasOwnProperty,k=p.toString,b=c?c.toStringTag:void 0;d.exports=h},function(d,o){function i(p){return c.call(p)}var h=Object.prototype,c=h.toString;d.exports=i},function(d,o,i){function h(y){return!!p&&p in y}var c=i(41),p=(function(){var y=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""})();d.exports=h},function(d,o,i){var h=i(5),c=h["__core-js_shared__"];d.exports=c},function(d,o){function i(p){if(p!=null){try{return c.call(p)}catch{}try{return p+""}catch{}}return""}var h=Function.prototype,c=h.toString;d.exports=i},function(d,o){function i(h,c){return h?.[c]}d.exports=i},function(d,o,i){function h(y){return c(function(k,b){var M=-1,B=b.length,T=B>1?b[B-1]:void 0,$=B>2?b[2]:void 0;for(T=y.length>3&&typeof T=="function"?(B--,T):void 0,$&&p(b[0],b[1],$)&&(T=B<3?void 0:T,B=1),k=Object(k);++M<B;){var F=b[M];F&&y(k,F,M,T)}return k})}var c=i(12),p=i(15);d.exports=h},function(d,o,i){function h(y,k,b){return k=p(k===void 0?y.length-1:k,0),function(){for(var M=arguments,B=-1,T=p(M.length-k,0),$=Array(T);++B<T;)$[B]=M[k+B];B=-1;for(var F=Array(k+1);++B<k;)F[B]=M[B];return F[k]=b($),c(y,this,F)}}var c=i(14),p=Math.max;d.exports=h},function(d,o,i){var h=i(47),c=i(49),p=c(h);d.exports=p},function(d,o,i){var h=i(48),c=i(9),p=i(13),y=c?function(k,b){return c(k,"toString",{configurable:!0,enumerable:!1,value:h(b),writable:!0})}:p;d.exports=y},function(d,o){function i(h){return function(){return h}}d.exports=i},function(d,o){function i(y){var k=0,b=0;return function(){var M=p(),B=c-(M-b);if(b=M,B>0){if(++k>=h)return arguments[0]}else k=0;return y.apply(void 0,arguments)}}var h=800,c=16,p=Date.now;d.exports=i},function(d,o,i){function h(k){return y(k)?c(k,!0):p(k)}var c=i(18),p=i(60),y=i(7);d.exports=h},function(d,o){function i(h,c){for(var p=-1,y=Array(h);++p<h;)y[p]=c(p);return y}d.exports=i},function(d,o,i){var h=i(53),c=i(1),p=Object.prototype,y=p.hasOwnProperty,k=p.propertyIsEnumerable,b=h((function(){return arguments})())?h:function(M){return c(M)&&y.call(M,"callee")&&!k.call(M,"callee")};d.exports=b},function(d,o,i){function h(k){return p(k)&&c(k)==y}var c=i(0),p=i(1),y="[object Arguments]";d.exports=h},function(d,o,i){(function(h){var c=i(5),p=i(55),y=typeof o=="object"&&o&&!o.nodeType&&o,k=y&&typeof h=="object"&&h&&!h.nodeType&&h,b=k&&k.exports===y,M=b?c.Buffer:void 0,B=M?M.isBuffer:void 0,T=B||p;h.exports=T}).call(o,i(20)(d))},function(d,o){function i(){return!1}d.exports=i},function(d,o,i){var h=i(57),c=i(58),p=i(59),y=p&&p.isTypedArray,k=y?c(y):h;d.exports=k},function(d,o,i){function h(b){return y(b)&&p(b.length)&&!!k[c(b)]}var c=i(0),p=i(16),y=i(1),k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object Boolean]"]=k["[object DataView]"]=k["[object Date]"]=k["[object Error]"]=k["[object Function]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object WeakMap]"]=!1,d.exports=h},function(d,o){function i(h){return function(c){return h(c)}}d.exports=i},function(d,o,i){(function(h){var c=i(11),p=typeof o=="object"&&o&&!o.nodeType&&o,y=p&&typeof h=="object"&&h&&!h.nodeType&&h,k=y&&y.exports===p,b=k&&c.process,M=(function(){try{return b&&b.binding&&b.binding("util")}catch{}})();h.exports=M}).call(o,i(20)(d))},function(d,o,i){function h(M){if(!c(M))return y(M);var B=p(M),T=[];for(var $ in M)($!="constructor"||!B&&b.call(M,$))&&T.push($);return T}var c=i(2),p=i(21),y=i(61),k=Object.prototype,b=k.hasOwnProperty;d.exports=h},function(d,o){function i(h){var c=[];if(h!=null)for(var p in Object(h))c.push(p);return c}d.exports=i},function(d,o,i){var h=i(14),c=i(12),p=i(22),y=c(function(k,b){try{return h(k,void 0,b)}catch(M){return p(M)?M:new Error(M)}});d.exports=y},function(d,o,i){function h(F){if(!y(F)||c(F)!=k)return!1;var Z=p(F);if(Z===null)return!0;var q=T.call(Z,"constructor")&&Z.constructor;return typeof q=="function"&&q instanceof q&&B.call(q)==$}var c=i(0),p=i(64),y=i(1),k="[object Object]",b=Function.prototype,M=Object.prototype,B=b.toString,T=M.hasOwnProperty,$=B.call(Object);d.exports=h},function(d,o,i){var h=i(23),c=h(Object.getPrototypeOf,Object);d.exports=c},function(d,o,i){function h(p,y){return c(y,function(k){return p[k]})}var c=i(24);d.exports=h},function(d,o,i){function h(k,b,M,B){return k===void 0||c(k,p[M])&&!y.call(B,M)?b:k}var c=i(6),p=Object.prototype,y=p.hasOwnProperty;d.exports=h},function(d,o){function i(c){return"\\"+h[c]}var h={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};d.exports=i},function(d,o,i){function h(k){return y(k)?c(k):p(k)}var c=i(18),p=i(69),y=i(7);d.exports=h},function(d,o,i){function h(b){if(!c(b))return p(b);var M=[];for(var B in Object(b))k.call(b,B)&&B!="constructor"&&M.push(B);return M}var c=i(21),p=i(70),y=Object.prototype,k=y.hasOwnProperty;d.exports=h},function(d,o,i){var h=i(23),c=h(Object.keys,Object);d.exports=c},function(d,o,i){var h=i(72),c=i(77),p=i(78),y=i(25),k={escape:c,evaluate:p,interpolate:y,variable:"",imports:{_:{escape:h}}};d.exports=k},function(d,o,i){function h(b){return b=p(b),b&&k.test(b)?b.replace(y,c):b}var c=i(73),p=i(26),y=/[&<>"']/g,k=RegExp(y.source);d.exports=h},function(d,o,i){var h=i(74),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=h(c);d.exports=p},function(d,o){function i(h){return function(c){return h?.[c]}}d.exports=i},function(d,o,i){function h(B){if(typeof B=="string")return B;if(y(B))return p(B,h)+"";if(k(B))return M?M.call(B):"";var T=B+"";return T=="0"&&1/B==-1/0?"-0":T}var c=i(4),p=i(24),y=i(19),k=i(76),b=c?c.prototype:void 0,M=b?b.toString:void 0;d.exports=h},function(d,o,i){function h(k){return typeof k=="symbol"||p(k)&&c(k)==y}var c=i(0),p=i(1),y="[object Symbol]";d.exports=h},function(d,o){var i=/<%-([\s\S]+?)%>/g;d.exports=i},function(d,o){var i=/<%([\s\S]+?)%>/g;d.exports=i},function(d,o,i){Object.defineProperty(o,"__esModule",{value:!0}),o.default={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:386102e-12,display:"sqmiles",decimals:2}}},function(d,o,i){function h(T){return T&&T.__esModule?T:{default:T}}function c(T){return T<10?"0"+T.toString():T.toString()}function p(T,$,F){var Z=Math.abs(T),q=Math.floor(Z),J=Math.floor(60*(Z-q)),ce=Math.round(3600*(Z-q-J/60)*100)/100,be=Z===T?$:F;return c(q)+"&deg; "+c(J)+"' "+c(ce)+'" '+be}function y(T){var $=T[T.length-1],F=T.map(function(be){return[be.lat,be.lng]}),Z=L.polyline(F),q=L.polygon(F),J=1e3*(0,b.default)(Z.toGeoJSON(),{units:"kilometers"}),ce=(0,B.default)(q.toGeoJSON());return{lastCoord:{dd:{x:$.lng,y:$.lat},dms:{x:p($.lng,"E","W"),y:p($.lat,"N","S")}},length:J,area:ce}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=y;var k=i(81),b=h(k),M=i(84),B=h(M)},function(d,o,i){function h(k,b){if(b=b||{},!Object(y.d)(b))throw new Error("options is invalid");if(!k)throw new Error("geojson is required");return Object(p.b)(k,function(M,B){var T=B.geometry.coordinates;return M+Object(c.a)(T[0],T[1],b)},0)}Object.defineProperty(o,"__esModule",{value:!0});var c=i(82),p=i(27),y=i(3);o.default=h},function(d,o,i){function h(y,k,b){if(b=b||{},!Object(p.d)(b))throw new Error("options is invalid");var M=b.units,B=Object(c.a)(y),T=Object(c.a)(k),$=Object(p.a)(T[1]-B[1]),F=Object(p.a)(T[0]-B[0]),Z=Object(p.a)(B[1]),q=Object(p.a)(T[1]),J=Math.pow(Math.sin($/2),2)+Math.pow(Math.sin(F/2),2)*Math.cos(Z)*Math.cos(q);return Object(p.g)(2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J)),M)}var c=i(83),p=i(3);o.a=h},function(d,o,i){function h(c){if(!c)throw new Error("coord is required");if(c.type==="Feature"&&c.geometry!==null&&c.geometry.type==="Point")return c.geometry.coordinates;if(c.type==="Point")return c.coordinates;if(Array.isArray(c)&&c.length>=2&&c[0].length===void 0&&c[1].length===void 0)return c;throw new Error("coord must be GeoJSON Point or an Array of numbers")}i.d(o,"a",function(){return h}),i(3)},function(d,o,i){function h(B){return Object(b.a)(B,function(T,$){return T+c($)},0)}function c(B){var T,$=0;switch(B.type){case"Polygon":return p(B.coordinates);case"MultiPolygon":for(T=0;T<B.coordinates.length;T++)$+=p(B.coordinates[T]);return $;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(T=0;T<B.geometries.length;T++)$+=c(B.geometries[T]);return $}}function p(B){var T=0;if(B&&B.length>0){T+=Math.abs(y(B[0]));for(var $=1;$<B.length;$++)T-=Math.abs(y(B[$]))}return T}function y(B){var T,$,F,Z,q,J,ce,be=0,he=B.length;if(he>2){for(ce=0;ce<he;ce++)ce===he-2?(Z=he-2,q=he-1,J=0):ce===he-1?(Z=he-1,q=0,J=1):(Z=ce,q=ce+1,J=ce+2),T=B[Z],$=B[q],F=B[J],be+=(k(F[0])-k(T[0]))*Math.sin(k($[1]));be=be*M*M/2}return be}function k(B){return B*Math.PI/180}Object.defineProperty(o,"__esModule",{value:!0});var b=i(27),M=6378137;o.default=h},function(d,o,i){function h(k,b){return b||(b=document),b.querySelector(k)}function c(k,b){return b||(b=document),Array.prototype.slice.call(b.querySelectorAll(k))}function p(k){if(k)return k.setAttribute("style","display:none;"),k}function y(k){if(k)return k.removeAttribute("style"),k}Object.defineProperty(o,"__esModule",{value:!0}),o.selectOne=h,o.selectAll=c,o.hide=p,o.show=y},function(d,o,i){function h(k,b){if(!(k instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var c=(function(){function k(b,M){for(var B=0;B<M.length;B++){var T=M[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}return function(b,M,B){return M&&k(b.prototype,M),B&&k(b,B),b}})(),p={activeColor:"#ABE67E",completedColor:"#C8F2BE"},y=(function(){function k(b){h(this,k),this._options=L.extend({},p,this._options,b)}return c(k,[{key:"getSymbol",value:function(b){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:1,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[b]}}]),k})();o.default=y},function(d,o,i){function h(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".",k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:",",b=c<0?"-":"",M=Math.abs(+c||0),B=parseInt(M.toFixed(p),10)+"",T=B.length>3?B.length%3:0;return[b,T?B.substr(0,T)+k:"",B.substr(T).replace(/(\d{3})(?=\d)/g,"$1"+k),p?""+y+Math.abs(M-B).toFixed(p).slice(2):""].join("")}Object.defineProperty(o,"__esModule",{value:!0}),o.numberFormat=h},function(d,o,i){function h(M){return M&&M.__esModule?M:{default:M}}Object.defineProperty(o,"__esModule",{value:!0});var c=i(89);Object.defineProperty(o,"controlTemplate",{enumerable:!0,get:function(){return h(c).default}});var p=i(90);Object.defineProperty(o,"resultsTemplate",{enumerable:!0,get:function(){return h(p).default}});var y=i(91);Object.defineProperty(o,"pointPopupTemplate",{enumerable:!0,get:function(){return h(y).default}});var k=i(92);Object.defineProperty(o,"linePopupTemplate",{enumerable:!0,get:function(){return h(k).default}});var b=i(93);Object.defineProperty(o,"areaPopupTemplate",{enumerable:!0,get:function(){return h(b).default}})},function(d,o,i){d.exports='<a class="{{ model.className }}-toggle js-toggle" href=# title="Measure distances and areas">Measure</a> <div class="{{ model.className }}-interaction js-interaction"> <div class="js-startprompt startprompt"> <h3>Measure distances and areas</h3> <ul class=tasks> <a href=# class="js-start start">Create a new measurement</a> </ul> </div> <div class=js-measuringprompt> <h3>Measure distances and areas</h3> <p class=js-starthelp>Start creating a measurement by adding points to the map</p> <div class="js-results results"></div> <ul class="js-measuretasks tasks"> <li><a href=# class="js-cancel cancel">Cancel</a></li> <li><a href=# class="js-finish finish">Finish measurement</a></li> </ul> </div> </div> '},function(d,o,i){d.exports='<div class=group> <p class="lastpoint heading">Last point</p> <p>{{ model.lastCoord.dms.y }} <span class=coorddivider>/</span> {{ model.lastCoord.dms.x }}</p> <p>{{ numberFormat(model.lastCoord.dd.y, 6) }} <span class=coorddivider>/</span> {{ numberFormat(model.lastCoord.dd.x, 6) }}</p> </div> <% if (model.pointCount > 1) { %> <div class=group> <p><span class=heading>Path distance</span> {{ model.lengthDisplay }}</p> </div> <% } %> <% if (model.pointCount > 2) { %> <div class=group> <p><span class=heading>Area</span> {{ model.areaDisplay }}</p> </div> <% } %> '},function(d,o,i){d.exports='<h3>Point location</h3> <p>{{ model.lastCoord.dms.y }} <span class=coorddivider>/</span> {{ model.lastCoord.dms.x }}</p> <p>{{ numberFormat(model.lastCoord.dd.y, 6) }} <span class=coorddivider>/</span> {{ numberFormat(model.lastCoord.dd.x, 6) }}</p> <ul class=tasks> <li><a href=# class="js-zoomto zoomto">Center on this location</a></li> <li><a href=# class="js-deletemarkup deletemarkup">Delete</a></li> </ul> '},function(d,o,i){d.exports='<h3>Linear measurement</h3> <p>{{ model.lengthDisplay }}</p> <ul class=tasks> <li><a href=# class="js-zoomto zoomto">Center on this line</a></li> <li><a href=# class="js-deletemarkup deletemarkup">Delete</a></li> </ul> '},function(d,o,i){d.exports='<h3>Area measurement</h3> <p>{{ model.areaDisplay }}</p> <p>{{ model.lengthDisplay }} Perimeter</p> <ul class=tasks> <li><a href=# class="js-zoomto zoomto">Center on this area</a></li> <li><a href=# class="js-deletemarkup deletemarkup">Delete</a></li> </ul> '}])),Xf}Iy();var fc={exports:{}},ep;function Fy(){return ep||(ep=1,(function(d){(function(o){var i;i=Vp(),d.exports=o(i)})(function(o){return o.Polyline._flat=o.LineUtil.isFlat||o.Polyline._flat||function(i){return!o.Util.isArray(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"},o.GeometryUtil=o.extend(o.GeometryUtil||{},{distance:function(i,h,c){return i.latLngToLayerPoint(h).distanceTo(i.latLngToLayerPoint(c))},distanceSegment:function(i,h,c,p){var y=i.latLngToLayerPoint(h),k=i.latLngToLayerPoint(c),b=i.latLngToLayerPoint(p);return o.LineUtil.pointToSegmentDistance(y,k,b)},readableDistance:function(i,h){var c=h!=="imperial",p;return c?i>1e3?p=(i/1e3).toFixed(2)+" km":p=i.toFixed(1)+" m":(i*=1.09361,i>1760?p=(i/1760).toFixed(2)+" miles":p=i.toFixed(1)+" yd"),p},belongsSegment:function(i,h,c,p){p=p===void 0?.2:p;var y=h.distanceTo(c),k=h.distanceTo(i)+i.distanceTo(c)-y;return k/y<p},length:function(i){var h=o.GeometryUtil.accumulatedLengths(i);return h.length>0?h[h.length-1]:0},accumulatedLengths:function(i){if(typeof i.getLatLngs=="function"&&(i=i.getLatLngs()),i.length===0)return[];for(var h=0,c=[0],p=0,y=i.length-1;p<y;p++)h+=i[p].distanceTo(i[p+1]),c.push(h);return c},closestOnSegment:function(i,h,c,p){var y=i.getMaxZoom();y===1/0&&(y=i.getZoom());var k=i.project(h,y),b=i.project(c,y),M=i.project(p,y),B=o.LineUtil.closestPointOnSegment(k,b,M);return i.unproject(B,y)},closestOnCircle:function(i,h){const c=i.getLatLng(),p=i.getRadius(),y=typeof p=="number"?p:p.radius,k=h.lng,b=h.lat,M=c.lng,B=c.lat,T=k-M,$=b-B,F=Math.sqrt(T*T+$*$),Z=M+T/F*y,q=B+$/F*y;return new o.LatLng(q,Z)},closest:function(i,h,c,p){var y,k=1/0,b=null,M,B,T,$;if(h instanceof Array)if(h[0]instanceof Array&&typeof h[0][0]!="number"){for(M=0;M<h.length;M++)$=o.GeometryUtil.closest(i,h[M],c,p),$&&$.distance<k&&(k=$.distance,b=$);return b}else if(h[0]instanceof o.LatLng||typeof h[0][0]=="number"||typeof h[0].lat=="number")h=o.polyline(h);else return b;if(!(h instanceof o.Polyline))return b;if(y=JSON.parse(JSON.stringify(h.getLatLngs().slice(0))),h instanceof o.Polygon){var F=function(ce){if(o.Polyline._flat(ce))ce.push(ce[0]);else for(var be=0;be<ce.length;be++)F(ce[be])};F(y)}if(o.Polyline._flat(y)){if(p){for(M=0,B=y.length;M<B;M++){var Z=y[M];T=o.GeometryUtil.distance(i,c,Z),T<k&&(k=T,b=Z,b.distance=T)}return b}for(M=0,B=y.length;M<B-1;M++){var q=y[M],J=y[M+1];T=o.GeometryUtil.distanceSegment(i,c,q,J),T<=k&&(k=T,b=o.GeometryUtil.closestOnSegment(i,c,q,J),b.distance=T)}return b}else{for(M=0;M<y.length;M++)$=o.GeometryUtil.closest(i,y[M],c,p),$.distance<k&&(k=$.distance,b=$);return b}},closestLayer:function(i,h,c){for(var p=1/0,y=null,k=null,b=1/0,M=0,B=h.length;M<B;M++){var T=h[M];if(T instanceof o.LayerGroup){var $=o.GeometryUtil.closestLayer(i,T.getLayers(),c);$.distance<p&&(p=$.distance,y=$)}else T instanceof o.Circle?(k=this.closestOnCircle(T,c),b=o.GeometryUtil.distance(i,c,k)):typeof T.getLatLng=="function"?(k=T.getLatLng(),b=o.GeometryUtil.distance(i,c,k)):(k=o.GeometryUtil.closest(i,T,c),k&&(b=k.distance)),b<p&&(p=b,y={layer:T,latlng:k,distance:b})}return y},nClosestLayers:function(i,h,c,p){if(p=typeof p=="number"?p:h.length,p<1||h.length<1)return null;for(var y=[],k,b,M=0,B=h.length;M<B;M++){var T=h[M];if(T instanceof o.LayerGroup){var $=o.GeometryUtil.closestLayer(i,T.getLayers(),c);y.push($)}else T instanceof o.Circle?(b=this.closestOnCircle(T,c),k=o.GeometryUtil.distance(i,c,b)):typeof T.getLatLng=="function"?(b=T.getLatLng(),k=o.GeometryUtil.distance(i,c,b)):(b=o.GeometryUtil.closest(i,T,c),b&&(k=b.distance)),y.push({layer:T,latlng:b,distance:k})}return y.sort(function(F,Z){return F.distance-Z.distance}),y.length>p?y.slice(0,p):y},layersWithin:function(i,h,c,p){p=typeof p=="number"?p:1/0;for(var y=[],k=null,b=0,M=0,B=h.length;M<B;M++){var T=h[M];typeof T.getLatLng=="function"?(k=T.getLatLng(),b=o.GeometryUtil.distance(i,c,k)):(k=o.GeometryUtil.closest(i,T,c),k&&(b=k.distance)),k&&b<p&&y.push({layer:T,latlng:k,distance:b})}var $=y.sort(function(F,Z){return F.distance-Z.distance});return $},closestLayerSnap:function(i,h,c,p,y){p=typeof p=="number"?p:1/0,y=typeof y=="boolean"?y:!0;var k=o.GeometryUtil.closestLayer(i,h,c);if(!k||k.distance>p)return null;if(y&&typeof k.layer.getLatLngs=="function"){var b=o.GeometryUtil.closest(i,k.layer,k.latlng,!0);b.distance<p&&(k.latlng=b,k.distance=o.GeometryUtil.distance(i,b,c))}return k},interpolateOnPointSegment:function(i,h,c){return o.point(i.x*(1-c)+c*h.x,i.y*(1-c)+c*h.y)},interpolateOnLine:function(i,h,c){h=h instanceof o.Polyline?h.getLatLngs():h;var p=h.length;if(p<2)return null;if(c=Math.max(Math.min(c,1),0),c===0)return{latLng:h[0]instanceof o.LatLng?h[0]:o.latLng(h[0]),predecessor:-1};if(c==1)return{latLng:h[h.length-1]instanceof o.LatLng?h[h.length-1]:o.latLng(h[h.length-1]),predecessor:h.length-2};var y=i.getMaxZoom();y===1/0&&(y=i.getZoom());for(var k=[],b=0,M=0;M<p;M++)k[M]=i.project(h[M],y),M>0&&(b+=k[M-1].distanceTo(k[M]));for(var B=b*c,T=0,$=0,M=0;$<B;M++){var F=k[M],Z=k[M+1];T=$,$+=F.distanceTo(Z)}if(F==null&&Z==null)var F=k[0],Z=k[1],M=1;var q=$-T!==0?(B-T)/($-T):0,J=o.GeometryUtil.interpolateOnPointSegment(F,Z,q);return{latLng:i.unproject(J,y),predecessor:M-1}},locateOnLine:function(i,h,c){var p=h.getLatLngs();if(c.equals(p[0]))return 0;if(c.equals(p[p.length-1]))return 1;for(var y=o.GeometryUtil.closest(i,h,c,!1),k=o.GeometryUtil.accumulatedLengths(p),b=k[k.length-1],M=0,B=!1,T=0,$=p.length-1;T<$;T++){var F=p[T],Z=p[T+1];if(M=k[T],o.GeometryUtil.belongsSegment(y,F,Z,.001)){M+=F.distanceTo(y),B=!0;break}}if(!B)throw"Could not interpolate "+c.toString()+" within "+h.toString();return M/b},reverse:function(i){return o.polyline(i.getLatLngs().slice(0).reverse())},extract:function(i,h,c,p){if(c>p)return o.GeometryUtil.extract(i,o.GeometryUtil.reverse(h),1-c,1-p);c=Math.max(Math.min(c,1),0),p=Math.max(Math.min(p,1),0);var y=h.getLatLngs(),k=o.GeometryUtil.interpolateOnLine(i,h,c),b=o.GeometryUtil.interpolateOnLine(i,h,p);if(c==p){var M=o.GeometryUtil.interpolateOnLine(i,h,p);return[M.latLng]}k.predecessor==-1&&(k.predecessor=0),b.predecessor==-1&&(b.predecessor=0);var B=y.slice(k.predecessor+1,b.predecessor+1);return B.unshift(k.latLng),B.push(b.latLng),B},isBefore:function(i,h){if(!h)return!1;var c=i.getLatLngs(),p=h.getLatLngs();return c[c.length-1].equals(p[0])},isAfter:function(i,h){if(!h)return!1;var c=i.getLatLngs(),p=h.getLatLngs();return c[0].equals(p[p.length-1])},startsAtExtremity:function(i,h){if(!h)return!1;var c=i.getLatLngs(),p=h.getLatLngs(),y=c[0];return y.equals(p[0])||y.equals(p[p.length-1])},computeAngle:function(i,h){return Math.atan2(h.y-i.y,h.x-i.x)*180/Math.PI},computeSlope:function(i,h){var c=(h.y-i.y)/(h.x-i.x),p=i.y-c*i.x;return{a:c,b:p}},rotatePoint:function(i,h,c,p){var y=i.getMaxZoom();y===1/0&&(y=i.getZoom());var k=c*Math.PI/180,b=i.project(h,y),M=i.project(p,y),B=Math.cos(k)*(b.x-M.x)-Math.sin(k)*(b.y-M.y)+M.x,T=Math.sin(k)*(b.x-M.x)+Math.cos(k)*(b.y-M.y)+M.y;return i.unproject(new o.Point(B,T),y)},bearing:function(i,h){var c=Math.PI/180,p=i.lat*c,y=h.lat*c,k=i.lng*c,b=h.lng*c,M=Math.sin(b-k)*Math.cos(y),B=Math.cos(p)*Math.sin(y)-Math.sin(p)*Math.cos(y)*Math.cos(b-k),T=(Math.atan2(M,B)*180/Math.PI+360)%360;return T>=180?T-360:T},destination:function(i,h,c){h=(h+360)%360;var p=Math.PI/180,y=180/Math.PI,k=o.CRS.Earth.R,b=i.lng*p,M=i.lat*p,B=h*p,T=Math.sin(M),$=Math.cos(M),F=Math.cos(c/k),Z=Math.sin(c/k),q=Math.asin(T*F+$*Z*Math.cos(B)),J=b+Math.atan2(Math.sin(B)*Z*$,F-T*Math.sin(q));return J=J*y,J=J>180?J-360:J<-180?J+360:J,o.latLng([q*y,J])},angle:function(i,h,c){var p=i.latLngToContainerPoint(h),y=i.latLngToContainerPoint(c),k=Math.atan2(y.y-p.y,y.x-p.x)*180/Math.PI+90;return k+=k<0?360:0,k},destinationOnSegment:function(i,h,c,p){var y=o.GeometryUtil.angle(i,h,c),k=o.GeometryUtil.destination(h,y,p);return o.GeometryUtil.closestOnSegment(i,k,h,c)}}),o.GeometryUtil})})(fc)),fc.exports}Fy();const Ny=ae.forwardRef(function({layers:o,visible:i,styles:h},c){const p=ae.useRef(null),[y,k]=ae.useState(null),[b,M]=ae.useState(null),B=ae.useMemo(()=>({lat:-33.45,lng:-70.65}),[]);ae.useImperativeHandle(c,()=>({zoomTo(he){if(p.current)try{const Re=$s.geoJSON(he).getBounds();Re.isValid()&&p.current.fitBounds(Re,{padding:[20,20]})}catch{}},get leafletMap(){return p.current}}));function T(he){const Ae=he.shape||he.layer?.pm?._shape||"Geometry";if(Ae==="Polygon"){const Re=$s.GeometryUtil.geodesicArea(he.layer.getLatLngs()[0]),le=$s.GeometryUtil.length(he.layer.getLatLngs()[0]);return`📐 Polígono → Área: ${(Re/1e4).toFixed(2)} ha | Perímetro: ${(le/1e3).toFixed(2)} km`}if(Ae==="Line"){const Re=he.layer.getLatLngs(),le=$s.GeometryUtil.length(Re);return`📏 Línea → ${le<1e3?le.toFixed(1)+" m":(le/1e3).toFixed(2)} km`}if(Ae==="Circle"){const Re=he.layer.getRadius(),ke=Math.PI*Re*Re/1e4;return`⭕ Círculo → Radio: ${Re.toFixed(1)} m | Área: ${ke.toFixed(2)} ha`}return""}ae.useEffect(()=>{if(!p.current)return;const he=p.current,Ae=new $s.Control.Measure({primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:"hectares",activeColor:"#00bcd4",completedColor:"#4caf50"});Ae.addTo(he),he._measureControl=Ae,he.pm&&(he.pm.addControls({position:"topleft",drawCircle:!1,drawMarker:!1,drawText:!1}),he.on("pm:create",Re=>{const le=T(Re);le&&Re.layer.bindPopup(le).openPopup(),k(null)}))},[]);function $(he){p.current&&(p.current.pm.enableDraw(he),k(he))}function F(){if(!p.current)return;const he=p.current;he.pm.disableDraw(),he.eachLayer(Ae=>{Ae.pm&&Ae.pm._shape&&he.removeLayer(Ae)}),k(null),M({msg:"🗑️ Geometrías eliminadas",type:"info"})}function Z(){if(!p.current)return;const he=[[-56,-76],[-17.5,-66]];p.current.fitBounds(he,{padding:[20,20]})}async function q(){if(p.current){if(!("geolocation"in navigator)){M({msg:"❌ Geolocalización no disponible",type:"error"});return}navigator.geolocation.getCurrentPosition(he=>{const Ae=new Oa.LatLng(he.coords.latitude,he.coords.longitude);p.current.setView(Ae,13),$s.circleMarker(Ae,{radius:6}).addTo(p.current),M({msg:"📍 Ubicación encontrada",type:"success"})},he=>M({msg:"❌ No se pudo obtener tu ubicación: "+he.message,type:"error"}),{enableHighAccuracy:!0,timeout:1e4})}}const[J,ce]=ae.useState(!1);function be(){const he=p.current?.getContainer();he&&(document.fullscreenElement?(document.exitFullscreen?.(),ce(!1)):(he.requestFullscreen?.(),ce(!0)))}return X.jsxs("div",{className:"relative w-full rounded-xl border shadow-lg overflow-hidden",children:[b&&X.jsx("div",{className:"fixed top-4 right-4 z-[2000]",children:X.jsx(Fp,{message:b.msg,type:b.type,duration:4e3,onClose:()=>M(null)})}),X.jsxs("div",{className:"absolute top-2 left-2 z-[1000] flex flex-wrap gap-2 p-2 bg-black/70 backdrop-blur rounded-lg shadow-md max-w-[95vw]",children:[X.jsxs("button",{onClick:Z,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["↺ ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Chile"})]}),X.jsxs("button",{onClick:q,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["📍 ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Ubicación"})]}),X.jsxs("button",{onClick:be,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["⛶ ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Pantalla completa"})]}),X.jsxs("button",{onClick:()=>{p.current&&p.current._measureControl&&p.current._measureControl.toggle()},className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["🔍 ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Medir"})]}),X.jsxs("div",{className:"flex flex-wrap gap-2",children:[X.jsxs("button",{onClick:()=>$("Polygon"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${y==="Polygon"?"btn-map-active":""}`,children:["✏️ ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Polígono"})]}),X.jsxs("button",{onClick:()=>$("Line"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${y==="Line"?"btn-map-active":""}`,children:["📏 ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Línea"})]}),X.jsxs("button",{onClick:()=>$("Circle"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${y==="Circle"?"btn-map-active":""}`,children:["⭕ ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Círculo"})]}),y&&X.jsxs("button",{onClick:F,className:"btn-map btn-map-danger p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["❌ ",X.jsx("span",{className:"hidden sm:inline ml-1",children:"Cancelar"})]})]})]}),X.jsxs(Dy,{center:[B.lat,B.lng],zoom:5,className:"w-full h-[60vh] sm:h-[70vh] rounded-xl",preferCanvas:!0,zoomControl:!1,ref:he=>{he&&(p.current=he)},children:[X.jsx(Ry,{position:"bottomright"}),X.jsx(Oy,{position:"bottomleft"}),X.jsx("div",{className:"hidden sm:block",children:X.jsxs(hu,{position:"bottomleft",children:[X.jsx(hu.BaseLayer,{checked:!0,name:"OpenStreetMap",children:X.jsx(Kf,{attribution:"© OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",crossOrigin:"anonymous"})}),X.jsx(hu.BaseLayer,{name:"Esri World Imagery",children:X.jsx(Kf,{attribution:"Tiles © Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",crossOrigin:"anonymous"})})]})})]})]})});function zy({layers:d,styles:o,onLocalChange:i}){const[h,c]=ae.useState(!1);return d.length===0?null:X.jsxs("div",{className:"mt-4",children:[X.jsxs("button",{onClick:()=>c(!h),className:"btn btn-secondary w-full flex justify-between items-center text-sm sm:text-base",children:["🎨 Estilos de capas",X.jsx("span",{children:h?"▲":"▼"})]}),h&&X.jsx("div",{className:"mt-4 bg-gray-800 rounded-xl shadow-md p-4 sm:p-6 space-y-6",children:d.map(p=>{const y=o[p.id]||{};return X.jsxs("div",{className:"border-b border-gray-700 pb-4 last:border-0 last:pb-0",children:[X.jsx("h4",{className:"font-semibold text-gray-100 mb-2 text-sm sm:text-base",children:p.name}),X.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Borde",X.jsx("input",{type:"color",value:y.color||"#000000",onChange:k=>i(p.id,{color:k.target.value}),className:"ml-2 w-10 h-6 border border-gray-600 rounded cursor-pointer"})]}),X.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Opacidad",X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"range",min:0,max:1,step:.05,value:y.opacity??1,onChange:k=>i(p.id,{opacity:parseFloat(k.target.value)}),className:"w-full accent-green-500"}),X.jsxs("span",{className:"text-gray-300",children:[Math.round((y.opacity??1)*100),"%"]})]})]}),X.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Relleno",X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"color",value:y.fillColor||"#000000",onChange:k=>i(p.id,{fillColor:k.target.value}),className:"w-10 h-6 border border-gray-600 rounded cursor-pointer"}),X.jsx("input",{type:"range",min:0,max:1,step:.05,value:y.fillOpacity??.5,onChange:k=>i(p.id,{fillOpacity:parseFloat(k.target.value)}),className:"w-full accent-green-500"}),X.jsxs("span",{className:"text-gray-300",children:[Math.round((y.fillOpacity??.5)*100),"%"]})]})]}),X.jsxs("label",{className:"block mb-2 text-xs sm:text-sm text-gray-200",children:["Radio",X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{type:"range",min:1,max:20,step:1,value:y.radius??5,onChange:k=>i(p.id,{radius:parseInt(k.target.value)}),className:"w-full accent-green-500"}),X.jsxs("span",{className:"text-gray-300",children:[y.radius??5,"px"]})]})]})]},p.id)})})]})}const th=[{id:"sernageomin-mineria-19s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",name:"🌐 WMS Minero 19S",layer:$s.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1},{id:"sernageomin-mineria-18s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",name:"🌐 WMS Minero 18S",layer:$s.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1}];function tp({mapRef:d}){const[o,i]=ae.useState(""),[h,c]=ae.useState(""),[p,y]=ae.useState([]),[k,b]=ae.useState({type:null,text:""});ae.useEffect(()=>{y(th)},[]);const M=(F,Z)=>{b({type:F,text:Z}),F!=="loading"&&setTimeout(()=>b({type:null,text:""}),3e3)},B=()=>{const F=d.current?.leafletMap;if(!F||!o.trim())return;const Z=o.trim(),q=`${Date.now()}`;M("loading","⏳ Cargando capa...");try{const J=$s.tileLayer.wms(Z,{layers:h||"0",format:"image/png",transparent:!0,version:"1.3.0"});J.addTo(F),y(ce=>[...ce,{id:q,url:Z,name:h||"0",layer:J,visible:!0}]),M("success","✅ Capa cargada correctamente"),i(""),c("")}catch(J){console.error(J),M("error","❌ Error al cargar la capa")}},T=F=>{const Z=d.current?.leafletMap;Z&&y(q=>q.map(J=>J.id===F?(J.visible&&J.layer?Z.removeLayer(J.layer):J.layer&&J.layer.addTo(Z),{...J,visible:!J.visible}):J))},$=F=>{const Z=d.current?.leafletMap;Z&&y(q=>{const J=q.find(ce=>ce.id===F);return J&&J.layer&&Z.removeLayer(J.layer),q.filter(ce=>ce.id!==F)})};return X.jsxs("div",{className:"p-5 text-white bg-[#1e293b] h-full flex flex-col rounded-lg",children:[X.jsx("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:"🌐 Capas externas"}),X.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[X.jsx("input",{type:"text",value:o,onChange:F=>i(F.target.value),placeholder:"🔗 URL WMS",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),X.jsx("input",{type:"text",value:h,onChange:F=>c(F.target.value),placeholder:"📌 Nombre/ID de capa (ej: 0 o 0,1,2)",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),X.jsx("button",{onClick:B,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-medium shadow transition",children:"➕ Agregar"})]}),k.type&&X.jsx("div",{className:`mb-4 text-sm px-3 py-2 rounded-md font-medium ${k.type==="loading"?"bg-yellow-600":k.type==="success"?"bg-green-600":"bg-red-600"}`,children:k.text}),X.jsx("h3",{className:"text-md font-semibold mb-3",children:"📋 Capas activas"}),X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas Sernageomin"}),X.jsx("ul",{className:"space-y-2",children:p.filter(F=>th.find(Z=>Z.id===F.id)).map(F=>X.jsx("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:X.jsxs("label",{className:"flex items-center gap-2 truncate",children:[X.jsx("input",{type:"checkbox",checked:F.visible,onChange:()=>T(F.id),className:"accent-blue-500"}),X.jsx("span",{className:"truncate",children:F.name})]})},F.id))})]}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas agregadas manualmente"}),X.jsxs("ul",{className:"space-y-2",children:[p.filter(F=>!th.find(Z=>Z.id===F.id)).length===0&&X.jsx("li",{className:"text-gray-400 text-sm italic",children:"No hay capas manuales"}),p.filter(F=>!th.find(Z=>Z.id===F.id)).map(F=>X.jsxs("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:[X.jsxs("label",{className:"flex items-center gap-2 truncate",children:[X.jsx("input",{type:"checkbox",checked:F.visible,onChange:()=>T(F.id),className:"accent-blue-500"}),X.jsx("span",{className:"truncate",children:F.name})]}),X.jsx("button",{onClick:()=>$(F.id),className:"bg-red-600 hover:bg-red-700 px-2 py-1 rounded text-xs",children:"✕"})]},F.id))]})]})]})}function Uy(){const{projectId:d}=v_(),[o,i]=ae.useState([]),[h,c]=ae.useState({}),[p,y]=ae.useState({}),[k,b]=ae.useState(!0),[M,B]=ae.useState(null),[T,$]=ae.useState(null),F=ae.useRef(null),[Z,q]=ae.useState(!1);async function J(){if(!d)return;b(!0);const{data:le,error:ke}=await hr.from("project_layers").select("id,name,geojson").eq("project_id",d).order("created_at",{ascending:!1});if(ke){console.error(ke),i([]),$(ke.message),b(!1);return}i(le||[]);const Ke={};for(const Je of le||[])Ke[Je.id]=!0;c(Ke),b(!1)}async function ce(le){if(le.length===0){y({});return}const{data:ke,error:Ke}=await hr.from("project_layer_styles").select("layer_id, stroke, weight, opacity, fill, fill_opacity, point_radius").in("layer_id",le);if(Ke){console.error(Ke);return}const Je={};for(const nt of le){const Ne=ke?.find(ft=>ft.layer_id===nt);Je[nt]={layer_id:nt,color:Ne?.stroke??"#1f2937",weight:Ne?.weight??2,opacity:Ne?.opacity??1,fillColor:Ne?.fill??"#1f2937",fillOpacity:Ne?.fill_opacity??.2,radius:Ne?.point_radius??5}}y(Je)}ae.useEffect(()=>{J()},[d]),ae.useEffect(()=>{ce(o.map(le=>le.id))},[o]),ae.useEffect(()=>{if(M){const le=setTimeout(()=>B(null),4e3);return()=>clearTimeout(le)}},[M]);function be(le){c(ke=>({...ke,[le]:!ke[le]}))}async function he(le,ke){if(!confirm(`¿Eliminar la capa "${ke??le}"?`))return;const{error:Je}=await hr.from("project_layers").delete().eq("id",le);if(Je){alert(Je.message);return}i(nt=>nt.filter(Ne=>Ne.id!==le)),c(nt=>{const Ne={...nt};return delete Ne[le],Ne}),y(nt=>{const Ne={...nt};return delete Ne[le],Ne})}function Ae(le){F.current?.zoomTo(le)}function Re(le,ke,Ke){y(Je=>({...Je,[le]:{...Je[le],...ke}}))}return X.jsxs("div",{className:"wrap",children:[X.jsxs("div",{className:"card flex flex-col lg:flex-row",style:{width:"min(1400px, 98vw)"},children:[X.jsxs("div",{className:"flex-1 flex flex-col",children:[X.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[X.jsxs(dh,{to:"/dashboard",className:`inline-flex items-center gap-2 px-3 py-1.5 \r
             text-sm font-medium text-white \r
             bg-gray-700 hover:bg-gray-600 \r
             rounded-lg shadow transition`,children:[X.jsx("span",{className:"text-lg",children:"←"}),"Volver"]}),X.jsx("h2",{className:"title text-lg sm:text-xl",children:"Proyecto"}),X.jsx("div",{className:"sm:ml-auto w-full sm:w-auto",children:X.jsx(yy,{projectId:d,onLayerAdded:()=>{B("✅ Capa creada"),J()},onError:le=>$(le)})})]}),k&&X.jsx("div",{className:"hint text-blue-600 mb-2",children:"⏳ Cargando capas..."}),T&&X.jsx("div",{className:"hint text-red-700 mb-2",children:T}),M&&X.jsx("div",{className:"hint text-green-700 mb-2",children:M}),X.jsx(vy,{layers:o,visible:h,onToggleVisible:be,onZoom:le=>Ae(le.geojson),onDelete:le=>he(le.id,le.name)}),X.jsx(zy,{layers:o,styles:p,onLocalChange:(le,ke)=>Re(le,ke)}),X.jsx("div",{style:{flex:1,minHeight:"500px"},children:X.jsx(Ny,{ref:F,layers:o,visible:h,styles:p})})]}),X.jsx("div",{className:"hidden lg:block w-80 bg-[#1e293b] border-l border-gray-700",children:X.jsx(tp,{mapRef:F})})]}),X.jsx("button",{onClick:()=>q(!0),className:"lg:hidden fixed top-4 right-4 z-[1500] w-12 h-12 flex items-center justify-center rounded-full bg-green-600 hover:bg-green-700 text-white shadow-lg transition","aria-label":"Capas externas",children:"🌐"}),Z&&X.jsxs("div",{className:"fixed inset-0 z-[2000] flex",children:[X.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>q(!1)}),X.jsxs("aside",{className:`
              relative w-72 bg-[#1e293b] h-full p-4 shadow-xl z-[2000] overflow-y-auto
              transform transition-transform duration-300 ease-in-out
              ${Z?"translate-x-0":"translate-x-full"}
            `,children:[X.jsxs("div",{className:"flex justify-between items-center mb-4 text-white",children:[X.jsx("h2",{className:"font-semibold",children:"Capas externas"}),X.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),X.jsx(tp,{mapRef:F})]})]})]})}function $y(){return X.jsx(ry,{basename:"/",children:X.jsxs(O_,{children:[X.jsx(iu,{path:"/login",element:X.jsx(eh,{})}),X.jsx(iu,{path:"/dashboard",element:X.jsx(qf,{fallback:X.jsx(eh,{}),children:d=>X.jsx(_y,{email:d.user.email??"sin-email"})})}),X.jsx(iu,{path:"/project/:projectId",element:X.jsx(qf,{fallback:X.jsx(eh,{}),children:()=>X.jsx(Uy,{})})}),X.jsx(iu,{path:"*",element:X.jsx(eh,{})})]})})}jm.createRoot(document.getElementById("root")).render(X.jsx(cu.StrictMode,{children:X.jsx($y,{})}));
