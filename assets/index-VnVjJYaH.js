(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const p of f)if(p.type==="childList")for(const _ of p.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function a(f){const p={};return f.integrity&&(p.integrity=f.integrity),f.referrerPolicy&&(p.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?p.credentials="include":f.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(f){if(f.ep)return;f.ep=!0;const p=a(f);fetch(f.href,p)}})();var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qc(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function xf(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var s=u.default;if(typeof s=="function"){var a=function c(){var f=!1;try{f=this instanceof c}catch{}return f?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(u).forEach(function(c){var f=Object.getOwnPropertyDescriptor(u,c);Object.defineProperty(a,c,f.get?f:{enumerable:!0,get:function(){return u[c]}})}),a}var td={exports:{}},Mu={},nd={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function Sy(){if(Nm)return Nt;Nm=1;var u=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),_=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),F=Symbol.iterator;function H(ce){return ce===null||typeof ce!="object"?null:(ce=F&&ce[F]||ce["@@iterator"],typeof ce=="function"?ce:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,W={};function Y(ce,Fe,mt){this.props=ce,this.context=Fe,this.refs=W,this.updater=mt||J}Y.prototype.isReactComponent={},Y.prototype.setState=function(ce,Fe){if(typeof ce!="object"&&typeof ce!="function"&&ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ce,Fe,"setState")},Y.prototype.forceUpdate=function(ce){this.updater.enqueueForceUpdate(this,ce,"forceUpdate")};function ve(){}ve.prototype=Y.prototype;function $e(ce,Fe,mt){this.props=ce,this.context=Fe,this.refs=W,this.updater=mt||J}var Oe=$e.prototype=new ve;Oe.constructor=$e,Q(Oe,Y.prototype),Oe.isPureReactComponent=!0;var ye=Array.isArray,Ee=Object.prototype.hasOwnProperty,De={current:null},He={key:!0,ref:!0,__self:!0,__source:!0};function _t(ce,Fe,mt){var ut,O={},q=null,re=null;if(Fe!=null)for(ut in Fe.ref!==void 0&&(re=Fe.ref),Fe.key!==void 0&&(q=""+Fe.key),Fe)Ee.call(Fe,ut)&&!He.hasOwnProperty(ut)&&(O[ut]=Fe[ut]);var fe=arguments.length-2;if(fe===1)O.children=mt;else if(1<fe){for(var Ae=Array(fe),Ye=0;Ye<fe;Ye++)Ae[Ye]=arguments[Ye+2];O.children=Ae}if(ce&&ce.defaultProps)for(ut in fe=ce.defaultProps,fe)O[ut]===void 0&&(O[ut]=fe[ut]);return{$$typeof:u,type:ce,key:q,ref:re,props:O,_owner:De.current}}function X(ce,Fe){return{$$typeof:u,type:ce.type,key:Fe,ref:ce.ref,props:ce.props,_owner:ce._owner}}function tt(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===u}function lt(ce){var Fe={"=":"=0",":":"=2"};return"$"+ce.replace(/[=:]/g,function(mt){return Fe[mt]})}var wt=/\/+/g;function Ct(ce,Fe){return typeof ce=="object"&&ce!==null&&ce.key!=null?lt(""+ce.key):Fe.toString(36)}function Jt(ce,Fe,mt,ut,O){var q=typeof ce;(q==="undefined"||q==="boolean")&&(ce=null);var re=!1;if(ce===null)re=!0;else switch(q){case"string":case"number":re=!0;break;case"object":switch(ce.$$typeof){case u:case s:re=!0}}if(re)return re=ce,O=O(re),ce=ut===""?"."+Ct(re,0):ut,ye(O)?(mt="",ce!=null&&(mt=ce.replace(wt,"$&/")+"/"),Jt(O,Fe,mt,"",function(Ye){return Ye})):O!=null&&(tt(O)&&(O=X(O,mt+(!O.key||re&&re.key===O.key?"":(""+O.key).replace(wt,"$&/")+"/")+ce)),Fe.push(O)),1;if(re=0,ut=ut===""?".":ut+":",ye(ce))for(var fe=0;fe<ce.length;fe++){q=ce[fe];var Ae=ut+Ct(q,fe);re+=Jt(q,Fe,mt,Ae,O)}else if(Ae=H(ce),typeof Ae=="function")for(ce=Ae.call(ce),fe=0;!(q=ce.next()).done;)q=q.value,Ae=ut+Ct(q,fe++),re+=Jt(q,Fe,mt,Ae,O);else if(q==="object")throw Fe=String(ce),Error("Objects are not valid as a React child (found: "+(Fe==="[object Object]"?"object with keys {"+Object.keys(ce).join(", ")+"}":Fe)+"). If you meant to render a collection of children, use an array instead.");return re}function vn(ce,Fe,mt){if(ce==null)return ce;var ut=[],O=0;return Jt(ce,ut,"","",function(q){return Fe.call(mt,q,O++)}),ut}function Ft(ce){if(ce._status===-1){var Fe=ce._result;Fe=Fe(),Fe.then(function(mt){(ce._status===0||ce._status===-1)&&(ce._status=1,ce._result=mt)},function(mt){(ce._status===0||ce._status===-1)&&(ce._status=2,ce._result=mt)}),ce._status===-1&&(ce._status=0,ce._result=Fe)}if(ce._status===1)return ce._result.default;throw ce._result}var zt={current:null},Re={transition:null},vt={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Re,ReactCurrentOwner:De};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Nt.Children={map:vn,forEach:function(ce,Fe,mt){vn(ce,function(){Fe.apply(this,arguments)},mt)},count:function(ce){var Fe=0;return vn(ce,function(){Fe++}),Fe},toArray:function(ce){return vn(ce,function(Fe){return Fe})||[]},only:function(ce){if(!tt(ce))throw Error("React.Children.only expected to receive a single React element child.");return ce}},Nt.Component=Y,Nt.Fragment=a,Nt.Profiler=f,Nt.PureComponent=$e,Nt.StrictMode=c,Nt.Suspense=k,Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vt,Nt.act=Ne,Nt.cloneElement=function(ce,Fe,mt){if(ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ce+".");var ut=Q({},ce.props),O=ce.key,q=ce.ref,re=ce._owner;if(Fe!=null){if(Fe.ref!==void 0&&(q=Fe.ref,re=De.current),Fe.key!==void 0&&(O=""+Fe.key),ce.type&&ce.type.defaultProps)var fe=ce.type.defaultProps;for(Ae in Fe)Ee.call(Fe,Ae)&&!He.hasOwnProperty(Ae)&&(ut[Ae]=Fe[Ae]===void 0&&fe!==void 0?fe[Ae]:Fe[Ae])}var Ae=arguments.length-2;if(Ae===1)ut.children=mt;else if(1<Ae){fe=Array(Ae);for(var Ye=0;Ye<Ae;Ye++)fe[Ye]=arguments[Ye+2];ut.children=fe}return{$$typeof:u,type:ce.type,key:O,ref:q,props:ut,_owner:re}},Nt.createContext=function(ce){return ce={$$typeof:_,_currentValue:ce,_currentValue2:ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ce.Provider={$$typeof:p,_context:ce},ce.Consumer=ce},Nt.createElement=_t,Nt.createFactory=function(ce){var Fe=_t.bind(null,ce);return Fe.type=ce,Fe},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(ce){return{$$typeof:x,render:ce}},Nt.isValidElement=tt,Nt.lazy=function(ce){return{$$typeof:D,_payload:{_status:-1,_result:ce},_init:Ft}},Nt.memo=function(ce,Fe){return{$$typeof:S,type:ce,compare:Fe===void 0?null:Fe}},Nt.startTransition=function(ce){var Fe=Re.transition;Re.transition={};try{ce()}finally{Re.transition=Fe}},Nt.unstable_act=Ne,Nt.useCallback=function(ce,Fe){return zt.current.useCallback(ce,Fe)},Nt.useContext=function(ce){return zt.current.useContext(ce)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(ce){return zt.current.useDeferredValue(ce)},Nt.useEffect=function(ce,Fe){return zt.current.useEffect(ce,Fe)},Nt.useId=function(){return zt.current.useId()},Nt.useImperativeHandle=function(ce,Fe,mt){return zt.current.useImperativeHandle(ce,Fe,mt)},Nt.useInsertionEffect=function(ce,Fe){return zt.current.useInsertionEffect(ce,Fe)},Nt.useLayoutEffect=function(ce,Fe){return zt.current.useLayoutEffect(ce,Fe)},Nt.useMemo=function(ce,Fe){return zt.current.useMemo(ce,Fe)},Nt.useReducer=function(ce,Fe,mt){return zt.current.useReducer(ce,Fe,mt)},Nt.useRef=function(ce){return zt.current.useRef(ce)},Nt.useState=function(ce){return zt.current.useState(ce)},Nt.useSyncExternalStore=function(ce,Fe,mt){return zt.current.useSyncExternalStore(ce,Fe,mt)},Nt.useTransition=function(){return zt.current.useTransition()},Nt.version="18.3.1",Nt}var zm;function kf(){return zm||(zm=1,nd.exports=Sy()),nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm;function Py(){if(jm)return Mu;jm=1;var u=kf(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function _(x,k,S){var D,F={},H=null,J=null;S!==void 0&&(H=""+S),k.key!==void 0&&(H=""+k.key),k.ref!==void 0&&(J=k.ref);for(D in k)c.call(k,D)&&!p.hasOwnProperty(D)&&(F[D]=k[D]);if(x&&x.defaultProps)for(D in k=x.defaultProps,k)F[D]===void 0&&(F[D]=k[D]);return{$$typeof:s,type:x,key:H,ref:J,props:F,_owner:f.current}}return Mu.Fragment=a,Mu.jsx=_,Mu.jsxs=_,Mu}var Um;function By(){return Um||(Um=1,td.exports=Py()),td.exports}var se=By(),ge=kf();const $u=Qc(ge);var Dc={},rd={exports:{}},Wr={},id={exports:{}},sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function Ty(){return $m||($m=1,(function(u){function s(Re,vt){var Ne=Re.length;Re.push(vt);e:for(;0<Ne;){var ce=Ne-1>>>1,Fe=Re[ce];if(0<f(Fe,vt))Re[ce]=vt,Re[Ne]=Fe,Ne=ce;else break e}}function a(Re){return Re.length===0?null:Re[0]}function c(Re){if(Re.length===0)return null;var vt=Re[0],Ne=Re.pop();if(Ne!==vt){Re[0]=Ne;e:for(var ce=0,Fe=Re.length,mt=Fe>>>1;ce<mt;){var ut=2*(ce+1)-1,O=Re[ut],q=ut+1,re=Re[q];if(0>f(O,Ne))q<Fe&&0>f(re,O)?(Re[ce]=re,Re[q]=Ne,ce=q):(Re[ce]=O,Re[ut]=Ne,ce=ut);else if(q<Fe&&0>f(re,Ne))Re[ce]=re,Re[q]=Ne,ce=q;else break e}}return vt}function f(Re,vt){var Ne=Re.sortIndex-vt.sortIndex;return Ne!==0?Ne:Re.id-vt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;u.unstable_now=function(){return p.now()}}else{var _=Date,x=_.now();u.unstable_now=function(){return _.now()-x}}var k=[],S=[],D=1,F=null,H=3,J=!1,Q=!1,W=!1,Y=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,$e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Oe(Re){for(var vt=a(S);vt!==null;){if(vt.callback===null)c(S);else if(vt.startTime<=Re)c(S),vt.sortIndex=vt.expirationTime,s(k,vt);else break;vt=a(S)}}function ye(Re){if(W=!1,Oe(Re),!Q)if(a(k)!==null)Q=!0,Ft(Ee);else{var vt=a(S);vt!==null&&zt(ye,vt.startTime-Re)}}function Ee(Re,vt){Q=!1,W&&(W=!1,ve(_t),_t=-1),J=!0;var Ne=H;try{for(Oe(vt),F=a(k);F!==null&&(!(F.expirationTime>vt)||Re&&!lt());){var ce=F.callback;if(typeof ce=="function"){F.callback=null,H=F.priorityLevel;var Fe=ce(F.expirationTime<=vt);vt=u.unstable_now(),typeof Fe=="function"?F.callback=Fe:F===a(k)&&c(k),Oe(vt)}else c(k);F=a(k)}if(F!==null)var mt=!0;else{var ut=a(S);ut!==null&&zt(ye,ut.startTime-vt),mt=!1}return mt}finally{F=null,H=Ne,J=!1}}var De=!1,He=null,_t=-1,X=5,tt=-1;function lt(){return!(u.unstable_now()-tt<X)}function wt(){if(He!==null){var Re=u.unstable_now();tt=Re;var vt=!0;try{vt=He(!0,Re)}finally{vt?Ct():(De=!1,He=null)}}else De=!1}var Ct;if(typeof $e=="function")Ct=function(){$e(wt)};else if(typeof MessageChannel<"u"){var Jt=new MessageChannel,vn=Jt.port2;Jt.port1.onmessage=wt,Ct=function(){vn.postMessage(null)}}else Ct=function(){Y(wt,0)};function Ft(Re){He=Re,De||(De=!0,Ct())}function zt(Re,vt){_t=Y(function(){Re(u.unstable_now())},vt)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(Re){Re.callback=null},u.unstable_continueExecution=function(){Q||J||(Q=!0,Ft(Ee))},u.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<Re?Math.floor(1e3/Re):5},u.unstable_getCurrentPriorityLevel=function(){return H},u.unstable_getFirstCallbackNode=function(){return a(k)},u.unstable_next=function(Re){switch(H){case 1:case 2:case 3:var vt=3;break;default:vt=H}var Ne=H;H=vt;try{return Re()}finally{H=Ne}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(Re,vt){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Ne=H;H=Re;try{return vt()}finally{H=Ne}},u.unstable_scheduleCallback=function(Re,vt,Ne){var ce=u.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ce+Ne:ce):Ne=ce,Re){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=Ne+Fe,Re={id:D++,callback:vt,priorityLevel:Re,startTime:Ne,expirationTime:Fe,sortIndex:-1},Ne>ce?(Re.sortIndex=Ne,s(S,Re),a(k)===null&&Re===a(S)&&(W?(ve(_t),_t=-1):W=!0,zt(ye,Ne-ce))):(Re.sortIndex=Fe,s(k,Re),Q||J||(Q=!0,Ft(Ee))),Re},u.unstable_shouldYield=lt,u.unstable_wrapCallback=function(Re){var vt=H;return function(){var Ne=H;H=vt;try{return Re.apply(this,arguments)}finally{H=Ne}}}})(sd)),sd}var qm;function Ay(){return qm||(qm=1,id.exports=Ty()),id.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function Dy(){if(Gm)return Wr;Gm=1;var u=kf(),s=Ay();function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,h=1;h<arguments.length;h++)n+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,f={};function p(e,n){_(e,n),_(e+"Capture",n)}function _(e,n){for(f[e]=n,e=0;e<n.length;e++)c.add(n[e])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},F={};function H(e){return k.call(F,e)?!0:k.call(D,e)?!1:S.test(e)?F[e]=!0:(D[e]=!0,!1)}function J(e,n,h,y){if(h!==null&&h.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q(e,n,h,y){if(n===null||typeof n>"u"||J(e,n,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function W(e,n,h,y,E,P,N){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=h,this.propertyName=e,this.type=n,this.sanitizeURL=P,this.removeEmptyString=N}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Y[e]=new W(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Y[n]=new W(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Y[e]=new W(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Y[e]=new W(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Y[e]=new W(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Y[e]=new W(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Y[e]=new W(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Y[e]=new W(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Y[e]=new W(e,5,!1,e.toLowerCase(),null,!1,!1)});var ve=/[\-:]([a-z])/g;function $e(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ve,$e);Y[n]=new W(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ve,$e);Y[n]=new W(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ve,$e);Y[n]=new W(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Y[e]=new W(e,1,!1,e.toLowerCase(),null,!1,!1)}),Y.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Y[e]=new W(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oe(e,n,h,y){var E=Y.hasOwnProperty(n)?Y[n]:null;(E!==null?E.type!==0:y||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(Q(n,h,E,y)&&(h=null),y||E===null?H(n)&&(h===null?e.removeAttribute(n):e.setAttribute(n,""+h)):E.mustUseProperty?e[E.propertyName]=h===null?E.type===3?!1:"":h:(n=E.attributeName,y=E.attributeNamespace,h===null?e.removeAttribute(n):(E=E.type,h=E===3||E===4&&h===!0?"":""+h,y?e.setAttributeNS(y,n,h):e.setAttribute(n,h))))}var ye=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),De=Symbol.for("react.portal"),He=Symbol.for("react.fragment"),_t=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),tt=Symbol.for("react.provider"),lt=Symbol.for("react.context"),wt=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),Jt=Symbol.for("react.suspense_list"),vn=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),zt=Symbol.for("react.offscreen"),Re=Symbol.iterator;function vt(e){return e===null||typeof e!="object"?null:(e=Re&&e[Re]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Object.assign,ce;function Fe(e){if(ce===void 0)try{throw Error()}catch(h){var n=h.stack.trim().match(/\n( *(at )?)/);ce=n&&n[1]||""}return`
`+ce+e}var mt=!1;function ut(e,n){if(!e||mt)return"";mt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Te){var y=Te}Reflect.construct(e,[],n)}else{try{n.call()}catch(Te){y=Te}e.call(n.prototype)}else{try{throw Error()}catch(Te){y=Te}e()}}catch(Te){if(Te&&y&&typeof Te.stack=="string"){for(var E=Te.stack.split(`
`),P=y.stack.split(`
`),N=E.length-1,te=P.length-1;1<=N&&0<=te&&E[N]!==P[te];)te--;for(;1<=N&&0<=te;N--,te--)if(E[N]!==P[te]){if(N!==1||te!==1)do if(N--,te--,0>te||E[N]!==P[te]){var ue=`
`+E[N].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=N&&0<=te);break}}}finally{mt=!1,Error.prepareStackTrace=h}return(e=e?e.displayName||e.name:"")?Fe(e):""}function O(e){switch(e.tag){case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return e=ut(e.type,!1),e;case 11:return e=ut(e.type.render,!1),e;case 1:return e=ut(e.type,!0),e;default:return""}}function q(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case He:return"Fragment";case De:return"Portal";case X:return"Profiler";case _t:return"StrictMode";case Ct:return"Suspense";case Jt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lt:return(e.displayName||"Context")+".Consumer";case tt:return(e._context.displayName||"Context")+".Provider";case wt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vn:return n=e.displayName||null,n!==null?n:q(e.type)||"Memo";case Ft:n=e._payload,e=e._init;try{return q(e(n))}catch{}}return null}function re(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(n);case 8:return n===_t?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ae(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ye(e){var n=Ae(e)?"checked":"value",h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),y=""+e[n];if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var E=h.get,P=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return E.call(this)},set:function(N){y=""+N,P.call(this,N)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(N){y=""+N},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function de(e){e._valueTracker||(e._valueTracker=Ye(e))}function ze(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var h=n.getValue(),y="";return e&&(y=Ae(e)?e.checked?"true":"false":e.value),e=y,e!==h?(n.setValue(e),!0):!1}function Ie(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qe(e,n){var h=n.checked;return Ne({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??e._wrapperState.initialChecked})}function Ze(e,n){var h=n.defaultValue==null?"":n.defaultValue,y=n.checked!=null?n.checked:n.defaultChecked;h=fe(n.value!=null?n.value:h),e._wrapperState={initialChecked:y,initialValue:h,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function We(e,n){n=n.checked,n!=null&&Oe(e,"checked",n,!1)}function Qe(e,n){We(e,n);var h=fe(n.value),y=n.type;if(h!=null)y==="number"?(h===0&&e.value===""||e.value!=h)&&(e.value=""+h):e.value!==""+h&&(e.value=""+h);else if(y==="submit"||y==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?St(e,n.type,h):n.hasOwnProperty("defaultValue")&&St(e,n.type,fe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function ot(e,n,h){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var y=n.type;if(!(y!=="submit"&&y!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,h||n===e.value||(e.value=n),e.defaultValue=n}h=e.name,h!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,h!==""&&(e.name=h)}function St(e,n,h){(n!=="number"||Ie(e.ownerDocument)!==e)&&(h==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+h&&(e.defaultValue=""+h))}var fn=Array.isArray;function li(e,n,h,y){if(e=e.options,n){n={};for(var E=0;E<h.length;E++)n["$"+h[E]]=!0;for(h=0;h<e.length;h++)E=n.hasOwnProperty("$"+e[h].value),e[h].selected!==E&&(e[h].selected=E),E&&y&&(e[h].defaultSelected=!0)}else{for(h=""+fe(h),n=null,E=0;E<e.length;E++){if(e[E].value===h){e[E].selected=!0,y&&(e[E].defaultSelected=!0);return}n!==null||e[E].disabled||(n=e[E])}n!==null&&(n.selected=!0)}}function ua(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(a(91));return Ne({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ro(e,n){var h=n.value;if(h==null){if(h=n.children,n=n.defaultValue,h!=null){if(n!=null)throw Error(a(92));if(fn(h)){if(1<h.length)throw Error(a(93));h=h[0]}n=h}n==null&&(n=""),h=n}e._wrapperState={initialValue:fe(h)}}function il(e,n){var h=fe(n.value),y=fe(n.defaultValue);h!=null&&(h=""+h,h!==e.value&&(e.value=h),n.defaultValue==null&&e.defaultValue!==h&&(e.defaultValue=h)),y!=null&&(e.defaultValue=""+y)}function sl(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function ca(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ha(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?ca(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Es,io=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,h,y,E){MSApp.execUnsafeLocalFunction(function(){return e(n,h,y,E)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Es.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Mi(e,n){if(n){var h=e.firstChild;if(h&&h===e.lastChild&&h.nodeType===3){h.nodeValue=n;return}}e.textContent=n}var Xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qi=["Webkit","ms","Moz","O"];Object.keys(Xi).forEach(function(e){Qi.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Xi[n]=Xi[e]})});function so(e,n,h){return n==null||typeof n=="boolean"||n===""?"":h||typeof n!="number"||n===0||Xi.hasOwnProperty(e)&&Xi[e]?(""+n).trim():n+"px"}function Ms(e,n){e=e.style;for(var h in n)if(n.hasOwnProperty(h)){var y=h.indexOf("--")===0,E=so(h,n[h],y);h==="float"&&(h="cssFloat"),y?e.setProperty(h,E):e[h]=E}}var es=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(e,n){if(n){if(es[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(a(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(n.style!=null&&typeof n.style!="object")throw Error(a(62))}}function Yr(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=null;function oo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ss=null,Si=null,Pi=null;function al(e){if(e=Gr(e)){if(typeof Ss!="function")throw Error(a(280));var n=e.stateNode;n&&(n=Fa(n),Ss(e.stateNode,e.type,n))}}function ol(e){Si?Pi?Pi.push(e):Pi=[e]:Si=e}function lo(){if(Si){var e=Si,n=Pi;if(Pi=Si=null,al(e),n)for(e=0;e<n.length;e++)al(n[e])}}function uo(e,n){return e(n)}function ll(){}var co=!1;function fa(e,n,h){if(co)return e(n,h);co=!0;try{return uo(e,n,h)}finally{co=!1,(Si!==null||Pi!==null)&&(ll(),lo())}}function ts(e,n){var h=e.stateNode;if(h===null)return null;var y=Fa(h);if(y===null)return null;h=y[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(e=e.type,y=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!y;break e;default:e=!1}if(e)return null;if(h&&typeof h!="function")throw Error(a(231,n,typeof h));return h}var ho=!1;if(x)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{ho=!1}function nu(e,n,h,y,E,P,N,te,ue){var Te=Array.prototype.slice.call(arguments,3);try{n.apply(h,Te)}catch(Ke){this.onError(Ke)}}var An=!1,ft=null,Bs=!1,pa=null,fo={onError:function(e){An=!0,ft=e}};function ul(e,n,h,y,E,P,N,te,ue){An=!1,ft=null,nu.apply(fo,arguments)}function po(e,n,h,y,E,P,N,te,ue){if(ul.apply(this,arguments),An){if(An){var Te=ft;An=!1,ft=null}else throw Error(a(198));Bs||(Bs=!0,pa=Te)}}function ui(e){var n=e,h=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(h=n.return),e=n.return;while(e)}return n.tag===3?h:null}function Bi(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function mo(e){if(ui(e)!==e)throw Error(a(188))}function ru(e){var n=e.alternate;if(!n){if(n=ui(e),n===null)throw Error(a(188));return n!==e?null:e}for(var h=e,y=n;;){var E=h.return;if(E===null)break;var P=E.alternate;if(P===null){if(y=E.return,y!==null){h=y;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===h)return mo(E),e;if(P===y)return mo(E),n;P=P.sibling}throw Error(a(188))}if(h.return!==y.return)h=E,y=P;else{for(var N=!1,te=E.child;te;){if(te===h){N=!0,h=E,y=P;break}if(te===y){N=!0,y=E,h=P;break}te=te.sibling}if(!N){for(te=P.child;te;){if(te===h){N=!0,h=P,y=E;break}if(te===y){N=!0,y=P,h=E;break}te=te.sibling}if(!N)throw Error(a(189))}}if(h.alternate!==y)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?e:n}function cl(e){return e=ru(e),e!==null?hl(e):null}function hl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=hl(e);if(n!==null)return n;e=e.sibling}return null}var dl=s.unstable_scheduleCallback,Ts=s.unstable_cancelCallback,go=s.unstable_shouldYield,ma=s.unstable_requestPaint,on=s.unstable_now,iu=s.unstable_getCurrentPriorityLevel,_o=s.unstable_ImmediatePriority,fl=s.unstable_UserBlockingPriority,ga=s.unstable_NormalPriority,vo=s.unstable_LowPriority,ns=s.unstable_IdlePriority,As=null,hr=null;function ci(e){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(As,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:rs,Yt=Math.log,Ds=Math.LN2;function rs(e){return e>>>=0,e===0?32:31-(Yt(e)/Ds|0)|0}var Pr=64,is=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xt(e,n){var h=e.pendingLanes;if(h===0)return 0;var y=0,E=e.suspendedLanes,P=e.pingedLanes,N=h&268435455;if(N!==0){var te=N&~E;te!==0?y=Et(te):(P&=N,P!==0&&(y=Et(P)))}else N=h&~E,N!==0?y=Et(N):P!==0&&(y=Et(P));if(y===0)return 0;if(n!==0&&n!==y&&(n&E)===0&&(E=y&-y,P=n&-n,E>=P||E===16&&(P&4194240)!==0))return n;if((y&4)!==0&&(y|=h&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=y;0<n;)h=31-Tt(n),E=1<<h,y|=e[h],n&=~E;return y}function yo(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(e,n){for(var h=e.suspendedLanes,y=e.pingedLanes,E=e.expirationTimes,P=e.pendingLanes;0<P;){var N=31-Tt(P),te=1<<N,ue=E[N];ue===-1?((te&h)===0||(te&y)!==0)&&(E[N]=yo(te,n)):ue<=n&&(e.expiredLanes|=te),P&=~te}}function qn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pl(){var e=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),e}function ss(e){for(var n=[],h=0;31>h;h++)n.push(e);return n}function dr(e,n,h){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Tt(n),e[n]=h}function un(e,n){var h=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var y=e.eventTimes;for(e=e.expirationTimes;0<h;){var E=31-Tt(h),P=1<<E;n[E]=0,y[E]=-1,e[E]=-1,h&=~P}}function Xr(e,n){var h=e.entangledLanes|=n;for(e=e.entanglements;h;){var y=31-Tt(h),E=1<<y;E&n|e[y]&n&&(e[y]|=n),h&=~E}}var jt=0;function as(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var va,hi,ya,wa,Os,Rs=!1,os=[],fr=null,Qr=null,Br=null,Is=new Map,bt=new Map,yn=[],Wt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wo(e,n){switch(e){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Is.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bt.delete(n.pointerId)}}function Ti(e,n,h,y,E,P){return e===null||e.nativeEvent!==P?(e={blockedOn:n,domEventName:h,eventSystemFlags:y,nativeEvent:P,targetContainers:[E]},n!==null&&(n=Gr(n),n!==null&&hi(n)),e):(e.eventSystemFlags|=y,n=e.targetContainers,E!==null&&n.indexOf(E)===-1&&n.push(E),e)}function xo(e,n,h,y,E){switch(n){case"focusin":return fr=Ti(fr,e,n,h,y,E),!0;case"dragenter":return Qr=Ti(Qr,e,n,h,y,E),!0;case"mouseover":return Br=Ti(Br,e,n,h,y,E),!0;case"pointerover":var P=E.pointerId;return Is.set(P,Ti(Is.get(P)||null,e,n,h,y,E)),!0;case"gotpointercapture":return P=E.pointerId,bt.set(P,Ti(bt.get(P)||null,e,n,h,y,E)),!0}return!1}function ei(e){var n=ji(e.target);if(n!==null){var h=ui(n);if(h!==null){if(n=h.tag,n===13){if(n=Bi(h),n!==null){e.blockedOn=n,Os(e.priority,function(){ya(h)});return}}else if(n===3&&h.stateNode.current.memoizedState.isDehydrated){e.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tr(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var h=ka(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(h===null){h=e.nativeEvent;var y=new h.constructor(h.type,h);ao=y,h.target.dispatchEvent(y),ao=null}else return n=Gr(h),n!==null&&hi(n),e.blockedOn=h,!1;n.shift()}return!0}function xa(e,n,h){Tr(e)&&h.delete(n)}function Fs(){Rs=!1,fr!==null&&Tr(fr)&&(fr=null),Qr!==null&&Tr(Qr)&&(Qr=null),Br!==null&&Tr(Br)&&(Br=null),Is.forEach(xa),bt.forEach(xa)}function ln(e,n){e.blockedOn===n&&(e.blockedOn=null,Rs||(Rs=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Fs)))}function pr(e){function n(E){return ln(E,e)}if(0<os.length){ln(os[0],e);for(var h=1;h<os.length;h++){var y=os[h];y.blockedOn===e&&(y.blockedOn=null)}}for(fr!==null&&ln(fr,e),Qr!==null&&ln(Qr,e),Br!==null&&ln(Br,e),Is.forEach(n),bt.forEach(n),h=0;h<yn.length;h++)y=yn[h],y.blockedOn===e&&(y.blockedOn=null);for(;0<yn.length&&(h=yn[0],h.blockedOn===null);)ei(h),h.blockedOn===null&&yn.shift()}var Ai=ye.ReactCurrentBatchConfig,Ns=!0;function su(e,n,h,y){var E=jt,P=Ai.transition;Ai.transition=null;try{jt=1,zs(e,n,h,y)}finally{jt=E,Ai.transition=P}}function ml(e,n,h,y){var E=jt,P=Ai.transition;Ai.transition=null;try{jt=4,zs(e,n,h,y)}finally{jt=E,Ai.transition=P}}function zs(e,n,h,y){if(Ns){var E=ka(e,n,h,y);if(E===null)t(e,n,y,Di,h),wo(e,y);else if(xo(E,e,n,h,y))y.stopPropagation();else if(wo(e,y),n&4&&-1<Wt.indexOf(e)){for(;E!==null;){var P=Gr(E);if(P!==null&&va(P),P=ka(e,n,h,y),P===null&&t(e,n,y,Di,h),P===E)break;E=P}E!==null&&y.stopPropagation()}else t(e,n,y,null,h)}}var Di=null;function ka(e,n,h,y){if(Di=null,e=oo(y),e=ji(e),e!==null)if(n=ui(e),n===null)e=null;else if(h=n.tag,h===13){if(e=Bi(n),e!==null)return e;e=null}else if(h===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Di=e,null}function It(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iu()){case _o:return 1;case fl:return 4;case ga:case vo:return 16;case ns:return 536870912;default:return 16}default:return 16}}var ti=null,Mt=null,Ar=null;function ls(){if(Ar)return Ar;var e,n=Mt,h=n.length,y,E="value"in ti?ti.value:ti.textContent,P=E.length;for(e=0;e<h&&n[e]===E[e];e++);var N=h-e;for(y=1;y<=N&&n[h-y]===E[P-y];y++);return Ar=E.slice(e,1<y?1-y:void 0)}function La(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Oi(){return!0}function gl(){return!1}function Mn(e){function n(h,y,E,P,N){this._reactName=h,this._targetInst=E,this.type=y,this.nativeEvent=P,this.target=N,this.currentTarget=null;for(var te in e)e.hasOwnProperty(te)&&(h=e[te],this[te]=h?h(P):P[te]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Oi:gl,this.isPropagationStopped=gl,this}return Ne(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),n}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Mn(ni),Gn=Ne({},ni,{view:0,detail:0}),_l=Mn(Gn),wn,Lo,us,mr=Ne({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(wn=e.screenX-us.screenX,Lo=e.screenY-us.screenY):Lo=wn=0,us=e),wn)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),Co=Mn(mr),vl=Ne({},mr,{dataTransfer:0}),bo=Mn(vl),au=Ne({},Gn,{relatedTarget:0}),Ca=Mn(au),Eo=Ne({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),ou=Mn(Eo),xn=Ne({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=Mn(xn),yl=Ne({},ni,{data:0}),di=Mn(yl),Ri={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Vn[e])?!!n[e]:!1}function Ii(){return lu}var Hn=Ne({},Gn,{key:function(e){if(e.key){var n=Ri[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=La(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(e){return e.type==="keypress"?La(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?La(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nr=Mn(Hn),Mo=Ne({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),js=Mn(Mo),So=Ne({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),rr=Mn(So),Dr=Ne({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),ba=Mn(Dr),Po=Ne({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bo=Mn(Po),Dn=[9,13,27,32],pi=x&&"CompositionEvent"in window,Us=null;x&&"documentMode"in document&&(Us=document.documentMode);var gr=x&&"TextEvent"in window&&!Us,wl=x&&(!pi||Us&&8<Us&&11>=Us),Fi=" ",xl=!1;function cs(e,n){switch(e){case"keyup":return Dn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $s(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ri=!1;function uu(e,n){switch(e){case"compositionend":return $s(n);case"keypress":return n.which!==32?null:(xl=!0,Fi);case"textInput":return e=n.data,e===Fi&&xl?null:e;default:return null}}function ii(e,n){if(ri)return e==="compositionend"||!pi&&cs(e,n)?(e=ls(),Ar=Mt=ti=null,ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return wl&&n.locale!=="ko"?null:n.data;default:return null}}var Or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function To(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Or[e.type]:n==="textarea"}function Ea(e,n,h,y){ol(y),n=v(n,"onChange"),0<n.length&&(h=new ko("onChange","change",null,h,y),e.push({event:h,listeners:n}))}var _r=null,Yn=null;function cu(e){zr(e,0)}function vr(e){var n=yi(e);if(ze(n))return e}function qs(e,n){if(e==="change")return n}var Rr=!1;if(x){var hs;if(x){var Ma="oninput"in document;if(!Ma){var Gs=document.createElement("div");Gs.setAttribute("oninput","return;"),Ma=typeof Gs.oninput=="function"}hs=Ma}else hs=!1;Rr=hs&&(!document.documentMode||9<document.documentMode)}function Vs(){_r&&(_r.detachEvent("onpropertychange",Hs),Yn=_r=null)}function Hs(e){if(e.propertyName==="value"&&vr(Yn)){var n=[];Ea(n,Yn,e,oo(e)),fa(cu,n)}}function Sa(e,n,h){e==="focusin"?(Vs(),_r=n,Yn=h,_r.attachEvent("onpropertychange",Hs)):e==="focusout"&&Vs()}function ds(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vr(Yn)}function Pa(e,n){if(e==="click")return vr(n)}function Ba(e,n){if(e==="input"||e==="change")return vr(n)}function Ta(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ir=typeof Object.is=="function"?Object.is:Ta;function Ir(e,n){if(ir(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var h=Object.keys(e),y=Object.keys(n);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var E=h[y];if(!k.call(n,E)||!ir(e[E],n[E]))return!1}return!0}function kl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fs(e,n){var h=kl(e);e=0;for(var y;h;){if(h.nodeType===3){if(y=e+h.textContent.length,e<=n&&y>=n)return{node:h,offset:n-e};e=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=kl(h)}}function Ao(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Ao(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Do(){for(var e=window,n=Ie();n instanceof e.HTMLIFrameElement;){try{var h=typeof n.contentWindow.location.href=="string"}catch{h=!1}if(h)e=n.contentWindow;else break;n=Ie(e.document)}return n}function Oo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Fr(e){var n=Do(),h=e.focusedElem,y=e.selectionRange;if(n!==h&&h&&h.ownerDocument&&Ao(h.ownerDocument.documentElement,h)){if(y!==null&&Oo(h)){if(n=y.start,e=y.end,e===void 0&&(e=n),"selectionStart"in h)h.selectionStart=n,h.selectionEnd=Math.min(e,h.value.length);else if(e=(n=h.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var E=h.textContent.length,P=Math.min(y.start,E);y=y.end===void 0?P:Math.min(y.end,E),!e.extend&&P>y&&(E=y,y=P,P=E),E=fs(h,P);var N=fs(h,y);E&&N&&(e.rangeCount!==1||e.anchorNode!==E.node||e.anchorOffset!==E.offset||e.focusNode!==N.node||e.focusOffset!==N.offset)&&(n=n.createRange(),n.setStart(E.node,E.offset),e.removeAllRanges(),P>y?(e.addRange(n),e.extend(N.node,N.offset)):(n.setEnd(N.node,N.offset),e.addRange(n)))}}for(n=[],e=h;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<n.length;h++)e=n[h],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=x&&"documentMode"in document&&11>=document.documentMode,ps=null,ms=null,Zs=null,Aa=!1;function Ll(e,n,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Aa||ps==null||ps!==Ie(y)||(y=ps,"selectionStart"in y&&Oo(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Zs&&Ir(Zs,y)||(Zs=y,y=v(ms,"onSelect"),0<y.length&&(n=new ko("onSelect","select",null,n,h),e.push({event:n,listeners:y}),n.target=ps)))}function gi(e,n){var h={};return h[e.toLowerCase()]=n.toLowerCase(),h["Webkit"+e]="webkit"+n,h["Moz"+e]="moz"+n,h}var gs={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionend:gi("Transition","TransitionEnd")},_i={},Da={};x&&(Da=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Ni(e){if(_i[e])return _i[e];if(!gs[e])return e;var n=gs[e],h;for(h in n)if(n.hasOwnProperty(h)&&h in Da)return _i[e]=n[h];return e}var Cl=Ni("animationend"),Nr=Ni("animationiteration"),Oa=Ni("animationstart"),Ws=Ni("transitionend"),_s=new Map,bl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,n){_s.set(e,n),p(n,[e])}for(var pn=0;pn<bl.length;pn++){var kn=bl[pn],Ro=kn.toLowerCase(),yr=kn[0].toUpperCase()+kn.slice(1);Xn(Ro,"on"+yr)}Xn(Cl,"onAnimationEnd"),Xn(Nr,"onAnimationIteration"),Xn(Oa,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Ws,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ra=new Set("cancel close invalid load scroll toggle".split(" ").concat(xt));function Ks(e,n,h){var y=e.type||"unknown-event";e.currentTarget=h,po(y,n,void 0,e),e.currentTarget=null}function zr(e,n){n=(n&4)!==0;for(var h=0;h<e.length;h++){var y=e[h],E=y.event;y=y.listeners;e:{var P=void 0;if(n)for(var N=y.length-1;0<=N;N--){var te=y[N],ue=te.instance,Te=te.currentTarget;if(te=te.listener,ue!==P&&E.isPropagationStopped())break e;Ks(E,te,Te),P=ue}else for(N=0;N<y.length;N++){if(te=y[N],ue=te.instance,Te=te.currentTarget,te=te.listener,ue!==P&&E.isPropagationStopped())break e;Ks(E,te,Te),P=ue}}}if(Bs)throw e=pa,Bs=!1,pa=null,e}function Pt(e,n){var h=n[zi];h===void 0&&(h=n[zi]=new Set);var y=e+"__bubble";h.has(y)||(vi(n,e,2,!1),h.add(y))}function Ia(e,n,h){var y=0;n&&(y|=4),vi(h,e,y,n)}var Pn="_reactListening"+Math.random().toString(36).slice(2);function Ln(e){if(!e[Pn]){e[Pn]=!0,c.forEach(function(h){h!=="selectionchange"&&(Ra.has(h)||Ia(h,!1,e),Ia(h,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Pn]||(n[Pn]=!0,Ia("selectionchange",!1,n))}}function vi(e,n,h,y){switch(It(n)){case 1:var E=su;break;case 4:E=ml;break;default:E=zs}h=E.bind(null,n,h,e),E=void 0,!ho||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(E=!0),y?E!==void 0?e.addEventListener(n,h,{capture:!0,passive:E}):e.addEventListener(n,h,!0):E!==void 0?e.addEventListener(n,h,{passive:E}):e.addEventListener(n,h,!1)}function t(e,n,h,y,E){var P=y;if((n&1)===0&&(n&2)===0&&y!==null)e:for(;;){if(y===null)return;var N=y.tag;if(N===3||N===4){var te=y.stateNode.containerInfo;if(te===E||te.nodeType===8&&te.parentNode===E)break;if(N===4)for(N=y.return;N!==null;){var ue=N.tag;if((ue===3||ue===4)&&(ue=N.stateNode.containerInfo,ue===E||ue.nodeType===8&&ue.parentNode===E))return;N=N.return}for(;te!==null;){if(N=ji(te),N===null)return;if(ue=N.tag,ue===5||ue===6){y=P=N;continue e}te=te.parentNode}}y=y.return}fa(function(){var Te=P,Ke=oo(h),Je=[];e:{var Ve=_s.get(e);if(Ve!==void 0){var st=ko,dt=e;switch(e){case"keypress":if(La(h)===0)break e;case"keydown":case"keyup":st=nr;break;case"focusin":dt="focus",st=Ca;break;case"focusout":dt="blur",st=Ca;break;case"beforeblur":case"afterblur":st=Ca;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=bo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=rr;break;case Cl:case Nr:case Oa:st=ou;break;case Ws:st=ba;break;case"scroll":st=_l;break;case"wheel":st=Bo;break;case"copy":case"cut":case"paste":st=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=js}var pt=(n&4)!==0,En=!pt&&e==="scroll",be=pt?Ve!==null?Ve+"Capture":null:Ve;pt=[];for(var pe=Te,Se;pe!==null;){Se=pe;var Xe=Se.stateNode;if(Se.tag===5&&Xe!==null&&(Se=Xe,be!==null&&(Xe=ts(pe,be),Xe!=null&&pt.push(l(pe,Xe,Se)))),En)break;pe=pe.return}0<pt.length&&(Ve=new st(Ve,dt,null,h,Ke),Je.push({event:Ve,listeners:pt}))}}if((n&7)===0){e:{if(Ve=e==="mouseover"||e==="pointerover",st=e==="mouseout"||e==="pointerout",Ve&&h!==ao&&(dt=h.relatedTarget||h.fromElement)&&(ji(dt)||dt[Gt]))break e;if((st||Ve)&&(Ve=Ke.window===Ke?Ke:(Ve=Ke.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,st?(dt=h.relatedTarget||h.toElement,st=Te,dt=dt?ji(dt):null,dt!==null&&(En=ui(dt),dt!==En||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(st=null,dt=Te),st!==dt)){if(pt=Co,Xe="onMouseLeave",be="onMouseEnter",pe="mouse",(e==="pointerout"||e==="pointerover")&&(pt=js,Xe="onPointerLeave",be="onPointerEnter",pe="pointer"),En=st==null?Ve:yi(st),Se=dt==null?Ve:yi(dt),Ve=new pt(Xe,pe+"leave",st,h,Ke),Ve.target=En,Ve.relatedTarget=Se,Xe=null,ji(Ke)===Te&&(pt=new pt(be,pe+"enter",dt,h,Ke),pt.target=Se,pt.relatedTarget=En,Xe=pt),En=Xe,st&&dt)t:{for(pt=st,be=dt,pe=0,Se=pt;Se;Se=C(Se))pe++;for(Se=0,Xe=be;Xe;Xe=C(Xe))Se++;for(;0<pe-Se;)pt=C(pt),pe--;for(;0<Se-pe;)be=C(be),Se--;for(;pe--;){if(pt===be||be!==null&&pt===be.alternate)break t;pt=C(pt),be=C(be)}pt=null}else pt=null;st!==null&&A(Je,Ve,st,pt,!1),dt!==null&&En!==null&&A(Je,En,dt,pt,!0)}}e:{if(Ve=Te?yi(Te):window,st=Ve.nodeName&&Ve.nodeName.toLowerCase(),st==="select"||st==="input"&&Ve.type==="file")var gt=qs;else if(To(Ve))if(Rr)gt=Ba;else{gt=ds;var kt=Sa}else(st=Ve.nodeName)&&st.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(gt=Pa);if(gt&&(gt=gt(e,Te))){Ea(Je,gt,h,Ke);break e}kt&&kt(e,Ve,Te),e==="focusout"&&(kt=Ve._wrapperState)&&kt.controlled&&Ve.type==="number"&&St(Ve,"number",Ve.value)}switch(kt=Te?yi(Te):window,e){case"focusin":(To(kt)||kt.contentEditable==="true")&&(ps=kt,ms=Te,Zs=null);break;case"focusout":Zs=ms=ps=null;break;case"mousedown":Aa=!0;break;case"contextmenu":case"mouseup":case"dragend":Aa=!1,Ll(Je,h,Ke);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":Ll(Je,h,Ke)}var Lt;if(pi)e:{switch(e){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ri?cs(e,h)&&(Bt="onCompositionEnd"):e==="keydown"&&h.keyCode===229&&(Bt="onCompositionStart");Bt&&(wl&&h.locale!=="ko"&&(ri||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ri&&(Lt=ls()):(ti=Ke,Mt="value"in ti?ti.value:ti.textContent,ri=!0)),kt=v(Te,Bt),0<kt.length&&(Bt=new di(Bt,e,null,h,Ke),Je.push({event:Bt,listeners:kt}),Lt?Bt.data=Lt:(Lt=$s(h),Lt!==null&&(Bt.data=Lt)))),(Lt=gr?uu(e,h):ii(e,h))&&(Te=v(Te,"onBeforeInput"),0<Te.length&&(Ke=new di("onBeforeInput","beforeinput",null,h,Ke),Je.push({event:Ke,listeners:Te}),Ke.data=Lt))}zr(Je,n)})}function l(e,n,h){return{instance:e,listener:n,currentTarget:h}}function v(e,n){for(var h=n+"Capture",y=[];e!==null;){var E=e,P=E.stateNode;E.tag===5&&P!==null&&(E=P,P=ts(e,h),P!=null&&y.unshift(l(e,P,E)),P=ts(e,n),P!=null&&y.push(l(e,P,E))),e=e.return}return y}function C(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function A(e,n,h,y,E){for(var P=n._reactName,N=[];h!==null&&h!==y;){var te=h,ue=te.alternate,Te=te.stateNode;if(ue!==null&&ue===y)break;te.tag===5&&Te!==null&&(te=Te,E?(ue=ts(h,P),ue!=null&&N.unshift(l(h,ue,te))):E||(ue=ts(h,P),ue!=null&&N.push(l(h,ue,te)))),h=h.return}N.length!==0&&e.push({event:n,listeners:N})}var j=/\r\n?/g,ie=/\u0000|\uFFFD/g;function xe(e){return(typeof e=="string"?e:""+e).replace(j,`
`).replace(ie,"")}function Be(e,n,h){if(n=xe(n),xe(e)!==n&&h)throw Error(a(425))}function Ue(){}var nt=null,yt=null;function At(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cn=typeof setTimeout=="function"?setTimeout:void 0,mn=typeof clearTimeout=="function"?clearTimeout:void 0,On=typeof Promise=="function"?Promise:void 0,nn=typeof queueMicrotask=="function"?queueMicrotask:typeof On<"u"?function(e){return On.resolve(null).then(e).catch(jr)}:Cn;function jr(e){setTimeout(function(){throw e})}function Js(e,n){var h=n,y=0;do{var E=h.nextSibling;if(e.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(y===0){e.removeChild(E),pr(n);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=E}while(h);pr(n)}function wr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Io(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var h=e.data;if(h==="$"||h==="$!"||h==="$?"){if(n===0)return e;n--}else h==="/$"&&n++}e=e.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),$r="__reactFiber$"+Ur,vs="__reactProps$"+Ur,Gt="__reactContainer$"+Ur,zi="__reactEvents$"+Ur,hu="__reactListeners$"+Ur,qr="__reactHandles$"+Ur;function ji(e){var n=e[$r];if(n)return n;for(var h=e.parentNode;h;){if(n=h[Gt]||h[$r]){if(h=n.alternate,n.child!==null||h!==null&&h.child!==null)for(e=Io(e);e!==null;){if(h=e[$r])return h;e=Io(e)}return n}e=h,h=e.parentNode}return null}function Gr(e){return e=e[$r]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Fa(e){return e[vs]||null}var El=[],Na=-1;function Ui(e){return{current:e}}function en(e){0>Na||(e.current=El[Na],El[Na]=null,Na--)}function Qt(e,n){Na++,El[Na]=e.current,e.current=n}var ys={},gn=Ui(ys),Rn=Ui(!1),Ys=ys;function za(e,n){var h=e.type.contextTypes;if(!h)return ys;var y=e.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===n)return y.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in h)E[P]=n[P];return y&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=E),E}function In(e){return e=e.childContextTypes,e!=null}function Xs(){en(Rn),en(gn)}function du(e,n,h){if(gn.current!==ys)throw Error(a(168));Qt(gn,n),Qt(Rn,h)}function sc(e,n,h){var y=e.stateNode;if(n=n.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var E in y)if(!(E in n))throw Error(a(108,re(e)||"Unknown",E));return Ne({},h,y)}function Ml(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ys,Ys=gn.current,Qt(gn,e),Qt(Rn,Rn.current),!0}function fu(e,n,h){var y=e.stateNode;if(!y)throw Error(a(169));h?(e=sc(e,n,Ys),y.__reactInternalMemoizedMergedChildContext=e,en(Rn),en(gn),Qt(gn,e)):en(Rn),Qt(Rn,h)}var wi=null,Sl=!1,pu=!1;function mu(e){wi===null?wi=[e]:wi.push(e)}function mh(e){Sl=!0,mu(e)}function ws(){if(!pu&&wi!==null){pu=!0;var e=0,n=jt;try{var h=wi;for(jt=1;e<h.length;e++){var y=h[e];do y=y(!0);while(y!==null)}wi=null,Sl=!1}catch(E){throw wi!==null&&(wi=wi.slice(e+1)),dl(_o,ws),E}finally{jt=n,pu=!1}}return null}var ja=[],Ua=0,Pl=null,Bl=0,xr=[],Fn=0,xi=null,$i=1,qi="";function Qs(e,n){ja[Ua++]=Bl,ja[Ua++]=Pl,Pl=e,Bl=n}function bn(e,n,h){xr[Fn++]=$i,xr[Fn++]=qi,xr[Fn++]=xi,xi=e;var y=$i;e=qi;var E=32-Tt(y)-1;y&=~(1<<E),h+=1;var P=32-Tt(n)+E;if(30<P){var N=E-E%5;P=(y&(1<<N)-1).toString(32),y>>=N,E-=N,$i=1<<32-Tt(n)+E|h<<E|y,qi=P+e}else $i=1<<P|h<<E|y,qi=e}function ki(e){e.return!==null&&(Qs(e,1),bn(e,1,0))}function gu(e){for(;e===Pl;)Pl=ja[--Ua],ja[Ua]=null,Bl=ja[--Ua],ja[Ua]=null;for(;e===xi;)xi=xr[--Fn],xr[Fn]=null,qi=xr[--Fn],xr[Fn]=null,$i=xr[--Fn],xr[Fn]=null}var kr=null,Qn=null,rn=!1,si=null;function ac(e,n){var h=bi(5,null,null,0);h.elementType="DELETED",h.stateNode=n,h.return=e,n=e.deletions,n===null?(e.deletions=[h],e.flags|=16):n.push(h)}function i(e,n){switch(e.tag){case 5:var h=e.type;return n=n.nodeType!==1||h.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,kr=e,Qn=wr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,kr=e,Qn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(h=xi!==null?{id:$i,overflow:qi}:null,e.memoizedState={dehydrated:n,treeContext:h,retryLane:1073741824},h=bi(18,null,null,0),h.stateNode=n,h.return=e,e.child=h,kr=e,Qn=null,!0):!1;default:return!1}}function o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function d(e){if(rn){var n=Qn;if(n){var h=n;if(!i(e,n)){if(o(e))throw Error(a(418));n=wr(h.nextSibling);var y=kr;n&&i(e,n)?ac(y,h):(e.flags=e.flags&-4097|2,rn=!1,kr=e)}}else{if(o(e))throw Error(a(418));e.flags=e.flags&-4097|2,rn=!1,kr=e}}}function m(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kr=e}function w(e){if(e!==kr)return!1;if(!rn)return m(e),rn=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!At(e.type,e.memoizedProps)),n&&(n=Qn)){if(o(e))throw M(),Error(a(418));for(;n;)ac(e,n),n=wr(n.nextSibling)}if(m(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var h=e.data;if(h==="/$"){if(n===0){Qn=wr(e.nextSibling);break e}n--}else h!=="$"&&h!=="$!"&&h!=="$?"||n++}e=e.nextSibling}Qn=null}}else Qn=kr?wr(e.stateNode.nextSibling):null;return!0}function M(){for(var e=Qn;e;)e=wr(e.nextSibling)}function B(){Qn=kr=null,rn=!1}function T(e){si===null?si=[e]:si.push(e)}var I=ye.ReactCurrentBatchConfig;function z(e,n,h){if(e=h.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(a(309));var y=h.stateNode}if(!y)throw Error(a(147,e));var E=y,P=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===P?n.ref:(n=function(N){var te=E.refs;N===null?delete te[P]:te[P]=N},n._stringRef=P,n)}if(typeof e!="string")throw Error(a(284));if(!h._owner)throw Error(a(290,e))}return e}function ne(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function K(e){var n=e._init;return n(e._payload)}function Ce(e){function n(be,pe){if(e){var Se=be.deletions;Se===null?(be.deletions=[pe],be.flags|=16):Se.push(pe)}}function h(be,pe){if(!e)return null;for(;pe!==null;)n(be,pe),pe=pe.sibling;return null}function y(be,pe){for(be=new Map;pe!==null;)pe.key!==null?be.set(pe.key,pe):be.set(pe.index,pe),pe=pe.sibling;return be}function E(be,pe){return be=Za(be,pe),be.index=0,be.sibling=null,be}function P(be,pe,Se){return be.index=Se,e?(Se=be.alternate,Se!==null?(Se=Se.index,Se<pe?(be.flags|=2,pe):Se):(be.flags|=2,pe)):(be.flags|=1048576,pe)}function N(be){return e&&be.alternate===null&&(be.flags|=2),be}function te(be,pe,Se,Xe){return pe===null||pe.tag!==6?(pe=Kh(Se,be.mode,Xe),pe.return=be,pe):(pe=E(pe,Se),pe.return=be,pe)}function ue(be,pe,Se,Xe){var gt=Se.type;return gt===He?Ke(be,pe,Se.props.children,Xe,Se.key):pe!==null&&(pe.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Ft&&K(gt)===pe.type)?(Xe=E(pe,Se.props),Xe.ref=z(be,pe,Se),Xe.return=be,Xe):(Xe=Cc(Se.type,Se.key,Se.props,null,be.mode,Xe),Xe.ref=z(be,pe,Se),Xe.return=be,Xe)}function Te(be,pe,Se,Xe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Se.containerInfo||pe.stateNode.implementation!==Se.implementation?(pe=Jh(Se,be.mode,Xe),pe.return=be,pe):(pe=E(pe,Se.children||[]),pe.return=be,pe)}function Ke(be,pe,Se,Xe,gt){return pe===null||pe.tag!==7?(pe=Go(Se,be.mode,Xe,gt),pe.return=be,pe):(pe=E(pe,Se),pe.return=be,pe)}function Je(be,pe,Se){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=Kh(""+pe,be.mode,Se),pe.return=be,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case Ee:return Se=Cc(pe.type,pe.key,pe.props,null,be.mode,Se),Se.ref=z(be,null,pe),Se.return=be,Se;case De:return pe=Jh(pe,be.mode,Se),pe.return=be,pe;case Ft:var Xe=pe._init;return Je(be,Xe(pe._payload),Se)}if(fn(pe)||vt(pe))return pe=Go(pe,be.mode,Se,null),pe.return=be,pe;ne(be,pe)}return null}function Ve(be,pe,Se,Xe){var gt=pe!==null?pe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number")return gt!==null?null:te(be,pe,""+Se,Xe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Ee:return Se.key===gt?ue(be,pe,Se,Xe):null;case De:return Se.key===gt?Te(be,pe,Se,Xe):null;case Ft:return gt=Se._init,Ve(be,pe,gt(Se._payload),Xe)}if(fn(Se)||vt(Se))return gt!==null?null:Ke(be,pe,Se,Xe,null);ne(be,Se)}return null}function st(be,pe,Se,Xe,gt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return be=be.get(Se)||null,te(pe,be,""+Xe,gt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case Ee:return be=be.get(Xe.key===null?Se:Xe.key)||null,ue(pe,be,Xe,gt);case De:return be=be.get(Xe.key===null?Se:Xe.key)||null,Te(pe,be,Xe,gt);case Ft:var kt=Xe._init;return st(be,pe,Se,kt(Xe._payload),gt)}if(fn(Xe)||vt(Xe))return be=be.get(Se)||null,Ke(pe,be,Xe,gt,null);ne(pe,Xe)}return null}function dt(be,pe,Se,Xe){for(var gt=null,kt=null,Lt=pe,Bt=pe=0,Kn=null;Lt!==null&&Bt<Se.length;Bt++){Lt.index>Bt?(Kn=Lt,Lt=null):Kn=Lt.sibling;var Zt=Ve(be,Lt,Se[Bt],Xe);if(Zt===null){Lt===null&&(Lt=Kn);break}e&&Lt&&Zt.alternate===null&&n(be,Lt),pe=P(Zt,pe,Bt),kt===null?gt=Zt:kt.sibling=Zt,kt=Zt,Lt=Kn}if(Bt===Se.length)return h(be,Lt),rn&&Qs(be,Bt),gt;if(Lt===null){for(;Bt<Se.length;Bt++)Lt=Je(be,Se[Bt],Xe),Lt!==null&&(pe=P(Lt,pe,Bt),kt===null?gt=Lt:kt.sibling=Lt,kt=Lt);return rn&&Qs(be,Bt),gt}for(Lt=y(be,Lt);Bt<Se.length;Bt++)Kn=st(Lt,be,Bt,Se[Bt],Xe),Kn!==null&&(e&&Kn.alternate!==null&&Lt.delete(Kn.key===null?Bt:Kn.key),pe=P(Kn,pe,Bt),kt===null?gt=Kn:kt.sibling=Kn,kt=Kn);return e&&Lt.forEach(function(Wa){return n(be,Wa)}),rn&&Qs(be,Bt),gt}function pt(be,pe,Se,Xe){var gt=vt(Se);if(typeof gt!="function")throw Error(a(150));if(Se=gt.call(Se),Se==null)throw Error(a(151));for(var kt=gt=null,Lt=pe,Bt=pe=0,Kn=null,Zt=Se.next();Lt!==null&&!Zt.done;Bt++,Zt=Se.next()){Lt.index>Bt?(Kn=Lt,Lt=null):Kn=Lt.sibling;var Wa=Ve(be,Lt,Zt.value,Xe);if(Wa===null){Lt===null&&(Lt=Kn);break}e&&Lt&&Wa.alternate===null&&n(be,Lt),pe=P(Wa,pe,Bt),kt===null?gt=Wa:kt.sibling=Wa,kt=Wa,Lt=Kn}if(Zt.done)return h(be,Lt),rn&&Qs(be,Bt),gt;if(Lt===null){for(;!Zt.done;Bt++,Zt=Se.next())Zt=Je(be,Zt.value,Xe),Zt!==null&&(pe=P(Zt,pe,Bt),kt===null?gt=Zt:kt.sibling=Zt,kt=Zt);return rn&&Qs(be,Bt),gt}for(Lt=y(be,Lt);!Zt.done;Bt++,Zt=Se.next())Zt=st(Lt,be,Bt,Zt.value,Xe),Zt!==null&&(e&&Zt.alternate!==null&&Lt.delete(Zt.key===null?Bt:Zt.key),pe=P(Zt,pe,Bt),kt===null?gt=Zt:kt.sibling=Zt,kt=Zt);return e&&Lt.forEach(function(My){return n(be,My)}),rn&&Qs(be,Bt),gt}function En(be,pe,Se,Xe){if(typeof Se=="object"&&Se!==null&&Se.type===He&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Ee:e:{for(var gt=Se.key,kt=pe;kt!==null;){if(kt.key===gt){if(gt=Se.type,gt===He){if(kt.tag===7){h(be,kt.sibling),pe=E(kt,Se.props.children),pe.return=be,be=pe;break e}}else if(kt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Ft&&K(gt)===kt.type){h(be,kt.sibling),pe=E(kt,Se.props),pe.ref=z(be,kt,Se),pe.return=be,be=pe;break e}h(be,kt);break}else n(be,kt);kt=kt.sibling}Se.type===He?(pe=Go(Se.props.children,be.mode,Xe,Se.key),pe.return=be,be=pe):(Xe=Cc(Se.type,Se.key,Se.props,null,be.mode,Xe),Xe.ref=z(be,pe,Se),Xe.return=be,be=Xe)}return N(be);case De:e:{for(kt=Se.key;pe!==null;){if(pe.key===kt)if(pe.tag===4&&pe.stateNode.containerInfo===Se.containerInfo&&pe.stateNode.implementation===Se.implementation){h(be,pe.sibling),pe=E(pe,Se.children||[]),pe.return=be,be=pe;break e}else{h(be,pe);break}else n(be,pe);pe=pe.sibling}pe=Jh(Se,be.mode,Xe),pe.return=be,be=pe}return N(be);case Ft:return kt=Se._init,En(be,pe,kt(Se._payload),Xe)}if(fn(Se))return dt(be,pe,Se,Xe);if(vt(Se))return pt(be,pe,Se,Xe);ne(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"?(Se=""+Se,pe!==null&&pe.tag===6?(h(be,pe.sibling),pe=E(pe,Se),pe.return=be,be=pe):(h(be,pe),pe=Kh(Se,be.mode,Xe),pe.return=be,be=pe),N(be)):h(be,pe)}return En}var Me=Ce(!0),Ge=Ce(!1),et=Ui(null),rt=null,Dt=null,ee=null;function oe(){ee=Dt=rt=null}function me(e){var n=et.current;en(et),e._currentValue=n}function Pe(e,n,h){for(;e!==null;){var y=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,y!==null&&(y.childLanes|=n)):y!==null&&(y.childLanes&n)!==n&&(y.childLanes|=n),e===h)break;e=e.return}}function _e(e,n){rt=e,ee=Dt=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Vr=!0),e.firstContext=null)}function Le(e){var n=e._currentValue;if(ee!==e)if(e={context:e,memoizedValue:n,next:null},Dt===null){if(rt===null)throw Error(a(308));Dt=e,rt.dependencies={lanes:0,firstContext:e}}else Dt=Dt.next=e;return n}var R=null;function U(e){R===null?R=[e]:R.push(e)}function G(e,n,h,y){var E=n.interleaved;return E===null?(h.next=h,U(n)):(h.next=E.next,E.next=h),n.interleaved=h,$(e,y)}function $(e,n){e.lanes|=n;var h=e.alternate;for(h!==null&&(h.lanes|=n),h=e,e=e.return;e!==null;)e.childLanes|=n,h=e.alternate,h!==null&&(h.childLanes|=n),h=e,e=e.return;return h.tag===3?h.stateNode:null}var V=!1;function Z(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function le(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ae(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function he(e,n,h){var y=e.updateQueue;if(y===null)return null;if(y=y.shared,(Vt&2)!==0){var E=y.pending;return E===null?n.next=n:(n.next=E.next,E.next=n),y.pending=n,$(e,h)}return E=y.interleaved,E===null?(n.next=n,U(y)):(n.next=E.next,E.next=n),y.interleaved=n,$(e,h)}function we(e,n,h){if(n=n.updateQueue,n!==null&&(n=n.shared,(h&4194240)!==0)){var y=n.lanes;y&=e.pendingLanes,h|=y,n.lanes=h,Xr(e,h)}}function ke(e,n){var h=e.updateQueue,y=e.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var E=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var N={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?E=P=N:P=P.next=N,h=h.next}while(h!==null);P===null?E=P=n:P=P.next=n}else E=P=n;h={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:y.shared,effects:y.effects},e.updateQueue=h;return}e=h.lastBaseUpdate,e===null?h.firstBaseUpdate=n:e.next=n,h.lastBaseUpdate=n}function je(e,n,h,y){var E=e.updateQueue;V=!1;var P=E.firstBaseUpdate,N=E.lastBaseUpdate,te=E.shared.pending;if(te!==null){E.shared.pending=null;var ue=te,Te=ue.next;ue.next=null,N===null?P=Te:N.next=Te,N=ue;var Ke=e.alternate;Ke!==null&&(Ke=Ke.updateQueue,te=Ke.lastBaseUpdate,te!==N&&(te===null?Ke.firstBaseUpdate=Te:te.next=Te,Ke.lastBaseUpdate=ue))}if(P!==null){var Je=E.baseState;N=0,Ke=Te=ue=null,te=P;do{var Ve=te.lane,st=te.eventTime;if((y&Ve)===Ve){Ke!==null&&(Ke=Ke.next={eventTime:st,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var dt=e,pt=te;switch(Ve=n,st=h,pt.tag){case 1:if(dt=pt.payload,typeof dt=="function"){Je=dt.call(st,Je,Ve);break e}Je=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=pt.payload,Ve=typeof dt=="function"?dt.call(st,Je,Ve):dt,Ve==null)break e;Je=Ne({},Je,Ve);break e;case 2:V=!0}}te.callback!==null&&te.lane!==0&&(e.flags|=64,Ve=E.effects,Ve===null?E.effects=[te]:Ve.push(te))}else st={eventTime:st,lane:Ve,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ke===null?(Te=Ke=st,ue=Je):Ke=Ke.next=st,N|=Ve;if(te=te.next,te===null){if(te=E.shared.pending,te===null)break;Ve=te,te=Ve.next,Ve.next=null,E.lastBaseUpdate=Ve,E.shared.pending=null}}while(!0);if(Ke===null&&(ue=Je),E.baseState=ue,E.firstBaseUpdate=Te,E.lastBaseUpdate=Ke,n=E.shared.interleaved,n!==null){E=n;do N|=E.lane,E=E.next;while(E!==n)}else P===null&&(E.shared.lanes=0);jo|=N,e.lanes=N,e.memoizedState=Je}}function it(e,n,h){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var y=e[n],E=y.callback;if(E!==null){if(y.callback=null,y=h,typeof E!="function")throw Error(a(191,E));E.call(y)}}}var at={},ct=Ui(at),$t=Ui(at),qt=Ui(at);function Rt(e){if(e===at)throw Error(a(174));return e}function Ht(e,n){switch(Qt(qt,n),Qt($t,e),Qt(ct,at),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ha(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=ha(n,e)}en(ct),Qt(ct,n)}function cn(){en(ct),en($t),en(qt)}function Fo(e){Rt(qt.current);var n=Rt(ct.current),h=ha(n,e.type);n!==h&&(Qt($t,e),Qt(ct,h))}function No(e){$t.current===e&&(en(ct),en($t))}var tn=Ui(0);function Lr(e){for(var n=e;n!==null;){if(n.tag===13){var h=n.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ea=[];function sr(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var Bn=ye.ReactCurrentDispatcher,sn=ye.ReactCurrentBatchConfig,zo=0,hn=null,Nn=null,Zn=null,oc=!1,_u=!1,vu=0,Kv=0;function ar(){throw Error(a(321))}function gh(e,n){if(n===null)return!1;for(var h=0;h<n.length&&h<e.length;h++)if(!ir(e[h],n[h]))return!1;return!0}function _h(e,n,h,y,E,P){if(zo=P,hn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Bn.current=e===null||e.memoizedState===null?Qv:ey,e=h(y,E),_u){P=0;do{if(_u=!1,vu=0,25<=P)throw Error(a(301));P+=1,Zn=Nn=null,n.updateQueue=null,Bn.current=ty,e=h(y,E)}while(_u)}if(Bn.current=cc,n=Nn!==null&&Nn.next!==null,zo=0,Zn=Nn=hn=null,oc=!1,n)throw Error(a(300));return e}function vh(){var e=vu!==0;return vu=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?hn.memoizedState=Zn=e:Zn=Zn.next=e,Zn}function Li(){if(Nn===null){var e=hn.alternate;e=e!==null?e.memoizedState:null}else e=Nn.next;var n=Zn===null?hn.memoizedState:Zn.next;if(n!==null)Zn=n,Nn=e;else{if(e===null)throw Error(a(310));Nn=e,e={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Zn===null?hn.memoizedState=Zn=e:Zn=Zn.next=e}return Zn}function yu(e,n){return typeof n=="function"?n(e):n}function yh(e){var n=Li(),h=n.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=e;var y=Nn,E=y.baseQueue,P=h.pending;if(P!==null){if(E!==null){var N=E.next;E.next=P.next,P.next=N}y.baseQueue=E=P,h.pending=null}if(E!==null){P=E.next,y=y.baseState;var te=N=null,ue=null,Te=P;do{var Ke=Te.lane;if((zo&Ke)===Ke)ue!==null&&(ue=ue.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),y=Te.hasEagerState?Te.eagerState:e(y,Te.action);else{var Je={lane:Ke,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ue===null?(te=ue=Je,N=y):ue=ue.next=Je,hn.lanes|=Ke,jo|=Ke}Te=Te.next}while(Te!==null&&Te!==P);ue===null?N=y:ue.next=te,ir(y,n.memoizedState)||(Vr=!0),n.memoizedState=y,n.baseState=N,n.baseQueue=ue,h.lastRenderedState=y}if(e=h.interleaved,e!==null){E=e;do P=E.lane,hn.lanes|=P,jo|=P,E=E.next;while(E!==e)}else E===null&&(h.lanes=0);return[n.memoizedState,h.dispatch]}function wh(e){var n=Li(),h=n.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=e;var y=h.dispatch,E=h.pending,P=n.memoizedState;if(E!==null){h.pending=null;var N=E=E.next;do P=e(P,N.action),N=N.next;while(N!==E);ir(P,n.memoizedState)||(Vr=!0),n.memoizedState=P,n.baseQueue===null&&(n.baseState=P),h.lastRenderedState=P}return[P,y]}function Lp(){}function Cp(e,n){var h=hn,y=Li(),E=n(),P=!ir(y.memoizedState,E);if(P&&(y.memoizedState=E,Vr=!0),y=y.queue,xh(Mp.bind(null,h,y,e),[e]),y.getSnapshot!==n||P||Zn!==null&&Zn.memoizedState.tag&1){if(h.flags|=2048,wu(9,Ep.bind(null,h,y,E,n),void 0,null),Wn===null)throw Error(a(349));(zo&30)!==0||bp(h,n,E)}return E}function bp(e,n,h){e.flags|=16384,e={getSnapshot:n,value:h},n=hn.updateQueue,n===null?(n={lastEffect:null,stores:null},hn.updateQueue=n,n.stores=[e]):(h=n.stores,h===null?n.stores=[e]:h.push(e))}function Ep(e,n,h,y){n.value=h,n.getSnapshot=y,Sp(n)&&Pp(e)}function Mp(e,n,h){return h(function(){Sp(n)&&Pp(e)})}function Sp(e){var n=e.getSnapshot;e=e.value;try{var h=n();return!ir(e,h)}catch{return!0}}function Pp(e){var n=$(e,1);n!==null&&Zi(n,e,1,-1)}function Bp(e){var n=xs();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:e},n.queue=e,e=e.dispatch=Xv.bind(null,hn,e),[n.memoizedState,e]}function wu(e,n,h,y){return e={tag:e,create:n,destroy:h,deps:y,next:null},n=hn.updateQueue,n===null?(n={lastEffect:null,stores:null},hn.updateQueue=n,n.lastEffect=e.next=e):(h=n.lastEffect,h===null?n.lastEffect=e.next=e:(y=h.next,h.next=e,e.next=y,n.lastEffect=e)),e}function Tp(){return Li().memoizedState}function lc(e,n,h,y){var E=xs();hn.flags|=e,E.memoizedState=wu(1|n,h,void 0,y===void 0?null:y)}function uc(e,n,h,y){var E=Li();y=y===void 0?null:y;var P=void 0;if(Nn!==null){var N=Nn.memoizedState;if(P=N.destroy,y!==null&&gh(y,N.deps)){E.memoizedState=wu(n,h,P,y);return}}hn.flags|=e,E.memoizedState=wu(1|n,h,P,y)}function Ap(e,n){return lc(8390656,8,e,n)}function xh(e,n){return uc(2048,8,e,n)}function Dp(e,n){return uc(4,2,e,n)}function Op(e,n){return uc(4,4,e,n)}function Rp(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ip(e,n,h){return h=h!=null?h.concat([e]):null,uc(4,4,Rp.bind(null,n,e),h)}function kh(){}function Fp(e,n){var h=Li();n=n===void 0?null:n;var y=h.memoizedState;return y!==null&&n!==null&&gh(n,y[1])?y[0]:(h.memoizedState=[e,n],e)}function Np(e,n){var h=Li();n=n===void 0?null:n;var y=h.memoizedState;return y!==null&&n!==null&&gh(n,y[1])?y[0]:(e=e(),h.memoizedState=[e,n],e)}function zp(e,n,h){return(zo&21)===0?(e.baseState&&(e.baseState=!1,Vr=!0),e.memoizedState=h):(ir(h,n)||(h=pl(),hn.lanes|=h,jo|=h,e.baseState=!0),n)}function Jv(e,n){var h=jt;jt=h!==0&&4>h?h:4,e(!0);var y=sn.transition;sn.transition={};try{e(!1),n()}finally{jt=h,sn.transition=y}}function jp(){return Li().memoizedState}function Yv(e,n,h){var y=Va(e);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},Up(e))$p(n,h);else if(h=G(e,n,h,y),h!==null){var E=br();Zi(h,e,y,E),qp(h,n,y)}}function Xv(e,n,h){var y=Va(e),E={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(Up(e))$p(n,E);else{var P=e.alternate;if(e.lanes===0&&(P===null||P.lanes===0)&&(P=n.lastRenderedReducer,P!==null))try{var N=n.lastRenderedState,te=P(N,h);if(E.hasEagerState=!0,E.eagerState=te,ir(te,N)){var ue=n.interleaved;ue===null?(E.next=E,U(n)):(E.next=ue.next,ue.next=E),n.interleaved=E;return}}catch{}finally{}h=G(e,n,E,y),h!==null&&(E=br(),Zi(h,e,y,E),qp(h,n,y))}}function Up(e){var n=e.alternate;return e===hn||n!==null&&n===hn}function $p(e,n){_u=oc=!0;var h=e.pending;h===null?n.next=n:(n.next=h.next,h.next=n),e.pending=n}function qp(e,n,h){if((h&4194240)!==0){var y=n.lanes;y&=e.pendingLanes,h|=y,n.lanes=h,Xr(e,h)}}var cc={readContext:Le,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},Qv={readContext:Le,useCallback:function(e,n){return xs().memoizedState=[e,n===void 0?null:n],e},useContext:Le,useEffect:Ap,useImperativeHandle:function(e,n,h){return h=h!=null?h.concat([e]):null,lc(4194308,4,Rp.bind(null,n,e),h)},useLayoutEffect:function(e,n){return lc(4194308,4,e,n)},useInsertionEffect:function(e,n){return lc(4,2,e,n)},useMemo:function(e,n){var h=xs();return n=n===void 0?null:n,e=e(),h.memoizedState=[e,n],e},useReducer:function(e,n,h){var y=xs();return n=h!==void 0?h(n):n,y.memoizedState=y.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},y.queue=e,e=e.dispatch=Yv.bind(null,hn,e),[y.memoizedState,e]},useRef:function(e){var n=xs();return e={current:e},n.memoizedState=e},useState:Bp,useDebugValue:kh,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Bp(!1),n=e[0];return e=Jv.bind(null,e[1]),xs().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,h){var y=hn,E=xs();if(rn){if(h===void 0)throw Error(a(407));h=h()}else{if(h=n(),Wn===null)throw Error(a(349));(zo&30)!==0||bp(y,n,h)}E.memoizedState=h;var P={value:h,getSnapshot:n};return E.queue=P,Ap(Mp.bind(null,y,P,e),[e]),y.flags|=2048,wu(9,Ep.bind(null,y,P,h,n),void 0,null),h},useId:function(){var e=xs(),n=Wn.identifierPrefix;if(rn){var h=qi,y=$i;h=(y&~(1<<32-Tt(y)-1)).toString(32)+h,n=":"+n+"R"+h,h=vu++,0<h&&(n+="H"+h.toString(32)),n+=":"}else h=Kv++,n=":"+n+"r"+h.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},ey={readContext:Le,useCallback:Fp,useContext:Le,useEffect:xh,useImperativeHandle:Ip,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Np,useReducer:yh,useRef:Tp,useState:function(){return yh(yu)},useDebugValue:kh,useDeferredValue:function(e){var n=Li();return zp(n,Nn.memoizedState,e)},useTransition:function(){var e=yh(yu)[0],n=Li().memoizedState;return[e,n]},useMutableSource:Lp,useSyncExternalStore:Cp,useId:jp,unstable_isNewReconciler:!1},ty={readContext:Le,useCallback:Fp,useContext:Le,useEffect:xh,useImperativeHandle:Ip,useInsertionEffect:Dp,useLayoutEffect:Op,useMemo:Np,useReducer:wh,useRef:Tp,useState:function(){return wh(yu)},useDebugValue:kh,useDeferredValue:function(e){var n=Li();return Nn===null?n.memoizedState=e:zp(n,Nn.memoizedState,e)},useTransition:function(){var e=wh(yu)[0],n=Li().memoizedState;return[e,n]},useMutableSource:Lp,useSyncExternalStore:Cp,useId:jp,unstable_isNewReconciler:!1};function Gi(e,n){if(e&&e.defaultProps){n=Ne({},n),e=e.defaultProps;for(var h in e)n[h]===void 0&&(n[h]=e[h]);return n}return n}function Lh(e,n,h,y){n=e.memoizedState,h=h(y,n),h=h==null?n:Ne({},n,h),e.memoizedState=h,e.lanes===0&&(e.updateQueue.baseState=h)}var hc={isMounted:function(e){return(e=e._reactInternals)?ui(e)===e:!1},enqueueSetState:function(e,n,h){e=e._reactInternals;var y=br(),E=Va(e),P=ae(y,E);P.payload=n,h!=null&&(P.callback=h),n=he(e,P,E),n!==null&&(Zi(n,e,E,y),we(n,e,E))},enqueueReplaceState:function(e,n,h){e=e._reactInternals;var y=br(),E=Va(e),P=ae(y,E);P.tag=1,P.payload=n,h!=null&&(P.callback=h),n=he(e,P,E),n!==null&&(Zi(n,e,E,y),we(n,e,E))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var h=br(),y=Va(e),E=ae(h,y);E.tag=2,n!=null&&(E.callback=n),n=he(e,E,y),n!==null&&(Zi(n,e,y,h),we(n,e,y))}};function Gp(e,n,h,y,E,P,N){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(y,P,N):n.prototype&&n.prototype.isPureReactComponent?!Ir(h,y)||!Ir(E,P):!0}function Vp(e,n,h){var y=!1,E=ys,P=n.contextType;return typeof P=="object"&&P!==null?P=Le(P):(E=In(n)?Ys:gn.current,y=n.contextTypes,P=(y=y!=null)?za(e,E):ys),n=new n(h,P),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=hc,e.stateNode=n,n._reactInternals=e,y&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=E,e.__reactInternalMemoizedMaskedChildContext=P),n}function Hp(e,n,h,y){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(h,y),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(h,y),n.state!==e&&hc.enqueueReplaceState(n,n.state,null)}function Ch(e,n,h,y){var E=e.stateNode;E.props=h,E.state=e.memoizedState,E.refs={},Z(e);var P=n.contextType;typeof P=="object"&&P!==null?E.context=Le(P):(P=In(n)?Ys:gn.current,E.context=za(e,P)),E.state=e.memoizedState,P=n.getDerivedStateFromProps,typeof P=="function"&&(Lh(e,n,P,h),E.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(n=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),n!==E.state&&hc.enqueueReplaceState(E,E.state,null),je(e,h,E,y),E.state=e.memoizedState),typeof E.componentDidMount=="function"&&(e.flags|=4194308)}function Tl(e,n){try{var h="",y=n;do h+=O(y),y=y.return;while(y);var E=h}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:e,source:n,stack:E,digest:null}}function bh(e,n,h){return{value:e,source:null,stack:h??null,digest:n??null}}function Eh(e,n){try{console.error(n.value)}catch(h){setTimeout(function(){throw h})}}var ny=typeof WeakMap=="function"?WeakMap:Map;function Zp(e,n,h){h=ae(-1,h),h.tag=3,h.payload={element:null};var y=n.value;return h.callback=function(){vc||(vc=!0,Uh=y),Eh(e,n)},h}function Wp(e,n,h){h=ae(-1,h),h.tag=3;var y=e.type.getDerivedStateFromError;if(typeof y=="function"){var E=n.value;h.payload=function(){return y(E)},h.callback=function(){Eh(e,n)}}var P=e.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){Eh(e,n),typeof y!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var N=n.stack;this.componentDidCatch(n.value,{componentStack:N!==null?N:""})}),h}function Kp(e,n,h){var y=e.pingCache;if(y===null){y=e.pingCache=new ny;var E=new Set;y.set(n,E)}else E=y.get(n),E===void 0&&(E=new Set,y.set(n,E));E.has(h)||(E.add(h),e=gy.bind(null,e,n,h),n.then(e,e))}function Jp(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Yp(e,n,h,y,E){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(n=ae(-1,1),n.tag=2,he(h,n,1))),h.lanes|=1),e):(e.flags|=65536,e.lanes=E,e)}var ry=ye.ReactCurrentOwner,Vr=!1;function Cr(e,n,h,y){n.child=e===null?Ge(n,null,h,y):Me(n,e.child,h,y)}function Xp(e,n,h,y,E){h=h.render;var P=n.ref;return _e(n,E),y=_h(e,n,h,y,P,E),h=vh(),e!==null&&!Vr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~E,ta(e,n,E)):(rn&&h&&ki(n),n.flags|=1,Cr(e,n,y,E),n.child)}function Qp(e,n,h,y,E){if(e===null){var P=h.type;return typeof P=="function"&&!Wh(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(n.tag=15,n.type=P,em(e,n,P,y,E)):(e=Cc(h.type,null,y,n,n.mode,E),e.ref=n.ref,e.return=n,n.child=e)}if(P=e.child,(e.lanes&E)===0){var N=P.memoizedProps;if(h=h.compare,h=h!==null?h:Ir,h(N,y)&&e.ref===n.ref)return ta(e,n,E)}return n.flags|=1,e=Za(P,y),e.ref=n.ref,e.return=n,n.child=e}function em(e,n,h,y,E){if(e!==null){var P=e.memoizedProps;if(Ir(P,y)&&e.ref===n.ref)if(Vr=!1,n.pendingProps=y=P,(e.lanes&E)!==0)(e.flags&131072)!==0&&(Vr=!0);else return n.lanes=e.lanes,ta(e,n,E)}return Mh(e,n,h,y,E)}function tm(e,n,h){var y=n.pendingProps,E=y.children,P=e!==null?e.memoizedState:null;if(y.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Dl,ai),ai|=h;else{if((h&1073741824)===0)return e=P!==null?P.baseLanes|h:h,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Qt(Dl,ai),ai|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:h,Qt(Dl,ai),ai|=y}else P!==null?(y=P.baseLanes|h,n.memoizedState=null):y=h,Qt(Dl,ai),ai|=y;return Cr(e,n,E,h),n.child}function nm(e,n){var h=n.ref;(e===null&&h!==null||e!==null&&e.ref!==h)&&(n.flags|=512,n.flags|=2097152)}function Mh(e,n,h,y,E){var P=In(h)?Ys:gn.current;return P=za(n,P),_e(n,E),h=_h(e,n,h,y,P,E),y=vh(),e!==null&&!Vr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~E,ta(e,n,E)):(rn&&y&&ki(n),n.flags|=1,Cr(e,n,h,E),n.child)}function rm(e,n,h,y,E){if(In(h)){var P=!0;Ml(n)}else P=!1;if(_e(n,E),n.stateNode===null)fc(e,n),Vp(n,h,y),Ch(n,h,y,E),y=!0;else if(e===null){var N=n.stateNode,te=n.memoizedProps;N.props=te;var ue=N.context,Te=h.contextType;typeof Te=="object"&&Te!==null?Te=Le(Te):(Te=In(h)?Ys:gn.current,Te=za(n,Te));var Ke=h.getDerivedStateFromProps,Je=typeof Ke=="function"||typeof N.getSnapshotBeforeUpdate=="function";Je||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(te!==y||ue!==Te)&&Hp(n,N,y,Te),V=!1;var Ve=n.memoizedState;N.state=Ve,je(n,y,N,E),ue=n.memoizedState,te!==y||Ve!==ue||Rn.current||V?(typeof Ke=="function"&&(Lh(n,h,Ke,y),ue=n.memoizedState),(te=V||Gp(n,h,te,y,Ve,ue,Te))?(Je||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(n.flags|=4194308)):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=y,n.memoizedState=ue),N.props=y,N.state=ue,N.context=Te,y=te):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),y=!1)}else{N=n.stateNode,le(e,n),te=n.memoizedProps,Te=n.type===n.elementType?te:Gi(n.type,te),N.props=Te,Je=n.pendingProps,Ve=N.context,ue=h.contextType,typeof ue=="object"&&ue!==null?ue=Le(ue):(ue=In(h)?Ys:gn.current,ue=za(n,ue));var st=h.getDerivedStateFromProps;(Ke=typeof st=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(te!==Je||Ve!==ue)&&Hp(n,N,y,ue),V=!1,Ve=n.memoizedState,N.state=Ve,je(n,y,N,E);var dt=n.memoizedState;te!==Je||Ve!==dt||Rn.current||V?(typeof st=="function"&&(Lh(n,h,st,y),dt=n.memoizedState),(Te=V||Gp(n,h,Te,y,Ve,dt,ue)||!1)?(Ke||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,dt,ue),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,dt,ue)),typeof N.componentDidUpdate=="function"&&(n.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof N.componentDidUpdate!="function"||te===e.memoizedProps&&Ve===e.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||te===e.memoizedProps&&Ve===e.memoizedState||(n.flags|=1024),n.memoizedProps=y,n.memoizedState=dt),N.props=y,N.state=dt,N.context=ue,y=Te):(typeof N.componentDidUpdate!="function"||te===e.memoizedProps&&Ve===e.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||te===e.memoizedProps&&Ve===e.memoizedState||(n.flags|=1024),y=!1)}return Sh(e,n,h,y,P,E)}function Sh(e,n,h,y,E,P){nm(e,n);var N=(n.flags&128)!==0;if(!y&&!N)return E&&fu(n,h,!1),ta(e,n,P);y=n.stateNode,ry.current=n;var te=N&&typeof h.getDerivedStateFromError!="function"?null:y.render();return n.flags|=1,e!==null&&N?(n.child=Me(n,e.child,null,P),n.child=Me(n,null,te,P)):Cr(e,n,te,P),n.memoizedState=y.state,E&&fu(n,h,!0),n.child}function im(e){var n=e.stateNode;n.pendingContext?du(e,n.pendingContext,n.pendingContext!==n.context):n.context&&du(e,n.context,!1),Ht(e,n.containerInfo)}function sm(e,n,h,y,E){return B(),T(E),n.flags|=256,Cr(e,n,h,y),n.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Bh(e){return{baseLanes:e,cachePool:null,transitions:null}}function am(e,n,h){var y=n.pendingProps,E=tn.current,P=!1,N=(n.flags&128)!==0,te;if((te=N)||(te=e!==null&&e.memoizedState===null?!1:(E&2)!==0),te?(P=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(E|=1),Qt(tn,E&1),e===null)return d(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(N=y.children,e=y.fallback,P?(y=n.mode,P=n.child,N={mode:"hidden",children:N},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=N):P=bc(N,y,0,null),e=Go(e,y,h,null),P.return=n,e.return=n,P.sibling=e,n.child=P,n.child.memoizedState=Bh(h),n.memoizedState=Ph,e):Th(n,N));if(E=e.memoizedState,E!==null&&(te=E.dehydrated,te!==null))return iy(e,n,N,y,te,E,h);if(P){P=y.fallback,N=n.mode,E=e.child,te=E.sibling;var ue={mode:"hidden",children:y.children};return(N&1)===0&&n.child!==E?(y=n.child,y.childLanes=0,y.pendingProps=ue,n.deletions=null):(y=Za(E,ue),y.subtreeFlags=E.subtreeFlags&14680064),te!==null?P=Za(te,P):(P=Go(P,N,h,null),P.flags|=2),P.return=n,y.return=n,y.sibling=P,n.child=y,y=P,P=n.child,N=e.child.memoizedState,N=N===null?Bh(h):{baseLanes:N.baseLanes|h,cachePool:null,transitions:N.transitions},P.memoizedState=N,P.childLanes=e.childLanes&~h,n.memoizedState=Ph,y}return P=e.child,e=P.sibling,y=Za(P,{mode:"visible",children:y.children}),(n.mode&1)===0&&(y.lanes=h),y.return=n,y.sibling=null,e!==null&&(h=n.deletions,h===null?(n.deletions=[e],n.flags|=16):h.push(e)),n.child=y,n.memoizedState=null,y}function Th(e,n){return n=bc({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function dc(e,n,h,y){return y!==null&&T(y),Me(n,e.child,null,h),e=Th(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function iy(e,n,h,y,E,P,N){if(h)return n.flags&256?(n.flags&=-257,y=bh(Error(a(422))),dc(e,n,N,y)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(P=y.fallback,E=n.mode,y=bc({mode:"visible",children:y.children},E,0,null),P=Go(P,E,N,null),P.flags|=2,y.return=n,P.return=n,y.sibling=P,n.child=y,(n.mode&1)!==0&&Me(n,e.child,null,N),n.child.memoizedState=Bh(N),n.memoizedState=Ph,P);if((n.mode&1)===0)return dc(e,n,N,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var te=y.dgst;return y=te,P=Error(a(419)),y=bh(P,y,void 0),dc(e,n,N,y)}if(te=(N&e.childLanes)!==0,Vr||te){if(y=Wn,y!==null){switch(N&-N){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|N))!==0?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,$(e,E),Zi(y,e,E,-1))}return Zh(),y=bh(Error(a(421))),dc(e,n,N,y)}return E.data==="$?"?(n.flags|=128,n.child=e.child,n=_y.bind(null,e),E._reactRetry=n,null):(e=P.treeContext,Qn=wr(E.nextSibling),kr=n,rn=!0,si=null,e!==null&&(xr[Fn++]=$i,xr[Fn++]=qi,xr[Fn++]=xi,$i=e.id,qi=e.overflow,xi=n),n=Th(n,y.children),n.flags|=4096,n)}function om(e,n,h){e.lanes|=n;var y=e.alternate;y!==null&&(y.lanes|=n),Pe(e.return,n,h)}function Ah(e,n,h,y,E){var P=e.memoizedState;P===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:E}:(P.isBackwards=n,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=h,P.tailMode=E)}function lm(e,n,h){var y=n.pendingProps,E=y.revealOrder,P=y.tail;if(Cr(e,n,y.children,h),y=tn.current,(y&2)!==0)y=y&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&om(e,h,n);else if(e.tag===19)om(e,h,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}y&=1}if(Qt(tn,y),(n.mode&1)===0)n.memoizedState=null;else switch(E){case"forwards":for(h=n.child,E=null;h!==null;)e=h.alternate,e!==null&&Lr(e)===null&&(E=h),h=h.sibling;h=E,h===null?(E=n.child,n.child=null):(E=h.sibling,h.sibling=null),Ah(n,!1,E,h,P);break;case"backwards":for(h=null,E=n.child,n.child=null;E!==null;){if(e=E.alternate,e!==null&&Lr(e)===null){n.child=E;break}e=E.sibling,E.sibling=h,h=E,E=e}Ah(n,!0,h,null,P);break;case"together":Ah(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fc(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function ta(e,n,h){if(e!==null&&(n.dependencies=e.dependencies),jo|=n.lanes,(h&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,h=Za(e,e.pendingProps),n.child=h,h.return=n;e.sibling!==null;)e=e.sibling,h=h.sibling=Za(e,e.pendingProps),h.return=n;h.sibling=null}return n.child}function sy(e,n,h){switch(n.tag){case 3:im(n),B();break;case 5:Fo(n);break;case 1:In(n.type)&&Ml(n);break;case 4:Ht(n,n.stateNode.containerInfo);break;case 10:var y=n.type._context,E=n.memoizedProps.value;Qt(et,y._currentValue),y._currentValue=E;break;case 13:if(y=n.memoizedState,y!==null)return y.dehydrated!==null?(Qt(tn,tn.current&1),n.flags|=128,null):(h&n.child.childLanes)!==0?am(e,n,h):(Qt(tn,tn.current&1),e=ta(e,n,h),e!==null?e.sibling:null);Qt(tn,tn.current&1);break;case 19:if(y=(h&n.childLanes)!==0,(e.flags&128)!==0){if(y)return lm(e,n,h);n.flags|=128}if(E=n.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Qt(tn,tn.current),y)break;return null;case 22:case 23:return n.lanes=0,tm(e,n,h)}return ta(e,n,h)}var um,Dh,cm,hm;um=function(e,n){for(var h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break;for(;h.sibling===null;){if(h.return===null||h.return===n)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Dh=function(){},cm=function(e,n,h,y){var E=e.memoizedProps;if(E!==y){e=n.stateNode,Rt(ct.current);var P=null;switch(h){case"input":E=qe(e,E),y=qe(e,y),P=[];break;case"select":E=Ne({},E,{value:void 0}),y=Ne({},y,{value:void 0}),P=[];break;case"textarea":E=ua(e,E),y=ua(e,y),P=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(e.onclick=Ue)}da(h,y);var N;h=null;for(Te in E)if(!y.hasOwnProperty(Te)&&E.hasOwnProperty(Te)&&E[Te]!=null)if(Te==="style"){var te=E[Te];for(N in te)te.hasOwnProperty(N)&&(h||(h={}),h[N]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(f.hasOwnProperty(Te)?P||(P=[]):(P=P||[]).push(Te,null));for(Te in y){var ue=y[Te];if(te=E?.[Te],y.hasOwnProperty(Te)&&ue!==te&&(ue!=null||te!=null))if(Te==="style")if(te){for(N in te)!te.hasOwnProperty(N)||ue&&ue.hasOwnProperty(N)||(h||(h={}),h[N]="");for(N in ue)ue.hasOwnProperty(N)&&te[N]!==ue[N]&&(h||(h={}),h[N]=ue[N])}else h||(P||(P=[]),P.push(Te,h)),h=ue;else Te==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,te=te?te.__html:void 0,ue!=null&&te!==ue&&(P=P||[]).push(Te,ue)):Te==="children"?typeof ue!="string"&&typeof ue!="number"||(P=P||[]).push(Te,""+ue):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(f.hasOwnProperty(Te)?(ue!=null&&Te==="onScroll"&&Pt("scroll",e),P||te===ue||(P=[])):(P=P||[]).push(Te,ue))}h&&(P=P||[]).push("style",h);var Te=P;(n.updateQueue=Te)&&(n.flags|=4)}},hm=function(e,n,h,y){h!==y&&(n.flags|=4)};function xu(e,n){if(!rn)switch(e.tailMode){case"hidden":n=e.tail;for(var h=null;n!==null;)n.alternate!==null&&(h=n),n=n.sibling;h===null?e.tail=null:h.sibling=null;break;case"collapsed":h=e.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:y.sibling=null}}function or(e){var n=e.alternate!==null&&e.alternate.child===e.child,h=0,y=0;if(n)for(var E=e.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=e,E=E.sibling;else for(E=e.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=e,E=E.sibling;return e.subtreeFlags|=y,e.childLanes=h,n}function ay(e,n,h){var y=n.pendingProps;switch(gu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(n),null;case 1:return In(n.type)&&Xs(),or(n),null;case 3:return y=n.stateNode,cn(),en(Rn),en(gn),sr(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(e===null||e.child===null)&&(w(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,si!==null&&(Gh(si),si=null))),Dh(e,n),or(n),null;case 5:No(n);var E=Rt(qt.current);if(h=n.type,e!==null&&n.stateNode!=null)cm(e,n,h,y,E),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!y){if(n.stateNode===null)throw Error(a(166));return or(n),null}if(e=Rt(ct.current),w(n)){y=n.stateNode,h=n.type;var P=n.memoizedProps;switch(y[$r]=n,y[vs]=P,e=(n.mode&1)!==0,h){case"dialog":Pt("cancel",y),Pt("close",y);break;case"iframe":case"object":case"embed":Pt("load",y);break;case"video":case"audio":for(E=0;E<xt.length;E++)Pt(xt[E],y);break;case"source":Pt("error",y);break;case"img":case"image":case"link":Pt("error",y),Pt("load",y);break;case"details":Pt("toggle",y);break;case"input":Ze(y,P),Pt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Pt("invalid",y);break;case"textarea":ro(y,P),Pt("invalid",y)}da(h,P),E=null;for(var N in P)if(P.hasOwnProperty(N)){var te=P[N];N==="children"?typeof te=="string"?y.textContent!==te&&(P.suppressHydrationWarning!==!0&&Be(y.textContent,te,e),E=["children",te]):typeof te=="number"&&y.textContent!==""+te&&(P.suppressHydrationWarning!==!0&&Be(y.textContent,te,e),E=["children",""+te]):f.hasOwnProperty(N)&&te!=null&&N==="onScroll"&&Pt("scroll",y)}switch(h){case"input":de(y),ot(y,P,!0);break;case"textarea":de(y),sl(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Ue)}y=E,n.updateQueue=y,y!==null&&(n.flags|=4)}else{N=E.nodeType===9?E:E.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ca(h)),e==="http://www.w3.org/1999/xhtml"?h==="script"?(e=N.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof y.is=="string"?e=N.createElement(h,{is:y.is}):(e=N.createElement(h),h==="select"&&(N=e,y.multiple?N.multiple=!0:y.size&&(N.size=y.size))):e=N.createElementNS(e,h),e[$r]=n,e[vs]=y,um(e,n,!1,!1),n.stateNode=e;e:{switch(N=Yr(h,y),h){case"dialog":Pt("cancel",e),Pt("close",e),E=y;break;case"iframe":case"object":case"embed":Pt("load",e),E=y;break;case"video":case"audio":for(E=0;E<xt.length;E++)Pt(xt[E],e);E=y;break;case"source":Pt("error",e),E=y;break;case"img":case"image":case"link":Pt("error",e),Pt("load",e),E=y;break;case"details":Pt("toggle",e),E=y;break;case"input":Ze(e,y),E=qe(e,y),Pt("invalid",e);break;case"option":E=y;break;case"select":e._wrapperState={wasMultiple:!!y.multiple},E=Ne({},y,{value:void 0}),Pt("invalid",e);break;case"textarea":ro(e,y),E=ua(e,y),Pt("invalid",e);break;default:E=y}da(h,E),te=E;for(P in te)if(te.hasOwnProperty(P)){var ue=te[P];P==="style"?Ms(e,ue):P==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&io(e,ue)):P==="children"?typeof ue=="string"?(h!=="textarea"||ue!=="")&&Mi(e,ue):typeof ue=="number"&&Mi(e,""+ue):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(f.hasOwnProperty(P)?ue!=null&&P==="onScroll"&&Pt("scroll",e):ue!=null&&Oe(e,P,ue,N))}switch(h){case"input":de(e),ot(e,y,!1);break;case"textarea":de(e),sl(e);break;case"option":y.value!=null&&e.setAttribute("value",""+fe(y.value));break;case"select":e.multiple=!!y.multiple,P=y.value,P!=null?li(e,!!y.multiple,P,!1):y.defaultValue!=null&&li(e,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(e.onclick=Ue)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return or(n),null;case 6:if(e&&n.stateNode!=null)hm(e,n,e.memoizedProps,y);else{if(typeof y!="string"&&n.stateNode===null)throw Error(a(166));if(h=Rt(qt.current),Rt(ct.current),w(n)){if(y=n.stateNode,h=n.memoizedProps,y[$r]=n,(P=y.nodeValue!==h)&&(e=kr,e!==null))switch(e.tag){case 3:Be(y.nodeValue,h,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Be(y.nodeValue,h,(e.mode&1)!==0)}P&&(n.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[$r]=n,n.stateNode=y}return or(n),null;case 13:if(en(tn),y=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rn&&Qn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)M(),B(),n.flags|=98560,P=!1;else if(P=w(n),y!==null&&y.dehydrated!==null){if(e===null){if(!P)throw Error(a(318));if(P=n.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(a(317));P[$r]=n}else B(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;or(n),P=!1}else si!==null&&(Gh(si),si=null),P=!0;if(!P)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=h,n):(y=y!==null,y!==(e!==null&&e.memoizedState!==null)&&y&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(tn.current&1)!==0?zn===0&&(zn=3):Zh())),n.updateQueue!==null&&(n.flags|=4),or(n),null);case 4:return cn(),Dh(e,n),e===null&&Ln(n.stateNode.containerInfo),or(n),null;case 10:return me(n.type._context),or(n),null;case 17:return In(n.type)&&Xs(),or(n),null;case 19:if(en(tn),P=n.memoizedState,P===null)return or(n),null;if(y=(n.flags&128)!==0,N=P.rendering,N===null)if(y)xu(P,!1);else{if(zn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(N=Lr(e),N!==null){for(n.flags|=128,xu(P,!1),y=N.updateQueue,y!==null&&(n.updateQueue=y,n.flags|=4),n.subtreeFlags=0,y=h,h=n.child;h!==null;)P=h,e=y,P.flags&=14680066,N=P.alternate,N===null?(P.childLanes=0,P.lanes=e,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=N.childLanes,P.lanes=N.lanes,P.child=N.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=N.memoizedProps,P.memoizedState=N.memoizedState,P.updateQueue=N.updateQueue,P.type=N.type,e=N.dependencies,P.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),h=h.sibling;return Qt(tn,tn.current&1|2),n.child}e=e.sibling}P.tail!==null&&on()>Ol&&(n.flags|=128,y=!0,xu(P,!1),n.lanes=4194304)}else{if(!y)if(e=Lr(N),e!==null){if(n.flags|=128,y=!0,h=e.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),xu(P,!0),P.tail===null&&P.tailMode==="hidden"&&!N.alternate&&!rn)return or(n),null}else 2*on()-P.renderingStartTime>Ol&&h!==1073741824&&(n.flags|=128,y=!0,xu(P,!1),n.lanes=4194304);P.isBackwards?(N.sibling=n.child,n.child=N):(h=P.last,h!==null?h.sibling=N:n.child=N,P.last=N)}return P.tail!==null?(n=P.tail,P.rendering=n,P.tail=n.sibling,P.renderingStartTime=on(),n.sibling=null,h=tn.current,Qt(tn,y?h&1|2:h&1),n):(or(n),null);case 22:case 23:return Hh(),y=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==y&&(n.flags|=8192),y&&(n.mode&1)!==0?(ai&1073741824)!==0&&(or(n),n.subtreeFlags&6&&(n.flags|=8192)):or(n),null;case 24:return null;case 25:return null}throw Error(a(156,n.tag))}function oy(e,n){switch(gu(n),n.tag){case 1:return In(n.type)&&Xs(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return cn(),en(Rn),en(gn),sr(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return No(n),null;case 13:if(en(tn),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));B()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return en(tn),null;case 4:return cn(),null;case 10:return me(n.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var pc=!1,lr=!1,ly=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Al(e,n){var h=e.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){_n(e,n,y)}else h.current=null}function Oh(e,n,h){try{h()}catch(y){_n(e,n,y)}}var dm=!1;function uy(e,n){if(nt=Ns,e=Do(),Oo(e)){if("selectionStart"in e)var h={start:e.selectionStart,end:e.selectionEnd};else e:{h=(h=e.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var E=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var N=0,te=-1,ue=-1,Te=0,Ke=0,Je=e,Ve=null;t:for(;;){for(var st;Je!==h||E!==0&&Je.nodeType!==3||(te=N+E),Je!==P||y!==0&&Je.nodeType!==3||(ue=N+y),Je.nodeType===3&&(N+=Je.nodeValue.length),(st=Je.firstChild)!==null;)Ve=Je,Je=st;for(;;){if(Je===e)break t;if(Ve===h&&++Te===E&&(te=N),Ve===P&&++Ke===y&&(ue=N),(st=Je.nextSibling)!==null)break;Je=Ve,Ve=Je.parentNode}Je=st}h=te===-1||ue===-1?null:{start:te,end:ue}}else h=null}h=h||{start:0,end:0}}else h=null;for(yt={focusedElem:e,selectionRange:h},Ns=!1,ht=n;ht!==null;)if(n=ht,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ht=e;else for(;ht!==null;){n=ht;try{var dt=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var pt=dt.memoizedProps,En=dt.memoizedState,be=n.stateNode,pe=be.getSnapshotBeforeUpdate(n.elementType===n.type?pt:Gi(n.type,pt),En);be.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:var Se=n.stateNode.containerInfo;Se.nodeType===1?Se.textContent="":Se.nodeType===9&&Se.documentElement&&Se.removeChild(Se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Xe){_n(n,n.return,Xe)}if(e=n.sibling,e!==null){e.return=n.return,ht=e;break}ht=n.return}return dt=dm,dm=!1,dt}function ku(e,n,h){var y=n.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&e)===e){var P=E.destroy;E.destroy=void 0,P!==void 0&&Oh(n,h,P)}E=E.next}while(E!==y)}}function mc(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var h=n=n.next;do{if((h.tag&e)===e){var y=h.create;h.destroy=y()}h=h.next}while(h!==n)}}function Rh(e){var n=e.ref;if(n!==null){var h=e.stateNode;switch(e.tag){case 5:e=h;break;default:e=h}typeof n=="function"?n(e):n.current=e}}function fm(e){var n=e.alternate;n!==null&&(e.alternate=null,fm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[$r],delete n[vs],delete n[zi],delete n[hu],delete n[qr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pm(e){return e.tag===5||e.tag===3||e.tag===4}function mm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ih(e,n,h){var y=e.tag;if(y===5||y===6)e=e.stateNode,n?h.nodeType===8?h.parentNode.insertBefore(e,n):h.insertBefore(e,n):(h.nodeType===8?(n=h.parentNode,n.insertBefore(e,h)):(n=h,n.appendChild(e)),h=h._reactRootContainer,h!=null||n.onclick!==null||(n.onclick=Ue));else if(y!==4&&(e=e.child,e!==null))for(Ih(e,n,h),e=e.sibling;e!==null;)Ih(e,n,h),e=e.sibling}function Fh(e,n,h){var y=e.tag;if(y===5||y===6)e=e.stateNode,n?h.insertBefore(e,n):h.appendChild(e);else if(y!==4&&(e=e.child,e!==null))for(Fh(e,n,h),e=e.sibling;e!==null;)Fh(e,n,h),e=e.sibling}var er=null,Vi=!1;function $a(e,n,h){for(h=h.child;h!==null;)gm(e,n,h),h=h.sibling}function gm(e,n,h){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(As,h)}catch{}switch(h.tag){case 5:lr||Al(h,n);case 6:var y=er,E=Vi;er=null,$a(e,n,h),er=y,Vi=E,er!==null&&(Vi?(e=er,h=h.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)):er.removeChild(h.stateNode));break;case 18:er!==null&&(Vi?(e=er,h=h.stateNode,e.nodeType===8?Js(e.parentNode,h):e.nodeType===1&&Js(e,h),pr(e)):Js(er,h.stateNode));break;case 4:y=er,E=Vi,er=h.stateNode.containerInfo,Vi=!0,$a(e,n,h),er=y,Vi=E;break;case 0:case 11:case 14:case 15:if(!lr&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var P=E,N=P.destroy;P=P.tag,N!==void 0&&((P&2)!==0||(P&4)!==0)&&Oh(h,n,N),E=E.next}while(E!==y)}$a(e,n,h);break;case 1:if(!lr&&(Al(h,n),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(te){_n(h,n,te)}$a(e,n,h);break;case 21:$a(e,n,h);break;case 22:h.mode&1?(lr=(y=lr)||h.memoizedState!==null,$a(e,n,h),lr=y):$a(e,n,h);break;default:$a(e,n,h)}}function _m(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var h=e.stateNode;h===null&&(h=e.stateNode=new ly),n.forEach(function(y){var E=vy.bind(null,e,y);h.has(y)||(h.add(y),y.then(E,E))})}}function Hi(e,n){var h=n.deletions;if(h!==null)for(var y=0;y<h.length;y++){var E=h[y];try{var P=e,N=n,te=N;e:for(;te!==null;){switch(te.tag){case 5:er=te.stateNode,Vi=!1;break e;case 3:er=te.stateNode.containerInfo,Vi=!0;break e;case 4:er=te.stateNode.containerInfo,Vi=!0;break e}te=te.return}if(er===null)throw Error(a(160));gm(P,N,E),er=null,Vi=!1;var ue=E.alternate;ue!==null&&(ue.return=null),E.return=null}catch(Te){_n(E,n,Te)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)vm(n,e),n=n.sibling}function vm(e,n){var h=e.alternate,y=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hi(n,e),ks(e),y&4){try{ku(3,e,e.return),mc(3,e)}catch(pt){_n(e,e.return,pt)}try{ku(5,e,e.return)}catch(pt){_n(e,e.return,pt)}}break;case 1:Hi(n,e),ks(e),y&512&&h!==null&&Al(h,h.return);break;case 5:if(Hi(n,e),ks(e),y&512&&h!==null&&Al(h,h.return),e.flags&32){var E=e.stateNode;try{Mi(E,"")}catch(pt){_n(e,e.return,pt)}}if(y&4&&(E=e.stateNode,E!=null)){var P=e.memoizedProps,N=h!==null?h.memoizedProps:P,te=e.type,ue=e.updateQueue;if(e.updateQueue=null,ue!==null)try{te==="input"&&P.type==="radio"&&P.name!=null&&We(E,P),Yr(te,N);var Te=Yr(te,P);for(N=0;N<ue.length;N+=2){var Ke=ue[N],Je=ue[N+1];Ke==="style"?Ms(E,Je):Ke==="dangerouslySetInnerHTML"?io(E,Je):Ke==="children"?Mi(E,Je):Oe(E,Ke,Je,Te)}switch(te){case"input":Qe(E,P);break;case"textarea":il(E,P);break;case"select":var Ve=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!P.multiple;var st=P.value;st!=null?li(E,!!P.multiple,st,!1):Ve!==!!P.multiple&&(P.defaultValue!=null?li(E,!!P.multiple,P.defaultValue,!0):li(E,!!P.multiple,P.multiple?[]:"",!1))}E[vs]=P}catch(pt){_n(e,e.return,pt)}}break;case 6:if(Hi(n,e),ks(e),y&4){if(e.stateNode===null)throw Error(a(162));E=e.stateNode,P=e.memoizedProps;try{E.nodeValue=P}catch(pt){_n(e,e.return,pt)}}break;case 3:if(Hi(n,e),ks(e),y&4&&h!==null&&h.memoizedState.isDehydrated)try{pr(n.containerInfo)}catch(pt){_n(e,e.return,pt)}break;case 4:Hi(n,e),ks(e);break;case 13:Hi(n,e),ks(e),E=e.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(jh=on())),y&4&&_m(e);break;case 22:if(Ke=h!==null&&h.memoizedState!==null,e.mode&1?(lr=(Te=lr)||Ke,Hi(n,e),lr=Te):Hi(n,e),ks(e),y&8192){if(Te=e.memoizedState!==null,(e.stateNode.isHidden=Te)&&!Ke&&(e.mode&1)!==0)for(ht=e,Ke=e.child;Ke!==null;){for(Je=ht=Ke;ht!==null;){switch(Ve=ht,st=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:ku(4,Ve,Ve.return);break;case 1:Al(Ve,Ve.return);var dt=Ve.stateNode;if(typeof dt.componentWillUnmount=="function"){y=Ve,h=Ve.return;try{n=y,dt.props=n.memoizedProps,dt.state=n.memoizedState,dt.componentWillUnmount()}catch(pt){_n(y,h,pt)}}break;case 5:Al(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){xm(Je);continue}}st!==null?(st.return=Ve,ht=st):xm(Je)}Ke=Ke.sibling}e:for(Ke=null,Je=e;;){if(Je.tag===5){if(Ke===null){Ke=Je;try{E=Je.stateNode,Te?(P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(te=Je.stateNode,ue=Je.memoizedProps.style,N=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,te.style.display=so("display",N))}catch(pt){_n(e,e.return,pt)}}}else if(Je.tag===6){if(Ke===null)try{Je.stateNode.nodeValue=Te?"":Je.memoizedProps}catch(pt){_n(e,e.return,pt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===e)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===e)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===e)break e;Ke===Je&&(Ke=null),Je=Je.return}Ke===Je&&(Ke=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:Hi(n,e),ks(e),y&4&&_m(e);break;case 21:break;default:Hi(n,e),ks(e)}}function ks(e){var n=e.flags;if(n&2){try{e:{for(var h=e.return;h!==null;){if(pm(h)){var y=h;break e}h=h.return}throw Error(a(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(Mi(E,""),y.flags&=-33);var P=mm(e);Fh(e,P,E);break;case 3:case 4:var N=y.stateNode.containerInfo,te=mm(e);Ih(e,te,N);break;default:throw Error(a(161))}}catch(ue){_n(e,e.return,ue)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function cy(e,n,h){ht=e,ym(e)}function ym(e,n,h){for(var y=(e.mode&1)!==0;ht!==null;){var E=ht,P=E.child;if(E.tag===22&&y){var N=E.memoizedState!==null||pc;if(!N){var te=E.alternate,ue=te!==null&&te.memoizedState!==null||lr;te=pc;var Te=lr;if(pc=N,(lr=ue)&&!Te)for(ht=E;ht!==null;)N=ht,ue=N.child,N.tag===22&&N.memoizedState!==null?km(E):ue!==null?(ue.return=N,ht=ue):km(E);for(;P!==null;)ht=P,ym(P),P=P.sibling;ht=E,pc=te,lr=Te}wm(e)}else(E.subtreeFlags&8772)!==0&&P!==null?(P.return=E,ht=P):wm(e)}}function wm(e){for(;ht!==null;){var n=ht;if((n.flags&8772)!==0){var h=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:lr||mc(5,n);break;case 1:var y=n.stateNode;if(n.flags&4&&!lr)if(h===null)y.componentDidMount();else{var E=n.elementType===n.type?h.memoizedProps:Gi(n.type,h.memoizedProps);y.componentDidUpdate(E,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=n.updateQueue;P!==null&&it(n,P,y);break;case 3:var N=n.updateQueue;if(N!==null){if(h=null,n.child!==null)switch(n.child.tag){case 5:h=n.child.stateNode;break;case 1:h=n.child.stateNode}it(n,N,h)}break;case 5:var te=n.stateNode;if(h===null&&n.flags&4){h=te;var ue=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&h.focus();break;case"img":ue.src&&(h.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Te=n.alternate;if(Te!==null){var Ke=Te.memoizedState;if(Ke!==null){var Je=Ke.dehydrated;Je!==null&&pr(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}lr||n.flags&512&&Rh(n)}catch(Ve){_n(n,n.return,Ve)}}if(n===e){ht=null;break}if(h=n.sibling,h!==null){h.return=n.return,ht=h;break}ht=n.return}}function xm(e){for(;ht!==null;){var n=ht;if(n===e){ht=null;break}var h=n.sibling;if(h!==null){h.return=n.return,ht=h;break}ht=n.return}}function km(e){for(;ht!==null;){var n=ht;try{switch(n.tag){case 0:case 11:case 15:var h=n.return;try{mc(4,n)}catch(ue){_n(n,h,ue)}break;case 1:var y=n.stateNode;if(typeof y.componentDidMount=="function"){var E=n.return;try{y.componentDidMount()}catch(ue){_n(n,E,ue)}}var P=n.return;try{Rh(n)}catch(ue){_n(n,P,ue)}break;case 5:var N=n.return;try{Rh(n)}catch(ue){_n(n,N,ue)}}}catch(ue){_n(n,n.return,ue)}if(n===e){ht=null;break}var te=n.sibling;if(te!==null){te.return=n.return,ht=te;break}ht=n.return}}var hy=Math.ceil,gc=ye.ReactCurrentDispatcher,Nh=ye.ReactCurrentOwner,Ci=ye.ReactCurrentBatchConfig,Vt=0,Wn=null,Tn=null,tr=0,ai=0,Dl=Ui(0),zn=0,Lu=null,jo=0,_c=0,zh=0,Cu=null,Hr=null,jh=0,Ol=1/0,na=null,vc=!1,Uh=null,qa=null,yc=!1,Ga=null,wc=0,bu=0,$h=null,xc=-1,kc=0;function br(){return(Vt&6)!==0?on():xc!==-1?xc:xc=on()}function Va(e){return(e.mode&1)===0?1:(Vt&2)!==0&&tr!==0?tr&-tr:I.transition!==null?(kc===0&&(kc=pl()),kc):(e=jt,e!==0||(e=window.event,e=e===void 0?16:It(e.type)),e)}function Zi(e,n,h,y){if(50<bu)throw bu=0,$h=null,Error(a(185));dr(e,h,y),((Vt&2)===0||e!==Wn)&&(e===Wn&&((Vt&2)===0&&(_c|=h),zn===4&&Ha(e,tr)),Zr(e,y),h===1&&Vt===0&&(n.mode&1)===0&&(Ol=on()+500,Sl&&ws()))}function Zr(e,n){var h=e.callbackNode;_a(e,n);var y=Xt(e,e===Wn?tr:0);if(y===0)h!==null&&Ts(h),e.callbackNode=null,e.callbackPriority=0;else if(n=y&-y,e.callbackPriority!==n){if(h!=null&&Ts(h),n===1)e.tag===0?mh(Cm.bind(null,e)):mu(Cm.bind(null,e)),nn(function(){(Vt&6)===0&&ws()}),h=null;else{switch(as(y)){case 1:h=_o;break;case 4:h=fl;break;case 16:h=ga;break;case 536870912:h=ns;break;default:h=ga}h=Am(h,Lm.bind(null,e))}e.callbackPriority=n,e.callbackNode=h}}function Lm(e,n){if(xc=-1,kc=0,(Vt&6)!==0)throw Error(a(327));var h=e.callbackNode;if(Rl()&&e.callbackNode!==h)return null;var y=Xt(e,e===Wn?tr:0);if(y===0)return null;if((y&30)!==0||(y&e.expiredLanes)!==0||n)n=Lc(e,y);else{n=y;var E=Vt;Vt|=2;var P=Em();(Wn!==e||tr!==n)&&(na=null,Ol=on()+500,$o(e,n));do try{py();break}catch(te){bm(e,te)}while(!0);oe(),gc.current=P,Vt=E,Tn!==null?n=0:(Wn=null,tr=0,n=zn)}if(n!==0){if(n===2&&(E=qn(e),E!==0&&(y=E,n=qh(e,E))),n===1)throw h=Lu,$o(e,0),Ha(e,y),Zr(e,on()),h;if(n===6)Ha(e,y);else{if(E=e.current.alternate,(y&30)===0&&!dy(E)&&(n=Lc(e,y),n===2&&(P=qn(e),P!==0&&(y=P,n=qh(e,P))),n===1))throw h=Lu,$o(e,0),Ha(e,y),Zr(e,on()),h;switch(e.finishedWork=E,e.finishedLanes=y,n){case 0:case 1:throw Error(a(345));case 2:qo(e,Hr,na);break;case 3:if(Ha(e,y),(y&130023424)===y&&(n=jh+500-on(),10<n)){if(Xt(e,0)!==0)break;if(E=e.suspendedLanes,(E&y)!==y){br(),e.pingedLanes|=e.suspendedLanes&E;break}e.timeoutHandle=Cn(qo.bind(null,e,Hr,na),n);break}qo(e,Hr,na);break;case 4:if(Ha(e,y),(y&4194240)===y)break;for(n=e.eventTimes,E=-1;0<y;){var N=31-Tt(y);P=1<<N,N=n[N],N>E&&(E=N),y&=~P}if(y=E,y=on()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*hy(y/1960))-y,10<y){e.timeoutHandle=Cn(qo.bind(null,e,Hr,na),y);break}qo(e,Hr,na);break;case 5:qo(e,Hr,na);break;default:throw Error(a(329))}}}return Zr(e,on()),e.callbackNode===h?Lm.bind(null,e):null}function qh(e,n){var h=Cu;return e.current.memoizedState.isDehydrated&&($o(e,n).flags|=256),e=Lc(e,n),e!==2&&(n=Hr,Hr=h,n!==null&&Gh(n)),e}function Gh(e){Hr===null?Hr=e:Hr.push.apply(Hr,e)}function dy(e){for(var n=e;;){if(n.flags&16384){var h=n.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var E=h[y],P=E.getSnapshot;E=E.value;try{if(!ir(P(),E))return!1}catch{return!1}}}if(h=n.child,n.subtreeFlags&16384&&h!==null)h.return=n,n=h;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ha(e,n){for(n&=~zh,n&=~_c,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var h=31-Tt(n),y=1<<h;e[h]=-1,n&=~y}}function Cm(e){if((Vt&6)!==0)throw Error(a(327));Rl();var n=Xt(e,0);if((n&1)===0)return Zr(e,on()),null;var h=Lc(e,n);if(e.tag!==0&&h===2){var y=qn(e);y!==0&&(n=y,h=qh(e,y))}if(h===1)throw h=Lu,$o(e,0),Ha(e,n),Zr(e,on()),h;if(h===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,qo(e,Hr,na),Zr(e,on()),null}function Vh(e,n){var h=Vt;Vt|=1;try{return e(n)}finally{Vt=h,Vt===0&&(Ol=on()+500,Sl&&ws())}}function Uo(e){Ga!==null&&Ga.tag===0&&(Vt&6)===0&&Rl();var n=Vt;Vt|=1;var h=Ci.transition,y=jt;try{if(Ci.transition=null,jt=1,e)return e()}finally{jt=y,Ci.transition=h,Vt=n,(Vt&6)===0&&ws()}}function Hh(){ai=Dl.current,en(Dl)}function $o(e,n){e.finishedWork=null,e.finishedLanes=0;var h=e.timeoutHandle;if(h!==-1&&(e.timeoutHandle=-1,mn(h)),Tn!==null)for(h=Tn.return;h!==null;){var y=h;switch(gu(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Xs();break;case 3:cn(),en(Rn),en(gn),sr();break;case 5:No(y);break;case 4:cn();break;case 13:en(tn);break;case 19:en(tn);break;case 10:me(y.type._context);break;case 22:case 23:Hh()}h=h.return}if(Wn=e,Tn=e=Za(e.current,null),tr=ai=n,zn=0,Lu=null,zh=_c=jo=0,Hr=Cu=null,R!==null){for(n=0;n<R.length;n++)if(h=R[n],y=h.interleaved,y!==null){h.interleaved=null;var E=y.next,P=h.pending;if(P!==null){var N=P.next;P.next=E,y.next=N}h.pending=y}R=null}return e}function bm(e,n){do{var h=Tn;try{if(oe(),Bn.current=cc,oc){for(var y=hn.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}oc=!1}if(zo=0,Zn=Nn=hn=null,_u=!1,vu=0,Nh.current=null,h===null||h.return===null){zn=1,Lu=n,Tn=null;break}e:{var P=e,N=h.return,te=h,ue=n;if(n=tr,te.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Te=ue,Ke=te,Je=Ke.tag;if((Ke.mode&1)===0&&(Je===0||Je===11||Je===15)){var Ve=Ke.alternate;Ve?(Ke.updateQueue=Ve.updateQueue,Ke.memoizedState=Ve.memoizedState,Ke.lanes=Ve.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}var st=Jp(N);if(st!==null){st.flags&=-257,Yp(st,N,te,P,n),st.mode&1&&Kp(P,Te,n),n=st,ue=Te;var dt=n.updateQueue;if(dt===null){var pt=new Set;pt.add(ue),n.updateQueue=pt}else dt.add(ue);break e}else{if((n&1)===0){Kp(P,Te,n),Zh();break e}ue=Error(a(426))}}else if(rn&&te.mode&1){var En=Jp(N);if(En!==null){(En.flags&65536)===0&&(En.flags|=256),Yp(En,N,te,P,n),T(Tl(ue,te));break e}}P=ue=Tl(ue,te),zn!==4&&(zn=2),Cu===null?Cu=[P]:Cu.push(P),P=N;do{switch(P.tag){case 3:P.flags|=65536,n&=-n,P.lanes|=n;var be=Zp(P,ue,n);ke(P,be);break e;case 1:te=ue;var pe=P.type,Se=P.stateNode;if((P.flags&128)===0&&(typeof pe.getDerivedStateFromError=="function"||Se!==null&&typeof Se.componentDidCatch=="function"&&(qa===null||!qa.has(Se)))){P.flags|=65536,n&=-n,P.lanes|=n;var Xe=Wp(P,te,n);ke(P,Xe);break e}}P=P.return}while(P!==null)}Sm(h)}catch(gt){n=gt,Tn===h&&h!==null&&(Tn=h=h.return);continue}break}while(!0)}function Em(){var e=gc.current;return gc.current=cc,e===null?cc:e}function Zh(){(zn===0||zn===3||zn===2)&&(zn=4),Wn===null||(jo&268435455)===0&&(_c&268435455)===0||Ha(Wn,tr)}function Lc(e,n){var h=Vt;Vt|=2;var y=Em();(Wn!==e||tr!==n)&&(na=null,$o(e,n));do try{fy();break}catch(E){bm(e,E)}while(!0);if(oe(),Vt=h,gc.current=y,Tn!==null)throw Error(a(261));return Wn=null,tr=0,zn}function fy(){for(;Tn!==null;)Mm(Tn)}function py(){for(;Tn!==null&&!go();)Mm(Tn)}function Mm(e){var n=Tm(e.alternate,e,ai);e.memoizedProps=e.pendingProps,n===null?Sm(e):Tn=n,Nh.current=null}function Sm(e){var n=e;do{var h=n.alternate;if(e=n.return,(n.flags&32768)===0){if(h=ay(h,n,ai),h!==null){Tn=h;return}}else{if(h=oy(h,n),h!==null){h.flags&=32767,Tn=h;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zn=6,Tn=null;return}}if(n=n.sibling,n!==null){Tn=n;return}Tn=n=e}while(n!==null);zn===0&&(zn=5)}function qo(e,n,h){var y=jt,E=Ci.transition;try{Ci.transition=null,jt=1,my(e,n,h,y)}finally{Ci.transition=E,jt=y}return null}function my(e,n,h,y){do Rl();while(Ga!==null);if((Vt&6)!==0)throw Error(a(327));h=e.finishedWork;var E=e.finishedLanes;if(h===null)return null;if(e.finishedWork=null,e.finishedLanes=0,h===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var P=h.lanes|h.childLanes;if(un(e,P),e===Wn&&(Tn=Wn=null,tr=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||yc||(yc=!0,Am(ga,function(){return Rl(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=Ci.transition,Ci.transition=null;var N=jt;jt=1;var te=Vt;Vt|=4,Nh.current=null,uy(e,h),vm(h,e),Fr(yt),Ns=!!nt,yt=nt=null,e.current=h,cy(h),ma(),Vt=te,jt=N,Ci.transition=P}else e.current=h;if(yc&&(yc=!1,Ga=e,wc=E),P=e.pendingLanes,P===0&&(qa=null),ci(h.stateNode),Zr(e,on()),n!==null)for(y=e.onRecoverableError,h=0;h<n.length;h++)E=n[h],y(E.value,{componentStack:E.stack,digest:E.digest});if(vc)throw vc=!1,e=Uh,Uh=null,e;return(wc&1)!==0&&e.tag!==0&&Rl(),P=e.pendingLanes,(P&1)!==0?e===$h?bu++:(bu=0,$h=e):bu=0,ws(),null}function Rl(){if(Ga!==null){var e=as(wc),n=Ci.transition,h=jt;try{if(Ci.transition=null,jt=16>e?16:e,Ga===null)var y=!1;else{if(e=Ga,Ga=null,wc=0,(Vt&6)!==0)throw Error(a(331));var E=Vt;for(Vt|=4,ht=e.current;ht!==null;){var P=ht,N=P.child;if((ht.flags&16)!==0){var te=P.deletions;if(te!==null){for(var ue=0;ue<te.length;ue++){var Te=te[ue];for(ht=Te;ht!==null;){var Ke=ht;switch(Ke.tag){case 0:case 11:case 15:ku(8,Ke,P)}var Je=Ke.child;if(Je!==null)Je.return=Ke,ht=Je;else for(;ht!==null;){Ke=ht;var Ve=Ke.sibling,st=Ke.return;if(fm(Ke),Ke===Te){ht=null;break}if(Ve!==null){Ve.return=st,ht=Ve;break}ht=st}}}var dt=P.alternate;if(dt!==null){var pt=dt.child;if(pt!==null){dt.child=null;do{var En=pt.sibling;pt.sibling=null,pt=En}while(pt!==null)}}ht=P}}if((P.subtreeFlags&2064)!==0&&N!==null)N.return=P,ht=N;else e:for(;ht!==null;){if(P=ht,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:ku(9,P,P.return)}var be=P.sibling;if(be!==null){be.return=P.return,ht=be;break e}ht=P.return}}var pe=e.current;for(ht=pe;ht!==null;){N=ht;var Se=N.child;if((N.subtreeFlags&2064)!==0&&Se!==null)Se.return=N,ht=Se;else e:for(N=pe;ht!==null;){if(te=ht,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:mc(9,te)}}catch(gt){_n(te,te.return,gt)}if(te===N){ht=null;break e}var Xe=te.sibling;if(Xe!==null){Xe.return=te.return,ht=Xe;break e}ht=te.return}}if(Vt=E,ws(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(As,e)}catch{}y=!0}return y}finally{jt=h,Ci.transition=n}}return!1}function Pm(e,n,h){n=Tl(h,n),n=Zp(e,n,1),e=he(e,n,1),n=br(),e!==null&&(dr(e,1,n),Zr(e,n))}function _n(e,n,h){if(e.tag===3)Pm(e,e,h);else for(;n!==null;){if(n.tag===3){Pm(n,e,h);break}else if(n.tag===1){var y=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qa===null||!qa.has(y))){e=Tl(h,e),e=Wp(n,e,1),n=he(n,e,1),e=br(),n!==null&&(dr(n,1,e),Zr(n,e));break}}n=n.return}}function gy(e,n,h){var y=e.pingCache;y!==null&&y.delete(n),n=br(),e.pingedLanes|=e.suspendedLanes&h,Wn===e&&(tr&h)===h&&(zn===4||zn===3&&(tr&130023424)===tr&&500>on()-jh?$o(e,0):zh|=h),Zr(e,n)}function Bm(e,n){n===0&&((e.mode&1)===0?n=1:(n=is,is<<=1,(is&130023424)===0&&(is=4194304)));var h=br();e=$(e,n),e!==null&&(dr(e,n,h),Zr(e,h))}function _y(e){var n=e.memoizedState,h=0;n!==null&&(h=n.retryLane),Bm(e,h)}function vy(e,n){var h=0;switch(e.tag){case 13:var y=e.stateNode,E=e.memoizedState;E!==null&&(h=E.retryLane);break;case 19:y=e.stateNode;break;default:throw Error(a(314))}y!==null&&y.delete(n),Bm(e,h)}var Tm;Tm=function(e,n,h){if(e!==null)if(e.memoizedProps!==n.pendingProps||Rn.current)Vr=!0;else{if((e.lanes&h)===0&&(n.flags&128)===0)return Vr=!1,sy(e,n,h);Vr=(e.flags&131072)!==0}else Vr=!1,rn&&(n.flags&1048576)!==0&&bn(n,Bl,n.index);switch(n.lanes=0,n.tag){case 2:var y=n.type;fc(e,n),e=n.pendingProps;var E=za(n,gn.current);_e(n,h),E=_h(null,n,y,e,E,h);var P=vh();return n.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,In(y)?(P=!0,Ml(n)):P=!1,n.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Z(n),E.updater=hc,n.stateNode=E,E._reactInternals=n,Ch(n,y,e,h),n=Sh(null,n,y,!0,P,h)):(n.tag=0,rn&&P&&ki(n),Cr(null,n,E,h),n=n.child),n;case 16:y=n.elementType;e:{switch(fc(e,n),e=n.pendingProps,E=y._init,y=E(y._payload),n.type=y,E=n.tag=wy(y),e=Gi(y,e),E){case 0:n=Mh(null,n,y,e,h);break e;case 1:n=rm(null,n,y,e,h);break e;case 11:n=Xp(null,n,y,e,h);break e;case 14:n=Qp(null,n,y,Gi(y.type,e),h);break e}throw Error(a(306,y,""))}return n;case 0:return y=n.type,E=n.pendingProps,E=n.elementType===y?E:Gi(y,E),Mh(e,n,y,E,h);case 1:return y=n.type,E=n.pendingProps,E=n.elementType===y?E:Gi(y,E),rm(e,n,y,E,h);case 3:e:{if(im(n),e===null)throw Error(a(387));y=n.pendingProps,P=n.memoizedState,E=P.element,le(e,n),je(n,y,null,h);var N=n.memoizedState;if(y=N.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},n.updateQueue.baseState=P,n.memoizedState=P,n.flags&256){E=Tl(Error(a(423)),n),n=sm(e,n,y,h,E);break e}else if(y!==E){E=Tl(Error(a(424)),n),n=sm(e,n,y,h,E);break e}else for(Qn=wr(n.stateNode.containerInfo.firstChild),kr=n,rn=!0,si=null,h=Ge(n,null,y,h),n.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(B(),y===E){n=ta(e,n,h);break e}Cr(e,n,y,h)}n=n.child}return n;case 5:return Fo(n),e===null&&d(n),y=n.type,E=n.pendingProps,P=e!==null?e.memoizedProps:null,N=E.children,At(y,E)?N=null:P!==null&&At(y,P)&&(n.flags|=32),nm(e,n),Cr(e,n,N,h),n.child;case 6:return e===null&&d(n),null;case 13:return am(e,n,h);case 4:return Ht(n,n.stateNode.containerInfo),y=n.pendingProps,e===null?n.child=Me(n,null,y,h):Cr(e,n,y,h),n.child;case 11:return y=n.type,E=n.pendingProps,E=n.elementType===y?E:Gi(y,E),Xp(e,n,y,E,h);case 7:return Cr(e,n,n.pendingProps,h),n.child;case 8:return Cr(e,n,n.pendingProps.children,h),n.child;case 12:return Cr(e,n,n.pendingProps.children,h),n.child;case 10:e:{if(y=n.type._context,E=n.pendingProps,P=n.memoizedProps,N=E.value,Qt(et,y._currentValue),y._currentValue=N,P!==null)if(ir(P.value,N)){if(P.children===E.children&&!Rn.current){n=ta(e,n,h);break e}}else for(P=n.child,P!==null&&(P.return=n);P!==null;){var te=P.dependencies;if(te!==null){N=P.child;for(var ue=te.firstContext;ue!==null;){if(ue.context===y){if(P.tag===1){ue=ae(-1,h&-h),ue.tag=2;var Te=P.updateQueue;if(Te!==null){Te=Te.shared;var Ke=Te.pending;Ke===null?ue.next=ue:(ue.next=Ke.next,Ke.next=ue),Te.pending=ue}}P.lanes|=h,ue=P.alternate,ue!==null&&(ue.lanes|=h),Pe(P.return,h,n),te.lanes|=h;break}ue=ue.next}}else if(P.tag===10)N=P.type===n.type?null:P.child;else if(P.tag===18){if(N=P.return,N===null)throw Error(a(341));N.lanes|=h,te=N.alternate,te!==null&&(te.lanes|=h),Pe(N,h,n),N=P.sibling}else N=P.child;if(N!==null)N.return=P;else for(N=P;N!==null;){if(N===n){N=null;break}if(P=N.sibling,P!==null){P.return=N.return,N=P;break}N=N.return}P=N}Cr(e,n,E.children,h),n=n.child}return n;case 9:return E=n.type,y=n.pendingProps.children,_e(n,h),E=Le(E),y=y(E),n.flags|=1,Cr(e,n,y,h),n.child;case 14:return y=n.type,E=Gi(y,n.pendingProps),E=Gi(y.type,E),Qp(e,n,y,E,h);case 15:return em(e,n,n.type,n.pendingProps,h);case 17:return y=n.type,E=n.pendingProps,E=n.elementType===y?E:Gi(y,E),fc(e,n),n.tag=1,In(y)?(e=!0,Ml(n)):e=!1,_e(n,h),Vp(n,y,E),Ch(n,y,E,h),Sh(null,n,y,!0,e,h);case 19:return lm(e,n,h);case 22:return tm(e,n,h)}throw Error(a(156,n.tag))};function Am(e,n){return dl(e,n)}function yy(e,n,h,y){this.tag=e,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(e,n,h,y){return new yy(e,n,h,y)}function Wh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wy(e){if(typeof e=="function")return Wh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wt)return 11;if(e===vn)return 14}return 2}function Za(e,n){var h=e.alternate;return h===null?(h=bi(e.tag,n,e.key,e.mode),h.elementType=e.elementType,h.type=e.type,h.stateNode=e.stateNode,h.alternate=e,e.alternate=h):(h.pendingProps=n,h.type=e.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=e.flags&14680064,h.childLanes=e.childLanes,h.lanes=e.lanes,h.child=e.child,h.memoizedProps=e.memoizedProps,h.memoizedState=e.memoizedState,h.updateQueue=e.updateQueue,n=e.dependencies,h.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},h.sibling=e.sibling,h.index=e.index,h.ref=e.ref,h}function Cc(e,n,h,y,E,P){var N=2;if(y=e,typeof e=="function")Wh(e)&&(N=1);else if(typeof e=="string")N=5;else e:switch(e){case He:return Go(h.children,E,P,n);case _t:N=8,E|=8;break;case X:return e=bi(12,h,n,E|2),e.elementType=X,e.lanes=P,e;case Ct:return e=bi(13,h,n,E),e.elementType=Ct,e.lanes=P,e;case Jt:return e=bi(19,h,n,E),e.elementType=Jt,e.lanes=P,e;case zt:return bc(h,E,P,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tt:N=10;break e;case lt:N=9;break e;case wt:N=11;break e;case vn:N=14;break e;case Ft:N=16,y=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return n=bi(N,h,n,E),n.elementType=e,n.type=y,n.lanes=P,n}function Go(e,n,h,y){return e=bi(7,e,y,n),e.lanes=h,e}function bc(e,n,h,y){return e=bi(22,e,y,n),e.elementType=zt,e.lanes=h,e.stateNode={isHidden:!1},e}function Kh(e,n,h){return e=bi(6,e,null,n),e.lanes=h,e}function Jh(e,n,h){return n=bi(4,e.children!==null?e.children:[],e.key,n),n.lanes=h,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function xy(e,n,h,y,E){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ss(0),this.expirationTimes=ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Yh(e,n,h,y,E,P,N,te,ue){return e=new xy(e,n,h,te,ue),n===1?(n=1,P===!0&&(n|=8)):n=0,P=bi(3,null,null,n),e.current=P,P.stateNode=e,P.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z(P),e}function ky(e,n,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:De,key:y==null?null:""+y,children:e,containerInfo:n,implementation:h}}function Dm(e){if(!e)return ys;e=e._reactInternals;e:{if(ui(e)!==e||e.tag!==1)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(In(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(a(171))}if(e.tag===1){var h=e.type;if(In(h))return sc(e,h,n)}return n}function Om(e,n,h,y,E,P,N,te,ue){return e=Yh(h,y,!0,e,E,P,N,te,ue),e.context=Dm(null),h=e.current,y=br(),E=Va(h),P=ae(y,E),P.callback=n??null,he(h,P,E),e.current.lanes=E,dr(e,E,y),Zr(e,y),e}function Ec(e,n,h,y){var E=n.current,P=br(),N=Va(E);return h=Dm(h),n.context===null?n.context=h:n.pendingContext=h,n=ae(P,N),n.payload={element:e},y=y===void 0?null:y,y!==null&&(n.callback=y),e=he(E,n,N),e!==null&&(Zi(e,E,N,P),we(e,E,N)),N}function Mc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var h=e.retryLane;e.retryLane=h!==0&&h<n?h:n}}function Xh(e,n){Rm(e,n),(e=e.alternate)&&Rm(e,n)}function Ly(){return null}var Im=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qh(e){this._internalRoot=e}Sc.prototype.render=Qh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));Ec(e,n,null,null)},Sc.prototype.unmount=Qh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Uo(function(){Ec(null,e,null,null)}),n[Gt]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var n=wa();e={blockedOn:null,target:e,priority:n};for(var h=0;h<yn.length&&n!==0&&n<yn[h].priority;h++);yn.splice(h,0,e),h===0&&ei(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function Cy(e,n,h,y,E){if(E){if(typeof y=="function"){var P=y;y=function(){var Te=Mc(N);P.call(Te)}}var N=Om(n,y,e,0,null,!1,!1,"",Fm);return e._reactRootContainer=N,e[Gt]=N.current,Ln(e.nodeType===8?e.parentNode:e),Uo(),N}for(;E=e.lastChild;)e.removeChild(E);if(typeof y=="function"){var te=y;y=function(){var Te=Mc(ue);te.call(Te)}}var ue=Yh(e,0,!1,null,null,!1,!1,"",Fm);return e._reactRootContainer=ue,e[Gt]=ue.current,Ln(e.nodeType===8?e.parentNode:e),Uo(function(){Ec(n,ue,h,y)}),ue}function Bc(e,n,h,y,E){var P=h._reactRootContainer;if(P){var N=P;if(typeof E=="function"){var te=E;E=function(){var ue=Mc(N);te.call(ue)}}Ec(n,N,e,E)}else N=Cy(h,n,e,E,y);return Mc(N)}va=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var h=Et(n.pendingLanes);h!==0&&(Xr(n,h|1),Zr(n,on()),(Vt&6)===0&&(Ol=on()+500,ws()))}break;case 13:Uo(function(){var y=$(e,1);if(y!==null){var E=br();Zi(y,e,1,E)}}),Xh(e,1)}},hi=function(e){if(e.tag===13){var n=$(e,134217728);if(n!==null){var h=br();Zi(n,e,134217728,h)}Xh(e,134217728)}},ya=function(e){if(e.tag===13){var n=Va(e),h=$(e,n);if(h!==null){var y=br();Zi(h,e,n,y)}Xh(e,n)}},wa=function(){return jt},Os=function(e,n){var h=jt;try{return jt=e,n()}finally{jt=h}},Ss=function(e,n,h){switch(n){case"input":if(Qe(e,h),n=h.name,h.type==="radio"&&n!=null){for(h=e;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<h.length;n++){var y=h[n];if(y!==e&&y.form===e.form){var E=Fa(y);if(!E)throw Error(a(90));ze(y),Qe(y,E)}}}break;case"textarea":il(e,h);break;case"select":n=h.value,n!=null&&li(e,!!h.multiple,n,!1)}},uo=Vh,ll=Uo;var by={usingClientEntryPoint:!1,Events:[Gr,yi,Fa,ol,lo,Vh]},Eu={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ey={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cl(e),e===null?null:e.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||Ly,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{As=Tc.inject(Ey),hr=Tc}catch{}}return Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=by,Wr.createPortal=function(e,n){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(n))throw Error(a(200));return ky(e,n,null,h)},Wr.createRoot=function(e,n){if(!ed(e))throw Error(a(299));var h=!1,y="",E=Im;return n!=null&&(n.unstable_strictMode===!0&&(h=!0),n.identifierPrefix!==void 0&&(y=n.identifierPrefix),n.onRecoverableError!==void 0&&(E=n.onRecoverableError)),n=Yh(e,1,!1,null,null,h,!1,y,E),e[Gt]=n.current,Ln(e.nodeType===8?e.parentNode:e),new Qh(n)},Wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=cl(n),e=e===null?null:e.stateNode,e},Wr.flushSync=function(e){return Uo(e)},Wr.hydrate=function(e,n,h){if(!Pc(n))throw Error(a(200));return Bc(null,e,n,!0,h)},Wr.hydrateRoot=function(e,n,h){if(!ed(e))throw Error(a(405));var y=h!=null&&h.hydratedSources||null,E=!1,P="",N=Im;if(h!=null&&(h.unstable_strictMode===!0&&(E=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),n=Om(n,null,e,1,h??null,E,!1,P,N),e[Gt]=n.current,Ln(e),y)for(e=0;e<y.length;e++)h=y[e],E=h._getVersion,E=E(h._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[h,E]:n.mutableSourceEagerHydrationData.push(h,E);return new Sc(n)},Wr.render=function(e,n,h){if(!Pc(n))throw Error(a(200));return Bc(null,e,n,!1,h)},Wr.unmountComponentAtNode=function(e){if(!Pc(e))throw Error(a(40));return e._reactRootContainer?(Uo(function(){Bc(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1},Wr.unstable_batchedUpdates=Vh,Wr.unstable_renderSubtreeIntoContainer=function(e,n,h,y){if(!Pc(h))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Bc(e,n,h,!1,y)},Wr.version="18.3.1-next-f1338f8080-20240426",Wr}var Vm;function Pg(){if(Vm)return rd.exports;Vm=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(s){console.error(s)}}return u(),rd.exports=Dy(),rd.exports}var Hm;function Oy(){if(Hm)return Dc;Hm=1;var u=Pg();return Dc.createRoot=u.createRoot,Dc.hydrateRoot=u.hydrateRoot,Dc}var Ry=Oy();const Iy=Qc(Ry),Fy="modulepreload",Ny=function(u){return"/pudumaps/"+u},Zm={},Yu=function(s,a,c){let f=Promise.resolve();if(a&&a.length>0){let S=function(D){return Promise.all(D.map(F=>Promise.resolve(F).then(H=>({status:"fulfilled",value:H}),H=>({status:"rejected",reason:H}))))};var _=S;document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),k=x?.nonce||x?.getAttribute("nonce");f=S(a.map(D=>{if(D=Ny(D),D in Zm)return;Zm[D]=!0;const F=D.endsWith(".css"),H=F?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${D}"]${H}`))return;const J=document.createElement("link");if(J.rel=F?"stylesheet":Fy,F||(J.as="script"),J.crossOrigin="",J.href=D,k&&J.setAttribute("nonce",k),document.head.appendChild(J),F)return new Promise((Q,W)=>{J.addEventListener("load",Q),J.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${D}`)))})}))}function p(x){const k=new Event("vite:preloadError",{cancelable:!0});if(k.payload=x,window.dispatchEvent(k),!k.defaultPrevented)throw x}return f.then(x=>{for(const k of x||[])k.status==="rejected"&&p(k.reason);return s().catch(p)})},zy=u=>{let s;return u?s=u:typeof fetch>"u"?s=(...a)=>Yu(async()=>{const{default:c}=await Promise.resolve().then(()=>Ql);return{default:c}},[]).then(({default:c})=>c(...a)):s=fetch,(...a)=>s(...a)};class Lf extends Error{constructor(s,a="FunctionsError",c){super(s),this.name=a,this.context=c}}class jy extends Lf{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class Wm extends Lf{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class Km extends Lf{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var tf;(function(u){u.Any="any",u.ApNortheast1="ap-northeast-1",u.ApNortheast2="ap-northeast-2",u.ApSouth1="ap-south-1",u.ApSoutheast1="ap-southeast-1",u.ApSoutheast2="ap-southeast-2",u.CaCentral1="ca-central-1",u.EuCentral1="eu-central-1",u.EuWest1="eu-west-1",u.EuWest2="eu-west-2",u.EuWest3="eu-west-3",u.SaEast1="sa-east-1",u.UsEast1="us-east-1",u.UsWest1="us-west-1",u.UsWest2="us-west-2"})(tf||(tf={}));var Uy=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};class $y{constructor(s,{headers:a={},customFetch:c,region:f=tf.Any}={}){this.url=s,this.headers=a,this.region=f,this.fetch=zy(c)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,a={}){var c;return Uy(this,void 0,void 0,function*(){try{const{headers:f,method:p,body:_}=a;let x={},{region:k}=a;k||(k=this.region);const S=new URL(`${this.url}/${s}`);k&&k!=="any"&&(x["x-region"]=k,S.searchParams.set("forceFunctionRegion",k));let D;_&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)&&(typeof Blob<"u"&&_ instanceof Blob||_ instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",D=_):typeof _=="string"?(x["Content-Type"]="text/plain",D=_):typeof FormData<"u"&&_ instanceof FormData?D=_:(x["Content-Type"]="application/json",D=JSON.stringify(_)));const F=yield this.fetch(S.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:D}).catch(W=>{throw new jy(W)}),H=F.headers.get("x-relay-error");if(H&&H==="true")throw new Wm(F);if(!F.ok)throw new Km(F);let J=((c=F.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),Q;return J==="application/json"?Q=yield F.json():J==="application/octet-stream"?Q=yield F.blob():J==="text/event-stream"?Q=F:J==="multipart/form-data"?Q=yield F.formData():Q=yield F.text(),{data:Q,error:null,response:F}}catch(f){return{data:null,error:f,response:f instanceof Km||f instanceof Wm?f.context:void 0}}})}}var Jn={},Il={},Fl={},Nl={},zl={},jl={},qy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Jl=qy();const Gy=Jl.fetch,Bg=Jl.fetch.bind(Jl),Tg=Jl.Headers,Vy=Jl.Request,Hy=Jl.Response,Ql=Object.freeze(Object.defineProperty({__proto__:null,Headers:Tg,Request:Vy,Response:Hy,default:Bg,fetch:Gy},Symbol.toStringTag,{value:"Module"})),Zy=xf(Ql);var Oc={},Jm;function Ag(){if(Jm)return Oc;Jm=1,Object.defineProperty(Oc,"__esModule",{value:!0});class u extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return Oc.default=u,Oc}var Ym;function Dg(){if(Ym)return jl;Ym=1;var u=jl&&jl.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(jl,"__esModule",{value:!0});const s=u(Zy),a=u(Ag());class c{constructor(p){this.shouldThrowOnError=!1,this.method=p.method,this.url=p.url,this.headers=p.headers,this.schema=p.schema,this.body=p.body,this.shouldThrowOnError=p.shouldThrowOnError,this.signal=p.signal,this.isMaybeSingle=p.isMaybeSingle,p.fetch?this.fetch=p.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(p,_){return this.headers=Object.assign({},this.headers),this.headers[p]=_,this}then(p,_){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const x=this.fetch;let k=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async S=>{var D,F,H;let J=null,Q=null,W=null,Y=S.status,ve=S.statusText;if(S.ok){if(this.method!=="HEAD"){const Ee=await S.text();Ee===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?Q=Ee:Q=JSON.parse(Ee))}const Oe=(D=this.headers.Prefer)===null||D===void 0?void 0:D.match(/count=(exact|planned|estimated)/),ye=(F=S.headers.get("content-range"))===null||F===void 0?void 0:F.split("/");Oe&&ye&&ye.length>1&&(W=parseInt(ye[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(Q)&&(Q.length>1?(J={code:"PGRST116",details:`Results contain ${Q.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},Q=null,W=null,Y=406,ve="Not Acceptable"):Q.length===1?Q=Q[0]:Q=null)}else{const Oe=await S.text();try{J=JSON.parse(Oe),Array.isArray(J)&&S.status===404&&(Q=[],J=null,Y=200,ve="OK")}catch{S.status===404&&Oe===""?(Y=204,ve="No Content"):J={message:Oe}}if(J&&this.isMaybeSingle&&(!((H=J?.details)===null||H===void 0)&&H.includes("0 rows"))&&(J=null,Y=200,ve="OK"),J&&this.shouldThrowOnError)throw new a.default(J)}return{error:J,data:Q,count:W,status:Y,statusText:ve}});return this.shouldThrowOnError||(k=k.catch(S=>{var D,F,H;return{error:{message:`${(D=S?.name)!==null&&D!==void 0?D:"FetchError"}: ${S?.message}`,details:`${(F=S?.stack)!==null&&F!==void 0?F:""}`,hint:"",code:`${(H=S?.code)!==null&&H!==void 0?H:""}`},data:null,count:null,status:0,statusText:""}})),k.then(p,_)}returns(){return this}overrideTypes(){return this}}return jl.default=c,jl}var Xm;function Og(){if(Xm)return zl;Xm=1;var u=zl&&zl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(zl,"__esModule",{value:!0});const s=u(Dg());class a extends s.default{select(f){let p=!1;const _=(f??"*").split("").map(x=>/\s/.test(x)&&!p?"":(x==='"'&&(p=!p),x)).join("");return this.url.searchParams.set("select",_),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(f,{ascending:p=!0,nullsFirst:_,foreignTable:x,referencedTable:k=x}={}){const S=k?`${k}.order`:"order",D=this.url.searchParams.get(S);return this.url.searchParams.set(S,`${D?`${D},`:""}${f}.${p?"asc":"desc"}${_===void 0?"":_?".nullsfirst":".nullslast"}`),this}limit(f,{foreignTable:p,referencedTable:_=p}={}){const x=typeof _>"u"?"limit":`${_}.limit`;return this.url.searchParams.set(x,`${f}`),this}range(f,p,{foreignTable:_,referencedTable:x=_}={}){const k=typeof x>"u"?"offset":`${x}.offset`,S=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(k,`${f}`),this.url.searchParams.set(S,`${p-f+1}`),this}abortSignal(f){return this.signal=f,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:f=!1,verbose:p=!1,settings:_=!1,buffers:x=!1,wal:k=!1,format:S="text"}={}){var D;const F=[f?"analyze":null,p?"verbose":null,_?"settings":null,x?"buffers":null,k?"wal":null].filter(Boolean).join("|"),H=(D=this.headers.Accept)!==null&&D!==void 0?D:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${S}; for="${H}"; options=${F};`,S==="json"?this:this}rollback(){var f;return((f=this.headers.Prefer)!==null&&f!==void 0?f:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return zl.default=a,zl}var Qm;function Cf(){if(Qm)return Nl;Qm=1;var u=Nl&&Nl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Nl,"__esModule",{value:!0});const s=u(Og());class a extends s.default{eq(f,p){return this.url.searchParams.append(f,`eq.${p}`),this}neq(f,p){return this.url.searchParams.append(f,`neq.${p}`),this}gt(f,p){return this.url.searchParams.append(f,`gt.${p}`),this}gte(f,p){return this.url.searchParams.append(f,`gte.${p}`),this}lt(f,p){return this.url.searchParams.append(f,`lt.${p}`),this}lte(f,p){return this.url.searchParams.append(f,`lte.${p}`),this}like(f,p){return this.url.searchParams.append(f,`like.${p}`),this}likeAllOf(f,p){return this.url.searchParams.append(f,`like(all).{${p.join(",")}}`),this}likeAnyOf(f,p){return this.url.searchParams.append(f,`like(any).{${p.join(",")}}`),this}ilike(f,p){return this.url.searchParams.append(f,`ilike.${p}`),this}ilikeAllOf(f,p){return this.url.searchParams.append(f,`ilike(all).{${p.join(",")}}`),this}ilikeAnyOf(f,p){return this.url.searchParams.append(f,`ilike(any).{${p.join(",")}}`),this}is(f,p){return this.url.searchParams.append(f,`is.${p}`),this}in(f,p){const _=Array.from(new Set(p)).map(x=>typeof x=="string"&&new RegExp("[,()]").test(x)?`"${x}"`:`${x}`).join(",");return this.url.searchParams.append(f,`in.(${_})`),this}contains(f,p){return typeof p=="string"?this.url.searchParams.append(f,`cs.${p}`):Array.isArray(p)?this.url.searchParams.append(f,`cs.{${p.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(p)}`),this}containedBy(f,p){return typeof p=="string"?this.url.searchParams.append(f,`cd.${p}`):Array.isArray(p)?this.url.searchParams.append(f,`cd.{${p.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(p)}`),this}rangeGt(f,p){return this.url.searchParams.append(f,`sr.${p}`),this}rangeGte(f,p){return this.url.searchParams.append(f,`nxl.${p}`),this}rangeLt(f,p){return this.url.searchParams.append(f,`sl.${p}`),this}rangeLte(f,p){return this.url.searchParams.append(f,`nxr.${p}`),this}rangeAdjacent(f,p){return this.url.searchParams.append(f,`adj.${p}`),this}overlaps(f,p){return typeof p=="string"?this.url.searchParams.append(f,`ov.${p}`):this.url.searchParams.append(f,`ov.{${p.join(",")}}`),this}textSearch(f,p,{config:_,type:x}={}){let k="";x==="plain"?k="pl":x==="phrase"?k="ph":x==="websearch"&&(k="w");const S=_===void 0?"":`(${_})`;return this.url.searchParams.append(f,`${k}fts${S}.${p}`),this}match(f){return Object.entries(f).forEach(([p,_])=>{this.url.searchParams.append(p,`eq.${_}`)}),this}not(f,p,_){return this.url.searchParams.append(f,`not.${p}.${_}`),this}or(f,{foreignTable:p,referencedTable:_=p}={}){const x=_?`${_}.or`:"or";return this.url.searchParams.append(x,`(${f})`),this}filter(f,p,_){return this.url.searchParams.append(f,`${p}.${_}`),this}}return Nl.default=a,Nl}var e0;function Rg(){if(e0)return Fl;e0=1;var u=Fl&&Fl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Fl,"__esModule",{value:!0});const s=u(Cf());class a{constructor(f,{headers:p={},schema:_,fetch:x}){this.url=f,this.headers=p,this.schema=_,this.fetch=x}select(f,{head:p=!1,count:_}={}){const x=p?"HEAD":"GET";let k=!1;const S=(f??"*").split("").map(D=>/\s/.test(D)&&!k?"":(D==='"'&&(k=!k),D)).join("");return this.url.searchParams.set("select",S),_&&(this.headers.Prefer=`count=${_}`),new s.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(f,{count:p,defaultToNull:_=!0}={}){const x="POST",k=[];if(this.headers.Prefer&&k.push(this.headers.Prefer),p&&k.push(`count=${p}`),_||k.push("missing=default"),this.headers.Prefer=k.join(","),Array.isArray(f)){const S=f.reduce((D,F)=>D.concat(Object.keys(F)),[]);if(S.length>0){const D=[...new Set(S)].map(F=>`"${F}"`);this.url.searchParams.set("columns",D.join(","))}}return new s.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}upsert(f,{onConflict:p,ignoreDuplicates:_=!1,count:x,defaultToNull:k=!0}={}){const S="POST",D=[`resolution=${_?"ignore":"merge"}-duplicates`];if(p!==void 0&&this.url.searchParams.set("on_conflict",p),this.headers.Prefer&&D.push(this.headers.Prefer),x&&D.push(`count=${x}`),k||D.push("missing=default"),this.headers.Prefer=D.join(","),Array.isArray(f)){const F=f.reduce((H,J)=>H.concat(Object.keys(J)),[]);if(F.length>0){const H=[...new Set(F)].map(J=>`"${J}"`);this.url.searchParams.set("columns",H.join(","))}}return new s.default({method:S,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}update(f,{count:p}={}){const _="PATCH",x=[];return this.headers.Prefer&&x.push(this.headers.Prefer),p&&x.push(`count=${p}`),this.headers.Prefer=x.join(","),new s.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}delete({count:f}={}){const p="DELETE",_=[];return f&&_.push(`count=${f}`),this.headers.Prefer&&_.unshift(this.headers.Prefer),this.headers.Prefer=_.join(","),new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Fl.default=a,Fl}var Su={},Pu={},t0;function Wy(){return t0||(t0=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.version=void 0,Pu.version="0.0.0-automated"),Pu}var n0;function Ky(){if(n0)return Su;n0=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.DEFAULT_HEADERS=void 0;const u=Wy();return Su.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${u.version}`},Su}var r0;function Jy(){if(r0)return Il;r0=1;var u=Il&&Il.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Il,"__esModule",{value:!0});const s=u(Rg()),a=u(Cf()),c=Ky();class f{constructor(_,{headers:x={},schema:k,fetch:S}={}){this.url=_,this.headers=Object.assign(Object.assign({},c.DEFAULT_HEADERS),x),this.schemaName=k,this.fetch=S}from(_){const x=new URL(`${this.url}/${_}`);return new s.default(x,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(_){return new f(this.url,{headers:this.headers,schema:_,fetch:this.fetch})}rpc(_,x={},{head:k=!1,get:S=!1,count:D}={}){let F;const H=new URL(`${this.url}/rpc/${_}`);let J;k||S?(F=k?"HEAD":"GET",Object.entries(x).filter(([W,Y])=>Y!==void 0).map(([W,Y])=>[W,Array.isArray(Y)?`{${Y.join(",")}}`:`${Y}`]).forEach(([W,Y])=>{H.searchParams.append(W,Y)})):(F="POST",J=x);const Q=Object.assign({},this.headers);return D&&(Q.Prefer=`count=${D}`),new a.default({method:F,url:H,headers:Q,schema:this.schemaName,body:J,fetch:this.fetch,allowEmpty:!1})}}return Il.default=f,Il}var i0;function Yy(){if(i0)return Jn;i0=1;var u=Jn&&Jn.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PostgrestError=Jn.PostgrestBuilder=Jn.PostgrestTransformBuilder=Jn.PostgrestFilterBuilder=Jn.PostgrestQueryBuilder=Jn.PostgrestClient=void 0;const s=u(Jy());Jn.PostgrestClient=s.default;const a=u(Rg());Jn.PostgrestQueryBuilder=a.default;const c=u(Cf());Jn.PostgrestFilterBuilder=c.default;const f=u(Og());Jn.PostgrestTransformBuilder=f.default;const p=u(Dg());Jn.PostgrestBuilder=p.default;const _=u(Ag());return Jn.PostgrestError=_.default,Jn.default={PostgrestClient:s.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:f.default,PostgrestBuilder:p.default,PostgrestError:_.default},Jn}var Xy=Yy();const Qy=Qc(Xy),{PostgrestClient:ew,PostgrestQueryBuilder:rL,PostgrestFilterBuilder:iL,PostgrestTransformBuilder:sL,PostgrestBuilder:aL,PostgrestError:oL}=Qy;class tw{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const a=parseInt(process.versions.node.split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let a=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(a+=`

Suggested solution: ${s.workaround}`),new Error(a)}static createWebSocket(s,a){const c=this.getWebSocketConstructor();return new c(s,a)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const nw="2.15.1",rw=`realtime-js/${nw}`,iw="1.0.0",nf=1e4,sw=1e3,aw=100;var Nu;(function(u){u[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed"})(Nu||(Nu={}));var jn;(function(u){u.closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving"})(jn||(jn={}));var Ki;(function(u){u.close="phx_close",u.error="phx_error",u.join="phx_join",u.reply="phx_reply",u.leave="phx_leave",u.access_token="access_token"})(Ki||(Ki={}));var rf;(function(u){u.websocket="websocket"})(rf||(rf={}));var Wo;(function(u){u.Connecting="connecting",u.Open="open",u.Closing="closing",u.Closed="closed"})(Wo||(Wo={}));class ow{constructor(){this.HEADER_LENGTH=1}decode(s,a){return s.constructor===ArrayBuffer?a(this._binaryDecode(s)):a(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const a=new DataView(s),c=new TextDecoder;return this._decodeBroadcast(s,a,c)}_decodeBroadcast(s,a,c){const f=a.getUint8(1),p=a.getUint8(2);let _=this.HEADER_LENGTH+2;const x=c.decode(s.slice(_,_+f));_=_+f;const k=c.decode(s.slice(_,_+p));_=_+p;const S=JSON.parse(c.decode(s.slice(_,s.byteLength)));return{ref:null,topic:x,event:k,payload:S}}}class Ig{constructor(s,a){this.callback=s,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var an;(function(u){u.abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange"})(an||(an={}));const s0=(u,s,a={})=>{var c;const f=(c=a.skipTypes)!==null&&c!==void 0?c:[];return Object.keys(s).reduce((p,_)=>(p[_]=lw(_,u,s,f),p),{})},lw=(u,s,a,c)=>{const f=s.find(x=>x.name===u),p=f?.type,_=a[u];return p&&!c.includes(p)?Fg(p,_):sf(_)},Fg=(u,s)=>{if(u.charAt(0)==="_"){const a=u.slice(1,u.length);return dw(s,a)}switch(u){case an.bool:return uw(s);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return cw(s);case an.json:case an.jsonb:return hw(s);case an.timestamp:return fw(s);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return sf(s);default:return sf(s)}},sf=u=>u,uw=u=>{switch(u){case"t":return!0;case"f":return!1;default:return u}},cw=u=>{if(typeof u=="string"){const s=parseFloat(u);if(!Number.isNaN(s))return s}return u},hw=u=>{if(typeof u=="string")try{return JSON.parse(u)}catch(s){return console.log(`JSON parse error: ${s}`),u}return u},dw=(u,s)=>{if(typeof u!="string")return u;const a=u.length-1,c=u[a];if(u[0]==="{"&&c==="}"){let p;const _=u.slice(1,a);try{p=JSON.parse("["+_+"]")}catch{p=_?_.split(","):[]}return p.map(x=>Fg(s,x))}return u},fw=u=>typeof u=="string"?u.replace(" ","T"):u,Ng=u=>{let s=u;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class ad{constructor(s,a,c={},f=nf){this.channel=s,this.event=a,this.payload=c,this.timeout=f,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,a){var c;return this._hasReceived(s)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:s,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:a}){this.recHooks.filter(c=>c.status===s).forEach(c=>c.callback(a))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var a0;(function(u){u.SYNC="sync",u.JOIN="join",u.LEAVE="leave"})(a0||(a0={}));class zu{constructor(s,a){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},f=>{const{onJoin:p,onLeave:_,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zu.syncState(this.state,f,p,_),this.pendingDiffs.forEach(k=>{this.state=zu.syncDiff(this.state,k,p,_)}),this.pendingDiffs=[],x()}),this.channel._on(c.diff,{},f=>{const{onJoin:p,onLeave:_,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(f):(this.state=zu.syncDiff(this.state,f,p,_),x())}),this.onJoin((f,p,_)=>{this.channel._trigger("presence",{event:"join",key:f,currentPresences:p,newPresences:_})}),this.onLeave((f,p,_)=>{this.channel._trigger("presence",{event:"leave",key:f,currentPresences:p,leftPresences:_})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,a,c,f){const p=this.cloneDeep(s),_=this.transformState(a),x={},k={};return this.map(p,(S,D)=>{_[S]||(k[S]=D)}),this.map(_,(S,D)=>{const F=p[S];if(F){const H=D.map(Y=>Y.presence_ref),J=F.map(Y=>Y.presence_ref),Q=D.filter(Y=>J.indexOf(Y.presence_ref)<0),W=F.filter(Y=>H.indexOf(Y.presence_ref)<0);Q.length>0&&(x[S]=Q),W.length>0&&(k[S]=W)}else x[S]=D}),this.syncDiff(p,{joins:x,leaves:k},c,f)}static syncDiff(s,a,c,f){const{joins:p,leaves:_}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),f||(f=()=>{}),this.map(p,(x,k)=>{var S;const D=(S=s[x])!==null&&S!==void 0?S:[];if(s[x]=this.cloneDeep(k),D.length>0){const F=s[x].map(J=>J.presence_ref),H=D.filter(J=>F.indexOf(J.presence_ref)<0);s[x].unshift(...H)}c(x,D,k)}),this.map(_,(x,k)=>{let S=s[x];if(!S)return;const D=k.map(F=>F.presence_ref);S=S.filter(F=>D.indexOf(F.presence_ref)<0),s[x]=S,f(x,S,k),S.length===0&&delete s[x]}),s}static map(s,a){return Object.getOwnPropertyNames(s).map(c=>a(c,s[c]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((a,c)=>{const f=s[c];return"metas"in f?a[c]=f.metas.map(p=>(p.presence_ref=p.phx_ref,delete p.phx_ref,delete p.phx_ref_prev,p)):a[c]=f,a},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var o0;(function(u){u.ALL="*",u.INSERT="INSERT",u.UPDATE="UPDATE",u.DELETE="DELETE"})(o0||(o0={}));var ju;(function(u){u.BROADCAST="broadcast",u.PRESENCE="presence",u.POSTGRES_CHANGES="postgres_changes",u.SYSTEM="system"})(ju||(ju={}));var ia;(function(u){u.SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR"})(ia||(ia={}));class bf{constructor(s,a={config:{}},c){this.topic=s,this.params=a,this.socket=c,this.bindings={},this.state=jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new ad(this,Ki.join,this.params,this.timeout),this.rejoinTimer=new Ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jn.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ki.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new zu(this),this.broadcastEndpointURL=Ng(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,a=this.timeout){var c,f;if(this.socket.isConnected()||this.socket.connect(),this.state==jn.closed){const{config:{broadcast:p,presence:_,private:x}}=this.params,k=(f=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(H=>H.filter))!==null&&f!==void 0?f:[],S=!!this.bindings[ju.PRESENCE]&&this.bindings[ju.PRESENCE].length>0,D={},F={broadcast:p,presence:Object.assign(Object.assign({},_),{enabled:S}),postgres_changes:k,private:x};this.socket.accessTokenValue&&(D.access_token=this.socket.accessTokenValue),this._onError(H=>s?.(ia.CHANNEL_ERROR,H)),this._onClose(()=>s?.(ia.CLOSED)),this.updateJoinPayload(Object.assign({config:F},D)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:H})=>{var J;if(this.socket.setAuth(),H===void 0){s?.(ia.SUBSCRIBED);return}else{const Q=this.bindings.postgres_changes,W=(J=Q?.length)!==null&&J!==void 0?J:0,Y=[];for(let ve=0;ve<W;ve++){const $e=Q[ve],{filter:{event:Oe,schema:ye,table:Ee,filter:De}}=$e,He=H&&H[ve];if(He&&He.event===Oe&&He.schema===ye&&He.table===Ee&&He.filter===De)Y.push(Object.assign(Object.assign({},$e),{id:He.id}));else{this.unsubscribe(),this.state=jn.errored,s?.(ia.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Y,s&&s(ia.SUBSCRIBED);return}}).receive("error",H=>{this.state=jn.errored,s?.(ia.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(H).join(", ")||"error")))}).receive("timeout",()=>{s?.(ia.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,a={}){return await this.send({type:"presence",event:"track",payload:s},a.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,a,c){return this.state===jn.joined&&s===ju.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,a,c)}async send(s,a={}){var c,f;if(!this._canPush()&&s.type==="broadcast"){const{event:p,payload:_}=s,k={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:p,payload:_,private:this.private}]})};try{const S=await this._fetchWithTimeout(this.broadcastEndpointURL,k,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((f=S.body)===null||f===void 0?void 0:f.cancel()),S.ok?"ok":"error"}catch(S){return S.name==="AbortError"?"timed out":"error"}}else return new Promise(p=>{var _,x,k;const S=this._push(s.type,s,a.timeout||this.timeout);s.type==="broadcast"&&!(!((k=(x=(_=this.params)===null||_===void 0?void 0:_.config)===null||x===void 0?void 0:x.broadcast)===null||k===void 0)&&k.ack)&&p("ok"),S.receive("ok",()=>p("ok")),S.receive("error",()=>p("error")),S.receive("timeout",()=>p("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=jn.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ki.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(f=>{c=new ad(this,Ki.leave,{},s),c.receive("ok",()=>{a(),f("ok")}).receive("timeout",()=>{a(),f("timed out")}).receive("error",()=>{f("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jn.closed,this.bindings={}}async _fetchWithTimeout(s,a,c){const f=new AbortController,p=setTimeout(()=>f.abort(),c),_=await this.socket.fetch(s,Object.assign(Object.assign({},a),{signal:f.signal}));return clearTimeout(p),_}_push(s,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let f=new ad(this,s,a,c);return this._canPush()?f.send():this._addToPushBuffer(f),f}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>aw){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(s,a,c){return a}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,a,c){var f,p;const _=s.toLocaleLowerCase(),{close:x,error:k,leave:S,join:D}=Ki;if(c&&[x,k,S,D].indexOf(_)>=0&&c!==this._joinRef())return;let H=this._onMessage(_,a,c);if(a&&!H)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(_)?(f=this.bindings.postgres_changes)===null||f===void 0||f.filter(J=>{var Q,W,Y;return((Q=J.filter)===null||Q===void 0?void 0:Q.event)==="*"||((Y=(W=J.filter)===null||W===void 0?void 0:W.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===_}).map(J=>J.callback(H,c)):(p=this.bindings[_])===null||p===void 0||p.filter(J=>{var Q,W,Y,ve,$e,Oe;if(["broadcast","presence","postgres_changes"].includes(_))if("id"in J){const ye=J.id,Ee=(Q=J.filter)===null||Q===void 0?void 0:Q.event;return ye&&((W=a.ids)===null||W===void 0?void 0:W.includes(ye))&&(Ee==="*"||Ee?.toLocaleLowerCase()===((Y=a.data)===null||Y===void 0?void 0:Y.type.toLocaleLowerCase()))}else{const ye=($e=(ve=J?.filter)===null||ve===void 0?void 0:ve.event)===null||$e===void 0?void 0:$e.toLocaleLowerCase();return ye==="*"||ye===((Oe=a?.event)===null||Oe===void 0?void 0:Oe.toLocaleLowerCase())}else return J.type.toLocaleLowerCase()===_}).map(J=>{if(typeof H=="object"&&"ids"in H){const Q=H.data,{schema:W,table:Y,commit_timestamp:ve,type:$e,errors:Oe}=Q;H=Object.assign(Object.assign({},{schema:W,table:Y,commit_timestamp:ve,eventType:$e,new:{},old:{},errors:Oe}),this._getPayloadRecords(Q))}J.callback(H,c)})}_isClosed(){return this.state===jn.closed}_isJoined(){return this.state===jn.joined}_isJoining(){return this.state===jn.joining}_isLeaving(){return this.state===jn.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,a,c){const f=s.toLocaleLowerCase(),p={type:f,filter:a,callback:c};return this.bindings[f]?this.bindings[f].push(p):this.bindings[f]=[p],this}_off(s,a){const c=s.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(f=>{var p;return!(((p=f.type)===null||p===void 0?void 0:p.toLocaleLowerCase())===c&&bf.isEqual(f.filter,a))})),this}static isEqual(s,a){if(Object.keys(s).length!==Object.keys(a).length)return!1;for(const c in s)if(s[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Ki.close,{},s)}_onError(s){this._on(Ki.error,{},a=>s(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jn.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const a={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(a.new=s0(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(a.old=s0(s.columns,s.old_record)),a}}const l0=()=>{},Rc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pw=[1e3,2e3,5e3,1e4],mw=1e4,gw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _w{constructor(s,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nf,this.transport=null,this.heartbeatIntervalMs=Rc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=l0,this.ref=0,this.reconnectTimer=null,this.logger=l0,this.conn=null,this.sendBuffer=[],this.serializer=new ow,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=f=>{let p;return f?p=f:typeof fetch>"u"?p=(..._)=>Yu(async()=>{const{default:x}=await Promise.resolve().then(()=>Ql);return{default:x}},void 0).then(({default:x})=>x(..._)).catch(x=>{throw new Error(`Failed to load @supabase/node-fetch: ${x.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):p=fetch,(..._)=>p(..._)},!(!((c=a?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${s}/${rf.websocket}`,this.httpEndpoint=Ng(s),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tw.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const a=s.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iw}))}disconnect(s,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},s?this.conn.close(s,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const a=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const s=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,a,c){this.logger(s,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Nu.connecting:return Wo.Connecting;case Nu.open:return Wo.Open;case Nu.closing:return Wo.Closing;default:return Wo.Closed}}isConnected(){return this.connectionState()===Wo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,a={config:{}}){const c=`realtime:${s}`,f=this.getChannels().find(p=>p.topic===c);if(f)return f;{const p=new bf(`realtime:${s}`,a,this);return this.channels.push(p),p}}push(s){const{topic:a,event:c,payload:f,ref:p}=s,_=()=>{this.encode(s,x=>{var k;(k=this.conn)===null||k===void 0||k.send(x)})};this.log("push",`${a} ${c} (${p})`,f),this.isConnected()?_():this.sendBuffer.push(_)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(sw,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Rc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let a=this.channels.find(c=>c.topic===s&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${s}"`),a.unsubscribe())}_remove(s){this.channels=this.channels.filter(a=>a.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,a=>{a.topic==="phoenix"&&a.event==="phx_reply"&&this.heartbeatCallback(a.payload.status==="ok"?"ok":"error"),a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:f,payload:p,ref:_}=a,x=_?`(${_})`:"",k=p.status||"";this.log("receive",`${k} ${c} ${f} ${x}`.trim(),p),this.channels.filter(S=>S._isMember(c)).forEach(S=>S._trigger(f,p,_)),this._triggerStateCallbacks("message",a)})}_clearTimer(s){var a;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var a;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Ki.error))}_appendParams(s,a){if(Object.keys(a).length===0)return s;const c=s.match(/\?/)?"&":"?",f=new URLSearchParams(a);return`${s}${c}${f}`}_workerObjectUrl(s){let a;if(s)a=s;else{const c=new Blob([gw],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(s,a=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(s=null){let a;s?a=s:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const f={access_token:a,version:rw};a&&c.updateJoinPayload(f),c.joinedOnce&&c._isJoined()&&c._push(Ki.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${s}`,a)})}_triggerStateCallbacks(s,a){try{this.stateChangeCallbacks[s].forEach(c=>{try{c(a)}catch(f){this.log("error",`error in ${s} callback`,f)}})}catch(c){this.log("error",`error triggering ${s} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new Ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var a,c,f,p,_,x,k,S;if(this.transport=(a=s?.transport)!==null&&a!==void 0?a:null,this.timeout=(c=s?.timeout)!==null&&c!==void 0?c:nf,this.heartbeatIntervalMs=(f=s?.heartbeatIntervalMs)!==null&&f!==void 0?f:Rc.HEARTBEAT_INTERVAL,this.worker=(p=s?.worker)!==null&&p!==void 0?p:!1,this.accessToken=(_=s?.accessToken)!==null&&_!==void 0?_:null,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=s?.reconnectAfterMs)!==null&&x!==void 0?x:(D=>pw[D-1]||mw),this.encode=(k=s?.encode)!==null&&k!==void 0?k:((D,F)=>F(JSON.stringify(D))),this.decode=(S=s?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class Ef extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Un(u){return typeof u=="object"&&u!==null&&"__isStorageError"in u}class vw extends Ef{constructor(s,a,c){super(s),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class af extends Ef{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}}var yw=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};const zg=u=>{let s;return u?s=u:typeof fetch>"u"?s=(...a)=>Yu(async()=>{const{default:c}=await Promise.resolve().then(()=>Ql);return{default:c}},void 0).then(({default:c})=>c(...a)):s=fetch,(...a)=>s(...a)},ww=()=>yw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yu(()=>Promise.resolve().then(()=>Ql),void 0)).Response:Response}),of=u=>{if(Array.isArray(u))return u.map(a=>of(a));if(typeof u=="function"||u!==Object(u))return u;const s={};return Object.entries(u).forEach(([a,c])=>{const f=a.replace(/([-_][a-z])/gi,p=>p.toUpperCase().replace(/[-_]/g,""));s[f]=of(c)}),s},xw=u=>{if(typeof u!="object"||u===null)return!1;const s=Object.getPrototypeOf(u);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)};var Yo=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};const od=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),kw=(u,s,a)=>Yo(void 0,void 0,void 0,function*(){const c=yield ww();u instanceof c&&!a?.noResolveJson?u.json().then(f=>{const p=u.status||500,_=f?.statusCode||p+"";s(new vw(od(f),p,_))}).catch(f=>{s(new af(od(f),f))}):s(new af(od(u),u))}),Lw=(u,s,a,c)=>{const f={method:u,headers:s?.headers||{}};return u==="GET"||!c?f:(xw(c)?(f.headers=Object.assign({"Content-Type":"application/json"},s?.headers),f.body=JSON.stringify(c)):f.body=c,s?.duplex&&(f.duplex=s.duplex),Object.assign(Object.assign({},f),a))};function Xu(u,s,a,c,f,p){return Yo(this,void 0,void 0,function*(){return new Promise((_,x)=>{u(a,Lw(s,c,f,p)).then(k=>{if(!k.ok)throw k;return c?.noResolveJson?k:k.json()}).then(k=>_(k)).catch(k=>kw(k,x,c))})})}function Vc(u,s,a,c){return Yo(this,void 0,void 0,function*(){return Xu(u,"GET",s,a,c)})}function Ls(u,s,a,c,f){return Yo(this,void 0,void 0,function*(){return Xu(u,"POST",s,c,f,a)})}function lf(u,s,a,c,f){return Yo(this,void 0,void 0,function*(){return Xu(u,"PUT",s,c,f,a)})}function Cw(u,s,a,c){return Yo(this,void 0,void 0,function*(){return Xu(u,"HEAD",s,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function jg(u,s,a,c,f){return Yo(this,void 0,void 0,function*(){return Xu(u,"DELETE",s,c,f,a)})}var Er=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};const bw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},u0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ew{constructor(s,a={},c,f){this.url=s,this.headers=a,this.bucketId=c,this.fetch=zg(f)}uploadOrUpdate(s,a,c,f){return Er(this,void 0,void 0,function*(){try{let p;const _=Object.assign(Object.assign({},u0),f);let x=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(_.upsert)});const k=_.metadata;typeof Blob<"u"&&c instanceof Blob?(p=new FormData,p.append("cacheControl",_.cacheControl),k&&p.append("metadata",this.encodeMetadata(k)),p.append("",c)):typeof FormData<"u"&&c instanceof FormData?(p=c,p.append("cacheControl",_.cacheControl),k&&p.append("metadata",this.encodeMetadata(k))):(p=c,x["cache-control"]=`max-age=${_.cacheControl}`,x["content-type"]=_.contentType,k&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(k)))),f?.headers&&(x=Object.assign(Object.assign({},x),f.headers));const S=this._removeEmptyFolders(a),D=this._getFinalPath(S),F=yield(s=="PUT"?lf:Ls)(this.fetch,`${this.url}/object/${D}`,p,Object.assign({headers:x},_?.duplex?{duplex:_.duplex}:{}));return{data:{path:S,id:F.Id,fullPath:F.Key},error:null}}catch(p){if(Un(p))return{data:null,error:p};throw p}})}upload(s,a,c){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,a,c)})}uploadToSignedUrl(s,a,c,f){return Er(this,void 0,void 0,function*(){const p=this._removeEmptyFolders(s),_=this._getFinalPath(p),x=new URL(this.url+`/object/upload/sign/${_}`);x.searchParams.set("token",a);try{let k;const S=Object.assign({upsert:u0.upsert},f),D=Object.assign(Object.assign({},this.headers),{"x-upsert":String(S.upsert)});typeof Blob<"u"&&c instanceof Blob?(k=new FormData,k.append("cacheControl",S.cacheControl),k.append("",c)):typeof FormData<"u"&&c instanceof FormData?(k=c,k.append("cacheControl",S.cacheControl)):(k=c,D["cache-control"]=`max-age=${S.cacheControl}`,D["content-type"]=S.contentType);const F=yield lf(this.fetch,x.toString(),k,{headers:D});return{data:{path:p,fullPath:F.Key},error:null}}catch(k){if(Un(k))return{data:null,error:k};throw k}})}createSignedUploadUrl(s,a){return Er(this,void 0,void 0,function*(){try{let c=this._getFinalPath(s);const f=Object.assign({},this.headers);a?.upsert&&(f["x-upsert"]="true");const p=yield Ls(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:f}),_=new URL(this.url+p.url),x=_.searchParams.get("token");if(!x)throw new Ef("No token returned by API");return{data:{signedUrl:_.toString(),path:s,token:x},error:null}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}update(s,a,c){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,a,c)})}move(s,a,c){return Er(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers}),error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}copy(s,a,c){return Er(this,void 0,void 0,function*(){try{return{data:{path:(yield Ls(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}createSignedUrl(s,a,c){return Er(this,void 0,void 0,function*(){try{let f=this._getFinalPath(s),p=yield Ls(this.fetch,`${this.url}/object/sign/${f}`,Object.assign({expiresIn:a},c?.transform?{transform:c.transform}:{}),{headers:this.headers});const _=c?.download?`&download=${c.download===!0?"":c.download}`:"";return p={signedUrl:encodeURI(`${this.url}${p.signedURL}${_}`)},{data:p,error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}createSignedUrls(s,a,c){return Er(this,void 0,void 0,function*(){try{const f=yield Ls(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:s},{headers:this.headers}),p=c?.download?`&download=${c.download===!0?"":c.download}`:"";return{data:f.map(_=>Object.assign(Object.assign({},_),{signedUrl:_.signedURL?encodeURI(`${this.url}${_.signedURL}${p}`):null})),error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}download(s,a){return Er(this,void 0,void 0,function*(){const f=typeof a?.transform<"u"?"render/image/authenticated":"object",p=this.transformOptsToQueryString(a?.transform||{}),_=p?`?${p}`:"";try{const x=this._getFinalPath(s);return{data:yield(yield Vc(this.fetch,`${this.url}/${f}/${x}${_}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(x){if(Un(x))return{data:null,error:x};throw x}})}info(s){return Er(this,void 0,void 0,function*(){const a=this._getFinalPath(s);try{const c=yield Vc(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:of(c),error:null}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}exists(s){return Er(this,void 0,void 0,function*(){const a=this._getFinalPath(s);try{return yield Cw(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(Un(c)&&c instanceof af){const f=c.originalError;if([400,404].includes(f?.status))return{data:!1,error:c}}throw c}})}getPublicUrl(s,a){const c=this._getFinalPath(s),f=[],p=a?.download?`download=${a.download===!0?"":a.download}`:"";p!==""&&f.push(p);const x=typeof a?.transform<"u"?"render/image":"object",k=this.transformOptsToQueryString(a?.transform||{});k!==""&&f.push(k);let S=f.join("&");return S!==""&&(S=`?${S}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${c}${S}`)}}}remove(s){return Er(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}list(s,a,c){return Er(this,void 0,void 0,function*(){try{const f=Object.assign(Object.assign(Object.assign({},bw),a),{prefix:s||""});return{data:yield Ls(this.fetch,`${this.url}/object/list/${this.bucketId}`,f,{headers:this.headers},c),error:null}}catch(f){if(Un(f))return{data:null,error:f};throw f}})}listV2(s,a){return Er(this,void 0,void 0,function*(){try{const c=Object.assign({},s);return{data:yield Ls(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}}const Mw="2.11.0",Sw={"X-Client-Info":`storage-js/${Mw}`};var Ul=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};class Pw{constructor(s,a={},c,f){const p=new URL(s);f?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase.")),this.url=p.href,this.headers=Object.assign(Object.assign({},Sw),a),this.fetch=zg(c)}listBuckets(){return Ul(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(Un(s))return{data:null,error:s};throw s}})}getBucket(s){return Ul(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}createBucket(s,a={public:!1}){return Ul(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}updateBucket(s,a){return Ul(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(Un(c))return{data:null,error:c};throw c}})}emptyBucket(s){return Ul(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}deleteBucket(s){return Ul(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(a){if(Un(a))return{data:null,error:a};throw a}})}}class Bw extends Pw{constructor(s,a={},c,f){super(s,a,c,f)}from(s){return new Ew(this.url,this.headers,s,this.fetch)}}const Tw="2.55.0";let Au="";typeof Deno<"u"?Au="deno":typeof document<"u"?Au="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Au="react-native":Au="node";const Aw={"X-Client-Info":`supabase-js-${Au}/${Tw}`},Dw={headers:Aw},Ow={schema:"public"},Rw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Iw={};var Fw=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};const Nw=u=>{let s;return u?s=u:typeof fetch>"u"?s=Bg:s=fetch,(...a)=>s(...a)},zw=()=>typeof Headers>"u"?Tg:Headers,jw=(u,s,a)=>{const c=Nw(a),f=zw();return(p,_)=>Fw(void 0,void 0,void 0,function*(){var x;const k=(x=yield s())!==null&&x!==void 0?x:u;let S=new f(_?.headers);return S.has("apikey")||S.set("apikey",u),S.has("Authorization")||S.set("Authorization",`Bearer ${k}`),c(p,Object.assign(Object.assign({},_),{headers:S}))})};var Uw=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};function $w(u){return u.endsWith("/")?u:u+"/"}function qw(u,s){var a,c;const{db:f,auth:p,realtime:_,global:x}=u,{db:k,auth:S,realtime:D,global:F}=s,H={db:Object.assign(Object.assign({},k),f),auth:Object.assign(Object.assign({},S),p),realtime:Object.assign(Object.assign({},D),_),storage:{},global:Object.assign(Object.assign(Object.assign({},F),x),{headers:Object.assign(Object.assign({},(a=F?.headers)!==null&&a!==void 0?a:{}),(c=x?.headers)!==null&&c!==void 0?c:{})}),accessToken:()=>Uw(this,void 0,void 0,function*(){return""})};return u.accessToken?H.accessToken=u.accessToken:delete H.accessToken,H}const Ug="2.71.1",Hl=30*1e3,uf=3,ld=uf*Hl,Gw="http://localhost:9999",Vw="supabase.auth.token",Hw={"X-Client-Info":`gotrue-js/${Ug}`},cf="X-Supabase-Api-Version",$g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ww=600*1e3;class Mf extends Error{constructor(s,a,c){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function Ot(u){return typeof u=="object"&&u!==null&&"__isAuthError"in u}class Kw extends Mf{constructor(s,a,c){super(s,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function Jw(u){return Ot(u)&&u.name==="AuthApiError"}class qg extends Mf{constructor(s,a){super(s),this.name="AuthUnknownError",this.originalError=a}}class Qa extends Mf{constructor(s,a,c,f){super(s,c,f),this.name=a,this.status=c}}class Ja extends Qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yw(u){return Ot(u)&&u.name==="AuthSessionMissingError"}class Ic extends Qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fc extends Qa{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Nc extends Qa{constructor(s,a=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xw(u){return Ot(u)&&u.name==="AuthImplicitGrantRedirectError"}class c0 extends Qa{constructor(s,a=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hf extends Qa{constructor(s,a){super(s,"AuthRetryableFetchError",a,void 0)}}function ud(u){return Ot(u)&&u.name==="AuthRetryableFetchError"}class h0 extends Qa{constructor(s,a,c){super(s,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class df extends Qa{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),d0=` 	
\r=`.split(""),Qw=(()=>{const u=new Array(128);for(let s=0;s<u.length;s+=1)u[s]=-1;for(let s=0;s<d0.length;s+=1)u[d0[s].charCodeAt(0)]=-2;for(let s=0;s<Hc.length;s+=1)u[Hc[s].charCodeAt(0)]=s;return u})();function f0(u,s,a){if(u!==null)for(s.queue=s.queue<<8|u,s.queuedBits+=8;s.queuedBits>=6;){const c=s.queue>>s.queuedBits-6&63;a(Hc[c]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const c=s.queue>>s.queuedBits-6&63;a(Hc[c]),s.queuedBits-=6}}function Gg(u,s,a){const c=Qw[u];if(c>-1)for(s.queue=s.queue<<6|c,s.queuedBits+=6;s.queuedBits>=8;)a(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(u)}"`)}}function p0(u){const s=[],a=_=>{s.push(String.fromCodePoint(_))},c={utf8seq:0,codepoint:0},f={queue:0,queuedBits:0},p=_=>{n1(_,c,a)};for(let _=0;_<u.length;_+=1)Gg(u.charCodeAt(_),f,p);return s.join("")}function e1(u,s){if(u<=127){s(u);return}else if(u<=2047){s(192|u>>6),s(128|u&63);return}else if(u<=65535){s(224|u>>12),s(128|u>>6&63),s(128|u&63);return}else if(u<=1114111){s(240|u>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|u&63);return}throw new Error(`Unrecognized Unicode codepoint: ${u.toString(16)}`)}function t1(u,s){for(let a=0;a<u.length;a+=1){let c=u.charCodeAt(a);if(c>55295&&c<=56319){const f=(c-55296)*1024&65535;c=(u.charCodeAt(a+1)-56320&65535|f)+65536,a+=1}e1(c,s)}}function n1(u,s,a){if(s.utf8seq===0){if(u<=127){a(u);return}for(let c=1;c<6;c+=1)if((u>>7-c&1)===0){s.utf8seq=c;break}if(s.utf8seq===2)s.codepoint=u&31;else if(s.utf8seq===3)s.codepoint=u&15;else if(s.utf8seq===4)s.codepoint=u&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(u<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|u&63,s.utf8seq-=1,s.utf8seq===0&&a(s.codepoint)}}function r1(u){const s=[],a={queue:0,queuedBits:0},c=f=>{s.push(f)};for(let f=0;f<u.length;f+=1)Gg(u.charCodeAt(f),a,c);return new Uint8Array(s)}function i1(u){const s=[];return t1(u,a=>s.push(a)),new Uint8Array(s)}function s1(u){const s=[],a={queue:0,queuedBits:0},c=f=>{s.push(f)};return u.forEach(f=>f0(f,a,c)),f0(null,a,c),s.join("")}function a1(u){return Math.round(Date.now()/1e3)+u}function o1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){const s=Math.random()*16|0;return(u=="x"?s:s&3|8).toString(16)})}const Wi=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},Vg=()=>{if(!Wi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;const u=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(u,u),globalThis.localStorage.removeItem(u),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function l1(u){const s={},a=new URL(u);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((f,p)=>{s[p]=f})}catch{}return a.searchParams.forEach((c,f)=>{s[f]=c}),s}const Hg=u=>{let s;return u?s=u:typeof fetch>"u"?s=(...a)=>Yu(async()=>{const{default:c}=await Promise.resolve().then(()=>Ql);return{default:c}},void 0).then(({default:c})=>c(...a)):s=fetch,(...a)=>s(...a)},u1=u=>typeof u=="object"&&u!==null&&"status"in u&&"ok"in u&&"json"in u&&typeof u.json=="function",Zl=async(u,s,a)=>{await u.setItem(s,JSON.stringify(a))},Ho=async(u,s)=>{const a=await u.getItem(s);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Ka=async(u,s)=>{await u.removeItem(s)};class eh{constructor(){this.promise=new eh.promiseConstructor((s,a)=>{this.resolve=s,this.reject=a})}}eh.promiseConstructor=Promise;function cd(u){const s=u.split(".");if(s.length!==3)throw new df("Invalid JWT structure");for(let c=0;c<s.length;c++)if(!Zw.test(s[c]))throw new df("JWT not in base64url format");return{header:JSON.parse(p0(s[0])),payload:JSON.parse(p0(s[1])),signature:r1(s[2]),raw:{header:s[0],payload:s[1]}}}async function c1(u){return await new Promise(s=>{setTimeout(()=>s(null),u)})}function h1(u,s){return new Promise((c,f)=>{(async()=>{for(let p=0;p<1/0;p++)try{const _=await u(p);if(!s(p,null,_)){c(_);return}}catch(_){if(!s(p,_)){f(_);return}}})()})}function d1(u){return("0"+u.toString(16)).substr(-2)}function f1(){const s=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let f="";for(let p=0;p<56;p++)f+=a.charAt(Math.floor(Math.random()*c));return f}return crypto.getRandomValues(s),Array.from(s,d1).join("")}async function p1(u){const a=new TextEncoder().encode(u),c=await crypto.subtle.digest("SHA-256",a),f=new Uint8Array(c);return Array.from(f).map(p=>String.fromCharCode(p)).join("")}async function m1(u){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),u;const a=await p1(u);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $l(u,s,a=!1){const c=f1();let f=c;a&&(f+="/PASSWORD_RECOVERY"),await Zl(u,`${s}-code-verifier`,f);const p=await m1(c);return[p,c===p?"plain":"s256"]}const g1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _1(u){const s=u.headers.get(cf);if(!s||!s.match(g1))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function v1(u){if(!u)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(u<=s)throw new Error("JWT has expired")}function y1(u){switch(u){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ql(u){if(!w1.test(u))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hd(){const u={};return new Proxy(u,{get:(s,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function m0(u){return JSON.parse(JSON.stringify(u))}var x1=function(u,s){var a={};for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&s.indexOf(c)<0&&(a[c]=u[c]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(u);f<c.length;f++)s.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(u,c[f])&&(a[c[f]]=u[c[f]]);return a};const Zo=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),k1=[502,503,504];async function g0(u){var s;if(!u1(u))throw new hf(Zo(u),0);if(k1.includes(u.status))throw new hf(Zo(u),u.status);let a;try{a=await u.json()}catch(p){throw new qg(Zo(p),p)}let c;const f=_1(u);if(f&&f.getTime()>=$g["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new h0(Zo(a),u.status,((s=a.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(c==="session_not_found")throw new Ja}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((p,_)=>p&&typeof _=="string",!0))throw new h0(Zo(a),u.status,a.weak_password.reasons);throw new Kw(Zo(a),u.status||500,c)}const L1=(u,s,a,c)=>{const f={method:u,headers:s?.headers||{}};return u==="GET"?f:(f.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),f.body=JSON.stringify(c),Object.assign(Object.assign({},f),a))};async function Ut(u,s,a,c){var f;const p=Object.assign({},c?.headers);p[cf]||(p[cf]=$g["2024-01-01"].name),c?.jwt&&(p.Authorization=`Bearer ${c.jwt}`);const _=(f=c?.query)!==null&&f!==void 0?f:{};c?.redirectTo&&(_.redirect_to=c.redirectTo);const x=Object.keys(_).length?"?"+new URLSearchParams(_).toString():"",k=await C1(u,s,a+x,{headers:p,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(k):{data:Object.assign({},k),error:null}}async function C1(u,s,a,c,f,p){const _=L1(s,c,f,p);let x;try{x=await u(a,Object.assign({},_))}catch(k){throw console.error(k),new hf(Zo(k),0)}if(x.ok||await g0(x),c?.noResolveJson)return x;try{return await x.json()}catch(k){await g0(k)}}function ra(u){var s;let a=null;S1(u)&&(a=Object.assign({},u),u.expires_at||(a.expires_at=a1(u.expires_in)));const c=(s=u.user)!==null&&s!==void 0?s:u;return{data:{session:a,user:c},error:null}}function _0(u){const s=ra(u);return!s.error&&u.weak_password&&typeof u.weak_password=="object"&&Array.isArray(u.weak_password.reasons)&&u.weak_password.reasons.length&&u.weak_password.message&&typeof u.weak_password.message=="string"&&u.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(s.data.weak_password=u.weak_password),s}function Ya(u){var s;return{data:{user:(s=u.user)!==null&&s!==void 0?s:u},error:null}}function b1(u){return{data:u,error:null}}function E1(u){const{action_link:s,email_otp:a,hashed_token:c,redirect_to:f,verification_type:p}=u,_=x1(u,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:s,email_otp:a,hashed_token:c,redirect_to:f,verification_type:p},k=Object.assign({},_);return{data:{properties:x,user:k},error:null}}function M1(u){return u}function S1(u){return u.access_token&&u.refresh_token&&u.expires_in}const dd=["global","local","others"];var P1=function(u,s){var a={};for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&s.indexOf(c)<0&&(a[c]=u[c]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(u);f<c.length;f++)s.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(u,c[f])&&(a[c[f]]=u[c[f]]);return a};class B1{constructor({url:s="",headers:a={},fetch:c}){this.url=s,this.headers=a,this.fetch=Hg(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,a=dd[0]){if(dd.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dd.join(", ")}`);try{return await Ut(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(c){if(Ot(c))return{data:null,error:c};throw c}}async inviteUserByEmail(s,a={}){try{return await Ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ya})}catch(c){if(Ot(c))return{data:{user:null},error:c};throw c}}async generateLink(s){try{const{options:a}=s,c=P1(s,["options"]),f=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(f.new_email=c?.newEmail,delete f.newEmail),await Ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:f,headers:this.headers,xform:E1,redirectTo:a?.redirectTo})}catch(a){if(Ot(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(s){try{return await Ut(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Ya})}catch(a){if(Ot(a))return{data:{user:null},error:a};throw a}}async listUsers(s){var a,c,f,p,_,x,k;try{const S={nextPage:null,lastPage:0,total:0},D=await Ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=s?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(p=(f=s?.perPage)===null||f===void 0?void 0:f.toString())!==null&&p!==void 0?p:""},xform:M1});if(D.error)throw D.error;const F=await D.json(),H=(_=D.headers.get("x-total-count"))!==null&&_!==void 0?_:0,J=(k=(x=D.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&k!==void 0?k:[];return J.length>0&&(J.forEach(Q=>{const W=parseInt(Q.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(Q.split(";")[1].split("=")[1]);S[`${Y}Page`]=W}),S.total=parseInt(H)),{data:Object.assign(Object.assign({},F),S),error:null}}catch(S){if(Ot(S))return{data:{users:[]},error:S};throw S}}async getUserById(s){ql(s);try{return await Ut(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Ya})}catch(a){if(Ot(a))return{data:{user:null},error:a};throw a}}async updateUserById(s,a){ql(s);try{return await Ut(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:a,headers:this.headers,xform:Ya})}catch(c){if(Ot(c))return{data:{user:null},error:c};throw c}}async deleteUser(s,a=!1){ql(s);try{return await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ya})}catch(c){if(Ot(c))return{data:{user:null},error:c};throw c}}async _listFactors(s){ql(s.userId);try{const{data:a,error:c}=await Ut(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:f=>({data:{factors:f},error:null})});return{data:a,error:c}}catch(a){if(Ot(a))return{data:null,error:a};throw a}}async _deleteFactor(s){ql(s.userId),ql(s.id);try{return{data:await Ut(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(a){if(Ot(a))return{data:null,error:a};throw a}}}function v0(u={}){return{getItem:s=>u[s]||null,setItem:(s,a)=>{u[s]=a},removeItem:s=>{delete u[s]}}}function T1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Gl={debug:!!(globalThis&&Vg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zg extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class A1 extends Zg{}async function D1(u,s,a){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",u,s);const c=new globalThis.AbortController;return s>0&&setTimeout(()=>{c.abort(),Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",u)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(u,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async f=>{if(f){Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",u,f.name);try{return await a()}finally{Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",u,f.name)}}else{if(s===0)throw Gl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",u),new A1(`Acquiring an exclusive Navigator LockManager lock "${u}" immediately failed`);if(Gl.debug)try{const p=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(p,null,"  "))}catch(p){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",p)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}T1();const O1={url:Gw,storageKey:Vw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function y0(u,s,a){return await a()}const Vl={};class qu{constructor(s){var a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qu.nextInstanceID,qu.nextInstanceID+=1,this.instanceID>0&&Wi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const f=Object.assign(Object.assign({},O1),s);if(this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.persistSession=f.persistSession,this.storageKey=f.storageKey,this.autoRefreshToken=f.autoRefreshToken,this.admin=new B1({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=Hg(f.fetch),this.lock=f.lock||y0,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,f.lock?this.lock=f.lock:Wi()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=D1:this.lock=y0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:Vg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=v0(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=v0(this.memoryStorage)),Wi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(p){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",p)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async p=>{this._debug("received broadcast notification from other tab or client",p),await this._notifyAllSubscribers(p.data.event,p.data.session,!1)})}this.initialize()}get jwks(){var s,a;return(a=(s=Vl[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(s){Vl[this.storageKey]=Object.assign(Object.assign({},Vl[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,a;return(a=(s=Vl[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Vl[this.storageKey]=Object.assign(Object.assign({},Vl[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ug}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const a=l1(window.location.href);let c="none";if(this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce"),Wi()&&this.detectSessionInUrl&&c!=="none"){const{data:f,error:p}=await this._getSessionFromURL(a,c);if(p){if(this._debug("#_initialize()","error detecting session from URL",p),Xw(p)){const k=(s=p.details)===null||s===void 0?void 0:s.code;if(k==="identity_already_exists"||k==="identity_not_found"||k==="single_identity_not_deletable")return{error:p}}return await this._removeSession(),{error:p}}const{session:_,redirectType:x}=f;return this._debug("#_initialize()","detected session in URL",_,"redirect type",x),await this._saveSession(_),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",_):await this._notifyAllSubscribers("SIGNED_IN",_)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Ot(a)?{error:a}:{error:new qg("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var a,c,f;try{const p=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=s?.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(f=s?.options)===null||f===void 0?void 0:f.captchaToken}},xform:ra}),{data:_,error:x}=p;if(x||!_)return{data:{user:null,session:null},error:x};const k=_.session,S=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",k)),{data:{user:S,session:k},error:null}}catch(p){if(Ot(p))return{data:{user:null,session:null},error:p};throw p}}async signUp(s){var a,c,f;try{let p;if("email"in s){const{email:D,password:F,options:H}=s;let J=null,Q=null;this.flowType==="pkce"&&([J,Q]=await $l(this.storage,this.storageKey)),p=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:H?.emailRedirectTo,body:{email:D,password:F,data:(a=H?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:H?.captchaToken},code_challenge:J,code_challenge_method:Q},xform:ra})}else if("phone"in s){const{phone:D,password:F,options:H}=s;p=await Ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:D,password:F,data:(c=H?.data)!==null&&c!==void 0?c:{},channel:(f=H?.channel)!==null&&f!==void 0?f:"sms",gotrue_meta_security:{captcha_token:H?.captchaToken}},xform:ra})}else throw new Fc("You must provide either an email or phone number and a password");const{data:_,error:x}=p;if(x||!_)return{data:{user:null,session:null},error:x};const k=_.session,S=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",k)),{data:{user:S,session:k},error:null}}catch(p){if(Ot(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithPassword(s){try{let a;if("email"in s){const{email:p,password:_,options:x}=s;a=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:p,password:_,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:_0})}else if("phone"in s){const{phone:p,password:_,options:x}=s;a=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:p,password:_,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:_0})}else throw new Fc("You must provide either an email or phone number and a password");const{data:c,error:f}=a;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ic}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:f})}catch(a){if(Ot(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(s){var a,c,f,p;return await this._handleProviderSignIn(s.provider,{redirectTo:(a=s.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=s.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=s.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:(p=s.options)===null||p===void 0?void 0:p.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:a}=s;if(a==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(s){var a,c,f,p,_,x,k,S,D,F,H,J;let Q,W;if("message"in s)Q=s.message,W=s.signature;else{const{chain:Y,wallet:ve,statement:$e,options:Oe}=s;let ye;if(Wi())if(typeof ve=="object")ye=ve;else{const De=window;if("solana"in De&&typeof De.solana=="object"&&("signIn"in De.solana&&typeof De.solana.signIn=="function"||"signMessage"in De.solana&&typeof De.solana.signMessage=="function"))ye=De.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ve!="object"||!Oe?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ye=ve}const Ee=new URL((a=Oe?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in ye&&ye.signIn){const De=await ye.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Oe?.signInWithSolana),{version:"1",domain:Ee.host,uri:Ee.href}),$e?{statement:$e}:null));let He;if(Array.isArray(De)&&De[0]&&typeof De[0]=="object")He=De[0];else if(De&&typeof De=="object"&&"signedMessage"in De&&"signature"in De)He=De;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in He&&"signature"in He&&(typeof He.signedMessage=="string"||He.signedMessage instanceof Uint8Array)&&He.signature instanceof Uint8Array)Q=typeof He.signedMessage=="string"?He.signedMessage:new TextDecoder().decode(He.signedMessage),W=He.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ye)||typeof ye.signMessage!="function"||!("publicKey"in ye)||typeof ye!="object"||!ye.publicKey||!("toBase58"in ye.publicKey)||typeof ye.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");Q=[`${Ee.host} wants you to sign in with your Solana account:`,ye.publicKey.toBase58(),...$e?["",$e,""]:[""],"Version: 1",`URI: ${Ee.href}`,`Issued At: ${(f=(c=Oe?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date().toISOString()}`,...!((p=Oe?.signInWithSolana)===null||p===void 0)&&p.notBefore?[`Not Before: ${Oe.signInWithSolana.notBefore}`]:[],...!((_=Oe?.signInWithSolana)===null||_===void 0)&&_.expirationTime?[`Expiration Time: ${Oe.signInWithSolana.expirationTime}`]:[],...!((x=Oe?.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${Oe.signInWithSolana.chainId}`]:[],...!((k=Oe?.signInWithSolana)===null||k===void 0)&&k.nonce?[`Nonce: ${Oe.signInWithSolana.nonce}`]:[],...!((S=Oe?.signInWithSolana)===null||S===void 0)&&S.requestId?[`Request ID: ${Oe.signInWithSolana.requestId}`]:[],...!((F=(D=Oe?.signInWithSolana)===null||D===void 0?void 0:D.resources)===null||F===void 0)&&F.length?["Resources",...Oe.signInWithSolana.resources.map(He=>`- ${He}`)]:[]].join(`
`);const De=await ye.signMessage(new TextEncoder().encode(Q),"utf8");if(!De||!(De instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");W=De}}try{const{data:Y,error:ve}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:Q,signature:s1(W)},!((H=s.options)===null||H===void 0)&&H.captchaToken?{gotrue_meta_security:{captcha_token:(J=s.options)===null||J===void 0?void 0:J.captchaToken}}:null),xform:ra});if(ve)throw ve;return!Y||!Y.session||!Y.user?{data:{user:null,session:null},error:new Ic}:(Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),{data:Object.assign({},Y),error:ve})}catch(Y){if(Ot(Y))return{data:{user:null,session:null},error:Y};throw Y}}async _exchangeCodeForSession(s){const a=await Ho(this.storage,`${this.storageKey}-code-verifier`),[c,f]=(a??"").split("/");try{const{data:p,error:_}=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:c},xform:ra});if(await Ka(this.storage,`${this.storageKey}-code-verifier`),_)throw _;return!p||!p.session||!p.user?{data:{user:null,session:null,redirectType:null},error:new Ic}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign(Object.assign({},p),{redirectType:f??null}),error:_})}catch(p){if(Ot(p))return{data:{user:null,session:null,redirectType:null},error:p};throw p}}async signInWithIdToken(s){try{const{options:a,provider:c,token:f,access_token:p,nonce:_}=s,x=await Ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:f,access_token:p,nonce:_,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ra}),{data:k,error:S}=x;return S?{data:{user:null,session:null},error:S}:!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ic}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:k,error:S})}catch(a){if(Ot(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(s){var a,c,f,p,_;try{if("email"in s){const{email:x,options:k}=s;let S=null,D=null;this.flowType==="pkce"&&([S,D]=await $l(this.storage,this.storageKey));const{error:F}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(a=k?.data)!==null&&a!==void 0?a:{},create_user:(c=k?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:S,code_challenge_method:D},redirectTo:k?.emailRedirectTo});return{data:{user:null,session:null},error:F}}if("phone"in s){const{phone:x,options:k}=s,{data:S,error:D}=await Ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(f=k?.data)!==null&&f!==void 0?f:{},create_user:(p=k?.shouldCreateUser)!==null&&p!==void 0?p:!0,gotrue_meta_security:{captcha_token:k?.captchaToken},channel:(_=k?.channel)!==null&&_!==void 0?_:"sms"}});return{data:{user:null,session:null,messageId:S?.message_id},error:D}}throw new Fc("You must provide either an email or phone number.")}catch(x){if(Ot(x))return{data:{user:null,session:null},error:x};throw x}}async verifyOtp(s){var a,c;try{let f,p;"options"in s&&(f=(a=s.options)===null||a===void 0?void 0:a.redirectTo,p=(c=s.options)===null||c===void 0?void 0:c.captchaToken);const{data:_,error:x}=await Ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:p}}),redirectTo:f,xform:ra});if(x)throw x;if(!_)throw new Error("An error occurred on token verification.");const k=_.session,S=_.user;return k?.access_token&&(await this._saveSession(k),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",k)),{data:{user:S,session:k},error:null}}catch(f){if(Ot(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSSO(s){var a,c,f;try{let p=null,_=null;return this.flowType==="pkce"&&([p,_]=await $l(this.storage,this.storageKey)),await Ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(c=(a=s.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((f=s?.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:_}),headers:this.headers,xform:b1})}catch(p){if(Ot(p))return{data:null,error:p};throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:a},error:c}=s;if(c)throw c;if(!a)throw new Ja;const{error:f}=await Ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:f}})}catch(s){if(Ot(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const a=`${this.url}/resend`;if("email"in s){const{email:c,type:f,options:p}=s,{error:_}=await Ut(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},redirectTo:p?.emailRedirectTo});return{data:{user:null,session:null},error:_}}else if("phone"in s){const{phone:c,type:f,options:p}=s,{data:_,error:x}=await Ut(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:f,gotrue_meta_security:{captcha_token:p?.captchaToken}}});return{data:{user:null,session:null,messageId:_?.message_id},error:x}}throw new Fc("You must provide either an email or phone number and a type")}catch(a){if(Ot(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(s,a){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),f=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await f}catch{}})()),f}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const f=[...this.pendingInLock];await Promise.all(f),this.pendingInLock.splice(0,f.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await s(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const a=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?s=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const c=s.expires_at?s.expires_at*1e3-Date.now()<ld:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",s.expires_at),!c){if(this.userStorage){const _=await Ho(this.userStorage,this.storageKey+"-user");_?.user?s.user=_.user:s.user=hd()}if(this.storage.isServer&&s.user){let _=this.suppressGetSessionWarning;s=new Proxy(s,{get:(k,S,D)=>(!_&&S==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),_=!0,this.suppressGetSessionWarning=!0),Reflect.get(k,S,D))})}return{data:{session:s},error:null}}const{session:f,error:p}=await this._callRefreshToken(s.refresh_token);return p?{data:{session:null},error:p}:{data:{session:f},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Ya}):await this._useSession(async a=>{var c,f,p;const{data:_,error:x}=a;if(x)throw x;return!(!((c=_.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ja}:await Ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(p=(f=_.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0,xform:Ya})})}catch(a){if(Ot(a))return Yw(a)&&(await this._removeSession(),await Ka(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(s,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,a))}async _updateUser(s,a={}){try{return await this._useSession(async c=>{const{data:f,error:p}=c;if(p)throw p;if(!f.session)throw new Ja;const _=f.session;let x=null,k=null;this.flowType==="pkce"&&s.email!=null&&([x,k]=await $l(this.storage,this.storageKey));const{data:S,error:D}=await Ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:x,code_challenge_method:k}),jwt:_.access_token,xform:Ya});if(D)throw D;return _.user=S.user,await this._saveSession(_),await this._notifyAllSubscribers("USER_UPDATED",_),{data:{user:_.user},error:null}})}catch(c){if(Ot(c))return{data:{user:null},error:c};throw c}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Ja;const a=Date.now()/1e3;let c=a,f=!0,p=null;const{payload:_}=cd(s.access_token);if(_.exp&&(c=_.exp,f=c<=a),f){const{session:x,error:k}=await this._callRefreshToken(s.refresh_token);if(k)return{data:{user:null,session:null},error:k};if(!x)return{data:{user:null,session:null},error:null};p=x}else{const{data:x,error:k}=await this._getUser(s.access_token);if(k)throw k;p={access_token:s.access_token,refresh_token:s.refresh_token,user:x.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)}return{data:{user:p.user,session:p},error:null}}catch(a){if(Ot(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async a=>{var c;if(!s){const{data:_,error:x}=a;if(x)throw x;s=(c=_.session)!==null&&c!==void 0?c:void 0}if(!s?.refresh_token)throw new Ja;const{session:f,error:p}=await this._callRefreshToken(s.refresh_token);return p?{data:{user:null,session:null},error:p}:f?{data:{user:f.user,session:f},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Ot(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(s,a){try{if(!Wi())throw new Nc("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Nc(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new c0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new c0("No code detected.");const{data:$e,error:Oe}=await this._exchangeCodeForSession(s.code);if(Oe)throw Oe;const ye=new URL(window.location.href);return ye.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ye.toString()),{data:{session:$e.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:f,access_token:p,refresh_token:_,expires_in:x,expires_at:k,token_type:S}=s;if(!p||!x||!_||!S)throw new Nc("No session defined in URL");const D=Math.round(Date.now()/1e3),F=parseInt(x);let H=D+F;k&&(H=parseInt(k));const J=H-D;J*1e3<=Hl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${J}s, should have been closer to ${F}s`);const Q=H-F;D-Q>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",Q,H,D):D-Q<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",Q,H,D);const{data:W,error:Y}=await this._getUser(p);if(Y)throw Y;const ve={provider_token:c,provider_refresh_token:f,access_token:p,expires_in:F,expires_at:H,refresh_token:_,token_type:S,user:W.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ve,redirectType:s.type},error:null}}catch(c){if(Ot(c))return{data:{session:null,redirectType:null},error:c};throw c}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const a=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&a)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:f,error:p}=a;if(p)return{error:p};const _=(c=f.session)===null||c===void 0?void 0:c.access_token;if(_){const{error:x}=await this.admin.signOut(_,s);if(x&&!(Jw(x)&&(x.status===404||x.status===401||x.status===403)))return{error:x}}return s!=="others"&&(await this._removeSession(),await Ka(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const a=o1(),c={id:a,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(s){return await this._useSession(async a=>{var c,f;try{const{data:{session:p},error:_}=a;if(_)throw _;await((c=this.stateChangeEmitters.get(s))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",p)),this._debug("INITIAL_SESSION","callback id",s,"session",p)}catch(p){await((f=this.stateChangeEmitters.get(s))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",p),console.error(p)}})}async resetPasswordForEmail(s,a={}){let c=null,f=null;this.flowType==="pkce"&&([c,f]=await $l(this.storage,this.storageKey,!0));try{return await Ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:c,code_challenge_method:f,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(p){if(Ot(p))return{data:null,error:p};throw p}}async getUserIdentities(){var s;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return{data:{identities:(s=a.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(a){if(Ot(a))return{data:null,error:a};throw a}}async linkIdentity(s){var a;try{const{data:c,error:f}=await this._useSession(async p=>{var _,x,k,S,D;const{data:F,error:H}=p;if(H)throw H;const J=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(_=s.options)===null||_===void 0?void 0:_.redirectTo,scopes:(x=s.options)===null||x===void 0?void 0:x.scopes,queryParams:(k=s.options)===null||k===void 0?void 0:k.queryParams,skipBrowserRedirect:!0});return await Ut(this.fetch,"GET",J,{headers:this.headers,jwt:(D=(S=F.session)===null||S===void 0?void 0:S.access_token)!==null&&D!==void 0?D:void 0})});if(f)throw f;return Wi()&&!(!((a=s.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c?.url),{data:{provider:s.provider,url:c?.url},error:null}}catch(c){if(Ot(c))return{data:{provider:s.provider,url:null},error:c};throw c}}async unlinkIdentity(s){try{return await this._useSession(async a=>{var c,f;const{data:p,error:_}=a;if(_)throw _;return await Ut(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(f=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})})}catch(a){if(Ot(a))return{data:null,error:a};throw a}}async _refreshAccessToken(s){const a=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await h1(async f=>(f>0&&await c1(200*Math.pow(2,f-1)),this._debug(a,"refreshing attempt",f),await Ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:ra})),(f,p)=>{const _=200*Math.pow(2,f);return p&&ud(p)&&Date.now()+_-c<Hl})}catch(c){if(this._debug(a,"error",c),Ot(c))return{data:{session:null,user:null},error:c};throw c}finally{this._debug(a,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",a,"url",c),Wi()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:s,url:c},error:null}}async _recoverAndRefresh(){var s,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const f=await Ho(this.storage,this.storageKey);if(f&&this.userStorage){let _=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!_&&(_={user:f.user},await Zl(this.userStorage,this.storageKey+"-user",_)),f.user=(s=_?.user)!==null&&s!==void 0?s:hd()}else if(f&&!f.user&&!f.user){const _=await Ho(this.storage,this.storageKey+"-user");_&&_?.user?(f.user=_.user,await Ka(this.storage,this.storageKey+"-user"),await Zl(this.storage,this.storageKey,f)):f.user=hd()}if(this._debug(c,"session from storage",f),!this._isValidSession(f)){this._debug(c,"session is not valid"),f!==null&&await this._removeSession();return}const p=((a=f.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<ld;if(this._debug(c,`session has${p?"":" not"} expired with margin of ${ld}s`),p){if(this.autoRefreshToken&&f.refresh_token){const{error:_}=await this._callRefreshToken(f.refresh_token);_&&(console.error(_),ud(_)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",_),await this._removeSession()))}}else if(f.user&&f.user.__isUserNotAvailableProxy===!0)try{const{data:_,error:x}=await this._getUser(f.access_token);!x&&_?.user?(f.user=_.user,await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(_){console.error("Error getting user data:",_),this._debug(c,"error getting user data, skipping SIGNED_IN notification",_)}else await this._notifyAllSubscribers("SIGNED_IN",f)}catch(f){this._debug(c,"error",f),console.error(f);return}finally{this._debug(c,"end")}}async _callRefreshToken(s){var a,c;if(!s)throw new Ja;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const f=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(f,"begin");try{this.refreshingDeferred=new eh;const{data:p,error:_}=await this._refreshAccessToken(s);if(_)throw _;if(!p.session)throw new Ja;await this._saveSession(p.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",p.session);const x={session:p.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(p){if(this._debug(f,"error",p),Ot(p)){const _={session:null,error:p};return ud(p)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(_),_}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(p),p}finally{this.refreshingDeferred=null,this._debug(f,"end")}}async _notifyAllSubscribers(s,a,c=!0){const f=`#_notifyAllSubscribers(${s})`;this._debug(f,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:s,session:a});const p=[],_=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(s,a)}catch(k){p.push(k)}});if(await Promise.all(_),p.length>0){for(let x=0;x<p.length;x+=1)console.error(p[x]);throw p[0]}}finally{this._debug(f,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const a=Object.assign({},s),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await Zl(this.userStorage,this.storageKey+"-user",{user:a.user});const f=Object.assign({},a);delete f.user;const p=m0(f);await Zl(this.storage,this.storageKey,p)}else{const f=m0(a);await Zl(this.storage,this.storageKey,f)}}async _removeSession(){this._debug("#_removeSession()"),await Ka(this.storage,this.storageKey),await Ka(this.storage,this.storageKey+"-code-verifier"),await Ka(this.storage,this.storageKey+"-user"),this.userStorage&&await Ka(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Wi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Hl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const f=Math.floor((c.expires_at*1e3-s)/Hl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${f} ticks, a tick lasts ${Hl}ms, refresh threshold is ${uf} ticks`),f<=uf&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Zg)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const a=`#_onVisibilityChanged(${s})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,a,c){const f=[`provider=${encodeURIComponent(a)}`];if(c?.redirectTo&&f.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&f.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[p,_]=await $l(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(p)}`,code_challenge_method:`${encodeURIComponent(_)}`});f.push(x.toString())}if(c?.queryParams){const p=new URLSearchParams(c.queryParams);f.push(p.toString())}return c?.skipBrowserRedirect&&f.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${s}?${f.join("&")}`}async _unenroll(s){try{return await this._useSession(async a=>{var c;const{data:f,error:p}=a;return p?{data:null,error:p}:await Ut(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(Ot(a))return{data:null,error:a};throw a}}async _enroll(s){try{return await this._useSession(async a=>{var c,f;const{data:p,error:_}=a;if(_)return{data:null,error:_};const x=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:k,error:S}=await Ut(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(c=p?.session)===null||c===void 0?void 0:c.access_token});return S?{data:null,error:S}:(s.factorType==="totp"&&(!((f=k?.totp)===null||f===void 0)&&f.qr_code)&&(k.totp.qr_code=`data:image/svg+xml;utf-8,${k.totp.qr_code}`),{data:k,error:null})})}catch(a){if(Ot(a))return{data:null,error:a};throw a}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:f,error:p}=a;if(p)return{data:null,error:p};const{data:_,error:x}=await Ut(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token});return x?{data:null,error:x}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),{data:_,error:x})})}catch(a){if(Ot(a))return{data:null,error:a};throw a}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:f,error:p}=a;return p?{data:null,error:p}:await Ut(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(Ot(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(s){const{data:a,error:c}=await this._challenge({factorId:s.factorId});return c?{data:null,error:c}:await this._verify({factorId:s.factorId,challengeId:a.id,code:s.code})}async _listFactors(){const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const c=s?.factors||[],f=c.filter(_=>_.factor_type==="totp"&&_.status==="verified"),p=c.filter(_=>_.factor_type==="phone"&&_.status==="verified");return{data:{all:c,totp:f,phone:p},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var a,c;const{data:{session:f},error:p}=s;if(p)return{data:null,error:p};if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:_}=cd(f.access_token);let x=null;_.aal&&(x=_.aal);let k=x;((c=(a=f.user.factors)===null||a===void 0?void 0:a.filter(F=>F.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(k="aal2");const D=_.amr||[];return{data:{currentLevel:x,nextLevel:k,currentAuthenticationMethods:D},error:null}}))}async fetchJwk(s,a={keys:[]}){let c=a.keys.find(x=>x.kid===s);if(c)return c;const f=Date.now();if(c=this.jwks.keys.find(x=>x.kid===s),c&&this.jwks_cached_at+Ww>f)return c;const{data:p,error:_}=await Ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(_)throw _;return!p.keys||p.keys.length===0||(this.jwks=p,this.jwks_cached_at=f,c=p.keys.find(x=>x.kid===s),!c)?null:c}async getClaims(s,a={}){try{let c=s;if(!c){const{data:J,error:Q}=await this.getSession();if(Q||!J.session)return{data:null,error:Q};c=J.session.access_token}const{header:f,payload:p,signature:_,raw:{header:x,payload:k}}=cd(c);a?.allowExpired||v1(p.exp);const S=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!S){const{error:J}=await this.getUser(c);if(J)throw J;return{data:{claims:p,header:f,signature:_},error:null}}const D=y1(f.alg),F=await crypto.subtle.importKey("jwk",S,D,!0,["verify"]);if(!await crypto.subtle.verify(D,F,_,i1(`${x}.${k}`)))throw new df("Invalid JWT signature");return{data:{claims:p,header:f,signature:_},error:null}}catch(c){if(Ot(c))return{data:null,error:c};throw c}}}qu.nextInstanceID=0;const R1=qu;class I1 extends R1{constructor(s){super(s)}}var F1=function(u,s,a,c){function f(p){return p instanceof a?p:new a(function(_){_(p)})}return new(a||(a=Promise))(function(p,_){function x(D){try{S(c.next(D))}catch(F){_(F)}}function k(D){try{S(c.throw(D))}catch(F){_(F)}}function S(D){D.done?p(D.value):f(D.value).then(x,k)}S((c=c.apply(u,s||[])).next())})};class N1{constructor(s,a,c){var f,p,_;if(this.supabaseUrl=s,this.supabaseKey=a,!s)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const x=$w(s),k=new URL(x);this.realtimeUrl=new URL("realtime/v1",k),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",k),this.storageUrl=new URL("storage/v1",k),this.functionsUrl=new URL("functions/v1",k);const S=`sb-${k.hostname.split(".")[0]}-auth-token`,D={db:Ow,realtime:Iw,auth:Object.assign(Object.assign({},Rw),{storageKey:S}),global:Dw},F=qw(c??{},D);this.storageKey=(f=F.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(p=F.global.headers)!==null&&p!==void 0?p:{},F.accessToken?(this.accessToken=F.accessToken,this.auth=new Proxy({},{get:(H,J)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(J)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((_=F.auth)!==null&&_!==void 0?_:{},this.headers,F.global.fetch),this.fetch=jw(a,this._getAccessToken.bind(this),F.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},F.realtime)),this.rest=new ew(new URL("rest/v1",k).href,{headers:this.headers,schema:F.db.schema,fetch:this.fetch}),this.storage=new Bw(this.storageUrl.href,this.headers,this.fetch,c?.storage),F.accessToken||this._listenForAuthEvents()}get functions(){return new $y(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},c={}){return this.rest.rpc(s,a,c)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,a;return F1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:c}=yield this.auth.getSession();return(a=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:c,storage:f,storageKey:p,flowType:_,lock:x,debug:k},S,D){const F={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I1({url:this.authUrl.href,headers:Object.assign(Object.assign({},F),S),storageKey:p,autoRefreshToken:s,persistSession:a,detectSessionInUrl:c,storage:f,flowType:_,lock:x,debug:k,fetch:D,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(s){return new _w(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c?.access_token)})}_handleTokenChanged(s,a,c){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==c?this.changedAccessToken=c:s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const z1=(u,s,a)=>new N1(u,s,a);function j1(){if(typeof window<"u"||typeof process>"u")return!1;const u=process.version;if(u==null)return!1;const s=u.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}j1()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const U1="https://tyftyoexdxrjvxjbdyux.supabase.co",$1="sb_publishable_CUCrsx84syqTmA-uMJyF3g_EnrX-aW6",Mr=z1(U1,$1),q1="/pudumaps/assets/pudulogo-pI67wG3d.png";/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w0="popstate";function G1(u={}){function s(f,p){let{pathname:_="/",search:x="",hash:k=""}=Xo(f.location.hash.substring(1));return!_.startsWith("/")&&!_.startsWith(".")&&(_="/"+_),ff("",{pathname:_,search:x,hash:k},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function a(f,p){let _=f.document.querySelector("base"),x="";if(_&&_.getAttribute("href")){let k=f.location.href,S=k.indexOf("#");x=S===-1?k:k.slice(0,S)}return x+"#"+(typeof p=="string"?p:Gu(p))}function c(f,p){Ji(f.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(p)})`)}return H1(s,a,c,u)}function dn(u,s){if(u===!1||u===null||typeof u>"u")throw new Error(s)}function Ji(u,s){if(!u){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function V1(){return Math.random().toString(36).substring(2,10)}function x0(u,s){return{usr:u.state,key:u.key,idx:s}}function ff(u,s,a=null,c){return{pathname:typeof u=="string"?u:u.pathname,search:"",hash:"",...typeof s=="string"?Xo(s):s,state:a,key:s&&s.key||c||V1()}}function Gu({pathname:u="/",search:s="",hash:a=""}){return s&&s!=="?"&&(u+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(u+=a.charAt(0)==="#"?a:"#"+a),u}function Xo(u){let s={};if(u){let a=u.indexOf("#");a>=0&&(s.hash=u.substring(a),u=u.substring(0,a));let c=u.indexOf("?");c>=0&&(s.search=u.substring(c),u=u.substring(0,c)),u&&(s.pathname=u)}return s}function H1(u,s,a,c={}){let{window:f=document.defaultView,v5Compat:p=!1}=c,_=f.history,x="POP",k=null,S=D();S==null&&(S=0,_.replaceState({..._.state,idx:S},""));function D(){return(_.state||{idx:null}).idx}function F(){x="POP";let Y=D(),ve=Y==null?null:Y-S;S=Y,k&&k({action:x,location:W.location,delta:ve})}function H(Y,ve){x="PUSH";let $e=ff(W.location,Y,ve);a&&a($e,Y),S=D()+1;let Oe=x0($e,S),ye=W.createHref($e);try{_.pushState(Oe,"",ye)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;f.location.assign(ye)}p&&k&&k({action:x,location:W.location,delta:1})}function J(Y,ve){x="REPLACE";let $e=ff(W.location,Y,ve);a&&a($e,Y),S=D();let Oe=x0($e,S),ye=W.createHref($e);_.replaceState(Oe,"",ye),p&&k&&k({action:x,location:W.location,delta:0})}function Q(Y){return Z1(Y)}let W={get action(){return x},get location(){return u(f,_)},listen(Y){if(k)throw new Error("A history only accepts one active listener");return f.addEventListener(w0,F),k=Y,()=>{f.removeEventListener(w0,F),k=null}},createHref(Y){return s(f,Y)},createURL:Q,encodeLocation(Y){let ve=Q(Y);return{pathname:ve.pathname,search:ve.search,hash:ve.hash}},push:H,replace:J,go(Y){return _.go(Y)}};return W}function Z1(u,s=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),dn(a,"No window.location.(origin|href) available to create URL");let c=typeof u=="string"?u:Gu(u);return c=c.replace(/ $/,"%20"),!s&&c.startsWith("//")&&(c=a+c),new URL(c,a)}function Wg(u,s,a="/"){return W1(u,s,a,!1)}function W1(u,s,a,c){let f=typeof s=="string"?Xo(s):s,p=oa(f.pathname||"/",a);if(p==null)return null;let _=Kg(u);K1(_);let x=null;for(let k=0;x==null&&k<_.length;++k){let S=a4(p);x=i4(_[k],S,c)}return x}function Kg(u,s=[],a=[],c=""){let f=(p,_,x)=>{let k={relativePath:x===void 0?p.path||"":x,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};k.relativePath.startsWith("/")&&(dn(k.relativePath.startsWith(c),`Absolute route path "${k.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(c.length));let S=aa([c,k.relativePath]),D=a.concat(k);p.children&&p.children.length>0&&(dn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Kg(p.children,s,D,S)),!(p.path==null&&!p.index)&&s.push({path:S,score:n4(S,p.index),routesMeta:D})};return u.forEach((p,_)=>{if(p.path===""||!p.path?.includes("?"))f(p,_);else for(let x of Jg(p.path))f(p,_,x)}),s}function Jg(u){let s=u.split("/");if(s.length===0)return[];let[a,...c]=s,f=a.endsWith("?"),p=a.replace(/\?$/,"");if(c.length===0)return f?[p,""]:[p];let _=Jg(c.join("/")),x=[];return x.push(..._.map(k=>k===""?p:[p,k].join("/"))),f&&x.push(..._),x.map(k=>u.startsWith("/")&&k===""?"/":k)}function K1(u){u.sort((s,a)=>s.score!==a.score?a.score-s.score:r4(s.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var J1=/^:[\w-]+$/,Y1=3,X1=2,Q1=1,e4=10,t4=-2,k0=u=>u==="*";function n4(u,s){let a=u.split("/"),c=a.length;return a.some(k0)&&(c+=t4),s&&(c+=X1),a.filter(f=>!k0(f)).reduce((f,p)=>f+(J1.test(p)?Y1:p===""?Q1:e4),c)}function r4(u,s){return u.length===s.length&&u.slice(0,-1).every((c,f)=>c===s[f])?u[u.length-1]-s[s.length-1]:0}function i4(u,s,a=!1){let{routesMeta:c}=u,f={},p="/",_=[];for(let x=0;x<c.length;++x){let k=c[x],S=x===c.length-1,D=p==="/"?s:s.slice(p.length)||"/",F=Zc({path:k.relativePath,caseSensitive:k.caseSensitive,end:S},D),H=k.route;if(!F&&S&&a&&!c[c.length-1].route.index&&(F=Zc({path:k.relativePath,caseSensitive:k.caseSensitive,end:!1},D)),!F)return null;Object.assign(f,F.params),_.push({params:f,pathname:aa([p,F.pathname]),pathnameBase:c4(aa([p,F.pathnameBase])),route:H}),F.pathnameBase!=="/"&&(p=aa([p,F.pathnameBase]))}return _}function Zc(u,s){typeof u=="string"&&(u={path:u,caseSensitive:!1,end:!0});let[a,c]=s4(u.path,u.caseSensitive,u.end),f=s.match(a);if(!f)return null;let p=f[0],_=p.replace(/(.)\/+$/,"$1"),x=f.slice(1);return{params:c.reduce((S,{paramName:D,isOptional:F},H)=>{if(D==="*"){let Q=x[H]||"";_=p.slice(0,p.length-Q.length).replace(/(.)\/+$/,"$1")}const J=x[H];return F&&!J?S[D]=void 0:S[D]=(J||"").replace(/%2F/g,"/"),S},{}),pathname:p,pathnameBase:_,pattern:u}}function s4(u,s=!1,a=!0){Ji(u==="*"||!u.endsWith("*")||u.endsWith("/*"),`Route path "${u}" will be treated as if it were "${u.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${u.replace(/\*$/,"/*")}".`);let c=[],f="^"+u.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,x,k)=>(c.push({paramName:x,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return u.endsWith("*")?(c.push({paramName:"*"}),f+=u==="*"||u==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?f+="\\/*$":u!==""&&u!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,s?void 0:"i"),c]}function a4(u){try{return u.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ji(!1,`The URL path "${u}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),u}}function oa(u,s){if(s==="/")return u;if(!u.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,c=u.charAt(a);return c&&c!=="/"?null:u.slice(a)||"/"}function o4(u,s="/"){let{pathname:a,search:c="",hash:f=""}=typeof u=="string"?Xo(u):u;return{pathname:a?a.startsWith("/")?a:l4(a,s):s,search:h4(c),hash:d4(f)}}function l4(u,s){let a=s.replace(/\/+$/,"").split("/");return u.split("/").forEach(f=>{f===".."?a.length>1&&a.pop():f!=="."&&a.push(f)}),a.length>1?a.join("/"):"/"}function fd(u,s,a,c){return`Cannot include a '${u}' character in a manually specified \`to.${s}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u4(u){return u.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Yg(u){let s=u4(u);return s.map((a,c)=>c===s.length-1?a.pathname:a.pathnameBase)}function Xg(u,s,a,c=!1){let f;typeof u=="string"?f=Xo(u):(f={...u},dn(!f.pathname||!f.pathname.includes("?"),fd("?","pathname","search",f)),dn(!f.pathname||!f.pathname.includes("#"),fd("#","pathname","hash",f)),dn(!f.search||!f.search.includes("#"),fd("#","search","hash",f)));let p=u===""||f.pathname==="",_=p?"/":f.pathname,x;if(_==null)x=a;else{let F=s.length-1;if(!c&&_.startsWith("..")){let H=_.split("/");for(;H[0]==="..";)H.shift(),F-=1;f.pathname=H.join("/")}x=F>=0?s[F]:"/"}let k=o4(f,x),S=_&&_!=="/"&&_.endsWith("/"),D=(p||_===".")&&a.endsWith("/");return!k.pathname.endsWith("/")&&(S||D)&&(k.pathname+="/"),k}var aa=u=>u.join("/").replace(/\/\/+/g,"/"),c4=u=>u.replace(/\/+$/,"").replace(/^\/*/,"/"),h4=u=>!u||u==="?"?"":u.startsWith("?")?u:"?"+u,d4=u=>!u||u==="#"?"":u.startsWith("#")?u:"#"+u;function f4(u){return u!=null&&typeof u.status=="number"&&typeof u.statusText=="string"&&typeof u.internal=="boolean"&&"data"in u}var Qg=["POST","PUT","PATCH","DELETE"];new Set(Qg);var p4=["GET",...Qg];new Set(p4);var eu=ge.createContext(null);eu.displayName="DataRouter";var th=ge.createContext(null);th.displayName="DataRouterState";ge.createContext(!1);var e_=ge.createContext({isTransitioning:!1});e_.displayName="ViewTransition";var m4=ge.createContext(new Map);m4.displayName="Fetchers";var g4=ge.createContext(null);g4.displayName="Await";var Cs=ge.createContext(null);Cs.displayName="Navigation";var Qu=ge.createContext(null);Qu.displayName="Location";var bs=ge.createContext({outlet:null,matches:[],isDataRoute:!1});bs.displayName="Route";var Sf=ge.createContext(null);Sf.displayName="RouteError";function _4(u,{relative:s}={}){dn(ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=ge.useContext(Cs),{hash:f,pathname:p,search:_}=tc(u,{relative:s}),x=p;return a!=="/"&&(x=p==="/"?a:aa([a,p])),c.createHref({pathname:x,search:_,hash:f})}function ec(){return ge.useContext(Qu)!=null}function Qo(){return dn(ec(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(Qu).location}var t_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n_(u){ge.useContext(Cs).static||ge.useLayoutEffect(u)}function r_(){let{isDataRoute:u}=ge.useContext(bs);return u?T4():v4()}function v4(){dn(ec(),"useNavigate() may be used only in the context of a <Router> component.");let u=ge.useContext(eu),{basename:s,navigator:a}=ge.useContext(Cs),{matches:c}=ge.useContext(bs),{pathname:f}=Qo(),p=JSON.stringify(Yg(c)),_=ge.useRef(!1);return n_(()=>{_.current=!0}),ge.useCallback((k,S={})=>{if(Ji(_.current,t_),!_.current)return;if(typeof k=="number"){a.go(k);return}let D=Xg(k,JSON.parse(p),f,S.relative==="path");u==null&&s!=="/"&&(D.pathname=D.pathname==="/"?s:aa([s,D.pathname])),(S.replace?a.replace:a.push)(D,S.state,S)},[s,a,p,f,u])}ge.createContext(null);function y4(){let{matches:u}=ge.useContext(bs),s=u[u.length-1];return s?s.params:{}}function tc(u,{relative:s}={}){let{matches:a}=ge.useContext(bs),{pathname:c}=Qo(),f=JSON.stringify(Yg(a));return ge.useMemo(()=>Xg(u,JSON.parse(f),c,s==="path"),[u,f,c,s])}function w4(u,s){return i_(u,s)}function i_(u,s,a,c){dn(ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=ge.useContext(Cs),{matches:p}=ge.useContext(bs),_=p[p.length-1],x=_?_.params:{},k=_?_.pathname:"/",S=_?_.pathnameBase:"/",D=_&&_.route;{let ve=D&&D.path||"";s_(k,!D||ve.endsWith("*")||ve.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${k}" (under <Route path="${ve}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ve}"> to <Route path="${ve==="/"?"*":`${ve}/*`}">.`)}let F=Qo(),H;if(s){let ve=typeof s=="string"?Xo(s):s;dn(S==="/"||ve.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ve.pathname}" was given in the \`location\` prop.`),H=ve}else H=F;let J=H.pathname||"/",Q=J;if(S!=="/"){let ve=S.replace(/^\//,"").split("/");Q="/"+J.replace(/^\//,"").split("/").slice(ve.length).join("/")}let W=Wg(u,{pathname:Q});Ji(D||W!=null,`No routes matched location "${H.pathname}${H.search}${H.hash}" `),Ji(W==null||W[W.length-1].route.element!==void 0||W[W.length-1].route.Component!==void 0||W[W.length-1].route.lazy!==void 0,`Matched leaf route at location "${H.pathname}${H.search}${H.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=b4(W&&W.map(ve=>Object.assign({},ve,{params:Object.assign({},x,ve.params),pathname:aa([S,f.encodeLocation?f.encodeLocation(ve.pathname).pathname:ve.pathname]),pathnameBase:ve.pathnameBase==="/"?S:aa([S,f.encodeLocation?f.encodeLocation(ve.pathnameBase).pathname:ve.pathnameBase])})),p,a,c);return s&&Y?ge.createElement(Qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...H},navigationType:"POP"}},Y):Y}function x4(){let u=B4(),s=f4(u)?`${u.status} ${u.statusText}`:u instanceof Error?u.message:JSON.stringify(u),a=u instanceof Error?u.stack:null,c="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:c},p={padding:"2px 4px",backgroundColor:c},_=null;return console.error("Error handled by React Router default ErrorBoundary:",u),_=ge.createElement(ge.Fragment,null,ge.createElement("p",null,"💿 Hey developer 👋"),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:p},"ErrorBoundary")," or"," ",ge.createElement("code",{style:p},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},s),a?ge.createElement("pre",{style:f},a):null,_)}var k4=ge.createElement(x4,null),L4=class extends ge.Component{constructor(u){super(u),this.state={location:u.location,revalidation:u.revalidation,error:u.error}}static getDerivedStateFromError(u){return{error:u}}static getDerivedStateFromProps(u,s){return s.location!==u.location||s.revalidation!=="idle"&&u.revalidation==="idle"?{error:u.error,location:u.location,revalidation:u.revalidation}:{error:u.error!==void 0?u.error:s.error,location:s.location,revalidation:u.revalidation||s.revalidation}}componentDidCatch(u,s){console.error("React Router caught the following error during render",u,s)}render(){return this.state.error!==void 0?ge.createElement(bs.Provider,{value:this.props.routeContext},ge.createElement(Sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function C4({routeContext:u,match:s,children:a}){let c=ge.useContext(eu);return c&&c.static&&c.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=s.route.id),ge.createElement(bs.Provider,{value:u},a)}function b4(u,s=[],a=null,c=null){if(u==null){if(!a)return null;if(a.errors)u=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)u=a.matches;else return null}let f=u,p=a?.errors;if(p!=null){let k=f.findIndex(S=>S.route.id&&p?.[S.route.id]!==void 0);dn(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),f=f.slice(0,Math.min(f.length,k+1))}let _=!1,x=-1;if(a)for(let k=0;k<f.length;k++){let S=f[k];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(x=k),S.route.id){let{loaderData:D,errors:F}=a,H=S.route.loader&&!D.hasOwnProperty(S.route.id)&&(!F||F[S.route.id]===void 0);if(S.route.lazy||H){_=!0,x>=0?f=f.slice(0,x+1):f=[f[0]];break}}}return f.reduceRight((k,S,D)=>{let F,H=!1,J=null,Q=null;a&&(F=p&&S.route.id?p[S.route.id]:void 0,J=S.route.errorElement||k4,_&&(x<0&&D===0?(s_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,Q=null):x===D&&(H=!0,Q=S.route.hydrateFallbackElement||null)));let W=s.concat(f.slice(0,D+1)),Y=()=>{let ve;return F?ve=J:H?ve=Q:S.route.Component?ve=ge.createElement(S.route.Component,null):S.route.element?ve=S.route.element:ve=k,ge.createElement(C4,{match:S,routeContext:{outlet:k,matches:W,isDataRoute:a!=null},children:ve})};return a&&(S.route.ErrorBoundary||S.route.errorElement||D===0)?ge.createElement(L4,{location:a.location,revalidation:a.revalidation,component:J,error:F,children:Y(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):Y()},null)}function Pf(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E4(u){let s=ge.useContext(eu);return dn(s,Pf(u)),s}function M4(u){let s=ge.useContext(th);return dn(s,Pf(u)),s}function S4(u){let s=ge.useContext(bs);return dn(s,Pf(u)),s}function Bf(u){let s=S4(u),a=s.matches[s.matches.length-1];return dn(a.route.id,`${u} can only be used on routes that contain a unique "id"`),a.route.id}function P4(){return Bf("useRouteId")}function B4(){let u=ge.useContext(Sf),s=M4("useRouteError"),a=Bf("useRouteError");return u!==void 0?u:s.errors?.[a]}function T4(){let{router:u}=E4("useNavigate"),s=Bf("useNavigate"),a=ge.useRef(!1);return n_(()=>{a.current=!0}),ge.useCallback(async(f,p={})=>{Ji(a.current,t_),a.current&&(typeof f=="number"?u.navigate(f):await u.navigate(f,{fromRouteId:s,...p}))},[u,s])}var L0={};function s_(u,s,a){!s&&!L0[u]&&(L0[u]=!0,Ji(!1,a))}ge.memo(A4);function A4({routes:u,future:s,state:a}){return i_(u,void 0,a,s)}function Du(u){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D4({basename:u="/",children:s=null,location:a,navigationType:c="POP",navigator:f,static:p=!1}){dn(!ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let _=u.replace(/^\/*/,"/"),x=ge.useMemo(()=>({basename:_,navigator:f,static:p,future:{}}),[_,f,p]);typeof a=="string"&&(a=Xo(a));let{pathname:k="/",search:S="",hash:D="",state:F=null,key:H="default"}=a,J=ge.useMemo(()=>{let Q=oa(k,_);return Q==null?null:{location:{pathname:Q,search:S,hash:D,state:F,key:H},navigationType:c}},[_,k,S,D,F,H,c]);return Ji(J!=null,`<Router basename="${_}"> is not able to match the URL "${k}${S}${D}" because it does not start with the basename, so the <Router> won't render anything.`),J==null?null:ge.createElement(Cs.Provider,{value:x},ge.createElement(Qu.Provider,{children:s,value:J}))}function O4({children:u,location:s}){return w4(pf(u),s)}function pf(u,s=[]){let a=[];return ge.Children.forEach(u,(c,f)=>{if(!ge.isValidElement(c))return;let p=[...s,f];if(c.type===ge.Fragment){a.push.apply(a,pf(c.props.children,p));return}dn(c.type===Du,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!c.props.index||!c.props.children,"An index route cannot have child routes.");let _={id:c.props.id||p.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(_.children=pf(c.props.children,p)),a.push(_)}),a}var $c="get",qc="application/x-www-form-urlencoded";function nh(u){return u!=null&&typeof u.tagName=="string"}function R4(u){return nh(u)&&u.tagName.toLowerCase()==="button"}function I4(u){return nh(u)&&u.tagName.toLowerCase()==="form"}function F4(u){return nh(u)&&u.tagName.toLowerCase()==="input"}function N4(u){return!!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)}function z4(u,s){return u.button===0&&(!s||s==="_self")&&!N4(u)}var zc=null;function j4(){if(zc===null)try{new FormData(document.createElement("form"),0),zc=!1}catch{zc=!0}return zc}var U4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pd(u){return u!=null&&!U4.has(u)?(Ji(!1,`"${u}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qc}"`),null):u}function $4(u,s){let a,c,f,p,_;if(I4(u)){let x=u.getAttribute("action");c=x?oa(x,s):null,a=u.getAttribute("method")||$c,f=pd(u.getAttribute("enctype"))||qc,p=new FormData(u)}else if(R4(u)||F4(u)&&(u.type==="submit"||u.type==="image")){let x=u.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let k=u.getAttribute("formaction")||x.getAttribute("action");if(c=k?oa(k,s):null,a=u.getAttribute("formmethod")||x.getAttribute("method")||$c,f=pd(u.getAttribute("formenctype"))||pd(x.getAttribute("enctype"))||qc,p=new FormData(x,u),!j4()){let{name:S,type:D,value:F}=u;if(D==="image"){let H=S?`${S}.`:"";p.append(`${H}x`,"0"),p.append(`${H}y`,"0")}else S&&p.append(S,F)}}else{if(nh(u))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=$c,c=null,f=qc,_=u}return p&&f==="text/plain"&&(_=p,p=void 0),{action:c,method:a.toLowerCase(),encType:f,formData:p,body:_}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tf(u,s){if(u===!1||u===null||typeof u>"u")throw new Error(s)}function q4(u,s,a){let c=typeof u=="string"?new URL(u,typeof window>"u"?"server://singlefetch/":window.location.origin):u;return c.pathname==="/"?c.pathname=`_root.${a}`:s&&oa(c.pathname,s)==="/"?c.pathname=`${s.replace(/\/$/,"")}/_root.${a}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${a}`,c}async function G4(u,s){if(u.id in s)return s[u.id];try{let a=await import(u.module);return s[u.id]=a,a}catch(a){return console.error(`Error loading route module \`${u.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function V4(u){return u==null?!1:u.href==null?u.rel==="preload"&&typeof u.imageSrcSet=="string"&&typeof u.imageSizes=="string":typeof u.rel=="string"&&typeof u.href=="string"}async function H4(u,s,a){let c=await Promise.all(u.map(async f=>{let p=s.routes[f.route.id];if(p){let _=await G4(p,a);return _.links?_.links():[]}return[]}));return J4(c.flat(1).filter(V4).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function C0(u,s,a,c,f,p){let _=(k,S)=>a[S]?k.route.id!==a[S].route.id:!0,x=(k,S)=>a[S].pathname!==k.pathname||a[S].route.path?.endsWith("*")&&a[S].params["*"]!==k.params["*"];return p==="assets"?s.filter((k,S)=>_(k,S)||x(k,S)):p==="data"?s.filter((k,S)=>{let D=c.routes[k.route.id];if(!D||!D.hasLoader)return!1;if(_(k,S)||x(k,S))return!0;if(k.route.shouldRevalidate){let F=k.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(u,window.origin),nextParams:k.params,defaultShouldRevalidate:!0});if(typeof F=="boolean")return F}return!0}):[]}function Z4(u,s,{includeHydrateFallback:a}={}){return W4(u.map(c=>{let f=s.routes[c.route.id];if(!f)return[];let p=[f.module];return f.clientActionModule&&(p=p.concat(f.clientActionModule)),f.clientLoaderModule&&(p=p.concat(f.clientLoaderModule)),a&&f.hydrateFallbackModule&&(p=p.concat(f.hydrateFallbackModule)),f.imports&&(p=p.concat(f.imports)),p}).flat(1))}function W4(u){return[...new Set(u)]}function K4(u){let s={},a=Object.keys(u).sort();for(let c of a)s[c]=u[c];return s}function J4(u,s){let a=new Set;return new Set(s),u.reduce((c,f)=>{let p=JSON.stringify(K4(f));return a.has(p)||(a.add(p),c.push({key:p,link:f})),c},[])}function a_(){let u=ge.useContext(eu);return Tf(u,"You must render this element inside a <DataRouterContext.Provider> element"),u}function Y4(){let u=ge.useContext(th);return Tf(u,"You must render this element inside a <DataRouterStateContext.Provider> element"),u}var Af=ge.createContext(void 0);Af.displayName="FrameworkContext";function o_(){let u=ge.useContext(Af);return Tf(u,"You must render this element inside a <HydratedRouter> element"),u}function X4(u,s){let a=ge.useContext(Af),[c,f]=ge.useState(!1),[p,_]=ge.useState(!1),{onFocus:x,onBlur:k,onMouseEnter:S,onMouseLeave:D,onTouchStart:F}=s,H=ge.useRef(null);ge.useEffect(()=>{if(u==="render"&&_(!0),u==="viewport"){let W=ve=>{ve.forEach($e=>{_($e.isIntersecting)})},Y=new IntersectionObserver(W,{threshold:.5});return H.current&&Y.observe(H.current),()=>{Y.disconnect()}}},[u]),ge.useEffect(()=>{if(c){let W=setTimeout(()=>{_(!0)},100);return()=>{clearTimeout(W)}}},[c]);let J=()=>{f(!0)},Q=()=>{f(!1),_(!1)};return a?u!=="intent"?[p,H,{}]:[p,H,{onFocus:Bu(x,J),onBlur:Bu(k,Q),onMouseEnter:Bu(S,J),onMouseLeave:Bu(D,Q),onTouchStart:Bu(F,J)}]:[!1,H,{}]}function Bu(u,s){return a=>{u&&u(a),a.defaultPrevented||s(a)}}function Q4({page:u,...s}){let{router:a}=a_(),c=ge.useMemo(()=>Wg(a.routes,u,a.basename),[a.routes,u,a.basename]);return c?ge.createElement(tx,{page:u,matches:c,...s}):null}function ex(u){let{manifest:s,routeModules:a}=o_(),[c,f]=ge.useState([]);return ge.useEffect(()=>{let p=!1;return H4(u,s,a).then(_=>{p||f(_)}),()=>{p=!0}},[u,s,a]),c}function tx({page:u,matches:s,...a}){let c=Qo(),{manifest:f,routeModules:p}=o_(),{basename:_}=a_(),{loaderData:x,matches:k}=Y4(),S=ge.useMemo(()=>C0(u,s,k,f,c,"data"),[u,s,k,f,c]),D=ge.useMemo(()=>C0(u,s,k,f,c,"assets"),[u,s,k,f,c]),F=ge.useMemo(()=>{if(u===c.pathname+c.search+c.hash)return[];let Q=new Set,W=!1;if(s.forEach(ve=>{let $e=f.routes[ve.route.id];!$e||!$e.hasLoader||(!S.some(Oe=>Oe.route.id===ve.route.id)&&ve.route.id in x&&p[ve.route.id]?.shouldRevalidate||$e.hasClientLoader?W=!0:Q.add(ve.route.id))}),Q.size===0)return[];let Y=q4(u,_,"data");return W&&Q.size>0&&Y.searchParams.set("_routes",s.filter(ve=>Q.has(ve.route.id)).map(ve=>ve.route.id).join(",")),[Y.pathname+Y.search]},[_,x,c,f,S,s,u,p]),H=ge.useMemo(()=>Z4(D,f),[D,f]),J=ex(D);return ge.createElement(ge.Fragment,null,F.map(Q=>ge.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...a})),H.map(Q=>ge.createElement("link",{key:Q,rel:"modulepreload",href:Q,...a})),J.map(({key:Q,link:W})=>ge.createElement("link",{key:Q,nonce:a.nonce,...W})))}function nx(...u){return s=>{u.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var l_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l_&&(window.__reactRouterVersion="7.8.0")}catch{}function rx({basename:u,children:s,window:a}){let c=ge.useRef();c.current==null&&(c.current=G1({window:a,v5Compat:!0}));let f=c.current,[p,_]=ge.useState({action:f.action,location:f.location}),x=ge.useCallback(k=>{ge.startTransition(()=>_(k))},[_]);return ge.useLayoutEffect(()=>f.listen(x),[f,x]),ge.createElement(D4,{basename:u,children:s,location:p.location,navigationType:p.action,navigator:f})}var u_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rh=ge.forwardRef(function({onClick:s,discover:a="render",prefetch:c="none",relative:f,reloadDocument:p,replace:_,state:x,target:k,to:S,preventScrollReset:D,viewTransition:F,...H},J){let{basename:Q}=ge.useContext(Cs),W=typeof S=="string"&&u_.test(S),Y,ve=!1;if(typeof S=="string"&&W&&(Y=S,l_))try{let X=new URL(window.location.href),tt=S.startsWith("//")?new URL(X.protocol+S):new URL(S),lt=oa(tt.pathname,Q);tt.origin===X.origin&&lt!=null?S=lt+tt.search+tt.hash:ve=!0}catch{Ji(!1,`<Link to="${S}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $e=_4(S,{relative:f}),[Oe,ye,Ee]=X4(c,H),De=ox(S,{replace:_,state:x,target:k,preventScrollReset:D,relative:f,viewTransition:F});function He(X){s&&s(X),X.defaultPrevented||De(X)}let _t=ge.createElement("a",{...H,...Ee,href:Y||$e,onClick:ve||p?s:He,ref:nx(J,ye),target:k,"data-discover":!W&&a==="render"?"true":void 0});return Oe&&!W?ge.createElement(ge.Fragment,null,_t,ge.createElement(Q4,{page:$e})):_t});rh.displayName="Link";var ix=ge.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:c="",end:f=!1,style:p,to:_,viewTransition:x,children:k,...S},D){let F=tc(_,{relative:S.relative}),H=Qo(),J=ge.useContext(th),{navigator:Q,basename:W}=ge.useContext(Cs),Y=J!=null&&dx(F)&&x===!0,ve=Q.encodeLocation?Q.encodeLocation(F).pathname:F.pathname,$e=H.pathname,Oe=J&&J.navigation&&J.navigation.location?J.navigation.location.pathname:null;a||($e=$e.toLowerCase(),Oe=Oe?Oe.toLowerCase():null,ve=ve.toLowerCase()),Oe&&W&&(Oe=oa(Oe,W)||Oe);const ye=ve!=="/"&&ve.endsWith("/")?ve.length-1:ve.length;let Ee=$e===ve||!f&&$e.startsWith(ve)&&$e.charAt(ye)==="/",De=Oe!=null&&(Oe===ve||!f&&Oe.startsWith(ve)&&Oe.charAt(ve.length)==="/"),He={isActive:Ee,isPending:De,isTransitioning:Y},_t=Ee?s:void 0,X;typeof c=="function"?X=c(He):X=[c,Ee?"active":null,De?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let tt=typeof p=="function"?p(He):p;return ge.createElement(rh,{...S,"aria-current":_t,className:X,ref:D,style:tt,to:_,viewTransition:x},typeof k=="function"?k(He):k)});ix.displayName="NavLink";var sx=ge.forwardRef(({discover:u="render",fetcherKey:s,navigate:a,reloadDocument:c,replace:f,state:p,method:_=$c,action:x,onSubmit:k,relative:S,preventScrollReset:D,viewTransition:F,...H},J)=>{let Q=cx(),W=hx(x,{relative:S}),Y=_.toLowerCase()==="get"?"get":"post",ve=typeof x=="string"&&u_.test(x),$e=Oe=>{if(k&&k(Oe),Oe.defaultPrevented)return;Oe.preventDefault();let ye=Oe.nativeEvent.submitter,Ee=ye?.getAttribute("formmethod")||_;Q(ye||Oe.currentTarget,{fetcherKey:s,method:Ee,navigate:a,replace:f,state:p,relative:S,preventScrollReset:D,viewTransition:F})};return ge.createElement("form",{ref:J,method:Y,action:W,onSubmit:c?k:$e,...H,"data-discover":!ve&&u==="render"?"true":void 0})});sx.displayName="Form";function ax(u){return`${u} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c_(u){let s=ge.useContext(eu);return dn(s,ax(u)),s}function ox(u,{target:s,replace:a,state:c,preventScrollReset:f,relative:p,viewTransition:_}={}){let x=r_(),k=Qo(),S=tc(u,{relative:p});return ge.useCallback(D=>{if(z4(D,s)){D.preventDefault();let F=a!==void 0?a:Gu(k)===Gu(S);x(u,{replace:F,state:c,preventScrollReset:f,relative:p,viewTransition:_})}},[k,x,S,a,c,s,u,f,p,_])}var lx=0,ux=()=>`__${String(++lx)}__`;function cx(){let{router:u}=c_("useSubmit"),{basename:s}=ge.useContext(Cs),a=P4();return ge.useCallback(async(c,f={})=>{let{action:p,method:_,encType:x,formData:k,body:S}=$4(c,s);if(f.navigate===!1){let D=f.fetcherKey||ux();await u.fetch(D,a,f.action||p,{preventScrollReset:f.preventScrollReset,formData:k,body:S,formMethod:f.method||_,formEncType:f.encType||x,flushSync:f.flushSync})}else await u.navigate(f.action||p,{preventScrollReset:f.preventScrollReset,formData:k,body:S,formMethod:f.method||_,formEncType:f.encType||x,replace:f.replace,state:f.state,fromRouteId:a,flushSync:f.flushSync,viewTransition:f.viewTransition})},[u,s,a])}function hx(u,{relative:s}={}){let{basename:a}=ge.useContext(Cs),c=ge.useContext(bs);dn(c,"useFormAction must be used inside a RouteContext");let[f]=c.matches.slice(-1),p={...tc(u||".",{relative:s})},_=Qo();if(u==null){p.search=_.search;let x=new URLSearchParams(p.search),k=x.getAll("index");if(k.some(D=>D==="")){x.delete("index"),k.filter(F=>F).forEach(F=>x.append("index",F));let D=x.toString();p.search=D?`?${D}`:""}}return(!u||u===".")&&f.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(p.pathname=p.pathname==="/"?a:aa([a,p.pathname])),Gu(p)}function dx(u,{relative:s}={}){let a=ge.useContext(e_);dn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=c_("useViewTransitionState"),f=tc(u,{relative:s});if(!a.isTransitioning)return!1;let p=oa(a.currentLocation.pathname,c)||a.currentLocation.pathname,_=oa(a.nextLocation.pathname,c)||a.nextLocation.pathname;return Zc(f.pathname,_)!=null||Zc(f.pathname,p)!=null}Pg();function jc(){const[u,s]=ge.useState(""),[a,c]=ge.useState(""),[f,p]=ge.useState(!1),[_,x]=ge.useState(!1),[k,S]=ge.useState(null),D=r_(),F=async J=>{J.preventDefault(),p(!0),S(null);const{error:Q}=await Mr.auth.signInWithPassword({email:u,password:a});Q?S(Q.message):D("/dashboard",{replace:!0}),p(!1)},H=async()=>{x(!0),S(null);const{error:J}=await Mr.auth.signUp({email:u,password:a});J?S(J.message):D("/dashboard",{replace:!0}),x(!1)};return se.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:se.jsxs("div",{className:"card max-w-md w-full",children:[se.jsxs("div",{className:"text-center mb-6",children:[se.jsx("img",{src:q1,alt:"Pudumaps logo",className:"w-16 h-16 mx-auto"}),se.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Pudumaps"}),se.jsx("p",{className:"text-gray-400 text-sm",children:"Inicia sesión o crea tu cuenta"})]}),se.jsxs("form",{className:"space-y-5",onSubmit:F,children:[se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Correo electrónico"}),se.jsx("input",{type:"email",className:"input",value:u,onChange:J=>s(J.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Contraseña"}),se.jsx("input",{type:"password",className:"input",value:a,onChange:J=>c(J.target.value),placeholder:"********",required:!0})]}),k&&se.jsx("p",{className:"text-red-400 text-sm",children:k}),se.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:f,children:f?"Entrando...":"Entrar"}),se.jsx("button",{type:"button",onClick:H,className:"btn btn-secondary w-full",disabled:_,children:_?"Creando...":"Crear cuenta"})]}),se.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["¿Primera vez?"," ",se.jsx("span",{className:"text-green-400",children:"Crea tu cuenta"})," y revisa tu correo para confirmar."]}),se.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-4 text-sm text-gray-400",children:[se.jsx("h3",{className:"text-gray-200 font-semibold mb-3",children:"🚀 Roadmap Pudumaps"}),se.jsxs("div",{className:"space-y-3",children:[se.jsxs("div",{children:[se.jsx("h4",{className:"text-gray-300 font-medium",children:"✅ Ahora"}),se.jsxs("ul",{className:"list-disc list-inside",children:[se.jsx("li",{children:"Gestión de proyectos (crear, editar, eliminar, favoritos)"}),se.jsx("li",{children:"Capas GeoJSON con estilos editables y persistentes"}),se.jsx("li",{children:"Capas externas WMS con consulta GetFeatureInfo"}),se.jsx("li",{children:"Exportación de mapas a KMZ y PDF"})]})]}),se.jsxs("div",{children:[se.jsx("h4",{className:"text-gray-300 font-medium",children:"⏳ Próximo"}),se.jsxs("ul",{className:"list-disc list-inside",children:[se.jsx("li",{children:"Soporte para servicios ArcGIS REST"}),se.jsx("li",{children:"Herramientas de medición y dibujo en el mapa"}),se.jsx("li",{children:"Compartir proyectos de forma pública/privada"})]})]}),se.jsxs("div",{children:[se.jsx("h4",{className:"text-gray-300 font-medium",children:"🌌 Futuro"}),se.jsxs("ul",{className:"list-disc list-inside",children:[se.jsx("li",{children:"Roles y permisos colaborativos por proyecto"}),se.jsx("li",{children:"Filtros y estadísticas por atributos"}),se.jsx("li",{children:"Optimización para grandes volúmenes de datos"})]})]})]})]})]})})}function fx({id:u,initialName:s,initialDescription:a,onClose:c,onUpdated:f,onNotify:p}){const[_,x]=ge.useState(s),[k,S]=ge.useState(a||""),[D,F]=ge.useState(!1);async function H(){if(!_){p?.("❌ El proyecto debe tener un nombre","error");return}F(!0);const{error:J}=await Mr.from("projects").update({name:_,description:k}).eq("id",u);if(F(!1),J){p?.("❌ No se pudo actualizar el proyecto","error");return}f(),c(),p?.("✅ Proyecto actualizado","success")}return se.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:se.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[se.jsx("h2",{className:"text-lg font-semibold text-white",children:"✏️ Editar proyecto"}),se.jsxs("div",{className:"space-y-3",children:[se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm text-gray-300",children:"Nombre"}),se.jsx("input",{type:"text",className:"input w-full",value:_,onChange:J=>x(J.target.value)})]}),se.jsxs("div",{children:[se.jsx("label",{className:"block text-sm text-gray-300",children:"Descripción"}),se.jsx("input",{type:"text",className:"input w-full",value:k,onChange:J=>S(J.target.value)})]})]}),se.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[se.jsx("button",{onClick:c,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),se.jsx("button",{onClick:H,disabled:D,className:"px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white transition disabled:opacity-60",children:D?"Guardando…":"Guardar"})]})]})})}function px({id:u,name:s,description:a,isFavorite:c,onDelete:f,onUpdated:p,onToggleFavorite:_,onNotify:x}){const[k,S]=ge.useState(!1);return se.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-md p-5 flex justify-between items-center hover:bg-gray-750 transition",children:[se.jsxs("div",{children:[se.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:["📂 ",s,se.jsx("button",{onClick:_,className:"ml-2 text-lg focus:outline-none hover:scale-110 transition",title:c?"Quitar de favoritos":"Marcar como favorito",children:c?"⭐":"☆"})]}),a?se.jsx("p",{className:"text-sm text-gray-400",children:a}):se.jsx("p",{className:"text-sm text-gray-600 italic",children:"Sin descripción"})]}),se.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[se.jsx(rh,{to:`/project/${u}`,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-blue-600 hover:bg-blue-700 text-white transition",children:"Abrir"}),se.jsx("button",{onClick:()=>S(!0),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-white transition",children:"✏️ Editar"}),se.jsx("button",{onClick:()=>f(u),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition",children:"🗑️ Eliminar"})]}),k&&se.jsx(fx,{id:u,initialName:s,initialDescription:a,onClose:()=>S(!1),onUpdated:p,onNotify:x})]})}function mx({onProjectCreated:u,onNotify:s}){const[a,c]=ge.useState(""),[f,p]=ge.useState(""),[_,x]=ge.useState(!1);async function k(){if(!a){s?.("❌ El proyecto debe tener un nombre","error");return}x(!0);const{data:{user:S}}=await Mr.auth.getUser(),{error:D}=await Mr.from("projects").insert([{name:a,description:f,owner_id:S?.id}]);if(x(!1),D){s?.("❌ No se pudo crear el proyecto","error");return}c(""),p(""),u(),s?.("✅ Proyecto creado","success")}return se.jsxs("div",{className:"card space-y-4",children:[se.jsx("h2",{className:"subtitle",children:"Tus proyectos"}),se.jsx("input",{type:"text",placeholder:"Nombre del proyecto",value:a,onChange:S=>c(S.target.value),className:"input"}),se.jsx("input",{type:"text",placeholder:"Descripción (ej: Capas base de Chile)",value:f,onChange:S=>p(S.target.value),className:"input"}),se.jsx("div",{className:"flex gap-3",children:se.jsx("button",{onClick:k,disabled:_,className:"btn btn-primary disabled:opacity-60",children:_?"Creando…":"Crear y abrir"})})]})}function h_({message:u,type:s="info",duration:a=3e3,onClose:c}){const[f,p]=ge.useState(!0);if(ge.useEffect(()=>{const S=setTimeout(()=>p(!1),a-300),D=setTimeout(()=>c&&c(),a);return()=>{clearTimeout(S),clearTimeout(D)}},[a,c]),!f)return null;const _="px-4 py-2 rounded-md shadow-md text-sm font-medium flex items-center gap-2 transition-opacity duration-300",x={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-blue-600 text-white"},k={success:"✔️",error:"❌",info:"ℹ️"};return se.jsxs("div",{className:`${_} ${x[s]}`,children:[se.jsx("span",{children:k[s]}),se.jsx("span",{children:u})]})}function gx({message:u,onConfirm:s,onCancel:a}){return se.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:se.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 space-y-4",children:[se.jsx("h2",{className:"text-lg font-semibold text-white",children:"⚠️ Confirmar acción"}),se.jsx("p",{className:"text-gray-300",children:u}),se.jsxs("div",{className:"flex justify-end gap-3",children:[se.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),se.jsx("button",{onClick:s,className:"px-3 py-1.5 rounded-md bg-red-600 hover:bg-red-700 text-white transition",children:"Eliminar"})]})]})})}function _x({email:u}){const[s,a]=ge.useState([]),[c,f]=ge.useState(null),[p,_]=ge.useState(null),[x,k]=ge.useState("");function S(W,Y="info"){f({msg:W,type:Y})}async function D(){const{data:W,error:Y}=await Mr.from("projects").select("id, name, description, owner_id, is_favorite").order("is_favorite",{ascending:!1}).order("created_at",{ascending:!1});if(Y){S("❌ No se pudieron cargar los proyectos","error");return}W&&a(W)}async function F(W,Y=!1){const{error:ve}=await Mr.from("projects").update({is_favorite:!Y}).eq("id",W);if(ve){S("❌ No se pudo actualizar favorito","error");return}D(),S(Y?"⭐ Proyecto quitado de favoritos":"⭐ Proyecto marcado como favorito","success")}async function H(W){const{error:Y}=await Mr.from("projects").delete().eq("id",W);if(Y){S("❌ Error al eliminar proyecto","error");return}a(ve=>ve.filter($e=>$e.id!==W)),S("🗑️ Proyecto eliminado","success")}async function J(){await Mr.auth.signOut(),S("👋 Sesión cerrada","info"),setTimeout(()=>window.location.reload(),1e3)}ge.useEffect(()=>{D()},[]);const Q=s.filter(W=>W.name.toLowerCase().includes(x.toLowerCase())||(W.description?.toLowerCase()||"").includes(x.toLowerCase()));return se.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-6 relative",children:[c&&se.jsx("div",{className:"fixed top-4 right-4 z-50",children:se.jsx(h_,{message:c.msg,type:c.type,duration:3e3,onClose:()=>f(null)})}),se.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[se.jsxs("div",{className:"flex items-center justify-between",children:[se.jsxs("div",{children:[se.jsx("h1",{className:"title",children:"Sesión iniciada en Pudumaps"}),se.jsx("p",{className:"text-muted",children:u})]}),se.jsx("button",{onClick:J,className:"btn btn-danger",children:"Cerrar sesión"})]}),se.jsx(mx,{onProjectCreated:()=>{D(),S("✅ Proyecto creado","success")},onNotify:S}),se.jsx("div",{children:se.jsx("input",{type:"text",placeholder:"🔍 Buscar proyectos...",value:x,onChange:W=>k(W.target.value),className:"input w-full"})}),se.jsxs("div",{className:"space-y-3",children:[Q.map(W=>se.jsx(px,{id:W.id,name:W.name,description:W.description,isFavorite:W.is_favorite??!1,onDelete:Y=>_(Y),onUpdated:()=>{D(),S("✅ Proyecto actualizado","success")},onToggleFavorite:()=>F(W.id,W.is_favorite??!1),onNotify:S},W.id)),Q.length===0&&se.jsx("p",{className:"text-muted text-center",children:"No se encontraron proyectos."})]})]}),p&&se.jsx(gx,{message:"¿Seguro que deseas eliminar este proyecto?",onCancel:()=>_(null),onConfirm:()=>{H(p),_(null)}})]})}function b0({children:u,fallback:s}){const[a,c]=ge.useState(null),[f,p]=ge.useState(!0);return ge.useEffect(()=>{Mr.auth.getSession().then(({data:x})=>{c(x.session),p(!1)});const{data:{subscription:_}}=Mr.auth.onAuthStateChange((x,k)=>{c(k)});return()=>_.unsubscribe()},[]),f?se.jsx("div",{className:"flex min-h-screen items-center justify-center",children:se.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-xl shadow p-6",children:"Cargando…"})}):a?se.jsx(se.Fragment,{children:u(a)}):se.jsx(se.Fragment,{children:s})}function vx({projectId:u,onLayerAdded:s,onError:a}){const c=ge.useRef(null),[f,p]=ge.useState(!1);async function _(x){if(!x||x.length===0)return;const k=x[0];p(!0);try{const S=await k.text(),D=JSON.parse(S),{data:F,error:H}=await Mr.from("project_layers").insert({project_id:u,name:k.name.replace(/\.[^.]+$/,""),geojson:D}).select().single();if(H)throw H;const J={layer_id:F.id,color:"#3388ff",weight:2,opacity:1,fillColor:"#3388ff",fillOpacity:.2,radius:6};s?.(F,J)}catch(S){console.error(S),a?.(S.message||"No se pudo subir el archivo")}finally{p(!1)}}return se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("input",{ref:c,type:"file",accept:".geojson,.json",className:"hidden",onChange:x=>_(x.target.files)}),se.jsx("button",{type:"button",onClick:()=>c.current?.click(),disabled:f,className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow disabled:opacity-60 transition",children:f?"Subiendo…":"📤 Subir GeoJSON/KMZ/KML"})]})}function yx({layers:u,visible:s,onToggleVisible:a,onZoom:c,onDelete:f}){return u.length===0?se.jsx("div",{className:"hint",children:"No hay capas todavía. Sube una para empezar."}):se.jsx("div",{className:"layer-list",children:u.map(p=>se.jsxs("div",{className:"layer-item",children:[se.jsxs("label",{children:[se.jsx("input",{type:"checkbox",checked:s[p.id],onChange:()=>a(p.id)}),p.name]}),se.jsx("button",{onClick:()=>c(p),children:"🔍"}),se.jsx("button",{onClick:()=>f(p),children:"🗑️"})]},p.id))})}function wx(u,s){const a=ge.useRef(s);ge.useEffect(function(){s!==a.current&&u.attributionControl!=null&&(a.current!=null&&u.attributionControl.removeAttribution(a.current),s!=null&&u.attributionControl.addAttribution(s)),a.current=s},[u,s])}const xx=1;function kx(u){return Object.freeze({__version:xx,map:u})}function d_(u,s){return Object.freeze({...u,...s})}const f_=ge.createContext(null),Df=f_.Provider;function Of(){const u=ge.useContext(f_);if(u==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return u}function Lx(u){function s(a,c){const{instance:f,context:p}=u(a).current;return ge.useImperativeHandle(c,()=>f),a.children==null?null:$u.createElement(Df,{value:p},a.children)}return ge.forwardRef(s)}function p_(u){function s(a,c){const{instance:f}=u(a).current;return ge.useImperativeHandle(c,()=>f),null}return ge.forwardRef(s)}function m_(u){return function(a){const c=Of(),f=u(a,c),{instance:p}=f.current,_=ge.useRef(a.position),{position:x}=a;return ge.useEffect(function(){return p.addTo(c.map),function(){p.remove()}},[c.map,p]),ge.useEffect(function(){x!=null&&x!==_.current&&(p.setPosition(x),_.current=x)},[p,x]),f}}function Cx(u,s){const a=ge.useRef();ge.useEffect(function(){return s!=null&&u.instance.on(s),a.current=s,function(){a.current!=null&&u.instance.off(a.current),a.current=null}},[u,s])}function g_(u,s){const a=u.pane??s.pane;return a?{...u,pane:a}:u}var Ou={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var bx=Ou.exports,E0;function Rf(){return E0||(E0=1,(function(u,s){(function(a,c){c(s)})(bx,(function(a){var c="1.9.4";function f(t){var l,v,C,A;for(v=1,C=arguments.length;v<C;v++){A=arguments[v];for(l in A)t[l]=A[l]}return t}var p=Object.create||(function(){function t(){}return function(l){return t.prototype=l,new t}})();function _(t,l){var v=Array.prototype.slice;if(t.bind)return t.bind.apply(t,v.call(arguments,1));var C=v.call(arguments,2);return function(){return t.apply(l,C.length?C.concat(v.call(arguments)):arguments)}}var x=0;function k(t){return"_leaflet_id"in t||(t._leaflet_id=++x),t._leaflet_id}function S(t,l,v){var C,A,j,ie;return ie=function(){C=!1,A&&(j.apply(v,A),A=!1)},j=function(){C?A=arguments:(t.apply(v,arguments),setTimeout(ie,l),C=!0)},j}function D(t,l,v){var C=l[1],A=l[0],j=C-A;return t===C&&v?t:((t-A)%j+j)%j+A}function F(){return!1}function H(t,l){if(l===!1)return t;var v=Math.pow(10,l===void 0?6:l);return Math.round(t*v)/v}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Q(t){return J(t).split(/\s+/)}function W(t,l){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var v in l)t.options[v]=l[v];return t.options}function Y(t,l,v){var C=[];for(var A in t)C.push(encodeURIComponent(v?A.toUpperCase():A)+"="+encodeURIComponent(t[A]));return(!l||l.indexOf("?")===-1?"?":"&")+C.join("&")}var ve=/\{ *([\w_ -]+) *\}/g;function $e(t,l){return t.replace(ve,function(v,C){var A=l[C];if(A===void 0)throw new Error("No value provided for variable "+v);return typeof A=="function"&&(A=A(l)),A})}var Oe=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ye(t,l){for(var v=0;v<t.length;v++)if(t[v]===l)return v;return-1}var Ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function De(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var He=0;function _t(t){var l=+new Date,v=Math.max(0,16-(l-He));return He=l+v,window.setTimeout(t,v)}var X=window.requestAnimationFrame||De("RequestAnimationFrame")||_t,tt=window.cancelAnimationFrame||De("CancelAnimationFrame")||De("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function lt(t,l,v){if(v&&X===_t)t.call(l);else return X.call(window,_(t,l))}function wt(t){t&&tt.call(window,t)}var Ct={__proto__:null,extend:f,create:p,bind:_,get lastId(){return x},stamp:k,throttle:S,wrapNum:D,falseFn:F,formatNum:H,trim:J,splitWords:Q,setOptions:W,getParamString:Y,template:$e,isArray:Oe,indexOf:ye,emptyImageUrl:Ee,requestFn:X,cancelFn:tt,requestAnimFrame:lt,cancelAnimFrame:wt};function Jt(){}Jt.extend=function(t){var l=function(){W(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=l.__super__=this.prototype,C=p(v);C.constructor=l,l.prototype=C;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(l[A]=this[A]);return t.statics&&f(l,t.statics),t.includes&&(vn(t.includes),f.apply(null,[C].concat(t.includes))),f(C,t),delete C.statics,delete C.includes,C.options&&(C.options=v.options?p(v.options):{},f(C.options,t.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,ie=C._initHooks.length;j<ie;j++)C._initHooks[j].call(this)}},l},Jt.include=function(t){var l=this.prototype.options;return f(this.prototype,t),t.options&&(this.prototype.options=l,this.mergeOptions(t.options)),this},Jt.mergeOptions=function(t){return f(this.prototype.options,t),this},Jt.addInitHook=function(t){var l=Array.prototype.slice.call(arguments,1),v=typeof t=="function"?t:function(){this[t].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function vn(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Oe(t)?t:[t];for(var l=0;l<t.length;l++)t[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ft={on:function(t,l,v){if(typeof t=="object")for(var C in t)this._on(C,t[C],l);else{t=Q(t);for(var A=0,j=t.length;A<j;A++)this._on(t[A],l,v)}return this},off:function(t,l,v){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var C in t)this._off(C,t[C],l);else{t=Q(t);for(var A=arguments.length===1,j=0,ie=t.length;j<ie;j++)A?this._off(t[j]):this._off(t[j],l,v)}return this},_on:function(t,l,v,C){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(t,l,v)===!1){v===this&&(v=void 0);var A={fn:l,ctx:v};C&&(A.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(A)}},_off:function(t,l,v){var C,A,j;if(this._events&&(C=this._events[t],!!C)){if(arguments.length===1){if(this._firingCount)for(A=0,j=C.length;A<j;A++)C[A].fn=F;delete this._events[t];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var ie=this._listens(t,l,v);if(ie!==!1){var xe=C[ie];this._firingCount&&(xe.fn=F,this._events[t]=C=C.slice()),C.splice(ie,1)}}},fire:function(t,l,v){if(!this.listens(t,v))return this;var C=f({},l,{type:t,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var A=this._events[t];if(A){this._firingCount=this._firingCount+1||1;for(var j=0,ie=A.length;j<ie;j++){var xe=A[j],Be=xe.fn;xe.once&&this.off(t,Be,xe.ctx),Be.call(xe.ctx||this,C)}this._firingCount--}}return v&&this._propagateEvent(C),this},listens:function(t,l,v,C){typeof t!="string"&&console.warn('"string" type argument expected');var A=l;typeof l!="function"&&(C=!!l,A=void 0,v=void 0);var j=this._events&&this._events[t];if(j&&j.length&&this._listens(t,A,v)!==!1)return!0;if(C){for(var ie in this._eventParents)if(this._eventParents[ie].listens(t,l,v,C))return!0}return!1},_listens:function(t,l,v){if(!this._events)return!1;var C=this._events[t]||[];if(!l)return!!C.length;v===this&&(v=void 0);for(var A=0,j=C.length;A<j;A++)if(C[A].fn===l&&C[A].ctx===v)return A;return!1},once:function(t,l,v){if(typeof t=="object")for(var C in t)this._on(C,t[C],l,!0);else{t=Q(t);for(var A=0,j=t.length;A<j;A++)this._on(t[A],l,v,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[k(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[k(t)],this},_propagateEvent:function(t){for(var l in this._eventParents)this._eventParents[l].fire(t.type,f({layer:t.target,propagatedFrom:t.target},t),!0)}};Ft.addEventListener=Ft.on,Ft.removeEventListener=Ft.clearAllEventListeners=Ft.off,Ft.addOneTimeEventListener=Ft.once,Ft.fireEvent=Ft.fire,Ft.hasEventListeners=Ft.listens;var zt=Jt.extend(Ft);function Re(t,l,v){this.x=v?Math.round(t):t,this.y=v?Math.round(l):l}var vt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Re.prototype={clone:function(){return new Re(this.x,this.y)},add:function(t){return this.clone()._add(Ne(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Ne(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Re(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Re(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=vt(this.x),this.y=vt(this.y),this},distanceTo:function(t){t=Ne(t);var l=t.x-this.x,v=t.y-this.y;return Math.sqrt(l*l+v*v)},equals:function(t){return t=Ne(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Ne(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+H(this.x)+", "+H(this.y)+")"}};function Ne(t,l,v){return t instanceof Re?t:Oe(t)?new Re(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Re(t.x,t.y):new Re(t,l,v)}function ce(t,l){if(t)for(var v=l?[t,l]:t,C=0,A=v.length;C<A;C++)this.extend(v[C])}ce.prototype={extend:function(t){var l,v;if(!t)return this;if(t instanceof Re||typeof t[0]=="number"||"x"in t)l=v=Ne(t);else if(t=Fe(t),l=t.min,v=t.max,!l||!v)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=v.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(t){return Ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Ne(this.min.x,this.max.y)},getTopRight:function(){return Ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var l,v;return typeof t[0]=="number"||t instanceof Re?t=Ne(t):t=Fe(t),t instanceof ce?(l=t.min,v=t.max):l=v=t,l.x>=this.min.x&&v.x<=this.max.x&&l.y>=this.min.y&&v.y<=this.max.y},intersects:function(t){t=Fe(t);var l=this.min,v=this.max,C=t.min,A=t.max,j=A.x>=l.x&&C.x<=v.x,ie=A.y>=l.y&&C.y<=v.y;return j&&ie},overlaps:function(t){t=Fe(t);var l=this.min,v=this.max,C=t.min,A=t.max,j=A.x>l.x&&C.x<v.x,ie=A.y>l.y&&C.y<v.y;return j&&ie},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var l=this.min,v=this.max,C=Math.abs(l.x-v.x)*t,A=Math.abs(l.y-v.y)*t;return Fe(Ne(l.x-C,l.y-A),Ne(v.x+C,v.y+A))},equals:function(t){return t?(t=Fe(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Fe(t,l){return!t||t instanceof ce?t:new ce(t,l)}function mt(t,l){if(t)for(var v=l?[t,l]:t,C=0,A=v.length;C<A;C++)this.extend(v[C])}mt.prototype={extend:function(t){var l=this._southWest,v=this._northEast,C,A;if(t instanceof O)C=t,A=t;else if(t instanceof mt){if(C=t._southWest,A=t._northEast,!C||!A)return this}else return t?this.extend(q(t)||ut(t)):this;return!l&&!v?(this._southWest=new O(C.lat,C.lng),this._northEast=new O(A.lat,A.lng)):(l.lat=Math.min(C.lat,l.lat),l.lng=Math.min(C.lng,l.lng),v.lat=Math.max(A.lat,v.lat),v.lng=Math.max(A.lng,v.lng)),this},pad:function(t){var l=this._southWest,v=this._northEast,C=Math.abs(l.lat-v.lat)*t,A=Math.abs(l.lng-v.lng)*t;return new mt(new O(l.lat-C,l.lng-A),new O(v.lat+C,v.lng+A))},getCenter:function(){return new O((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new O(this.getNorth(),this.getWest())},getSouthEast:function(){return new O(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof O||"lat"in t?t=q(t):t=ut(t);var l=this._southWest,v=this._northEast,C,A;return t instanceof mt?(C=t.getSouthWest(),A=t.getNorthEast()):C=A=t,C.lat>=l.lat&&A.lat<=v.lat&&C.lng>=l.lng&&A.lng<=v.lng},intersects:function(t){t=ut(t);var l=this._southWest,v=this._northEast,C=t.getSouthWest(),A=t.getNorthEast(),j=A.lat>=l.lat&&C.lat<=v.lat,ie=A.lng>=l.lng&&C.lng<=v.lng;return j&&ie},overlaps:function(t){t=ut(t);var l=this._southWest,v=this._northEast,C=t.getSouthWest(),A=t.getNorthEast(),j=A.lat>l.lat&&C.lat<v.lat,ie=A.lng>l.lng&&C.lng<v.lng;return j&&ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,l){return t?(t=ut(t),this._southWest.equals(t.getSouthWest(),l)&&this._northEast.equals(t.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(t,l){return t instanceof mt?t:new mt(t,l)}function O(t,l,v){if(isNaN(t)||isNaN(l))throw new Error("Invalid LatLng object: ("+t+", "+l+")");this.lat=+t,this.lng=+l,v!==void 0&&(this.alt=+v)}O.prototype={equals:function(t,l){if(!t)return!1;t=q(t);var v=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return v<=(l===void 0?1e-9:l)},toString:function(t){return"LatLng("+H(this.lat,t)+", "+H(this.lng,t)+")"},distanceTo:function(t){return fe.distance(this,q(t))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(t){var l=180*t/40075017,v=l/Math.cos(Math.PI/180*this.lat);return ut([this.lat-l,this.lng-v],[this.lat+l,this.lng+v])},clone:function(){return new O(this.lat,this.lng,this.alt)}};function q(t,l,v){return t instanceof O?t:Oe(t)&&typeof t[0]!="object"?t.length===3?new O(t[0],t[1],t[2]):t.length===2?new O(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new O(t.lat,"lng"in t?t.lng:t.lon,t.alt):l===void 0?null:new O(t,l,v)}var re={latLngToPoint:function(t,l){var v=this.projection.project(t),C=this.scale(l);return this.transformation._transform(v,C)},pointToLatLng:function(t,l){var v=this.scale(l),C=this.transformation.untransform(t,v);return this.projection.unproject(C)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var l=this.projection.bounds,v=this.scale(t),C=this.transformation.transform(l.min,v),A=this.transformation.transform(l.max,v);return new ce(C,A)},infinite:!1,wrapLatLng:function(t){var l=this.wrapLng?D(t.lng,this.wrapLng,!0):t.lng,v=this.wrapLat?D(t.lat,this.wrapLat,!0):t.lat,C=t.alt;return new O(v,l,C)},wrapLatLngBounds:function(t){var l=t.getCenter(),v=this.wrapLatLng(l),C=l.lat-v.lat,A=l.lng-v.lng;if(C===0&&A===0)return t;var j=t.getSouthWest(),ie=t.getNorthEast(),xe=new O(j.lat-C,j.lng-A),Be=new O(ie.lat-C,ie.lng-A);return new mt(xe,Be)}},fe=f({},re,{wrapLng:[-180,180],R:6371e3,distance:function(t,l){var v=Math.PI/180,C=t.lat*v,A=l.lat*v,j=Math.sin((l.lat-t.lat)*v/2),ie=Math.sin((l.lng-t.lng)*v/2),xe=j*j+Math.cos(C)*Math.cos(A)*ie*ie,Be=2*Math.atan2(Math.sqrt(xe),Math.sqrt(1-xe));return this.R*Be}}),Ae=6378137,Ye={R:Ae,MAX_LATITUDE:85.0511287798,project:function(t){var l=Math.PI/180,v=this.MAX_LATITUDE,C=Math.max(Math.min(v,t.lat),-v),A=Math.sin(C*l);return new Re(this.R*t.lng*l,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(t){var l=180/Math.PI;return new O((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*l,t.x*l/this.R)},bounds:(function(){var t=Ae*Math.PI;return new ce([-t,-t],[t,t])})()};function de(t,l,v,C){if(Oe(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=l,this._c=v,this._d=C}de.prototype={transform:function(t,l){return this._transform(t.clone(),l)},_transform:function(t,l){return l=l||1,t.x=l*(this._a*t.x+this._b),t.y=l*(this._c*t.y+this._d),t},untransform:function(t,l){return l=l||1,new Re((t.x/l-this._b)/this._a,(t.y/l-this._d)/this._c)}};function ze(t,l,v,C){return new de(t,l,v,C)}var Ie=f({},fe,{code:"EPSG:3857",projection:Ye,transformation:(function(){var t=.5/(Math.PI*Ye.R);return ze(t,.5,-t,.5)})()}),qe=f({},Ie,{code:"EPSG:900913"});function Ze(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function We(t,l){var v="",C,A,j,ie,xe,Be;for(C=0,j=t.length;C<j;C++){for(xe=t[C],A=0,ie=xe.length;A<ie;A++)Be=xe[A],v+=(A?"L":"M")+Be.x+" "+Be.y;v+=l?ft.svg?"z":"x":""}return v||"M0 0"}var Qe=document.documentElement.style,ot="ActiveXObject"in window,St=ot&&!document.addEventListener,fn="msLaunchUri"in navigator&&!("documentMode"in document),li=An("webkit"),ua=An("android"),ro=An("android 2")||An("android 3"),il=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),sl=ua&&An("Google")&&il<537&&!("AudioNode"in window),ca=!!window.opera,ha=!fn&&An("chrome"),Es=An("gecko")&&!li&&!ca&&!ot,io=!ha&&An("safari"),Mi=An("phantom"),Xi="OTransition"in Qe,Qi=navigator.platform.indexOf("Win")===0,so=ot&&"transition"in Qe,Ms="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ro,es="MozPerspective"in Qe,da=!window.L_DISABLE_3D&&(so||Ms||es)&&!Xi&&!Mi,Yr=typeof orientation<"u"||An("mobile"),ao=Yr&&li,oo=Yr&&Ms,Ss=!window.PointerEvent&&window.MSPointerEvent,Si=!!(window.PointerEvent||Ss),Pi="ontouchstart"in window||!!window.TouchEvent,al=!window.L_NO_TOUCH&&(Pi||Si),ol=Yr&&ca,lo=Yr&&Es,uo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ll=(function(){var t=!1;try{var l=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",F,l),window.removeEventListener("testPassiveEventSupport",F,l)}catch{}return t})(),co=(function(){return!!document.createElement("canvas").getContext})(),fa=!!(document.createElementNS&&Ze("svg").createSVGRect),ts=!!fa&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ho=!fa&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var l=t.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Ps=navigator.platform.indexOf("Mac")===0,nu=navigator.platform.indexOf("Linux")===0;function An(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ft={ie:ot,ielt9:St,edge:fn,webkit:li,android:ua,android23:ro,androidStock:sl,opera:ca,chrome:ha,gecko:Es,safari:io,phantom:Mi,opera12:Xi,win:Qi,ie3d:so,webkit3d:Ms,gecko3d:es,any3d:da,mobile:Yr,mobileWebkit:ao,mobileWebkit3d:oo,msPointer:Ss,pointer:Si,touch:al,touchNative:Pi,mobileOpera:ol,mobileGecko:lo,retina:uo,passiveEvents:ll,canvas:co,svg:fa,vml:ho,inlineSvg:ts,mac:Ps,linux:nu},Bs=ft.msPointer?"MSPointerDown":"pointerdown",pa=ft.msPointer?"MSPointerMove":"pointermove",fo=ft.msPointer?"MSPointerUp":"pointerup",ul=ft.msPointer?"MSPointerCancel":"pointercancel",po={touchstart:Bs,touchmove:pa,touchend:fo,touchcancel:ul},ui={touchstart:on,touchmove:ma,touchend:ma,touchcancel:ma},Bi={},mo=!1;function ru(t,l,v){return l==="touchstart"&&go(),ui[l]?(v=ui[l].bind(this,v),t.addEventListener(po[l],v,!1),v):(console.warn("wrong event specified:",l),F)}function cl(t,l,v){if(!po[l]){console.warn("wrong event specified:",l);return}t.removeEventListener(po[l],v,!1)}function hl(t){Bi[t.pointerId]=t}function dl(t){Bi[t.pointerId]&&(Bi[t.pointerId]=t)}function Ts(t){delete Bi[t.pointerId]}function go(){mo||(document.addEventListener(Bs,hl,!0),document.addEventListener(pa,dl,!0),document.addEventListener(fo,Ts,!0),document.addEventListener(ul,Ts,!0),mo=!0)}function ma(t,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var v in Bi)l.touches.push(Bi[v]);l.changedTouches=[l],t(l)}}function on(t,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ln(l),ma(t,l)}function iu(t){var l={},v,C;for(C in t)v=t[C],l[C]=v&&v.bind?v.bind(t):v;return t=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var _o=200;function fl(t,l){t.addEventListener("dblclick",l);var v=0,C;function A(j){if(j.detail!==1){C=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var ie=Ai(j);if(!(ie.some(function(Be){return Be instanceof HTMLLabelElement&&Be.attributes.for})&&!ie.some(function(Be){return Be instanceof HTMLInputElement||Be instanceof HTMLSelectElement}))){var xe=Date.now();xe-v<=_o?(C++,C===2&&l(iu(j))):C=1,v=xe}}}return t.addEventListener("click",A),{dblclick:l,simDblclick:A}}function ga(t,l){t.removeEventListener("dblclick",l.dblclick),t.removeEventListener("click",l.simDblclick)}var vo=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ns=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),As=ns==="webkitTransition"||ns==="OTransition"?ns+"End":"transitionend";function hr(t){return typeof t=="string"?document.getElementById(t):t}function ci(t,l){var v=t.style[l]||t.currentStyle&&t.currentStyle[l];if((!v||v==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(t,null);v=C?C[l]:null}return v==="auto"?null:v}function Tt(t,l,v){var C=document.createElement(t);return C.className=l||"",v&&v.appendChild(C),C}function Yt(t){var l=t.parentNode;l&&l.removeChild(t)}function Ds(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function rs(t){var l=t.parentNode;l&&l.lastChild!==t&&l.appendChild(t)}function Pr(t){var l=t.parentNode;l&&l.firstChild!==t&&l.insertBefore(t,l.firstChild)}function is(t,l){if(t.classList!==void 0)return t.classList.contains(l);var v=_a(t);return v.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(v)}function Et(t,l){if(t.classList!==void 0)for(var v=Q(l),C=0,A=v.length;C<A;C++)t.classList.add(v[C]);else if(!is(t,l)){var j=_a(t);yo(t,(j?j+" ":"")+l)}}function Xt(t,l){t.classList!==void 0?t.classList.remove(l):yo(t,J((" "+_a(t)+" ").replace(" "+l+" "," ")))}function yo(t,l){t.className.baseVal===void 0?t.className=l:t.className.baseVal=l}function _a(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function qn(t,l){"opacity"in t.style?t.style.opacity=l:"filter"in t.style&&pl(t,l)}function pl(t,l){var v=!1,C="DXImageTransform.Microsoft.Alpha";try{v=t.filters.item(C)}catch{if(l===1)return}l=Math.round(l*100),v?(v.Enabled=l!==100,v.Opacity=l):t.style.filter+=" progid:"+C+"(opacity="+l+")"}function ss(t){for(var l=document.documentElement.style,v=0;v<t.length;v++)if(t[v]in l)return t[v];return!1}function dr(t,l,v){var C=l||new Re(0,0);t.style[vo]=(ft.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(v?" scale("+v+")":"")}function un(t,l){t._leaflet_pos=l,ft.any3d?dr(t,l):(t.style.left=l.x+"px",t.style.top=l.y+"px")}function Xr(t){return t._leaflet_pos||new Re(0,0)}var jt,as,va;if("onselectstart"in document)jt=function(){bt(window,"selectstart",ln)},as=function(){Wt(window,"selectstart",ln)};else{var hi=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);jt=function(){if(hi){var t=document.documentElement.style;va=t[hi],t[hi]="none"}},as=function(){hi&&(document.documentElement.style[hi]=va,va=void 0)}}function ya(){bt(window,"dragstart",ln)}function wa(){Wt(window,"dragstart",ln)}var Os,Rs;function os(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(fr(),Os=t,Rs=t.style.outlineStyle,t.style.outlineStyle="none",bt(window,"keydown",fr))}function fr(){Os&&(Os.style.outlineStyle=Rs,Os=void 0,Rs=void 0,Wt(window,"keydown",fr))}function Qr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Br(t){var l=t.getBoundingClientRect();return{x:l.width/t.offsetWidth||1,y:l.height/t.offsetHeight||1,boundingClientRect:l}}var Is={__proto__:null,TRANSFORM:vo,TRANSITION:ns,TRANSITION_END:As,get:hr,getStyle:ci,create:Tt,remove:Yt,empty:Ds,toFront:rs,toBack:Pr,hasClass:is,addClass:Et,removeClass:Xt,setClass:yo,getClass:_a,setOpacity:qn,testProp:ss,setTransform:dr,setPosition:un,getPosition:Xr,get disableTextSelection(){return jt},get enableTextSelection(){return as},disableImageDrag:ya,enableImageDrag:wa,preventOutline:os,restoreOutline:fr,getSizedParentNode:Qr,getScale:Br};function bt(t,l,v,C){if(l&&typeof l=="object")for(var A in l)xo(t,A,l[A],v);else{l=Q(l);for(var j=0,ie=l.length;j<ie;j++)xo(t,l[j],v,C)}return this}var yn="_leaflet_events";function Wt(t,l,v,C){if(arguments.length===1)wo(t),delete t[yn];else if(l&&typeof l=="object")for(var A in l)ei(t,A,l[A],v);else if(l=Q(l),arguments.length===2)wo(t,function(xe){return ye(l,xe)!==-1});else for(var j=0,ie=l.length;j<ie;j++)ei(t,l[j],v,C);return this}function wo(t,l){for(var v in t[yn]){var C=v.split(/\d/)[0];(!l||l(C))&&ei(t,C,null,null,v)}}var Ti={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xo(t,l,v,C){var A=l+k(v)+(C?"_"+k(C):"");if(t[yn]&&t[yn][A])return this;var j=function(xe){return v.call(C||t,xe||window.event)},ie=j;!ft.touchNative&&ft.pointer&&l.indexOf("touch")===0?j=ru(t,l,j):ft.touch&&l==="dblclick"?j=fl(t,j):"addEventListener"in t?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?t.addEventListener(Ti[l]||l,j,ft.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(j=function(xe){xe=xe||window.event,zs(t,xe)&&ie(xe)},t.addEventListener(Ti[l],j,!1)):t.addEventListener(l,ie,!1):t.attachEvent("on"+l,j),t[yn]=t[yn]||{},t[yn][A]=j}function ei(t,l,v,C,A){A=A||l+k(v)+(C?"_"+k(C):"");var j=t[yn]&&t[yn][A];if(!j)return this;!ft.touchNative&&ft.pointer&&l.indexOf("touch")===0?cl(t,l,j):ft.touch&&l==="dblclick"?ga(t,j):"removeEventListener"in t?t.removeEventListener(Ti[l]||l,j,!1):t.detachEvent("on"+l,j),t[yn][A]=null}function Tr(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function xa(t){return xo(t,"wheel",Tr),this}function Fs(t){return bt(t,"mousedown touchstart dblclick contextmenu",Tr),t._leaflet_disable_click=!0,this}function ln(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function pr(t){return ln(t),Tr(t),this}function Ai(t){if(t.composedPath)return t.composedPath();for(var l=[],v=t.target;v;)l.push(v),v=v.parentNode;return l}function Ns(t,l){if(!l)return new Re(t.clientX,t.clientY);var v=Br(l),C=v.boundingClientRect;return new Re((t.clientX-C.left)/v.x-l.clientLeft,(t.clientY-C.top)/v.y-l.clientTop)}var su=ft.linux&&ft.chrome?window.devicePixelRatio:ft.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ml(t){return ft.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/su:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function zs(t,l){var v=l.relatedTarget;if(!v)return!0;try{for(;v&&v!==t;)v=v.parentNode}catch{return!1}return v!==t}var Di={__proto__:null,on:bt,off:Wt,stopPropagation:Tr,disableScrollPropagation:xa,disableClickPropagation:Fs,preventDefault:ln,stop:pr,getPropagationPath:Ai,getMousePosition:Ns,getWheelDelta:ml,isExternalTarget:zs,addListener:bt,removeListener:Wt},ka=zt.extend({run:function(t,l,v,C){this.stop(),this._el=t,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=Xr(t),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=lt(this._animate,this),this._step()},_step:function(t){var l=+new Date-this._startTime,v=this._duration*1e3;l<v?this._runFrame(this._easeOut(l/v),t):(this._runFrame(1),this._complete())},_runFrame:function(t,l){var v=this._startPos.add(this._offset.multiplyBy(t));l&&v._round(),un(this._el,v),this.fire("step")},_complete:function(){wt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),It=zt.extend({options:{crs:Ie,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,l){l=W(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(q(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ns&&ft.any3d&&!ft.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,As,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,l,v){if(l=l===void 0?this._zoom:this._limitZoom(l),t=this._limitCenter(q(t),l,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=f({animate:v.animate},v.zoom),v.pan=f({animate:v.animate,duration:v.duration},v.pan));var C=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,l,v.zoom):this._tryAnimatedPan(t,v.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(t,l,v.pan&&v.pan.noMoveStart),this},setZoom:function(t,l){return this._loaded?this.setView(this.getCenter(),t,{zoom:l}):(this._zoom=t,this)},zoomIn:function(t,l){return t=t||(ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,l)},zoomOut:function(t,l){return t=t||(ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,l)},setZoomAround:function(t,l,v){var C=this.getZoomScale(l),A=this.getSize().divideBy(2),j=t instanceof Re?t:this.latLngToContainerPoint(t),ie=j.subtract(A).multiplyBy(1-1/C),xe=this.containerPointToLatLng(A.add(ie));return this.setView(xe,l,{zoom:v})},_getBoundsCenterZoom:function(t,l){l=l||{},t=t.getBounds?t.getBounds():ut(t);var v=Ne(l.paddingTopLeft||l.padding||[0,0]),C=Ne(l.paddingBottomRight||l.padding||[0,0]),A=this.getBoundsZoom(t,!1,v.add(C));if(A=typeof l.maxZoom=="number"?Math.min(l.maxZoom,A):A,A===1/0)return{center:t.getCenter(),zoom:A};var j=C.subtract(v).divideBy(2),ie=this.project(t.getSouthWest(),A),xe=this.project(t.getNorthEast(),A),Be=this.unproject(ie.add(xe).divideBy(2).add(j),A);return{center:Be,zoom:A}},fitBounds:function(t,l){if(t=ut(t),!t.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(t,l);return this.setView(v.center,v.zoom,l)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,l){return this.setView(t,this._zoom,{pan:l})},panBy:function(t,l){if(t=Ne(t).round(),l=l||{},!t.x&&!t.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ka,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Et(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,v,l.duration||.25,l.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,l,v){if(v=v||{},v.animate===!1||!ft.any3d)return this.setView(t,l,v);this._stop();var C=this.project(this.getCenter()),A=this.project(t),j=this.getSize(),ie=this._zoom;t=q(t),l=l===void 0?ie:l;var xe=Math.max(j.x,j.y),Be=xe*this.getZoomScale(ie,l),Ue=A.distanceTo(C)||1,nt=1.42,yt=nt*nt;function At(Gt){var zi=Gt?-1:1,hu=Gt?Be:xe,qr=Be*Be-xe*xe+zi*yt*yt*Ue*Ue,ji=2*hu*yt*Ue,Gr=qr/ji,yi=Math.sqrt(Gr*Gr+1)-Gr,Fa=yi<1e-9?-18:Math.log(yi);return Fa}function Cn(Gt){return(Math.exp(Gt)-Math.exp(-Gt))/2}function mn(Gt){return(Math.exp(Gt)+Math.exp(-Gt))/2}function On(Gt){return Cn(Gt)/mn(Gt)}var nn=At(0);function jr(Gt){return xe*(mn(nn)/mn(nn+nt*Gt))}function Js(Gt){return xe*(mn(nn)*On(nn+nt*Gt)-Cn(nn))/yt}function wr(Gt){return 1-Math.pow(1-Gt,1.5)}var Io=Date.now(),Ur=(At(1)-nn)/nt,$r=v.duration?1e3*v.duration:1e3*Ur*.8;function vs(){var Gt=(Date.now()-Io)/$r,zi=wr(Gt)*Ur;Gt<=1?(this._flyToFrame=lt(vs,this),this._move(this.unproject(C.add(A.subtract(C).multiplyBy(Js(zi)/Ue)),ie),this.getScaleZoom(xe/jr(zi),ie),{flyTo:!0})):this._move(t,l)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),vs.call(this),this},flyToBounds:function(t,l){var v=this._getBoundsCenterZoom(t,l);return this.flyTo(v.center,v.zoom,l)},setMaxBounds:function(t){return t=ut(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var l=this.options.minZoom;return this.options.minZoom=t,this._loaded&&l!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var l=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&l!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,l){this._enforcingBounds=!0;var v=this.getCenter(),C=this._limitCenter(v,this._zoom,ut(t));return v.equals(C)||this.panTo(C,l),this._enforcingBounds=!1,this},panInside:function(t,l){l=l||{};var v=Ne(l.paddingTopLeft||l.padding||[0,0]),C=Ne(l.paddingBottomRight||l.padding||[0,0]),A=this.project(this.getCenter()),j=this.project(t),ie=this.getPixelBounds(),xe=Fe([ie.min.add(v),ie.max.subtract(C)]),Be=xe.getSize();if(!xe.contains(j)){this._enforcingBounds=!0;var Ue=j.subtract(xe.getCenter()),nt=xe.extend(j).getSize().subtract(Be);A.x+=Ue.x<0?-nt.x:nt.x,A.y+=Ue.y<0?-nt.y:nt.y,this.panTo(this.unproject(A),l),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=f({animate:!1,pan:!0},t===!0?{animate:!0}:t);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),C=l.divideBy(2).round(),A=v.divideBy(2).round(),j=C.subtract(A);return!j.x&&!j.y?this:(t.animate&&t.pan?this.panBy(j):(t.pan&&this._rawPanBy(j),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=f({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=_(this._handleGeolocationResponse,this),v=_(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,v,t):navigator.geolocation.getCurrentPosition(l,v,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var l=t.code,v=t.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var l=t.coords.latitude,v=t.coords.longitude,C=new O(l,v),A=C.toBounds(t.coords.accuracy*2),j=this._locateOptions;if(j.setView){var ie=this.getBoundsZoom(A);this.setView(C,j.maxZoom?Math.min(ie,j.maxZoom):ie)}var xe={latlng:C,bounds:A,timestamp:t.timestamp};for(var Be in t.coords)typeof t.coords[Be]=="number"&&(xe[Be]=t.coords[Be]);this.fire("locationfound",xe)}},addHandler:function(t,l){if(!l)return this;var v=this[t]=new l(this);return this._handlers.push(v),this.options[t]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Yt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(wt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Yt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,l){var v="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),C=Tt("div",v,l||this._mapPane);return t&&(this._panes[t]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),l=this.unproject(t.getBottomLeft()),v=this.unproject(t.getTopRight());return new mt(l,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,l,v){t=ut(t),v=Ne(v||[0,0]);var C=this.getZoom()||0,A=this.getMinZoom(),j=this.getMaxZoom(),ie=t.getNorthWest(),xe=t.getSouthEast(),Be=this.getSize().subtract(v),Ue=Fe(this.project(xe,C),this.project(ie,C)).getSize(),nt=ft.any3d?this.options.zoomSnap:1,yt=Be.x/Ue.x,At=Be.y/Ue.y,Cn=l?Math.max(yt,At):Math.min(yt,At);return C=this.getScaleZoom(Cn,C),nt&&(C=Math.round(C/(nt/100))*(nt/100),C=l?Math.ceil(C/nt)*nt:Math.floor(C/nt)*nt),Math.max(A,Math.min(j,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,l){var v=this._getTopLeftPoint(t,l);return new ce(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,l){var v=this.options.crs;return l=l===void 0?this._zoom:l,v.scale(t)/v.scale(l)},getScaleZoom:function(t,l){var v=this.options.crs;l=l===void 0?this._zoom:l;var C=v.zoom(t*v.scale(l));return isNaN(C)?1/0:C},project:function(t,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(q(t),l)},unproject:function(t,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Ne(t),l)},layerPointToLatLng:function(t){var l=Ne(t).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(t){var l=this.project(q(t))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ut(t))},distance:function(t,l){return this.options.crs.distance(q(t),q(l))},containerPointToLayerPoint:function(t){return Ne(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Ne(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var l=this.containerPointToLayerPoint(Ne(t));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return Ns(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var l=this._container=hr(t);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(l,"scroll",this._onScroll,this),this._containerId=k(l)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ft.any3d,Et(t,"leaflet-container"+(ft.touch?" leaflet-touch":"")+(ft.retina?" leaflet-retina":"")+(ft.ielt9?" leaflet-oldie":"")+(ft.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=ci(t,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),un(this._mapPane,new Re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Et(t.markerPane,"leaflet-zoom-hide"),Et(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,l,v){un(this._mapPane,new Re(0,0));var C=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var A=this._zoom!==l;this._moveStart(A,v)._move(t,l)._moveEnd(A),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(t,l){return t&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(t,l,v,C){l===void 0&&(l=this._zoom);var A=this._zoom!==l;return this._zoom=l,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),C?v&&v.pinch&&this.fire("zoom",v):((A||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return wt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){un(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[k(this._container)]=this;var l=t?Wt:bt;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ft.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){wt(this._resizeRequest),this._resizeRequest=lt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,l){for(var v=[],C,A=l==="mouseout"||l==="mouseover",j=t.target||t.srcElement,ie=!1;j;){if(C=this._targets[k(j)],C&&(l==="click"||l==="preclick")&&this._draggableMoved(C)){ie=!0;break}if(C&&C.listens(l,!0)&&(A&&!zs(j,t)||(v.push(C),A))||j===this._container)break;j=j.parentNode}return!v.length&&!ie&&!A&&this.listens(l,!0)&&(v=[this]),v},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var l=t.target||t.srcElement;if(!(!this._loaded||l._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(l))){var v=t.type;v==="mousedown"&&os(l),this._fireDOMEvent(t,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,l,v){if(t.type==="click"){var C=f({},t);C.type="preclick",this._fireDOMEvent(C,C.type,v)}var A=this._findEventTargets(t,l);if(v){for(var j=[],ie=0;ie<v.length;ie++)v[ie].listens(l,!0)&&j.push(v[ie]);A=j.concat(A)}if(A.length){l==="contextmenu"&&ln(t);var xe=A[0],Be={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Ue=xe.getLatLng&&(!xe._radius||xe._radius<=10);Be.containerPoint=Ue?this.latLngToContainerPoint(xe.getLatLng()):this.mouseEventToContainerPoint(t),Be.layerPoint=this.containerPointToLayerPoint(Be.containerPoint),Be.latlng=Ue?xe.getLatLng():this.layerPointToLatLng(Be.layerPoint)}for(ie=0;ie<A.length;ie++)if(A[ie].fire(l,Be,!0),Be.originalEvent._stopped||A[ie].options.bubblingMouseEvents===!1&&ye(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,l=this._handlers.length;t<l;t++)this._handlers[t].disable()},whenReady:function(t,l){return this._loaded?t.call(l||this,{target:this}):this.on("load",t,l),this},_getMapPanePos:function(){return Xr(this._mapPane)||new Re(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,l){var v=t&&l!==void 0?this._getNewPixelOrigin(t,l):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,l){var v=this.getSize()._divideBy(2);return this.project(t,l)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,l,v){var C=this._getNewPixelOrigin(v,l);return this.project(t,l)._subtract(C)},_latLngBoundsToNewLayerBounds:function(t,l,v){var C=this._getNewPixelOrigin(v,l);return Fe([this.project(t.getSouthWest(),l)._subtract(C),this.project(t.getNorthWest(),l)._subtract(C),this.project(t.getSouthEast(),l)._subtract(C),this.project(t.getNorthEast(),l)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,l,v){if(!v)return t;var C=this.project(t,l),A=this.getSize().divideBy(2),j=new ce(C.subtract(A),C.add(A)),ie=this._getBoundsOffset(j,v,l);return Math.abs(ie.x)<=1&&Math.abs(ie.y)<=1?t:this.unproject(C.add(ie),l)},_limitOffset:function(t,l){if(!l)return t;var v=this.getPixelBounds(),C=new ce(v.min.add(t),v.max.add(t));return t.add(this._getBoundsOffset(C,l))},_getBoundsOffset:function(t,l,v){var C=Fe(this.project(l.getNorthEast(),v),this.project(l.getSouthWest(),v)),A=C.min.subtract(t.min),j=C.max.subtract(t.max),ie=this._rebound(A.x,-j.x),xe=this._rebound(A.y,-j.y);return new Re(ie,xe)},_rebound:function(t,l){return t+l>0?Math.round(t-l)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(l))},_limitZoom:function(t){var l=this.getMinZoom(),v=this.getMaxZoom(),C=ft.any3d?this.options.zoomSnap:1;return C&&(t=Math.round(t/C)*C),Math.max(l,Math.min(v,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,l){var v=this._getCenterOffset(t)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,l),!0)},_createAnimProxy:function(){var t=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(l){var v=vo,C=this._proxy.style[v];dr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),C===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Yt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),l=this.getZoom();dr(this._proxy,this.project(t,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,l,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(l),A=this._getCenterOffset(t)._divideBy(1-1/C);return v.animate!==!0&&!this.getSize().contains(A)?!1:(lt(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(t,l,!0)},this),!0)},_animateZoom:function(t,l,v,C){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=l,Et(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:l,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ti(t,l){return new It(t,l)}var Mt=Jt.extend({options:{position:"topright"},initialize:function(t){W(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var l=this._map;return l&&l.removeControl(this),this.options.position=t,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var l=this._container=this.onAdd(t),v=this.getPosition(),C=t._controlCorners[v];return Et(l,"leaflet-control"),v.indexOf("bottom")!==-1?C.insertBefore(l,C.firstChild):C.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Yt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ar=function(t){return new Mt(t)};It.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},l="leaflet-",v=this._controlContainer=Tt("div",l+"control-container",this._container);function C(A,j){var ie=l+A+" "+l+j;t[A+j]=Tt("div",ie,v)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Yt(this._controlCorners[t]);Yt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ls=Mt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,l,v,C){return v<C?-1:C<v?1:0}},initialize:function(t,l,v){W(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in t)this._addLayer(t[C],C);for(C in l)this._addLayer(l[C],C,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Mt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,l){return this._addLayer(t,l),this._map?this._update():this},addOverlay:function(t,l){return this._addLayer(t,l,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var l=this._getLayer(k(t));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Et(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Et(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",l=this._container=Tt("div",t),v=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Fs(l),xa(l);var C=this._section=Tt("section",t+"-list");v&&(this._map.on("click",this.collapse,this),bt(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Tt("a",t+"-toggle",l);A.href="#",A.title="Layers",A.setAttribute("role","button"),bt(A,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){ln(j),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Tt("div",t+"-base",C),this._separator=Tt("div",t+"-separator",C),this._overlaysList=Tt("div",t+"-overlays",C),l.appendChild(C)},_getLayer:function(t){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&k(this._layers[l].layer)===t)return this._layers[l]},_addLayer:function(t,l,v){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:l,overlay:v}),this.options.sortLayers&&this._layers.sort(_(function(C,A){return this.options.sortFunction(C.layer,A.layer,C.name,A.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ds(this._baseLayersList),Ds(this._overlaysList),this._layerControlInputs=[];var t,l,v,C,A=0;for(v=0;v<this._layers.length;v++)C=this._layers[v],this._addItem(C),l=l||C.overlay,t=t||!C.overlay,A+=C.overlay?0:1;return this.options.hideSingleBase&&(t=t&&A>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=l&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var l=this._getLayer(k(t.target)),v=l.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;v&&this._map.fire(v,l)},_createRadioElement:function(t,l){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(l?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=v,C.firstChild},_addItem:function(t){var l=document.createElement("label"),v=this._map.hasLayer(t.layer),C;t.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=v):C=this._createRadioElement("leaflet-base-layers_"+k(this),v),this._layerControlInputs.push(C),C.layerId=k(t.layer),bt(C,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+t.name;var j=document.createElement("span");l.appendChild(j),j.appendChild(C),j.appendChild(A);var ie=t.overlay?this._overlaysList:this._baseLayersList;return ie.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,l,v,C=[],A=[];this._handlingClick=!0;for(var j=t.length-1;j>=0;j--)l=t[j],v=this._getLayer(l.layerId).layer,l.checked?C.push(v):l.checked||A.push(v);for(j=0;j<A.length;j++)this._map.hasLayer(A[j])&&this._map.removeLayer(A[j]);for(j=0;j<C.length;j++)this._map.hasLayer(C[j])||this._map.addLayer(C[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,l,v,C=this._map.getZoom(),A=t.length-1;A>=0;A--)l=t[A],v=this._getLayer(l.layerId).layer,l.disabled=v.options.minZoom!==void 0&&C<v.options.minZoom||v.options.maxZoom!==void 0&&C>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,bt(t,"click",ln),this.expand();var l=this;setTimeout(function(){Wt(t,"click",ln),l._preventClick=!1})}}),La=function(t,l,v){return new ls(t,l,v)},Oi=Mt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var l="leaflet-control-zoom",v=Tt("div",l+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,l+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,l+"-out",v,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,l,v,C,A){var j=Tt("a",v,C);return j.innerHTML=t,j.href="#",j.title=l,j.setAttribute("role","button"),j.setAttribute("aria-label",l),Fs(j),bt(j,"click",pr),bt(j,"click",A,this),bt(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var t=this._map,l="leaflet-disabled";Xt(this._zoomInButton,l),Xt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Et(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Et(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});It.mergeOptions({zoomControl:!0}),It.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var gl=function(t){return new Oi(t)},Mn=Mt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var l="leaflet-control-scale",v=Tt("div",l),C=this.options;return this._addScales(C,l+"-line",v),t.on(C.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),v},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,l,v){t.metric&&(this._mScale=Tt("div",l,v)),t.imperial&&(this._iScale=Tt("div",l,v))},_update:function(){var t=this._map,l=t.getSize().y/2,v=t.distance(t.containerPointToLatLng([0,l]),t.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(v)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var l=this._getRoundNum(t),v=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,v,l/t)},_updateImperial:function(t){var l=t*3.2808399,v,C,A;l>5280?(v=l/5280,C=this._getRoundNum(v),this._updateScale(this._iScale,C+" mi",C/v)):(A=this._getRoundNum(l),this._updateScale(this._iScale,A+" ft",A/l))},_updateScale:function(t,l,v){t.style.width=Math.round(this.options.maxWidth*v)+"px",t.innerHTML=l},_getRoundNum:function(t){var l=Math.pow(10,(Math.floor(t)+"").length-1),v=t/l;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,l*v}}),ni=function(t){return new Mn(t)},ko='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Gn=Mt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ft.inlineSvg?ko+" ":"")+"Leaflet</a>"},initialize:function(t){W(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),Fs(this._container);for(var l in t._layers)t._layers[l].getAttribution&&this.addAttribution(t._layers[l].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var l in this._attributions)this._attributions[l]&&t.push(l);var v=[];this.options.prefix&&v.push(this.options.prefix),t.length&&v.push(t.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});It.mergeOptions({attributionControl:!0}),It.addInitHook(function(){this.options.attributionControl&&new Gn().addTo(this)});var _l=function(t){return new Gn(t)};Mt.Layers=ls,Mt.Zoom=Oi,Mt.Scale=Mn,Mt.Attribution=Gn,Ar.layers=La,Ar.zoom=gl,Ar.scale=ni,Ar.attribution=_l;var wn=Jt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wn.addTo=function(t,l){return t.addHandler(l,this),this};var Lo={Events:Ft},us=ft.touch?"touchstart mousedown":"mousedown",mr=zt.extend({options:{clickTolerance:3},initialize:function(t,l,v,C){W(this,C),this._element=t,this._dragStartTarget=l||t,this._preventOutline=v},enable:function(){this._enabled||(bt(this._dragStartTarget,us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mr._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!is(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){mr._dragging===this&&this.finishDrag();return}if(!(mr._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(mr._dragging=this,this._preventOutline&&os(this._element),ya(),jt(),!this._moving)){this.fire("down");var l=t.touches?t.touches[0]:t,v=Qr(this._element);this._startPoint=new Re(l.clientX,l.clientY),this._startPos=Xr(this._element),this._parentScale=Br(v);var C=t.type==="mousedown";bt(document,C?"mousemove":"touchmove",this._onMove,this),bt(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var l=t.touches&&t.touches.length===1?t.touches[0]:t,v=new Re(l.clientX,l.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,ln(t),this._moved||(this.fire("dragstart"),this._moved=!0,Et(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Et(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),un(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),wa(),as();var l=this._moved&&this._moving;this._moving=!1,mr._dragging=!1,l&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Co(t,l,v){var C,A=[1,4,2,8],j,ie,xe,Be,Ue,nt,yt,At;for(j=0,nt=t.length;j<nt;j++)t[j]._code=Vn(t[j],l);for(xe=0;xe<4;xe++){for(yt=A[xe],C=[],j=0,nt=t.length,ie=nt-1;j<nt;ie=j++)Be=t[j],Ue=t[ie],Be._code&yt?Ue._code&yt||(At=fi(Ue,Be,yt,l,v),At._code=Vn(At,l),C.push(At)):(Ue._code&yt&&(At=fi(Ue,Be,yt,l,v),At._code=Vn(At,l),C.push(At)),C.push(Be));t=C}return t}function vl(t,l){var v,C,A,j,ie,xe,Be,Ue,nt;if(!t||t.length===0)throw new Error("latlngs not passed");Hn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var yt=q([0,0]),At=ut(t),Cn=At.getNorthWest().distanceTo(At.getSouthWest())*At.getNorthEast().distanceTo(At.getNorthWest());Cn<1700&&(yt=bo(t));var mn=t.length,On=[];for(v=0;v<mn;v++){var nn=q(t[v]);On.push(l.project(q([nn.lat-yt.lat,nn.lng-yt.lng])))}for(xe=Be=Ue=0,v=0,C=mn-1;v<mn;C=v++)A=On[v],j=On[C],ie=A.y*j.x-j.y*A.x,Be+=(A.x+j.x)*ie,Ue+=(A.y+j.y)*ie,xe+=ie*3;xe===0?nt=On[0]:nt=[Be/xe,Ue/xe];var jr=l.unproject(Ne(nt));return q([jr.lat+yt.lat,jr.lng+yt.lng])}function bo(t){for(var l=0,v=0,C=0,A=0;A<t.length;A++){var j=q(t[A]);l+=j.lat,v+=j.lng,C++}return q([l/C,v/C])}var au={__proto__:null,clipPolygon:Co,polygonCenter:vl,centroid:bo};function Ca(t,l){if(!l||!t.length)return t.slice();var v=l*l;return t=yl(t,v),t=xn(t,v),t}function Eo(t,l,v){return Math.sqrt(Ii(t,l,v,!0))}function ou(t,l,v){return Ii(t,l,v)}function xn(t,l){var v=t.length,C=typeof Uint8Array<"u"?Uint8Array:Array,A=new C(v);A[0]=A[v-1]=1,Sn(t,A,l,0,v-1);var j,ie=[];for(j=0;j<v;j++)A[j]&&ie.push(t[j]);return ie}function Sn(t,l,v,C,A){var j=0,ie,xe,Be;for(xe=C+1;xe<=A-1;xe++)Be=Ii(t[xe],t[C],t[A],!0),Be>j&&(ie=xe,j=Be);j>v&&(l[ie]=1,Sn(t,l,v,C,ie),Sn(t,l,v,ie,A))}function yl(t,l){for(var v=[t[0]],C=1,A=0,j=t.length;C<j;C++)lu(t[C],t[A])>l&&(v.push(t[C]),A=C);return A<j-1&&v.push(t[j-1]),v}var di;function Ri(t,l,v,C,A){var j=C?di:Vn(t,v),ie=Vn(l,v),xe,Be,Ue;for(di=ie;;){if(!(j|ie))return[t,l];if(j&ie)return!1;xe=j||ie,Be=fi(t,l,xe,v,A),Ue=Vn(Be,v),xe===j?(t=Be,j=Ue):(l=Be,ie=Ue)}}function fi(t,l,v,C,A){var j=l.x-t.x,ie=l.y-t.y,xe=C.min,Be=C.max,Ue,nt;return v&8?(Ue=t.x+j*(Be.y-t.y)/ie,nt=Be.y):v&4?(Ue=t.x+j*(xe.y-t.y)/ie,nt=xe.y):v&2?(Ue=Be.x,nt=t.y+ie*(Be.x-t.x)/j):v&1&&(Ue=xe.x,nt=t.y+ie*(xe.x-t.x)/j),new Re(Ue,nt,A)}function Vn(t,l){var v=0;return t.x<l.min.x?v|=1:t.x>l.max.x&&(v|=2),t.y<l.min.y?v|=4:t.y>l.max.y&&(v|=8),v}function lu(t,l){var v=l.x-t.x,C=l.y-t.y;return v*v+C*C}function Ii(t,l,v,C){var A=l.x,j=l.y,ie=v.x-A,xe=v.y-j,Be=ie*ie+xe*xe,Ue;return Be>0&&(Ue=((t.x-A)*ie+(t.y-j)*xe)/Be,Ue>1?(A=v.x,j=v.y):Ue>0&&(A+=ie*Ue,j+=xe*Ue)),ie=t.x-A,xe=t.y-j,C?ie*ie+xe*xe:new Re(A,j)}function Hn(t){return!Oe(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function nr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(t)}function Mo(t,l){var v,C,A,j,ie,xe,Be,Ue;if(!t||t.length===0)throw new Error("latlngs not passed");Hn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var nt=q([0,0]),yt=ut(t),At=yt.getNorthWest().distanceTo(yt.getSouthWest())*yt.getNorthEast().distanceTo(yt.getNorthWest());At<1700&&(nt=bo(t));var Cn=t.length,mn=[];for(v=0;v<Cn;v++){var On=q(t[v]);mn.push(l.project(q([On.lat-nt.lat,On.lng-nt.lng])))}for(v=0,C=0;v<Cn-1;v++)C+=mn[v].distanceTo(mn[v+1])/2;if(C===0)Ue=mn[0];else for(v=0,j=0;v<Cn-1;v++)if(ie=mn[v],xe=mn[v+1],A=ie.distanceTo(xe),j+=A,j>C){Be=(j-C)/A,Ue=[xe.x-Be*(xe.x-ie.x),xe.y-Be*(xe.y-ie.y)];break}var nn=l.unproject(Ne(Ue));return q([nn.lat+nt.lat,nn.lng+nt.lng])}var js={__proto__:null,simplify:Ca,pointToSegmentDistance:Eo,closestPointOnSegment:ou,clipSegment:Ri,_getEdgeIntersection:fi,_getBitCode:Vn,_sqClosestPointOnSegment:Ii,isFlat:Hn,_flat:nr,polylineCenter:Mo},So={project:function(t){return new Re(t.lng,t.lat)},unproject:function(t){return new O(t.y,t.x)},bounds:new ce([-180,-90],[180,90])},rr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var l=Math.PI/180,v=this.R,C=t.lat*l,A=this.R_MINOR/v,j=Math.sqrt(1-A*A),ie=j*Math.sin(C),xe=Math.tan(Math.PI/4-C/2)/Math.pow((1-ie)/(1+ie),j/2);return C=-v*Math.log(Math.max(xe,1e-10)),new Re(t.lng*l*v,C)},unproject:function(t){for(var l=180/Math.PI,v=this.R,C=this.R_MINOR/v,A=Math.sqrt(1-C*C),j=Math.exp(-t.y/v),ie=Math.PI/2-2*Math.atan(j),xe=0,Be=.1,Ue;xe<15&&Math.abs(Be)>1e-7;xe++)Ue=A*Math.sin(ie),Ue=Math.pow((1-Ue)/(1+Ue),A/2),Be=Math.PI/2-2*Math.atan(j*Ue)-ie,ie+=Be;return new O(ie*l,t.x*l/v)}},Dr={__proto__:null,LonLat:So,Mercator:rr,SphericalMercator:Ye},ba=f({},fe,{code:"EPSG:3395",projection:rr,transformation:(function(){var t=.5/(Math.PI*rr.R);return ze(t,.5,-t,.5)})()}),Po=f({},fe,{code:"EPSG:4326",projection:So,transformation:ze(1/180,1,-1/180,.5)}),Bo=f({},re,{projection:So,transformation:ze(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,l){var v=l.lng-t.lng,C=l.lat-t.lat;return Math.sqrt(v*v+C*C)},infinite:!0});re.Earth=fe,re.EPSG3395=ba,re.EPSG3857=Ie,re.EPSG900913=qe,re.EPSG4326=Po,re.Simple=Bo;var Dn=zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[k(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[k(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var l=t.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var v=this.getEvents();l.on(v,this),this.once("remove",function(){l.off(v,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});It.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var l=k(t);return this._layers[l]?this:(this._layers[l]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var l=k(t);return this._layers[l]?(this._loaded&&t.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return k(t)in this._layers},eachLayer:function(t,l){for(var v in this._layers)t.call(l,this._layers[v]);return this},_addLayers:function(t){t=t?Oe(t)?t:[t]:[];for(var l=0,v=t.length;l<v;l++)this.addLayer(t[l])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[k(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var l=k(t);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,l=-1/0,v=this._getZoomSpan();for(var C in this._zoomBoundLayers){var A=this._zoomBoundLayers[C].options;t=A.minZoom===void 0?t:Math.min(t,A.minZoom),l=A.maxZoom===void 0?l:Math.max(l,A.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=t===1/0?void 0:t,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pi=Dn.extend({initialize:function(t,l){W(this,l),this._layers={};var v,C;if(t)for(v=0,C=t.length;v<C;v++)this.addLayer(t[v])},addLayer:function(t){var l=this.getLayerId(t);return this._layers[l]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var l=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(t){var l=typeof t=="number"?t:this.getLayerId(t);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var l=Array.prototype.slice.call(arguments,1),v,C;for(v in this._layers)C=this._layers[v],C[t]&&C[t].apply(C,l);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,l){for(var v in this._layers)t.call(l,this._layers[v]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return k(t)}}),Us=function(t,l){return new pi(t,l)},gr=pi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),pi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),pi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new mt;for(var l in this._layers){var v=this._layers[l];t.extend(v.getBounds?v.getBounds():v.getLatLng())}return t}}),wl=function(t,l){return new gr(t,l)},Fi=Jt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){W(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,l){var v=this._getIconUrl(t);if(!v){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(v,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(C,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(t,l){var v=this.options,C=v[l+"Size"];typeof C=="number"&&(C=[C,C]);var A=Ne(C),j=Ne(l==="shadow"&&v.shadowAnchor||v.iconAnchor||A&&A.divideBy(2,!0));t.className="leaflet-marker-"+l+" "+(v.className||""),j&&(t.style.marginLeft=-j.x+"px",t.style.marginTop=-j.y+"px"),A&&(t.style.width=A.x+"px",t.style.height=A.y+"px")},_createImg:function(t,l){return l=l||document.createElement("img"),l.src=t,l},_getIconUrl:function(t){return ft.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function xl(t){return new Fi(t)}var cs=Fi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof cs.imagePath!="string"&&(cs.imagePath=this._detectIconPath()),(this.options.imagePath||cs.imagePath)+Fi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var l=function(v,C,A){var j=C.exec(v);return j&&j[A]};return t=l(t,/^url\((['"])?(.+)\1\)$/,2),t&&l(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Tt("div","leaflet-default-icon-path",document.body),l=ci(t,"background-image")||ci(t,"backgroundImage");if(document.body.removeChild(t),l=this._stripUrl(l),l)return l;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),$s=wn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new mr(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Et(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var l=this._marker,v=l._map,C=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,j=Xr(l._icon),ie=v.getPixelBounds(),xe=v.getPixelOrigin(),Be=Fe(ie.min._subtract(xe).add(A),ie.max._subtract(xe).subtract(A));if(!Be.contains(j)){var Ue=Ne((Math.max(Be.max.x,j.x)-Be.max.x)/(ie.max.x-Be.max.x)-(Math.min(Be.min.x,j.x)-Be.min.x)/(ie.min.x-Be.min.x),(Math.max(Be.max.y,j.y)-Be.max.y)/(ie.max.y-Be.max.y)-(Math.min(Be.min.y,j.y)-Be.min.y)/(ie.min.y-Be.min.y)).multiplyBy(C);v.panBy(Ue,{animate:!1}),this._draggable._newPos._add(Ue),this._draggable._startPos._add(Ue),un(l._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=lt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(wt(this._panRequest),this._panRequest=lt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var l=this._marker,v=l._shadow,C=Xr(l._icon),A=l._map.layerPointToLatLng(C);v&&un(v,C),l._latlng=A,t.latlng=A,t.oldLatLng=this._oldLatLng,l.fire("move",t).fire("drag",t)},_onDragEnd:function(t){wt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ri=Dn.extend({options:{icon:new cs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,l){W(this,l),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var l=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=t.icon.createIcon(this._icon),C=!1;v!==this._icon&&(this._icon&&this._removeIcon(),C=!0,t.title&&(v.title=t.title),v.tagName==="IMG"&&(v.alt=t.alt||"")),Et(v,l),t.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(v,"focus",this._panOnFocus,this);var A=t.icon.createShadow(this._shadow),j=!1;A!==this._shadow&&(this._removeShadow(),j=!0),A&&(Et(A,l),A.alt=""),this._shadow=A,t.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&j&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),Yt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Yt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&un(this._icon,t),this._shadow&&un(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var l=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Et(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$s)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $s(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&qn(this._icon,t),this._shadow&&qn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var l=this.options.icon.options,v=l.iconSize?Ne(l.iconSize):Ne(0,0),C=l.iconAnchor?Ne(l.iconAnchor):Ne(0,0);t.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:v.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uu(t,l){return new ri(t,l)}var ii=Dn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return W(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Or=ii.extend({options:{fill:!0,radius:10},initialize:function(t,l){W(this,l),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){var l=this._latlng;return this._latlng=q(t),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var l=t&&t.radius||this._radius;return ii.prototype.setStyle.call(this,t),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,l=this._radiusY||t,v=this._clickTolerance(),C=[t+v,l+v];this._pxBounds=new ce(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function To(t,l){return new Or(t,l)}var Ea=Or.extend({initialize:function(t,l,v){if(typeof l=="number"&&(l=f({},v,{radius:l})),W(this,l),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new mt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ii.prototype.setStyle,_project:function(){var t=this._latlng.lng,l=this._latlng.lat,v=this._map,C=v.options.crs;if(C.distance===fe.distance){var A=Math.PI/180,j=this._mRadius/fe.R/A,ie=v.project([l+j,t]),xe=v.project([l-j,t]),Be=ie.add(xe).divideBy(2),Ue=v.unproject(Be).lat,nt=Math.acos((Math.cos(j*A)-Math.sin(l*A)*Math.sin(Ue*A))/(Math.cos(l*A)*Math.cos(Ue*A)))/A;(isNaN(nt)||nt===0)&&(nt=j/Math.cos(Math.PI/180*l)),this._point=Be.subtract(v.getPixelOrigin()),this._radius=isNaN(nt)?0:Be.x-v.project([Ue,t-nt]).x,this._radiusY=Be.y-ie.y}else{var yt=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(yt).x}this._updateBounds()}});function _r(t,l,v){return new Ea(t,l,v)}var Yn=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,l){W(this,l),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var l=1/0,v=null,C=Ii,A,j,ie=0,xe=this._parts.length;ie<xe;ie++)for(var Be=this._parts[ie],Ue=1,nt=Be.length;Ue<nt;Ue++){A=Be[Ue-1],j=Be[Ue];var yt=C(t,A,j,!0);yt<l&&(l=yt,v=C(t,A,j))}return v&&(v.distance=Math.sqrt(l)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,l){return l=l||this._defaultShape(),t=q(t),l.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new mt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var l=[],v=Hn(t),C=0,A=t.length;C<A;C++)v?(l[C]=q(t[C]),this._bounds.extend(l[C])):l[C]=this._convertLatLngs(t[C]);return l},_project:function(){var t=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),l=new Re(t,t);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(t,l,v){var C=t[0]instanceof O,A=t.length,j,ie;if(C){for(ie=[],j=0;j<A;j++)ie[j]=this._map.latLngToLayerPoint(t[j]),v.extend(ie[j]);l.push(ie)}else for(j=0;j<A;j++)this._projectLatlngs(t[j],l,v)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,v,C,A,j,ie,xe,Be;for(v=0,A=0,j=this._rings.length;v<j;v++)for(Be=this._rings[v],C=0,ie=Be.length;C<ie-1;C++)xe=Ri(Be[C],Be[C+1],t,C,!0),xe&&(l[A]=l[A]||[],l[A].push(xe[0]),(xe[1]!==Be[C+1]||C===ie-2)&&(l[A].push(xe[1]),A++))}},_simplifyPoints:function(){for(var t=this._parts,l=this.options.smoothFactor,v=0,C=t.length;v<C;v++)t[v]=Ca(t[v],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,l){var v,C,A,j,ie,xe,Be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(v=0,j=this._parts.length;v<j;v++)for(xe=this._parts[v],C=0,ie=xe.length,A=ie-1;C<ie;A=C++)if(!(!l&&C===0)&&Eo(t,xe[A],xe[C])<=Be)return!0;return!1}});function cu(t,l){return new Yn(t,l)}Yn._flat=nr;var vr=Yn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var l=Yn.prototype._convertLatLngs.call(this,t),v=l.length;return v>=2&&l[0]instanceof O&&l[0].equals(l[v-1])&&l.pop(),l},_setLatLngs:function(t){Yn.prototype._setLatLngs.call(this,t),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,l=this.options.weight,v=new Re(l,l);if(t=new ce(t.min.subtract(v),t.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,A=this._rings.length,j;C<A;C++)j=Co(this._rings[C],t,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var l=!1,v,C,A,j,ie,xe,Be,Ue;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(j=0,Be=this._parts.length;j<Be;j++)for(v=this._parts[j],ie=0,Ue=v.length,xe=Ue-1;ie<Ue;xe=ie++)C=v[ie],A=v[xe],C.y>t.y!=A.y>t.y&&t.x<(A.x-C.x)*(t.y-C.y)/(A.y-C.y)+C.x&&(l=!l);return l||Yn.prototype._containsPoint.call(this,t,!0)}});function qs(t,l){return new vr(t,l)}var Rr=gr.extend({initialize:function(t,l){W(this,l),this._layers={},t&&this.addData(t)},addData:function(t){var l=Oe(t)?t:t.features,v,C,A;if(l){for(v=0,C=l.length;v<C;v++)A=l[v],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var j=this.options;if(j.filter&&!j.filter(t))return this;var ie=hs(t,j);return ie?(ie.feature=Pa(t),ie.defaultOptions=ie.options,this.resetStyle(ie),j.onEachFeature&&j.onEachFeature(t,ie),this.addLayer(ie)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=f({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(l){this._setLayerStyle(l,t)},this)},_setLayerStyle:function(t,l){t.setStyle&&(typeof l=="function"&&(l=l(t.feature)),t.setStyle(l))}});function hs(t,l){var v=t.type==="Feature"?t.geometry:t,C=v?v.coordinates:null,A=[],j=l&&l.pointToLayer,ie=l&&l.coordsToLatLng||Gs,xe,Be,Ue,nt;if(!C&&!v)return null;switch(v.type){case"Point":return xe=ie(C),Ma(j,t,xe,l);case"MultiPoint":for(Ue=0,nt=C.length;Ue<nt;Ue++)xe=ie(C[Ue]),A.push(Ma(j,t,xe,l));return new gr(A);case"LineString":case"MultiLineString":return Be=Vs(C,v.type==="LineString"?0:1,ie),new Yn(Be,l);case"Polygon":case"MultiPolygon":return Be=Vs(C,v.type==="Polygon"?1:2,ie),new vr(Be,l);case"GeometryCollection":for(Ue=0,nt=v.geometries.length;Ue<nt;Ue++){var yt=hs({geometry:v.geometries[Ue],type:"Feature",properties:t.properties},l);yt&&A.push(yt)}return new gr(A);case"FeatureCollection":for(Ue=0,nt=v.features.length;Ue<nt;Ue++){var At=hs(v.features[Ue],l);At&&A.push(At)}return new gr(A);default:throw new Error("Invalid GeoJSON object.")}}function Ma(t,l,v,C){return t?t(l,v):new ri(v,C&&C.markersInheritOptions&&C)}function Gs(t){return new O(t[1],t[0],t[2])}function Vs(t,l,v){for(var C=[],A=0,j=t.length,ie;A<j;A++)ie=l?Vs(t[A],l-1,v):(v||Gs)(t[A]),C.push(ie);return C}function Hs(t,l){return t=q(t),t.alt!==void 0?[H(t.lng,l),H(t.lat,l),H(t.alt,l)]:[H(t.lng,l),H(t.lat,l)]}function Sa(t,l,v,C){for(var A=[],j=0,ie=t.length;j<ie;j++)A.push(l?Sa(t[j],Hn(t[j])?0:l-1,v,C):Hs(t[j],C));return!l&&v&&A.length>0&&A.push(A[0].slice()),A}function ds(t,l){return t.feature?f({},t.feature,{geometry:l}):Pa(l)}function Pa(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ba={toGeoJSON:function(t){return ds(this,{type:"Point",coordinates:Hs(this.getLatLng(),t)})}};ri.include(Ba),Ea.include(Ba),Or.include(Ba),Yn.include({toGeoJSON:function(t){var l=!Hn(this._latlngs),v=Sa(this._latlngs,l?1:0,!1,t);return ds(this,{type:(l?"Multi":"")+"LineString",coordinates:v})}}),vr.include({toGeoJSON:function(t){var l=!Hn(this._latlngs),v=l&&!Hn(this._latlngs[0]),C=Sa(this._latlngs,v?2:l?1:0,!0,t);return l||(C=[C]),ds(this,{type:(v?"Multi":"")+"Polygon",coordinates:C})}}),pi.include({toMultiPoint:function(t){var l=[];return this.eachLayer(function(v){l.push(v.toGeoJSON(t).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(t){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(t);var v=l==="GeometryCollection",C=[];return this.eachLayer(function(A){if(A.toGeoJSON){var j=A.toGeoJSON(t);if(v)C.push(j.geometry);else{var ie=Pa(j);ie.type==="FeatureCollection"?C.push.apply(C,ie.features):C.push(ie)}}}),v?ds(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function Ta(t,l){return new Rr(t,l)}var ir=Ta,Ir=Dn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,l,v){this._url=t,this._bounds=ut(l),W(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Et(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Yt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&rs(this._image),this},bringToBack:function(){return this._map&&Pr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ut(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",l=this._image=t?this._url:Tt("img");if(Et(l,"leaflet-image-layer"),this._zoomAnimated&&Et(l,"leaflet-zoom-animated"),this.options.className&&Et(l,this.options.className),l.onselectstart=F,l.onmousemove=F,l.onload=_(this.fire,this,"load"),l.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(t){var l=this._map.getZoomScale(t.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;dr(this._image,v,l)},_reset:function(){var t=this._image,l=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=l.getSize();un(t,l.min),t.style.width=v.x+"px",t.style.height=v.y+"px"},_updateOpacity:function(){qn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),kl=function(t,l,v){return new Ir(t,l,v)},fs=Ir.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",l=this._image=t?this._url:Tt("video");if(Et(l,"leaflet-image-layer"),this._zoomAnimated&&Et(l,"leaflet-zoom-animated"),this.options.className&&Et(l,this.options.className),l.onselectstart=F,l.onmousemove=F,l.onloadeddata=_(this.fire,this,"load"),t){for(var v=l.getElementsByTagName("source"),C=[],A=0;A<v.length;A++)C.push(v[A].src);this._url=v.length>0?C:[l.src];return}Oe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var ie=Tt("source");ie.src=this._url[j],l.appendChild(ie)}}});function Ao(t,l,v){return new fs(t,l,v)}var Do=Ir.extend({_initImage:function(){var t=this._image=this._url;Et(t,"leaflet-image-layer"),this._zoomAnimated&&Et(t,"leaflet-zoom-animated"),this.options.className&&Et(t,this.options.className),t.onselectstart=F,t.onmousemove=F}});function Oo(t,l,v){return new Do(t,l,v)}var Fr=Dn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,l){t&&(t instanceof O||Oe(t))?(this._latlng=q(t),W(this,l)):(W(this,t),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&qn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&qn(this._container,1),this.bringToFront(),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(qn(this._container,0),this._removeTimeout=setTimeout(_(Yt,void 0,this._container),200)):Yt(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rs(this._container),this},bringToBack:function(){return this._map&&Pr(this._container),this},_prepareOpen:function(t){var l=this._source;if(!l._map)return!1;if(l instanceof gr){l=null;var v=this._source._layers;for(var C in v)if(v[C]._map){l=v[C];break}if(!l)return!1;this._source=l}if(!t)if(l.getCenter)t=l.getCenter();else if(l.getLatLng)t=l.getLatLng();else if(l.getBounds)t=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")t.innerHTML=l;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),l=Ne(this.options.offset),v=this._getAnchor();this._zoomAnimated?un(this._container,t.add(v)):l=l.add(t).add(v);var C=this._containerBottom=-l.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=C+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});It.include({_initOverlay:function(t,l,v,C){var A=l;return A instanceof t||(A=new t(C).setContent(l)),v&&A.setLatLng(v),A}}),Dn.include({_initOverlay:function(t,l,v,C){var A=v;return A instanceof t?(W(A,C),A._source=this):(A=l&&!C?l:new t(C,this),A.setContent(v)),A}});var mi=Fr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Fr.prototype.openOn.call(this,t)},onAdd:function(t){Fr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Tr))},onRemove:function(t){Fr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Tr))},getEvents:function(){var t=Fr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",l=this._container=Tt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Tt("div",t+"-content-wrapper",l);if(this._contentNode=Tt("div",t+"-content",v),Fs(l),xa(this._contentNode),bt(l,"contextmenu",Tr),this._tipContainer=Tt("div",t+"-tip-container",l),this._tip=Tt("div",t+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=Tt("a",t+"-close-button",l);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',bt(C,"click",function(A){ln(A),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,l=t.style;l.width="",l.whiteSpace="nowrap";var v=t.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),l.width=v+1+"px",l.whiteSpace="",l.height="";var C=t.offsetHeight,A=this.options.maxHeight,j="leaflet-popup-scrolled";A&&C>A?(l.height=A+"px",Et(t,j)):Xt(t,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var l=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),v=this._getAnchor();un(this._container,l.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,l=parseInt(ci(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+l,C=this._containerWidth,A=new Re(this._containerLeft,-v-this._containerBottom);A._add(Xr(this._container));var j=t.layerPointToContainerPoint(A),ie=Ne(this.options.autoPanPadding),xe=Ne(this.options.autoPanPaddingTopLeft||ie),Be=Ne(this.options.autoPanPaddingBottomRight||ie),Ue=t.getSize(),nt=0,yt=0;j.x+C+Be.x>Ue.x&&(nt=j.x+C-Ue.x+Be.x),j.x-nt-xe.x<0&&(nt=j.x-xe.x),j.y+v+Be.y>Ue.y&&(yt=j.y+v-Ue.y+Be.y),j.y-yt-xe.y<0&&(yt=j.y-xe.y),(nt||yt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([nt,yt]))}},_getAnchor:function(){return Ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ps=function(t,l){return new mi(t,l)};It.mergeOptions({closePopupOnClick:!0}),It.include({openPopup:function(t,l,v){return this._initOverlay(mi,t,l,v).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Dn.include({bindPopup:function(t,l){return this._popup=this._initOverlay(mi,this._popup,t,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof gr||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){pr(t);var l=t.layer||t.target;if(this._popup._source===l&&!(l instanceof ii)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=l,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ms=Fr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Fr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Fr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Fr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",l=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+k(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var l,v,C=this._map,A=this._container,j=C.latLngToContainerPoint(C.getCenter()),ie=C.layerPointToContainerPoint(t),xe=this.options.direction,Be=A.offsetWidth,Ue=A.offsetHeight,nt=Ne(this.options.offset),yt=this._getAnchor();xe==="top"?(l=Be/2,v=Ue):xe==="bottom"?(l=Be/2,v=0):xe==="center"?(l=Be/2,v=Ue/2):xe==="right"?(l=0,v=Ue/2):xe==="left"?(l=Be,v=Ue/2):ie.x<j.x?(xe="right",l=0,v=Ue/2):(xe="left",l=Be+(nt.x+yt.x)*2,v=Ue/2),t=t.subtract(Ne(l,v,!0)).add(nt).add(yt),Xt(A,"leaflet-tooltip-right"),Xt(A,"leaflet-tooltip-left"),Xt(A,"leaflet-tooltip-top"),Xt(A,"leaflet-tooltip-bottom"),Et(A,"leaflet-tooltip-"+xe),un(A,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&qn(this._container,t)},_animateZoom:function(t){var l=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(l)},_getAnchor:function(){return Ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Zs=function(t,l){return new ms(t,l)};It.include({openTooltip:function(t,l,v){return this._initOverlay(ms,t,l,v).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Dn.include({bindTooltip:function(t,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ms,this._tooltip,t,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var l=t?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[l](v),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof gr||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var l=typeof t.getElement=="function"&&t.getElement();l&&(bt(l,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),bt(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var l=typeof t.getElement=="function"&&t.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var l=t.latlng,v,C;this._tooltip.options.sticky&&t.originalEvent&&(v=this._map.mouseEventToContainerPoint(t.originalEvent),C=this._map.containerPointToLayerPoint(v),l=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(l)}});var Aa=Fi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var l=t&&t.tagName==="DIV"?t:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Ds(l),l.appendChild(v.html)):l.innerHTML=v.html!==!1?v.html:"",v.bgPos){var C=Ne(v.bgPos);l.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Ll(t){return new Aa(t)}Fi.Default=cs;var gi=Dn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ft.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){W(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Yt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Re?t:new Re(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var l=this.getPane().children,v=-t(-1/0,1/0),C=0,A=l.length,j;C<A;C++)j=l[C].style.zIndex,l[C]!==this._container&&j&&(v=t(v,+j));isFinite(v)&&(this.options.zIndex=v+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ft.ielt9){qn(this._container,this.options.opacity);var t=+new Date,l=!1,v=!1;for(var C in this._tiles){var A=this._tiles[C];if(!(!A.current||!A.loaded)){var j=Math.min(1,(t-A.loaded)/200);qn(A.el,j),j<1?l=!0:(A.active?v=!0:this._onOpaqueTile(A),A.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),l&&(wt(this._fadeFrame),this._fadeFrame=lt(this._updateOpacity,this))}},_onOpaqueTile:F,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,l=this.options.maxZoom;if(t!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===t?(this._levels[v].el.style.zIndex=l-Math.abs(t-v),this._onUpdateLevel(v)):(Yt(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var C=this._levels[t],A=this._map;return C||(C=this._levels[t]={},C.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=l,C.origin=A.project(A.unproject(A.getPixelOrigin()),t).round(),C.zoom=t,this._setZoomTransform(C,A.getCenter(),A.getZoom()),F(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:F,_onRemoveLevel:F,_onCreateLevel:F,_pruneTiles:function(){if(this._map){var t,l,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)l=this._tiles[t],l.retain=l.current;for(t in this._tiles)if(l=this._tiles[t],l.current&&!l.active){var C=l.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var l in this._tiles)this._tiles[l].coords.z===t&&this._removeTile(l)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Yt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,l,v,C){var A=Math.floor(t/2),j=Math.floor(l/2),ie=v-1,xe=new Re(+A,+j);xe.z=+ie;var Be=this._tileCoordsToKey(xe),Ue=this._tiles[Be];return Ue&&Ue.active?(Ue.retain=!0,!0):(Ue&&Ue.loaded&&(Ue.retain=!0),ie>C?this._retainParent(A,j,ie,C):!1)},_retainChildren:function(t,l,v,C){for(var A=2*t;A<2*t+2;A++)for(var j=2*l;j<2*l+2;j++){var ie=new Re(A,j);ie.z=v+1;var xe=this._tileCoordsToKey(ie),Be=this._tiles[xe];if(Be&&Be.active){Be.retain=!0;continue}else Be&&Be.loaded&&(Be.retain=!0);v+1<C&&this._retainChildren(A,j,v+1,C)}},_resetView:function(t){var l=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var l=this.options;return l.minNativeZoom!==void 0&&t<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<t?l.maxNativeZoom:t},_setView:function(t,l,v,C){var A=Math.round(l);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var j=this.options.updateWhenZooming&&A!==this._tileZoom;(!C||j)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(t),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(t,l)},_setZoomTransforms:function(t,l){for(var v in this._levels)this._setZoomTransform(this._levels[v],t,l)},_setZoomTransform:function(t,l,v){var C=this._map.getZoomScale(v,t.zoom),A=t.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(l,v)).round();ft.any3d?dr(t.el,A,C):un(t.el,A)},_resetGrid:function(){var t=this._map,l=t.options.crs,v=this._tileSize=this.getTileSize(),C=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,l.wrapLng[0]],C).x/v.x),Math.ceil(t.project([0,l.wrapLng[1]],C).x/v.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([l.wrapLat[0],0],C).y/v.x),Math.ceil(t.project([l.wrapLat[1],0],C).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var l=this._map,v=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),C=l.getZoomScale(v,this._tileZoom),A=l.project(t,this._tileZoom).floor(),j=l.getSize().divideBy(C*2);return new ce(A.subtract(j),A.add(j))},_update:function(t){var l=this._map;if(l){var v=this._clampZoom(l.getZoom());if(t===void 0&&(t=l.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(t),A=this._pxBoundsToTileRange(C),j=A.getCenter(),ie=[],xe=this.options.keepBuffer,Be=new ce(A.getBottomLeft().subtract([xe,-xe]),A.getTopRight().add([xe,-xe]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ue in this._tiles){var nt=this._tiles[Ue].coords;(nt.z!==this._tileZoom||!Be.contains(new Re(nt.x,nt.y)))&&(this._tiles[Ue].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(t,v);return}for(var yt=A.min.y;yt<=A.max.y;yt++)for(var At=A.min.x;At<=A.max.x;At++){var Cn=new Re(At,yt);if(Cn.z=this._tileZoom,!!this._isValidTile(Cn)){var mn=this._tiles[this._tileCoordsToKey(Cn)];mn?mn.current=!0:ie.push(Cn)}}if(ie.sort(function(nn,jr){return nn.distanceTo(j)-jr.distanceTo(j)}),ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var On=document.createDocumentFragment();for(At=0;At<ie.length;At++)this._addTile(ie[At],On);this._level.el.appendChild(On)}}}},_isValidTile:function(t){var l=this._map.options.crs;if(!l.infinite){var v=this._globalTileRange;if(!l.wrapLng&&(t.x<v.min.x||t.x>v.max.x)||!l.wrapLat&&(t.y<v.min.y||t.y>v.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(t);return ut(this.options.bounds).overlaps(C)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var l=this._map,v=this.getTileSize(),C=t.scaleBy(v),A=C.add(v),j=l.unproject(C,t.z),ie=l.unproject(A,t.z);return[j,ie]},_tileCoordsToBounds:function(t){var l=this._tileCoordsToNwSe(t),v=new mt(l[0],l[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var l=t.split(":"),v=new Re(+l[0],+l[1]);return v.z=+l[2],v},_removeTile:function(t){var l=this._tiles[t];l&&(Yt(l.el),delete this._tiles[t],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Et(t,"leaflet-tile");var l=this.getTileSize();t.style.width=l.x+"px",t.style.height=l.y+"px",t.onselectstart=F,t.onmousemove=F,ft.ielt9&&this.options.opacity<1&&qn(t,this.options.opacity)},_addTile:function(t,l){var v=this._getTilePos(t),C=this._tileCoordsToKey(t),A=this.createTile(this._wrapCoords(t),_(this._tileReady,this,t));this._initTile(A),this.createTile.length<2&&lt(_(this._tileReady,this,t,null,A)),un(A,v),this._tiles[C]={el:A,coords:t,current:!0},l.appendChild(A),this.fire("tileloadstart",{tile:A,coords:t})},_tileReady:function(t,l,v){l&&this.fire("tileerror",{error:l,tile:v,coords:t});var C=this._tileCoordsToKey(t);v=this._tiles[C],v&&(v.loaded=+new Date,this._map._fadeAnimated?(qn(v.el,0),wt(this._fadeFrame),this._fadeFrame=lt(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),l||(Et(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ft.ielt9||!this._map._fadeAnimated?lt(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var l=new Re(this._wrapX?D(t.x,this._wrapX):t.x,this._wrapY?D(t.y,this._wrapY):t.y);return l.z=t.z,l},_pxBoundsToTileRange:function(t){var l=this.getTileSize();return new ce(t.min.unscaleBy(l).floor(),t.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function gs(t){return new gi(t)}var _i=gi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,l){this._url=t,l=W(this,l),l.detectRetina&&ft.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,l){return this._url===t&&l===void 0&&(l=!0),this._url=t,l||this.redraw(),this},createTile:function(t,l){var v=document.createElement("img");return bt(v,"load",_(this._tileOnLoad,this,l,v)),bt(v,"error",_(this._tileOnError,this,l,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(t),v},getTileUrl:function(t){var l={r:ft.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-t.y;this.options.tms&&(l.y=v),l["-y"]=v}return $e(this._url,f(l,this.options))},_tileOnLoad:function(t,l){ft.ielt9?setTimeout(_(t,this,null,l),0):t(null,l)},_tileOnError:function(t,l,v){var C=this.options.errorTileUrl;C&&l.getAttribute("src")!==C&&(l.src=C),t(v,l)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,l=this.options.maxZoom,v=this.options.zoomReverse,C=this.options.zoomOffset;return v&&(t=l-t),t+C},_getSubdomain:function(t){var l=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var t,l;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(l=this._tiles[t].el,l.onload=F,l.onerror=F,!l.complete)){l.src=Ee;var v=this._tiles[t].coords;Yt(l),delete this._tiles[t],this.fire("tileabort",{tile:l,coords:v})}},_removeTile:function(t){var l=this._tiles[t];if(l)return l.el.setAttribute("src",Ee),gi.prototype._removeTile.call(this,t)},_tileReady:function(t,l,v){if(!(!this._map||v&&v.getAttribute("src")===Ee))return gi.prototype._tileReady.call(this,t,l,v)}});function Da(t,l){return new _i(t,l)}var Ni=_i.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,l){this._url=t;var v=f({},this.defaultWmsParams);for(var C in l)C in this.options||(v[C]=l[C]);l=W(this,l);var A=l.detectRetina&&ft.retina?2:1,j=this.getTileSize();v.width=j.x*A,v.height=j.y*A,this.wmsParams=v},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,_i.prototype.onAdd.call(this,t)},getTileUrl:function(t){var l=this._tileCoordsToNwSe(t),v=this._crs,C=Fe(v.project(l[0]),v.project(l[1])),A=C.min,j=C.max,ie=(this._wmsVersion>=1.3&&this._crs===Po?[A.y,A.x,j.y,j.x]:[A.x,A.y,j.x,j.y]).join(","),xe=_i.prototype.getTileUrl.call(this,t);return xe+Y(this.wmsParams,xe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ie},setParams:function(t,l){return f(this.wmsParams,t),l||this.redraw(),this}});function Cl(t,l){return new Ni(t,l)}_i.WMS=Ni,Da.wms=Cl;var Nr=Dn.extend({options:{padding:.1},initialize:function(t){W(this,t),k(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Et(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,l){var v=this._map.getZoomScale(l,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,l),j=C.multiplyBy(-v).add(A).subtract(this._map._getNewPixelOrigin(t,l));ft.any3d?dr(this._container,j,v):un(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,l=this._map.getSize(),v=this._map.containerPointToLayerPoint(l.multiplyBy(-t)).round();this._bounds=new ce(v,v.add(l.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oa=Nr.extend({options:{tolerance:0},getEvents:function(){var t=Nr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");bt(t,"mousemove",this._onMouseMove,this),bt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){wt(this._redrawRequest),delete this._ctx,Yt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var l in this._layers)t=this._layers[l],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var t=this._bounds,l=this._container,v=t.getSize(),C=ft.retina?2:1;un(l,t.min),l.width=C*v.x,l.height=C*v.y,l.style.width=v.x+"px",l.style.height=v.y+"px",ft.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Nr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[k(t)]=t;var l=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var l=t._order,v=l.next,C=l.prev;v?v.prev=C:this._drawLast=C,C?C.next=v:this._drawFirst=v,delete t._order,delete this._layers[k(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var l=t.options.dashArray.split(/[, ]+/),v=[],C,A;for(A=0;A<l.length;A++){if(C=Number(l[A]),isNaN(C))return;v.push(C)}t.options._dashArray=v}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||lt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var l=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(t._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(t._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var l=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,l=this._redrawBounds;if(this._ctx.save(),l){var v=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)t=C.layer,(!l||t._pxBounds&&t._pxBounds.intersects(l))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,l){if(this._drawing){var v,C,A,j,ie=t._parts,xe=ie.length,Be=this._ctx;if(xe){for(Be.beginPath(),v=0;v<xe;v++){for(C=0,A=ie[v].length;C<A;C++)j=ie[v][C],Be[C?"lineTo":"moveTo"](j.x,j.y);l&&Be.closePath()}this._fillStroke(Be,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var l=t._point,v=this._ctx,C=Math.max(Math.round(t._radius),1),A=(Math.max(Math.round(t._radiusY),1)||C)/C;A!==1&&(v.save(),v.scale(1,A)),v.beginPath(),v.arc(l.x,l.y/A,C,0,Math.PI*2,!1),A!==1&&v.restore(),this._fillStroke(v,t)}},_fillStroke:function(t,l){var v=l.options;v.fill&&(t.globalAlpha=v.fillOpacity,t.fillStyle=v.fillColor||v.color,t.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(t.setLineDash&&t.setLineDash(l.options&&l.options._dashArray||[]),t.globalAlpha=v.opacity,t.lineWidth=v.weight,t.strokeStyle=v.color,t.lineCap=v.lineCap,t.lineJoin=v.lineJoin,t.stroke())},_onClick:function(t){for(var l=this._map.mouseEventToLayerPoint(t),v,C,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(l)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(v))&&(C=v);this._fireEvent(C?[C]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,l)}},_handleMouseOut:function(t){var l=this._hoveredLayer;l&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,l){if(!this._mouseHoverThrottled){for(var v,C,A=this._drawFirst;A;A=A.next)v=A.layer,v.options.interactive&&v._containsPoint(l)&&(C=v);C!==this._hoveredLayer&&(this._handleMouseOut(t),C&&(Et(this._container,"leaflet-interactive"),this._fireEvent([C],t,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,l,v){this._map._fireDOMEvent(l,v||l.type,t)},_bringToFront:function(t){var l=t._order;if(l){var v=l.next,C=l.prev;if(v)v.prev=C;else return;C?C.next=v:v&&(this._drawFirst=v),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(t)}},_bringToBack:function(t){var l=t._order;if(l){var v=l.next,C=l.prev;if(C)C.next=v;else return;v?v.prev=C:C&&(this._drawLast=C),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(t)}}});function Ws(t){return ft.canvas?new Oa(t):null}var _s=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),bl={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var l=t._container=_s("shape");Et(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",t._path=_s("path"),l.appendChild(t._path),this._updateStyle(t),this._layers[k(t)]=t},_addPath:function(t){var l=t._container;this._container.appendChild(l),t.options.interactive&&t.addInteractiveTarget(l)},_removePath:function(t){var l=t._container;Yt(l),t.removeInteractiveTarget(l),delete this._layers[k(t)]},_updateStyle:function(t){var l=t._stroke,v=t._fill,C=t.options,A=t._container;A.stroked=!!C.stroke,A.filled=!!C.fill,C.stroke?(l||(l=t._stroke=_s("stroke")),A.appendChild(l),l.weight=C.weight+"px",l.color=C.color,l.opacity=C.opacity,C.dashArray?l.dashStyle=Oe(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=C.lineCap.replace("butt","flat"),l.joinstyle=C.lineJoin):l&&(A.removeChild(l),t._stroke=null),C.fill?(v||(v=t._fill=_s("fill")),A.appendChild(v),v.color=C.fillColor||C.color,v.opacity=C.fillOpacity):v&&(A.removeChild(v),t._fill=null)},_updateCircle:function(t){var l=t._point.round(),v=Math.round(t._radius),C=Math.round(t._radiusY||v);this._setPath(t,t._empty()?"M0 0":"AL "+l.x+","+l.y+" "+v+","+C+" 0,"+65535*360)},_setPath:function(t,l){t._path.v=l},_bringToFront:function(t){rs(t._container)},_bringToBack:function(t){Pr(t._container)}},Xn=ft.vml?_s:Ze,pn=Nr.extend({_initContainer:function(){this._container=Xn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Yt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nr.prototype._update.call(this);var t=this._bounds,l=t.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,v.setAttribute("width",l.x),v.setAttribute("height",l.y)),un(v,t.min),v.setAttribute("viewBox",[t.min.x,t.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(t){var l=t._path=Xn("path");t.options.className&&Et(l,t.options.className),t.options.interactive&&Et(l,"leaflet-interactive"),this._updateStyle(t),this._layers[k(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Yt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[k(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var l=t._path,v=t.options;l&&(v.stroke?(l.setAttribute("stroke",v.color),l.setAttribute("stroke-opacity",v.opacity),l.setAttribute("stroke-width",v.weight),l.setAttribute("stroke-linecap",v.lineCap),l.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?l.setAttribute("stroke-dasharray",v.dashArray):l.removeAttribute("stroke-dasharray"),v.dashOffset?l.setAttribute("stroke-dashoffset",v.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),v.fill?(l.setAttribute("fill",v.fillColor||v.color),l.setAttribute("fill-opacity",v.fillOpacity),l.setAttribute("fill-rule",v.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(t,l){this._setPath(t,We(t._parts,l))},_updateCircle:function(t){var l=t._point,v=Math.max(Math.round(t._radius),1),C=Math.max(Math.round(t._radiusY),1)||v,A="a"+v+","+C+" 0 1,0 ",j=t._empty()?"M0 0":"M"+(l.x-v)+","+l.y+A+v*2+",0 "+A+-v*2+",0 ";this._setPath(t,j)},_setPath:function(t,l){t._path.setAttribute("d",l)},_bringToFront:function(t){rs(t._path)},_bringToBack:function(t){Pr(t._path)}});ft.vml&&pn.include(bl);function kn(t){return ft.svg||ft.vml?new pn(t):null}It.include({getRenderer:function(t){var l=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var l=this._paneRenderers[t];return l===void 0&&(l=this._createRenderer({pane:t}),this._paneRenderers[t]=l),l},_createRenderer:function(t){return this.options.preferCanvas&&Ws(t)||kn(t)}});var Ro=vr.extend({initialize:function(t,l){vr.prototype.initialize.call(this,this._boundsToLatLngs(t),l)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ut(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function yr(t,l){return new Ro(t,l)}pn.create=Xn,pn.pointsToPath=We,Rr.geometryToLayer=hs,Rr.coordsToLatLng=Gs,Rr.coordsToLatLngs=Vs,Rr.latLngToCoords=Hs,Rr.latLngsToCoords=Sa,Rr.getFeature=ds,Rr.asFeature=Pa,It.mergeOptions({boxZoom:!0});var xt=wn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Yt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),jt(),ya(),this._startPoint=this._map.mouseEventToContainerPoint(t),bt(document,{contextmenu:pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),Et(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var l=new ce(this._point,this._startPoint),v=l.getSize();un(this._box,l.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Yt(this._box),Xt(this._container,"leaflet-crosshair")),as(),wa(),Wt(document,{contextmenu:pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var l=new mt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});It.addInitHook("addHandler","boxZoom",xt),It.mergeOptions({doubleClickZoom:!0});var Ra=wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var l=this._map,v=l.getZoom(),C=l.options.zoomDelta,A=t.originalEvent.shiftKey?v-C:v+C;l.options.doubleClickZoom==="center"?l.setZoom(A):l.setZoomAround(t.containerPoint,A)}});It.addInitHook("addHandler","doubleClickZoom",Ra),It.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ks=wn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new mr(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Et(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ut(this._map.options.maxBounds);this._offsetLimit=Fe(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var l=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(l),this._prunePositions(l)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,l){return t-(t-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;t.x<l.min.x&&(t.x=this._viscousLimit(t.x,l.min.x)),t.y<l.min.y&&(t.y=this._viscousLimit(t.y,l.min.y)),t.x>l.max.x&&(t.x=this._viscousLimit(t.x,l.max.x)),t.y>l.max.y&&(t.y=this._viscousLimit(t.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,l=Math.round(t/2),v=this._initialWorldOffset,C=this._draggable._newPos.x,A=(C-l+v)%t+l-v,j=(C+l+v)%t-l-v,ie=Math.abs(A+v)<Math.abs(j+v)?A:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ie},_onDragEnd:function(t){var l=this._map,v=l.options,C=!v.inertia||t.noInertia||this._times.length<2;if(l.fire("dragend",t),C)l.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,ie=v.easeLinearity,xe=A.multiplyBy(ie/j),Be=xe.distanceTo([0,0]),Ue=Math.min(v.inertiaMaxSpeed,Be),nt=xe.multiplyBy(Ue/Be),yt=Ue/(v.inertiaDeceleration*ie),At=nt.multiplyBy(-yt/2).round();!At.x&&!At.y?l.fire("moveend"):(At=l._limitOffset(At,l.options.maxBounds),lt(function(){l.panBy(At,{duration:yt,easeLinearity:ie,noMoveStart:!0,animate:!0})}))}}});It.addInitHook("addHandler","dragging",Ks),It.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zr=wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),bt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,l=document.documentElement,v=t.scrollTop||l.scrollTop,C=t.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(C,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var l=this._panKeys={},v=this.keyCodes,C,A;for(C=0,A=v.left.length;C<A;C++)l[v.left[C]]=[-1*t,0];for(C=0,A=v.right.length;C<A;C++)l[v.right[C]]=[t,0];for(C=0,A=v.down.length;C<A;C++)l[v.down[C]]=[0,t];for(C=0,A=v.up.length;C<A;C++)l[v.up[C]]=[0,-1*t]},_setZoomDelta:function(t){var l=this._zoomKeys={},v=this.keyCodes,C,A;for(C=0,A=v.zoomIn.length;C<A;C++)l[v.zoomIn[C]]=t;for(C=0,A=v.zoomOut.length;C<A;C++)l[v.zoomOut[C]]=-t},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var l=t.keyCode,v=this._map,C;if(l in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(C=this._panKeys[l],t.shiftKey&&(C=Ne(C).multiplyBy(3)),v.options.maxBounds&&(C=v._limitOffset(Ne(C),v.options.maxBounds)),v.options.worldCopyJump){var A=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(C)));v.panTo(A)}else v.panBy(C)}else if(l in this._zoomKeys)v.setZoom(v.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;pr(t)}}});It.addInitHook("addHandler","keyboard",zr),It.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Pt=wn.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var l=ml(t),v=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var C=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),C),pr(t)},_performZoom:function(){var t=this._map,l=t.getZoom(),v=this._map.options.zoomSnap||0;t._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,j=v?Math.ceil(A/v)*v:A,ie=t._limitZoom(l+(this._delta>0?j:-j))-l;this._delta=0,this._startTime=null,ie&&(t.options.scrollWheelZoom==="center"?t.setZoom(l+ie):t.setZoomAround(this._lastMousePos,l+ie))}});It.addInitHook("addHandler","scrollWheelZoom",Pt);var Ia=600;It.mergeOptions({tapHold:ft.touchNative&&ft.safari&&ft.mobile,tapTolerance:15});var Pn=wn.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var l=t.touches[0];this._startPos=this._newPos=new Re(l.clientX,l.clientY),this._holdTimeout=setTimeout(_(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",ln),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Ia),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Wt(document,"touchend",ln),Wt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(t){var l=t.touches[0];this._newPos=new Re(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,l){var v=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});v._simulated=!0,l.target.dispatchEvent(v)}});It.addInitHook("addHandler","tapHold",Pn),It.mergeOptions({touchZoom:ft.touch,bounceAtZoomLimits:!0});var Ln=wn.extend({addHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var l=this._map;if(!(!t.touches||t.touches.length!==2||l._animatingZoom||this._zooming)){var v=l.mouseEventToContainerPoint(t.touches[0]),C=l.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(v.add(C)._divideBy(2))),this._startDist=v.distanceTo(C),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),ln(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var l=this._map,v=l.mouseEventToContainerPoint(t.touches[0]),C=l.mouseEventToContainerPoint(t.touches[1]),A=v.distanceTo(C)/this._startDist;if(this._zoom=l.getScaleZoom(A,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&A<1||this._zoom>l.getMaxZoom()&&A>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var j=v._add(C)._divideBy(2)._subtract(this._centerPoint);if(A===1&&j.x===0&&j.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),wt(this._animRequest);var ie=_(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=lt(ie,this,!0),ln(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,wt(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});It.addInitHook("addHandler","touchZoom",Ln),It.BoxZoom=xt,It.DoubleClickZoom=Ra,It.Drag=Ks,It.Keyboard=zr,It.ScrollWheelZoom=Pt,It.TapHold=Pn,It.TouchZoom=Ln,a.Bounds=ce,a.Browser=ft,a.CRS=re,a.Canvas=Oa,a.Circle=Ea,a.CircleMarker=Or,a.Class=Jt,a.Control=Mt,a.DivIcon=Aa,a.DivOverlay=Fr,a.DomEvent=Di,a.DomUtil=Is,a.Draggable=mr,a.Evented=zt,a.FeatureGroup=gr,a.GeoJSON=Rr,a.GridLayer=gi,a.Handler=wn,a.Icon=Fi,a.ImageOverlay=Ir,a.LatLng=O,a.LatLngBounds=mt,a.Layer=Dn,a.LayerGroup=pi,a.LineUtil=js,a.Map=It,a.Marker=ri,a.Mixin=Lo,a.Path=ii,a.Point=Re,a.PolyUtil=au,a.Polygon=vr,a.Polyline=Yn,a.Popup=mi,a.PosAnimation=ka,a.Projection=Dr,a.Rectangle=Ro,a.Renderer=Nr,a.SVG=pn,a.SVGOverlay=Do,a.TileLayer=_i,a.Tooltip=ms,a.Transformation=de,a.Util=Ct,a.VideoOverlay=fs,a.bind=_,a.bounds=Fe,a.canvas=Ws,a.circle=_r,a.circleMarker=To,a.control=Ar,a.divIcon=Ll,a.extend=f,a.featureGroup=wl,a.geoJSON=Ta,a.geoJson=ir,a.gridLayer=gs,a.icon=xl,a.imageOverlay=kl,a.latLng=q,a.latLngBounds=ut,a.layerGroup=Us,a.map=ti,a.marker=uu,a.point=Ne,a.polygon=qs,a.polyline=cu,a.popup=ps,a.rectangle=yr,a.setOptions=W,a.stamp=k,a.svg=kn,a.svgOverlay=Oo,a.tileLayer=Da,a.tooltip=Zs,a.transformation=ze,a.version=c,a.videoOverlay=Ao;var vi=window.L;a.noConflict=function(){return window.L=vi,this},window.L=a}))})(Ou,Ou.exports)),Ou.exports}var el=Rf();const sa=Qc(el);function If(u,s,a){return Object.freeze({instance:u,context:s,container:a})}function Ff(u,s){return s==null?function(c,f){const p=ge.useRef();return p.current||(p.current=u(c,f)),p}:function(c,f){const p=ge.useRef();p.current||(p.current=u(c,f));const _=ge.useRef(c),{instance:x}=p.current;return ge.useEffect(function(){_.current!==c&&(s(x,c,_.current),_.current=c)},[x,c,f]),p}}function Ex(u,s){ge.useEffect(function(){return(s.layerContainer??s.map).addLayer(u.instance),function(){s.layerContainer?.removeLayer(u.instance),s.map.removeLayer(u.instance)}},[s,u])}function Mx(u){return function(a){const c=Of(),f=u(g_(a,c),c);return wx(c.map,a.attribution),Cx(f.current,a.eventHandlers),Ex(f.current,c),f}}function __(u){function s(f,p){return If(u(f),p)}const a=Ff(s),c=m_(a);return p_(c)}function Sx(u,s){const a=Ff(u,s),c=Mx(a);return p_(c)}function Px(u,s,a){const{opacity:c,zIndex:f}=s;c!=null&&c!==a.opacity&&u.setOpacity(c),f!=null&&f!==a.zIndex&&u.setZIndex(f)}const Bx=Ff(function({children:s,...a},c){const f=new el.Control.Layers(void 0,void 0,a);return If(f,d_(c,{layersControl:f}))},function(s,a,c){a.collapsed!==c.collapsed&&(a.collapsed===!0?s.collapse():s.expand())}),Tx=m_(Bx),Uu=Lx(Tx);function v_(u){return function(a){const c=Of(),f=ge.useRef(a),[p,_]=ge.useState(null),{layersControl:x,map:k}=c,S=ge.useCallback(H=>{x!=null&&(f.current.checked&&k.addLayer(H),u(x,H,f.current.name),_(H))},[x,k]),D=ge.useCallback(H=>{x?.removeLayer(H),_(null)},[x]),F=ge.useMemo(()=>d_(c,{layerContainer:{addLayer:S,removeLayer:D}}),[c,S,D]);return ge.useEffect(()=>{p!==null&&f.current!==a&&(a.checked===!0&&(f.current.checked==null||f.current.checked===!1)?k.addLayer(p):f.current.checked===!0&&(a.checked==null||a.checked===!1)&&k.removeLayer(p),f.current=a)}),a.children?$u.createElement(Df,{value:F},a.children):null}}Uu.BaseLayer=v_(function(s,a,c){s.addBaseLayer(a,c)});Uu.Overlay=v_(function(s,a,c){s.addOverlay(a,c)});function mf(){return mf=Object.assign||function(u){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(u[c]=a[c])}return u},mf.apply(this,arguments)}function Ax({bounds:u,boundsOptions:s,center:a,children:c,className:f,id:p,placeholder:_,style:x,whenReady:k,zoom:S,...D},F){const[H]=ge.useState({className:f,id:p,style:x}),[J,Q]=ge.useState(null);ge.useImperativeHandle(F,()=>J?.map??null,[J]);const W=ge.useCallback(ve=>{if(ve!==null&&J===null){const $e=new el.Map(ve,D);a!=null&&S!=null?$e.setView(a,S):u!=null&&$e.fitBounds(u,s),k!=null&&$e.whenReady(k),Q(kx($e))}},[]);ge.useEffect(()=>()=>{J?.map.remove()},[J]);const Y=J?$u.createElement(Df,{value:J},c):_??null;return $u.createElement("div",mf({},H,{ref:W}),Y)}const Dx=ge.forwardRef(Ax),Ox=__(function(s){return new el.Control.Scale(s)}),M0=Sx(function({url:s,...a},c){const f=new el.TileLayer(s,g_(a,c));return If(f,c)},function(s,a,c){Px(s,a,c);const{url:f}=a;f!=null&&f!==c.url&&s.setUrl(f)}),Rx=__(function(s){return new el.Control.Zoom(s)});var S0={},P0;function Ix(){return P0||(P0=1,(()=>{var u=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,_=(i,o)=>()=>(o||i((o={exports:{}}).exports,o),o.exports),x=(i,o,d,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let w of c(o))!p.call(i,w)&&w!==d&&s(i,w,{get:()=>o[w],enumerable:!(m=a(o,w))||m.enumerable});return i},k=(i,o,d)=>(d=i!=null?u(f(i)):{},x(o||!i||!i.__esModule?s(d,"default",{value:i,enumerable:!0}):d,i)),S=_((i,o)=>{function d(){this.__data__=[],this.size=0}o.exports=d}),D=_((i,o)=>{function d(m,w){return m===w||m!==m&&w!==w}o.exports=d}),F=_((i,o)=>{var d=D();function m(w,M){for(var B=w.length;B--;)if(d(w[B][0],M))return B;return-1}o.exports=m}),H=_((i,o)=>{var d=F(),m=Array.prototype,w=m.splice;function M(B){var T=this.__data__,I=d(T,B);if(I<0)return!1;var z=T.length-1;return I==z?T.pop():w.call(T,I,1),--this.size,!0}o.exports=M}),J=_((i,o)=>{var d=F();function m(w){var M=this.__data__,B=d(M,w);return B<0?void 0:M[B][1]}o.exports=m}),Q=_((i,o)=>{var d=F();function m(w){return d(this.__data__,w)>-1}o.exports=m}),W=_((i,o)=>{var d=F();function m(w,M){var B=this.__data__,T=d(B,w);return T<0?(++this.size,B.push([w,M])):B[T][1]=M,this}o.exports=m}),Y=_((i,o)=>{var d=S(),m=H(),w=J(),M=Q(),B=W();function T(I){var z=-1,ne=I==null?0:I.length;for(this.clear();++z<ne;){var K=I[z];this.set(K[0],K[1])}}T.prototype.clear=d,T.prototype.delete=m,T.prototype.get=w,T.prototype.has=M,T.prototype.set=B,o.exports=T}),ve=_((i,o)=>{var d=Y();function m(){this.__data__=new d,this.size=0}o.exports=m}),$e=_((i,o)=>{function d(m){var w=this.__data__,M=w.delete(m);return this.size=w.size,M}o.exports=d}),Oe=_((i,o)=>{function d(m){return this.__data__.get(m)}o.exports=d}),ye=_((i,o)=>{function d(m){return this.__data__.has(m)}o.exports=d}),Ee=_((i,o)=>{var d=typeof Ac=="object"&&Ac&&Ac.Object===Object&&Ac;o.exports=d}),De=_((i,o)=>{var d=Ee(),m=typeof self=="object"&&self&&self.Object===Object&&self,w=d||m||Function("return this")();o.exports=w}),He=_((i,o)=>{var d=De(),m=d.Symbol;o.exports=m}),_t=_((i,o)=>{var d=He(),m=Object.prototype,w=m.hasOwnProperty,M=m.toString,B=d?d.toStringTag:void 0;function T(I){var z=w.call(I,B),ne=I[B];try{I[B]=void 0;var K=!0}catch{}var Ce=M.call(I);return K&&(z?I[B]=ne:delete I[B]),Ce}o.exports=T}),X=_((i,o)=>{var d=Object.prototype,m=d.toString;function w(M){return m.call(M)}o.exports=w}),tt=_((i,o)=>{var d=He(),m=_t(),w=X(),M="[object Null]",B="[object Undefined]",T=d?d.toStringTag:void 0;function I(z){return z==null?z===void 0?B:M:T&&T in Object(z)?m(z):w(z)}o.exports=I}),lt=_((i,o)=>{function d(m){var w=typeof m;return m!=null&&(w=="object"||w=="function")}o.exports=d}),wt=_((i,o)=>{var d=tt(),m=lt(),w="[object AsyncFunction]",M="[object Function]",B="[object GeneratorFunction]",T="[object Proxy]";function I(z){if(!m(z))return!1;var ne=d(z);return ne==M||ne==B||ne==w||ne==T}o.exports=I}),Ct=_((i,o)=>{var d=De(),m=d["__core-js_shared__"];o.exports=m}),Jt=_((i,o)=>{var d=Ct(),m=(function(){var M=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""})();function w(M){return!!m&&m in M}o.exports=w}),vn=_((i,o)=>{var d=Function.prototype,m=d.toString;function w(M){if(M!=null){try{return m.call(M)}catch{}try{return M+""}catch{}}return""}o.exports=w}),Ft=_((i,o)=>{var d=wt(),m=Jt(),w=lt(),M=vn(),B=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,I=Function.prototype,z=Object.prototype,ne=I.toString,K=z.hasOwnProperty,Ce=RegExp("^"+ne.call(K).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Me(Ge){if(!w(Ge)||m(Ge))return!1;var et=d(Ge)?Ce:T;return et.test(M(Ge))}o.exports=Me}),zt=_((i,o)=>{function d(m,w){return m?.[w]}o.exports=d}),Re=_((i,o)=>{var d=Ft(),m=zt();function w(M,B){var T=m(M,B);return d(T)?T:void 0}o.exports=w}),vt=_((i,o)=>{var d=Re(),m=De(),w=d(m,"Map");o.exports=w}),Ne=_((i,o)=>{var d=Re(),m=d(Object,"create");o.exports=m}),ce=_((i,o)=>{var d=Ne();function m(){this.__data__=d?d(null):{},this.size=0}o.exports=m}),Fe=_((i,o)=>{function d(m){var w=this.has(m)&&delete this.__data__[m];return this.size-=w?1:0,w}o.exports=d}),mt=_((i,o)=>{var d=Ne(),m="__lodash_hash_undefined__",w=Object.prototype,M=w.hasOwnProperty;function B(T){var I=this.__data__;if(d){var z=I[T];return z===m?void 0:z}return M.call(I,T)?I[T]:void 0}o.exports=B}),ut=_((i,o)=>{var d=Ne(),m=Object.prototype,w=m.hasOwnProperty;function M(B){var T=this.__data__;return d?T[B]!==void 0:w.call(T,B)}o.exports=M}),O=_((i,o)=>{var d=Ne(),m="__lodash_hash_undefined__";function w(M,B){var T=this.__data__;return this.size+=this.has(M)?0:1,T[M]=d&&B===void 0?m:B,this}o.exports=w}),q=_((i,o)=>{var d=ce(),m=Fe(),w=mt(),M=ut(),B=O();function T(I){var z=-1,ne=I==null?0:I.length;for(this.clear();++z<ne;){var K=I[z];this.set(K[0],K[1])}}T.prototype.clear=d,T.prototype.delete=m,T.prototype.get=w,T.prototype.has=M,T.prototype.set=B,o.exports=T}),re=_((i,o)=>{var d=q(),m=Y(),w=vt();function M(){this.size=0,this.__data__={hash:new d,map:new(w||m),string:new d}}o.exports=M}),fe=_((i,o)=>{function d(m){var w=typeof m;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?m!=="__proto__":m===null}o.exports=d}),Ae=_((i,o)=>{var d=fe();function m(w,M){var B=w.__data__;return d(M)?B[typeof M=="string"?"string":"hash"]:B.map}o.exports=m}),Ye=_((i,o)=>{var d=Ae();function m(w){var M=d(this,w).delete(w);return this.size-=M?1:0,M}o.exports=m}),de=_((i,o)=>{var d=Ae();function m(w){return d(this,w).get(w)}o.exports=m}),ze=_((i,o)=>{var d=Ae();function m(w){return d(this,w).has(w)}o.exports=m}),Ie=_((i,o)=>{var d=Ae();function m(w,M){var B=d(this,w),T=B.size;return B.set(w,M),this.size+=B.size==T?0:1,this}o.exports=m}),qe=_((i,o)=>{var d=re(),m=Ye(),w=de(),M=ze(),B=Ie();function T(I){var z=-1,ne=I==null?0:I.length;for(this.clear();++z<ne;){var K=I[z];this.set(K[0],K[1])}}T.prototype.clear=d,T.prototype.delete=m,T.prototype.get=w,T.prototype.has=M,T.prototype.set=B,o.exports=T}),Ze=_((i,o)=>{var d=Y(),m=vt(),w=qe(),M=200;function B(T,I){var z=this.__data__;if(z instanceof d){var ne=z.__data__;if(!m||ne.length<M-1)return ne.push([T,I]),this.size=++z.size,this;z=this.__data__=new w(ne)}return z.set(T,I),this.size=z.size,this}o.exports=B}),We=_((i,o)=>{var d=Y(),m=ve(),w=$e(),M=Oe(),B=ye(),T=Ze();function I(z){var ne=this.__data__=new d(z);this.size=ne.size}I.prototype.clear=m,I.prototype.delete=w,I.prototype.get=M,I.prototype.has=B,I.prototype.set=T,o.exports=I}),Qe=_((i,o)=>{var d=Re(),m=(function(){try{var w=d(Object,"defineProperty");return w({},"",{}),w}catch{}})();o.exports=m}),ot=_((i,o)=>{var d=Qe();function m(w,M,B){M=="__proto__"&&d?d(w,M,{configurable:!0,enumerable:!0,value:B,writable:!0}):w[M]=B}o.exports=m}),St=_((i,o)=>{var d=ot(),m=D();function w(M,B,T){(T!==void 0&&!m(M[B],T)||T===void 0&&!(B in M))&&d(M,B,T)}o.exports=w}),fn=_((i,o)=>{function d(m){return function(w,M,B){for(var T=-1,I=Object(w),z=B(w),ne=z.length;ne--;){var K=z[m?ne:++T];if(M(I[K],K,I)===!1)break}return w}}o.exports=d}),li=_((i,o)=>{var d=fn(),m=d();o.exports=m}),ua=_((i,o)=>{var d=De(),m=typeof i=="object"&&i&&!i.nodeType&&i,w=m&&typeof o=="object"&&o&&!o.nodeType&&o,M=w&&w.exports===m,B=M?d.Buffer:void 0,T=B?B.allocUnsafe:void 0;function I(z,ne){if(ne)return z.slice();var K=z.length,Ce=T?T(K):new z.constructor(K);return z.copy(Ce),Ce}o.exports=I}),ro=_((i,o)=>{var d=De(),m=d.Uint8Array;o.exports=m}),il=_((i,o)=>{var d=ro();function m(w){var M=new w.constructor(w.byteLength);return new d(M).set(new d(w)),M}o.exports=m}),sl=_((i,o)=>{var d=il();function m(w,M){var B=M?d(w.buffer):w.buffer;return new w.constructor(B,w.byteOffset,w.length)}o.exports=m}),ca=_((i,o)=>{function d(m,w){var M=-1,B=m.length;for(w||(w=Array(B));++M<B;)w[M]=m[M];return w}o.exports=d}),ha=_((i,o)=>{var d=lt(),m=Object.create,w=(function(){function M(){}return function(B){if(!d(B))return{};if(m)return m(B);M.prototype=B;var T=new M;return M.prototype=void 0,T}})();o.exports=w}),Es=_((i,o)=>{function d(m,w){return function(M){return m(w(M))}}o.exports=d}),io=_((i,o)=>{var d=Es(),m=d(Object.getPrototypeOf,Object);o.exports=m}),Mi=_((i,o)=>{var d=Object.prototype;function m(w){var M=w&&w.constructor,B=typeof M=="function"&&M.prototype||d;return w===B}o.exports=m}),Xi=_((i,o)=>{var d=ha(),m=io(),w=Mi();function M(B){return typeof B.constructor=="function"&&!w(B)?d(m(B)):{}}o.exports=M}),Qi=_((i,o)=>{function d(m){return m!=null&&typeof m=="object"}o.exports=d}),so=_((i,o)=>{var d=tt(),m=Qi(),w="[object Arguments]";function M(B){return m(B)&&d(B)==w}o.exports=M}),Ms=_((i,o)=>{var d=so(),m=Qi(),w=Object.prototype,M=w.hasOwnProperty,B=w.propertyIsEnumerable,T=d((function(){return arguments})())?d:function(I){return m(I)&&M.call(I,"callee")&&!B.call(I,"callee")};o.exports=T}),es=_((i,o)=>{var d=Array.isArray;o.exports=d}),da=_((i,o)=>{var d=9007199254740991;function m(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=d}o.exports=m}),Yr=_((i,o)=>{var d=wt(),m=da();function w(M){return M!=null&&m(M.length)&&!d(M)}o.exports=w}),ao=_((i,o)=>{var d=Yr(),m=Qi();function w(M){return m(M)&&d(M)}o.exports=w}),oo=_((i,o)=>{function d(){return!1}o.exports=d}),Ss=_((i,o)=>{var d=De(),m=oo(),w=typeof i=="object"&&i&&!i.nodeType&&i,M=w&&typeof o=="object"&&o&&!o.nodeType&&o,B=M&&M.exports===w,T=B?d.Buffer:void 0,I=T?T.isBuffer:void 0,z=I||m;o.exports=z}),Si=_((i,o)=>{var d=tt(),m=io(),w=Qi(),M="[object Object]",B=Function.prototype,T=Object.prototype,I=B.toString,z=T.hasOwnProperty,ne=I.call(Object);function K(Ce){if(!w(Ce)||d(Ce)!=M)return!1;var Me=m(Ce);if(Me===null)return!0;var Ge=z.call(Me,"constructor")&&Me.constructor;return typeof Ge=="function"&&Ge instanceof Ge&&I.call(Ge)==ne}o.exports=K}),Pi=_((i,o)=>{var d=tt(),m=da(),w=Qi(),M="[object Arguments]",B="[object Array]",T="[object Boolean]",I="[object Date]",z="[object Error]",ne="[object Function]",K="[object Map]",Ce="[object Number]",Me="[object Object]",Ge="[object RegExp]",et="[object Set]",rt="[object String]",Dt="[object WeakMap]",ee="[object ArrayBuffer]",oe="[object DataView]",me="[object Float32Array]",Pe="[object Float64Array]",_e="[object Int8Array]",Le="[object Int16Array]",R="[object Int32Array]",U="[object Uint8Array]",G="[object Uint8ClampedArray]",$="[object Uint16Array]",V="[object Uint32Array]",Z={};Z[me]=Z[Pe]=Z[_e]=Z[Le]=Z[R]=Z[U]=Z[G]=Z[$]=Z[V]=!0,Z[M]=Z[B]=Z[ee]=Z[T]=Z[oe]=Z[I]=Z[z]=Z[ne]=Z[K]=Z[Ce]=Z[Me]=Z[Ge]=Z[et]=Z[rt]=Z[Dt]=!1;function le(ae){return w(ae)&&m(ae.length)&&!!Z[d(ae)]}o.exports=le}),al=_((i,o)=>{function d(m){return function(w){return m(w)}}o.exports=d}),ol=_((i,o)=>{var d=Ee(),m=typeof i=="object"&&i&&!i.nodeType&&i,w=m&&typeof o=="object"&&o&&!o.nodeType&&o,M=w&&w.exports===m,B=M&&d.process,T=(function(){try{var I=w&&w.require&&w.require("util").types;return I||B&&B.binding&&B.binding("util")}catch{}})();o.exports=T}),lo=_((i,o)=>{var d=Pi(),m=al(),w=ol(),M=w&&w.isTypedArray,B=M?m(M):d;o.exports=B}),uo=_((i,o)=>{function d(m,w){if(!(w==="constructor"&&typeof m[w]=="function")&&w!="__proto__")return m[w]}o.exports=d}),ll=_((i,o)=>{var d=ot(),m=D(),w=Object.prototype,M=w.hasOwnProperty;function B(T,I,z){var ne=T[I];(!(M.call(T,I)&&m(ne,z))||z===void 0&&!(I in T))&&d(T,I,z)}o.exports=B}),co=_((i,o)=>{var d=ll(),m=ot();function w(M,B,T,I){var z=!T;T||(T={});for(var ne=-1,K=B.length;++ne<K;){var Ce=B[ne],Me=I?I(T[Ce],M[Ce],Ce,T,M):void 0;Me===void 0&&(Me=M[Ce]),z?m(T,Ce,Me):d(T,Ce,Me)}return T}o.exports=w}),fa=_((i,o)=>{function d(m,w){for(var M=-1,B=Array(m);++M<m;)B[M]=w(M);return B}o.exports=d}),ts=_((i,o)=>{var d=9007199254740991,m=/^(?:0|[1-9]\d*)$/;function w(M,B){var T=typeof M;return B=B??d,!!B&&(T=="number"||T!="symbol"&&m.test(M))&&M>-1&&M%1==0&&M<B}o.exports=w}),ho=_((i,o)=>{var d=fa(),m=Ms(),w=es(),M=Ss(),B=ts(),T=lo(),I=Object.prototype,z=I.hasOwnProperty;function ne(K,Ce){var Me=w(K),Ge=!Me&&m(K),et=!Me&&!Ge&&M(K),rt=!Me&&!Ge&&!et&&T(K),Dt=Me||Ge||et||rt,ee=Dt?d(K.length,String):[],oe=ee.length;for(var me in K)(Ce||z.call(K,me))&&!(Dt&&(me=="length"||et&&(me=="offset"||me=="parent")||rt&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||B(me,oe)))&&ee.push(me);return ee}o.exports=ne}),Ps=_((i,o)=>{function d(m){var w=[];if(m!=null)for(var M in Object(m))w.push(M);return w}o.exports=d}),nu=_((i,o)=>{var d=lt(),m=Mi(),w=Ps(),M=Object.prototype,B=M.hasOwnProperty;function T(I){if(!d(I))return w(I);var z=m(I),ne=[];for(var K in I)K=="constructor"&&(z||!B.call(I,K))||ne.push(K);return ne}o.exports=T}),An=_((i,o)=>{var d=ho(),m=nu(),w=Yr();function M(B){return w(B)?d(B,!0):m(B)}o.exports=M}),ft=_((i,o)=>{var d=co(),m=An();function w(M){return d(M,m(M))}o.exports=w}),Bs=_((i,o)=>{var d=St(),m=ua(),w=sl(),M=ca(),B=Xi(),T=Ms(),I=es(),z=ao(),ne=Ss(),K=wt(),Ce=lt(),Me=Si(),Ge=lo(),et=uo(),rt=ft();function Dt(ee,oe,me,Pe,_e,Le,R){var U=et(ee,me),G=et(oe,me),$=R.get(G);if($){d(ee,me,$);return}var V=Le?Le(U,G,me+"",ee,oe,R):void 0,Z=V===void 0;if(Z){var le=I(G),ae=!le&&ne(G),he=!le&&!ae&&Ge(G);V=G,le||ae||he?I(U)?V=U:z(U)?V=M(U):ae?(Z=!1,V=m(G,!0)):he?(Z=!1,V=w(G,!0)):V=[]:Me(G)||T(G)?(V=U,T(U)?V=rt(U):(!Ce(U)||K(U))&&(V=B(G))):Z=!1}Z&&(R.set(G,V),_e(V,G,Pe,Le,R),R.delete(G)),d(ee,me,V)}o.exports=Dt}),pa=_((i,o)=>{var d=We(),m=St(),w=li(),M=Bs(),B=lt(),T=An(),I=uo();function z(ne,K,Ce,Me,Ge){ne!==K&&w(K,function(et,rt){if(Ge||(Ge=new d),B(et))M(ne,K,rt,Ce,z,Me,Ge);else{var Dt=Me?Me(I(ne,rt),et,rt+"",ne,K,Ge):void 0;Dt===void 0&&(Dt=et),m(ne,rt,Dt)}},T)}o.exports=z}),fo=_((i,o)=>{function d(m){return m}o.exports=d}),ul=_((i,o)=>{function d(m,w,M){switch(M.length){case 0:return m.call(w);case 1:return m.call(w,M[0]);case 2:return m.call(w,M[0],M[1]);case 3:return m.call(w,M[0],M[1],M[2])}return m.apply(w,M)}o.exports=d}),po=_((i,o)=>{var d=ul(),m=Math.max;function w(M,B,T){return B=m(B===void 0?M.length-1:B,0),function(){for(var I=arguments,z=-1,ne=m(I.length-B,0),K=Array(ne);++z<ne;)K[z]=I[B+z];z=-1;for(var Ce=Array(B+1);++z<B;)Ce[z]=I[z];return Ce[B]=T(K),d(M,this,Ce)}}o.exports=w}),ui=_((i,o)=>{function d(m){return function(){return m}}o.exports=d}),Bi=_((i,o)=>{var d=ui(),m=Qe(),w=fo(),M=m?function(B,T){return m(B,"toString",{configurable:!0,enumerable:!1,value:d(T),writable:!0})}:w;o.exports=M}),mo=_((i,o)=>{var d=800,m=16,w=Date.now;function M(B){var T=0,I=0;return function(){var z=w(),ne=m-(z-I);if(I=z,ne>0){if(++T>=d)return arguments[0]}else T=0;return B.apply(void 0,arguments)}}o.exports=M}),ru=_((i,o)=>{var d=Bi(),m=mo(),w=m(d);o.exports=w}),cl=_((i,o)=>{var d=fo(),m=po(),w=ru();function M(B,T){return w(m(B,T,d),B+"")}o.exports=M}),hl=_((i,o)=>{var d=D(),m=Yr(),w=ts(),M=lt();function B(T,I,z){if(!M(z))return!1;var ne=typeof I;return(ne=="number"?m(z)&&w(I,z.length):ne=="string"&&I in z)?d(z[I],T):!1}o.exports=B}),dl=_((i,o)=>{var d=cl(),m=hl();function w(M){return d(function(B,T){var I=-1,z=T.length,ne=z>1?T[z-1]:void 0,K=z>2?T[2]:void 0;for(ne=M.length>3&&typeof ne=="function"?(z--,ne):void 0,K&&m(T[0],T[1],K)&&(ne=z<3?void 0:ne,z=1),B=Object(B);++I<z;){var Ce=T[I];Ce&&M(B,Ce,I,ne)}return B})}o.exports=w}),Ts=_((i,o)=>{var d=pa(),m=dl(),w=m(function(M,B,T){d(M,B,T)});o.exports=w}),go=_((i,o)=>{var d=tt(),m=Qi(),w="[object Symbol]";function M(B){return typeof B=="symbol"||m(B)&&d(B)==w}o.exports=M}),ma=_((i,o)=>{var d=es(),m=go(),w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/;function B(T,I){if(d(T))return!1;var z=typeof T;return z=="number"||z=="symbol"||z=="boolean"||T==null||m(T)?!0:M.test(T)||!w.test(T)||I!=null&&T in Object(I)}o.exports=B}),on=_((i,o)=>{var d=qe(),m="Expected a function";function w(M,B){if(typeof M!="function"||B!=null&&typeof B!="function")throw new TypeError(m);var T=function(){var I=arguments,z=B?B.apply(this,I):I[0],ne=T.cache;if(ne.has(z))return ne.get(z);var K=M.apply(this,I);return T.cache=ne.set(z,K)||ne,K};return T.cache=new(w.Cache||d),T}w.Cache=d,o.exports=w}),iu=_((i,o)=>{var d=on(),m=500;function w(M){var B=d(M,function(I){return T.size===m&&T.clear(),I}),T=B.cache;return B}o.exports=w}),_o=_((i,o)=>{var d=iu(),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/\\(\\)?/g,M=d(function(B){var T=[];return B.charCodeAt(0)===46&&T.push(""),B.replace(m,function(I,z,ne,K){T.push(ne?K.replace(w,"$1"):z||I)}),T});o.exports=M}),fl=_((i,o)=>{function d(m,w){for(var M=-1,B=m==null?0:m.length,T=Array(B);++M<B;)T[M]=w(m[M],M,m);return T}o.exports=d}),ga=_((i,o)=>{var d=He(),m=fl(),w=es(),M=go(),B=d?d.prototype:void 0,T=B?B.toString:void 0;function I(z){if(typeof z=="string")return z;if(w(z))return m(z,I)+"";if(M(z))return T?T.call(z):"";var ne=z+"";return ne=="0"&&1/z==-1/0?"-0":ne}o.exports=I}),vo=_((i,o)=>{var d=ga();function m(w){return w==null?"":d(w)}o.exports=m}),ns=_((i,o)=>{var d=es(),m=ma(),w=_o(),M=vo();function B(T,I){return d(T)?T:m(T,I)?[T]:w(M(T))}o.exports=B}),As=_((i,o)=>{var d=go();function m(w){if(typeof w=="string"||d(w))return w;var M=w+"";return M=="0"&&1/w==-1/0?"-0":M}o.exports=m}),hr=_((i,o)=>{var d=ns(),m=As();function w(M,B){B=d(B,M);for(var T=0,I=B.length;M!=null&&T<I;)M=M[m(B[T++])];return T&&T==I?M:void 0}o.exports=w}),ci=_((i,o)=>{var d=hr();function m(w,M,B){var T=w==null?void 0:d(w,M);return T===void 0?B:T}o.exports=m}),Tt=_((i,o)=>{(function(d,m){typeof i=="object"&&typeof o<"u"?o.exports=m():(d=d||self).RBush=m()})(i,function(){function d(ee,oe,me,Pe,_e){(function Le(R,U,G,$,V){for(;$>G;){if($-G>600){var Z=$-G+1,le=U-G+1,ae=Math.log(Z),he=.5*Math.exp(2*ae/3),we=.5*Math.sqrt(ae*he*(Z-he)/Z)*(le-Z/2<0?-1:1),ke=Math.max(G,Math.floor(U-le*he/Z+we)),je=Math.min($,Math.floor(U+(Z-le)*he/Z+we));Le(R,U,ke,je,V)}var it=R[U],at=G,ct=$;for(m(R,G,U),V(R[$],it)>0&&m(R,G,$);at<ct;){for(m(R,at,ct),at++,ct--;V(R[at],it)<0;)at++;for(;V(R[ct],it)>0;)ct--}V(R[G],it)===0?m(R,G,ct):m(R,++ct,$),ct<=U&&(G=ct+1),U<=ct&&($=ct-1)}})(ee,oe,me||0,Pe||ee.length-1,_e||w)}function m(ee,oe,me){var Pe=ee[oe];ee[oe]=ee[me],ee[me]=Pe}function w(ee,oe){return ee<oe?-1:ee>oe?1:0}var M=function(ee){ee===void 0&&(ee=9),this._maxEntries=Math.max(4,ee),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function B(ee,oe,me){if(!me)return oe.indexOf(ee);for(var Pe=0;Pe<oe.length;Pe++)if(me(ee,oe[Pe]))return Pe;return-1}function T(ee,oe){I(ee,0,ee.children.length,oe,ee)}function I(ee,oe,me,Pe,_e){_e||(_e=rt(null)),_e.minX=1/0,_e.minY=1/0,_e.maxX=-1/0,_e.maxY=-1/0;for(var Le=oe;Le<me;Le++){var R=ee.children[Le];z(_e,ee.leaf?Pe(R):R)}return _e}function z(ee,oe){return ee.minX=Math.min(ee.minX,oe.minX),ee.minY=Math.min(ee.minY,oe.minY),ee.maxX=Math.max(ee.maxX,oe.maxX),ee.maxY=Math.max(ee.maxY,oe.maxY),ee}function ne(ee,oe){return ee.minX-oe.minX}function K(ee,oe){return ee.minY-oe.minY}function Ce(ee){return(ee.maxX-ee.minX)*(ee.maxY-ee.minY)}function Me(ee){return ee.maxX-ee.minX+(ee.maxY-ee.minY)}function Ge(ee,oe){return ee.minX<=oe.minX&&ee.minY<=oe.minY&&oe.maxX<=ee.maxX&&oe.maxY<=ee.maxY}function et(ee,oe){return oe.minX<=ee.maxX&&oe.minY<=ee.maxY&&oe.maxX>=ee.minX&&oe.maxY>=ee.minY}function rt(ee){return{children:ee,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Dt(ee,oe,me,Pe,_e){for(var Le=[oe,me];Le.length;)if(!((me=Le.pop())-(oe=Le.pop())<=Pe)){var R=oe+Math.ceil((me-oe)/Pe/2)*Pe;d(ee,R,oe,me,_e),Le.push(oe,R,R,me)}}return M.prototype.all=function(){return this._all(this.data,[])},M.prototype.search=function(ee){var oe=this.data,me=[];if(!et(ee,oe))return me;for(var Pe=this.toBBox,_e=[];oe;){for(var Le=0;Le<oe.children.length;Le++){var R=oe.children[Le],U=oe.leaf?Pe(R):R;et(ee,U)&&(oe.leaf?me.push(R):Ge(ee,U)?this._all(R,me):_e.push(R))}oe=_e.pop()}return me},M.prototype.collides=function(ee){var oe=this.data;if(!et(ee,oe))return!1;for(var me=[];oe;){for(var Pe=0;Pe<oe.children.length;Pe++){var _e=oe.children[Pe],Le=oe.leaf?this.toBBox(_e):_e;if(et(ee,Le)){if(oe.leaf||Ge(ee,Le))return!0;me.push(_e)}}oe=me.pop()}return!1},M.prototype.load=function(ee){if(!ee||!ee.length)return this;if(ee.length<this._minEntries){for(var oe=0;oe<ee.length;oe++)this.insert(ee[oe]);return this}var me=this._build(ee.slice(),0,ee.length-1,0);if(this.data.children.length)if(this.data.height===me.height)this._splitRoot(this.data,me);else{if(this.data.height<me.height){var Pe=this.data;this.data=me,me=Pe}this._insert(me,this.data.height-me.height-1,!0)}else this.data=me;return this},M.prototype.insert=function(ee){return ee&&this._insert(ee,this.data.height-1),this},M.prototype.clear=function(){return this.data=rt([]),this},M.prototype.remove=function(ee,oe){if(!ee)return this;for(var me,Pe,_e,Le=this.data,R=this.toBBox(ee),U=[],G=[];Le||U.length;){if(Le||(Le=U.pop(),Pe=U[U.length-1],me=G.pop(),_e=!0),Le.leaf){var $=B(ee,Le.children,oe);if($!==-1)return Le.children.splice($,1),U.push(Le),this._condense(U),this}_e||Le.leaf||!Ge(Le,R)?Pe?(me++,Le=Pe.children[me],_e=!1):Le=null:(U.push(Le),G.push(me),me=0,Pe=Le,Le=Le.children[0])}return this},M.prototype.toBBox=function(ee){return ee},M.prototype.compareMinX=function(ee,oe){return ee.minX-oe.minX},M.prototype.compareMinY=function(ee,oe){return ee.minY-oe.minY},M.prototype.toJSON=function(){return this.data},M.prototype.fromJSON=function(ee){return this.data=ee,this},M.prototype._all=function(ee,oe){for(var me=[];ee;)ee.leaf?oe.push.apply(oe,ee.children):me.push.apply(me,ee.children),ee=me.pop();return oe},M.prototype._build=function(ee,oe,me,Pe){var _e,Le=me-oe+1,R=this._maxEntries;if(Le<=R)return T(_e=rt(ee.slice(oe,me+1)),this.toBBox),_e;Pe||(Pe=Math.ceil(Math.log(Le)/Math.log(R)),R=Math.ceil(Le/Math.pow(R,Pe-1))),(_e=rt([])).leaf=!1,_e.height=Pe;var U=Math.ceil(Le/R),G=U*Math.ceil(Math.sqrt(R));Dt(ee,oe,me,G,this.compareMinX);for(var $=oe;$<=me;$+=G){var V=Math.min($+G-1,me);Dt(ee,$,V,U,this.compareMinY);for(var Z=$;Z<=V;Z+=U){var le=Math.min(Z+U-1,V);_e.children.push(this._build(ee,Z,le,Pe-1))}}return T(_e,this.toBBox),_e},M.prototype._chooseSubtree=function(ee,oe,me,Pe){for(;Pe.push(oe),!oe.leaf&&Pe.length-1!==me;){for(var _e=1/0,Le=1/0,R=void 0,U=0;U<oe.children.length;U++){var G=oe.children[U],$=Ce(G),V=(Z=ee,le=G,(Math.max(le.maxX,Z.maxX)-Math.min(le.minX,Z.minX))*(Math.max(le.maxY,Z.maxY)-Math.min(le.minY,Z.minY))-$);V<Le?(Le=V,_e=$<_e?$:_e,R=G):V===Le&&$<_e&&(_e=$,R=G)}oe=R||oe.children[0]}var Z,le;return oe},M.prototype._insert=function(ee,oe,me){var Pe=me?ee:this.toBBox(ee),_e=[],Le=this._chooseSubtree(Pe,this.data,oe,_e);for(Le.children.push(ee),z(Le,Pe);oe>=0&&_e[oe].children.length>this._maxEntries;)this._split(_e,oe),oe--;this._adjustParentBBoxes(Pe,_e,oe)},M.prototype._split=function(ee,oe){var me=ee[oe],Pe=me.children.length,_e=this._minEntries;this._chooseSplitAxis(me,_e,Pe);var Le=this._chooseSplitIndex(me,_e,Pe),R=rt(me.children.splice(Le,me.children.length-Le));R.height=me.height,R.leaf=me.leaf,T(me,this.toBBox),T(R,this.toBBox),oe?ee[oe-1].children.push(R):this._splitRoot(me,R)},M.prototype._splitRoot=function(ee,oe){this.data=rt([ee,oe]),this.data.height=ee.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},M.prototype._chooseSplitIndex=function(ee,oe,me){for(var Pe,_e,Le,R,U,G,$,V=1/0,Z=1/0,le=oe;le<=me-oe;le++){var ae=I(ee,0,le,this.toBBox),he=I(ee,le,me,this.toBBox),we=(_e=ae,Le=he,R=void 0,U=void 0,G=void 0,$=void 0,R=Math.max(_e.minX,Le.minX),U=Math.max(_e.minY,Le.minY),G=Math.min(_e.maxX,Le.maxX),$=Math.min(_e.maxY,Le.maxY),Math.max(0,G-R)*Math.max(0,$-U)),ke=Ce(ae)+Ce(he);we<V?(V=we,Pe=le,Z=ke<Z?ke:Z):we===V&&ke<Z&&(Z=ke,Pe=le)}return Pe||me-oe},M.prototype._chooseSplitAxis=function(ee,oe,me){var Pe=ee.leaf?this.compareMinX:ne,_e=ee.leaf?this.compareMinY:K;this._allDistMargin(ee,oe,me,Pe)<this._allDistMargin(ee,oe,me,_e)&&ee.children.sort(Pe)},M.prototype._allDistMargin=function(ee,oe,me,Pe){ee.children.sort(Pe);for(var _e=this.toBBox,Le=I(ee,0,oe,_e),R=I(ee,me-oe,me,_e),U=Me(Le)+Me(R),G=oe;G<me-oe;G++){var $=ee.children[G];z(Le,ee.leaf?_e($):$),U+=Me(Le)}for(var V=me-oe-1;V>=oe;V--){var Z=ee.children[V];z(R,ee.leaf?_e(Z):Z),U+=Me(R)}return U},M.prototype._adjustParentBBoxes=function(ee,oe,me){for(var Pe=me;Pe>=0;Pe--)z(oe[Pe],ee)},M.prototype._condense=function(ee){for(var oe=ee.length-1,me=void 0;oe>=0;oe--)ee[oe].children.length===0?oe>0?(me=ee[oe-1].children).splice(me.indexOf(ee[oe]),1):this.clear():T(ee[oe],this.toBBox)},M})}),Yt=_(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o($,V,Z){Z===void 0&&(Z={});var le={type:"Feature"};return(Z.id===0||Z.id)&&(le.id=Z.id),Z.bbox&&(le.bbox=Z.bbox),le.properties=V||{},le.geometry=$,le}i.feature=o;function d($,V,Z){switch($){case"Point":return m(V).geometry;case"LineString":return T(V).geometry;case"Polygon":return M(V).geometry;case"MultiPoint":return K(V).geometry;case"MultiLineString":return ne(V).geometry;case"MultiPolygon":return Ce(V).geometry;default:throw new Error($+" is invalid")}}i.geometry=d;function m($,V,Z){if(Z===void 0&&(Z={}),!$)throw new Error("coordinates is required");if(!Array.isArray($))throw new Error("coordinates must be an Array");if($.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Le($[0])||!Le($[1]))throw new Error("coordinates must contain numbers");var le={type:"Point",coordinates:$};return o(le,V,Z)}i.point=m;function w($,V,Z){return Z===void 0&&(Z={}),z($.map(function(le){return m(le,V)}),Z)}i.points=w;function M($,V,Z){Z===void 0&&(Z={});for(var le=0,ae=$;le<ae.length;le++){var he=ae[le];if(he.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var we=0;we<he[he.length-1].length;we++)if(he[he.length-1][we]!==he[0][we])throw new Error("First and last Position are not equivalent.")}var ke={type:"Polygon",coordinates:$};return o(ke,V,Z)}i.polygon=M;function B($,V,Z){return Z===void 0&&(Z={}),z($.map(function(le){return M(le,V)}),Z)}i.polygons=B;function T($,V,Z){if(Z===void 0&&(Z={}),$.length<2)throw new Error("coordinates must be an array of two or more positions");var le={type:"LineString",coordinates:$};return o(le,V,Z)}i.lineString=T;function I($,V,Z){return Z===void 0&&(Z={}),z($.map(function(le){return T(le,V)}),Z)}i.lineStrings=I;function z($,V){V===void 0&&(V={});var Z={type:"FeatureCollection"};return V.id&&(Z.id=V.id),V.bbox&&(Z.bbox=V.bbox),Z.features=$,Z}i.featureCollection=z;function ne($,V,Z){Z===void 0&&(Z={});var le={type:"MultiLineString",coordinates:$};return o(le,V,Z)}i.multiLineString=ne;function K($,V,Z){Z===void 0&&(Z={});var le={type:"MultiPoint",coordinates:$};return o(le,V,Z)}i.multiPoint=K;function Ce($,V,Z){Z===void 0&&(Z={});var le={type:"MultiPolygon",coordinates:$};return o(le,V,Z)}i.multiPolygon=Ce;function Me($,V,Z){Z===void 0&&(Z={});var le={type:"GeometryCollection",geometries:$};return o(le,V,Z)}i.geometryCollection=Me;function Ge($,V){if(V===void 0&&(V=0),V&&!(V>=0))throw new Error("precision must be a positive number");var Z=Math.pow(10,V||0);return Math.round($*Z)/Z}i.round=Ge;function et($,V){V===void 0&&(V="kilometers");var Z=i.factors[V];if(!Z)throw new Error(V+" units is invalid");return $*Z}i.radiansToLength=et;function rt($,V){V===void 0&&(V="kilometers");var Z=i.factors[V];if(!Z)throw new Error(V+" units is invalid");return $/Z}i.lengthToRadians=rt;function Dt($,V){return oe(rt($,V))}i.lengthToDegrees=Dt;function ee($){var V=$%360;return V<0&&(V+=360),V}i.bearingToAzimuth=ee;function oe($){var V=$%(2*Math.PI);return V*180/Math.PI}i.radiansToDegrees=oe;function me($){var V=$%360;return V*Math.PI/180}i.degreesToRadians=me;function Pe($,V,Z){if(V===void 0&&(V="kilometers"),Z===void 0&&(Z="kilometers"),!($>=0))throw new Error("length must be a positive number");return et(rt($,V),Z)}i.convertLength=Pe;function _e($,V,Z){if(V===void 0&&(V="meters"),Z===void 0&&(Z="kilometers"),!($>=0))throw new Error("area must be a positive number");var le=i.areaFactors[V];if(!le)throw new Error("invalid original units");var ae=i.areaFactors[Z];if(!ae)throw new Error("invalid final units");return $/le*ae}i.convertArea=_e;function Le($){return!isNaN($)&&$!==null&&!Array.isArray($)}i.isNumber=Le;function R($){return!!$&&$.constructor===Object}i.isObject=R;function U($){if(!$)throw new Error("bbox is required");if(!Array.isArray($))throw new Error("bbox must be an Array");if($.length!==4&&$.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");$.forEach(function(V){if(!Le(V))throw new Error("bbox must only contain numbers")})}i.validateBBox=U;function G($){if(!$)throw new Error("id is required");if(["string","number"].indexOf(typeof $)===-1)throw new Error("id must be a number or a string")}i.validateId=G}),Ds=_(i=>{Object.defineProperty(i,"__esModule",{value:!0});var o=Yt();function d(oe,me,Pe){if(oe!==null)for(var _e,Le,R,U,G,$,V,Z=0,le=0,ae,he=oe.type,we=he==="FeatureCollection",ke=he==="Feature",je=we?oe.features.length:1,it=0;it<je;it++){V=we?oe.features[it].geometry:ke?oe.geometry:oe,ae=V?V.type==="GeometryCollection":!1,G=ae?V.geometries.length:1;for(var at=0;at<G;at++){var ct=0,$t=0;if(U=ae?V.geometries[at]:V,U!==null){$=U.coordinates;var qt=U.type;switch(Z=Pe&&(qt==="Polygon"||qt==="MultiPolygon")?1:0,qt){case null:break;case"Point":if(me($,le,it,ct,$t)===!1)return!1;le++,ct++;break;case"LineString":case"MultiPoint":for(_e=0;_e<$.length;_e++){if(me($[_e],le,it,ct,$t)===!1)return!1;le++,qt==="MultiPoint"&&ct++}qt==="LineString"&&ct++;break;case"Polygon":case"MultiLineString":for(_e=0;_e<$.length;_e++){for(Le=0;Le<$[_e].length-Z;Le++){if(me($[_e][Le],le,it,ct,$t)===!1)return!1;le++}qt==="MultiLineString"&&ct++,qt==="Polygon"&&$t++}qt==="Polygon"&&ct++;break;case"MultiPolygon":for(_e=0;_e<$.length;_e++){for($t=0,Le=0;Le<$[_e].length;Le++){for(R=0;R<$[_e][Le].length-Z;R++){if(me($[_e][Le][R],le,it,ct,$t)===!1)return!1;le++}$t++}ct++}break;case"GeometryCollection":for(_e=0;_e<U.geometries.length;_e++)if(d(U.geometries[_e],me,Pe)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(oe,me,Pe,_e){var Le=Pe;return d(oe,function(R,U,G,$,V){U===0&&Pe===void 0?Le=R:Le=me(Le,R,U,G,$,V)},_e),Le}function w(oe,me){var Pe;switch(oe.type){case"FeatureCollection":for(Pe=0;Pe<oe.features.length&&me(oe.features[Pe].properties,Pe)!==!1;Pe++);break;case"Feature":me(oe.properties,0);break}}function M(oe,me,Pe){var _e=Pe;return w(oe,function(Le,R){R===0&&Pe===void 0?_e=Le:_e=me(_e,Le,R)}),_e}function B(oe,me){if(oe.type==="Feature")me(oe,0);else if(oe.type==="FeatureCollection")for(var Pe=0;Pe<oe.features.length&&me(oe.features[Pe],Pe)!==!1;Pe++);}function T(oe,me,Pe){var _e=Pe;return B(oe,function(Le,R){R===0&&Pe===void 0?_e=Le:_e=me(_e,Le,R)}),_e}function I(oe){var me=[];return d(oe,function(Pe){me.push(Pe)}),me}function z(oe,me){var Pe,_e,Le,R,U,G,$,V,Z,le,ae=0,he=oe.type==="FeatureCollection",we=oe.type==="Feature",ke=he?oe.features.length:1;for(Pe=0;Pe<ke;Pe++){for(G=he?oe.features[Pe].geometry:we?oe.geometry:oe,V=he?oe.features[Pe].properties:we?oe.properties:{},Z=he?oe.features[Pe].bbox:we?oe.bbox:void 0,le=he?oe.features[Pe].id:we?oe.id:void 0,$=G?G.type==="GeometryCollection":!1,U=$?G.geometries.length:1,Le=0;Le<U;Le++){if(R=$?G.geometries[Le]:G,R===null){if(me(null,ae,V,Z,le)===!1)return!1;continue}switch(R.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(me(R,ae,V,Z,le)===!1)return!1;break}case"GeometryCollection":{for(_e=0;_e<R.geometries.length;_e++)if(me(R.geometries[_e],ae,V,Z,le)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ae++}}function ne(oe,me,Pe){var _e=Pe;return z(oe,function(Le,R,U,G,$){R===0&&Pe===void 0?_e=Le:_e=me(_e,Le,R,U,G,$)}),_e}function K(oe,me){z(oe,function(Pe,_e,Le,R,U){var G=Pe===null?null:Pe.type;switch(G){case null:case"Point":case"LineString":case"Polygon":return me(o.feature(Pe,Le,{bbox:R,id:U}),_e,0)===!1?!1:void 0}var $;switch(G){case"MultiPoint":$="Point";break;case"MultiLineString":$="LineString";break;case"MultiPolygon":$="Polygon";break}for(var V=0;V<Pe.coordinates.length;V++){var Z=Pe.coordinates[V],le={type:$,coordinates:Z};if(me(o.feature(le,Le),_e,V)===!1)return!1}})}function Ce(oe,me,Pe){var _e=Pe;return K(oe,function(Le,R,U){R===0&&U===0&&Pe===void 0?_e=Le:_e=me(_e,Le,R,U)}),_e}function Me(oe,me){K(oe,function(Pe,_e,Le){var R=0;if(Pe.geometry){var U=Pe.geometry.type;if(!(U==="Point"||U==="MultiPoint")){var G,$=0,V=0,Z=0;if(d(Pe,function(le,ae,he,we,ke){if(G===void 0||_e>$||we>V||ke>Z){G=le,$=_e,V=we,Z=ke,R=0;return}var je=o.lineString([G,le],Pe.properties);if(me(je,_e,Le,ke,R)===!1)return!1;R++,G=le})===!1)return!1}}})}function Ge(oe,me,Pe){var _e=Pe,Le=!1;return Me(oe,function(R,U,G,$,V){Le===!1&&Pe===void 0?_e=R:_e=me(_e,R,U,G,$,V),Le=!0}),_e}function et(oe,me){if(!oe)throw new Error("geojson is required");K(oe,function(Pe,_e,Le){if(Pe.geometry!==null){var R=Pe.geometry.type,U=Pe.geometry.coordinates;switch(R){case"LineString":if(me(Pe,_e,Le,0,0)===!1)return!1;break;case"Polygon":for(var G=0;G<U.length;G++)if(me(o.lineString(U[G],Pe.properties),_e,Le,G)===!1)return!1;break}}})}function rt(oe,me,Pe){var _e=Pe;return et(oe,function(Le,R,U,G){R===0&&Pe===void 0?_e=Le:_e=me(_e,Le,R,U,G)}),_e}function Dt(oe,me){if(me=me||{},!o.isObject(me))throw new Error("options is invalid");var Pe=me.featureIndex||0,_e=me.multiFeatureIndex||0,Le=me.geometryIndex||0,R=me.segmentIndex||0,U=me.properties,G;switch(oe.type){case"FeatureCollection":Pe<0&&(Pe=oe.features.length+Pe),U=U||oe.features[Pe].properties,G=oe.features[Pe].geometry;break;case"Feature":U=U||oe.properties,G=oe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":G=oe;break;default:throw new Error("geojson is invalid")}if(G===null)return null;var $=G.coordinates;switch(G.type){case"Point":case"MultiPoint":return null;case"LineString":return R<0&&(R=$.length+R-1),o.lineString([$[R],$[R+1]],U,me);case"Polygon":return Le<0&&(Le=$.length+Le),R<0&&(R=$[Le].length+R-1),o.lineString([$[Le][R],$[Le][R+1]],U,me);case"MultiLineString":return _e<0&&(_e=$.length+_e),R<0&&(R=$[_e].length+R-1),o.lineString([$[_e][R],$[_e][R+1]],U,me);case"MultiPolygon":return _e<0&&(_e=$.length+_e),Le<0&&(Le=$[_e].length+Le),R<0&&(R=$[_e][Le].length-R-1),o.lineString([$[_e][Le][R],$[_e][Le][R+1]],U,me)}throw new Error("geojson is invalid")}function ee(oe,me){if(me=me||{},!o.isObject(me))throw new Error("options is invalid");var Pe=me.featureIndex||0,_e=me.multiFeatureIndex||0,Le=me.geometryIndex||0,R=me.coordIndex||0,U=me.properties,G;switch(oe.type){case"FeatureCollection":Pe<0&&(Pe=oe.features.length+Pe),U=U||oe.features[Pe].properties,G=oe.features[Pe].geometry;break;case"Feature":U=U||oe.properties,G=oe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":G=oe;break;default:throw new Error("geojson is invalid")}if(G===null)return null;var $=G.coordinates;switch(G.type){case"Point":return o.point($,U,me);case"MultiPoint":return _e<0&&(_e=$.length+_e),o.point($[_e],U,me);case"LineString":return R<0&&(R=$.length+R),o.point($[R],U,me);case"Polygon":return Le<0&&(Le=$.length+Le),R<0&&(R=$[Le].length+R),o.point($[Le][R],U,me);case"MultiLineString":return _e<0&&(_e=$.length+_e),R<0&&(R=$[_e].length+R),o.point($[_e][R],U,me);case"MultiPolygon":return _e<0&&(_e=$.length+_e),Le<0&&(Le=$[_e].length+Le),R<0&&(R=$[_e][Le].length-R),o.point($[_e][Le][R],U,me)}throw new Error("geojson is invalid")}i.coordAll=I,i.coordEach=d,i.coordReduce=m,i.featureEach=B,i.featureReduce=T,i.findPoint=ee,i.findSegment=Dt,i.flattenEach=K,i.flattenReduce=Ce,i.geomEach=z,i.geomReduce=ne,i.lineEach=et,i.lineReduce=rt,i.propEach=w,i.propReduce=M,i.segmentEach=Me,i.segmentReduce=Ge}),rs=_(i=>{Object.defineProperty(i,"__esModule",{value:!0});var o=Ds();function d(m){var w=[1/0,1/0,-1/0,-1/0];return o.coordEach(m,function(M){w[0]>M[0]&&(w[0]=M[0]),w[1]>M[1]&&(w[1]=M[1]),w[2]<M[0]&&(w[2]=M[0]),w[3]<M[1]&&(w[3]=M[1])}),w}d.default=d,i.default=d}),Pr=_((i,o)=>{var d=Tt(),m=Yt(),w=Ds(),M=rs().default,B=w.featureEach;w.coordEach,m.polygon;var T=m.featureCollection;function I(z){var ne=new d(z);return ne.insert=function(K){if(K.type!=="Feature")throw new Error("invalid feature");return K.bbox=K.bbox?K.bbox:M(K),d.prototype.insert.call(this,K)},ne.load=function(K){var Ce=[];return Array.isArray(K)?K.forEach(function(Me){if(Me.type!=="Feature")throw new Error("invalid features");Me.bbox=Me.bbox?Me.bbox:M(Me),Ce.push(Me)}):B(K,function(Me){if(Me.type!=="Feature")throw new Error("invalid features");Me.bbox=Me.bbox?Me.bbox:M(Me),Ce.push(Me)}),d.prototype.load.call(this,Ce)},ne.remove=function(K,Ce){if(K.type!=="Feature")throw new Error("invalid feature");return K.bbox=K.bbox?K.bbox:M(K),d.prototype.remove.call(this,K,Ce)},ne.clear=function(){return d.prototype.clear.call(this)},ne.search=function(K){var Ce=d.prototype.search.call(this,this.toBBox(K));return T(Ce)},ne.collides=function(K){return d.prototype.collides.call(this,this.toBBox(K))},ne.all=function(){var K=d.prototype.all.call(this);return T(K)},ne.toJSON=function(){return d.prototype.toJSON.call(this)},ne.fromJSON=function(K){return d.prototype.fromJSON.call(this,K)},ne.toBBox=function(K){var Ce;if(K.bbox)Ce=K.bbox;else if(Array.isArray(K)&&K.length===4)Ce=K;else if(Array.isArray(K)&&K.length===6)Ce=[K[0],K[1],K[3],K[4]];else if(K.type==="Feature")Ce=M(K);else if(K.type==="FeatureCollection")Ce=M(K);else throw new Error("invalid geojson");return{minX:Ce[0],minY:Ce[1],maxX:Ce[2],maxY:Ce[3]}},ne}o.exports=I,o.exports.default=I});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var o=Object(this),d=o.length>>>0,m=arguments[1],w=0;w<d;w++)if(i.call(m,o[w],w,o))return w;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var o=Object(this),d=o.length>>>0,m=arguments[1],w=0;w<d;w++){var M=o[w];if(i.call(m,M,w,o))return M}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var o=1;o<arguments.length;o++){var d=arguments[o];if(d!=null)for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(i[m]=d[m])}return i}),(function(i){i.forEach(function(o){o.hasOwnProperty("remove")||Object.defineProperty(o,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,o){if(this==null)throw new TypeError('"this" is null or not defined');var d=Object(this),m=d.length>>>0;if(m===0)return!1;var w=o|0,M=Math.max(w>=0?w:m-Math.abs(w),0);function B(T,I){return T===I||typeof T=="number"&&typeof I=="number"&&isNaN(T)&&isNaN(I)}for(;M<m;){if(B(d[M],i))return!0;M++}return!1}});var is={version:"2.18.3"},Et=k(Ts()),Xt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},yo={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},_a={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},qn={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},pl={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},ss={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},dr={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},un={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Xr={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},jt={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},as={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},va={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},hi={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ya={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},wa={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Os={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Rs={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},os={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},fr={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Qr={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Br={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Is={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},bt={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},yn={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Wt={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},wo={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Ti={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},xo=hi,ei={en:Xt,de:yo,it:_a,id:qn,ro:pl,ru:ss,es:dr,nl:un,fr:Xr,pt:xo,pt_br:va,pt_pt:hi,zh:jt,zh_tw:as,pl:ya,sv:wa,el:Os,hu:Rs,da:os,no:fr,fa:Qr,ua:Br,tr:Is,cz:bt,ja:yn,fi:Wt,ko:wo,ky:Ti},Tr={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let o={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(d=>{this._isRelevantForEdit(d)&&d.pm.enable(o)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let o in i){let d=i[o];this._isRelevantForEdit(d)&&d.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},xa=Tr,Fs={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(o=>{this._isRelevantForDrag(o)&&o.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(o=>{o.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let o in i){let d=i[o];this._isRelevantForDrag(d)&&d.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},ln=Fs,pr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let o=i.target;this._isRelevantForRemoval(o)&&!o.pm.dragging()&&(o.removeFrom(this.map.pm._getContainingLayer()),o.remove(),o instanceof L.LayerGroup?(this._fireRemoveLayerGroup(o),this._fireRemoveLayerGroup(this.map,o)):(o.pm._fireRemove(o),o.pm._fireRemove(this.map,o)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let o in i){let d=i[o];this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},Ai=pr,Ns={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let o in i){let d=i[o];this._isRelevantForRemoval(d)&&d.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},su=Ns,ml=k(Ts()),zs={_fireDrawStart(i="Draw",o={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,o)},_fireDrawEnd(i="Draw",o={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,o)},_fireCreate(i,o="Draw",d={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},o,d)},_fireCenterPlaced(i="Draw",o={}){let d=i==="Draw"?this._layer:void 0,m=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:d,layer:m,latlng:this._layer.getLatLng()},i,o)},_fireCut(i,o,d,m="Draw",w={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:o,originalLayer:d},m,w)},_fireEdit(i=this._layer,o="Edit",d={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},o,d)},_fireEnable(i="Edit",o={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,o)},_fireDisable(i="Edit",o={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,o)},_fireUpdate(i="Edit",o={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,o)},_fireMarkerDragStart(i,o=void 0,d="Edit",m={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:o},d,m)},_fireMarkerDrag(i,o=void 0,d="Edit",m={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:o},d,m)},_fireMarkerDragEnd(i,o=void 0,d=void 0,m="Edit",w={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:o,intersectionReset:d},m,w)},_fireDragStart(i="Edit",o={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,o)},_fireDrag(i,o="Edit",d={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},o,d)},_fireDragEnd(i="Edit",o={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,o)},_fireDragEnable(i="Edit",o={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,o)},_fireDragDisable(i="Edit",o={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,o)},_fireRemove(i,o=i,d="Edit",m={}){this.__fire(i,"pm:remove",{layer:o,shape:this.getShape()},d,m)},_fireVertexAdded(i,o,d,m="Edit",w={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:o,latlng:d,shape:this.getShape()},m,w)},_fireVertexRemoved(i,o,d="Edit",m={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:o,shape:this.getShape()},d,m)},_fireVertexClick(i,o,d="Edit",m={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:o,shape:this.getShape()},d,m)},_fireIntersect(i,o=this._layer,d="Edit",m={}){this.__fire(o,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},d,m)},_fireLayerReset(i,o,d="Edit",m={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:o,shape:this.getShape()},d,m)},_fireChange(i,o="Edit",d={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},o,d)},_fireTextChange(i,o="Edit",d={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},o,d)},_fireTextFocus(i="Edit",o={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,o)},_fireTextBlur(i="Edit",o={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,o)},_fireSnapDrag(i,o,d="Snapping",m={}){this.__fire(i,"pm:snapdrag",o,d,m)},_fireSnap(i,o,d="Snapping",m={}){this.__fire(i,"pm:snap",o,d,m)},_fireUnsnap(i,o,d="Snapping",m={}){this.__fire(i,"pm:unsnap",o,d,m)},_fireRotationEnable(i,o,d="Rotation",m={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},d,m)},_fireRotationDisable(i,o="Rotation",d={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},o,d)},_fireRotationStart(i,o,d="Rotation",m={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:o},d,m)},_fireRotation(i,o,d,m=this._rotationLayer,w="Rotation",M={}){this.__fire(i,"pm:rotate",{layer:m,helpLayer:this._layer,startAngle:this._startAngle,angle:m.pm.getAngle(),angleDiff:o,oldLatLngs:d,newLatLngs:m.getLatLngs()},w,M)},_fireRotationEnd(i,o,d,m="Rotation",w={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:o,angle:this._rotationLayer.pm.getAngle(),originLatLngs:d,newLatLngs:this._rotationLayer.getLatLngs()},m,w)},_fireActionClick(i,o,d,m="Toolbar",w={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:o,button:d},m,w)},_fireButtonClick(i,o,d="Toolbar",m={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:o},d,m)},_fireLangChange(i,o,d,m,w="Global",M={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:o,fallback:d,translations:m},w,M)},_fireGlobalDragModeToggled(i,o="Global",d={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},o,d)},_fireGlobalEditModeToggled(i,o="Global",d={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},o,d)},_fireGlobalRemovalModeToggled(i,o="Global",d={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},o,d)},_fireGlobalCutModeToggled(i="Global",o={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,o)},_fireGlobalDrawModeToggled(i="Global",o={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,o)},_fireGlobalRotateModeToggled(i="Global",o={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,o)},_fireRemoveLayerGroup(i,o=i,d="Edit",m={}){this.__fire(i,"pm:remove",{layer:o,shape:void 0},d,m)},_fireKeyeventEvent(i,o,d,m="Global",w={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:o,focusOn:d},m,w)},__fire(i,o,d,m,w={}){d=(0,ml.default)(d,w,{source:m}),L.PM.Utils._fireEvent(i,o,d)}},Di=zs,ka=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let o="document";this.map.getContainer().contains(i.target)&&(o="map");let d={event:i,eventType:i.type,focusOn:o};this._lastEvents[i.type]=d,this._lastEvents.current=d,this.map.pm._fireKeyeventEvent(i,i.type,o)},_onBlur(i){i.altKey=!1;let o={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=o,this._lastEvents.current=o},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){return this._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return this._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return this._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return this._lastEvents.current?.event.metaKey},getPressedKey(){return this._lastEvents.current?.event.key}}),It=ka,ti=k(ci());function Mt(i){let o=L.PM.activeLang;return(0,ti.default)(ei[o],i)||(0,ti.default)(ei.en,i)||i}function Ar(i){for(let o=0;o<i.length;o+=1){let d=i[o];if(Array.isArray(d)){if(Ar(d))return!0}else if(d!=null&&d!=="")return!0}return!1}function ls(i){return i.reduce((o,d)=>{if(d.length!==0){let m=Array.isArray(d)?ls(d):d;Array.isArray(m)?m.length!==0&&o.push(m):o.push(m)}return o},[])}function La(i,o,d){let m={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:w,b:M,f:B}=m,T=i.lng,I=i.lat,z=d,ne=Math.PI,K=o*ne/180,Ce=Math.sin(K),Me=Math.cos(K),Ge=(1-B)*Math.tan(I*ne/180),et=1/Math.sqrt(1+Ge*Ge),rt=Ge*et,Dt=Math.atan2(Ge,Me),ee=et*Ce,oe=1-ee*ee,me=oe*(w*w-M*M)/(M*M),Pe=1+me/16384*(4096+me*(-768+me*(320-175*me))),_e=me/1024*(256+me*(-128+me*(74-47*me))),Le=z/(M*Pe),R=2*Math.PI,U,G,$;for(;Math.abs(Le-R)>1e-12;){U=Math.cos(2*Dt+Le),G=Math.sin(Le),$=Math.cos(Le);let je=_e*G*(U+_e/4*($*(-1+2*U*U)-_e/6*U*(-3+4*G*G)*(-3+4*U*U)));R=Le,Le=z/(M*Pe)+je}let V=rt*G-et*$*Me,Z=Math.atan2(rt*$+et*G*Me,(1-B)*Math.sqrt(ee*ee+V*V)),le=Math.atan2(G*Ce,et*$-rt*G*Me),ae=B/16*oe*(4+B*(4-3*oe)),he=le-(1-ae)*B*ee*(Le+ae*G*(U+ae*$*(-1+2*U*U))),we=T+he*180/ne,ke=Z*180/ne;return L.latLng(we,ke)}function Oi(i,o,d,m,w=!0){let M,B,T,I=[];for(let z=0;z<d;z+=1){if(w)M=z*360/d+m,B=La(i,M,o),T=L.latLng(B.lng,B.lat);else{let ne=i.lat+Math.cos(2*z*Math.PI/d)*o,K=i.lng+Math.sin(2*z*Math.PI/d)*o;T=L.latLng(ne,K)}I.push(T)}return I}function gl(i,o,d){o=(o+360)%360;let m=Math.PI/180,w=180/Math.PI,{R:M}=L.CRS.Earth,B=i.lng*m,T=i.lat*m,I=o*m,z=Math.sin(T),ne=Math.cos(T),K=Math.cos(d/M),Ce=Math.sin(d/M),Me=Math.asin(z*K+ne*Ce*Math.cos(I)),Ge=B+Math.atan2(Math.sin(I)*Ce*ne,K-z*Math.sin(Me));Ge*=w;let et=Ge-360,rt=Ge<-180?Ge+360:Ge;return Ge=Ge>180?et:rt,L.latLng([Me*w,Ge])}function Mn(i,o,d){let m=i.latLngToContainerPoint(o),w=i.latLngToContainerPoint(d),M=Math.atan2(w.y-m.y,w.x-m.x)*180/Math.PI+90;return M+=M<0?360:0,M}function ni(i,o,d,m){let w=Mn(i,o,d);return gl(o,w,m)}function ko(i,o,d="asc"){if(!o||Object.keys(o).length===0)return(I,z)=>I-z;let m=Object.keys(o),w,M=m.length-1,B={};for(;M>=0;)w=m[M],B[w.toLowerCase()]=o[w],M-=1;function T(I){if(I instanceof L.Marker)return"Marker";if(I instanceof L.Circle)return"Circle";if(I instanceof L.CircleMarker)return"CircleMarker";if(I instanceof L.Rectangle)return"Rectangle";if(I instanceof L.Polygon)return"Polygon";if(I instanceof L.Polyline)return"Line"}return(I,z)=>{let ne,K;if(ne=T(I.layer).toLowerCase(),K=T(z.layer).toLowerCase(),!ne||!K)return 0;let Ce=ne in B?B[ne]:Number.MAX_SAFE_INTEGER,Me=K in B?B[K]:Number.MAX_SAFE_INTEGER,Ge=0;return Ce<Me?Ge=-1:Ce>Me&&(Ge=1),d==="desc"?Ge*-1:Ge}}function Gn(i,o=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(o).getLatLngs():L.polyline(o).getLatLngs()}function _l(i,o){if(o.options.crs?.projection?.MAX_LATITUDE){let d=o.options.crs?.projection?.MAX_LATITUDE;i.lat=Math.max(Math.min(d,i.lat),-d)}return i}function wn(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var Lo=L.Class.extend({includes:[xa,ln,Ai,su,Di],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=It(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",o,d="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let w=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(w){let M=[`${w[1]}_${w[2]}`,`${w[1]}`];for(let B of M)if(ei[B]){i=B;break}}}let m=L.PM.activeLang;o&&(ei[i]=(0,Et.default)(ei[d],o)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(m,i,d,ei[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",o){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,o)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,o={}){let d=o.ignoreShapes||[],m=o.merge||!1;this.map.pm.Draw.shapes.forEach(w=>{d.indexOf(w)===-1&&this.map.pm.Draw[w].setPathOptions(i,m)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let o=(0,Et.default)(this.globalOptions,i);o.editable&&(o.resizeableCircleMarker=o.editable,delete o.editable);let d=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!o.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),d=!0);let m=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!o.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),m=!0),this.map.pm.Draw.shapes.forEach(w=>{this.map.pm.Draw[w].setOptions(o)}),d&&this.map.pm.Draw.CircleMarker.enable(),m&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(w=>{w.pm.setOptions(o)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=o,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let o=L.PM.Utils.findLayers(this.map);if(!i)return o;let d=L.featureGroup();return d._pmTempLayer=!0,o.forEach(m=>{d.addLayer(m)}),d},getGeomanDrawLayers(i=!1){let o=L.PM.Utils.findLayers(this.map).filter(m=>m._drawnByGeoman===!0);if(!i)return o;let d=L.featureGroup();return d._pmTempLayer=!0,o.forEach(m=>{d.addLayer(m)}),d},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){wn(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let o="";i.type==="touchstart"||i.type==="pointerdown"?o="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(o="mouseup"),o&&wn(this.map)._onClick(this._createMouseEvent(o,i))},_createMouseEvent(i,o){let d,m=o.touches[0]||o.changedTouches[0];try{d=new MouseEvent(i,{bubbles:o.bubbles,cancelable:o.cancelable,view:o.view,detail:m.detail,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY,ctrlKey:o.ctrlKey,altKey:o.altKey,shiftKey:o.shiftKey,metaKey:o.metaKey,button:o.button,relatedTarget:o.relatedTarget})}catch{d=document.createEvent("MouseEvents"),d.initMouseEvent(i,o.bubbles,o.cancelable,o.view,m.detail,m.screenX,m.screenY,m.clientX,m.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget)}return d}}),us=Lo,mr=L.Control.extend({includes:[Di],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let o=this.options.position.indexOf("right")>-1?"pos-right":"",d=L.DomUtil.create("div",`button-container  ${o}`,this._container);i.title&&d.setAttribute("title",i.title);let m=L.DomUtil.create("a","leaflet-buttons-control-button",d);m.setAttribute("role","button"),m.setAttribute("tabindex","0"),m.href="#";let w=L.DomUtil.create("div",`leaflet-pm-actions-container ${o}`,d),M=i.actions,B={cancel:{text:Mt("actions.cancel"),title:Mt("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Mt("actions.finish"),title:Mt("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Mt("actions.removeLastVertex"),title:Mt("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:Mt("actions.finish"),title:Mt("actions.finish"),onClick(I){this._map.pm.Draw[i.jsClass]._finishShape(I)}}};i._preparedActions=M.map(I=>{let z=typeof I=="string"?I:I.name,ne;if(B[z])ne=B[z];else if(I.text)ne=I;else return ne;let K=L.DomUtil.create("a",`leaflet-pm-action ${o} action-${z}`,w);if(K.setAttribute("role","button"),K.setAttribute("tabindex","0"),K.href="#",ne.title&&(K.title=ne.title),K.innerHTML=ne.text,L.DomEvent.disableClickPropagation(K),L.DomEvent.on(K,"click",L.DomEvent.stop),ne._node=K,!i.disabled&&ne.onClick){let Ce=Me=>{Me.preventDefault();let Ge="",{buttons:et}=this._map.pm.Toolbar;for(let rt in et)if(et[rt]._button===i){Ge=rt;break}this._fireActionClick(ne,Ge,i)};L.DomEvent.addListener(K,"click",Ce,this),L.DomEvent.addListener(K,"click",ne.onClick,this),L.DomEvent.addListener(K,"click",()=>this._updateActiveAction(i))}return ne}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(d,"active");let T=L.DomUtil.create("div","control-icon",m);return i.iconUrl&&T.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(T,i.className),L.DomEvent.disableClickPropagation(m),L.DomEvent.on(m,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(m,"click",this._onBtnClick,this),L.DomEvent.addListener(m,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(m,"pm-disabled"),m.setAttribute("aria-disabled","true")),d},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:o}=this._map.pm.Toolbar;for(let d in o)if(o[d]._button===this._button){i=d;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",o=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(o,i),o.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(o,i),o.setAttribute("aria-disabled","false"))},_updateActiveAction(i){i._preparedActions?.forEach(o=>{o?._node&&(o.isActive&&o.isActive.call(this)?L.DomUtil.addClass(o._node,"active-action"):L.DomUtil.removeClass(o._node,"active-action"))})}}),Co=mr;L.Control.PMButton=Co;var vl=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let o=`${i}Container`;return this[o]||(this[o]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[o]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),o={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let d in i){let m=i[d];L.Util.setOptions(m,{className:o.geomanIcons[d]})}},removeControls(){let i=this.getButtons();for(let o in i)i[o].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,o){return this.buttons[i]=o,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let o in this.buttons){let d=this.buttons[o];d._button.disableByOtherButtons&&d!==i&&d.toggled()&&d._triggerClick()}},toggleButton(i,o,d=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let m=i;return d&&this.triggerClickOnToggledButtons(this.buttons[m]),this.buttons[m]?this.buttons[m].toggle(o):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:Mt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},o={title:Mt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={className:"control-icon leaflet-pm-icon-polyline",title:Mt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},m={title:Mt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},w={title:Mt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:Mt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:Mt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:Mt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},I={title:Mt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},z={title:Mt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ne={title:Mt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={className:"control-icon leaflet-pm-icon-text",title:Mt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Ce,Me)=>{this.map.pm.Draw[Me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(d)),this._addButton("drawRectangle",new L.Control.PMButton(M)),this._addButton("drawPolygon",new L.Control.PMButton(o)),this._addButton("drawCircle",new L.Control.PMButton(m)),this._addButton("drawCircleMarker",new L.Control.PMButton(w)),this._addButton("drawText",new L.Control.PMButton(K)),this._addButton("editMode",new L.Control.PMButton(B)),this._addButton("dragMode",new L.Control.PMButton(T)),this._addButton("cutPolygon",new L.Control.PMButton(I)),this._addButton("removalMode",new L.Control.PMButton(z)),this._addButton("rotateMode",new L.Control.PMButton(ne))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),o=[];this.options.drawControls===!1&&(o=o.concat(Object.keys(i).filter(d=>!i[d]._button.tool))),this.options.editControls===!1&&(o=o.concat(Object.keys(i).filter(d=>i[d]._button.tool==="edit"))),this.options.optionsControls===!1&&(o=o.concat(Object.keys(i).filter(d=>i[d]._button.tool==="options"))),this.options.customControls===!1&&(o=o.concat(Object.keys(i).filter(d=>i[d]._button.tool==="custom")));for(let d in i)if(this.options[d]&&o.indexOf(d)===-1){let m=i[d]._button.tool;m||(m="draw"),i[d].setPosition(this._getBtnPosition(m)),i[d].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,o){this.options.positions[i]=o,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,o){if(o)typeof o!="object"&&(o={name:o});else throw new TypeError("Button has no name");let d=this._btnNameMapping(i);if(!o.name)throw new TypeError("Button has no name");if(this.buttons[o.name])throw new TypeError("Button with this name already exists");let m=this.map.pm.Draw.createNewDrawInstance(o.name,d);o={...this.buttons[d]._button,...o};let w=this.createCustomControl(o);return{drawInstance:m,control:w}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let o={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let d=this._addButton(i.name,new L.Control.PMButton(o));return this.changeControlOrder(),d},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let o={};if(i)for(let d in this.getButtons()){let m=this.getButtons()[d];(m._button.tool===i||i==="draw"&&!m._button.tool)&&(o[d]=m)}return o},changeControlOrder(i=[]){let o=this._shapeMapping(),d=[];i.forEach(M=>{o[M]?d.push(o[M]):d.push(M)});let m=this.getButtons(),w={};d.forEach(M=>{m[M]&&(w[M]=m[M])}),Object.keys(m).filter(M=>!m[M]._button.tool||m[M]._button.tool==="draw").forEach(M=>{d.indexOf(M)===-1&&(w[M]=m[M])}),Object.keys(m).filter(M=>m[M]._button.tool==="edit").forEach(M=>{d.indexOf(M)===-1&&(w[M]=m[M])}),Object.keys(m).filter(M=>m[M]._button.tool==="options").forEach(M=>{d.indexOf(M)===-1&&(w[M]=m[M])}),Object.keys(m).filter(M=>m[M]._button.tool==="custom").forEach(M=>{d.indexOf(M)===-1&&(w[M]=m[M])}),Object.keys(m).forEach(M=>{d.indexOf(M)===-1&&(w[M]=m[M])}),this.map.pm.Toolbar.buttons=w,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),o=[];for(let d in i)o.push(d);return o},changeActionsOfControl(i,o){let d=this._btnNameMapping(i);if(!d)throw new TypeError("No name passed");if(!o)throw new TypeError("No actions passed");if(!this.buttons[d])throw new TypeError("Button with this name not exists");this.buttons[d]._button.actions=o,this.changeControlOrder()},setButtonDisabled(i,o){let d=this._btnNameMapping(i);o?this.buttons[d].disable():this.buttons[d].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let o=this._shapeMapping();return o[i]?o[i]:i}}),bo=vl,au=k(Ts()),Ca={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(o=>{if(Array.isArray(o)){this._assignEvents(o);return}o.off("drag",this._handleSnapping,this),o.on("drag",this._handleSnapping,this),o.off("dragend",this._cleanupSnapping,this),o.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let o=i.target;o._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(o=>{o.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){let o=i.target;if(o._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),i?.originalEvent?.altKey||this._map?.pm?.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let d=this._calcClosestLayer(o.getLatLng(),this._snapList);if(Object.keys(d).length===0)return!1;let m=d.layer instanceof L.Marker||d.layer instanceof L.CircleMarker||!this.options.snapSegment,w;m?w=d.latlng:w=this._checkPrioritiySnapping(d);let M=this.options.snapDistance,B={marker:o,shape:this._shape,snapLatLng:w,segment:d.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:d.layer,distance:d.distance};if(this._fireSnapDrag(B.marker,B),this._fireSnapDrag(this._layer,B),d.distance<M){o._orgLatLng=o.getLatLng(),o.setLatLng(w),o._snapped=!0,o._snapInfo=B;let T=()=>{this._snapLatLng=w,this._fireSnap(o,B),this._fireSnap(this._layer,B)},I=this._snapLatLng||{},z=w||{};(I.lat!==z.lat||I.lng!==z.lng)&&T()}else this._snapLatLng&&(this._unsnap(B),o._snapped=!1,o._snapInfo=void 0,this._fireUnsnap(B.marker,B),this._fireUnsnap(this._layer,B));return!0},_createSnapList(){let i=[],o=[],d=this._map;d.off("layerremove",this._handleSnapLayerRemoval,this),d.on("layerremove",this._handleSnapLayerRemoval,this),d.eachLayer(m=>{if((m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&m.options.snapIgnore!==!0){if(m.options.snapIgnore===void 0&&(!L.PM.optIn&&m.options.pmIgnore===!0||L.PM.optIn&&m.options.pmIgnore!==!1))return;(m instanceof L.Circle||m instanceof L.CircleMarker)&&m.pm&&m.pm._hiddenPolyCircle?i.push(m.pm._hiddenPolyCircle):m instanceof L.ImageOverlay&&(m=L.rectangle(m.getBounds())),i.push(m);let w=L.polyline([],{color:"red",pmIgnore:!0});w._pmTempLayer=!0,o.push(w),(m instanceof L.Circle||m instanceof L.CircleMarker)&&o.push(w)}}),i=i.filter(m=>this._layer!==m),i=i.filter(m=>m._latlng||m._latlngs&&Ar(m._latlngs)),i=i.filter(m=>!m._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let m=L.polyline([],{color:"red",pmIgnore:!0});m._pmTempLayer=!0,o.push(m)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=o},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let o=this._snapList.findIndex(d=>d._leaflet_id===i._leaflet_id);o>-1&&this._snapList.splice(o,1)},_calcClosestLayer(i,o){return this._calcClosestLayers(i,o,1)[0]},_calcClosestLayers(i,o,d=1){let m=[],w={};o.forEach((B,T)=>{if(B._parentCopy&&B._parentCopy===this._layer||B.getLatLngs?.().flat(5).length<2)return;let I=this._calcLayerDistances(i,B);if(I.distance=Math.floor(I.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[T]){let z=L.polyline([],{color:"red",pmIgnore:!0});z._pmTempLayer=!0,this.debugIndicatorLines[T]=z}this.debugIndicatorLines[T].setLatLngs([i,I.latlng])}d===1&&(w.distance===void 0||I.distance-5<=w.distance)?(I.distance+5<w.distance&&(m=[]),w=I,w.layer=B,m.push(w)):d!==1&&(w={},w=I,w.layer=B,m.push(w))}),d!==1&&(m=m.sort((B,T)=>B.distance-T.distance)),d===-1&&(d=m.length);let M=this._getClosestLayerByPriority(m,d);return L.Util.isArray(M)?M:[M]},_calcLayerDistances(i,o){let d=this._map,m=o instanceof L.Marker||o instanceof L.CircleMarker,w=o instanceof L.Polygon,M=i;if(m){let B=o.getLatLng();return{latlng:{...B},distance:this._getDistance(d,B,M)}}return this._calcLatLngDistances(M,o.getLatLngs(),d,w)},_calcLatLngDistances(i,o,d,m=!1){let w,M,B,T=I=>{I.forEach((z,ne)=>{if(Array.isArray(z)){T(z);return}if(this.options.snapSegment){let K=z,Ce;m?Ce=ne+1===I.length?0:ne+1:Ce=ne+1===I.length?void 0:ne+1;let Me=I[Ce];if(Me){let Ge=this._getDistanceToSegment(d,i,K,Me);(M===void 0||Ge<M)&&(M=Ge,B=[K,Me])}}else{let K=this._getDistance(d,i,z);(M===void 0||K<M)&&(M=K,w=z)}})};return T(o),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(d,i,B[0],B[1])},segment:B,distance:M}:{latlng:w,distance:M}},_getClosestLayerByPriority(i,o=1){i=i.sort((B,T)=>B._leaflet_id-T._leaflet_id);let d=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],m=this._map.pm.globalOptions.snappingOrder||[],w=0,M={};return m.concat(d).forEach(B=>{M[B]||(w+=1,M[B]=w)}),i.sort(ko("instanceofShape",M)),o===1?i[0]||{}:i.slice(0,o)},_checkPrioritiySnapping(i){let o=this._map,d=i.segment[0],m=i.segment[1],w=i.latlng,M=w;if(this.options.snapVertex){let B=this._getDistance(o,d,w),T=this._getDistance(o,m,w),I=B<T?d:m,z=B<T?B:T;if(this.options.snapMiddle){let K=L.PM.Utils.calcMiddleLatLng(o,d,m),Ce=this._getDistance(o,K,w);Ce<B&&Ce<T&&(I=K,z=Ce)}let ne=this.options.snapDistance;z<ne&&(M=I)}return{...M}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,o,d,m){let w=i.getMaxZoom();w===1/0&&(w=i.getZoom());let M=i.project(o,w),B=i.project(d,w),T=i.project(m,w),I=L.LineUtil.closestPointOnSegment(M,B,T);return i.unproject(I,w)},_getDistanceToSegment(i,o,d,m){let w=i.latLngToContainerPoint(o),M=i.latLngToContainerPoint(d),B=i.latLngToContainerPoint(m);return L.LineUtil.pointToSegmentDistance(w,M,B)},_getDistance(i,o,d){return i.latLngToContainerPoint(o).distanceTo(i.latLngToContainerPoint(d))}},Eo=Ca,ou=L.Class.extend({includes:[Eo,Di],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let o=new L.Icon.Default;o.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=o,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(d=>{this[d]=new L.PM.Draw[d](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,o=!1){o?this.options.pathOptions=(0,au.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,o){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(o)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(o=>{this[o]._enabled&&(i=o)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(o=>{(o instanceof L.Polyline||o instanceof L.Marker||o instanceof L.Circle||o instanceof L.CircleMarker||o instanceof L.ImageOverlay)&&(o._pmTempLayer||i.push(o))}),this._enabled?i.forEach(o=>{L.PM.Utils.disablePopup(o)}):i.forEach(o=>{L.PM.Utils.enablePopup(o)})},createNewDrawInstance(i,o){let d=this._getShapeFromBtnName(o);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[d])throw new TypeError(`There is no class L.PM.Draw.${d}`);return this[i]=new L.PM.Draw[d](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[o]&&this[i].setOptions(this[o].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let o={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return o[i]?o[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,o){o==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":o==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":o==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),xn=ou;xn.Marker=xn.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(o=>{this.isRelevantMarker(o)&&o.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let o=i;o.target=this._hintMarker,this._handleSnapping(o)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng(),d=new L.Marker(o,this.options.markerStyle);this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm&&this.options.markerEditable?d.pm.enable():d.dragging&&d.dragging.disable(),this._fireCreate(d),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){this.options.markerStyle?.icon&&this._hintMarker?.setIcon(this.options.markerStyle.icon)}});var Sn=63710088e-1,yl={centimeters:Sn*100,centimetres:Sn*100,degrees:Sn/111325,feet:Sn*3.28084,inches:Sn*39.37,kilometers:Sn/1e3,kilometres:Sn/1e3,meters:Sn,metres:Sn,miles:Sn/1609.344,millimeters:Sn*1e3,millimetres:Sn*1e3,nauticalmiles:Sn/1852,radians:1,yards:Sn*1.0936};function di(i,o,d){d===void 0&&(d={});var m={type:"Feature"};return(d.id===0||d.id)&&(m.id=d.id),d.bbox&&(m.bbox=d.bbox),m.properties=o||{},m.geometry=i,m}function Ri(i,o,d){if(d===void 0&&(d={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Mo(i[0])||!Mo(i[1]))throw new Error("coordinates must contain numbers");var m={type:"Point",coordinates:i};return di(m,o,d)}function fi(i,o,d){if(d===void 0&&(d={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var m={type:"LineString",coordinates:i};return di(m,o,d)}function Vn(i,o){o===void 0&&(o={});var d={type:"FeatureCollection"};return o.id&&(d.id=o.id),o.bbox&&(d.bbox=o.bbox),d.features=i,d}function lu(i,o){o===void 0&&(o="kilometers");var d=yl[o];if(!d)throw new Error(o+" units is invalid");return i*d}function Ii(i,o){o===void 0&&(o="kilometers");var d=yl[o];if(!d)throw new Error(o+" units is invalid");return i/d}function Hn(i){var o=i%(2*Math.PI);return o*180/Math.PI}function nr(i){var o=i%360;return o*Math.PI/180}function Mo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function js(i){var o,d,m={type:"FeatureCollection",features:[]};if(i.type==="Feature"?d=i.geometry:d=i,d.type==="LineString")o=[d.coordinates];else if(d.type==="MultiLineString")o=d.coordinates;else if(d.type==="MultiPolygon")o=[].concat.apply([],d.coordinates);else if(d.type==="Polygon")o=d.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return o.forEach(function(w){o.forEach(function(M){for(var B=0;B<w.length-1;B++)for(var T=B;T<M.length-1;T++)if(!(w===M&&(Math.abs(B-T)===1||B===0&&T===w.length-2&&w[B][0]===w[w.length-1][0]&&w[B][1]===w[w.length-1][1]))){var I=So(w[B][0],w[B][1],w[B+1][0],w[B+1][1],M[T][0],M[T][1],M[T+1][0],M[T+1][1]);I&&m.features.push(Ri([I[0],I[1]]))}})}),m}function So(i,o,d,m,w,M,B,T){var I,z,ne,K,Ce,Me={x:null,y:null,onLine1:!1,onLine2:!1};return I=(T-M)*(d-i)-(B-w)*(m-o),I===0?Me.x!==null&&Me.y!==null?Me:!1:(z=o-M,ne=i-w,K=(B-w)*z-(T-M)*ne,Ce=(d-i)*z-(m-o)*ne,z=K/I,ne=Ce/I,Me.x=i+z*(d-i),Me.y=o+z*(m-o),z>=0&&z<=1&&(Me.onLine1=!0),ne>=0&&ne<=1&&(Me.onLine2=!0),Me.onLine1&&Me.onLine2?[Me.x,Me.y]:!1)}xn.Line=xn.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let o=i[i.length-1];this._hintline.setLatLngs([o,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let d=i;d.target=this._hintMarker,this._handleSnapping(d)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let o=this._layer._defaultShape().slice();o.push(this._hintMarker.getLatLng()),this._change(o)},hasSelfIntersection(){return js(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,o){let d=L.polyline(this._layer.getLatLngs());i&&(o||(o=this._hintMarker.getLatLng()),d.addLatLng(o));let m=js(d.toGeoJSON(15));this._doesSelfIntersect=m.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(m,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng(),d=this._layer.getLatLngs(),m=d[d.length-1];if(o.equals(d[0])||d.length>0&&o.equals(m)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:o,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(o);let w=this._createMarker(o);this._setTooltipText(),this._setHintLineAfterNewVertex(o),this._fireVertexAdded(w,void 0,o,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let o=this._layer.getLatLngs(),d=i[i.length-1],{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(i,d);i.pop(),this._layerGroup.removeLayer(d);let w=i[i.length-1],M=o.indexOf(w.getLatLng());o=o.slice(0,M+1),this._layer.setLatLngs(o),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(d,m,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let o=L.polyline(i,this.options.pathOptions);this._setPane(o,"layerPane"),this._finishLayer(o),o.addTo(this._map.pm._getContainingLayer()),this._fireCreate(o),this.options.snappable&&this._cleanupSnapping();let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},_createMarker(i){let o=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(o,"vertexPane"),o._pmTempLayer=!0,this._layerGroup.addLayer(o),this._markers.push(o),o.on("click",this._finishShape,this),o},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),o="";i<=1?o=Mt("tooltips.continueLine"):o=Mt("tooltips.finishLine"),this._hintMarker.setTooltipContent(o)},_change(i){this._fireChange(i,"Draw")},setStyle(){this._layer?.setStyle(this.options.templineStyle),this._hintline?.setStyle(this.options.hintlineStyle)}}),xn.Polygon=xn.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let o=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(o,"vertexPane"),o._pmTempLayer=!0,this._layerGroup.addLayer(o),this._markers.push(o),this._layer.getLatLngs().flat().length===1?(o.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(o)-1,this.options.snappable&&this._cleanupSnapping()):o.on("click",()=>1),o},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),o="";i<=2?o=Mt("tooltips.continueLine"):o=Mt("tooltips.finishPoly"),this._hintMarker.setTooltipContent(o)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let o=L.polygon(i,this.options.pathOptions);this._setPane(o,"layerPane"),this._finishLayer(o),o.addTo(this._map.pm._getContainingLayer()),this._fireCreate(o),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))}}),xn.Rectangle=xn.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let o=0;o<2;o+=1){let d=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(d,"vertexPane"),d._pmTempLayer=!0,this._layerGroup.addLayer(d),this._styleMarkers.push(d)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(o),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(d=>{L.DomUtil.addClass(d._icon,"visible"),d.setLatLng(o)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Mt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let d=i;d.target=this._hintMarker,this._handleSnapping(d)}let o=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(o,"Draw")},_syncRectangleSize(){let i=_l(this._startMarker.getLatLng(),this._map),o=_l(this._hintMarker.getLatLng(),this._map),d=L.PM.Utils._getRotatedRectangle(i,o,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(d),this.options.cursorMarker&&this._styleMarkers){let m=[];d.forEach(w=>{!w.equals(i,1e-8)&&!w.equals(o,1e-8)&&m.push(w)}),m.forEach((w,M)=>{try{this._styleMarkers[M].setLatLng(w)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng(),d=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||d.equals(o))return;let m=L.rectangle([d,o],this.options.pathOptions);if(this.options.rectangleAngle){let M=L.PM.Utils._getRotatedRectangle(d,o,this.options.rectangleAngle||0,this._map);m.setLatLngs(M),m.pm&&m.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m);let w=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(w))},setStyle(){this._layer?.setStyle(this.options.pathOptions)}}),xn.CircleMarker=xn.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let o={};L.extend(o,this.options.templineStyle),o.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),o),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let o=this._hintMarker.getLatLng();this._centerMarker.setLatLng(o),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Mt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),o=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,o])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),o=this._hintMarker.getLatLng(),d=this._distanceCalculation(i,o);this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(d)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let d=i;d.target=this._hintMarker,this._handleSnapping(d)}this._handleHintMarkerSnapping();let o=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(o,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng(),d=new this._BaseCircleClass(o,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(d),this._fireCreate(d),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._centerMarker.getLatLng(),d=this._defaultRadius;if(this.options[this._editableOption]){let B=this._hintMarker.getLatLng();d=this._distanceCalculation(o,B),this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?d=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]&&(d=this.options[this._maxRadiusOption])}let m={...this.options.pathOptions,radius:d},w=new this._BaseCircleClass(o,m);this._setPane(w,"layerPane"),this._finishLayer(w),w.addTo(this._map.pm._getContainingLayer()),w.pm&&w.pm._updateHiddenPolyCircle(),this._fireCreate(w);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let o=this._centerMarker.getLatLng(),d=this._distanceCalculation(o,i);this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?i=ni(this._map,o,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]&&(i=ni(this._map,o,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),o=this._hintMarker.getLatLng(),d=this._distanceCalculation(i,o);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),this._layer?.setStyle(i),this._hintline?.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,o){return this._map.project(i).distanceTo(this._map.project(o))}}),xn.Circle=xn.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,o){return this._map.distance(i,o)}});function rr(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Dr(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ba(i){return i.type==="Feature"?i.geometry:i}function Po(i,o){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function Bo(i,o,d){if(i!==null)for(var m,w,M,B,T,I,z,ne=0,K=0,Ce,Me=i.type,Ge=Me==="FeatureCollection",et=Me==="Feature",rt=Ge?i.features.length:1,Dt=0;Dt<rt;Dt++){z=Ge?i.features[Dt].geometry:et?i.geometry:i,Ce=z?z.type==="GeometryCollection":!1,T=Ce?z.geometries.length:1;for(var ee=0;ee<T;ee++){var oe=0,me=0;if(B=Ce?z.geometries[ee]:z,B!==null){I=B.coordinates;var Pe=B.type;switch(ne=0,Pe){case null:break;case"Point":if(o(I,K,Dt,oe,me)===!1)return!1;K++,oe++;break;case"LineString":case"MultiPoint":for(m=0;m<I.length;m++){if(o(I[m],K,Dt,oe,me)===!1)return!1;K++,Pe==="MultiPoint"&&oe++}Pe==="LineString"&&oe++;break;case"Polygon":case"MultiLineString":for(m=0;m<I.length;m++){for(w=0;w<I[m].length-ne;w++){if(o(I[m][w],K,Dt,oe,me)===!1)return!1;K++}Pe==="MultiLineString"&&oe++,Pe==="Polygon"&&me++}Pe==="Polygon"&&oe++;break;case"MultiPolygon":for(m=0;m<I.length;m++){for(me=0,w=0;w<I[m].length;w++){for(M=0;M<I[m][w].length-ne;M++){if(o(I[m][w][M],K,Dt,oe,me)===!1)return!1;K++}me++}oe++}break;case"GeometryCollection":for(m=0;m<B.geometries.length;m++)if(Bo(B.geometries[m],o)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Dn(i,o){if(i.type==="Feature")o(i,0);else if(i.type==="FeatureCollection")for(var d=0;d<i.features.length&&o(i.features[d],d)!==!1;d++);}function pi(i,o,d){var m=d;return Dn(i,function(w,M){M===0&&d===void 0?m=w:m=o(m,w,M)}),m}function Us(i,o){var d,m,w,M,B,T,I,z,ne,K,Ce=0,Me=i.type==="FeatureCollection",Ge=i.type==="Feature",et=Me?i.features.length:1;for(d=0;d<et;d++){for(T=Me?i.features[d].geometry:Ge?i.geometry:i,z=Me?i.features[d].properties:Ge?i.properties:{},ne=Me?i.features[d].bbox:Ge?i.bbox:void 0,K=Me?i.features[d].id:Ge?i.id:void 0,I=T?T.type==="GeometryCollection":!1,B=I?T.geometries.length:1,w=0;w<B;w++){if(M=I?T.geometries[w]:T,M===null){if(o(null,Ce,z,ne,K)===!1)return!1;continue}switch(M.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(o(M,Ce,z,ne,K)===!1)return!1;break}case"GeometryCollection":{for(m=0;m<M.geometries.length;m++)if(o(M.geometries[m],Ce,z,ne,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ce++}}function gr(i,o){Us(i,function(d,m,w,M,B){var T=d===null?null:d.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return o(di(d,w,{bbox:M,id:B}),m,0)===!1?!1:void 0}var I;switch(T){case"MultiPoint":I="Point";break;case"MultiLineString":I="LineString";break;case"MultiPolygon":I="Polygon";break}for(var z=0;z<d.coordinates.length;z++){var ne=d.coordinates[z],K={type:I,coordinates:ne};if(o(di(K,w),m,z)===!1)return!1}})}function wl(i){if(!i)throw new Error("geojson is required");var o=[];return gr(i,function(d){Fi(d,o)}),Vn(o)}function Fi(i,o){var d=[],m=i.geometry;if(m!==null){switch(m.type){case"Polygon":d=Dr(m);break;case"LineString":d=[Dr(m)]}d.forEach(function(w){var M=xl(w,i.properties);M.forEach(function(B){B.id=o.length,o.push(B)})})}}function xl(i,o){var d=[];return i.reduce(function(m,w){var M=fi([m,w],o);return M.bbox=cs(m,w),d.push(M),w}),d}function cs(i,o){var d=i[0],m=i[1],w=o[0],M=o[1],B=d<w?d:w,T=m<M?m:M,I=d>w?d:w,z=m>M?m:M;return[B,T,I,z]}var $s=wl,ri=k(Pr(),1);function uu(i,o){var d={},m=[];if(i.type==="LineString"&&(i=di(i)),o.type==="LineString"&&(o=di(o)),i.type==="Feature"&&o.type==="Feature"&&i.geometry!==null&&o.geometry!==null&&i.geometry.type==="LineString"&&o.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&o.geometry.coordinates.length===2){var w=ii(i,o);return w&&m.push(w),Vn(m)}var M=(0,ri.default)();return M.load($s(o)),Dn($s(i),function(B){Dn(M.search(B),function(T){var I=ii(B,T);if(I){var z=Dr(I).join(",");d[z]||(d[z]=!0,m.push(I))}})}),Vn(m)}function ii(i,o){var d=Dr(i),m=Dr(o);if(d.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(m.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var w=d[0][0],M=d[0][1],B=d[1][0],T=d[1][1],I=m[0][0],z=m[0][1],ne=m[1][0],K=m[1][1],Ce=(K-z)*(B-w)-(ne-I)*(T-M),Me=(ne-I)*(M-z)-(K-z)*(w-I),Ge=(B-w)*(M-z)-(T-M)*(w-I);if(Ce===0)return null;var et=Me/Ce,rt=Ge/Ce;if(et>=0&&et<=1&&rt>=0&&rt<=1){var Dt=w+et*(B-w),ee=M+et*(T-M);return Ri([Dt,ee])}return null}var Or=uu,To=k(Pr(),1);function Ea(i,o,d){d===void 0&&(d={});var m=rr(i),w=rr(o),M=nr(w[1]-m[1]),B=nr(w[0]-m[0]),T=nr(m[1]),I=nr(w[1]),z=Math.pow(Math.sin(M/2),2)+Math.pow(Math.sin(B/2),2)*Math.cos(T)*Math.cos(I);return lu(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)),d.units)}var _r=Ea;function Yn(i){var o=i[0],d=i[1],m=i[2],w=i[3],M=_r(i.slice(0,2),[m,d]),B=_r(i.slice(0,2),[o,w]);if(M>=B){var T=(d+w)/2;return[o,T-(m-o)/2,m,T+(m-o)/2]}else{var I=(o+m)/2;return[I-(w-d)/2,d,I+(w-d)/2,w]}}var cu=Yn;function vr(i){var o=[1/0,1/0,-1/0,-1/0];return Bo(i,function(d){o[0]>d[0]&&(o[0]=d[0]),o[1]>d[1]&&(o[1]=d[1]),o[2]<d[0]&&(o[2]=d[0]),o[3]<d[1]&&(o[3]=d[1])}),o}vr.default=vr;var qs=vr;function Rr(i,o){o===void 0&&(o={});var d=o.precision,m=o.coordinates,w=o.mutate;if(d=d==null||isNaN(d)?6:d,m=m==null||isNaN(m)?3:m,!i)throw new Error("<geojson> is required");if(typeof d!="number")throw new Error("<precision> must be a number");if(typeof m!="number")throw new Error("<coordinates> must be a number");(w===!1||w===void 0)&&(i=JSON.parse(JSON.stringify(i)));var M=Math.pow(10,d);return Bo(i,function(B){hs(B,M,m)}),i}function hs(i,o,d){i.length>d&&i.splice(d,i.length);for(var m=0;m<i.length;m++)i[m]=Math.round(i[m]*o)/o;return i}var Ma=Rr;function Gs(i,o,d){if(d===void 0&&(d={}),d.final===!0)return Vs(i,o);var m=rr(i),w=rr(o),M=nr(m[0]),B=nr(w[0]),T=nr(m[1]),I=nr(w[1]),z=Math.sin(B-M)*Math.cos(I),ne=Math.cos(T)*Math.sin(I)-Math.sin(T)*Math.cos(I)*Math.cos(B-M);return Hn(Math.atan2(z,ne))}function Vs(i,o){var d=Gs(o,i);return d=(d+180)%360,d}function Hs(i,o,d,m){m===void 0&&(m={});var w=rr(i),M=nr(w[0]),B=nr(w[1]),T=nr(d),I=Ii(o,m.units),z=Math.asin(Math.sin(B)*Math.cos(I)+Math.cos(B)*Math.sin(I)*Math.cos(T)),ne=M+Math.atan2(Math.sin(T)*Math.sin(I)*Math.cos(B),Math.cos(I)-Math.sin(B)*Math.sin(z)),K=Hn(ne),Ce=Hn(z);return Ri([K,Ce],m.properties)}function Sa(i,o,d){d===void 0&&(d={});var m=Ri([1/0,1/0],{dist:1/0}),w=0;return gr(i,function(M){for(var B=Dr(M),T=0;T<B.length-1;T++){var I=Ri(B[T]);I.properties.dist=_r(o,I,d);var z=Ri(B[T+1]);z.properties.dist=_r(o,z,d);var ne=_r(I,z,d),K=Math.max(I.properties.dist,z.properties.dist),Ce=Gs(I,z),Me=Hs(o,K,Ce+90,d),Ge=Hs(o,K,Ce-90,d),et=Or(fi([Me.geometry.coordinates,Ge.geometry.coordinates]),fi([I.geometry.coordinates,z.geometry.coordinates])),rt=null;et.features.length>0&&(rt=et.features[0],rt.properties.dist=_r(o,rt,d),rt.properties.location=w+_r(I,rt,d)),I.properties.dist<m.properties.dist&&(m=I,m.properties.index=T,m.properties.location=w),z.properties.dist<m.properties.dist&&(m=z,m.properties.index=T+1,m.properties.location=w+ne),rt&&rt.properties.dist<m.properties.dist&&(m=rt,m.properties.index=T),w+=ne}}),m}var ds=Sa;function Pa(i,o){if(!i)throw new Error("line is required");if(!o)throw new Error("splitter is required");var d=Po(i),m=Po(o);if(d!=="LineString")throw new Error("line must be LineString");if(m==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(m==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var w=Ma(o,{precision:7});switch(m){case"Point":return Ta(i,w);case"MultiPoint":return Ba(i,w);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ba(i,Or(i,w))}}function Ba(i,o){var d=[],m=(0,To.default)();return gr(o,function(w){if(d.forEach(function(T,I){T.id=I}),!d.length)d=Ta(i,w).features,d.forEach(function(T){T.bbox||(T.bbox=cu(qs(T)))}),m.load(Vn(d));else{var M=m.search(w);if(M.features.length){var B=ir(w,M);d=d.filter(function(T){return T.id!==B.id}),m.remove(B),Dn(Ta(B,w),function(T){d.push(T),m.insert(T)})}}}),Vn(d)}function Ta(i,o){var d=[],m=Dr(i)[0],w=Dr(i)[i.geometry.coordinates.length-1];if(Ir(m,rr(o))||Ir(w,rr(o)))return Vn([i]);var M=(0,To.default)(),B=$s(i);M.load(B);var T=M.search(o);if(!T.features.length)return Vn([i]);var I=ir(o,T),z=[m],ne=pi(B,function(K,Ce,Me){var Ge=Dr(Ce)[1],et=rr(o);return Me===I.id?(K.push(et),d.push(fi(K)),Ir(et,Ge)?[et]:[et,Ge]):(K.push(Ge),K)},z);return ne.length>1&&d.push(fi(ne)),Vn(d)}function ir(i,o){if(!o.features.length)throw new Error("lines must contain features");if(o.features.length===1)return o.features[0];var d,m=1/0;return Dn(o,function(w){var M=ds(w,i),B=M.properties.dist;B<m&&(d=w,m=B)}),d}function Ir(i,o){return i[0]===o[0]&&i[1]===o[1]}var kl=Pa;function fs(i,o,d){if(d===void 0&&(d={}),!i)throw new Error("point is required");if(!o)throw new Error("polygon is required");var m=rr(i),w=ba(o),M=w.type,B=o.bbox,T=w.coordinates;if(B&&Do(m,B)===!1)return!1;M==="Polygon"&&(T=[T]);for(var I=!1,z=0;z<T.length&&!I;z++)if(Ao(m,T[z][0],d.ignoreBoundary)){for(var ne=!1,K=1;K<T[z].length&&!ne;)Ao(m,T[z][K],!d.ignoreBoundary)&&(ne=!0),K++;ne||(I=!0)}return I}function Ao(i,o,d){var m=!1;o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]&&(o=o.slice(0,o.length-1));for(var w=0,M=o.length-1;w<o.length;M=w++){var B=o[w][0],T=o[w][1],I=o[M][0],z=o[M][1],ne=i[1]*(B-I)+T*(I-i[0])+z*(i[0]-B)===0&&(B-i[0])*(I-i[0])<=0&&(T-i[1])*(z-i[1])<=0;if(ne)return!d;var K=T>i[1]!=z>i[1]&&i[0]<(I-B)*(i[1]-T)/(z-T)+B;K&&(m=!m)}return m}function Do(i,o){return o[0]<=i[0]&&o[1]<=i[1]&&o[2]>=i[0]&&o[3]>=i[1]}function Oo(i,o,d){d===void 0&&(d={});for(var m=rr(i),w=Dr(o),M=0;M<w.length-1;M++){var B=!1;if(d.ignoreEndVertices&&(M===0&&(B="start"),M===w.length-2&&(B="end"),M===0&&M+1===w.length-1&&(B="both")),Fr(w[M],w[M+1],m,B,typeof d.epsilon>"u"?null:d.epsilon))return!0}return!1}function Fr(i,o,d,m,w){var M=d[0],B=d[1],T=i[0],I=i[1],z=o[0],ne=o[1],K=d[0]-T,Ce=d[1]-I,Me=z-T,Ge=ne-I,et=K*Ge-Ce*Me;if(w!==null){if(Math.abs(et)>w)return!1}else if(et!==0)return!1;if(m){if(m==="start")return Math.abs(Me)>=Math.abs(Ge)?Me>0?T<M&&M<=z:z<=M&&M<T:Ge>0?I<B&&B<=ne:ne<=B&&B<I;if(m==="end")return Math.abs(Me)>=Math.abs(Ge)?Me>0?T<=M&&M<z:z<M&&M<=T:Ge>0?I<=B&&B<ne:ne<B&&B<=I;if(m==="both")return Math.abs(Me)>=Math.abs(Ge)?Me>0?T<M&&M<z:z<M&&M<T:Ge>0?I<B&&B<ne:ne<B&&B<I}else return Math.abs(Me)>=Math.abs(Ge)?Me>0?T<=M&&M<=z:z<=M&&M<=T:Ge>0?I<=B&&B<=ne:ne<=B&&B<=I;return!1}var mi=Oo;function ps(i,o){var d=ba(i),m=ba(o),w=d.type,M=m.type,B=d.coordinates,T=m.coordinates;switch(w){case"Point":switch(M){case"Point":return Ni(B,T);default:throw new Error("feature2 "+M+" geometry not supported")}case"MultiPoint":switch(M){case"Point":return ms(d,m);case"MultiPoint":return Zs(d,m);default:throw new Error("feature2 "+M+" geometry not supported")}case"LineString":switch(M){case"Point":return mi(m,d,{ignoreEndVertices:!0});case"LineString":return gi(d,m);case"MultiPoint":return Aa(d,m);default:throw new Error("feature2 "+M+" geometry not supported")}case"Polygon":switch(M){case"Point":return fs(m,d,{ignoreBoundary:!0});case"LineString":return gs(d,m);case"Polygon":return _i(d,m);case"MultiPoint":return Ll(d,m);default:throw new Error("feature2 "+M+" geometry not supported")}default:throw new Error("feature1 "+w+" geometry not supported")}}function ms(i,o){var d,m=!1;for(d=0;d<i.coordinates.length;d++)if(Ni(i.coordinates[d],o.coordinates)){m=!0;break}return m}function Zs(i,o){for(var d=0,m=o.coordinates;d<m.length;d++){for(var w=m[d],M=!1,B=0,T=i.coordinates;B<T.length;B++){var I=T[B];if(Ni(w,I)){M=!0;break}}if(!M)return!1}return!0}function Aa(i,o){for(var d=!1,m=0,w=o.coordinates;m<w.length;m++){var M=w[m];if(mi(M,i,{ignoreEndVertices:!0})&&(d=!0),!mi(M,i))return!1}return!!d}function Ll(i,o){for(var d=0,m=o.coordinates;d<m.length;d++){var w=m[d];if(!fs(w,i,{ignoreBoundary:!0}))return!1}return!0}function gi(i,o){for(var d=!1,m=0,w=o.coordinates;m<w.length;m++){var M=w[m];if(mi({type:"Point",coordinates:M},i,{ignoreEndVertices:!0})&&(d=!0),!mi({type:"Point",coordinates:M},i,{ignoreEndVertices:!1}))return!1}return d}function gs(i,o){var d=!1,m=0,w=qs(i),M=qs(o);if(!Da(w,M))return!1;for(m;m<o.coordinates.length-1;m++){var B=Cl(o.coordinates[m],o.coordinates[m+1]);if(fs({type:"Point",coordinates:B},i,{ignoreBoundary:!0})){d=!0;break}}return d}function _i(i,o){if(i.type==="Feature"&&i.geometry===null||o.type==="Feature"&&o.geometry===null)return!1;var d=qs(i),m=qs(o);if(!Da(d,m))return!1;for(var w=ba(o).coordinates,M=0,B=w;M<B.length;M++)for(var T=B[M],I=0,z=T;I<z.length;I++){var ne=z[I];if(!fs(ne,i))return!1}return!0}function Da(i,o){return!(i[0]>o[0]||i[2]<o[2]||i[1]>o[1]||i[3]<o[3])}function Ni(i,o){return i[0]===o[0]&&i[1]===o[1]}function Cl(i,o){return[(i[0]+o[0])/2,(i[1]+o[1])/2]}var Nr=k(ci()),Oa=i=>()=>i,Ws=i=>{let o=i?(d,m)=>m.minus(d).abs().isLessThanOrEqualTo(i):Oa(!1);return(d,m)=>o(d,m)?0:d.comparedTo(m)};function _s(i){let o=i?(d,m,w,M,B)=>d.exponentiatedBy(2).isLessThanOrEqualTo(M.minus(m).exponentiatedBy(2).plus(B.minus(w).exponentiatedBy(2)).times(i)):Oa(!1);return(d,m,w)=>{let M=d.x,B=d.y,T=w.x,I=w.y,z=B.minus(I).times(m.x.minus(T)).minus(M.minus(T).times(m.y.minus(I)));return o(z,M,B,T,I)?0:z.comparedTo(0)}}var bl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Xn=Math.ceil,pn=Math.floor,kn="[BigNumber Error] ",Ro=kn+"Number primitive has more than 15 significant digits: ",yr=1e14,xt=14,Ra=9007199254740991,Ks=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],zr=1e7,Pt=1e9;function Ia(i){var o,d,m,w=ee.prototype={constructor:ee,toString:null,valueOf:null},M=new ee(1),B=20,T=4,I=-7,z=21,ne=-1e7,K=1e7,Ce=!1,Me=1,Ge=0,et={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},rt="0123456789abcdefghijklmnopqrstuvwxyz",Dt=!0;function ee(R,U){var G,$,V,Z,le,ae,he,we,ke=this;if(!(ke instanceof ee))return new ee(R,U);if(U==null){if(R&&R._isBigNumber===!0){ke.s=R.s,!R.c||R.e>K?ke.c=ke.e=null:R.e<ne?ke.c=[ke.e=0]:(ke.e=R.e,ke.c=R.c.slice());return}if((ae=typeof R=="number")&&R*0==0){if(ke.s=1/R<0?(R=-R,-1):1,R===~~R){for(Z=0,le=R;le>=10;le/=10,Z++);Z>K?ke.c=ke.e=null:(ke.e=Z,ke.c=[R]);return}we=String(R)}else{if(!bl.test(we=String(R)))return m(ke,we,ae);ke.s=we.charCodeAt(0)==45?(we=we.slice(1),-1):1}(Z=we.indexOf("."))>-1&&(we=we.replace(".","")),(le=we.search(/e/i))>0?(Z<0&&(Z=le),Z+=+we.slice(le+1),we=we.substring(0,le)):Z<0&&(Z=we.length)}else{if(t(U,2,rt.length,"Base"),U==10&&Dt)return ke=new ee(R),_e(ke,B+ke.e+1,T);if(we=String(R),ae=typeof R=="number"){if(R*0!=0)return m(ke,we,ae,U);if(ke.s=1/R<0?(we=we.slice(1),-1):1,ee.DEBUG&&we.replace(/^0\.0*|\./,"").length>15)throw Error(Ro+R)}else ke.s=we.charCodeAt(0)===45?(we=we.slice(1),-1):1;for(G=rt.slice(0,U),Z=le=0,he=we.length;le<he;le++)if(G.indexOf($=we.charAt(le))<0){if($=="."){if(le>Z){Z=he;continue}}else if(!V&&(we==we.toUpperCase()&&(we=we.toLowerCase())||we==we.toLowerCase()&&(we=we.toUpperCase()))){V=!0,le=-1,Z=0;continue}return m(ke,String(R),ae,U)}ae=!1,we=d(we,U,10,ke.s),(Z=we.indexOf("."))>-1?we=we.replace(".",""):Z=we.length}for(le=0;we.charCodeAt(le)===48;le++);for(he=we.length;we.charCodeAt(--he)===48;);if(we=we.slice(le,++he)){if(he-=le,ae&&ee.DEBUG&&he>15&&(R>Ra||R!==pn(R)))throw Error(Ro+ke.s*R);if((Z=Z-le-1)>K)ke.c=ke.e=null;else if(Z<ne)ke.c=[ke.e=0];else{if(ke.e=Z,ke.c=[],le=(Z+1)%xt,Z<0&&(le+=xt),le<he){for(le&&ke.c.push(+we.slice(0,le)),he-=xt;le<he;)ke.c.push(+we.slice(le,le+=xt));le=xt-(we=we.slice(le)).length}else le-=he;for(;le--;we+="0");ke.c.push(+we)}}else ke.c=[ke.e=0]}ee.clone=Ia,ee.ROUND_UP=0,ee.ROUND_DOWN=1,ee.ROUND_CEIL=2,ee.ROUND_FLOOR=3,ee.ROUND_HALF_UP=4,ee.ROUND_HALF_DOWN=5,ee.ROUND_HALF_EVEN=6,ee.ROUND_HALF_CEIL=7,ee.ROUND_HALF_FLOOR=8,ee.EUCLID=9,ee.config=ee.set=function(R){var U,G;if(R!=null)if(typeof R=="object"){if(R.hasOwnProperty(U="DECIMAL_PLACES")&&(G=R[U],t(G,0,Pt,U),B=G),R.hasOwnProperty(U="ROUNDING_MODE")&&(G=R[U],t(G,0,8,U),T=G),R.hasOwnProperty(U="EXPONENTIAL_AT")&&(G=R[U],G&&G.pop?(t(G[0],-Pt,0,U),t(G[1],0,Pt,U),I=G[0],z=G[1]):(t(G,-Pt,Pt,U),I=-(z=G<0?-G:G))),R.hasOwnProperty(U="RANGE"))if(G=R[U],G&&G.pop)t(G[0],-Pt,-1,U),t(G[1],1,Pt,U),ne=G[0],K=G[1];else if(t(G,-Pt,Pt,U),G)ne=-(K=G<0?-G:G);else throw Error(kn+U+" cannot be zero: "+G);if(R.hasOwnProperty(U="CRYPTO"))if(G=R[U],G===!!G)if(G)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ce=G;else throw Ce=!G,Error(kn+"crypto unavailable");else Ce=G;else throw Error(kn+U+" not true or false: "+G);if(R.hasOwnProperty(U="MODULO_MODE")&&(G=R[U],t(G,0,9,U),Me=G),R.hasOwnProperty(U="POW_PRECISION")&&(G=R[U],t(G,0,Pt,U),Ge=G),R.hasOwnProperty(U="FORMAT"))if(G=R[U],typeof G=="object")et=G;else throw Error(kn+U+" not an object: "+G);if(R.hasOwnProperty(U="ALPHABET"))if(G=R[U],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))Dt=G.slice(0,10)=="0123456789",rt=G;else throw Error(kn+U+" invalid: "+G)}else throw Error(kn+"Object expected: "+R);return{DECIMAL_PLACES:B,ROUNDING_MODE:T,EXPONENTIAL_AT:[I,z],RANGE:[ne,K],CRYPTO:Ce,MODULO_MODE:Me,POW_PRECISION:Ge,FORMAT:et,ALPHABET:rt}},ee.isBigNumber=function(R){if(!R||R._isBigNumber!==!0)return!1;if(!ee.DEBUG)return!0;var U,G,$=R.c,V=R.e,Z=R.s;e:if({}.toString.call($)=="[object Array]"){if((Z===1||Z===-1)&&V>=-Pt&&V<=Pt&&V===pn(V)){if($[0]===0){if(V===0&&$.length===1)return!0;break e}if(U=(V+1)%xt,U<1&&(U+=xt),String($[0]).length==U){for(U=0;U<$.length;U++)if(G=$[U],G<0||G>=yr||G!==pn(G))break e;if(G!==0)return!0}}}else if($===null&&V===null&&(Z===null||Z===1||Z===-1))return!0;throw Error(kn+"Invalid BigNumber: "+R)},ee.maximum=ee.max=function(){return me(arguments,-1)},ee.minimum=ee.min=function(){return me(arguments,1)},ee.random=(function(){var R=9007199254740992,U=Math.random()*R&2097151?function(){return pn(Math.random()*R)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var $,V,Z,le,ae,he=0,we=[],ke=new ee(M);if(G==null?G=B:t(G,0,Pt),le=Xn(G/xt),Ce)if(crypto.getRandomValues){for($=crypto.getRandomValues(new Uint32Array(le*=2));he<le;)ae=$[he]*131072+($[he+1]>>>11),ae>=9e15?(V=crypto.getRandomValues(new Uint32Array(2)),$[he]=V[0],$[he+1]=V[1]):(we.push(ae%1e14),he+=2);he=le/2}else if(crypto.randomBytes){for($=crypto.randomBytes(le*=7);he<le;)ae=($[he]&31)*281474976710656+$[he+1]*1099511627776+$[he+2]*4294967296+$[he+3]*16777216+($[he+4]<<16)+($[he+5]<<8)+$[he+6],ae>=9e15?crypto.randomBytes(7).copy($,he):(we.push(ae%1e14),he+=7);he=le/7}else throw Ce=!1,Error(kn+"crypto unavailable");if(!Ce)for(;he<le;)ae=U(),ae<9e15&&(we[he++]=ae%1e14);for(le=we[--he],G%=xt,le&&G&&(ae=Ks[xt-G],we[he]=pn(le/ae)*ae);we[he]===0;we.pop(),he--);if(he<0)we=[Z=0];else{for(Z=-1;we[0]===0;we.splice(0,1),Z-=xt);for(he=1,ae=we[0];ae>=10;ae/=10,he++);he<xt&&(Z-=xt-he)}return ke.e=Z,ke.c=we,ke}})(),ee.sum=function(){for(var R=1,U=arguments,G=new ee(U[0]);R<U.length;)G=G.plus(U[R++]);return G},d=(function(){var R="0123456789";function U(G,$,V,Z){for(var le,ae=[0],he,we=0,ke=G.length;we<ke;){for(he=ae.length;he--;ae[he]*=$);for(ae[0]+=Z.indexOf(G.charAt(we++)),le=0;le<ae.length;le++)ae[le]>V-1&&(ae[le+1]==null&&(ae[le+1]=0),ae[le+1]+=ae[le]/V|0,ae[le]%=V)}return ae.reverse()}return function(G,$,V,Z,le){var ae,he,we,ke,je,it,at,ct,$t=G.indexOf("."),qt=B,Rt=T;for($t>=0&&(ke=Ge,Ge=0,G=G.replace(".",""),ct=new ee($),it=ct.pow(G.length-$t),Ge=ke,ct.c=U(C(Ln(it.c),it.e,"0"),10,V,R),ct.e=ct.c.length),at=U(G,$,V,le?(ae=rt,R):(ae=R,rt)),we=ke=at.length;at[--ke]==0;at.pop());if(!at[0])return ae.charAt(0);if($t<0?--we:(it.c=at,it.e=we,it.s=Z,it=o(it,ct,qt,Rt,V),at=it.c,je=it.r,we=it.e),he=we+qt+1,$t=at[he],ke=V/2,je=je||he<0||at[he+1]!=null,je=Rt<4?($t!=null||je)&&(Rt==0||Rt==(it.s<0?3:2)):$t>ke||$t==ke&&(Rt==4||je||Rt==6&&at[he-1]&1||Rt==(it.s<0?8:7)),he<1||!at[0])G=je?C(ae.charAt(1),-qt,ae.charAt(0)):ae.charAt(0);else{if(at.length=he,je)for(--V;++at[--he]>V;)at[he]=0,he||(++we,at=[1].concat(at));for(ke=at.length;!at[--ke];);for($t=0,G="";$t<=ke;G+=ae.charAt(at[$t++]));G=C(G,we,ae.charAt(0))}return G}})(),o=(function(){function R($,V,Z){var le,ae,he,we,ke=0,je=$.length,it=V%zr,at=V/zr|0;for($=$.slice();je--;)he=$[je]%zr,we=$[je]/zr|0,le=at*he+we*it,ae=it*he+le%zr*zr+ke,ke=(ae/Z|0)+(le/zr|0)+at*we,$[je]=ae%Z;return ke&&($=[ke].concat($)),$}function U($,V,Z,le){var ae,he;if(Z!=le)he=Z>le?1:-1;else for(ae=he=0;ae<Z;ae++)if($[ae]!=V[ae]){he=$[ae]>V[ae]?1:-1;break}return he}function G($,V,Z,le){for(var ae=0;Z--;)$[Z]-=ae,ae=$[Z]<V[Z]?1:0,$[Z]=ae*le+$[Z]-V[Z];for(;!$[0]&&$.length>1;$.splice(0,1));}return function($,V,Z,le,ae){var he,we,ke,je,it,at,ct,$t,qt,Rt,Ht,cn,Fo,No,tn,Lr,ea,sr=$.s==V.s?1:-1,Bn=$.c,sn=V.c;if(!Bn||!Bn[0]||!sn||!sn[0])return new ee(!$.s||!V.s||(Bn?sn&&Bn[0]==sn[0]:!sn)?NaN:Bn&&Bn[0]==0||!sn?sr*0:sr/0);for($t=new ee(sr),qt=$t.c=[],we=$.e-V.e,sr=Z+we+1,ae||(ae=yr,we=Pn($.e/xt)-Pn(V.e/xt),sr=sr/xt|0),ke=0;sn[ke]==(Bn[ke]||0);ke++);if(sn[ke]>(Bn[ke]||0)&&we--,sr<0)qt.push(1),je=!0;else{for(No=Bn.length,Lr=sn.length,ke=0,sr+=2,it=pn(ae/(sn[0]+1)),it>1&&(sn=R(sn,it,ae),Bn=R(Bn,it,ae),Lr=sn.length,No=Bn.length),Fo=Lr,Rt=Bn.slice(0,Lr),Ht=Rt.length;Ht<Lr;Rt[Ht++]=0);ea=sn.slice(),ea=[0].concat(ea),tn=sn[0],sn[1]>=ae/2&&tn++;do{if(it=0,he=U(sn,Rt,Lr,Ht),he<0){if(cn=Rt[0],Lr!=Ht&&(cn=cn*ae+(Rt[1]||0)),it=pn(cn/tn),it>1)for(it>=ae&&(it=ae-1),at=R(sn,it,ae),ct=at.length,Ht=Rt.length;U(at,Rt,ct,Ht)==1;)it--,G(at,Lr<ct?ea:sn,ct,ae),ct=at.length,he=1;else it==0&&(he=it=1),at=sn.slice(),ct=at.length;if(ct<Ht&&(at=[0].concat(at)),G(Rt,at,Ht,ae),Ht=Rt.length,he==-1)for(;U(sn,Rt,Lr,Ht)<1;)it++,G(Rt,Lr<Ht?ea:sn,Ht,ae),Ht=Rt.length}else he===0&&(it++,Rt=[0]);qt[ke++]=it,Rt[0]?Rt[Ht++]=Bn[Fo]||0:(Rt=[Bn[Fo]],Ht=1)}while((Fo++<No||Rt[0]!=null)&&sr--);je=Rt[0]!=null,qt[0]||qt.splice(0,1)}if(ae==yr){for(ke=1,sr=qt[0];sr>=10;sr/=10,ke++);_e($t,Z+($t.e=ke+we*xt-1)+1,le,je)}else $t.e=we,$t.r=+je;return $t}})();function oe(R,U,G,$){var V,Z,le,ae,he;if(G==null?G=T:t(G,0,8),!R.c)return R.toString();if(V=R.c[0],le=R.e,U==null)he=Ln(R.c),he=$==1||$==2&&(le<=I||le>=z)?v(he,le):C(he,le,"0");else if(R=_e(new ee(R),U,G),Z=R.e,he=Ln(R.c),ae=he.length,$==1||$==2&&(U<=Z||Z<=I)){for(;ae<U;he+="0",ae++);he=v(he,Z)}else if(U-=le,he=C(he,Z,"0"),Z+1>ae){if(--U>0)for(he+=".";U--;he+="0");}else if(U+=Z-ae,U>0)for(Z+1==ae&&(he+=".");U--;he+="0");return R.s<0&&V?"-"+he:he}function me(R,U){for(var G,$,V=1,Z=new ee(R[0]);V<R.length;V++)$=new ee(R[V]),(!$.s||(G=vi(Z,$))===U||G===0&&Z.s===U)&&(Z=$);return Z}function Pe(R,U,G){for(var $=1,V=U.length;!U[--V];U.pop());for(V=U[0];V>=10;V/=10,$++);return(G=$+G*xt-1)>K?R.c=R.e=null:G<ne?R.c=[R.e=0]:(R.e=G,R.c=U),R}m=(function(){var R=/^(-?)0([xbo])(?=\w[\w.]*$)/i,U=/^([^.]+)\.$/,G=/^\.([^.]+)$/,$=/^-?(Infinity|NaN)$/,V=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Z,le,ae,he){var we,ke=ae?le:le.replace(V,"");if($.test(ke))Z.s=isNaN(ke)?null:ke<0?-1:1;else{if(!ae&&(ke=ke.replace(R,function(je,it,at){return we=(at=at.toLowerCase())=="x"?16:at=="b"?2:8,!he||he==we?it:je}),he&&(we=he,ke=ke.replace(U,"$1").replace(G,"0.$1")),le!=ke))return new ee(ke,we);if(ee.DEBUG)throw Error(kn+"Not a"+(he?" base "+he:"")+" number: "+le);Z.s=null}Z.c=Z.e=null}})();function _e(R,U,G,$){var V,Z,le,ae,he,we,ke,je=R.c,it=Ks;if(je){e:{for(V=1,ae=je[0];ae>=10;ae/=10,V++);if(Z=U-V,Z<0)Z+=xt,le=U,he=je[we=0],ke=pn(he/it[V-le-1]%10);else if(we=Xn((Z+1)/xt),we>=je.length)if($){for(;je.length<=we;je.push(0));he=ke=0,V=1,Z%=xt,le=Z-xt+1}else break e;else{for(he=ae=je[we],V=1;ae>=10;ae/=10,V++);Z%=xt,le=Z-xt+V,ke=le<0?0:pn(he/it[V-le-1]%10)}if($=$||U<0||je[we+1]!=null||(le<0?he:he%it[V-le-1]),$=G<4?(ke||$)&&(G==0||G==(R.s<0?3:2)):ke>5||ke==5&&(G==4||$||G==6&&(Z>0?le>0?he/it[V-le]:0:je[we-1])%10&1||G==(R.s<0?8:7)),U<1||!je[0])return je.length=0,$?(U-=R.e+1,je[0]=it[(xt-U%xt)%xt],R.e=-U||0):je[0]=R.e=0,R;if(Z==0?(je.length=we,ae=1,we--):(je.length=we+1,ae=it[xt-Z],je[we]=le>0?pn(he/it[V-le]%it[le])*ae:0),$)for(;;)if(we==0){for(Z=1,le=je[0];le>=10;le/=10,Z++);for(le=je[0]+=ae,ae=1;le>=10;le/=10,ae++);Z!=ae&&(R.e++,je[0]==yr&&(je[0]=1));break}else{if(je[we]+=ae,je[we]!=yr)break;je[we--]=0,ae=1}for(Z=je.length;je[--Z]===0;je.pop());}R.e>K?R.c=R.e=null:R.e<ne&&(R.c=[R.e=0])}return R}function Le(R){var U,G=R.e;return G===null?R.toString():(U=Ln(R.c),U=G<=I||G>=z?v(U,G):C(U,G,"0"),R.s<0?"-"+U:U)}return w.absoluteValue=w.abs=function(){var R=new ee(this);return R.s<0&&(R.s=1),R},w.comparedTo=function(R,U){return vi(this,new ee(R,U))},w.decimalPlaces=w.dp=function(R,U){var G,$,V,Z=this;if(R!=null)return t(R,0,Pt),U==null?U=T:t(U,0,8),_e(new ee(Z),R+Z.e+1,U);if(!(G=Z.c))return null;if($=((V=G.length-1)-Pn(this.e/xt))*xt,V=G[V])for(;V%10==0;V/=10,$--);return $<0&&($=0),$},w.dividedBy=w.div=function(R,U){return o(this,new ee(R,U),B,T)},w.dividedToIntegerBy=w.idiv=function(R,U){return o(this,new ee(R,U),0,1)},w.exponentiatedBy=w.pow=function(R,U){var G,$,V,Z,le,ae,he,we,ke,je=this;if(R=new ee(R),R.c&&!R.isInteger())throw Error(kn+"Exponent not an integer: "+Le(R));if(U!=null&&(U=new ee(U)),ae=R.e>14,!je.c||!je.c[0]||je.c[0]==1&&!je.e&&je.c.length==1||!R.c||!R.c[0])return ke=new ee(Math.pow(+Le(je),ae?R.s*(2-l(R)):+Le(R))),U?ke.mod(U):ke;if(he=R.s<0,U){if(U.c?!U.c[0]:!U.s)return new ee(NaN);$=!he&&je.isInteger()&&U.isInteger(),$&&(je=je.mod(U))}else{if(R.e>9&&(je.e>0||je.e<-1||(je.e==0?je.c[0]>1||ae&&je.c[1]>=24e7:je.c[0]<8e13||ae&&je.c[0]<=9999975e7)))return Z=je.s<0&&l(R)?-0:0,je.e>-1&&(Z=1/Z),new ee(he?1/Z:Z);Ge&&(Z=Xn(Ge/xt+2))}for(ae?(G=new ee(.5),he&&(R.s=1),we=l(R)):(V=Math.abs(+Le(R)),we=V%2),ke=new ee(M);;){if(we){if(ke=ke.times(je),!ke.c)break;Z?ke.c.length>Z&&(ke.c.length=Z):$&&(ke=ke.mod(U))}if(V){if(V=pn(V/2),V===0)break;we=V%2}else if(R=R.times(G),_e(R,R.e+1,1),R.e>14)we=l(R);else{if(V=+Le(R),V===0)break;we=V%2}je=je.times(je),Z?je.c&&je.c.length>Z&&(je.c.length=Z):$&&(je=je.mod(U))}return $?ke:(he&&(ke=M.div(ke)),U?ke.mod(U):Z?_e(ke,Ge,T,le):ke)},w.integerValue=function(R){var U=new ee(this);return R==null?R=T:t(R,0,8),_e(U,U.e+1,R)},w.isEqualTo=w.eq=function(R,U){return vi(this,new ee(R,U))===0},w.isFinite=function(){return!!this.c},w.isGreaterThan=w.gt=function(R,U){return vi(this,new ee(R,U))>0},w.isGreaterThanOrEqualTo=w.gte=function(R,U){return(U=vi(this,new ee(R,U)))===1||U===0},w.isInteger=function(){return!!this.c&&Pn(this.e/xt)>this.c.length-2},w.isLessThan=w.lt=function(R,U){return vi(this,new ee(R,U))<0},w.isLessThanOrEqualTo=w.lte=function(R,U){return(U=vi(this,new ee(R,U)))===-1||U===0},w.isNaN=function(){return!this.s},w.isNegative=function(){return this.s<0},w.isPositive=function(){return this.s>0},w.isZero=function(){return!!this.c&&this.c[0]==0},w.minus=function(R,U){var G,$,V,Z,le=this,ae=le.s;if(R=new ee(R,U),U=R.s,!ae||!U)return new ee(NaN);if(ae!=U)return R.s=-U,le.plus(R);var he=le.e/xt,we=R.e/xt,ke=le.c,je=R.c;if(!he||!we){if(!ke||!je)return ke?(R.s=-U,R):new ee(je?le:NaN);if(!ke[0]||!je[0])return je[0]?(R.s=-U,R):new ee(ke[0]?le:T==3?-0:0)}if(he=Pn(he),we=Pn(we),ke=ke.slice(),ae=he-we){for((Z=ae<0)?(ae=-ae,V=ke):(we=he,V=je),V.reverse(),U=ae;U--;V.push(0));V.reverse()}else for($=(Z=(ae=ke.length)<(U=je.length))?ae:U,ae=U=0;U<$;U++)if(ke[U]!=je[U]){Z=ke[U]<je[U];break}if(Z&&(V=ke,ke=je,je=V,R.s=-R.s),U=($=je.length)-(G=ke.length),U>0)for(;U--;ke[G++]=0);for(U=yr-1;$>ae;){if(ke[--$]<je[$]){for(G=$;G&&!ke[--G];ke[G]=U);--ke[G],ke[$]+=yr}ke[$]-=je[$]}for(;ke[0]==0;ke.splice(0,1),--we);return ke[0]?Pe(R,ke,we):(R.s=T==3?-1:1,R.c=[R.e=0],R)},w.modulo=w.mod=function(R,U){var G,$,V=this;return R=new ee(R,U),!V.c||!R.s||R.c&&!R.c[0]?new ee(NaN):!R.c||V.c&&!V.c[0]?new ee(V):(Me==9?($=R.s,R.s=1,G=o(V,R,0,3),R.s=$,G.s*=$):G=o(V,R,0,Me),R=V.minus(G.times(R)),!R.c[0]&&Me==1&&(R.s=V.s),R)},w.multipliedBy=w.times=function(R,U){var G,$,V,Z,le,ae,he,we,ke,je,it,at,ct,$t,qt,Rt=this,Ht=Rt.c,cn=(R=new ee(R,U)).c;if(!Ht||!cn||!Ht[0]||!cn[0])return!Rt.s||!R.s||Ht&&!Ht[0]&&!cn||cn&&!cn[0]&&!Ht?R.c=R.e=R.s=null:(R.s*=Rt.s,!Ht||!cn?R.c=R.e=null:(R.c=[0],R.e=0)),R;for($=Pn(Rt.e/xt)+Pn(R.e/xt),R.s*=Rt.s,he=Ht.length,je=cn.length,he<je&&(ct=Ht,Ht=cn,cn=ct,V=he,he=je,je=V),V=he+je,ct=[];V--;ct.push(0));for($t=yr,qt=zr,V=je;--V>=0;){for(G=0,it=cn[V]%qt,at=cn[V]/qt|0,le=he,Z=V+le;Z>V;)we=Ht[--le]%qt,ke=Ht[le]/qt|0,ae=at*we+ke*it,we=it*we+ae%qt*qt+ct[Z]+G,G=(we/$t|0)+(ae/qt|0)+at*ke,ct[Z--]=we%$t;ct[Z]=G}return G?++$:ct.splice(0,1),Pe(R,ct,$)},w.negated=function(){var R=new ee(this);return R.s=-R.s||null,R},w.plus=function(R,U){var G,$=this,V=$.s;if(R=new ee(R,U),U=R.s,!V||!U)return new ee(NaN);if(V!=U)return R.s=-U,$.minus(R);var Z=$.e/xt,le=R.e/xt,ae=$.c,he=R.c;if(!Z||!le){if(!ae||!he)return new ee(V/0);if(!ae[0]||!he[0])return he[0]?R:new ee(ae[0]?$:V*0)}if(Z=Pn(Z),le=Pn(le),ae=ae.slice(),V=Z-le){for(V>0?(le=Z,G=he):(V=-V,G=ae),G.reverse();V--;G.push(0));G.reverse()}for(V=ae.length,U=he.length,V-U<0&&(G=he,he=ae,ae=G,U=V),V=0;U;)V=(ae[--U]=ae[U]+he[U]+V)/yr|0,ae[U]=yr===ae[U]?0:ae[U]%yr;return V&&(ae=[V].concat(ae),++le),Pe(R,ae,le)},w.precision=w.sd=function(R,U){var G,$,V,Z=this;if(R!=null&&R!==!!R)return t(R,1,Pt),U==null?U=T:t(U,0,8),_e(new ee(Z),R,U);if(!(G=Z.c))return null;if(V=G.length-1,$=V*xt+1,V=G[V]){for(;V%10==0;V/=10,$--);for(V=G[0];V>=10;V/=10,$++);}return R&&Z.e+1>$&&($=Z.e+1),$},w.shiftedBy=function(R){return t(R,-Ra,Ra),this.times("1e"+R)},w.squareRoot=w.sqrt=function(){var R,U,G,$,V,Z=this,le=Z.c,ae=Z.s,he=Z.e,we=B+4,ke=new ee("0.5");if(ae!==1||!le||!le[0])return new ee(!ae||ae<0&&(!le||le[0])?NaN:le?Z:1/0);if(ae=Math.sqrt(+Le(Z)),ae==0||ae==1/0?(U=Ln(le),(U.length+he)%2==0&&(U+="0"),ae=Math.sqrt(+U),he=Pn((he+1)/2)-(he<0||he%2),ae==1/0?U="5e"+he:(U=ae.toExponential(),U=U.slice(0,U.indexOf("e")+1)+he),G=new ee(U)):G=new ee(ae+""),G.c[0]){for(he=G.e,ae=he+we,ae<3&&(ae=0);;)if(V=G,G=ke.times(V.plus(o(Z,V,we,1))),Ln(V.c).slice(0,ae)===(U=Ln(G.c)).slice(0,ae))if(G.e<he&&--ae,U=U.slice(ae-3,ae+1),U=="9999"||!$&&U=="4999"){if(!$&&(_e(V,V.e+B+2,0),V.times(V).eq(Z))){G=V;break}we+=4,ae+=4,$=1}else{(!+U||!+U.slice(1)&&U.charAt(0)=="5")&&(_e(G,G.e+B+2,1),R=!G.times(G).eq(Z));break}}return _e(G,G.e+B+1,T,R)},w.toExponential=function(R,U){return R!=null&&(t(R,0,Pt),R++),oe(this,R,U,1)},w.toFixed=function(R,U){return R!=null&&(t(R,0,Pt),R=R+this.e+1),oe(this,R,U)},w.toFormat=function(R,U,G){var $,V=this;if(G==null)R!=null&&U&&typeof U=="object"?(G=U,U=null):R&&typeof R=="object"?(G=R,R=U=null):G=et;else if(typeof G!="object")throw Error(kn+"Argument not an object: "+G);if($=V.toFixed(R,U),V.c){var Z,le=$.split("."),ae=+G.groupSize,he=+G.secondaryGroupSize,we=G.groupSeparator||"",ke=le[0],je=le[1],it=V.s<0,at=it?ke.slice(1):ke,ct=at.length;if(he&&(Z=ae,ae=he,he=Z,ct-=Z),ae>0&&ct>0){for(Z=ct%ae||ae,ke=at.substr(0,Z);Z<ct;Z+=ae)ke+=we+at.substr(Z,ae);he>0&&(ke+=we+at.slice(Z)),it&&(ke="-"+ke)}$=je?ke+(G.decimalSeparator||"")+((he=+G.fractionGroupSize)?je.replace(new RegExp("\\d{"+he+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):je):ke}return(G.prefix||"")+$+(G.suffix||"")},w.toFraction=function(R){var U,G,$,V,Z,le,ae,he,we,ke,je,it,at=this,ct=at.c;if(R!=null&&(ae=new ee(R),!ae.isInteger()&&(ae.c||ae.s!==1)||ae.lt(M)))throw Error(kn+"Argument "+(ae.isInteger()?"out of range: ":"not an integer: ")+Le(ae));if(!ct)return new ee(at);for(U=new ee(M),we=G=new ee(M),$=he=new ee(M),it=Ln(ct),Z=U.e=it.length-at.e-1,U.c[0]=Ks[(le=Z%xt)<0?xt+le:le],R=!R||ae.comparedTo(U)>0?Z>0?U:we:ae,le=K,K=1/0,ae=new ee(it),he.c[0]=0;ke=o(ae,U,0,1),V=G.plus(ke.times($)),V.comparedTo(R)!=1;)G=$,$=V,we=he.plus(ke.times(V=we)),he=V,U=ae.minus(ke.times(V=U)),ae=V;return V=o(R.minus(G),$,0,1),he=he.plus(V.times(we)),G=G.plus(V.times($)),he.s=we.s=at.s,Z=Z*2,je=o(we,$,Z,T).minus(at).abs().comparedTo(o(he,G,Z,T).minus(at).abs())<1?[we,$]:[he,G],K=le,je},w.toNumber=function(){return+Le(this)},w.toPrecision=function(R,U){return R!=null&&t(R,1,Pt),oe(this,R,U,2)},w.toString=function(R){var U,G=this,$=G.s,V=G.e;return V===null?$?(U="Infinity",$<0&&(U="-"+U)):U="NaN":(R==null?U=V<=I||V>=z?v(Ln(G.c),V):C(Ln(G.c),V,"0"):R===10&&Dt?(G=_e(new ee(G),B+V+1,T),U=C(Ln(G.c),G.e,"0")):(t(R,2,rt.length,"Base"),U=d(C(Ln(G.c),V,"0"),10,R,$,!0)),$<0&&G.c[0]&&(U="-"+U)),U},w.valueOf=w.toJSON=function(){return Le(this)},w._isBigNumber=!0,w[Symbol.toStringTag]="BigNumber",w[Symbol.for("nodejs.util.inspect.custom")]=w.valueOf,i!=null&&ee.set(i),ee}function Pn(i){var o=i|0;return i>0||i===o?o:o-1}function Ln(i){for(var o,d,m=1,w=i.length,M=i[0]+"";m<w;){for(o=i[m++]+"",d=xt-o.length;d--;o="0"+o);M+=o}for(w=M.length;M.charCodeAt(--w)===48;);return M.slice(0,w+1||1)}function vi(i,o){var d,m,w=i.c,M=o.c,B=i.s,T=o.s,I=i.e,z=o.e;if(!B||!T)return null;if(d=w&&!w[0],m=M&&!M[0],d||m)return d?m?0:-T:B;if(B!=T)return B;if(d=B<0,m=I==z,!w||!M)return m?0:!w^d?1:-1;if(!m)return I>z^d?1:-1;for(T=(I=w.length)<(z=M.length)?I:z,B=0;B<T;B++)if(w[B]!=M[B])return w[B]>M[B]^d?1:-1;return I==z?0:I>z^d?1:-1}function t(i,o,d,m){if(i<o||i>d||i!==pn(i))throw Error(kn+(m||"Argument")+(typeof i=="number"?i<o||i>d?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function l(i){var o=i.c.length-1;return Pn(i.e/xt)==o&&i.c[o]%2!=0}function v(i,o){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(o<0?"e":"e+")+o}function C(i,o,d){var m,w;if(o<0){for(w=d+".";++o;w+=d);i=w+i}else if(m=i.length,++o>m){for(w=d,o-=m;--o;w+=d);i+=w}else o<m&&(i=i.slice(0,o)+"."+i.slice(o));return i}var A=Ia(),j=A,ie=class{key;left=null;right=null;constructor(i){this.key=i}},xe=class extends ie{constructor(i){super(i)}},Be=class{size=0;modificationCount=0;splayCount=0;splay(i){let o=this.root;if(o==null)return this.compare(i,i),-1;let d=null,m=null,w=null,M=null,B=o,T=this.compare,I;for(;;)if(I=T(B.key,i),I>0){let z=B.left;if(z==null||(I=T(z.key,i),I>0&&(B.left=z.right,z.right=B,B=z,z=B.left,z==null)))break;d==null?m=B:d.left=B,d=B,B=z}else if(I<0){let z=B.right;if(z==null||(I=T(z.key,i),I<0&&(B.right=z.left,z.left=B,B=z,z=B.right,z==null)))break;w==null?M=B:w.right=B,w=B,B=z}else break;return w!=null&&(w.right=B.left,B.left=M),d!=null&&(d.left=B.right,B.right=m),this.root!==B&&(this.root=B,this.splayCount++),I}splayMin(i){let o=i,d=o.left;for(;d!=null;){let m=d;o.left=m.right,m.right=o,o=m,d=o.left}return o}splayMax(i){let o=i,d=o.right;for(;d!=null;){let m=d;o.right=m.left,m.left=o,o=m,d=o.right}return o}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let o=this.root,d=o,m=o.left;if(this.size--,m==null)this.root=o.right;else{let w=o.right;o=this.splayMax(m),o.right=w,this.root=o}return this.modificationCount++,d}addNewRoot(i,o){this.size++,this.modificationCount++;let d=this.root;if(d==null){this.root=i;return}o<0?(i.left=d,i.right=d.right,d.right=null):(i.right=d,i.left=d.left,d.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,o)=>i<o?-1:i>o?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ue=class Ru extends Be{root=null;compare;validKey;constructor(o,d){super(),this.compare=o??this.defaultCompare(),this.validKey=d??(m=>m!=null&&m!=null)}delete(o){return this.validKey(o)?this._delete(o)!=null:!1}deleteAll(o){for(let d of o)this.delete(d)}forEach(o){let d=this[Symbol.iterator](),m;for(;m=d.next(),!m.done;)o(m.value,m.value,this)}add(o){let d=this.splay(o);return d!=0&&this.addNewRoot(new xe(o),d),this}addAndReturn(o){let d=this.splay(o);return d!=0&&this.addNewRoot(new xe(o),d),this.root.key}addAll(o){for(let d of o)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(o){if(o==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(o)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let m=d.right;for(;m!=null;)d=m,m=d.right;return d.key}firstAfter(o){if(o==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(o)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let m=d.left;for(;m!=null;)d=m,m=d.left;return d.key}retainAll(o){let d=new Ru(this.compare,this.validKey),m=this.modificationCount;for(let w of o){if(m!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(w)&&this.splay(w)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(o){return!this.validKey(o)||this.splay(o)!=0?null:this.root.key}intersection(o){let d=new Ru(this.compare,this.validKey);for(let m of this)o.has(m)&&d.add(m);return d}difference(o){let d=new Ru(this.compare,this.validKey);for(let m of this)o.has(m)||d.add(m);return d}union(o){let d=this.clone();return d.addAll(o),d}clone(){let o=new Ru(this.compare,this.validKey);return o.size=this.size,o.root=this.copyNode(this.root),o}copyNode(o){if(o==null)return null;function d(w,M){let B,T;do{if(B=w.left,T=w.right,B!=null){let I=new xe(B.key);M.left=I,d(B,I)}if(T!=null){let I=new xe(T.key);M.right=I,w=T,M=I}}while(T!=null)}let m=new xe(o.key);return d(o,m),m}toSet(){return this.clone()}entries(){return new At(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new yt(this.wrap())}[Symbol.toStringTag]="[object Set]"},nt=class{tree;path=new Array;modificationCount=null;splayCount;constructor(i){this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let d=this.tree.getRoot();for(;d!=null;)this.path.push(d),d=d.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],o=i.right;if(o!=null){for(;o!=null;)this.path.push(o),o=o.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},yt=class extends nt{getValue(i){return i.key}},At=class extends nt{getValue(i){return[i.key,i.key]}},Cn=i=>i,mn=i=>{if(i){let o=new Ue(Ws(i)),d=new Ue(Ws(i)),m=(M,B)=>B.addAndReturn(M),w=M=>({x:m(M.x,o),y:m(M.y,d)});return w({x:new j(0),y:new j(0)}),w}return Cn},On=i=>({set:o=>{nn=On(o)},reset:()=>On(i),compare:Ws(i),snap:mn(i),orient:_s(i)}),nn=On(),jr=(i,o)=>i.ll.x.isLessThanOrEqualTo(o.x)&&o.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(o.y)&&o.y.isLessThanOrEqualTo(i.ur.y),Js=(i,o)=>{if(o.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(o.ll.x)||o.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(o.ll.y))return null;let d=i.ll.x.isLessThan(o.ll.x)?o.ll.x:i.ll.x,m=i.ur.x.isLessThan(o.ur.x)?i.ur.x:o.ur.x,w=i.ll.y.isLessThan(o.ll.y)?o.ll.y:i.ll.y,M=i.ur.y.isLessThan(o.ur.y)?i.ur.y:o.ur.y;return{ll:{x:d,y:w},ur:{x:m,y:M}}},wr=(i,o)=>i.x.times(o.y).minus(i.y.times(o.x)),Io=(i,o)=>i.x.times(o.x).plus(i.y.times(o.y)),Ur=i=>Io(i,i).sqrt(),$r=(i,o,d)=>{let m={x:o.x.minus(i.x),y:o.y.minus(i.y)},w={x:d.x.minus(i.x),y:d.y.minus(i.y)};return wr(w,m).div(Ur(w)).div(Ur(m))},vs=(i,o,d)=>{let m={x:o.x.minus(i.x),y:o.y.minus(i.y)},w={x:d.x.minus(i.x),y:d.y.minus(i.y)};return Io(w,m).div(Ur(w)).div(Ur(m))},Gt=(i,o,d)=>o.y.isZero()?null:{x:i.x.plus(o.x.div(o.y).times(d.minus(i.y))),y:d},zi=(i,o,d)=>o.x.isZero()?null:{x:d,y:i.y.plus(o.y.div(o.x).times(d.minus(i.x)))},hu=(i,o,d,m)=>{if(o.x.isZero())return zi(d,m,i.x);if(m.x.isZero())return zi(i,o,d.x);if(o.y.isZero())return Gt(d,m,i.y);if(m.y.isZero())return Gt(i,o,d.y);let w=wr(o,m);if(w.isZero())return null;let M={x:d.x.minus(i.x),y:d.y.minus(i.y)},B=wr(M,o).div(w),T=wr(M,m).div(w),I=i.x.plus(T.times(o.x)),z=d.x.plus(B.times(m.x)),ne=i.y.plus(T.times(o.y)),K=d.y.plus(B.times(m.y)),Ce=I.plus(z).div(2),Me=ne.plus(K).div(2);return{x:Ce,y:Me}},qr=class y_{point;isLeft;segment;otherSE;consumedBy;static compare(o,d){let m=y_.comparePoints(o.point,d.point);return m!==0?m:(o.point!==d.point&&o.link(d),o.isLeft!==d.isLeft?o.isLeft?1:-1:Gr.compare(o.segment,d.segment))}static comparePoints(o,d){return o.x.isLessThan(d.x)?-1:o.x.isGreaterThan(d.x)?1:o.y.isLessThan(d.y)?-1:o.y.isGreaterThan(d.y)?1:0}constructor(o,d){o.events===void 0?o.events=[this]:o.events.push(this),this.point=o,this.isLeft=d}link(o){if(o.point===this.point)throw new Error("Tried to link already linked events");let d=o.point.events;for(let m=0,w=d.length;m<w;m++){let M=d[m];this.point.events.push(M),M.point=this.point}this.checkForConsuming()}checkForConsuming(){let o=this.point.events.length;for(let d=0;d<o;d++){let m=this.point.events[d];if(m.segment.consumedBy===void 0)for(let w=d+1;w<o;w++){let M=this.point.events[w];M.consumedBy===void 0&&m.otherSE.point.events===M.otherSE.point.events&&m.segment.consume(M.segment)}}}getAvailableLinkedEvents(){let o=[];for(let d=0,m=this.point.events.length;d<m;d++){let w=this.point.events[d];w!==this&&!w.segment.ringOut&&w.segment.isInResult()&&o.push(w)}return o}getLeftmostComparator(o){let d=new Map,m=w=>{let M=w.otherSE;d.set(w,{sine:$r(this.point,o.point,M.point),cosine:vs(this.point,o.point,M.point)})};return(w,M)=>{d.has(w)||m(w),d.has(M)||m(M);let{sine:B,cosine:T}=d.get(w),{sine:I,cosine:z}=d.get(M);return B.isGreaterThanOrEqualTo(0)&&I.isGreaterThanOrEqualTo(0)?T.isLessThan(z)?1:T.isGreaterThan(z)?-1:0:B.isLessThan(0)&&I.isLessThan(0)?T.isLessThan(z)?-1:T.isGreaterThan(z)?1:0:I.isLessThan(B)?-1:I.isGreaterThan(B)?1:0}}},ji=0,Gr=class Gc{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(o,d){let m=o.leftSE.point.x,w=d.leftSE.point.x,M=o.rightSE.point.x,B=d.rightSE.point.x;if(B.isLessThan(m))return 1;if(M.isLessThan(w))return-1;let T=o.leftSE.point.y,I=d.leftSE.point.y,z=o.rightSE.point.y,ne=d.rightSE.point.y;if(m.isLessThan(w)){if(I.isLessThan(T)&&I.isLessThan(z))return 1;if(I.isGreaterThan(T)&&I.isGreaterThan(z))return-1;let K=o.comparePoint(d.leftSE.point);if(K<0)return 1;if(K>0)return-1;let Ce=d.comparePoint(o.rightSE.point);return Ce!==0?Ce:-1}if(m.isGreaterThan(w)){if(T.isLessThan(I)&&T.isLessThan(ne))return-1;if(T.isGreaterThan(I)&&T.isGreaterThan(ne))return 1;let K=d.comparePoint(o.leftSE.point);if(K!==0)return K;let Ce=o.comparePoint(d.rightSE.point);return Ce<0?1:Ce>0?-1:1}if(T.isLessThan(I))return-1;if(T.isGreaterThan(I))return 1;if(M.isLessThan(B)){let K=d.comparePoint(o.rightSE.point);if(K!==0)return K}if(M.isGreaterThan(B)){let K=o.comparePoint(d.rightSE.point);if(K<0)return 1;if(K>0)return-1}if(!M.eq(B)){let K=z.minus(T),Ce=M.minus(m),Me=ne.minus(I),Ge=B.minus(w);if(K.isGreaterThan(Ce)&&Me.isLessThan(Ge))return 1;if(K.isLessThan(Ce)&&Me.isGreaterThan(Ge))return-1}return M.isGreaterThan(B)?1:M.isLessThan(B)||z.isLessThan(ne)?-1:z.isGreaterThan(ne)?1:o.id<d.id?-1:o.id>d.id?1:0}constructor(o,d,m,w){this.id=++ji,this.leftSE=o,o.segment=this,o.otherSE=d,this.rightSE=d,d.segment=this,d.otherSE=o,this.rings=m,this.windings=w}static fromRing(o,d,m){let w,M,B,T=qr.comparePoints(o,d);if(T<0)w=o,M=d,B=1;else if(T>0)w=d,M=o,B=-1;else throw new Error(`Tried to create degenerate segment at [${o.x}, ${o.y}]`);let I=new qr(w,!0),z=new qr(M,!1);return new Gc(I,z,[m],[B])}replaceRightSE(o){this.rightSE=o,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let o=this.leftSE.point.y,d=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:o.isLessThan(d)?o:d},ur:{x:this.rightSE.point.x,y:o.isGreaterThan(d)?o:d}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(o){return o.x.eq(this.leftSE.point.x)&&o.y.eq(this.leftSE.point.y)||o.x.eq(this.rightSE.point.x)&&o.y.eq(this.rightSE.point.y)}comparePoint(o){return nn.orient(this.leftSE.point,o,this.rightSE.point)}getIntersection(o){let d=this.bbox(),m=o.bbox(),w=Js(d,m);if(w===null)return null;let M=this.leftSE.point,B=this.rightSE.point,T=o.leftSE.point,I=o.rightSE.point,z=jr(d,T)&&this.comparePoint(T)===0,ne=jr(m,M)&&o.comparePoint(M)===0,K=jr(d,I)&&this.comparePoint(I)===0,Ce=jr(m,B)&&o.comparePoint(B)===0;if(ne&&z)return Ce&&!K?B:!Ce&&K?I:null;if(ne)return K&&M.x.eq(I.x)&&M.y.eq(I.y)?null:M;if(z)return Ce&&B.x.eq(T.x)&&B.y.eq(T.y)?null:T;if(Ce&&K)return null;if(Ce)return B;if(K)return I;let Me=hu(M,this.vector(),T,o.vector());return Me===null||!jr(w,Me)?null:nn.snap(Me)}split(o){let d=[],m=o.events!==void 0,w=new qr(o,!0),M=new qr(o,!1),B=this.rightSE;this.replaceRightSE(M),d.push(M),d.push(w);let T=new Gc(w,B,this.rings.slice(),this.windings.slice());return qr.comparePoints(T.leftSE.point,T.rightSE.point)>0&&T.swapEvents(),qr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),m&&(w.checkForConsuming(),M.checkForConsuming()),d}swapEvents(){let o=this.rightSE;this.rightSE=this.leftSE,this.leftSE=o,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let d=0,m=this.windings.length;d<m;d++)this.windings[d]*=-1}consume(o){let d=this,m=o;for(;d.consumedBy;)d=d.consumedBy;for(;m.consumedBy;)m=m.consumedBy;let w=Gc.compare(d,m);if(w!==0){if(w>0){let M=d;d=m,m=M}if(d.prev===m){let M=d;d=m,m=M}for(let M=0,B=m.rings.length;M<B;M++){let T=m.rings[M],I=m.windings[M],z=d.rings.indexOf(T);z===-1?(d.rings.push(T),d.windings.push(I)):d.windings[z]+=I}m.rings=null,m.windings=null,m.consumedBy=d,m.leftSE.consumedBy=d.leftSE,m.rightSE.consumedBy=d.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let o=this.prev.consumedBy||this.prev;this._beforeState=o.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let o=this.beforeState();this._afterState={rings:o.rings.slice(0),windings:o.windings.slice(0),multiPolys:[]};let d=this._afterState.rings,m=this._afterState.windings,w=this._afterState.multiPolys;for(let T=0,I=this.rings.length;T<I;T++){let z=this.rings[T],ne=this.windings[T],K=d.indexOf(z);K===-1?(d.push(z),m.push(ne)):m[K]+=ne}let M=[],B=[];for(let T=0,I=d.length;T<I;T++){if(m[T]===0)continue;let z=d[T],ne=z.poly;if(B.indexOf(ne)===-1)if(z.isExterior)M.push(ne);else{B.indexOf(ne)===-1&&B.push(ne);let K=M.indexOf(z.poly);K!==-1&&M.splice(K,1)}}for(let T=0,I=M.length;T<I;T++){let z=M[T].multiPoly;w.indexOf(z)===-1&&w.push(z)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let o=this.beforeState().multiPolys,d=this.afterState().multiPolys;switch(Rn.type){case"union":{let m=o.length===0,w=d.length===0;this._isInResult=m!==w;break}case"intersection":{let m,w;o.length<d.length?(m=o.length,w=d.length):(m=d.length,w=o.length),this._isInResult=w===Rn.numMultiPolys&&m<w;break}case"xor":{let m=Math.abs(o.length-d.length);this._isInResult=m%2===1;break}case"difference":{let m=w=>w.length===1&&w[0].isSubject;this._isInResult=m(o)!==m(d);break}}return this._isInResult}},yi=class{poly;isExterior;segments;bbox;constructor(i,o,d){if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=o,this.isExterior=d,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let m=nn.snap({x:new j(i[0][0]),y:new j(i[0][1])});this.bbox={ll:{x:m.x,y:m.y},ur:{x:m.x,y:m.y}};let w=m;for(let M=1,B=i.length;M<B;M++){if(typeof i[M][0]!="number"||typeof i[M][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let T=nn.snap({x:new j(i[M][0]),y:new j(i[M][1])});T.x.eq(w.x)&&T.y.eq(w.y)||(this.segments.push(Gr.fromRing(w,T,this)),T.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=T.x),T.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=T.y),T.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=T.x),T.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=T.y),w=T)}(!m.x.eq(w.x)||!m.y.eq(w.y))&&this.segments.push(Gr.fromRing(w,m,this))}getSweepEvents(){let i=[];for(let o=0,d=this.segments.length;o<d;o++){let m=this.segments[o];i.push(m.leftSE),i.push(m.rightSE)}return i}},Fa=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(i,o){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new yi(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let d=1,m=i.length;d<m;d++){let w=new yi(i[d],this,!1);w.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=w.bbox.ur.y),this.interiorRings.push(w)}this.multiPoly=o}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let o=0,d=this.interiorRings.length;o<d;o++){let m=this.interiorRings[o].getSweepEvents();for(let w=0,M=m.length;w<M;w++)i.push(m[w])}return i}},El=class{isSubject;polys;bbox;constructor(i,o){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new j(Number.POSITIVE_INFINITY),y:new j(Number.POSITIVE_INFINITY)},ur:{x:new j(Number.NEGATIVE_INFINITY),y:new j(Number.NEGATIVE_INFINITY)}};for(let d=0,m=i.length;d<m;d++){let w=new Fa(i[d],this);w.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=w.bbox.ur.y),this.polys.push(w)}this.isSubject=o}getSweepEvents(){let i=[];for(let o=0,d=this.polys.length;o<d;o++){let m=this.polys[o].getSweepEvents();for(let w=0,M=m.length;w<M;w++)i.push(m[w])}return i}},Na=class gf{events;poly;_isExteriorRing;_enclosingRing;static factory(o){let d=[];for(let m=0,w=o.length;m<w;m++){let M=o[m];if(!M.isInResult()||M.ringOut)continue;let B=null,T=M.leftSE,I=M.rightSE,z=[T],ne=T.point,K=[];for(;B=T,T=I,z.push(T),T.point!==ne;)for(;;){let Ce=T.getAvailableLinkedEvents();if(Ce.length===0){let et=z[0].point,rt=z[z.length-1].point;throw new Error(`Unable to complete output ring starting at [${et.x}, ${et.y}]. Last matching segment found ends at [${rt.x}, ${rt.y}].`)}if(Ce.length===1){I=Ce[0].otherSE;break}let Me=null;for(let et=0,rt=K.length;et<rt;et++)if(K[et].point===T.point){Me=et;break}if(Me!==null){let et=K.splice(Me)[0],rt=z.splice(et.index);rt.unshift(rt[0].otherSE),d.push(new gf(rt.reverse()));continue}K.push({index:z.length,point:T.point});let Ge=T.getLeftmostComparator(B);I=Ce.sort(Ge)[0].otherSE;break}d.push(new gf(z))}return d}constructor(o){this.events=o;for(let d=0,m=o.length;d<m;d++)o[d].segment.ringOut=this;this.poly=null}getGeom(){let o=this.events[0].point,d=[o];for(let z=1,ne=this.events.length-1;z<ne;z++){let K=this.events[z].point,Ce=this.events[z+1].point;nn.orient(K,o,Ce)!==0&&(d.push(K),o=K)}if(d.length===1)return null;let m=d[0],w=d[1];nn.orient(m,o,w)===0&&d.shift(),d.push(d[0]);let M=this.isExteriorRing()?1:-1,B=this.isExteriorRing()?0:d.length-1,T=this.isExteriorRing()?d.length:-1,I=[];for(let z=B;z!=T;z+=M)I.push([d[z].x.toNumber(),d[z].y.toNumber()]);return I}isExteriorRing(){if(this._isExteriorRing===void 0){let o=this.enclosingRing();this._isExteriorRing=o?!o.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let o=this.events[0];for(let w=1,M=this.events.length;w<M;w++){let B=this.events[w];qr.compare(o,B)>0&&(o=B)}let d=o.segment.prevInResult(),m=d?d.prevInResult():null;for(;;){if(!d)return null;if(!m)return d.ringOut;if(m.ringOut!==d.ringOut)return m.ringOut?.enclosingRing()!==d.ringOut?d.ringOut:d.ringOut?.enclosingRing();d=m.prevInResult(),m=d?d.prevInResult():null}}},Ui=class{exteriorRing;interiorRings;constructor(i){this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let o=[i];for(let d=0,m=this.interiorRings.length;d<m;d++){let w=this.interiorRings[d].getGeom();w!==null&&o.push(w)}return o}},en=class{rings;polys;constructor(i){this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let o=0,d=this.polys.length;o<d;o++){let m=this.polys[o].getGeom();m!==null&&i.push(m)}return i}_composePolys(i){let o=[];for(let d=0,m=i.length;d<m;d++){let w=i[d];if(!w.poly)if(w.isExteriorRing())o.push(new Ui(w));else{let M=w.enclosingRing();M?.poly||o.push(new Ui(M)),M?.poly?.addInterior(w)}}return o}},Qt=class{queue;tree;segments;constructor(i,o=Gr.compare){this.queue=i,this.tree=new Ue(o),this.segments=[]}process(i){let o=i.segment,d=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(o),d;i.isLeft&&this.tree.add(o);let m=o,w=o;do m=this.tree.lastBefore(m);while(m!=null&&m.consumedBy!=null);do w=this.tree.firstAfter(w);while(w!=null&&w.consumedBy!=null);if(i.isLeft){let M=null;if(m){let T=m.getIntersection(o);if(T!==null&&(o.isAnEndpoint(T)||(M=T),!m.isAnEndpoint(T))){let I=this._splitSafely(m,T);for(let z=0,ne=I.length;z<ne;z++)d.push(I[z])}}let B=null;if(w){let T=w.getIntersection(o);if(T!==null&&(o.isAnEndpoint(T)||(B=T),!w.isAnEndpoint(T))){let I=this._splitSafely(w,T);for(let z=0,ne=I.length;z<ne;z++)d.push(I[z])}}if(M!==null||B!==null){let T=null;M===null?T=B:B===null?T=M:T=qr.comparePoints(M,B)<=0?M:B,this.queue.delete(o.rightSE),d.push(o.rightSE);let I=o.split(T);for(let z=0,ne=I.length;z<ne;z++)d.push(I[z])}d.length>0?(this.tree.delete(o),d.push(i)):(this.segments.push(o),o.prev=m)}else{if(m&&w){let M=m.getIntersection(w);if(M!==null){if(!m.isAnEndpoint(M)){let B=this._splitSafely(m,M);for(let T=0,I=B.length;T<I;T++)d.push(B[T])}if(!w.isAnEndpoint(M)){let B=this._splitSafely(w,M);for(let T=0,I=B.length;T<I;T++)d.push(B[T])}}}this.tree.delete(o)}return d}_splitSafely(i,o){this.tree.delete(i);let d=i.rightSE;this.queue.delete(d);let m=i.split(o);return m.push(d),i.consumedBy===void 0&&this.tree.add(i),m}},ys=class{type;numMultiPolys;run(i,o,d){gn.type=i;let m=[new El(o,!0)];for(let I=0,z=d.length;I<z;I++)m.push(new El(d[I],!1));if(gn.numMultiPolys=m.length,gn.type==="difference"){let I=m[0],z=1;for(;z<m.length;)Js(m[z].bbox,I.bbox)!==null?z++:m.splice(z,1)}if(gn.type==="intersection")for(let I=0,z=m.length;I<z;I++){let ne=m[I];for(let K=I+1,Ce=m.length;K<Ce;K++)if(Js(ne.bbox,m[K].bbox)===null)return[]}let w=new Ue(qr.compare);for(let I=0,z=m.length;I<z;I++){let ne=m[I].getSweepEvents();for(let K=0,Ce=ne.length;K<Ce;K++)w.add(ne[K])}let M=new Qt(w),B=null;for(w.size!=0&&(B=w.first(),w.delete(B));B;){let I=M.process(B);for(let z=0,ne=I.length;z<ne;z++){let K=I[z];K.consumedBy===void 0&&w.add(K)}w.size!=0?(B=w.first(),w.delete(B)):B=null}nn.reset();let T=Na.factory(M.segments);return new en(T).getGeom()}},gn=new ys,Rn=gn,Ys=(i,...o)=>Rn.run("intersection",i,o),za=(i,...o)=>Rn.run("difference",i,o);nn.set;function In(i){let o={type:"Feature"};return o.geometry=i,o}function Xs(i){return i.type==="Feature"?i.geometry:i}function du(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function sc(i){return In({type:"LineString",coordinates:i})}function Ml(i){return In({type:"MultiLineString",coordinates:i})}function fu(i){return In({type:"Polygon",coordinates:i})}function wi(i){return In({type:"MultiPolygon",coordinates:i})}function Sl(i,o){let d=Xs(i),m=Xs(o),w=Ys(d.coordinates,m.coordinates);return w.length===0?null:w.length===1?fu(w[0]):wi(w)}function pu(i,o){let d=Xs(i),m=Xs(o),w=za(d.coordinates,m.coordinates);return w.length===0?null:w.length===1?fu(w[0]):wi(w)}function mu(i){return Array.isArray(i)?1+mu(i[0]):-1}function mh(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let o=du(i),d=mu(o),m=[];return d>1?o.forEach(w=>{m.push(sc(w))}):m.push(i),m}function ws(i){let o=[];return i.eachLayer(d=>{o.push(du(d.toGeoJSON(15)))}),Ml(o)}xn.Cut=xn.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let o=L.polygon(i,this.options.pathOptions);o._latlngInfos=this._layer._latlngInfo,this.cut(o),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:m,originalLayer:w})=>{this._fireCut(w,m,w),this._fireCut(this._map,m,w),w.pm._fireEdit()}),this._editedLayers=[];let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},cut(i){let o=this._map._layers,d=i._latlngInfos||[];Object.keys(o).map(m=>o[m]).filter(m=>m.pm).filter(m=>!m._pmTempLayer).filter(m=>!L.PM.optIn&&!m.options.pmIgnore||L.PM.optIn&&m.options.pmIgnore===!1).filter(m=>m instanceof L.Polyline).filter(m=>m!==i).filter(m=>m.pm.options.allowCutting).filter(m=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(m)>-1:!0).filter(m=>!this._layerGroup.hasLayer(m)).filter(m=>{try{let w=!!Or(i.toGeoJSON(15),m.toGeoJSON(15)).features.length>0;return w||m instanceof L.Polyline&&!(m instanceof L.Polygon)?w:!!Sl(i.toGeoJSON(15),m.toGeoJSON(15))}catch{return m instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(m=>{let w;if(m instanceof L.Polygon){w=L.polygon(m.getLatLngs());let I=w.getLatLngs();d.forEach(z=>{if(z&&z.snapInfo){let{latlng:ne}=z,K=this._calcClosestLayer(ne,[w]);if(K&&K.segment&&K.distance<this.options.snapDistance){let{segment:Ce}=K;if(Ce&&Ce.length===2){let{indexPath:Me,parentPath:Ge,newIndex:et}=L.PM.Utils._getIndexFromSegment(I,Ce);(Me.length>1?(0,Nr.default)(I,Ge):I).splice(et,0,ne)}}}})}else w=m;let M=this._cutLayer(i,w),B=L.geoJSON(M,m.options);B.getLayers().length===1&&([B]=B.getLayers()),this._setPane(B,"layerPane");let T=B.addTo(this._map.pm._getContainingLayer());if(T.pm.enable(m.pm.options),T.pm.disable(),m._pmTempLayer=!0,i._pmTempLayer=!0,m.remove(),m.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),T.getLayers&&T.getLayers().length===0&&this._map.pm.removeLayer({target:T}),T instanceof L.LayerGroup?(T.eachLayer(I=>{this._addDrawnLayerProp(I)}),this._addDrawnLayerProp(T)):this._addDrawnLayerProp(T),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let I=this.options.layersToCut.indexOf(m);I>-1&&this.options.layersToCut.splice(I,1)}this._editedLayers.push({layer:T,originalLayer:m})})},_cutLayer(i,o){let d=L.geoJSON(),m;if(o instanceof L.Polygon)m=pu(o.toGeoJSON(15),i.toGeoJSON(15));else{let w=mh(o);w.forEach(M=>{let B=kl(M,i.toGeoJSON(15)),T;B&&B.features.length>0?T=L.geoJSON(B):T=L.geoJSON(M),T.getLayers().forEach(I=>{ps(i.toGeoJSON(15),I.toGeoJSON(15))||I.addTo(d)})}),w.length>1?m=ws(d):m=d.toGeoJSON(15)}return m},_change:L.Util.falseFn}),xn.Text=xn.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Mt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker?.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let o=i;o.target=this._hintMarker,this._handleSnapping(o)}},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let o=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),this.options.textOptions?.className){let w=this.options.textOptions.className.split(" ");this.textArea.classList.add(...w)}let d=this._createTextIcon(this.textArea),m=new L.Marker(o,{textMarker:!0,_textMarkerOverPM:!0,icon:d});if(this._setPane(m,"markerPane"),this._finishLayer(m),m.pm||(m.options.draggable=!1),m.addTo(this._map.pm._getContainingLayer()),m.pm){m.pm.textArea=this.textArea,L.setOptions(m.pm,{removeIfEmpty:this.options.textOptions?.removeIfEmpty??!0});let w=this.options.textOptions?.focusAfterDraw??!0;m.pm._createTextMarker(w),this.options.textOptions?.text&&m.pm.setText(this.options.textOptions.text)}this._fireCreate(m),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var ja={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,wn(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(wn(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,wn(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(wn(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let o=i.touches?i.touches[0]:i,d={originalEvent:o,target:this._layer};return d.containerPoint=this._map.mouseEventToContainerPoint(o),d.latlng=this._map.containerPointToLatLng(d.containerPoint),this._dragMixinOnMouseDown(d),!1},_simulateMouseMoveEvent(i){let o=i.touches?i.touches[0]:i,d={originalEvent:o,target:this._layer};return d.containerPoint=this._map.mouseEventToContainerPoint(o),d.latlng=this._map.containerPointToLatLng(d.containerPoint),this._dragMixinOnMouseMove(d),!1},_simulateMouseUpEvent(i){let o={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(o.containerPoint=this._map.mouseEventToContainerPoint(i),o.latlng=this._map.containerPointToLatLng(o.containerPoint)),this._dragMixinOnMouseUp(o),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let o=i._fromLayerSync,d=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!o&&!d?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let m="resizeableCircleMarker";this._layer instanceof L.Circle&&(m="resizeableCircle"),this.options.snappable&&!o&&!d?this._layer.pm.options[m]||this._initSnappableMarkersDrag():this._layer.pm.options[m]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let o=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(o,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let o=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,o&&L.DomUtil.removeClass(o,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:o}=i,d={lat:o.lat-this._tempDragCoord.lat,lng:o.lng-this._tempDragCoord.lng},m=w=>w.map(M=>{if(Array.isArray(M))return m(M);let B={lat:M.lat+d.lat,lng:M.lng+d.lng};return(M.alt||M.alt===0)&&(B.alt=M.alt),B});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let w=m([this._layer.getLatLng()]);this._layer.setLatLng(w[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let w=this._layer.getLatLng();this._layer._snapped&&(w=this._layer._orgLatLng);let M=m([w]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let w=m([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(w),this._fireChange(this._layer.getBounds(),"Edit")}else{let w=m(this._layer.getLatLngs());this._layer.setLatLngs(w),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=o,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,o){if(this.enabled())return!1;if(!o._fromLayerSync&&this._layer===o.target&&this.options.syncLayersOnDrag){o._fromLayerSync=!0;let d=[];if(L.Util.isArray(this.options.syncLayersOnDrag))d=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(m=>{m instanceof L.LayerGroup&&(d=d.concat(m.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let m in this._parentLayerGroup){let w=this._parentLayerGroup[m];w.pm&&(d=w.pm.getLayers(!0))}return L.Util.isArray(d)&&d.length>0&&(d=d.filter(m=>!!m.pm).filter(m=>!!m.pm.options.draggable),d.forEach(m=>{m!==this._layer&&m.pm[i]&&(m._snapped=!1,m.pm[i](o))})),d.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},Ua=ja,Pl=k(ci());function Bl(i,o,d,m){return d.unproject(o.transform(d.project(i,m)),m)}function xr(i,o,d){let m=d.getMaxZoom();if(m===1/0&&(m=d.getZoom()),L.Util.isArray(i)){let w=[];return i.forEach(M=>{w.push(xr(M,o,d))}),w}return i instanceof L.LatLng?Bl(i,o,d,m):null}function Fn(i,o){o instanceof L.Layer&&(o=o.getLatLng());let d=i.getMaxZoom();return d===1/0&&(d=i.getZoom()),i.project(o,d)}function xi(i,o){let d=i.getMaxZoom();return d===1/0&&(d=i.getZoom()),i.unproject(o,d)}var $i={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Fn(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Fn(this._map,i.target.getLatLng()),this._initialRotateLatLng=Gn(this._layer),this._startAngle=this.getAngle();let o=Gn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,o),this._fireRotationStart(this._map,o)},_onRotate(i){let o=Fn(this._map,i.target.getLatLng()),d=this._rotationStartPoint,m=this._rotationOriginPoint,w=Math.atan2(o.y-m.y,o.x-m.x)-Math.atan2(d.y-m.y,d.x-m.x);this._layer.setLatLngs(this._rotateLayer(w,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let M=this;function B(ne,K=[],Ce=-1){if(Ce>-1&&K.push(Ce),L.Util.isArray(ne[0]))ne.forEach((Me,Ge)=>B(Me,K.slice(),Ge));else{let Me=K.length>0?(0,Pl.default)(M._markers,K):M._markers[0];ne.forEach((Ge,et)=>{Me[et].setLatLng(Ge)})}}B(this._layer.getLatLngs());let T=Gn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(w,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let I=w*180/Math.PI;I=I<0?I+360:I;let z=I+this._startAngle;this._setAngle(z),this._rotationLayer.pm._setAngle(z),this._fireRotation(this._rotationLayer,I,T),this._fireRotation(this._map,I,T),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let o=Gn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Gn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,o),this._fireRotationEnd(this._map,i,o),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,o,d,m,w){let M=Fn(w,d);return this._matrix=m.clone().rotate(i,M).flip(),xr(o,this._matrix,w)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),o=i.getCenter();return i.removeFrom(this._layer._map),o},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Mn(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Gn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let o=this.getAngle(),d=this._layer.getLatLngs(),m=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(m,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(m,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let w=this.getAngle()-o;w=w<0?w+360:w,this._startAngle=o,this._fireRotation(this._layer,w,d,this._layer),this._fireRotation(this._map||this._layer._map,w,d,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let o=i-this.getAngle();this.rotateLayer(o)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},qi=$i,Qs=L.Class.extend({includes:[Ua,Eo,qi,Di],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,o){o==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":o==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":o==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,o){let d=o.target,m={layer:this._layer,marker:d,event:o},w="";return i==="move"?w="moveVertexValidation":i==="add"?w="addVertexValidation":i==="remove"&&(w="removeVertexValidation"),this.options[w]&&typeof this.options[w]=="function"&&!this.options[w](m)?(i==="move"&&(d._cancelDragEventChain=d.getLatLng()),!1):(d._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),bn=Qs;bn.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(m=>this._initLayer(m));let o=m=>{if(m.layer._pmTempLayer)return;this._layers=this.getLayers();let w=this._layers.filter(M=>!M.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in M.pm._parentLayerGroup));w.forEach(M=>{this._initLayer(M)}),w.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(o,100,this),this),this._layerGroup.on("layerremove",m=>{this._removeLayerFromGroup(m.target)},this);let d=m=>{m.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(d,100,this),this)},enable(i,o=[]){o.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(d=>{d instanceof L.LayerGroup?o.indexOf(d._leaflet_id)===-1&&(o.push(d._leaflet_id),d.pm.enable(i,o)):d.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(o=>{o instanceof L.LayerGroup?i.indexOf(o._leaflet_id)===-1&&(i.push(o._leaflet_id),o.pm.disable(i)):o.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(o=>o instanceof L.LayerGroup?i.indexOf(o._leaflet_id)===-1?(i.push(o._leaflet_id),o.pm.enabled(i)):!1:o.pm.enabled())},toggleEdit(i,o=[]){o.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(d=>{d instanceof L.LayerGroup?o.indexOf(d._leaflet_id)===-1&&(o.push(d._leaflet_id),d.pm.toggleEdit(i,o)):d.pm.toggleEdit(i)})},_initLayer(i){let o=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[o]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let o=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[o]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){return this._map||this._layers.find(i=>!!i._map)?._map||null},getLayers(i=!1,o=!0,d=!0,m=[]){let w=[];return i?this._layerGroup.getLayers().forEach(M=>{w.push(M),M instanceof L.LayerGroup&&m.indexOf(M._leaflet_id)===-1&&(m.push(M._leaflet_id),w=w.concat(M.pm.getLayers(!0,!0,!0,m)))}):w=this._layerGroup.getLayers(),d&&(w=w.filter(M=>!(M instanceof L.LayerGroup))),o&&(w=w.filter(M=>!!M.pm),w=w.filter(M=>!M._pmTempLayer),w=w.filter(M=>!L.PM.optIn&&!M.options.pmIgnore||L.PM.optIn&&M.options.pmIgnore===!1)),w},setOptions(i,o=[]){o.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(d=>{d.pm&&(d instanceof L.LayerGroup?o.indexOf(d._leaflet_id)===-1&&(o.push(d._leaflet_id),d.pm.setOptions(i,o)):d.pm.setOptions(i))})}}),bn.Marker=bn.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let o=i.target;o.remove(),this._fireRemove(o),this._fireRemove(this._map,o)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var ki=k(ci()),gu={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((o,d,m)=>m.indexOf(o)===d)},_removeFromCache(i){let o=this.markerCache.indexOf(i);o>-1&&this.markerCache.splice(o,1)},renderLimits(i){this.markerCache.forEach(o=>{i.includes(o)?this._markerGroup.addLayer(o):this._markerGroup.removeLayer(o)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let o=[...this._filterClosestMarkers(i)];this.renderLimits(o)},_filterClosestMarkers(i){let o=[...this.markerCache],d=this.options.limitMarkersToCount;return d===-1?o:(o.sort((m,w)=>{let M=m._latlng.distanceTo(i),B=w._latlng.distanceTo(i);return M-B}),o.filter((m,w)=>d>-1?w<d:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},kr=gu;bn.Line=bn.extend({includes:[kr],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,o=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let d=m=>{if(Array.isArray(m[0]))return m.map(d,this);let w=m.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&m.map((M,B)=>{let T=this.isPolygon()?(B+1)%m.length:B+1;return this._createMiddleMarker(w[B],w[T])}),w};this._markers=d(o),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let o=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(o,"vertexPane"),o._pmTempLayer=!0,this.options.rotate?(o.on("dragstart",this._onRotateStart,this),o.on("drag",this._onRotate,this),o.on("dragend",this._onRotateEnd,this)):(o.on("click",this._onVertexClick,this),o.on("dragstart",this._onMarkerDragStart,this),o.on("move",this._onMarkerDrag,this),o.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||o.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(o),o},_createMiddleMarker(i,o){if(!i||!o)return!1;let d=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),o.getLatLng()),m=this._createMarker(d),w=L.divIcon({className:"marker-icon marker-icon-middle"});return m.setIcon(w),m.leftM=i,m.rightM=o,i._middleMarkerNext=m,o._middleMarkerPrev=m,m.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),m.on("movestart",this._onMiddleMarkerMoveStart,this),m},_onMiddleMarkerClick(i){let o=i.target;if(!this._vertexValidation("add",i))return;let d=L.divIcon({className:"marker-icon"});o.setIcon(d),this._addMarker(o,o.leftM,o.rightM)},_onMiddleMarkerMoveStart(i){let o=i.target;if(o.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){o.on("move",this._onMiddleMarkerMovePrevent,this);return}o._dragging=!0,this._addMarker(o,o.leftM,o.rightM)},_onMiddleMarkerMovePrevent(i){let o=i.target;this._vertexValidationDrag(o)},_onMiddleMarkerMoveEnd(i){let o=i.target;if(o.off("move",this._onMiddleMarkerMovePrevent,this),o.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(o))return;let d=L.divIcon({className:"marker-icon"});o.setIcon(d),setTimeout(()=>{delete o._dragging},100)},_addMarker(i,o,d){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let m=i.getLatLng(),w=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:M,index:B,parentPath:T}=L.PM.Utils.findDeepMarkerIndex(this._markers,o),I=M.length>1?(0,ki.default)(w,T):w,z=M.length>1?(0,ki.default)(this._markers,T):this._markers;I.splice(B+1,0,m),z.splice(B+1,0,i),this._layer.setLatLngs(w),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(o,i),this._createMiddleMarker(i,d)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,m),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return js(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let o=this._layer,d,m;if(this.options.allowSelfIntersection?d=!1:(m=js(this._layer.toGeoJSON(15)),d=m.features.length>0),d){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return d;i?this._flashLayer():(o.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(m)}else o.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return d},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,o){i.forEach(d=>{Array.isArray(d)?this._updateDisabledMarkerStyle(d,o):d._icon&&(o&&!this._checkMarkerAllowedToDrag(d)?L.DomUtil.addClass(d._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(d._icon,"vertexmarker-disabled"))})},_removeMarker(i){let o=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Gn(this._layer,this._layer.getLatLngs()));let d=this._layer.getLatLngs(),{indexPath:m,index:w,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);if(!m)return;let B=m.length>1?(0,ki.default)(d,M):d,T=m.length>1?(0,ki.default)(this._markers,M):this._markers,I=M[M.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!I&&(B.length<=2||this.isPolygon()&&B.length<=3)){this._flashLayer();return}B.splice(w,1),this._layer.setLatLngs(d),this.isPolygon()&&B.length<=2&&B.splice(0,B.length);let z=!1;if(B.length<=1&&(B.splice(0,B.length),M.length>1&&m.length>1&&(d=ls(d)),this._layer.setLatLngs(d),this._initMarkers(),z=!0),Ar(d)||this._layer.remove(),d=ls(d),this._layer.setLatLngs(d),this._markers=ls(this._markers),!z&&(T=m.length>1?(0,ki.default)(this._markers,M):this._markers,o._middleMarkerPrev&&(this._markerGroup.removeLayer(o._middleMarkerPrev),this._removeFromCache(o._middleMarkerPrev)),o._middleMarkerNext&&(this._markerGroup.removeLayer(o._middleMarkerNext),this._removeFromCache(o._middleMarkerNext)),this._markerGroup.removeLayer(o),this._removeFromCache(o),T)){let ne,K;if(this.isPolygon()?(ne=(w+1)%T.length,K=(w+(T.length-1))%T.length):(K=w-1<0?void 0:w-1,ne=w+1>=T.length?void 0:w+1),ne!==K){let Ce=T[K],Me=T[ne];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Ce,Me)}T.splice(w,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(o,m),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let o=this._layer.getLatLngs(),d=i.getLatLng(),{indexPath:m,index:w,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(m.length>1?(0,ki.default)(o,M):o).splice(w,1,d),this._layer.setLatLngs(o)},_getNeighborMarkers(i){let{indexPath:o,index:d,parentPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),w=o.length>1?(0,ki.default)(this._markers,m):this._markers,M=(d+1)%w.length,B=(d+(w.length-1))%w.length,T=w[B],I=w[M];return{prevMarker:T,nextMarker:I}},_checkMarkerAllowedToDrag(i){let{prevMarker:o,nextMarker:d}=this._getNeighborMarkers(i),m=L.polyline([o.getLatLng(),i.getLatLng()]),w=L.polyline([i.getLatLng(),d.getLatLng()]),M=Or(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length,B=Or(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?B+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(M+=1),!(M<=2&&B<=2)},_onMarkerDragStart(i){let o=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);this._fireMarkerDragStart(i,d),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Gn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(o):this._markerAllowedToDrag=null},_onMarkerDrag(i){let o=i.target;if(!this._vertexValidationDrag(o))return;let{indexPath:d,index:m,parentPath:w}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);if(!d)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(o);let M=d.length>1?(0,ki.default)(this._markers,w):this._markers,B=(m+1)%M.length,T=(m+(M.length-1))%M.length,I=o.getLatLng(),z=M[T].getLatLng(),ne=M[B].getLatLng();if(o._middleMarkerNext){let K=L.PM.Utils.calcMiddleLatLng(this._map,I,ne);o._middleMarkerNext.setLatLng(K)}if(o._middleMarkerPrev){let K=L.PM.Utils.calcMiddleLatLng(this._map,I,z);o._middleMarkerPrev.setLatLng(K)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,d),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let o=i.target;if(!this._vertexValidationDragEnd(o))return;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,o),m=!this.options.allowSelfIntersection&&this.hasSelfIntersection();m&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(m=!1);let w=!this.options.allowSelfIntersection&&m;if(this._fireMarkerDragEnd(i,d,w),w){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,d);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let o=i.target;if(o._dragging)return;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);this._fireVertexClick(i,d)}}),bn.Polygon=bn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:o,nextMarker:d}=this._getNeighborMarkers(i),m=L.polyline([o.getLatLng(),i.getLatLng()]),w=L.polyline([i.getLatLng(),d.getLatLng()]),M=Or(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length,B=Or(this._layer.toGeoJSON(15),w.toGeoJSON(15)).features.length;return!(M<=2&&B<=2)}}),bn.Rectangle=bn.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,o=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=o.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((d,m)=>{let w=this._cornerMarkers.find(M=>M._index===m);w&&w.setLatLng(d)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,o){let d=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(d,"vertexPane"),d._origLatLng=i,d._index=o,d._pmTempLayer=!0,d.on("click",this._onVertexClick,this),this._markerGroup.addLayer(d),d},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let o=i.target,d=this._cornerMarkers;o._oppositeCornerLatLng=d.find(w=>w._index===(o._index+2)%4).getLatLng(),o._snapped=!1;let{indexPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);this._fireMarkerDragStart(i,m)},_onMarkerDrag(i){let o=i.target;if(!this._vertexValidationDrag(o)||o._index===void 0)return;this._adjustRectangleForMarkerMove(o);let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);this._fireMarkerDrag(i,d),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let o=i.target;if(!this._vertexValidationDragEnd(o))return;this._cornerMarkers.forEach(m=>{delete m._oppositeCornerLatLng});let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,o);this._fireMarkerDragEnd(i,d),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let o=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(o),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let o=this._layer.getLatLngs()[0];if(o&&o.length!==4&&o.length>0)o.forEach((d,m)=>{this._cornerMarkers[m].setLatLng(d)}),this._cornerMarkers.slice(o.length).forEach(d=>{d.setLatLng(o[0])});else if(!o||!o.length)console.error("The layer has no LatLngs");else{let d=o.findIndex(m=>i.getLatLng().equals(m));d>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(o[(d+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(o[(d+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(o[(d+3)%4])):this._cornerMarkers.forEach(m=>{m.setLatLng(o[m._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Mn(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),bn.CircleMarker=bn.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let o=this._layer.getLatLng(),d=this._layer._radius,m=this._getLatLngOnCircle(o,d);this._centerMarker=this._createCenterMarker(o),this._outerMarker=this._createOuterMarker(m),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,o){let d=this._map.project(i),m=L.point(d.x+o,d.y);return this._map.unproject(m)},_createHintLine(i,o){let d=i.getLatLng(),m=o.getLatLng();this._hintline=L.polyline([d,m],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let o=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(o._icon,"leaflet-pm-draggable"),o.on("move",this._moveCircle,this)):o.dragging.disable(),o},_createOuterMarker(i){let o=this._createMarker(i);return o.on("drag",this._resizeCircle,this),o},_createMarker(i){let o=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(o,"vertexPane"),o._origLatLng=i,o._pmTempLayer=!0,o.on("dragstart",this._onMarkerDragStart,this),o.on("drag",this._onMarkerDrag,this),o.on("dragend",this._onMarkerDragEnd,this),o.on("click",this._onVertexClick,this),this._helperLayers.addLayer(o),o},_moveCircle(i){if(i.target._cancelDragEventChain)return;let o=this._centerMarker.getLatLng();this._layer.setLatLng(o);let d=this._layer._radius,m=this._getLatLngOnCircle(o,d);this._outerMarker._latlng=m,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),o=this._layer._radius,d=this._getLatLngOnCircle(i,o);this._outerMarker.setLatLng(d),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),o=this._outerMarker.getLatLng(),d=this._distanceCalculation(i,o);this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(d),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),o=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,o])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let o=i.target;o instanceof L.Marker&&!this._vertexValidationDrag(o)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let o=i.target;this._vertexValidationDragEnd(o)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let o=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),d=L.circle(this._layer.getLatLng(),this._layer.options);d.setRadius(o);let m=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(d,200,!m).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(d,200,!m),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),o=this._outerMarker.getLatLng(),d=this._distanceCalculation(i,o);return this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?o=ni(this._map,i,o,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]&&(o=ni(this._map,i,o,this._getMaxDistanceInMeter(i))),o},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),o=this._outerMarker.getLatLng(),d=this._distanceCalculation(i,o);this.options[this._minRadiusOption]&&d<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&d>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,o){return this._map.project(i).distanceTo(this._map.project(o))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),bn.Circle=bn.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,o){return this._map.distance(i,o)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),bn.ImageOverlay=bn.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),o=i.getNorthWest(),d=i.getNorthEast(),m=i.getSouthEast(),w=i.getSouthWest();return[o,d,m,w]}}),bn.Text=bn.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,o=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${o}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let o=this._hasFocus;this._hasFocus=i.type==="focus",!o!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let o=this.options.className.split(" ");this.textArea.classList.add(...o)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Qn=function(i,o,d,m,w,M){this._matrix=[i,o,d,m,w,M]};Qn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Qn.prototype={transform(i){return this._transform(i.clone())},_transform(i){let o=this._matrix,{x:d,y:m}=i;return i.x=o[0]*d+o[1]*m+o[4],i.y=o[2]*d+o[3]*m+o[5],i},untransform(i){let o=this._matrix;return new L.Point((i.x/o[0]-o[4])/o[0],(i.y/o[2]-o[5])/o[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let o,d;return typeof i=="number"?(o=i,d=i):(o=i.x,d=i.y),this._add(1,0,0,1,o,d)},scale(i,o){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let d,m;return o=o||L.point(0,0),typeof i=="number"?(d=i,m=i):(d=i.x,m=i.y),this._add(d,0,0,m,o.x,o.y)._add(1,0,0,1,-o.x,-o.y)},rotate(i,o){let d=Math.cos(i),m=Math.sin(i);return o=o||new L.Point(0,0),this._add(d,m,-m,d,o.x,o.y)._add(1,0,0,1,-o.x,-o.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,o,d,m,w,M){let B=[[],[],[]],T=this._matrix,I=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]],z=[[i,d,w],[o,m,M],[0,0,1]],ne;i&&i instanceof L.PM.Matrix&&(T=i._matrix,z=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]]);for(let K=0;K<3;K+=1)for(let Ce=0;Ce<3;Ce+=1){ne=0;for(let Me=0;Me<3;Me+=1)ne+=I[K][Me]*z[Me][Ce];B[K][Ce]=ne}return this._matrix=[B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]],this}};var rn=Qn,si={calcMiddleLatLng(i,o,d){let m=i.project(o),w=i.project(d);return i.unproject(m._add(w)._divideBy(2))},findLayers(i){let o=[];return i.eachLayer(d=>{(d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.Circle||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&o.push(d)}),o=o.filter(d=>!!d.pm),o=o.filter(d=>!d._pmTempLayer),o=o.filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1),o},circleToPolygon(i,o=60,d=!0){let m=i.getLatLng(),w=i.getRadius(),M=Oi(m,w,o,0,d),B=[];for(let T=0;T<M.length;T+=1){let I=[M[T].lat,M[T].lng];B.push(I)}return L.polygon(B,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,o,d,m=!1){i.fire(o,d,m);let{groups:w}=this.getAllParentGroups(i);w.forEach(M=>{M.fire(o,d,m)})},getAllParentGroups(i){let o=[],d=[],m=w=>{for(let M in w._eventParents)if(o.indexOf(M)===-1){o.push(M);let B=w._eventParents[M];d.push(B),m(B)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(m(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:d,groupIds:o},{groupIds:o,groups:d}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Oi,getTranslation:Mt,findDeepCoordIndex(i,o,d=!0){let m,w=B=>(T,I)=>{let z=B.concat(I);if(d){if(T.lat&&T.lat===o.lat&&T.lng===o.lng)return m=z,!0}else if(T.lat&&L.latLng(T).equals(o))return m=z,!0;return Array.isArray(T)&&T.some(w(z))};i.some(w([]));let M={};return m&&(M={indexPath:m,index:m[m.length-1],parentPath:m.slice(0,m.length-1)}),M},findDeepMarkerIndex(i,o){let d,m=M=>(B,T)=>{let I=M.concat(T);return B._leaflet_id===o._leaflet_id?(d=I,!0):Array.isArray(B)&&B.some(m(I))};i.some(m([]));let w={};return d&&(w={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),w},_getIndexFromSegment(i,o){if(o&&o.length===2){let d=this.findDeepCoordIndex(i,o[0]),m=this.findDeepCoordIndex(i,o[1]),w=Math.max(d.index,m.index);return(d.index===0||m.index===0)&&w!==1&&(w+=1),{indexA:d,indexB:m,newIndex:w,indexPath:d.indexPath,parentPath:d.parentPath}}return null},_getRotatedRectangle(i,o,d,m){let w=Fn(m,i),M=Fn(m,o),B=d*Math.PI/180,T=Math.cos(B),I=Math.sin(B),z=(M.x-w.x)*T+(M.y-w.y)*I,ne=(M.y-w.y)*T-(M.x-w.x)*I,K=z*T+w.x,Ce=z*I+w.y,Me=-ne*I+w.x,Ge=ne*T+w.y,et=xi(m,w),rt=xi(m,{x:K,y:Ce}),Dt=xi(m,M),ee=xi(m,{x:Me,y:Ge});return[et,rt,Dt,ee]},pxRadiusToMeterRadius(i,o,d){let m=o.project(d),w=L.point(m.x+i,m.y);return o.distance(o.unproject(w),d)}},ac=si;L.PM=L.PM||{version:is.version,Map:us,Toolbar:bo,Draw:xn,Edit:bn,Utils:ac,Matrix:rn,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function o(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(o);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(d);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(m);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(w);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(M);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(B);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(T);function I(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(I)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(o=>{this.reInitLayer(o)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let o=this._map.mouseEventToLayerPoint(i),d,m;for(let w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);m&&(L.DomEvent.fakeStop(i),this._fireEvent([m],i))}}),L.PM.initialize()})()),S0}Ix();var B0={},Nf="1.13.7",T0=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ih=Array.prototype,zf=Object.prototype,A0=typeof Symbol<"u"?Symbol.prototype:null,Fx=ih.push,nc=ih.slice,Vu=zf.toString,Nx=zf.hasOwnProperty,w_=typeof ArrayBuffer<"u",zx=typeof DataView<"u",jx=Array.isArray,D0=Object.keys,O0=Object.create,R0=w_&&ArrayBuffer.isView,Ux=isNaN,$x=isFinite,x_=!{toString:null}.propertyIsEnumerable("toString"),I0=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],qx=Math.pow(2,53)-1;function Sr(u,s){return s=s==null?u.length-1:+s,function(){for(var a=Math.max(arguments.length-s,0),c=Array(a),f=0;f<a;f++)c[f]=arguments[f+s];switch(s){case 0:return u.call(this,c);case 1:return u.call(this,arguments[0],c);case 2:return u.call(this,arguments[0],arguments[1],c)}var p=Array(s+1);for(f=0;f<s;f++)p[f]=arguments[f];return p[s]=c,u.apply(this,p)}}function eo(u){var s=typeof u;return s==="function"||s==="object"&&!!u}function k_(u){return u===null}function jf(u){return u===void 0}function Uf(u){return u===!0||u===!1||Vu.call(u)==="[object Boolean]"}function L_(u){return!!(u&&u.nodeType===1)}function cr(u){var s="[object "+u+"]";return function(a){return Vu.call(a)===s}}const sh=cr("String"),$f=cr("Number"),C_=cr("Date"),b_=cr("RegExp"),E_=cr("Error"),qf=cr("Symbol"),Gf=cr("ArrayBuffer");var M_=cr("Function"),Gx=T0.document&&T0.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Gx!="function"&&(M_=function(u){return typeof u=="function"||!1});const ur=M_,S_=cr("Object");var P_=zx&&(!/\[native code\]/.test(String(DataView))||S_(new DataView(new ArrayBuffer(8)))),Vf=typeof Map<"u"&&S_(new Map),Vx=cr("DataView");function Hx(u){return u!=null&&ur(u.getInt8)&&Gf(u.buffer)}const Hu=P_?Hx:Vx,to=jx||cr("Array");function no(u,s){return u!=null&&Nx.call(u,s)}var _f=cr("Arguments");(function(){_f(arguments)||(_f=function(u){return no(u,"callee")})})();const ah=_f;function B_(u){return!qf(u)&&$x(u)&&!isNaN(parseFloat(u))}function Hf(u){return $f(u)&&Ux(u)}function Zf(u){return function(){return u}}function T_(u){return function(s){var a=u(s);return typeof a=="number"&&a>=0&&a<=qx}}function A_(u){return function(s){return s?.[u]}}const Wc=A_("byteLength"),Zx=T_(Wc);var Wx=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Kx(u){return R0?R0(u)&&!Hu(u):Zx(u)&&Wx.test(Vu.call(u))}const Wf=w_?Kx:Zf(!1),Kr=A_("length");function Jx(u){for(var s={},a=u.length,c=0;c<a;++c)s[u[c]]=!0;return{contains:function(f){return s[f]===!0},push:function(f){return s[f]=!0,u.push(f)}}}function D_(u,s){s=Jx(s);var a=I0.length,c=u.constructor,f=ur(c)&&c.prototype||zf,p="constructor";for(no(u,p)&&!s.contains(p)&&s.push(p);a--;)p=I0[a],p in u&&u[p]!==f[p]&&!s.contains(p)&&s.push(p)}function $n(u){if(!eo(u))return[];if(D0)return D0(u);var s=[];for(var a in u)no(u,a)&&s.push(a);return x_&&D_(u,s),s}function O_(u){if(u==null)return!0;var s=Kr(u);return typeof s=="number"&&(to(u)||sh(u)||ah(u))?s===0:Kr($n(u))===0}function Kf(u,s){var a=$n(s),c=a.length;if(u==null)return!c;for(var f=Object(u),p=0;p<c;p++){var _=a[p];if(s[_]!==f[_]||!(_ in f))return!1}return!0}function Kt(u){if(u instanceof Kt)return u;if(!(this instanceof Kt))return new Kt(u);this._wrapped=u}Kt.VERSION=Nf;Kt.prototype.value=function(){return this._wrapped};Kt.prototype.valueOf=Kt.prototype.toJSON=Kt.prototype.value;Kt.prototype.toString=function(){return String(this._wrapped)};function F0(u){return new Uint8Array(u.buffer||u,u.byteOffset||0,Wc(u))}var N0="[object DataView]";function vf(u,s,a,c){if(u===s)return u!==0||1/u===1/s;if(u==null||s==null)return!1;if(u!==u)return s!==s;var f=typeof u;return f!=="function"&&f!=="object"&&typeof s!="object"?!1:R_(u,s,a,c)}function R_(u,s,a,c){u instanceof Kt&&(u=u._wrapped),s instanceof Kt&&(s=s._wrapped);var f=Vu.call(u);if(f!==Vu.call(s))return!1;if(P_&&f=="[object Object]"&&Hu(u)){if(!Hu(s))return!1;f=N0}switch(f){case"[object RegExp]":case"[object String]":return""+u==""+s;case"[object Number]":return+u!=+u?+s!=+s:+u==0?1/+u===1/s:+u==+s;case"[object Date]":case"[object Boolean]":return+u==+s;case"[object Symbol]":return A0.valueOf.call(u)===A0.valueOf.call(s);case"[object ArrayBuffer]":case N0:return R_(F0(u),F0(s),a,c)}var p=f==="[object Array]";if(!p&&Wf(u)){var _=Wc(u);if(_!==Wc(s))return!1;if(u.buffer===s.buffer&&u.byteOffset===s.byteOffset)return!0;p=!0}if(!p){if(typeof u!="object"||typeof s!="object")return!1;var x=u.constructor,k=s.constructor;if(x!==k&&!(ur(x)&&x instanceof x&&ur(k)&&k instanceof k)&&"constructor"in u&&"constructor"in s)return!1}a=a||[],c=c||[];for(var S=a.length;S--;)if(a[S]===u)return c[S]===s;if(a.push(u),c.push(s),p){if(S=u.length,S!==s.length)return!1;for(;S--;)if(!vf(u[S],s[S],a,c))return!1}else{var D=$n(u),F;if(S=D.length,$n(s).length!==S)return!1;for(;S--;)if(F=D[S],!(no(s,F)&&vf(u[F],s[F],a,c)))return!1}return a.pop(),c.pop(),!0}function I_(u,s){return vf(u,s)}function tu(u){if(!eo(u))return[];var s=[];for(var a in u)s.push(a);return x_&&D_(u,s),s}function Jf(u){var s=Kr(u);return function(a){if(a==null)return!1;var c=tu(a);if(Kr(c))return!1;for(var f=0;f<s;f++)if(!ur(a[u[f]]))return!1;return u!==z_||!ur(a[Yf])}}var Yf="forEach",F_="has",Xf=["clear","delete"],N_=["get",F_,"set"],Yx=Xf.concat(Yf,N_),z_=Xf.concat(N_),Xx=["add"].concat(Xf,Yf,F_);const j_=Vf?Jf(Yx):cr("Map"),U_=Vf?Jf(z_):cr("WeakMap"),$_=Vf?Jf(Xx):cr("Set"),q_=cr("WeakSet");function tl(u){for(var s=$n(u),a=s.length,c=Array(a),f=0;f<a;f++)c[f]=u[s[f]];return c}function G_(u){for(var s=$n(u),a=s.length,c=Array(a),f=0;f<a;f++)c[f]=[s[f],u[s[f]]];return c}function Qf(u){for(var s={},a=$n(u),c=0,f=a.length;c<f;c++)s[u[a[c]]]=a[c];return s}function Zu(u){var s=[];for(var a in u)ur(u[a])&&s.push(a);return s.sort()}function ep(u,s){return function(a){var c=arguments.length;if(s&&(a=Object(a)),c<2||a==null)return a;for(var f=1;f<c;f++)for(var p=arguments[f],_=u(p),x=_.length,k=0;k<x;k++){var S=_[k];(!s||a[S]===void 0)&&(a[S]=p[S])}return a}}const tp=ep(tu),Yl=ep($n),np=ep(tu,!0);function Qx(){return function(){}}function V_(u){if(!eo(u))return{};if(O0)return O0(u);var s=Qx();s.prototype=u;var a=new s;return s.prototype=null,a}function H_(u,s){var a=V_(u);return s&&Yl(a,s),a}function Z_(u){return eo(u)?to(u)?u.slice():tp({},u):u}function W_(u,s){return s(u),u}function rp(u){return to(u)?u:[u]}Kt.toPath=rp;function rc(u){return Kt.toPath(u)}function ip(u,s){for(var a=s.length,c=0;c<a;c++){if(u==null)return;u=u[s[c]]}return a?u:void 0}function sp(u,s,a){var c=ip(u,rc(s));return jf(c)?a:c}function K_(u,s){s=rc(s);for(var a=s.length,c=0;c<a;c++){var f=s[c];if(!no(u,f))return!1;u=u[f]}return!!a}function oh(u){return u}function Jo(u){return u=Yl({},u),function(s){return Kf(s,u)}}function lh(u){return u=rc(u),function(s){return ip(s,u)}}function ic(u,s,a){if(s===void 0)return u;switch(a??3){case 1:return function(c){return u.call(s,c)};case 3:return function(c,f,p){return u.call(s,c,f,p)};case 4:return function(c,f,p,_){return u.call(s,c,f,p,_)}}return function(){return u.apply(s,arguments)}}function J_(u,s,a){return u==null?oh:ur(u)?ic(u,s,a):eo(u)&&!to(u)?Jo(u):lh(u)}function uh(u,s){return J_(u,s,1/0)}Kt.iteratee=uh;function Jr(u,s,a){return Kt.iteratee!==uh?Kt.iteratee(u,s):J_(u,s,a)}function Y_(u,s,a){s=Jr(s,a);for(var c=$n(u),f=c.length,p={},_=0;_<f;_++){var x=c[_];p[x]=s(u[x],x,u)}return p}function ap(){}function X_(u){return u==null?ap:function(s){return sp(u,s)}}function Q_(u,s,a){var c=Array(Math.max(0,u));s=ic(s,a,1);for(var f=0;f<u;f++)c[f]=s(f);return c}function Kc(u,s){return s==null&&(s=u,u=0),u+Math.floor(Math.random()*(s-u+1))}const Xl=Date.now||function(){return new Date().getTime()};function ev(u){var s=function(p){return u[p]},a="(?:"+$n(u).join("|")+")",c=RegExp(a),f=RegExp(a,"g");return function(p){return p=p==null?"":""+p,c.test(p)?p.replace(f,s):p}}const tv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},nv=ev(tv),ek=Qf(tv),rv=ev(ek),iv=Kt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var md=/(.)^/,tk={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},nk=/\\|'|\r|\n|\u2028|\u2029/g;function rk(u){return"\\"+tk[u]}var ik=/^\s*(\w|\$)+\s*$/;function sv(u,s,a){!s&&a&&(s=a),s=np({},s,Kt.templateSettings);var c=RegExp([(s.escape||md).source,(s.interpolate||md).source,(s.evaluate||md).source].join("|")+"|$","g"),f=0,p="__p+='";u.replace(c,function(S,D,F,H,J){return p+=u.slice(f,J).replace(nk,rk),f=J+S.length,D?p+=`'+
((__t=(`+D+`))==null?'':_.escape(__t))+
'`:F?p+=`'+
((__t=(`+F+`))==null?'':__t)+
'`:H&&(p+=`';
`+H+`
__p+='`),S}),p+=`';
`;var _=s.variable;if(_){if(!ik.test(_))throw new Error("variable is not a bare identifier: "+_)}else p=`with(obj||{}){
`+p+`}
`,_="obj";p=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+p+`return __p;
`;var x;try{x=new Function(_,"_",p)}catch(S){throw S.source=p,S}var k=function(S){return x.call(this,S,Kt)};return k.source="function("+_+`){
`+p+"}",k}function av(u,s,a){s=rc(s);var c=s.length;if(!c)return ur(a)?a.call(u):a;for(var f=0;f<c;f++){var p=u?.[s[f]];p===void 0&&(p=a,f=c),u=ur(p)?p.call(u):p}return u}var sk=0;function ov(u){var s=++sk+"";return u?u+s:s}function lv(u){var s=Kt(u);return s._chain=!0,s}function uv(u,s,a,c,f){if(!(c instanceof s))return u.apply(a,f);var p=V_(u.prototype),_=u.apply(p,f);return eo(_)?_:p}var nl=Sr(function(u,s){var a=nl.placeholder,c=function(){for(var f=0,p=s.length,_=Array(p),x=0;x<p;x++)_[x]=s[x]===a?arguments[f++]:s[x];for(;f<arguments.length;)_.push(arguments[f++]);return uv(u,c,this,this,_)};return c});nl.placeholder=Kt;const op=Sr(function(u,s,a){if(!ur(u))throw new TypeError("Bind must be called on a function");var c=Sr(function(f){return uv(u,c,s,this,a.concat(f))});return c}),oi=T_(Kr);function rl(u,s,a,c){if(c=c||[],!s&&s!==0)s=1/0;else if(s<=0)return c.concat(u);for(var f=c.length,p=0,_=Kr(u);p<_;p++){var x=u[p];if(oi(x)&&(to(x)||ah(x)))if(s>1)rl(x,s-1,a,c),f=c.length;else for(var k=0,S=x.length;k<S;)c[f++]=x[k++];else a||(c[f++]=x)}return c}const cv=Sr(function(u,s){s=rl(s,!1,!1);var a=s.length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var c=s[a];u[c]=op(u[c],u)}return u});function hv(u,s){var a=function(c){var f=a.cache,p=""+(s?s.apply(this,arguments):c);return no(f,p)||(f[p]=u.apply(this,arguments)),f[p]};return a.cache={},a}const lp=Sr(function(u,s,a){return setTimeout(function(){return u.apply(null,a)},s)}),dv=nl(lp,Kt,1);function fv(u,s,a){var c,f,p,_,x=0;a||(a={});var k=function(){x=a.leading===!1?0:Xl(),c=null,_=u.apply(f,p),c||(f=p=null)},S=function(){var D=Xl();!x&&a.leading===!1&&(x=D);var F=s-(D-x);return f=this,p=arguments,F<=0||F>s?(c&&(clearTimeout(c),c=null),x=D,_=u.apply(f,p),c||(f=p=null)):!c&&a.trailing!==!1&&(c=setTimeout(k,F)),_};return S.cancel=function(){clearTimeout(c),x=0,c=f=p=null},S}function pv(u,s,a){var c,f,p,_,x,k=function(){var D=Xl()-f;s>D?c=setTimeout(k,s-D):(c=null,a||(_=u.apply(x,p)),c||(p=x=null))},S=Sr(function(D){return x=this,p=D,f=Xl(),c||(c=setTimeout(k,s),a&&(_=u.apply(x,p))),_});return S.cancel=function(){clearTimeout(c),c=p=x=null},S}function mv(u,s){return nl(s,u)}function ch(u){return function(){return!u.apply(this,arguments)}}function gv(){var u=arguments,s=u.length-1;return function(){for(var a=s,c=u[s].apply(this,arguments);a--;)c=u[a].call(this,c);return c}}function _v(u,s){return function(){if(--u<1)return s.apply(this,arguments)}}function up(u,s){var a;return function(){return--u>0&&(a=s.apply(this,arguments)),u<=1&&(s=null),a}}const vv=nl(up,2);function cp(u,s,a){s=Jr(s,a);for(var c=$n(u),f,p=0,_=c.length;p<_;p++)if(f=c[p],s(u[f],f,u))return f}function yv(u){return function(s,a,c){a=Jr(a,c);for(var f=Kr(s),p=u>0?0:f-1;p>=0&&p<f;p+=u)if(a(s[p],p,s))return p;return-1}}const hh=yv(1),hp=yv(-1);function dp(u,s,a,c){a=Jr(a,c,1);for(var f=a(s),p=0,_=Kr(u);p<_;){var x=Math.floor((p+_)/2);a(u[x])<f?p=x+1:_=x}return p}function wv(u,s,a){return function(c,f,p){var _=0,x=Kr(c);if(typeof p=="number")u>0?_=p>=0?p:Math.max(p+x,_):x=p>=0?Math.min(p+1,x):p+x+1;else if(a&&p&&x)return p=a(c,f),c[p]===f?p:-1;if(f!==f)return p=s(nc.call(c,_,x),Hf),p>=0?p+_:-1;for(p=u>0?_:x-1;p>=0&&p<x;p+=u)if(c[p]===f)return p;return-1}}const fp=wv(1,hh,dp),xv=wv(-1,hp);function Wu(u,s,a){var c=oi(u)?hh:cp,f=c(u,s,a);if(f!==void 0&&f!==-1)return u[f]}function kv(u,s){return Wu(u,Jo(s))}function Yi(u,s,a){s=ic(s,a);var c,f;if(oi(u))for(c=0,f=u.length;c<f;c++)s(u[c],c,u);else{var p=$n(u);for(c=0,f=p.length;c<f;c++)s(u[p[c]],p[c],u)}return u}function la(u,s,a){s=Jr(s,a);for(var c=!oi(u)&&$n(u),f=(c||u).length,p=Array(f),_=0;_<f;_++){var x=c?c[_]:_;p[_]=s(u[x],x,u)}return p}function Lv(u){var s=function(a,c,f,p){var _=!oi(a)&&$n(a),x=(_||a).length,k=u>0?0:x-1;for(p||(f=a[_?_[k]:k],k+=u);k>=0&&k<x;k+=u){var S=_?_[k]:k;f=c(f,a[S],S,a)}return f};return function(a,c,f,p){var _=arguments.length>=3;return s(a,ic(c,p,4),f,_)}}const Wl=Lv(1),Jc=Lv(-1);function Xa(u,s,a){var c=[];return s=Jr(s,a),Yi(u,function(f,p,_){s(f,p,_)&&c.push(f)}),c}function Cv(u,s,a){return Xa(u,ch(Jr(s)),a)}function Yc(u,s,a){s=Jr(s,a);for(var c=!oi(u)&&$n(u),f=(c||u).length,p=0;p<f;p++){var _=c?c[p]:p;if(!s(u[_],_,u))return!1}return!0}function Xc(u,s,a){s=Jr(s,a);for(var c=!oi(u)&&$n(u),f=(c||u).length,p=0;p<f;p++){var _=c?c[p]:p;if(s(u[_],_,u))return!0}return!1}function Ei(u,s,a,c){return oi(u)||(u=tl(u)),(typeof a!="number"||c)&&(a=0),fp(u,s,a)>=0}const bv=Sr(function(u,s,a){var c,f;return ur(s)?f=s:(s=rc(s),c=s.slice(0,-1),s=s[s.length-1]),la(u,function(p){var _=f;if(!_){if(c&&c.length&&(p=ip(p,c)),p==null)return;_=p[s]}return _==null?_:_.apply(p,a)})});function dh(u,s){return la(u,lh(s))}function Ev(u,s){return Xa(u,Jo(s))}function pp(u,s,a){var c=-1/0,f=-1/0,p,_;if(s==null||typeof s=="number"&&typeof u[0]!="object"&&u!=null){u=oi(u)?u:tl(u);for(var x=0,k=u.length;x<k;x++)p=u[x],p!=null&&p>c&&(c=p)}else s=Jr(s,a),Yi(u,function(S,D,F){_=s(S,D,F),(_>f||_===-1/0&&c===-1/0)&&(c=S,f=_)});return c}function Mv(u,s,a){var c=1/0,f=1/0,p,_;if(s==null||typeof s=="number"&&typeof u[0]!="object"&&u!=null){u=oi(u)?u:tl(u);for(var x=0,k=u.length;x<k;x++)p=u[x],p!=null&&p<c&&(c=p)}else s=Jr(s,a),Yi(u,function(S,D,F){_=s(S,D,F),(_<f||_===1/0&&c===1/0)&&(c=S,f=_)});return c}var ak=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function mp(u){return u?to(u)?nc.call(u):sh(u)?u.match(ak):oi(u)?la(u,oh):tl(u):[]}function gp(u,s,a){if(s==null||a)return oi(u)||(u=tl(u)),u[Kc(u.length-1)];var c=mp(u),f=Kr(c);s=Math.max(Math.min(s,f),0);for(var p=f-1,_=0;_<s;_++){var x=Kc(_,p),k=c[_];c[_]=c[x],c[x]=k}return c.slice(0,s)}function Sv(u){return gp(u,1/0)}function Pv(u,s,a){var c=0;return s=Jr(s,a),dh(la(u,function(f,p,_){return{value:f,index:c++,criteria:s(f,p,_)}}).sort(function(f,p){var _=f.criteria,x=p.criteria;if(_!==x){if(_>x||_===void 0)return 1;if(_<x||x===void 0)return-1}return f.index-p.index}),"value")}function fh(u,s){return function(a,c,f){var p=s?[[],[]]:{};return c=Jr(c,f),Yi(a,function(_,x){var k=c(_,x,a);u(p,_,k)}),p}}const Bv=fh(function(u,s,a){no(u,a)?u[a].push(s):u[a]=[s]}),Tv=fh(function(u,s,a){u[a]=s}),Av=fh(function(u,s,a){no(u,a)?u[a]++:u[a]=1}),Dv=fh(function(u,s,a){u[a?0:1].push(s)},!0);function Ov(u){return u==null?0:oi(u)?u.length:$n(u).length}function ok(u,s,a){return s in a}const _p=Sr(function(u,s){var a={},c=s[0];if(u==null)return a;ur(c)?(s.length>1&&(c=ic(c,s[1])),s=tu(u)):(c=ok,s=rl(s,!1,!1),u=Object(u));for(var f=0,p=s.length;f<p;f++){var _=s[f],x=u[_];c(x,_,u)&&(a[_]=x)}return a}),Rv=Sr(function(u,s){var a=s[0],c;return ur(a)?(a=ch(a),s.length>1&&(c=s[1])):(s=la(rl(s,!1,!1),String),a=function(f,p){return!Ei(s,p)}),_p(u,a,c)});function vp(u,s,a){return nc.call(u,0,Math.max(0,u.length-(s==null||a?1:s)))}function Kl(u,s,a){return u==null||u.length<1?s==null||a?void 0:[]:s==null||a?u[0]:vp(u,u.length-s)}function Ko(u,s,a){return nc.call(u,s==null||a?1:s)}function Iv(u,s,a){return u==null||u.length<1?s==null||a?void 0:[]:s==null||a?u[u.length-1]:Ko(u,Math.max(0,u.length-s))}function Fv(u){return Xa(u,Boolean)}function Nv(u,s){return rl(u,s,!1)}const yp=Sr(function(u,s){return s=rl(s,!0,!0),Xa(u,function(a){return!Ei(s,a)})}),zv=Sr(function(u,s){return yp(u,s)});function Ku(u,s,a,c){Uf(s)||(c=a,a=s,s=!1),a!=null&&(a=Jr(a,c));for(var f=[],p=[],_=0,x=Kr(u);_<x;_++){var k=u[_],S=a?a(k,_,u):k;s&&!a?((!_||p!==S)&&f.push(k),p=S):a?Ei(p,S)||(p.push(S),f.push(k)):Ei(f,k)||f.push(k)}return f}const jv=Sr(function(u){return Ku(rl(u,!0,!0))});function Uv(u){for(var s=[],a=arguments.length,c=0,f=Kr(u);c<f;c++){var p=u[c];if(!Ei(s,p)){var _;for(_=1;_<a&&Ei(arguments[_],p);_++);_===a&&s.push(p)}}return s}function Ju(u){for(var s=u&&pp(u,Kr).length||0,a=Array(s),c=0;c<s;c++)a[c]=dh(u,c);return a}const $v=Sr(Ju);function qv(u,s){for(var a={},c=0,f=Kr(u);c<f;c++)s?a[u[c]]=s[c]:a[u[c][0]]=u[c][1];return a}function Gv(u,s,a){s==null&&(s=u||0,u=0),a||(a=s<u?-1:1);for(var c=Math.max(Math.ceil((s-u)/a),0),f=Array(c),p=0;p<c;p++,u+=a)f[p]=u;return f}function Vv(u,s){if(s==null||s<1)return[];for(var a=[],c=0,f=u.length;c<f;)a.push(nc.call(u,c,c+=s));return a}function wp(u,s){return u._chain?Kt(s).chain():s}function xp(u){return Yi(Zu(u),function(s){var a=Kt[s]=u[s];Kt.prototype[s]=function(){var c=[this._wrapped];return Fx.apply(c,arguments),wp(this,a.apply(Kt,c))}}),Kt}Yi(["pop","push","reverse","shift","sort","splice","unshift"],function(u){var s=ih[u];Kt.prototype[u]=function(){var a=this._wrapped;return a!=null&&(s.apply(a,arguments),(u==="shift"||u==="splice")&&a.length===0&&delete a[0]),wp(this,a)}});Yi(["concat","join","slice"],function(u){var s=ih[u];Kt.prototype[u]=function(){var a=this._wrapped;return a!=null&&(a=s.apply(a,arguments)),wp(this,a)}});const lk=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Nf,after:_v,all:Yc,allKeys:tu,any:Xc,assign:Yl,before:up,bind:op,bindAll:cv,chain:lv,chunk:Vv,clone:Z_,collect:la,compact:Fv,compose:gv,constant:Zf,contains:Ei,countBy:Av,create:H_,debounce:pv,default:Kt,defaults:np,defer:dv,delay:lp,detect:Wu,difference:yp,drop:Ko,each:Yi,escape:nv,every:Yc,extend:tp,extendOwn:Yl,filter:Xa,find:Wu,findIndex:hh,findKey:cp,findLastIndex:hp,findWhere:kv,first:Kl,flatten:Nv,foldl:Wl,foldr:Jc,forEach:Yi,functions:Zu,get:sp,groupBy:Bv,has:K_,head:Kl,identity:oh,include:Ei,includes:Ei,indexBy:Tv,indexOf:fp,initial:vp,inject:Wl,intersection:Uv,invert:Qf,invoke:bv,isArguments:ah,isArray:to,isArrayBuffer:Gf,isBoolean:Uf,isDataView:Hu,isDate:C_,isElement:L_,isEmpty:O_,isEqual:I_,isError:E_,isFinite:B_,isFunction:ur,isMap:j_,isMatch:Kf,isNaN:Hf,isNull:k_,isNumber:$f,isObject:eo,isRegExp:b_,isSet:$_,isString:sh,isSymbol:qf,isTypedArray:Wf,isUndefined:jf,isWeakMap:U_,isWeakSet:q_,iteratee:uh,keys:$n,last:Iv,lastIndexOf:xv,map:la,mapObject:Y_,matcher:Jo,matches:Jo,max:pp,memoize:hv,methods:Zu,min:Mv,mixin:xp,negate:ch,noop:ap,now:Xl,object:qv,omit:Rv,once:vv,pairs:G_,partial:nl,partition:Dv,pick:_p,pluck:dh,property:lh,propertyOf:X_,random:Kc,range:Gv,reduce:Wl,reduceRight:Jc,reject:Cv,rest:Ko,restArguments:Sr,result:av,sample:gp,select:Xa,shuffle:Sv,size:Ov,some:Xc,sortBy:Pv,sortedIndex:dp,tail:Ko,take:Kl,tap:W_,template:sv,templateSettings:iv,throttle:fv,times:Q_,toArray:mp,toPath:rp,transpose:Ju,unescape:rv,union:jv,uniq:Ku,unique:Ku,uniqueId:ov,unzip:Ju,values:tl,where:Ev,without:zv,wrap:mv,zip:$v},Symbol.toStringTag,{value:"Module"}));var yf=xp(lk);yf._=yf;const uk=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Nf,after:_v,all:Yc,allKeys:tu,any:Xc,assign:Yl,before:up,bind:op,bindAll:cv,chain:lv,chunk:Vv,clone:Z_,collect:la,compact:Fv,compose:gv,constant:Zf,contains:Ei,countBy:Av,create:H_,debounce:pv,default:yf,defaults:np,defer:dv,delay:lp,detect:Wu,difference:yp,drop:Ko,each:Yi,escape:nv,every:Yc,extend:tp,extendOwn:Yl,filter:Xa,find:Wu,findIndex:hh,findKey:cp,findLastIndex:hp,findWhere:kv,first:Kl,flatten:Nv,foldl:Wl,foldr:Jc,forEach:Yi,functions:Zu,get:sp,groupBy:Bv,has:K_,head:Kl,identity:oh,include:Ei,includes:Ei,indexBy:Tv,indexOf:fp,initial:vp,inject:Wl,intersection:Uv,invert:Qf,invoke:bv,isArguments:ah,isArray:to,isArrayBuffer:Gf,isBoolean:Uf,isDataView:Hu,isDate:C_,isElement:L_,isEmpty:O_,isEqual:I_,isError:E_,isFinite:B_,isFunction:ur,isMap:j_,isMatch:Kf,isNaN:Hf,isNull:k_,isNumber:$f,isObject:eo,isRegExp:b_,isSet:$_,isString:sh,isSymbol:qf,isTypedArray:Wf,isUndefined:jf,isWeakMap:U_,isWeakSet:q_,iteratee:uh,keys:$n,last:Iv,lastIndexOf:xv,map:la,mapObject:Y_,matcher:Jo,matches:Jo,max:pp,memoize:hv,methods:Zu,min:Mv,mixin:xp,negate:ch,noop:ap,now:Xl,object:qv,omit:Rv,once:vv,pairs:G_,partial:nl,partition:Dv,pick:_p,pluck:dh,property:lh,propertyOf:X_,random:Kc,range:Gv,reduce:Wl,reduceRight:Jc,reject:Cv,rest:Ko,restArguments:Sr,result:av,sample:gp,select:Xa,shuffle:Sv,size:Ov,some:Xc,sortBy:Pv,sortedIndex:dp,tail:Ko,take:Kl,tap:W_,template:sv,templateSettings:iv,throttle:fv,times:Q_,toArray:mp,toPath:rp,transpose:Ju,unescape:rv,union:jv,uniq:Ku,unique:Ku,uniqueId:ov,unzip:Ju,values:tl,where:Ev,without:zv,wrap:mv,zip:$v},Symbol.toStringTag,{value:"Module"})),kp=xf(uk);var Iu={exports:{}},ck=Iu.exports,z0;function hk(){return z0||(z0=1,(function(u,s){(function(){var a=this,c=a.humanize,f={};u.exports&&(s=u.exports=f),s.humanize=f,f.noConflict=function(){return a.humanize=c,this},f.pad=function(x,k,S,D){if(x+="",S?S.length>1&&(S=S.charAt(0)):S=" ",D=D===void 0?"left":"right",D==="right")for(;x.length<k;)x=x+S;else for(;x.length<k;)x=S+x;return x},f.time=function(){return new Date().getTime()/1e3};var p=[0,0,31,59,90,120,151,181,212,243,273,304,334],_=[0,0,31,60,91,121,152,182,213,244,274,305,335];f.date=function(x,k){var S=k===void 0?new Date:k instanceof Date?new Date(k):new Date(k*1e3),D=/\\?([a-z])/gi,F=function(W,Y){return Q[W]?Q[W]():Y},H=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],J=["January","February","March","April","May","June","July","August","September","October","November","December"],Q={d:function(){return f.pad(Q.j(),2,"0")},D:function(){return Q.l().slice(0,3)},j:function(){return S.getDate()},l:function(){return H[Q.w()]},N:function(){return Q.w()||7},S:function(){var W=Q.j();return W>4&&W<21?"th":{1:"st",2:"nd",3:"rd"}[W%10]||"th"},w:function(){return S.getDay()},z:function(){return(Q.L()?_[Q.n()]:p[Q.n()])+Q.j()-1},W:function(){var W=Q.z()-Q.N()+1.5;return f.pad(1+Math.floor(Math.abs(W)/7)+(W%7>3.5?1:0),2,"0")},F:function(){return J[S.getMonth()]},m:function(){return f.pad(Q.n(),2,"0")},M:function(){return Q.F().slice(0,3)},n:function(){return S.getMonth()+1},t:function(){return new Date(Q.Y(),Q.n(),0).getDate()},L:function(){return new Date(Q.Y(),1,29).getMonth()===1?1:0},o:function(){var W=Q.n(),Y=Q.W();return Q.Y()+(W===12&&Y<9?-1:W===1&&Y>9)},Y:function(){return S.getFullYear()},y:function(){return String(Q.Y()).slice(-2)},a:function(){return S.getHours()>11?"pm":"am"},A:function(){return Q.a().toUpperCase()},B:function(){var W=S.getTime()/1e3,Y=W%86400+3600;Y<0&&(Y+=86400);var ve=Y/86.4%1e3;return W<0?Math.ceil(ve):Math.floor(ve)},g:function(){return Q.G()%12||12},G:function(){return S.getHours()},h:function(){return f.pad(Q.g(),2,"0")},H:function(){return f.pad(Q.G(),2,"0")},i:function(){return f.pad(S.getMinutes(),2,"0")},s:function(){return f.pad(S.getSeconds(),2,"0")},u:function(){return f.pad(S.getMilliseconds()*1e3,6,"0")},O:function(){var W=S.getTimezoneOffset(),Y=Math.abs(W);return(W>0?"-":"+")+f.pad(Math.floor(Y/60)*100+Y%60,4,"0")},P:function(){var W=Q.O();return W.substr(0,3)+":"+W.substr(3,2)},Z:function(){return-S.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(D,F)},r:function(){return"D, d M Y H:i:s O".replace(D,F)},U:function(){return S.getTime()/1e3||0}};return x.replace(D,F)},f.numberFormat=function(x,k,S,D){k=isNaN(k)?2:Math.abs(k),S=S===void 0?".":S,D=D===void 0?",":D;var F=x<0?"-":"";x=Math.abs(+x||0);var H=parseInt(x.toFixed(k),10)+"",J=H.length>3?H.length%3:0;return F+(J?H.substr(0,J)+D:"")+H.substr(J).replace(/(\d{3})(?=\d)/g,"$1"+D)+(k?S+Math.abs(x-H).toFixed(k).slice(2):"")},f.naturalDay=function(x,k){x=x===void 0?f.time():x,k=k===void 0?"Y-m-d":k;var S=86400,D=new Date,F=new Date(D.getFullYear(),D.getMonth(),D.getDate()).getTime()/1e3;return x<F&&x>=F-S?"yesterday":x>=F&&x<F+S?"today":x>=F+S&&x<F+2*S?"tomorrow":f.date(k,x)},f.relativeTime=function(x){x=x===void 0?f.time():x;var k=f.time(),S=k-x;if(S<2&&S>-2)return(S>=0?"just ":"")+"now";if(S<60&&S>-60)return S>=0?Math.floor(S)+" seconds ago":"in "+Math.floor(-S)+" seconds";if(S<120&&S>-120)return S>=0?"about a minute ago":"in about a minute";if(S<3600&&S>-3600)return S>=0?Math.floor(S/60)+" minutes ago":"in "+Math.floor(-S/60)+" minutes";if(S<7200&&S>-7200)return S>=0?"about an hour ago":"in about an hour";if(S<86400&&S>-86400)return S>=0?Math.floor(S/3600)+" hours ago":"in "+Math.floor(-S/3600)+" hours";var D=2*86400;if(S<D&&S>-D)return S>=0?"1 day ago":"in 1 day";var F=29*86400;if(S<F&&S>-F)return S>=0?Math.floor(S/86400)+" days ago":"in "+Math.floor(-S/86400)+" days";var H=60*86400;if(S<H&&S>-H)return S>=0?"about a month ago":"in about a month";var J=parseInt(f.date("Y",k),10),Q=parseInt(f.date("Y",x),10),W=J*12+parseInt(f.date("n",k),10),Y=Q*12+parseInt(f.date("n",x),10),ve=W-Y;if(ve<12&&ve>-12)return ve>=0?ve+" months ago":"in "+-ve+" months";var $e=J-Q;return $e<2&&$e>-2?$e>=0?"a year ago":"in a year":$e>=0?$e+" years ago":"in "+-$e+" years"},f.ordinal=function(x){x=parseInt(x,10),x=isNaN(x)?0:x;var k=x<0?"-":"";x=Math.abs(x);var S=x%100;return k+x+(S>4&&S<21?"th":{1:"st",2:"nd",3:"rd"}[x%10]||"th")},f.filesize=function(x,k,S,D,F,H){return k=k===void 0?1024:k,x<=0?"0 bytes":(x<k&&S===void 0&&(S=0),H===void 0&&(H=" "),f.intword(x,["bytes","KB","MB","GB","TB","PB"],k,S,D,F,H))},f.intword=function(x,k,S,D,F,H,J){var Q,W;k=k||["","K","M","B","T"],W=k.length-1,S=S||1e3,D=isNaN(D)?2:Math.abs(D),F=F||".",H=H||",",J=J||"";for(var Y=0;Y<k.length;Y++)if(x<Math.pow(S,Y+1)){W=Y;break}Q=x/Math.pow(S,W);var ve=k[W]?J+k[W]:"";return f.numberFormat(Q,D,F,H)+ve},f.linebreaks=function(x){return x=x.replace(/^([\n|\r]*)/,""),x=x.replace(/([\n|\r]*)$/,""),x=x.replace(/(\r\n|\n|\r)/g,`
`),x=x.replace(/(\n{2,})/g,"</p><p>"),x=x.replace(/\n/g,"<br />"),"<p>"+x+"</p>"},f.nl2br=function(x){return x.replace(/(\r\n|\n|\r)/g,"<br />")},f.truncatechars=function(x,k){return x.length<=k?x:x.substr(0,k)+"…"},f.truncatewords=function(x,k){var S=x.split(" ");return S.length<k?x:S.slice(0,k).join(" ")+"…"}}).call(ck)})(Iu,Iu.exports)),Iu.exports}var gd,j0;function dk(){return j0||(j0=1,gd={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:386102e-12,display:"sqmiles",decimals:2}}),gd}var _d={},Fu={exports:{}},fk=Fu.exports,U0;function ph(){return U0||(U0=1,(function(u,s){(function(){var a=this,c=a._,f={},p=Array.prototype,_=Object.prototype,x=Function.prototype,k=p.push,S=p.slice,D=p.concat,F=_.toString,H=_.hasOwnProperty,J=p.forEach,Q=p.map,W=p.reduce,Y=p.reduceRight,ve=p.filter,$e=p.every,Oe=p.some,ye=p.indexOf,Ee=p.lastIndexOf,De=Array.isArray,He=Object.keys,_t=x.bind,X=function(O){if(O instanceof X)return O;if(!(this instanceof X))return new X(O);this._wrapped=O};u.exports&&(s=u.exports=X),s._=X,X.VERSION="1.5.2";var tt=X.each=X.forEach=function(O,q,re){if(O!=null){if(J&&O.forEach===J)O.forEach(q,re);else if(O.length===+O.length){for(var fe=0,Ae=O.length;fe<Ae;fe++)if(q.call(re,O[fe],fe,O)===f)return}else for(var Ye=X.keys(O),fe=0,Ae=Ye.length;fe<Ae;fe++)if(q.call(re,O[Ye[fe]],Ye[fe],O)===f)return}};X.map=X.collect=function(O,q,re){var fe=[];return O==null?fe:Q&&O.map===Q?O.map(q,re):(tt(O,function(Ae,Ye,de){fe.push(q.call(re,Ae,Ye,de))}),fe)};var lt="Reduce of empty array with no initial value";X.reduce=X.foldl=X.inject=function(O,q,re,fe){var Ae=arguments.length>2;if(O==null&&(O=[]),W&&O.reduce===W)return fe&&(q=X.bind(q,fe)),Ae?O.reduce(q,re):O.reduce(q);if(tt(O,function(Ye,de,ze){Ae?re=q.call(fe,re,Ye,de,ze):(re=Ye,Ae=!0)}),!Ae)throw new TypeError(lt);return re},X.reduceRight=X.foldr=function(O,q,re,fe){var Ae=arguments.length>2;if(O==null&&(O=[]),Y&&O.reduceRight===Y)return fe&&(q=X.bind(q,fe)),Ae?O.reduceRight(q,re):O.reduceRight(q);var Ye=O.length;if(Ye!==+Ye){var de=X.keys(O);Ye=de.length}if(tt(O,function(ze,Ie,qe){Ie=de?de[--Ye]:--Ye,Ae?re=q.call(fe,re,O[Ie],Ie,qe):(re=O[Ie],Ae=!0)}),!Ae)throw new TypeError(lt);return re},X.find=X.detect=function(O,q,re){var fe;return wt(O,function(Ae,Ye,de){if(q.call(re,Ae,Ye,de))return fe=Ae,!0}),fe},X.filter=X.select=function(O,q,re){var fe=[];return O==null?fe:ve&&O.filter===ve?O.filter(q,re):(tt(O,function(Ae,Ye,de){q.call(re,Ae,Ye,de)&&fe.push(Ae)}),fe)},X.reject=function(O,q,re){return X.filter(O,function(fe,Ae,Ye){return!q.call(re,fe,Ae,Ye)},re)},X.every=X.all=function(O,q,re){q||(q=X.identity);var fe=!0;return O==null?fe:$e&&O.every===$e?O.every(q,re):(tt(O,function(Ae,Ye,de){if(!(fe=fe&&q.call(re,Ae,Ye,de)))return f}),!!fe)};var wt=X.some=X.any=function(O,q,re){q||(q=X.identity);var fe=!1;return O==null?fe:Oe&&O.some===Oe?O.some(q,re):(tt(O,function(Ae,Ye,de){if(fe||(fe=q.call(re,Ae,Ye,de)))return f}),!!fe)};X.contains=X.include=function(O,q){return O==null?!1:ye&&O.indexOf===ye?O.indexOf(q)!=-1:wt(O,function(re){return re===q})},X.invoke=function(O,q){var re=S.call(arguments,2),fe=X.isFunction(q);return X.map(O,function(Ae){return(fe?q:Ae[q]).apply(Ae,re)})},X.pluck=function(O,q){return X.map(O,function(re){return re[q]})},X.where=function(O,q,re){return X.isEmpty(q)?re?void 0:[]:X[re?"find":"filter"](O,function(fe){for(var Ae in q)if(q[Ae]!==fe[Ae])return!1;return!0})},X.findWhere=function(O,q){return X.where(O,q,!0)},X.max=function(O,q,re){if(!q&&X.isArray(O)&&O[0]===+O[0]&&O.length<65535)return Math.max.apply(Math,O);if(!q&&X.isEmpty(O))return-1/0;var fe={computed:-1/0,value:-1/0};return tt(O,function(Ae,Ye,de){var ze=q?q.call(re,Ae,Ye,de):Ae;ze>fe.computed&&(fe={value:Ae,computed:ze})}),fe.value},X.min=function(O,q,re){if(!q&&X.isArray(O)&&O[0]===+O[0]&&O.length<65535)return Math.min.apply(Math,O);if(!q&&X.isEmpty(O))return 1/0;var fe={computed:1/0,value:1/0};return tt(O,function(Ae,Ye,de){var ze=q?q.call(re,Ae,Ye,de):Ae;ze<fe.computed&&(fe={value:Ae,computed:ze})}),fe.value},X.shuffle=function(O){var q,re=0,fe=[];return tt(O,function(Ae){q=X.random(re++),fe[re-1]=fe[q],fe[q]=Ae}),fe},X.sample=function(O,q,re){return arguments.length<2||re?O[X.random(O.length-1)]:X.shuffle(O).slice(0,Math.max(0,q))};var Ct=function(O){return X.isFunction(O)?O:function(q){return q[O]}};X.sortBy=function(O,q,re){var fe=Ct(q);return X.pluck(X.map(O,function(Ae,Ye,de){return{value:Ae,index:Ye,criteria:fe.call(re,Ae,Ye,de)}}).sort(function(Ae,Ye){var de=Ae.criteria,ze=Ye.criteria;if(de!==ze){if(de>ze||de===void 0)return 1;if(de<ze||ze===void 0)return-1}return Ae.index-Ye.index}),"value")};var Jt=function(O){return function(q,re,fe){var Ae={},Ye=re==null?X.identity:Ct(re);return tt(q,function(de,ze){var Ie=Ye.call(fe,de,ze,q);O(Ae,Ie,de)}),Ae}};X.groupBy=Jt(function(O,q,re){(X.has(O,q)?O[q]:O[q]=[]).push(re)}),X.indexBy=Jt(function(O,q,re){O[q]=re}),X.countBy=Jt(function(O,q){X.has(O,q)?O[q]++:O[q]=1}),X.sortedIndex=function(O,q,re,fe){re=re==null?X.identity:Ct(re);for(var Ae=re.call(fe,q),Ye=0,de=O.length;Ye<de;){var ze=Ye+de>>>1;re.call(fe,O[ze])<Ae?Ye=ze+1:de=ze}return Ye},X.toArray=function(O){return O?X.isArray(O)?S.call(O):O.length===+O.length?X.map(O,X.identity):X.values(O):[]},X.size=function(O){return O==null?0:O.length===+O.length?O.length:X.keys(O).length},X.first=X.head=X.take=function(O,q,re){if(O!=null)return q==null||re?O[0]:S.call(O,0,q)},X.initial=function(O,q,re){return S.call(O,0,O.length-(q==null||re?1:q))},X.last=function(O,q,re){if(O!=null)return q==null||re?O[O.length-1]:S.call(O,Math.max(O.length-q,0))},X.rest=X.tail=X.drop=function(O,q,re){return S.call(O,q==null||re?1:q)},X.compact=function(O){return X.filter(O,X.identity)};var vn=function(O,q,re){return q&&X.every(O,X.isArray)?D.apply(re,O):(tt(O,function(fe){X.isArray(fe)||X.isArguments(fe)?q?k.apply(re,fe):vn(fe,q,re):re.push(fe)}),re)};X.flatten=function(O,q){return vn(O,q,[])},X.without=function(O){return X.difference(O,S.call(arguments,1))},X.uniq=X.unique=function(O,q,re,fe){X.isFunction(q)&&(fe=re,re=q,q=!1);var Ae=re?X.map(O,re,fe):O,Ye=[],de=[];return tt(Ae,function(ze,Ie){(q?!Ie||de[de.length-1]!==ze:!X.contains(de,ze))&&(de.push(ze),Ye.push(O[Ie]))}),Ye},X.union=function(){return X.uniq(X.flatten(arguments,!0))},X.intersection=function(O){var q=S.call(arguments,1);return X.filter(X.uniq(O),function(re){return X.every(q,function(fe){return X.indexOf(fe,re)>=0})})},X.difference=function(O){var q=D.apply(p,S.call(arguments,1));return X.filter(O,function(re){return!X.contains(q,re)})},X.zip=function(){for(var O=X.max(X.pluck(arguments,"length").concat(0)),q=new Array(O),re=0;re<O;re++)q[re]=X.pluck(arguments,""+re);return q},X.object=function(O,q){if(O==null)return{};for(var re={},fe=0,Ae=O.length;fe<Ae;fe++)q?re[O[fe]]=q[fe]:re[O[fe][0]]=O[fe][1];return re},X.indexOf=function(O,q,re){if(O==null)return-1;var fe=0,Ae=O.length;if(re)if(typeof re=="number")fe=re<0?Math.max(0,Ae+re):re;else return fe=X.sortedIndex(O,q),O[fe]===q?fe:-1;if(ye&&O.indexOf===ye)return O.indexOf(q,re);for(;fe<Ae;fe++)if(O[fe]===q)return fe;return-1},X.lastIndexOf=function(O,q,re){if(O==null)return-1;var fe=re!=null;if(Ee&&O.lastIndexOf===Ee)return fe?O.lastIndexOf(q,re):O.lastIndexOf(q);for(var Ae=fe?re:O.length;Ae--;)if(O[Ae]===q)return Ae;return-1},X.range=function(O,q,re){arguments.length<=1&&(q=O||0,O=0),re=arguments[2]||1;for(var fe=Math.max(Math.ceil((q-O)/re),0),Ae=0,Ye=new Array(fe);Ae<fe;)Ye[Ae++]=O,O+=re;return Ye};var Ft=function(){};X.bind=function(O,q){var re,fe;if(_t&&O.bind===_t)return _t.apply(O,S.call(arguments,1));if(!X.isFunction(O))throw new TypeError;return re=S.call(arguments,2),fe=function(){if(!(this instanceof fe))return O.apply(q,re.concat(S.call(arguments)));Ft.prototype=O.prototype;var Ae=new Ft;Ft.prototype=null;var Ye=O.apply(Ae,re.concat(S.call(arguments)));return Object(Ye)===Ye?Ye:Ae}},X.partial=function(O){var q=S.call(arguments,1);return function(){return O.apply(this,q.concat(S.call(arguments)))}},X.bindAll=function(O){var q=S.call(arguments,1);if(q.length===0)throw new Error("bindAll must be passed function names");return tt(q,function(re){O[re]=X.bind(O[re],O)}),O},X.memoize=function(O,q){var re={};return q||(q=X.identity),function(){var fe=q.apply(this,arguments);return X.has(re,fe)?re[fe]:re[fe]=O.apply(this,arguments)}},X.delay=function(O,q){var re=S.call(arguments,2);return setTimeout(function(){return O.apply(null,re)},q)},X.defer=function(O){return X.delay.apply(X,[O,1].concat(S.call(arguments,1)))},X.throttle=function(O,q,re){var fe,Ae,Ye,de=null,ze=0;re||(re={});var Ie=function(){ze=re.leading===!1?0:new Date,de=null,Ye=O.apply(fe,Ae)};return function(){var qe=new Date;!ze&&re.leading===!1&&(ze=qe);var Ze=q-(qe-ze);return fe=this,Ae=arguments,Ze<=0?(clearTimeout(de),de=null,ze=qe,Ye=O.apply(fe,Ae)):!de&&re.trailing!==!1&&(de=setTimeout(Ie,Ze)),Ye}},X.debounce=function(O,q,re){var fe,Ae,Ye,de,ze;return function(){Ye=this,Ae=arguments,de=new Date;var Ie=function(){var Ze=new Date-de;Ze<q?fe=setTimeout(Ie,q-Ze):(fe=null,re||(ze=O.apply(Ye,Ae)))},qe=re&&!fe;return fe||(fe=setTimeout(Ie,q)),qe&&(ze=O.apply(Ye,Ae)),ze}},X.once=function(O){var q=!1,re;return function(){return q||(q=!0,re=O.apply(this,arguments),O=null),re}},X.wrap=function(O,q){return function(){var re=[O];return k.apply(re,arguments),q.apply(this,re)}},X.compose=function(){var O=arguments;return function(){for(var q=arguments,re=O.length-1;re>=0;re--)q=[O[re].apply(this,q)];return q[0]}},X.after=function(O,q){return function(){if(--O<1)return q.apply(this,arguments)}},X.keys=He||function(O){if(O!==Object(O))throw new TypeError("Invalid object");var q=[];for(var re in O)X.has(O,re)&&q.push(re);return q},X.values=function(O){for(var q=X.keys(O),re=q.length,fe=new Array(re),Ae=0;Ae<re;Ae++)fe[Ae]=O[q[Ae]];return fe},X.pairs=function(O){for(var q=X.keys(O),re=q.length,fe=new Array(re),Ae=0;Ae<re;Ae++)fe[Ae]=[q[Ae],O[q[Ae]]];return fe},X.invert=function(O){for(var q={},re=X.keys(O),fe=0,Ae=re.length;fe<Ae;fe++)q[O[re[fe]]]=re[fe];return q},X.functions=X.methods=function(O){var q=[];for(var re in O)X.isFunction(O[re])&&q.push(re);return q.sort()},X.extend=function(O){return tt(S.call(arguments,1),function(q){if(q)for(var re in q)O[re]=q[re]}),O},X.pick=function(O){var q={},re=D.apply(p,S.call(arguments,1));return tt(re,function(fe){fe in O&&(q[fe]=O[fe])}),q},X.omit=function(O){var q={},re=D.apply(p,S.call(arguments,1));for(var fe in O)X.contains(re,fe)||(q[fe]=O[fe]);return q},X.defaults=function(O){return tt(S.call(arguments,1),function(q){if(q)for(var re in q)O[re]===void 0&&(O[re]=q[re])}),O},X.clone=function(O){return X.isObject(O)?X.isArray(O)?O.slice():X.extend({},O):O},X.tap=function(O,q){return q(O),O};var zt=function(O,q,re,fe){if(O===q)return O!==0||1/O==1/q;if(O==null||q==null)return O===q;O instanceof X&&(O=O._wrapped),q instanceof X&&(q=q._wrapped);var Ae=F.call(O);if(Ae!=F.call(q))return!1;switch(Ae){case"[object String]":return O==String(q);case"[object Number]":return O!=+O?q!=+q:O==0?1/O==1/q:O==+q;case"[object Date]":case"[object Boolean]":return+O==+q;case"[object RegExp]":return O.source==q.source&&O.global==q.global&&O.multiline==q.multiline&&O.ignoreCase==q.ignoreCase}if(typeof O!="object"||typeof q!="object")return!1;for(var Ye=re.length;Ye--;)if(re[Ye]==O)return fe[Ye]==q;var de=O.constructor,ze=q.constructor;if(de!==ze&&!(X.isFunction(de)&&de instanceof de&&X.isFunction(ze)&&ze instanceof ze))return!1;re.push(O),fe.push(q);var Ie=0,qe=!0;if(Ae=="[object Array]"){if(Ie=O.length,qe=Ie==q.length,qe)for(;Ie--&&(qe=zt(O[Ie],q[Ie],re,fe)););}else{for(var Ze in O)if(X.has(O,Ze)&&(Ie++,!(qe=X.has(q,Ze)&&zt(O[Ze],q[Ze],re,fe))))break;if(qe){for(Ze in q)if(X.has(q,Ze)&&!Ie--)break;qe=!Ie}}return re.pop(),fe.pop(),qe};X.isEqual=function(O,q){return zt(O,q,[],[])},X.isEmpty=function(O){if(O==null)return!0;if(X.isArray(O)||X.isString(O))return O.length===0;for(var q in O)if(X.has(O,q))return!1;return!0},X.isElement=function(O){return!!(O&&O.nodeType===1)},X.isArray=De||function(O){return F.call(O)=="[object Array]"},X.isObject=function(O){return O===Object(O)},tt(["Arguments","Function","String","Number","Date","RegExp"],function(O){X["is"+O]=function(q){return F.call(q)=="[object "+O+"]"}}),X.isArguments(arguments)||(X.isArguments=function(O){return!!(O&&X.has(O,"callee"))}),typeof/./!="function"&&(X.isFunction=function(O){return typeof O=="function"}),X.isFinite=function(O){return isFinite(O)&&!isNaN(parseFloat(O))},X.isNaN=function(O){return X.isNumber(O)&&O!=+O},X.isBoolean=function(O){return O===!0||O===!1||F.call(O)=="[object Boolean]"},X.isNull=function(O){return O===null},X.isUndefined=function(O){return O===void 0},X.has=function(O,q){return H.call(O,q)},X.noConflict=function(){return a._=c,this},X.identity=function(O){return O},X.times=function(O,q,re){for(var fe=Array(Math.max(0,O)),Ae=0;Ae<O;Ae++)fe[Ae]=q.call(re,Ae);return fe},X.random=function(O,q){return q==null&&(q=O,O=0),O+Math.floor(Math.random()*(q-O+1))};var Re={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Re.unescape=X.invert(Re.escape);var vt={escape:new RegExp("["+X.keys(Re.escape).join("")+"]","g"),unescape:new RegExp("("+X.keys(Re.unescape).join("|")+")","g")};X.each(["escape","unescape"],function(O){X[O]=function(q){return q==null?"":(""+q).replace(vt[O],function(re){return Re[O][re]})}}),X.result=function(O,q){if(O!=null){var re=O[q];return X.isFunction(re)?re.call(O):re}},X.mixin=function(O){tt(X.functions(O),function(q){var re=X[q]=O[q];X.prototype[q]=function(){var fe=[this._wrapped];return k.apply(fe,arguments),ut.call(this,re.apply(X,fe))}})};var Ne=0;X.uniqueId=function(O){var q=++Ne+"";return O?O+q:q},X.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,Fe={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},mt=/\\|'|\r|\n|\t|\u2028|\u2029/g;X.template=function(O,q,re){var fe;re=X.defaults({},re,X.templateSettings);var Ae=new RegExp([(re.escape||ce).source,(re.interpolate||ce).source,(re.evaluate||ce).source].join("|")+"|$","g"),Ye=0,de="__p+='";O.replace(Ae,function(Ie,qe,Ze,We,Qe){return de+=O.slice(Ye,Qe).replace(mt,function(ot){return"\\"+Fe[ot]}),qe&&(de+=`'+
((__t=(`+qe+`))==null?'':_.escape(__t))+
'`),Ze&&(de+=`'+
((__t=(`+Ze+`))==null?'':__t)+
'`),We&&(de+=`';
`+We+`
__p+='`),Ye=Qe+Ie.length,Ie}),de+=`';
`,re.variable||(de=`with(obj||{}){
`+de+`}
`),de=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+de+`return __p;
`;try{fe=new Function(re.variable||"obj","_",de)}catch(Ie){throw Ie.source=de,Ie}if(q)return fe(q,X);var ze=function(Ie){return fe.call(this,Ie,X)};return ze.source="function("+(re.variable||"obj")+`){
`+de+"}",ze},X.chain=function(O){return X(O).chain()};var ut=function(O){return this._chain?X(O).chain():O};X.mixin(X),tt(["pop","push","reverse","shift","sort","splice","unshift"],function(O){var q=p[O];X.prototype[O]=function(){var re=this._wrapped;return q.apply(re,arguments),(O=="shift"||O=="splice")&&re.length===0&&delete re[0],ut.call(this,re)}}),tt(["concat","join","slice"],function(O){var q=p[O];X.prototype[O]=function(){return ut.call(this,q.apply(this._wrapped,arguments))}}),X.extend(X.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(fk)})(Fu,Fu.exports)),Fu.exports}var vd,$0;function Hv(){if($0)return vd;$0=1;var u=ph();return vd=function(s){return u.map(s,function(a){return[a[1],a[0]]})},vd}var yd,q0;function pk(){if(q0)return yd;q0=1;var u=Hv(),s=function(a,c){this._options=c||{},a=a||[],this._coords=this._options.imBackwards===!0?u(a):a};return yd=s,yd}var wd,G0;function Zv(){return G0||(G0=1,wd={EARTHRADIUS:6371e3}),wd}var Tu={},V0;function Wv(){return V0||(V0=1,Tu.meters={toFeet:function(u){return u*3.28084},toKilometers:function(u){return u*.001},toMiles:function(u){return u*621371e-9}},Tu.sqMeters={toSqMiles:function(u){return u*386102e-12},toAcres:function(u){return u*247105e-9}},Tu.degrees={toRadians:function(u){return u*Math.PI/180}}),Tu}var xd,H0;function mk(){if(H0)return xd;H0=1;var u=ph(),s=Zv().EARTHRADIUS,a=Wv(),c={meters:function(p){return p},kilometers:function(p){return a.meters.toKilometers(p)},feet:function(p){return a.meters.toFeet(p)},miles:function(p){return a.meters.toMiles(p)}},f=function(p,_){var x=a.degrees.toRadians(p[0]-_[0]),k=a.degrees.toRadians(p[1]-_[1]),S=a.degrees.toRadians(p[1]),D=a.degrees.toRadians(_[1]),F=Math.sin(x/2),H=Math.sin(k/2),J=H*H+F*F*Math.cos(S)*Math.cos(D);return s*2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J))};return xd={_internalDistanceCalc:function(){var p=0,_,x;if(!this._calcedDistance){for(_=0,x=this._coords.length;_<x;_+=1)_>0&&(p=p+f(this._coords[_-1],this._coords[_]));this._calcedDistance=p}},distance:function(p){var _=u.extend({units:"meters"},p);if(this._internalDistanceCalc(),u.isFunction(c[_.units]))return c[_.units](this._calcedDistance)}},xd}var kd,Z0;function gk(){if(Z0)return kd;Z0=1;var u=ph(),s=Zv().EARTHRADIUS,a=Wv(),c=Hv(),f={sqmeters:function(x){return x},sqmiles:function(x){return a.sqMeters.toSqMiles(x)},acres:function(x){return a.sqMeters.toAcres(x)}},p=function(x){var k=0,S,D,F,H;for(S=0,D=x.length;S<D;S+=1)F=x[S],H=x[(S+1)%x.length],k=k+a.degrees.toRadians(H[0]-F[0])*(2+Math.sin(a.degrees.toRadians(F[1]))+Math.sin(a.degrees.toRadians(H[1])));return Math.abs(k*s*s/2)},_=function(x){var k=x[0],S=0,D=0,F=0,H,J,Q,W,Y;if(x.length===1)return x[0];for(H=0,J=x.length;H<J;H+=1)Q=x[H],W=x[(H+1)%x.length],Y=(Q[1]-k[1])*(W[0]-k[0])-(W[1]-k[1])*(Q[0]-k[0]),S=S+Y,D=D+(Q[0]+W[0]-2*k[0])*Y,F=F+(Q[1]+W[1]-2*k[1])*Y;return Y=S*3,[D/Y+k[0],F/Y+k[1]]};return kd={_internalAreaCalc:function(){this._calcedArea||(this._coords.length<3?this._calcedArea=0:this._calcedArea=p(this._coords))},_internalCenterCalc:function(){!this._calcedCenter&&this._coords.length&&(this._calcedCenter=_(this._coords))},area:function(x){var k=u.extend({units:"sqmeters"},x);if(this._internalAreaCalc(),u.isFunction(f[k.units]))return f[k.units](this._calcedArea)},center:function(){return this._internalCenterCalc(),this._options.imBackwards===!0?c(this._calcedCenter):this._calcedCenter}},kd}var W0;function _k(){if(W0)return _d;W0=1;var u=ph(),s=pk(),a=mk(),c=gk();return u.extend(s.prototype,a,c),_d.path=function(f,p){return new s(f,p)},_d}var Ld,K0;function vk(){return K0||(K0=1,Ld=_k()),Ld}var Cd,J0;function yk(){if(J0)return Cd;J0=1;var u=kp,s=vk(),a=function(p){return p<10?"0"+p.toString():p.toString()},c=function(p,_,x){var k=Math.abs(p),S=Math.floor(k),D=Math.floor((k-S)*60),F=Math.round((k-S-D/60)*3600*100)/100,H=k===p?_:x;return a(S)+"&deg; "+a(D)+"' "+a(F)+'" '+H},f=function(p){var _=u.last(p),x=s.path(u.map(p,function(D){return[D.lng,D.lat]})),k=x.distance({units:"meters"}),S=x.area({units:"sqmeters"});return{lastCoord:{dd:{x:_.lng,y:_.lat},dms:{x:c(_.lng,"E","W"),y:c(_.lat,"N","S")}},length:k,area:S}};return Cd={measure:f},Cd}var bd,Y0;function wk(){if(Y0)return bd;Y0=1;var u=function(f,p){return p||(p=document),p.querySelector(f)},s=function(f,p){return p||(p=document),Array.prototype.slice.call(p.querySelectorAll(f))},a=function(f){if(f)return f.setAttribute("style","display:none;"),f},c=function(f){if(f)return f.removeAttribute("style"),f};return bd={$:u,$$:s,hide:a,show:c},bd}var Ed,X0;function xk(){if(X0)return Ed;X0=1,Ed={rgb2hsl:u,rgb2hsv:s,rgb2hwb:a,rgb2cmyk:c,rgb2keyword:f,rgb2xyz:p,rgb2lab:_,rgb2lch:x,hsl2rgb:k,hsl2hsv:S,hsl2hwb:D,hsl2cmyk:F,hsl2keyword:H,hsv2rgb:J,hsv2hsl:Q,hsv2hwb:W,hsv2cmyk:Y,hsv2keyword:ve,hwb2rgb:$e,hwb2hsl:Oe,hwb2hsv:ye,hwb2cmyk:Ee,hwb2keyword:De,cmyk2rgb:He,cmyk2hsl:_t,cmyk2hsv:X,cmyk2hwb:tt,cmyk2keyword:lt,keyword2rgb:ce,keyword2hsl:Fe,keyword2hsv:mt,keyword2hwb:ut,keyword2cmyk:O,keyword2lab:q,keyword2xyz:re,xyz2rgb:wt,xyz2lab:Ct,xyz2lch:Jt,lab2xyz:vn,lab2rgb:zt,lab2lch:Ft,lch2lab:Re,lch2xyz:vt,lch2rgb:Ne};function u(de){var ze=de[0]/255,Ie=de[1]/255,qe=de[2]/255,Ze=Math.min(ze,Ie,qe),We=Math.max(ze,Ie,qe),Qe=We-Ze,ot,St,fn;return We==Ze?ot=0:ze==We?ot=(Ie-qe)/Qe:Ie==We?ot=2+(qe-ze)/Qe:qe==We&&(ot=4+(ze-Ie)/Qe),ot=Math.min(ot*60,360),ot<0&&(ot+=360),fn=(Ze+We)/2,We==Ze?St=0:fn<=.5?St=Qe/(We+Ze):St=Qe/(2-We-Ze),[ot,St*100,fn*100]}function s(de){var ze=de[0],Ie=de[1],qe=de[2],Ze=Math.min(ze,Ie,qe),We=Math.max(ze,Ie,qe),Qe=We-Ze,ot,St,fn;return We==0?St=0:St=Qe/We*1e3/10,We==Ze?ot=0:ze==We?ot=(Ie-qe)/Qe:Ie==We?ot=2+(qe-ze)/Qe:qe==We&&(ot=4+(ze-Ie)/Qe),ot=Math.min(ot*60,360),ot<0&&(ot+=360),fn=We/255*1e3/10,[ot,St,fn]}function a(de){var ze=de[0],Ie=de[1],We=de[2],qe=u(de)[0],Ze=1/255*Math.min(ze,Math.min(Ie,We)),We=1-1/255*Math.max(ze,Math.max(Ie,We));return[qe,Ze*100,We*100]}function c(de){var ze=de[0]/255,Ie=de[1]/255,qe=de[2]/255,Ze,We,Qe,ot;return ot=Math.min(1-ze,1-Ie,1-qe),Ze=(1-ze-ot)/(1-ot)||0,We=(1-Ie-ot)/(1-ot)||0,Qe=(1-qe-ot)/(1-ot)||0,[Ze*100,We*100,Qe*100,ot*100]}function f(de){return Ae[JSON.stringify(de)]}function p(de){var ze=de[0]/255,Ie=de[1]/255,qe=de[2]/255;ze=ze>.04045?Math.pow((ze+.055)/1.055,2.4):ze/12.92,Ie=Ie>.04045?Math.pow((Ie+.055)/1.055,2.4):Ie/12.92,qe=qe>.04045?Math.pow((qe+.055)/1.055,2.4):qe/12.92;var Ze=ze*.4124+Ie*.3576+qe*.1805,We=ze*.2126+Ie*.7152+qe*.0722,Qe=ze*.0193+Ie*.1192+qe*.9505;return[Ze*100,We*100,Qe*100]}function _(de){var ze=p(de),Ie=ze[0],qe=ze[1],Ze=ze[2],We,Qe,ot;return Ie/=95.047,qe/=100,Ze/=108.883,Ie=Ie>.008856?Math.pow(Ie,1/3):7.787*Ie+16/116,qe=qe>.008856?Math.pow(qe,1/3):7.787*qe+16/116,Ze=Ze>.008856?Math.pow(Ze,1/3):7.787*Ze+16/116,We=116*qe-16,Qe=500*(Ie-qe),ot=200*(qe-Ze),[We,Qe,ot]}function x(de){return Ft(_(de))}function k(de){var ze=de[0]/360,Ie=de[1]/100,qe=de[2]/100,Ze,We,Qe,ot,St;if(Ie==0)return St=qe*255,[St,St,St];qe<.5?We=qe*(1+Ie):We=qe+Ie-qe*Ie,Ze=2*qe-We,ot=[0,0,0];for(var fn=0;fn<3;fn++)Qe=ze+1/3*-(fn-1),Qe<0&&Qe++,Qe>1&&Qe--,6*Qe<1?St=Ze+(We-Ze)*6*Qe:2*Qe<1?St=We:3*Qe<2?St=Ze+(We-Ze)*(2/3-Qe)*6:St=Ze,ot[fn]=St*255;return ot}function S(de){var ze=de[0],Ie=de[1]/100,qe=de[2]/100,Ze,We;return qe===0?[0,0,0]:(qe*=2,Ie*=qe<=1?qe:2-qe,We=(qe+Ie)/2,Ze=2*Ie/(qe+Ie),[ze,Ze*100,We*100])}function D(de){return a(k(de))}function F(de){return c(k(de))}function H(de){return f(k(de))}function J(de){var ze=de[0]/60,Ie=de[1]/100,St=de[2]/100,qe=Math.floor(ze)%6,Ze=ze-Math.floor(ze),We=255*St*(1-Ie),Qe=255*St*(1-Ie*Ze),ot=255*St*(1-Ie*(1-Ze)),St=255*St;switch(qe){case 0:return[St,ot,We];case 1:return[Qe,St,We];case 2:return[We,St,ot];case 3:return[We,Qe,St];case 4:return[ot,We,St];case 5:return[St,We,Qe]}}function Q(de){var ze=de[0],Ie=de[1]/100,qe=de[2]/100,Ze,We;return We=(2-Ie)*qe,Ze=Ie*qe,Ze/=We<=1?We:2-We,Ze=Ze||0,We/=2,[ze,Ze*100,We*100]}function W(de){return a(J(de))}function Y(de){return c(J(de))}function ve(de){return f(J(de))}function $e(de){var ze=de[0]/360,Ie=de[1]/100,qe=de[2]/100,Ze=Ie+qe,We,Qe,ot,St;switch(Ze>1&&(Ie/=Ze,qe/=Ze),We=Math.floor(6*ze),Qe=1-qe,ot=6*ze-We,(We&1)!=0&&(ot=1-ot),St=Ie+ot*(Qe-Ie),We){default:case 6:case 0:r=Qe,g=St,b=Ie;break;case 1:r=St,g=Qe,b=Ie;break;case 2:r=Ie,g=Qe,b=St;break;case 3:r=Ie,g=St,b=Qe;break;case 4:r=St,g=Ie,b=Qe;break;case 5:r=Qe,g=Ie,b=St;break}return[r*255,g*255,b*255]}function Oe(de){return u($e(de))}function ye(de){return s($e(de))}function Ee(de){return c($e(de))}function De(de){return f($e(de))}function He(de){var ze=de[0]/100,Ie=de[1]/100,qe=de[2]/100,Ze=de[3]/100,We,Qe,ot;return We=1-Math.min(1,ze*(1-Ze)+Ze),Qe=1-Math.min(1,Ie*(1-Ze)+Ze),ot=1-Math.min(1,qe*(1-Ze)+Ze),[We*255,Qe*255,ot*255]}function _t(de){return u(He(de))}function X(de){return s(He(de))}function tt(de){return a(He(de))}function lt(de){return f(He(de))}function wt(de){var ze=de[0]/100,Ie=de[1]/100,qe=de[2]/100,Ze,We,Qe;return Ze=ze*3.2406+Ie*-1.5372+qe*-.4986,We=ze*-.9689+Ie*1.8758+qe*.0415,Qe=ze*.0557+Ie*-.204+qe*1.057,Ze=Ze>.0031308?1.055*Math.pow(Ze,1/2.4)-.055:Ze=Ze*12.92,We=We>.0031308?1.055*Math.pow(We,1/2.4)-.055:We=We*12.92,Qe=Qe>.0031308?1.055*Math.pow(Qe,1/2.4)-.055:Qe=Qe*12.92,Ze=Math.min(Math.max(0,Ze),1),We=Math.min(Math.max(0,We),1),Qe=Math.min(Math.max(0,Qe),1),[Ze*255,We*255,Qe*255]}function Ct(de){var ze=de[0],Ie=de[1],qe=de[2],Ze,We,Qe;return ze/=95.047,Ie/=100,qe/=108.883,ze=ze>.008856?Math.pow(ze,1/3):7.787*ze+16/116,Ie=Ie>.008856?Math.pow(Ie,1/3):7.787*Ie+16/116,qe=qe>.008856?Math.pow(qe,1/3):7.787*qe+16/116,Ze=116*Ie-16,We=500*(ze-Ie),Qe=200*(Ie-qe),[Ze,We,Qe]}function Jt(de){return Ft(Ct(de))}function vn(de){var ze=de[0],Ie=de[1],qe=de[2],Ze,We,Qe,ot;return ze<=8?(We=ze*100/903.3,ot=7.787*(We/100)+16/116):(We=100*Math.pow((ze+16)/116,3),ot=Math.pow(We/100,1/3)),Ze=Ze/95.047<=.008856?Ze=95.047*(Ie/500+ot-16/116)/7.787:95.047*Math.pow(Ie/500+ot,3),Qe=Qe/108.883<=.008859?Qe=108.883*(ot-qe/200-16/116)/7.787:108.883*Math.pow(ot-qe/200,3),[Ze,We,Qe]}function Ft(de){var ze=de[0],Ie=de[1],qe=de[2],Ze,We,Qe;return Ze=Math.atan2(qe,Ie),We=Ze*360/2/Math.PI,We<0&&(We+=360),Qe=Math.sqrt(Ie*Ie+qe*qe),[ze,Qe,We]}function zt(de){return wt(vn(de))}function Re(de){var ze=de[0],Ie=de[1],qe=de[2],Ze,We,Qe;return Qe=qe/360*2*Math.PI,Ze=Ie*Math.cos(Qe),We=Ie*Math.sin(Qe),[ze,Ze,We]}function vt(de){return vn(Re(de))}function Ne(de){return zt(Re(de))}function ce(de){return fe[de]}function Fe(de){return u(ce(de))}function mt(de){return s(ce(de))}function ut(de){return a(ce(de))}function O(de){return c(ce(de))}function q(de){return _(ce(de))}function re(de){return p(ce(de))}var fe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ae={};for(var Ye in fe)Ae[JSON.stringify(fe[Ye])]=Ye;return Ed}var Md,Q0;function kk(){if(Q0)return Md;Q0=1;var u=xk(),s=function(){return new _};for(var a in u){s[a+"Raw"]=(function(x){return function(k){return typeof k=="number"&&(k=Array.prototype.slice.call(arguments)),u[x](k)}})(a);var c=/(\w+)2(\w+)/.exec(a),f=c[1],p=c[2];s[f]=s[f]||{},s[f][p]=s[a]=(function(x){return function(k){typeof k=="number"&&(k=Array.prototype.slice.call(arguments));var S=u[x](k);if(typeof S=="string"||S===void 0)return S;for(var D=0;D<S.length;D++)S[D]=Math.round(S[D]);return S}})(a)}var _=function(){this.convs={}};return _.prototype.routeSpace=function(x,k){var S=k[0];return S===void 0?this.getValues(x):(typeof S=="number"&&(S=Array.prototype.slice.call(k)),this.setValues(x,S))},_.prototype.setValues=function(x,k){return this.space=x,this.convs={},this.convs[x]=k,this},_.prototype.getValues=function(x){var k=this.convs[x];if(!k){var S=this.space,D=this.convs[S];k=s[S][x](D),this.convs[x]=k}return k},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(x){_.prototype[x]=function(k){return this.routeSpace(x,arguments)}}),Md=s,Md}var Sd,eg;function Lk(){return eg||(eg=1,Sd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Sd}var Pd,tg;function Ck(){if(tg)return Pd;tg=1;var u=Lk();Pd={getRgba:s,getHsla:a,getRgb:f,getHsl:p,getHwb:c,getAlpha:_,hexString:x,rgbString:k,rgbaString:S,percentString:D,percentaString:F,hslString:H,hslaString:J,hwbString:Q,keyword:W};function s(ye){if(ye){var Ee=/^#([a-fA-F0-9]{3})$/,De=/^#([a-fA-F0-9]{6})$/,He=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,_t=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,X=/(\D+)/,tt=[0,0,0],lt=1,wt=ye.match(Ee);if(wt){wt=wt[1];for(var Ct=0;Ct<tt.length;Ct++)tt[Ct]=parseInt(wt[Ct]+wt[Ct],16)}else if(wt=ye.match(De)){wt=wt[1];for(var Ct=0;Ct<tt.length;Ct++)tt[Ct]=parseInt(wt.slice(Ct*2,Ct*2+2),16)}else if(wt=ye.match(He)){for(var Ct=0;Ct<tt.length;Ct++)tt[Ct]=parseInt(wt[Ct+1]);lt=parseFloat(wt[4])}else if(wt=ye.match(_t)){for(var Ct=0;Ct<tt.length;Ct++)tt[Ct]=Math.round(parseFloat(wt[Ct+1])*2.55);lt=parseFloat(wt[4])}else if(wt=ye.match(X)){if(wt[1]=="transparent")return[0,0,0,0];if(tt=u[wt[1]],!tt)return}for(var Ct=0;Ct<tt.length;Ct++)tt[Ct]=Y(tt[Ct],0,255);return!lt&&lt!=0?lt=1:lt=Y(lt,0,1),tt[3]=lt,tt}}function a(ye){if(ye){var Ee=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,De=ye.match(Ee);if(De){var He=parseFloat(De[4]),_t=Y(parseInt(De[1]),0,360),X=Y(parseFloat(De[2]),0,100),tt=Y(parseFloat(De[3]),0,100),lt=Y(isNaN(He)?1:He,0,1);return[_t,X,tt,lt]}}}function c(ye){if(ye){var Ee=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,De=ye.match(Ee);if(De){var He=parseFloat(De[4]),_t=Y(parseInt(De[1]),0,360),X=Y(parseFloat(De[2]),0,100),tt=Y(parseFloat(De[3]),0,100),lt=Y(isNaN(He)?1:He,0,1);return[_t,X,tt,lt]}}}function f(ye){var Ee=s(ye);return Ee&&Ee.slice(0,3)}function p(ye){var Ee=a(ye);return Ee&&Ee.slice(0,3)}function _(ye){var Ee=s(ye);if(Ee)return Ee[3];if(Ee=a(ye))return Ee[3];if(Ee=c(ye))return Ee[3]}function x(ye){return"#"+ve(ye[0])+ve(ye[1])+ve(ye[2])}function k(ye,Ee){return Ee<1||ye[3]&&ye[3]<1?S(ye,Ee):"rgb("+ye[0]+", "+ye[1]+", "+ye[2]+")"}function S(ye,Ee){return Ee===void 0&&(Ee=ye[3]!==void 0?ye[3]:1),"rgba("+ye[0]+", "+ye[1]+", "+ye[2]+", "+Ee+")"}function D(ye,Ee){if(Ee<1||ye[3]&&ye[3]<1)return F(ye,Ee);var De=Math.round(ye[0]/255*100),He=Math.round(ye[1]/255*100),_t=Math.round(ye[2]/255*100);return"rgb("+De+"%, "+He+"%, "+_t+"%)"}function F(ye,Ee){var De=Math.round(ye[0]/255*100),He=Math.round(ye[1]/255*100),_t=Math.round(ye[2]/255*100);return"rgba("+De+"%, "+He+"%, "+_t+"%, "+(Ee||ye[3]||1)+")"}function H(ye,Ee){return Ee<1||ye[3]&&ye[3]<1?J(ye,Ee):"hsl("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%)"}function J(ye,Ee){return Ee===void 0&&(Ee=ye[3]!==void 0?ye[3]:1),"hsla("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%, "+Ee+")"}function Q(ye,Ee){return Ee===void 0&&(Ee=ye[3]!==void 0?ye[3]:1),"hwb("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%"+(Ee!==void 0&&Ee!==1?", "+Ee:"")+")"}function W(ye){return $e[ye.slice(0,3)]}function Y(ye,Ee,De){return Math.min(Math.max(Ee,ye),De)}function ve(ye){var Ee=ye.toString(16).toUpperCase();return Ee.length<2?"0"+Ee:Ee}var $e={};for(var Oe in u)$e[u[Oe]]=Oe;return Pd}var Bd,ng;function bk(){if(ng)return Bd;ng=1;var u=kk(),s=Ck(),a=function(c){if(c instanceof a)return c;if(!(this instanceof a))return new a(c);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},typeof c=="string"){var f=s.getRgba(c);if(f)this.setValues("rgb",f);else if(f=s.getHsla(c))this.setValues("hsl",f);else if(f=s.getHwb(c))this.setValues("hwb",f);else throw new Error('Unable to parse color from string "'+c+'"')}else if(typeof c=="object"){var f=c;if(f.r!==void 0||f.red!==void 0)this.setValues("rgb",f);else if(f.l!==void 0||f.lightness!==void 0)this.setValues("hsl",f);else if(f.v!==void 0||f.value!==void 0)this.setValues("hsv",f);else if(f.w!==void 0||f.whiteness!==void 0)this.setValues("hwb",f);else if(f.c!==void 0||f.cyan!==void 0)this.setValues("cmyk",f);else throw new Error("Unable to parse color from object "+JSON.stringify(c))}};return a.prototype={rgb:function(c){return this.setSpace("rgb",arguments)},hsl:function(c){return this.setSpace("hsl",arguments)},hsv:function(c){return this.setSpace("hsv",arguments)},hwb:function(c){return this.setSpace("hwb",arguments)},cmyk:function(c){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return this.values.alpha!==1?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var c=this.values.rgb;return c.concat([this.values.alpha])},hslaArray:function(){var c=this.values.hsl;return c.concat([this.values.alpha])},alpha:function(c){return c===void 0?this.values.alpha:(this.setValues("alpha",c),this)},red:function(c){return this.setChannel("rgb",0,c)},green:function(c){return this.setChannel("rgb",1,c)},blue:function(c){return this.setChannel("rgb",2,c)},hue:function(c){return this.setChannel("hsl",0,c)},saturation:function(c){return this.setChannel("hsl",1,c)},lightness:function(c){return this.setChannel("hsl",2,c)},saturationv:function(c){return this.setChannel("hsv",1,c)},whiteness:function(c){return this.setChannel("hwb",1,c)},blackness:function(c){return this.setChannel("hwb",2,c)},value:function(c){return this.setChannel("hsv",2,c)},cyan:function(c){return this.setChannel("cmyk",0,c)},magenta:function(c){return this.setChannel("cmyk",1,c)},yellow:function(c){return this.setChannel("cmyk",2,c)},black:function(c){return this.setChannel("cmyk",3,c)},hexString:function(){return s.hexString(this.values.rgb)},rgbString:function(){return s.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return s.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return s.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return s.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return s.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return s.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return s.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var c=this.values.rgb,f=[],p=0;p<c.length;p++){var _=c[p]/255;f[p]=_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4)}return .2126*f[0]+.7152*f[1]+.0722*f[2]},contrast:function(c){var f=this.luminosity(),p=c.luminosity();return f>p?(f+.05)/(p+.05):(p+.05)/(f+.05)},level:function(c){var f=this.contrast(c);return f>=7.1?"AAA":f>=4.5?"AA":""},dark:function(){var c=this.values.rgb,f=(c[0]*299+c[1]*587+c[2]*114)/1e3;return f<128},light:function(){return!this.dark()},negate:function(){for(var c=[],f=0;f<3;f++)c[f]=255-this.values.rgb[f];return this.setValues("rgb",c),this},lighten:function(c){return this.values.hsl[2]+=this.values.hsl[2]*c,this.setValues("hsl",this.values.hsl),this},darken:function(c){return this.values.hsl[2]-=this.values.hsl[2]*c,this.setValues("hsl",this.values.hsl),this},saturate:function(c){return this.values.hsl[1]+=this.values.hsl[1]*c,this.setValues("hsl",this.values.hsl),this},desaturate:function(c){return this.values.hsl[1]-=this.values.hsl[1]*c,this.setValues("hsl",this.values.hsl),this},whiten:function(c){return this.values.hwb[1]+=this.values.hwb[1]*c,this.setValues("hwb",this.values.hwb),this},blacken:function(c){return this.values.hwb[2]+=this.values.hwb[2]*c,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var c=this.values.rgb,f=c[0]*.3+c[1]*.59+c[2]*.11;return this.setValues("rgb",[f,f,f]),this},clearer:function(c){return this.setValues("alpha",this.values.alpha-this.values.alpha*c),this},opaquer:function(c){return this.setValues("alpha",this.values.alpha+this.values.alpha*c),this},rotate:function(c){var f=this.values.hsl[0];return f=(f+c)%360,f=f<0?360+f:f,this.values.hsl[0]=f,this.setValues("hsl",this.values.hsl),this},mix:function(c,f){f=1-(f??.5);for(var p=f*2-1,_=this.alpha()-c.alpha(),x=((p*_==-1?p:(p+_)/(1+p*_))+1)/2,k=1-x,S=this.rgbArray(),D=c.rgbArray(),F=0;F<S.length;F++)S[F]=S[F]*x+D[F]*k;this.setValues("rgb",S);var H=this.alpha()*f+c.alpha()*(1-f);return this.setValues("alpha",H),this},toJSON:function(){return this.rgb()},clone:function(){return new a(this.rgb())}},a.prototype.getValues=function(c){for(var f={},p=0;p<c.length;p++)f[c.charAt(p)]=this.values[c][p];return this.values.alpha!=1&&(f.a=this.values.alpha),f},a.prototype.setValues=function(c,f){var p={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},_={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},x=1;if(c=="alpha")x=f;else if(f.length)this.values[c]=f.slice(0,c.length),x=f[c.length];else if(f[c.charAt(0)]!==void 0){for(var k=0;k<c.length;k++)this.values[c][k]=f[c.charAt(k)];x=f.a}else if(f[p[c][0]]!==void 0){for(var S=p[c],k=0;k<c.length;k++)this.values[c][k]=f[S[k]];x=f.alpha}if(this.values.alpha=Math.max(0,Math.min(1,x!==void 0?x:this.values.alpha)),c!="alpha"){for(var k=0;k<c.length;k++){var D=Math.max(0,Math.min(_[c][k],this.values[c][k]));this.values[c][k]=Math.round(D)}for(var F in p){F!=c&&(this.values[F]=u[c][F](this.values[c]));for(var k=0;k<F.length;k++){var D=Math.max(0,Math.min(_[F][k],this.values[F][k]));this.values[F][k]=Math.round(D)}}return!0}},a.prototype.setSpace=function(c,f){var p=f[0];return p===void 0?this.getValues(c):(typeof p=="number"&&(p=Array.prototype.slice.call(f)),this.setValues(c,p),this)},a.prototype.setChannel=function(c,f,p){return p===void 0?this.values[c][f]:(this.values[c][f]=p,this.setValues(c,this.values[c]),this)},Bd=a,Bd}var Td,rg;function Ek(){if(rg)return Td;rg=1;var u=kp,s=bk(),a=function(c){this.setOptions(c)};return a.DEFAULTS={activeColor:"#ABE67E",completedColor:"#C8F2BE"},u.extend(a.prototype,{setOptions:function(c){return this._options=u.extend({},a.DEFAULTS,this._options,c),this},getSymbol:function(c){var f={measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:s(this._options.activeColor).darken(.15),fillOpacity:.7,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}};return f[c]}}),Td=a,Td}const Mk={},Sk=Object.freeze(Object.defineProperty({__proto__:null,default:Mk},Symbol.toStringTag,{value:"Module"})),wf=xf(Sk);var Ad={exports:{}},Dd,ig;function Pk(){if(ig)return Dd;ig=1;var u=(function(){function a(p){return Object.prototype.toString.call(p).slice(8,-1).toLowerCase()}function c(p,_){for(var x=[];_>0;x[--_]=p);return x.join("")}var f=function(){return f.cache.hasOwnProperty(arguments[0])||(f.cache[arguments[0]]=f.parse(arguments[0])),f.format.call(null,f.cache[arguments[0]],arguments)};return f.object_stringify=function(p,_,x,k){var S="";if(p!=null)switch(typeof p){case"function":return"[Function"+(p.name?": "+p.name:"")+"]";case"object":if(p instanceof Error)return"["+p.toString()+"]";if(_>=x)return"[Object]";if(k&&(k=k.slice(0),k.push(p)),p.length!=null){S+="[";var D=[];for(var F in p)k&&k.indexOf(p[F])>=0?D.push("[Circular]"):D.push(f.object_stringify(p[F],_+1,x,k));S+=D.join(", ")+"]"}else{if("getMonth"in p)return"Date("+p+")";S+="{";var D=[];for(var H in p)p.hasOwnProperty(H)&&(k&&k.indexOf(p[H])>=0?D.push(H+": [Circular]"):D.push(H+": "+f.object_stringify(p[H],_+1,x,k)));S+=D.join(", ")+"}"}return S;case"string":return'"'+p+'"'}return""+p},f.format=function(p,_){var x=1,k=p.length,S="",D,F=[],H,J,Q,W,Y,ve;for(H=0;H<k;H++)if(S=a(p[H]),S==="string")F.push(p[H]);else if(S==="array"){if(Q=p[H],Q[2])for(D=_[x],J=0;J<Q[2].length;J++){if(!D.hasOwnProperty(Q[2][J]))throw new Error(u('[sprintf] property "%s" does not exist',Q[2][J]));D=D[Q[2][J]]}else Q[1]?D=_[Q[1]]:D=_[x++];if(/[^sO]/.test(Q[8])&&a(D)!="number")throw new Error(u('[sprintf] expecting number but found %s "'+D+'"',a(D)));switch(Q[8]){case"b":D=D.toString(2);break;case"c":D=String.fromCharCode(D);break;case"d":D=parseInt(D,10);break;case"e":D=Q[7]?D.toExponential(Q[7]):D.toExponential();break;case"f":D=Q[7]?parseFloat(D).toFixed(Q[7]):parseFloat(D);break;case"O":D=f.object_stringify(D,0,parseInt(Q[7])||5);break;case"o":D=D.toString(8);break;case"s":D=(D=String(D))&&Q[7]?D.substring(0,Q[7]):D;break;case"u":D=Math.abs(D);break;case"x":D=D.toString(16);break;case"X":D=D.toString(16).toUpperCase();break}D=/[def]/.test(Q[8])&&Q[3]&&D>=0?"+"+D:D,Y=Q[4]?Q[4]=="0"?"0":Q[4].charAt(1):" ",ve=Q[6]-String(D).length,W=Q[6]?c(Y,ve):"",F.push(Q[5]?D+W:W+D)}return F.join("")},f.cache={},f.parse=function(p){for(var _=p,x=[],k=[],S=0;_;){if((x=/^[^\x25]+/.exec(_))!==null)k.push(x[0]);else if((x=/^\x25{2}/.exec(_))!==null)k.push("%");else if((x=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosOuxX])/.exec(_))!==null){if(x[2]){S|=1;var D=[],F=x[2],H=[];if((H=/^([a-z_][a-z_\d]*)/i.exec(F))!==null)for(D.push(H[1]);(F=F.substring(H[0].length))!=="";)if((H=/^\.([a-z_][a-z_\d]*)/i.exec(F))!==null)D.push(H[1]);else if((H=/^\[(\d+)\]/.exec(F))!==null)D.push(H[1]);else throw new Error("[sprintf] "+F);else throw new Error("[sprintf] "+F);x[2]=D}else S|=2;if(S===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");k.push(x)}else throw new Error("[sprintf] "+_);_=_.substring(x[0].length)}return k},f})(),s=function(a,c){var f=c.slice();return f.unshift(a),u.apply(null,f)};return Dd=u,u.sprintf=u,u.vsprintf=s,Dd}var sg;function Bk(){if(sg)return Ad.exports;sg=1;var u={};/**
 * @author  John Resig <jeresig@gmail.com>
 * @author  Originally by Marcus Spiegel <marcus.spiegel@gmail.com>
 * @link    https://github.com/jeresig/i18n-node
 * @license http://opensource.org/licenses/MIT
 *
 * @version 0.4.7
 */var s=Pk().vsprintf,a=wf,c=wf;function f(_,x,k){return _.hasOwnProperty(x)?_[x]:typeof x=="string"?f(_,x.split("."),k):x.length===1&&k!==void 0?_[x[0]]=k:x.length===0?_:_.hasOwnProperty(x[0])?f(_[x[0]],x.slice(1),k):_[x.join(".")]=x.join(".")}var p=Ad.exports=function(_){var x=this;this.devMode=!1;for(var k in _)this[k]=_[k];typeof this.register=="object"&&p.resMethods.forEach(function(S){x.register[S]=x[S].bind(x)}),_.locales&&_.locales.forEach&&(this.locales={},_.locales.forEach(function(S){x.readFile(S)}),this.defaultLocale=_.locales[0]),this.setLocale(this.defaultLocale),this.locales[this.defaultLocale]||console.error("Not a valid default locale."),this.request&&(this.subdomain&&this.setLocaleFromSubdomain(this.request),this.query!==!1&&this.setLocaleFromQuery(this.request),this.session!==!1&&this.setLocaleFromSessionVar(this.request),this.prefLocale=this.preferredLocale(),this.prefLocale!==!1&&this.prefLocale!==this.locale&&this.setLocale(this.prefLocale))};return p.version="0.4.7",p.localeCache={},p.resMethods=["__","__n","getLocale","isPreferredLocale"],p.expressBind=function(_,x){_&&(_.use(function(k,S,D){x.request=k,k.i18n=new p(x),S.locals&&p.registerMethods(S.locals,k),D()}),_.dynamicHelpers&&_.dynamicHelpers(p.registerMethods({})))},p.registerMethods=function(_,x){return p.resMethods.forEach(function(k){x?_[k]=x.i18n[k].bind(x.i18n):_[k]=function(S){return S.i18n[k].bind(S.i18n)}}),_},p.prototype={defaultLocale:"en",extension:".js",directory:"./locales",cookieName:"lang",sessionVarName:"locale",indent:"	",parse:JSON.parse,dump:function(_,x){return JSON.stringify(_,null,x)},__:function(){var _=this.translate(this.locale,arguments[0]);return arguments.length>1&&(_=s(_,Array.prototype.slice.call(arguments,1))),_},__n:function(_,x,k){var S;if(typeof x=="number"){var D=_,F=x;S=this.translate(this.locale,D),S=s(parseInt(F,10)>1?S.other:S.one,Array.prototype.slice.call(arguments,1))}else{var H=_,J=x,F=k;S=this.translate(this.locale,H,J),S=s(parseInt(F,10)>1?S.other:S.one,[F]),arguments.length>3&&(S=s(S,Array.prototype.slice.call(arguments,3)))}return S},setLocale:function(_){if(_)return this.locales[_]||(this.devMode&&console.warn("Locale ("+_+") not found."),_=this.defaultLocale),this.locale=_},getLocale:function(){return this.locale},isPreferredLocale:function(){return!this.prefLocale||this.prefLocale===this.getLocale()},setLocaleFromSessionVar:function(_){if(_=_||this.request,!(!_||!_.session||!_.session[this.sessionVarName])){var x=_.session[this.sessionVarName];this.locales[x]&&(this.devMode&&console.log("Overriding locale from query: "+x),this.setLocale(x))}},setLocaleFromQuery:function(_){if(_=_||this.request,!(!_||!_.query||!_.query.lang)){var x=(_.query.lang+"").toLowerCase();this.locales[x]&&(this.devMode&&console.log("Overriding locale from query: "+x),this.setLocale(x))}},setLocaleFromSubdomain:function(_){_=_||this.request,!(!_||!_.headers||!_.headers.host)&&/^([^.]+)/.test(_.headers.host)&&this.locales[RegExp.$1]&&(this.devMode&&console.log("Overriding locale from host: "+RegExp.$1),this.setLocale(RegExp.$1))},setLocaleFromCookie:function(_){if(_=_||this.request,!(!_||!_.cookies||!this.cookieName||!_.cookies[this.cookieName])){var x=_.cookies[this.cookieName].toLowerCase();this.locales[x]&&(this.devMode&&console.log("Overriding locale from cookie: "+x),this.setLocale(x))}},setLocaleFromEnvironmentVariable:function(){if(u.LANG){var _=u.LANG.split("_")[0];this.locales[_]&&(this.devMode&&console.log("Overriding locale from environment variable: "+_),this.setLocale(_))}},preferredLocale:function(_){if(_=_||this.request,!(!_||!_.headers)){for(var x=_.headers["accept-language"]||"",k=/(^|,\s*)([a-z0-9-]+)/gi,S=this,D;!D&&(match=k.exec(x));){var F=match[2].toLowerCase(),H=F.split("-");S.locales[F]?D=F:H.length>1&&S.locales[H[0]]&&(D=H[0])}return D||this.defaultLocale}},translate:function(_,x,k){return(!_||!this.locales[_])&&(this.devMode&&console.warn("WARN: No locale found. Using the default ("+this.defaultLocale+") as current locale"),_=this.defaultLocale,this.initLocale(_,{})),this.locales[_][x]||this.devMode&&(f(this.locales[_],x,k?{one:x,other:k}:void 0),this.writeFile(_)),f(this.locales[_],x,k?{one:x,other:k}:void 0)},readFile:function(_){var x=this.locateFile(_);if(!this.devMode&&p.localeCache[x]){this.initLocale(_,p.localeCache[x]);return}try{var k=a.readFileSync(x),S;if(typeof this.base=="function"){var D;try{D=this.base(_)}catch(J){console.error("base function threw exception for locale %s",_,J)}if(typeof D=="string")try{S=this.parse(a.readFileSync(this.locateFile(D)))}catch(J){console.error("unable to read or parse base file %s for locale %s",D,_,J)}}try{var F=this.parse(k);if(S){for(var H in F)S[H]=F[H];F=S}this.initLocale(_,F)}catch(J){console.error("unable to parse locales from file (maybe "+x+" is empty or invalid "+this.extension+"?): ",J)}}catch{a.existsSync(x)||this.writeFile(_)}},writeFile:function(_){if(!this.devMode){this.initLocale(_,{});return}try{a.lstatSync(this.directory)}catch{this.devMode&&console.log("creating locales dir in: "+this.directory),a.mkdirSync(this.directory,493)}this.initLocale(_,{});try{var x=this.locateFile(_),k=x+".tmp";a.writeFileSync(k,this.dump(this.locales[_],this.indent),"utf8"),a.statSync(k).isFile()?a.renameSync(k,x):console.error("unable to write locales to file (either "+k+" or "+x+" are not writeable?): ")}catch(S){console.error("unexpected error writing files (either "+k+" or "+x+" are not writeable?): ",S)}},locateFile:function(_){return c.normalize(this.directory+"/"+_+this.extension)},initLocale:function(_,x){if(!this.locales[_]&&(this.locales[_]=x,!this.devMode)){var k=this.locateFile(_);p.localeCache[k]||(p.localeCache[k]=x)}}},Ad.exports}var Od,ag;function Tk(){return ag||(ag=1,Od=Bk()),Od}var Rd,og;function Ak(){return og||(og=1,Rd={measure:"Medir",measureDistancesAndAreas:"Medeix distancies i àreas",createNewMeasurement:"Crear nova medicio",startCreating:"Començi a crear la medicio afegint punts al mapa",finishMeasurement:"Acabar la medició",lastPoint:"Últim punt",area:"Área",perimeter:"Perómetre",pointLocation:"Localizació del punt",areaMeasurement:"Medició d'área",linearMeasurement:"Medició lineal",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en aquesta área",centerOnLine:"Centrar en aquesta línia",centerOnLocation:"Centrar en aquesta localizació",cancel:"Cancel·lar",delete:"Eliminar",acres:"Acres",feet:"Peus",kilometers:"Quilòmetres",hectares:"Hectàreas",meters:"Metros",miles:"Milles",sqfeet:"Peus cuadrats",sqmeters:"Metres cuadrats",sqmiles:"Milles cuadrades",decPoint:".",thousandsSep:" "}),Rd}var Id,lg;function Dk(){return lg||(lg=1,Id={measure:"测量",measureDistancesAndAreas:"同时测量距离和面积",createNewMeasurement:"开始一次新的测量",startCreating:"点击地图加点以开始创建测量",finishMeasurement:"完成测量",lastPoint:"最后点的坐标",area:"面积",perimeter:"周长",pointLocation:"点的坐标",areaMeasurement:"面积测量",linearMeasurement:"距离测量",pathDistance:"路径长度",centerOnArea:"该面积居中",centerOnLine:"该线段居中",centerOnLocation:"该位置居中",cancel:"取消",delete:"删除",acres:"公亩",feet:"英尺",kilometers:"公里",hectares:"公顷",meters:"米",miles:"英里",sqfeet:"平方英尺",sqmeters:"平方米",sqmiles:"平方英里",decPoint:".",thousandsSep:","}),Id}var Fd,ug;function Ok(){return ug||(ug=1,Fd={measure:"Mål",measureDistancesAndAreas:"Mål afstande og arealer",createNewMeasurement:"Lav en ny måling",startCreating:"Begynd målingen ved at tilføje punkter på kortet",finishMeasurement:"Afslut måling",lastPoint:"Sidste punkt",area:"Areal",perimeter:"Omkreds",pointLocation:"Punkt",areaMeasurement:"Areal",linearMeasurement:"Linje",pathDistance:"Sti afstand",centerOnArea:"Centrér dette område",centerOnLine:"Centrér denne linje",centerOnLocation:"Centrér dette punkt",cancel:"Annuller",delete:"Slet",acres:"acre",feet:"fod",kilometers:"km",hectares:"ha",meters:"m",miles:"mil",sqfeet:"kvadratfod",sqmeters:"m²",sqmiles:"kvadratmil",decPoint:",",thousandsSep:"."}),Fd}var Nd,cg;function Rk(){return cg||(cg=1,Nd={measure:"Messung",measureDistancesAndAreas:"Messung von Abständen und Flächen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Führen Sie die Messung durch, indem Sie der Karte Punkte hinzufügen.",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Rand",pointLocation:"Lage des Punkts",areaMeasurement:"Gemessene Fläche",linearMeasurement:"Gemessener Abstand",pathDistance:"Abstand entlang des Pfads",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diesen Linienzug zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:",",thousandsSep:"."}),Nd}var zd,hg;function Ik(){return hg||(hg=1,zd={measure:"Messung",measureDistancesAndAreas:"Abstände und Flächen messen",createNewMeasurement:"Eine neue Messung durchführen",startCreating:"Messen sie, indem Sie der Karte Punkte hinzufügen",finishMeasurement:"Messung beenden",lastPoint:"Letzter Punkt",area:"Fläche",perimeter:"Umfang",pointLocation:"Lage des Punkts",areaMeasurement:"Fläche",linearMeasurement:"Abstand",pathDistance:"Umfang",centerOnArea:"Auf diese Fläche zentrieren",centerOnLine:"Auf diese Linie zentrieren",centerOnLocation:"Auf diesen Ort zentrieren",cancel:"Abbrechen",delete:"Löschen",acres:"Morgen",feet:"Fuß",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Meilen",sqfeet:"Quadratfuß",sqmeters:"Quadratmeter",sqmiles:"Quadratmeilen",decPoint:".",thousandsSep:"'"}),zd}var jd,dg;function Fk(){return dg||(dg=1,jd={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Center on this area",centerOnLine:"Center on this line",centerOnLocation:"Center on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}),jd}var Ud,fg;function Nk(){return fg||(fg=1,Ud={measure:"Measure",measureDistancesAndAreas:"Measure distances and areas",createNewMeasurement:"Create a new measurement",startCreating:"Start creating a measurement by adding points to the map",finishMeasurement:"Finish measurement",lastPoint:"Last point",area:"Area",perimeter:"Perimeter",pointLocation:"Point location",areaMeasurement:"Area measurement",linearMeasurement:"Linear measurement",pathDistance:"Path distance",centerOnArea:"Centre on this area",centerOnLine:"Centre on this line",centerOnLocation:"Centre on this location",cancel:"Cancel",delete:"Delete",acres:"Acres",feet:"Feet",kilometers:"Kilometres",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles",decPoint:".",thousandsSep:","}),Ud}var $d,pg;function zk(){return pg||(pg=1,$d={measure:"Medición",measureDistancesAndAreas:"Mida distancias y áreas",createNewMeasurement:"Crear nueva medición",startCreating:"Empiece a crear la medición añadiendo puntos al mapa",finishMeasurement:"Terminar medición",lastPoint:"Último punto",area:"Área",perimeter:"Perímetro",pointLocation:"Localización del punto",areaMeasurement:"Medición de área",linearMeasurement:"Medición linear",pathDistance:"Distancia de ruta",centerOnArea:"Centrar en este área",centerOnLine:"Centrar en esta línea",centerOnLocation:"Centrar en esta localización",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pies",kilometers:"Kilómetros",hectares:"Hectáreas",meters:"Metros",miles:"Millas",sqfeet:"Pies cuadrados",sqmeters:"Metros cuadrados",sqmiles:"Millas cuadradas",decPoint:".",thousandsSep:" "}),$d}var qd,mg;function jk(){return mg||(mg=1,qd={measure:"اندازه گیری",measureDistancesAndAreas:"اندازه گیری فاصله و مساحت",createNewMeasurement:"ثبت اندازه گیری جدید",startCreating:"برای ثبت اندازه گیری جدید نقاطی را به نقشه اضافه کنید.",finishMeasurement:"پایان اندازه گیری",lastPoint:"آخرین نقطه",area:"مساحت",perimeter:"محیط",pointLocation:"مکان نقطه",areaMeasurement:"اندازه گیری مساحت",linearMeasurement:"اندازه گیری خطی",pathDistance:"فاصله مسیر",centerOnArea:"مرکز این سطح",centerOnLine:"مرکز این خط",centerOnLocation:"مرکز این مکان",cancel:"لغو",delete:"حذف",acres:"ایکر",feet:"پا",kilometers:"کیلومتر",hectares:"هکتار",meters:"متر",miles:"مایل",sqfeet:"پا مربع",sqmeters:"متر مربع",sqmiles:"مایل مربع",decPoint:"/",thousandsSep:","}),qd}var Gd,gg;function Uk(){return gg||(gg=1,Gd={measure:"Sukat",measureDistancesAndAreas:"Kalkulahin ang tamang distansya at sukat",createNewMeasurement:"Lumikha ng isang bagong pagsukat",startCreating:"Simulan ang paglikha ng isang pagsukat sa pamamagitan ng pagdaragdag ng mga puntos sa mapa",finishMeasurement:"Tapusin ang pagsukat",lastPoint:"Huling punto sa mapa",area:"Sukat",perimeter:"Palibot",pointLocation:"Lokasyon ng punto",areaMeasurement:"Kabuuang sukat",linearMeasurement:"Pagsukat ng guhit",pathDistance:"Distansya ng daanan",centerOnArea:"I-sentro sa lugar na ito",centerOnLine:"I-sentro sa linya na ito",centerOnLocation:"I-sentro sa lokasyong ito",cancel:"Kanselahin",delete:"Tanggalin",acres:"Acres",feet:"Talampakan",kilometers:"Kilometro",hectares:"Hektarya",meters:"Metro",miles:"Milya",sqfeet:"Talampakang Kwadrado",sqmeters:"Metro Kwadrado",sqmiles:"Milya Kwadrado",decPoint:".",thousandsSep:","}),Gd}var Vd,_g;function $k(){return _g||(_g=1,Vd={measure:"Mesure",measureDistancesAndAreas:"Mesurer les distances et superficies",createNewMeasurement:"Créer une nouvelle mesure",startCreating:"Débuter la création d'une nouvelle mesure en ajoutant des points sur la carte",finishMeasurement:"Finir la mesure",lastPoint:"Dernier point",area:"Superficie",perimeter:"Périmètre",pointLocation:"Placement du point",areaMeasurement:"Mesure de superficie",linearMeasurement:"Mesure linéaire",pathDistance:"Distance du chemin",centerOnArea:"Centrer sur cette zone",centerOnLine:"Centrer sur cette ligne",centerOnLocation:"Centrer à cet endroit",cancel:"Annuler",delete:"Supprimer",acres:"Acres",feet:"Pieds",kilometers:"Kilomètres",hectares:"Hectares",meters:"Mètres",miles:"Miles",sqfeet:"Pieds carrés",sqmeters:"Mètres carrés",sqmiles:"Miles carrés",decPoint:",",thousandsSep:" "}),Vd}var Hd,vg;function qk(){return vg||(vg=1,Hd={measure:"Misura",measureDistancesAndAreas:"Misura distanze e aree",createNewMeasurement:"Crea una nuova misurazione",startCreating:"Comincia a creare una misurazione aggiungendo punti alla mappa",finishMeasurement:"Misurazione conclusa",lastPoint:"Ultimo punto",area:"Area",perimeter:"Perimetro",pointLocation:"Posizione punto",areaMeasurement:"Misura area",linearMeasurement:"Misura lineare",pathDistance:"Distanza percorso",centerOnArea:"Centra su questa area",centerOnLine:"Centra su questa linea",centerOnLocation:"Centra su questa posizione",cancel:"Annulla",delete:"Cancella",acres:"Acri",feet:"Piedi",kilometers:"Chilometri",hectares:"Ettari",meters:"Metri",miles:"Miglia",sqfeet:"Piedi quadri",sqmeters:"Metri quadri",sqmiles:"Miglia quadre",decPoint:".",thousandsSep:","}),Hd}var Zd,yg;function Gk(){return yg||(yg=1,Zd={measure:"Meet",measureDistancesAndAreas:"Meet afstanden en oppervlakten",createNewMeasurement:"Maak een nieuwe meting",startCreating:"Begin een meting door punten toe te voegen aan de kaart",finishMeasurement:"Beëindig meting",lastPoint:"Laatste punt",area:"Oppervlakte",perimeter:"Omtrek",pointLocation:"Locatie punt",areaMeasurement:"Oppervlakte meting",linearMeasurement:"Gemeten afstand",pathDistance:"Afstand over de lijn",centerOnArea:"Centreer op dit gebied",centerOnLine:"Centreer op deze lijn",centerOnLocation:"Centreer op deze locatie",cancel:"Annuleer",delete:"Wis",acres:"are",feet:"Voet",kilometers:"km",hectares:"ha",meters:"m",miles:"Mijl",sqfeet:"Vierkante Feet",sqmeters:"m2",sqmiles:"Vierkante Mijl",decPoint:",",thousandsSep:"."}),Zd}var Wd,wg;function Vk(){return wg||(wg=1,Wd={measure:"Pomiar",measureDistancesAndAreas:"Pomiar odległości i powierzchni",createNewMeasurement:"Utwórz nowy pomiar",startCreating:"Rozpocznij tworzenie nowego pomiaru poprzez dodanie punktów na mapie",finishMeasurement:"Zakończ pomiar",lastPoint:"Ostatni punkt",area:"Powierzchnia",perimeter:"Obwód",pointLocation:"Punkt lokalizacji",areaMeasurement:"Pomiar powierzchni",linearMeasurement:"Pomiar liniowy",pathDistance:"Długość ścieżki",centerOnArea:"Środek tego obszaru",centerOnLine:"Środek tej linii",centerOnLocation:"Środek w tej lokalizacji",cancel:"Anuluj",delete:"Skasuj",acres:"akrów",feet:"stóp",kilometers:"kilometrów",hectares:"hektarów",meters:"metrów",miles:"mil",sqfeet:"stóp kwadratowych",sqmeters:"metrów kwadratowych",sqmiles:"mil kwadratowych",decPoint:",",thousandsSep:"."}),Wd}var Kd,xg;function Hk(){return xg||(xg=1,Kd={measure:"Medidas",measureDistancesAndAreas:"Mede distâncias e áreas",createNewMeasurement:"Criar nova medida",startCreating:"Comece criando uma medida, adicionando pontos no mapa",finishMeasurement:"Finalizar medida",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medida de área",linearMeasurement:"Medida linear",pathDistance:"Distância",centerOnArea:"Centralizar nesta área",centerOnLine:"Centralizar nesta linha",centerOnLocation:"Centralizar nesta localização",cancel:"Cancelar",delete:"Excluir",acres:"Acres",feet:"Pés",kilometers:"Quilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}),Kd}var Jd,kg;function Zk(){return kg||(kg=1,Jd={measure:"Medições",measureDistancesAndAreas:"Medir distâncias e áreas",createNewMeasurement:"Criar uma nova medição",startCreating:"Adicione pontos no mapa, para criar uma nova medição",finishMeasurement:"Finalizar medição",lastPoint:"Último ponto",area:"Área",perimeter:"Perímetro",pointLocation:"Localização do ponto",areaMeasurement:"Medição da área",linearMeasurement:"Medição linear",pathDistance:"Distância",centerOnArea:"Centrar nesta área",centerOnLine:"Centrar nesta linha",centerOnLocation:"Centrar nesta localização",cancel:"Cancelar",delete:"Eliminar",acres:"Acres",feet:"Pés",kilometers:"Kilômetros",hectares:"Hectares",meters:"Metros",miles:"Milhas",sqfeet:"Pés²",sqmeters:"Metros²",sqmiles:"Milhas²",decPoint:",",thousandsSep:"."}),Jd}var Yd,Lg;function Wk(){return Lg||(Lg=1,Yd={measure:"Измерение",measureDistancesAndAreas:"Измерение расстояний и площади",createNewMeasurement:"Создать новое измерение",startCreating:"Для начала измерения добавьте точку на карту",finishMeasurement:"Закончить измерение",lastPoint:"Последняя точка",area:"Область",perimeter:"Периметр",pointLocation:"Местоположение точки",areaMeasurement:"Измерение области",linearMeasurement:"Линейное измерение",pathDistance:"Расстояние",centerOnArea:"Сфокусироваться на данной области",centerOnLine:"Сфокусироваться на данной линии",centerOnLocation:"Сфокусироваться на данной местности",cancel:"Отменить",delete:"Удалить",acres:"акры",feet:"фут",kilometers:"км",hectares:"га",meters:"м",miles:"миль",sqfeet:"футов²",sqmeters:"м²",sqmiles:"миль²",decPoint:".",thousandsSep:","}),Yd}var Xd,Cg;function Kk(){return Cg||(Cg=1,Xd={measure:"Mäta",measureDistancesAndAreas:"Mäta avstånd och yta",createNewMeasurement:"Skapa ny mätning",startCreating:"Börja mätning genom att lägga till punkter på kartan",finishMeasurement:"Avsluta mätning",lastPoint:"Sista punkt",area:"Yta",perimeter:"Omkrets",pointLocation:"Punktens Läge",areaMeasurement:"Arealmätning",linearMeasurement:"Längdmätning",pathDistance:"Total linjelängd",centerOnArea:"Centrera på detta område",centerOnLine:"Centrera på denna linje",centerOnLocation:"Centrera på denna punkt",cancel:"Avbryt",delete:"Radera",acres:"Tunnland",feet:"Fot",kilometers:"Kilometer",hectares:"Hektar",meters:"Meter",miles:"Miles",sqfeet:"Kvadratfot",sqmeters:"Kvadratmeter",sqmiles:"Kvadratmiles",decPoint:",",thousandsSep:" "}),Xd}var Qd,bg;function Jk(){return bg||(bg=1,Qd={measure:"Hesapla",measureDistancesAndAreas:"Uzaklık ve alan hesapla",createNewMeasurement:"Yeni hesaplama",startCreating:"Yeni nokta ekleyerek hesaplamaya başla",finishMeasurement:"Hesaplamayı bitir",lastPoint:"Son nokta",area:"Alan",perimeter:"Çevre uzunluğu",pointLocation:"Nokta yeri",areaMeasurement:"Alan hesaplaması",linearMeasurement:"Doğrusal hesaplama",pathDistance:"Yol uzunluğu",centerOnArea:"Bu alana odaklan",centerOnLine:"Bu doğtuya odaklan",centerOnLocation:"Bu yere odaklan",cancel:"Çıkış",delete:"Sil",acres:"Dönüm",feet:"Feet",kilometers:"Kilometre",hectares:"Hektar",meters:"Metre",miles:"Mil",sqfeet:"Feet kare",sqmeters:"Metre kare",sqmiles:"Mil kare",decPoint:".",thousandsSep:","}),Qd}var Eg;function Yk(){if(Eg)return B0;Eg=1;var u=kp,s=Rf(),a=hk(),c=dk(),f=yk(),p=wk(),_=p.$,x=Ek(),k=wf,S=u.template(k.readFileSync(__dirname+"/leaflet-measure-template.html","utf8")),D=u.template(k.readFileSync(__dirname+"/leaflet-measure-template-results.html","utf8")),F=u.template(k.readFileSync(__dirname+"/popuptemplates/point-popuptemplate.html","utf8")),H=u.template(k.readFileSync(__dirname+"/popuptemplates/line-popuptemplate.html","utf8")),J=u.template(k.readFileSync(__dirname+"/popuptemplates/area-popuptemplate.html","utf8")),Q=new(Tk())({devMode:!1,locales:{ca:Ak(),cn:Dk(),da:Ok(),de:Rk(),de_CH:Ik(),en:Fk(),en_UK:Nk(),es:zk(),fa:jk(),fil_PH:Uk(),fr:$k(),it:qk(),nl:Gk(),pl:Vk(),pt_BR:Hk(),pt_PT:Zk(),ru:Wk(),sv:Kk(),tr:Jk()}});return s.Control.Measure=s.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",secondaryLengthUnit:"miles",primaryAreaUnit:"acres",activeColor:"#ABE67E",completedColor:"#C8F2BE",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(W){s.setOptions(this,W),this.options.units=s.extend({},c,this.options.units),this._symbols=new x(u.pick(this.options,"activeColor","completedColor")),Q.setLocale(this.options.localization)},onAdd:function(W){return this._map=W,this._latlngs=[],this._initLayout(),W.on("click",this._collapse,this),this._layer=s.layerGroup().addTo(W),this._container},onRemove:function(W){W.off("click",this._collapse,this),W.removeLayer(this._layer)},_initLayout:function(){var W=this._className,Y=this._container=s.DomUtil.create("div",W),ve,$e,Oe,ye;Y.innerHTML=S({model:{className:W},i18n:Q}),Y.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(Y,"click",s.DomEvent.stopPropagation):(s.DomEvent.disableClickPropagation(Y),s.DomEvent.disableScrollPropagation(Y)),ve=this.$toggle=_(".js-toggle",Y),this.$interaction=_(".js-interaction",Y),$e=_(".js-start",Y),Oe=_(".js-cancel",Y),ye=_(".js-finish",Y),this.$startPrompt=_(".js-startprompt",Y),this.$measuringPrompt=_(".js-measuringprompt",Y),this.$startHelp=_(".js-starthelp",Y),this.$results=_(".js-results",Y),this.$measureTasks=_(".js-measuretasks",Y),this._collapse(),this._updateMeasureNotStarted(),s.Browser.android||(s.DomEvent.on(Y,"mouseenter",this._expand,this),s.DomEvent.on(Y,"mouseleave",this._collapse,this)),s.DomEvent.on(ve,"click",s.DomEvent.stop),s.Browser.touch?s.DomEvent.on(ve,"click",this._expand,this):s.DomEvent.on(ve,"focus",this._expand,this),s.DomEvent.on($e,"click",s.DomEvent.stop),s.DomEvent.on($e,"click",this._startMeasure,this),s.DomEvent.on(Oe,"click",s.DomEvent.stop),s.DomEvent.on(Oe,"click",this._finishMeasure,this),s.DomEvent.on(ye,"click",s.DomEvent.stop),s.DomEvent.on(ye,"click",this._handleMeasureDoubleClick,this)},_expand:function(){p.hide(this.$toggle),p.show(this.$interaction)},_collapse:function(){this._locked||(p.hide(this.$interaction),p.show(this.$toggle))},_updateMeasureNotStarted:function(){p.hide(this.$startHelp),p.hide(this.$results),p.hide(this.$measureTasks),p.hide(this.$measuringPrompt),p.show(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){p.hide(this.$results),p.show(this.$startHelp),p.show(this.$measureTasks),p.hide(this.$startPrompt),p.show(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){p.hide(this.$startHelp),p.show(this.$results),p.show(this.$measureTasks),p.hide(this.$startPrompt),p.show(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureVertexes=s.featureGroup().addTo(this._layer),this._captureMarker=s.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),s.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_finishMeasure:function(){var W=u.extend({},this._resultsModel,{points:this._latlngs});this._locked=!1,s.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",W,!1)},_clearMeasure:function(){this._latlngs=[],this._resultsModel=null,this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(s.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(W){var Y=this.options.units;return{lengthDisplay:ve(W.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:ve(W.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function ve(Oe,ye,Ee,De,He){var _t;return ye&&Y[ye]?(_t=$e(Oe,Y[ye],De,He),Ee&&Y[Ee]&&(_t=_t+" ("+$e(Oe,Y[Ee],De,He)+")")):_t=$e(Oe,null,De,He),_t}function $e(Oe,ye,Ee,De){return ye&&ye.factor&&ye.display?a.numberFormat(Oe*ye.factor,ye.decimals||0,Ee||Q.__("decPoint"),De||Q.__("thousandsSep"))+" "+Q.__([ye.display])||ye.display:a.numberFormat(Oe,0,Ee||Q.__("decPoint"),De||Q.__("thousandsSep"))}},_updateResults:function(){var W=f.measure(this._latlngs),Y=this._resultsModel=u.extend({},W,this._getMeasurementDisplayStrings(W),{pointCount:this._latlngs.length});this.$results.innerHTML=D({model:Y,humanize:a,i18n:Q})},_handleMeasureMove:function(W){this._measureDrag?this._measureDrag.setLatLng(W.latlng):this._measureDrag=s.circleMarker(W.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var W=this._latlngs,Y,ve,$e,Oe,ye,Ee;this._finishMeasure(),W.length&&(W.length>2&&W.push(u.first(W)),Y=f.measure(W),W.length===1?(ve=s.circleMarker(W[0],this._symbols.getSymbol("resultPoint")),Oe=F({model:Y,humanize:a,i18n:Q})):W.length===2?(ve=s.polyline(W,this._symbols.getSymbol("resultLine")),Oe=H({model:u.extend({},Y,this._getMeasurementDisplayStrings(Y)),humanize:a,i18n:Q})):(ve=s.polygon(W,this._symbols.getSymbol("resultArea")),Oe=J({model:u.extend({},Y,this._getMeasurementDisplayStrings(Y)),humanize:a,i18n:Q})),$e=s.DomUtil.create("div",""),$e.innerHTML=Oe,ye=_(".js-zoomto",$e),ye&&(s.DomEvent.on(ye,"click",s.DomEvent.stop),s.DomEvent.on(ye,"click",function(){ve.getBounds?this._map.fitBounds(ve.getBounds(),{padding:[20,20],maxZoom:17}):ve.getLatLng&&this._map.panTo(ve.getLatLng())},this)),Ee=_(".js-deletemarkup",$e),Ee&&(s.DomEvent.on(Ee,"click",s.DomEvent.stop),s.DomEvent.on(Ee,"click",function(){this._layer.removeLayer(ve)},this)),ve.addTo(this._layer),ve.bindPopup($e,this.options.popupOptions),ve.getBounds?ve.openPopup(ve.getBounds().getCenter()):ve.getLatLng&&ve.openPopup(ve.getLatLng()))},_handleMeasureClick:function(W){var Y=this._map.mouseEventToLatLng(W.originalEvent),ve=u.last(this._latlngs),$e=this._symbols.getSymbol("measureVertex");(!ve||!Y.equals(ve))&&(this._latlngs.push(Y),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(Oe){Oe.setStyle($e),Oe._path.setAttribute("class",$e.className)}),this._addNewVertex(Y),this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()),this._updateResults(),this._updateMeasureStartedWithPoints()},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(W){s.circleMarker(W,this._symbols.getSymbol("measureVertexActive")).addTo(this._measureVertexes)},_addMeasureArea:function(W){if(W.length<3){this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null);return}this._measureArea?this._measureArea.setLatLngs(W):this._measureArea=s.polygon(W,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(W){if(W.length<2){this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null);return}this._measureBoundary?this._measureBoundary.setLatLngs(W):this._measureBoundary=s.polyline(W,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}}),s.Map.mergeOptions({measureControl:!1}),s.Map.addInitHook(function(){this.options.measureControl&&(this.measureControl=new s.Control.Measure().addTo(this))}),s.control.measure=function(W){return new s.Control.Measure(W)},B0}Yk();var ef={exports:{}},Mg;function Xk(){return Mg||(Mg=1,(function(u){(function(s){var a;a=Rf(),u.exports=s(a)})(function(s){return s.Polyline._flat=s.LineUtil.isFlat||s.Polyline._flat||function(a){return!s.Util.isArray(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"},s.GeometryUtil=s.extend(s.GeometryUtil||{},{distance:function(a,c,f){return a.latLngToLayerPoint(c).distanceTo(a.latLngToLayerPoint(f))},distanceSegment:function(a,c,f,p){var _=a.latLngToLayerPoint(c),x=a.latLngToLayerPoint(f),k=a.latLngToLayerPoint(p);return s.LineUtil.pointToSegmentDistance(_,x,k)},readableDistance:function(a,c){var f=c!=="imperial",p;return f?a>1e3?p=(a/1e3).toFixed(2)+" km":p=a.toFixed(1)+" m":(a*=1.09361,a>1760?p=(a/1760).toFixed(2)+" miles":p=a.toFixed(1)+" yd"),p},belongsSegment:function(a,c,f,p){p=p===void 0?.2:p;var _=c.distanceTo(f),x=c.distanceTo(a)+a.distanceTo(f)-_;return x/_<p},length:function(a){var c=s.GeometryUtil.accumulatedLengths(a);return c.length>0?c[c.length-1]:0},accumulatedLengths:function(a){if(typeof a.getLatLngs=="function"&&(a=a.getLatLngs()),a.length===0)return[];for(var c=0,f=[0],p=0,_=a.length-1;p<_;p++)c+=a[p].distanceTo(a[p+1]),f.push(c);return f},closestOnSegment:function(a,c,f,p){var _=a.getMaxZoom();_===1/0&&(_=a.getZoom());var x=a.project(c,_),k=a.project(f,_),S=a.project(p,_),D=s.LineUtil.closestPointOnSegment(x,k,S);return a.unproject(D,_)},closestOnCircle:function(a,c){const f=a.getLatLng(),p=a.getRadius(),_=typeof p=="number"?p:p.radius,x=c.lng,k=c.lat,S=f.lng,D=f.lat,F=x-S,H=k-D,J=Math.sqrt(F*F+H*H),Q=S+F/J*_,W=D+H/J*_;return new s.LatLng(W,Q)},closest:function(a,c,f,p){var _,x=1/0,k=null,S,D,F,H;if(c instanceof Array)if(c[0]instanceof Array&&typeof c[0][0]!="number"){for(S=0;S<c.length;S++)H=s.GeometryUtil.closest(a,c[S],f,p),H&&H.distance<x&&(x=H.distance,k=H);return k}else if(c[0]instanceof s.LatLng||typeof c[0][0]=="number"||typeof c[0].lat=="number")c=s.polyline(c);else return k;if(!(c instanceof s.Polyline))return k;if(_=JSON.parse(JSON.stringify(c.getLatLngs().slice(0))),c instanceof s.Polygon){var J=function(ve){if(s.Polyline._flat(ve))ve.push(ve[0]);else for(var $e=0;$e<ve.length;$e++)J(ve[$e])};J(_)}if(s.Polyline._flat(_)){if(p){for(S=0,D=_.length;S<D;S++){var Q=_[S];F=s.GeometryUtil.distance(a,f,Q),F<x&&(x=F,k=Q,k.distance=F)}return k}for(S=0,D=_.length;S<D-1;S++){var W=_[S],Y=_[S+1];F=s.GeometryUtil.distanceSegment(a,f,W,Y),F<=x&&(x=F,k=s.GeometryUtil.closestOnSegment(a,f,W,Y),k.distance=F)}return k}else{for(S=0;S<_.length;S++)H=s.GeometryUtil.closest(a,_[S],f,p),H.distance<x&&(x=H.distance,k=H);return k}},closestLayer:function(a,c,f){for(var p=1/0,_=null,x=null,k=1/0,S=0,D=c.length;S<D;S++){var F=c[S];if(F instanceof s.LayerGroup){var H=s.GeometryUtil.closestLayer(a,F.getLayers(),f);H.distance<p&&(p=H.distance,_=H)}else F instanceof s.Circle?(x=this.closestOnCircle(F,f),k=s.GeometryUtil.distance(a,f,x)):typeof F.getLatLng=="function"?(x=F.getLatLng(),k=s.GeometryUtil.distance(a,f,x)):(x=s.GeometryUtil.closest(a,F,f),x&&(k=x.distance)),k<p&&(p=k,_={layer:F,latlng:x,distance:k})}return _},nClosestLayers:function(a,c,f,p){if(p=typeof p=="number"?p:c.length,p<1||c.length<1)return null;for(var _=[],x,k,S=0,D=c.length;S<D;S++){var F=c[S];if(F instanceof s.LayerGroup){var H=s.GeometryUtil.closestLayer(a,F.getLayers(),f);_.push(H)}else F instanceof s.Circle?(k=this.closestOnCircle(F,f),x=s.GeometryUtil.distance(a,f,k)):typeof F.getLatLng=="function"?(k=F.getLatLng(),x=s.GeometryUtil.distance(a,f,k)):(k=s.GeometryUtil.closest(a,F,f),k&&(x=k.distance)),_.push({layer:F,latlng:k,distance:x})}return _.sort(function(J,Q){return J.distance-Q.distance}),_.length>p?_.slice(0,p):_},layersWithin:function(a,c,f,p){p=typeof p=="number"?p:1/0;for(var _=[],x=null,k=0,S=0,D=c.length;S<D;S++){var F=c[S];typeof F.getLatLng=="function"?(x=F.getLatLng(),k=s.GeometryUtil.distance(a,f,x)):(x=s.GeometryUtil.closest(a,F,f),x&&(k=x.distance)),x&&k<p&&_.push({layer:F,latlng:x,distance:k})}var H=_.sort(function(J,Q){return J.distance-Q.distance});return H},closestLayerSnap:function(a,c,f,p,_){p=typeof p=="number"?p:1/0,_=typeof _=="boolean"?_:!0;var x=s.GeometryUtil.closestLayer(a,c,f);if(!x||x.distance>p)return null;if(_&&typeof x.layer.getLatLngs=="function"){var k=s.GeometryUtil.closest(a,x.layer,x.latlng,!0);k.distance<p&&(x.latlng=k,x.distance=s.GeometryUtil.distance(a,k,f))}return x},interpolateOnPointSegment:function(a,c,f){return s.point(a.x*(1-f)+f*c.x,a.y*(1-f)+f*c.y)},interpolateOnLine:function(a,c,f){c=c instanceof s.Polyline?c.getLatLngs():c;var p=c.length;if(p<2)return null;if(f=Math.max(Math.min(f,1),0),f===0)return{latLng:c[0]instanceof s.LatLng?c[0]:s.latLng(c[0]),predecessor:-1};if(f==1)return{latLng:c[c.length-1]instanceof s.LatLng?c[c.length-1]:s.latLng(c[c.length-1]),predecessor:c.length-2};var _=a.getMaxZoom();_===1/0&&(_=a.getZoom());for(var x=[],k=0,S=0;S<p;S++)x[S]=a.project(c[S],_),S>0&&(k+=x[S-1].distanceTo(x[S]));for(var D=k*f,F=0,H=0,S=0;H<D;S++){var J=x[S],Q=x[S+1];F=H,H+=J.distanceTo(Q)}if(J==null&&Q==null)var J=x[0],Q=x[1],S=1;var W=H-F!==0?(D-F)/(H-F):0,Y=s.GeometryUtil.interpolateOnPointSegment(J,Q,W);return{latLng:a.unproject(Y,_),predecessor:S-1}},locateOnLine:function(a,c,f){var p=c.getLatLngs();if(f.equals(p[0]))return 0;if(f.equals(p[p.length-1]))return 1;for(var _=s.GeometryUtil.closest(a,c,f,!1),x=s.GeometryUtil.accumulatedLengths(p),k=x[x.length-1],S=0,D=!1,F=0,H=p.length-1;F<H;F++){var J=p[F],Q=p[F+1];if(S=x[F],s.GeometryUtil.belongsSegment(_,J,Q,.001)){S+=J.distanceTo(_),D=!0;break}}if(!D)throw"Could not interpolate "+f.toString()+" within "+c.toString();return S/k},reverse:function(a){return s.polyline(a.getLatLngs().slice(0).reverse())},extract:function(a,c,f,p){if(f>p)return s.GeometryUtil.extract(a,s.GeometryUtil.reverse(c),1-f,1-p);f=Math.max(Math.min(f,1),0),p=Math.max(Math.min(p,1),0);var _=c.getLatLngs(),x=s.GeometryUtil.interpolateOnLine(a,c,f),k=s.GeometryUtil.interpolateOnLine(a,c,p);if(f==p){var S=s.GeometryUtil.interpolateOnLine(a,c,p);return[S.latLng]}x.predecessor==-1&&(x.predecessor=0),k.predecessor==-1&&(k.predecessor=0);var D=_.slice(x.predecessor+1,k.predecessor+1);return D.unshift(x.latLng),D.push(k.latLng),D},isBefore:function(a,c){if(!c)return!1;var f=a.getLatLngs(),p=c.getLatLngs();return f[f.length-1].equals(p[0])},isAfter:function(a,c){if(!c)return!1;var f=a.getLatLngs(),p=c.getLatLngs();return f[0].equals(p[p.length-1])},startsAtExtremity:function(a,c){if(!c)return!1;var f=a.getLatLngs(),p=c.getLatLngs(),_=f[0];return _.equals(p[0])||_.equals(p[p.length-1])},computeAngle:function(a,c){return Math.atan2(c.y-a.y,c.x-a.x)*180/Math.PI},computeSlope:function(a,c){var f=(c.y-a.y)/(c.x-a.x),p=a.y-f*a.x;return{a:f,b:p}},rotatePoint:function(a,c,f,p){var _=a.getMaxZoom();_===1/0&&(_=a.getZoom());var x=f*Math.PI/180,k=a.project(c,_),S=a.project(p,_),D=Math.cos(x)*(k.x-S.x)-Math.sin(x)*(k.y-S.y)+S.x,F=Math.sin(x)*(k.x-S.x)+Math.cos(x)*(k.y-S.y)+S.y;return a.unproject(new s.Point(D,F),_)},bearing:function(a,c){var f=Math.PI/180,p=a.lat*f,_=c.lat*f,x=a.lng*f,k=c.lng*f,S=Math.sin(k-x)*Math.cos(_),D=Math.cos(p)*Math.sin(_)-Math.sin(p)*Math.cos(_)*Math.cos(k-x),F=(Math.atan2(S,D)*180/Math.PI+360)%360;return F>=180?F-360:F},destination:function(a,c,f){c=(c+360)%360;var p=Math.PI/180,_=180/Math.PI,x=s.CRS.Earth.R,k=a.lng*p,S=a.lat*p,D=c*p,F=Math.sin(S),H=Math.cos(S),J=Math.cos(f/x),Q=Math.sin(f/x),W=Math.asin(F*J+H*Q*Math.cos(D)),Y=k+Math.atan2(Math.sin(D)*Q*H,J-F*Math.sin(W));return Y=Y*_,Y=Y>180?Y-360:Y<-180?Y+360:Y,s.latLng([W*_,Y])},angle:function(a,c,f){var p=a.latLngToContainerPoint(c),_=a.latLngToContainerPoint(f),x=Math.atan2(_.y-p.y,_.x-p.x)*180/Math.PI+90;return x+=x<0?360:0,x},destinationOnSegment:function(a,c,f,p){var _=s.GeometryUtil.angle(a,c,f),x=s.GeometryUtil.destination(c,_,p);return s.GeometryUtil.closestOnSegment(a,x,c,f)}}),s.GeometryUtil})})(ef)),ef.exports}Xk();const Qk=ge.forwardRef(function({layers:s,visible:a,styles:c},f){const p=ge.useRef(null),[_,x]=ge.useState(null),[k,S]=ge.useState(null),D=ge.useMemo(()=>({lat:-33.45,lng:-70.65}),[]),[F,H]=ge.useState(!1);ge.useImperativeHandle(f,()=>({zoomTo(Ee){if(p.current)try{const He=sa.geoJSON(Ee).getBounds();He.isValid()&&p.current.fitBounds(He,{padding:[20,20]})}catch{}},get leafletMap(){return p.current}}));function J(Ee){const De=Ee.shape||Ee.layer?.pm?._shape||"Geometry";if(De==="Polygon"){const He=sa.GeometryUtil.geodesicArea(Ee.layer.getLatLngs()[0]),_t=sa.GeometryUtil.length(Ee.layer.getLatLngs()[0]);return`📐 Polígono → Área: ${(He/1e4).toFixed(2)} ha | Perímetro: ${(_t/1e3).toFixed(2)} km`}if(De==="Line"){const He=Ee.layer.getLatLngs(),_t=sa.GeometryUtil.length(He);return`📏 Línea → ${_t<1e3?_t.toFixed(1)+" m":(_t/1e3).toFixed(2)} km`}if(De==="Circle"){const He=Ee.layer.getRadius(),X=Math.PI*He*He/1e4;return`⭕ Círculo → Radio: ${He.toFixed(1)} m | Área: ${X.toFixed(2)} ha`}return""}ge.useEffect(()=>{if(!p.current)return;const Ee=p.current;Ee.whenReady(()=>{console.log("✅ Mapa listo, inicializando Leaflet.Measure");const De=sa.control.measure({primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:"hectares",activeColor:"#00bcd4",completedColor:"#4caf50"});De.addTo(Ee),Ee._measureControl=De,console.log("✅ Control de medición inicializado",Ee._measureControl)}),Ee.pm&&(Ee.pm.addControls({position:"topleft",drawCircle:!1,drawMarker:!1,drawText:!1}),Ee.on("pm:create",De=>{const He=J(De);He&&De.layer.bindPopup(He).openPopup(),x(null)}))},[]);function Q(Ee){p.current&&(p.current.pm.enableDraw(Ee),x(Ee))}function W(){if(!p.current)return;const Ee=p.current;Ee.pm.disableDraw(),Ee.eachLayer(De=>{De.pm&&De.pm._shape&&Ee.removeLayer(De)}),x(null),S({msg:"🗑️ Geometrías eliminadas",type:"info"})}function Y(){if(!p.current)return;const Ee=[[-56,-76],[-17.5,-66]];p.current.fitBounds(Ee,{padding:[20,20]})}async function ve(){if(p.current){if(!("geolocation"in navigator)){S({msg:"❌ Geolocalización no disponible",type:"error"});return}navigator.geolocation.getCurrentPosition(Ee=>{const De=new el.LatLng(Ee.coords.latitude,Ee.coords.longitude);p.current.setView(De,13),sa.circleMarker(De,{radius:6}).addTo(p.current),S({msg:"📍 Ubicación encontrada",type:"success"})},Ee=>S({msg:"❌ No se pudo obtener tu ubicación: "+Ee.message,type:"error"}),{enableHighAccuracy:!0,timeout:1e4})}}const[$e,Oe]=ge.useState(!1);function ye(){const Ee=p.current?.getContainer();Ee&&(document.fullscreenElement?(document.exitFullscreen?.(),Oe(!1)):(Ee.requestFullscreen?.(),Oe(!0)))}return se.jsxs("div",{className:"relative w-full rounded-xl border shadow-lg overflow-hidden",children:[k&&se.jsx("div",{className:"fixed top-4 right-4 z-[2000]",children:se.jsx(h_,{message:k.msg,type:k.type,duration:4e3,onClose:()=>S(null)})}),se.jsxs("div",{className:"absolute top-2 left-2 z-[1000] flex flex-wrap gap-2 p-2 bg-black/70 backdrop-blur rounded-lg shadow-md max-w-[95vw]",children:[se.jsxs("button",{onClick:Y,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["↺ ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Chile"})]}),se.jsxs("button",{onClick:ve,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["📍 ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Ubicación"})]}),se.jsxs("button",{onClick:ye,className:"btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["⛶ ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Pantalla completa"})]}),se.jsxs("button",{onClick:()=>{if(p.current&&p.current._measureControl){const Ee=p.current._measureControl;console.log("✅ Botón Medir clickeado"),Ee._measuring?(console.log("📏 Finalizando medición actual…"),Ee._finishPath(),H(!1)):(console.log("📐 Iniciando nueva medición (línea/polígono)…"),Ee._startMeasure(),H(!0))}else console.warn("❌ No se encontró el control de medición en el mapa")},className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${F?"btn-map-active":""}`,children:["🔍 ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Medir"})]}),se.jsxs("div",{className:"flex flex-wrap gap-2",children:[se.jsxs("button",{onClick:()=>Q("Polygon"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${_==="Polygon"?"btn-map-active":""}`,children:["✏️ ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Polígono"})]}),se.jsxs("button",{onClick:()=>Q("Line"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${_==="Line"?"btn-map-active":""}`,children:["📏 ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Línea"})]}),se.jsxs("button",{onClick:()=>Q("Circle"),className:`btn-map p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md ${_==="Circle"?"btn-map-active":""}`,children:["⭕ ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Círculo"})]}),_&&se.jsxs("button",{onClick:W,className:"btn-map btn-map-danger p-2 sm:px-3 sm:py-1.5 rounded-full sm:rounded-md",children:["❌ ",se.jsx("span",{className:"hidden sm:inline ml-1",children:"Cancelar"})]})]})]}),se.jsxs(Dx,{center:[D.lat,D.lng],zoom:5,className:"w-full h-[60vh] sm:h-[70vh] rounded-xl",preferCanvas:!0,zoomControl:!1,ref:Ee=>{Ee&&(p.current=Ee)},children:[se.jsx(Rx,{position:"bottomright"}),se.jsx(Ox,{position:"bottomleft"}),se.jsx("div",{className:"hidden sm:block",children:se.jsxs(Uu,{position:"bottomleft",children:[se.jsx(Uu.BaseLayer,{checked:!0,name:"OpenStreetMap",children:se.jsx(M0,{attribution:"© OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",crossOrigin:"anonymous"})}),se.jsx(Uu.BaseLayer,{name:"Esri World Imagery",children:se.jsx(M0,{attribution:"Tiles © Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",crossOrigin:"anonymous"})})]})})]})]})});function eL({layers:u,styles:s,onLocalChange:a}){const[c,f]=ge.useState(!1);return u.length===0?null:se.jsxs("div",{className:"mt-4",children:[se.jsxs("button",{onClick:()=>f(!c),className:"btn btn-secondary w-full flex justify-between items-center text-sm sm:text-base",children:["🎨 Estilos de capas",se.jsx("span",{children:c?"▲":"▼"})]}),c&&se.jsx("div",{className:"mt-4 bg-gray-800 rounded-xl shadow-md p-4 sm:p-6 space-y-6",children:u.map(p=>{const _=s[p.id]||{};return se.jsxs("div",{className:"border-b border-gray-700 pb-4 last:border-0 last:pb-0",children:[se.jsx("h4",{className:"font-semibold text-gray-100 mb-2 text-sm sm:text-base",children:p.name}),se.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Borde",se.jsx("input",{type:"color",value:_.color||"#000000",onChange:x=>a(p.id,{color:x.target.value}),className:"ml-2 w-10 h-6 border border-gray-600 rounded cursor-pointer"})]}),se.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Opacidad",se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("input",{type:"range",min:0,max:1,step:.05,value:_.opacity??1,onChange:x=>a(p.id,{opacity:parseFloat(x.target.value)}),className:"w-full accent-green-500"}),se.jsxs("span",{className:"text-gray-300",children:[Math.round((_.opacity??1)*100),"%"]})]})]}),se.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Relleno",se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("input",{type:"color",value:_.fillColor||"#000000",onChange:x=>a(p.id,{fillColor:x.target.value}),className:"w-10 h-6 border border-gray-600 rounded cursor-pointer"}),se.jsx("input",{type:"range",min:0,max:1,step:.05,value:_.fillOpacity??.5,onChange:x=>a(p.id,{fillOpacity:parseFloat(x.target.value)}),className:"w-full accent-green-500"}),se.jsxs("span",{className:"text-gray-300",children:[Math.round((_.fillOpacity??.5)*100),"%"]})]})]}),se.jsxs("label",{className:"block mb-2 text-xs sm:text-sm text-gray-200",children:["Radio",se.jsxs("div",{className:"flex items-center gap-2",children:[se.jsx("input",{type:"range",min:1,max:20,step:1,value:_.radius??5,onChange:x=>a(p.id,{radius:parseInt(x.target.value)}),className:"w-full accent-green-500"}),se.jsxs("span",{className:"text-gray-300",children:[_.radius??5,"px"]})]})]})]},p.id)})})]})}const Uc=[{id:"sernageomin-mineria-19s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",name:"🌐 WMS Minero 19S",layer:sa.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1},{id:"sernageomin-mineria-18s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",name:"🌐 WMS Minero 18S",layer:sa.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1}];function Sg({mapRef:u}){const[s,a]=ge.useState(""),[c,f]=ge.useState(""),[p,_]=ge.useState([]),[x,k]=ge.useState({type:null,text:""});ge.useEffect(()=>{_(Uc)},[]);const S=(J,Q)=>{k({type:J,text:Q}),J!=="loading"&&setTimeout(()=>k({type:null,text:""}),3e3)},D=()=>{const J=u.current?.leafletMap;if(!J||!s.trim())return;const Q=s.trim(),W=`${Date.now()}`;S("loading","⏳ Cargando capa...");try{const Y=sa.tileLayer.wms(Q,{layers:c||"0",format:"image/png",transparent:!0,version:"1.3.0"});Y.addTo(J),_(ve=>[...ve,{id:W,url:Q,name:c||"0",layer:Y,visible:!0}]),S("success","✅ Capa cargada correctamente"),a(""),f("")}catch(Y){console.error(Y),S("error","❌ Error al cargar la capa")}},F=J=>{const Q=u.current?.leafletMap;Q&&_(W=>W.map(Y=>Y.id===J?(Y.visible&&Y.layer?Q.removeLayer(Y.layer):Y.layer&&Y.layer.addTo(Q),{...Y,visible:!Y.visible}):Y))},H=J=>{const Q=u.current?.leafletMap;Q&&_(W=>{const Y=W.find(ve=>ve.id===J);return Y&&Y.layer&&Q.removeLayer(Y.layer),W.filter(ve=>ve.id!==J)})};return se.jsxs("div",{className:"p-5 text-white bg-[#1e293b] h-full flex flex-col rounded-lg",children:[se.jsx("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:"🌐 Capas externas"}),se.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[se.jsx("input",{type:"text",value:s,onChange:J=>a(J.target.value),placeholder:"🔗 URL WMS",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),se.jsx("input",{type:"text",value:c,onChange:J=>f(J.target.value),placeholder:"📌 Nombre/ID de capa (ej: 0 o 0,1,2)",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),se.jsx("button",{onClick:D,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-medium shadow transition",children:"➕ Agregar"})]}),x.type&&se.jsx("div",{className:`mb-4 text-sm px-3 py-2 rounded-md font-medium ${x.type==="loading"?"bg-yellow-600":x.type==="success"?"bg-green-600":"bg-red-600"}`,children:x.text}),se.jsx("h3",{className:"text-md font-semibold mb-3",children:"📋 Capas activas"}),se.jsxs("div",{className:"mb-4",children:[se.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas Sernageomin"}),se.jsx("ul",{className:"space-y-2",children:p.filter(J=>Uc.find(Q=>Q.id===J.id)).map(J=>se.jsx("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:se.jsxs("label",{className:"flex items-center gap-2 truncate",children:[se.jsx("input",{type:"checkbox",checked:J.visible,onChange:()=>F(J.id),className:"accent-blue-500"}),se.jsx("span",{className:"truncate",children:J.name})]})},J.id))})]}),se.jsxs("div",{children:[se.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas agregadas manualmente"}),se.jsxs("ul",{className:"space-y-2",children:[p.filter(J=>!Uc.find(Q=>Q.id===J.id)).length===0&&se.jsx("li",{className:"text-gray-400 text-sm italic",children:"No hay capas manuales"}),p.filter(J=>!Uc.find(Q=>Q.id===J.id)).map(J=>se.jsxs("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:[se.jsxs("label",{className:"flex items-center gap-2 truncate",children:[se.jsx("input",{type:"checkbox",checked:J.visible,onChange:()=>F(J.id),className:"accent-blue-500"}),se.jsx("span",{className:"truncate",children:J.name})]}),se.jsx("button",{onClick:()=>H(J.id),className:"bg-red-600 hover:bg-red-700 px-2 py-1 rounded text-xs",children:"✕"})]},J.id))]})]})]})}function tL(){const{projectId:u}=y4(),[s,a]=ge.useState([]),[c,f]=ge.useState({}),[p,_]=ge.useState({}),[x,k]=ge.useState(!0),[S,D]=ge.useState(null),[F,H]=ge.useState(null),J=ge.useRef(null),[Q,W]=ge.useState(!1);async function Y(){if(!u)return;k(!0);const{data:De,error:He}=await Mr.from("project_layers").select("id,name,geojson").eq("project_id",u).order("created_at",{ascending:!1});if(He){console.error(He),a([]),H(He.message),k(!1);return}a(De||[]);const _t={};for(const X of De||[])_t[X.id]=!0;f(_t),k(!1)}async function ve(De){if(De.length===0){_({});return}const{data:He,error:_t}=await Mr.from("project_layer_styles").select("layer_id, stroke, weight, opacity, fill, fill_opacity, point_radius").in("layer_id",De);if(_t){console.error(_t);return}const X={};for(const tt of De){const lt=He?.find(wt=>wt.layer_id===tt);X[tt]={layer_id:tt,color:lt?.stroke??"#1f2937",weight:lt?.weight??2,opacity:lt?.opacity??1,fillColor:lt?.fill??"#1f2937",fillOpacity:lt?.fill_opacity??.2,radius:lt?.point_radius??5}}_(X)}ge.useEffect(()=>{Y()},[u]),ge.useEffect(()=>{ve(s.map(De=>De.id))},[s]),ge.useEffect(()=>{if(S){const De=setTimeout(()=>D(null),4e3);return()=>clearTimeout(De)}},[S]);function $e(De){f(He=>({...He,[De]:!He[De]}))}async function Oe(De,He){if(!confirm(`¿Eliminar la capa "${He??De}"?`))return;const{error:X}=await Mr.from("project_layers").delete().eq("id",De);if(X){alert(X.message);return}a(tt=>tt.filter(lt=>lt.id!==De)),f(tt=>{const lt={...tt};return delete lt[De],lt}),_(tt=>{const lt={...tt};return delete lt[De],lt})}function ye(De){J.current?.zoomTo(De)}function Ee(De,He,_t){_(X=>({...X,[De]:{...X[De],...He}}))}return se.jsxs("div",{className:"wrap",children:[se.jsxs("div",{className:"card flex flex-col lg:flex-row",style:{width:"min(1400px, 98vw)"},children:[se.jsxs("div",{className:"flex-1 flex flex-col",children:[se.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[se.jsxs(rh,{to:"/dashboard",className:`inline-flex items-center gap-2 px-3 py-1.5 \r
             text-sm font-medium text-white \r
             bg-gray-700 hover:bg-gray-600 \r
             rounded-lg shadow transition`,children:[se.jsx("span",{className:"text-lg",children:"←"}),"Volver"]}),se.jsx("h2",{className:"title text-lg sm:text-xl",children:"Proyecto"}),se.jsx("div",{className:"sm:ml-auto w-full sm:w-auto",children:se.jsx(vx,{projectId:u,onLayerAdded:()=>{D("✅ Capa creada"),Y()},onError:De=>H(De)})})]}),x&&se.jsx("div",{className:"hint text-blue-600 mb-2",children:"⏳ Cargando capas..."}),F&&se.jsx("div",{className:"hint text-red-700 mb-2",children:F}),S&&se.jsx("div",{className:"hint text-green-700 mb-2",children:S}),se.jsx(yx,{layers:s,visible:c,onToggleVisible:$e,onZoom:De=>ye(De.geojson),onDelete:De=>Oe(De.id,De.name)}),se.jsx(eL,{layers:s,styles:p,onLocalChange:(De,He)=>Ee(De,He)}),se.jsx("div",{style:{flex:1,minHeight:"500px"},children:se.jsx(Qk,{ref:J,layers:s,visible:c,styles:p})})]}),se.jsx("div",{className:"hidden lg:block w-80 bg-[#1e293b] border-l border-gray-700",children:se.jsx(Sg,{mapRef:J})})]}),se.jsx("button",{onClick:()=>W(!0),className:"lg:hidden fixed top-4 right-4 z-[1500] w-12 h-12 flex items-center justify-center rounded-full bg-green-600 hover:bg-green-700 text-white shadow-lg transition","aria-label":"Capas externas",children:"🌐"}),Q&&se.jsxs("div",{className:"fixed inset-0 z-[2000] flex",children:[se.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>W(!1)}),se.jsxs("aside",{className:`
              relative w-72 bg-[#1e293b] h-full p-4 shadow-xl z-[2000] overflow-y-auto
              transform transition-transform duration-300 ease-in-out
              ${Q?"translate-x-0":"translate-x-full"}
            `,children:[se.jsxs("div",{className:"flex justify-between items-center mb-4 text-white",children:[se.jsx("h2",{className:"font-semibold",children:"Capas externas"}),se.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),se.jsx(Sg,{mapRef:J})]})]})]})}function nL(){return se.jsx(rx,{basename:"/",children:se.jsxs(O4,{children:[se.jsx(Du,{path:"/login",element:se.jsx(jc,{})}),se.jsx(Du,{path:"/dashboard",element:se.jsx(b0,{fallback:se.jsx(jc,{}),children:u=>se.jsx(_x,{email:u.user.email??"sin-email"})})}),se.jsx(Du,{path:"/project/:projectId",element:se.jsx(b0,{fallback:se.jsx(jc,{}),children:()=>se.jsx(tL,{})})}),se.jsx(Du,{path:"*",element:se.jsx(jc,{})})]})})}Iy.createRoot(document.getElementById("root")).render(se.jsx($u.StrictMode,{children:se.jsx(nL,{})}));
