(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const _ of f)if(_.type==="childList")for(const y of _.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function a(f){const _={};return f.integrity&&(_.integrity=f.integrity),f.referrerPolicy&&(_.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?_.credentials="include":f.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function c(f){if(f.ep)return;f.ep=!0;const _=a(f);fetch(f.href,_)}})();var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lh(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}function bm(m){if(Object.prototype.hasOwnProperty.call(m,"__esModule"))return m;var o=m.default;if(typeof o=="function"){var a=function c(){var f=!1;try{f=this instanceof c}catch{}return f?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};a.prototype=o.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(m).forEach(function(c){var f=Object.getOwnPropertyDescriptor(m,c);Object.defineProperty(a,c,f.get?f:{enumerable:!0,get:function(){return m[c]}})}),a}var Qh={exports:{}},Ql={},ec={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of;function Em(){if(of)return xt;of=1;var m=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.iterator;function W(te){return te===null||typeof te!="object"?null:(te=N&&te[N]||te["@@iterator"],typeof te=="function"?te:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le=Object.assign,ae={};function ie(te,ke,et){this.props=te,this.context=ke,this.refs=ae,this.updater=et||Y}ie.prototype.isReactComponent={},ie.prototype.setState=function(te,ke){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ke,"setState")},ie.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function we(){}we.prototype=ie.prototype;function Te(te,ke,et){this.props=te,this.context=ke,this.refs=ae,this.updater=et||Y}var xe=Te.prototype=new we;xe.constructor=Te,le(xe,ie.prototype),xe.isPureReactComponent=!0;var Re=Array.isArray,Ye=Object.prototype.hasOwnProperty,We={current:null},Xe={key:!0,ref:!0,__self:!0,__source:!0};function Ue(te,ke,et){var Ke,He={},Fe=null,wt=null;if(ke!=null)for(Ke in ke.ref!==void 0&&(wt=ke.ref),ke.key!==void 0&&(Fe=""+ke.key),ke)Ye.call(ke,Ke)&&!Xe.hasOwnProperty(Ke)&&(He[Ke]=ke[Ke]);var yt=arguments.length-2;if(yt===1)He.children=et;else if(1<yt){for(var Mt=Array(yt),mn=0;mn<yt;mn++)Mt[mn]=arguments[mn+2];He.children=Mt}if(te&&te.defaultProps)for(Ke in yt=te.defaultProps,yt)He[Ke]===void 0&&(He[Ke]=yt[Ke]);return{$$typeof:m,type:te,key:Fe,ref:wt,props:He,_owner:We.current}}function Qe(te,ke){return{$$typeof:m,type:te.type,key:ke,ref:te.ref,props:te.props,_owner:te._owner}}function pt(te){return typeof te=="object"&&te!==null&&te.$$typeof===m}function at(te){var ke={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(et){return ke[et]})}var St=/\/+/g;function Rn(te,ke){return typeof te=="object"&&te!==null&&te.key!=null?at(""+te.key):ke.toString(36)}function Wt(te,ke,et,Ke,He){var Fe=typeof te;(Fe==="undefined"||Fe==="boolean")&&(te=null);var wt=!1;if(te===null)wt=!0;else switch(Fe){case"string":case"number":wt=!0;break;case"object":switch(te.$$typeof){case m:case o:wt=!0}}if(wt)return wt=te,He=He(wt),te=Ke===""?"."+Rn(wt,0):Ke,Re(He)?(et="",te!=null&&(et=te.replace(St,"$&/")+"/"),Wt(He,ke,et,"",function(mn){return mn})):He!=null&&(pt(He)&&(He=Qe(He,et+(!He.key||wt&&wt.key===He.key?"":(""+He.key).replace(St,"$&/")+"/")+te)),ke.push(He)),1;if(wt=0,Ke=Ke===""?".":Ke+":",Re(te))for(var yt=0;yt<te.length;yt++){Fe=te[yt];var Mt=Ke+Rn(Fe,yt);wt+=Wt(Fe,ke,et,Mt,He)}else if(Mt=W(te),typeof Mt=="function")for(te=Mt.call(te),yt=0;!(Fe=te.next()).done;)Fe=Fe.value,Mt=Ke+Rn(Fe,yt++),wt+=Wt(Fe,ke,et,Mt,He);else if(Fe==="object")throw ke=String(te),Error("Objects are not valid as a React child (found: "+(ke==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ke)+"). If you meant to render a collection of children, use an array instead.");return wt}function hi(te,ke,et){if(te==null)return te;var Ke=[],He=0;return Wt(te,Ke,"","",function(Fe){return ke.call(et,Fe,He++)}),Ke}function At(te){if(te._status===-1){var ke=te._result;ke=ke(),ke.then(function(et){(te._status===0||te._status===-1)&&(te._status=1,te._result=et)},function(et){(te._status===0||te._status===-1)&&(te._status=2,te._result=et)}),te._status===-1&&(te._status=0,te._result=ke)}if(te._status===1)return te._result.default;throw te._result}var Dt={current:null},Le={transition:null},tt={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Le,ReactCurrentOwner:We};function be(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:hi,forEach:function(te,ke,et){hi(te,function(){ke.apply(this,arguments)},et)},count:function(te){var ke=0;return hi(te,function(){ke++}),ke},toArray:function(te){return hi(te,function(ke){return ke})||[]},only:function(te){if(!pt(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},xt.Component=ie,xt.Fragment=a,xt.Profiler=f,xt.PureComponent=Te,xt.StrictMode=c,xt.Suspense=E,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,xt.act=be,xt.cloneElement=function(te,ke,et){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Ke=le({},te.props),He=te.key,Fe=te.ref,wt=te._owner;if(ke!=null){if(ke.ref!==void 0&&(Fe=ke.ref,wt=We.current),ke.key!==void 0&&(He=""+ke.key),te.type&&te.type.defaultProps)var yt=te.type.defaultProps;for(Mt in ke)Ye.call(ke,Mt)&&!Xe.hasOwnProperty(Mt)&&(Ke[Mt]=ke[Mt]===void 0&&yt!==void 0?yt[Mt]:ke[Mt])}var Mt=arguments.length-2;if(Mt===1)Ke.children=et;else if(1<Mt){yt=Array(Mt);for(var mn=0;mn<Mt;mn++)yt[mn]=arguments[mn+2];Ke.children=yt}return{$$typeof:m,type:te.type,key:He,ref:Fe,props:Ke,_owner:wt}},xt.createContext=function(te){return te={$$typeof:y,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:_,_context:te},te.Consumer=te},xt.createElement=Ue,xt.createFactory=function(te){var ke=Ue.bind(null,te);return ke.type=te,ke},xt.createRef=function(){return{current:null}},xt.forwardRef=function(te){return{$$typeof:b,render:te}},xt.isValidElement=pt,xt.lazy=function(te){return{$$typeof:I,_payload:{_status:-1,_result:te},_init:At}},xt.memo=function(te,ke){return{$$typeof:M,type:te,compare:ke===void 0?null:ke}},xt.startTransition=function(te){var ke=Le.transition;Le.transition={};try{te()}finally{Le.transition=ke}},xt.unstable_act=be,xt.useCallback=function(te,ke){return Dt.current.useCallback(te,ke)},xt.useContext=function(te){return Dt.current.useContext(te)},xt.useDebugValue=function(){},xt.useDeferredValue=function(te){return Dt.current.useDeferredValue(te)},xt.useEffect=function(te,ke){return Dt.current.useEffect(te,ke)},xt.useId=function(){return Dt.current.useId()},xt.useImperativeHandle=function(te,ke,et){return Dt.current.useImperativeHandle(te,ke,et)},xt.useInsertionEffect=function(te,ke){return Dt.current.useInsertionEffect(te,ke)},xt.useLayoutEffect=function(te,ke){return Dt.current.useLayoutEffect(te,ke)},xt.useMemo=function(te,ke){return Dt.current.useMemo(te,ke)},xt.useReducer=function(te,ke,et){return Dt.current.useReducer(te,ke,et)},xt.useRef=function(te){return Dt.current.useRef(te)},xt.useState=function(te){return Dt.current.useState(te)},xt.useSyncExternalStore=function(te,ke,et){return Dt.current.useSyncExternalStore(te,ke,et)},xt.useTransition=function(){return Dt.current.useTransition()},xt.version="18.3.1",xt}var af;function Mc(){return af||(af=1,ec.exports=Em()),ec.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf;function Pm(){if(lf)return Ql;lf=1;var m=Mc(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function y(b,E,M){var I,N={},W=null,Y=null;M!==void 0&&(W=""+M),E.key!==void 0&&(W=""+E.key),E.ref!==void 0&&(Y=E.ref);for(I in E)c.call(E,I)&&!_.hasOwnProperty(I)&&(N[I]=E[I]);if(b&&b.defaultProps)for(I in E=b.defaultProps,E)N[I]===void 0&&(N[I]=E[I]);return{$$typeof:o,type:b,key:W,ref:Y,props:N,_owner:f.current}}return Ql.Fragment=a,Ql.jsx=y,Ql.jsxs=y,Ql}var uf;function Sm(){return uf||(uf=1,Qh.exports=Pm()),Qh.exports}var Z=Sm(),ne=Mc();const cu=lh(ne);var Wu={},tc={exports:{}},Bi={},nc={exports:{}},ic={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function Mm(){return hf||(hf=1,(function(m){function o(Le,tt){var be=Le.length;Le.push(tt);e:for(;0<be;){var te=be-1>>>1,ke=Le[te];if(0<f(ke,tt))Le[te]=tt,Le[be]=ke,be=te;else break e}}function a(Le){return Le.length===0?null:Le[0]}function c(Le){if(Le.length===0)return null;var tt=Le[0],be=Le.pop();if(be!==tt){Le[0]=be;e:for(var te=0,ke=Le.length,et=ke>>>1;te<et;){var Ke=2*(te+1)-1,He=Le[Ke],Fe=Ke+1,wt=Le[Fe];if(0>f(He,be))Fe<ke&&0>f(wt,He)?(Le[te]=wt,Le[Fe]=be,te=Fe):(Le[te]=He,Le[Ke]=be,te=Ke);else if(Fe<ke&&0>f(wt,be))Le[te]=wt,Le[Fe]=be,te=Fe;else break e}}return tt}function f(Le,tt){var be=Le.sortIndex-tt.sortIndex;return be!==0?be:Le.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;m.unstable_now=function(){return _.now()}}else{var y=Date,b=y.now();m.unstable_now=function(){return y.now()-b}}var E=[],M=[],I=1,N=null,W=3,Y=!1,le=!1,ae=!1,ie=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,Te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xe(Le){for(var tt=a(M);tt!==null;){if(tt.callback===null)c(M);else if(tt.startTime<=Le)c(M),tt.sortIndex=tt.expirationTime,o(E,tt);else break;tt=a(M)}}function Re(Le){if(ae=!1,xe(Le),!le)if(a(E)!==null)le=!0,At(Ye);else{var tt=a(M);tt!==null&&Dt(Re,tt.startTime-Le)}}function Ye(Le,tt){le=!1,ae&&(ae=!1,we(Ue),Ue=-1),Y=!0;var be=W;try{for(xe(tt),N=a(E);N!==null&&(!(N.expirationTime>tt)||Le&&!at());){var te=N.callback;if(typeof te=="function"){N.callback=null,W=N.priorityLevel;var ke=te(N.expirationTime<=tt);tt=m.unstable_now(),typeof ke=="function"?N.callback=ke:N===a(E)&&c(E),xe(tt)}else c(E);N=a(E)}if(N!==null)var et=!0;else{var Ke=a(M);Ke!==null&&Dt(Re,Ke.startTime-tt),et=!1}return et}finally{N=null,W=be,Y=!1}}var We=!1,Xe=null,Ue=-1,Qe=5,pt=-1;function at(){return!(m.unstable_now()-pt<Qe)}function St(){if(Xe!==null){var Le=m.unstable_now();pt=Le;var tt=!0;try{tt=Xe(!0,Le)}finally{tt?Rn():(We=!1,Xe=null)}}else We=!1}var Rn;if(typeof Te=="function")Rn=function(){Te(St)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,hi=Wt.port2;Wt.port1.onmessage=St,Rn=function(){hi.postMessage(null)}}else Rn=function(){ie(St,0)};function At(Le){Xe=Le,We||(We=!0,Rn())}function Dt(Le,tt){Ue=ie(function(){Le(m.unstable_now())},tt)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(Le){Le.callback=null},m.unstable_continueExecution=function(){le||Y||(le=!0,At(Ye))},m.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Qe=0<Le?Math.floor(1e3/Le):5},m.unstable_getCurrentPriorityLevel=function(){return W},m.unstable_getFirstCallbackNode=function(){return a(E)},m.unstable_next=function(Le){switch(W){case 1:case 2:case 3:var tt=3;break;default:tt=W}var be=W;W=tt;try{return Le()}finally{W=be}},m.unstable_pauseExecution=function(){},m.unstable_requestPaint=function(){},m.unstable_runWithPriority=function(Le,tt){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var be=W;W=Le;try{return tt()}finally{W=be}},m.unstable_scheduleCallback=function(Le,tt,be){var te=m.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?te+be:te):be=te,Le){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=be+ke,Le={id:I++,callback:tt,priorityLevel:Le,startTime:be,expirationTime:ke,sortIndex:-1},be>te?(Le.sortIndex=be,o(M,Le),a(E)===null&&Le===a(M)&&(ae?(we(Ue),Ue=-1):ae=!0,Dt(Re,be-te))):(Le.sortIndex=ke,o(E,Le),le||Y||(le=!0,At(Ye))),Le},m.unstable_shouldYield=at,m.unstable_wrapCallback=function(Le){var tt=W;return function(){var be=W;W=tt;try{return Le.apply(this,arguments)}finally{W=be}}}})(ic)),ic}var cf;function Bm(){return cf||(cf=1,nc.exports=Mm()),nc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function Tm(){if(df)return Bi;df=1;var m=Mc(),o=Bm();function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,f={};function _(e,n){y(e,n),y(e+"Capture",n)}function y(e,n){for(f[e]=n,e=0;e<n.length;e++)c.add(n[e])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},N={};function W(e){return E.call(N,e)?!0:E.call(I,e)?!1:M.test(e)?N[e]=!0:(I[e]=!0,!1)}function Y(e,n,l,p){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function le(e,n,l,p){if(n===null||typeof n>"u"||Y(e,n,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ae(e,n,l,p,w,k,A){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=l,this.propertyName=e,this.type=n,this.sanitizeURL=k,this.removeEmptyString=A}var ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ie[e]=new ae(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];ie[n]=new ae(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ie[e]=new ae(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ie[e]=new ae(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ie[e]=new ae(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ie[e]=new ae(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ie[e]=new ae(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ie[e]=new ae(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ie[e]=new ae(e,5,!1,e.toLowerCase(),null,!1,!1)});var we=/[\-:]([a-z])/g;function Te(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(we,Te);ie[n]=new ae(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(we,Te);ie[n]=new ae(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(we,Te);ie[n]=new ae(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ie[e]=new ae(e,1,!1,e.toLowerCase(),null,!1,!1)}),ie.xlinkHref=new ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ie[e]=new ae(e,1,!1,e.toLowerCase(),null,!0,!0)});function xe(e,n,l,p){var w=ie.hasOwnProperty(n)?ie[n]:null;(w!==null?w.type!==0:p||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(le(n,l,w,p)&&(l=null),p||w===null?W(n)&&(l===null?e.removeAttribute(n):e.setAttribute(n,""+l)):w.mustUseProperty?e[w.propertyName]=l===null?w.type===3?!1:"":l:(n=w.attributeName,p=w.attributeNamespace,l===null?e.removeAttribute(n):(w=w.type,l=w===3||w===4&&l===!0?"":""+l,p?e.setAttributeNS(p,n,l):e.setAttribute(n,l))))}var Re=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ye=Symbol.for("react.element"),We=Symbol.for("react.portal"),Xe=Symbol.for("react.fragment"),Ue=Symbol.for("react.strict_mode"),Qe=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),at=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),Rn=Symbol.for("react.suspense"),Wt=Symbol.for("react.suspense_list"),hi=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Dt=Symbol.for("react.offscreen"),Le=Symbol.iterator;function tt(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,te;function ke(e){if(te===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);te=n&&n[1]||""}return`
`+te+e}var et=!1;function Ke(e,n){if(!e||et)return"";et=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ve){var p=ve}Reflect.construct(e,[],n)}else{try{n.call()}catch(ve){p=ve}e.call(n.prototype)}else{try{throw Error()}catch(ve){p=ve}e()}}catch(ve){if(ve&&p&&typeof ve.stack=="string"){for(var w=ve.stack.split(`
`),k=p.stack.split(`
`),A=w.length-1,V=k.length-1;1<=A&&0<=V&&w[A]!==k[V];)V--;for(;1<=A&&0<=V;A--,V--)if(w[A]!==k[V]){if(A!==1||V!==1)do if(A--,V--,0>V||w[A]!==k[V]){var Q=`
`+w[A].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=A&&0<=V);break}}}finally{et=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?ke(e):""}function He(e){switch(e.tag){case 5:return ke(e.type);case 16:return ke("Lazy");case 13:return ke("Suspense");case 19:return ke("SuspenseList");case 0:case 2:case 15:return e=Ke(e.type,!1),e;case 11:return e=Ke(e.type.render,!1),e;case 1:return e=Ke(e.type,!0),e;default:return""}}function Fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xe:return"Fragment";case We:return"Portal";case Qe:return"Profiler";case Ue:return"StrictMode";case Rn:return"Suspense";case Wt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case at:return(e.displayName||"Context")+".Consumer";case pt:return(e._context.displayName||"Context")+".Provider";case St:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hi:return n=e.displayName||null,n!==null?n:Fe(e.type)||"Memo";case At:n=e._payload,e=e._init;try{return Fe(e(n))}catch{}}return null}function wt(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(n);case 8:return n===Ue?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function yt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mt(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mn(e){var n=Mt(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),p=""+e[n];if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var w=l.get,k=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return w.call(this)},set:function(A){p=""+A,k.call(this,A)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Br(e){e._valueTracker||(e._valueTracker=mn(e))}function Tr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),p="";return e&&(p=Mt(e)?e.checked?"true":"false":e.value),e=p,e!==l?(n.setValue(e),!0):!1}function Ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vs(e,n){var l=n.checked;return be({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function No(e,n){var l=n.defaultValue==null?"":n.defaultValue,p=n.checked!=null?n.checked:n.defaultChecked;l=yt(n.value!=null?n.value:l),e._wrapperState={initialChecked:p,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Fo(e,n){n=n.checked,n!=null&&xe(e,"checked",n,!1)}function Dr(e,n){Fo(e,n);var l=yt(n.value),p=n.type;if(l!=null)p==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(p==="submit"||p==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Hs(e,n.type,l):n.hasOwnProperty("defaultValue")&&Hs(e,n.type,yt(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function sr(e,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var p=n.type;if(!(p!=="submit"&&p!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,l||n===e.value||(e.value=n),e.defaultValue=n}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function Hs(e,n,l){(n!=="number"||Ar(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var Rr=Array.isArray;function Ui(e,n,l,p){if(e=e.options,n){n={};for(var w=0;w<l.length;w++)n["$"+l[w]]=!0;for(l=0;l<e.length;l++)w=n.hasOwnProperty("$"+e[l].value),e[l].selected!==w&&(e[l].selected=w),w&&p&&(e[l].defaultSelected=!0)}else{for(l=""+yt(l),n=null,w=0;w<e.length;w++){if(e[w].value===l){e[w].selected=!0,p&&(e[w].defaultSelected=!0);return}n!==null||e[w].disabled||(n=e[w])}n!==null&&(n.selected=!0)}}function Zs(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(a(91));return be({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zo(e,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(a(92));if(Rr(l)){if(1<l.length)throw Error(a(93));l=l[0]}n=l}n==null&&(n=""),l=n}e._wrapperState={initialValue:yt(l)}}function Oa(e,n){var l=yt(n.value),p=yt(n.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),n.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),p!=null&&(e.defaultValue=""+p)}function Ia(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Ws(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qs(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Ws(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,Uo=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,p,w){MSApp.execUnsafeLocalFunction(function(){return e(n,l,p,w)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function or(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(e){Ir.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Or[n]=Or[e]})});function $o(e,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||Or.hasOwnProperty(e)&&Or[e]?(""+n).trim():n+"px"}function hs(e,n){e=e.style;for(var l in n)if(n.hasOwnProperty(l)){var p=l.indexOf("--")===0,w=$o(l,n[l],p);l==="float"&&(l="cssFloat"),p?e.setProperty(l,w):e[l]=w}}var jr=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ks(e,n){if(n){if(jr[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(a(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(n.style!=null&&typeof n.style!="object")throw Error(a(62))}}function Ti(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=null;function Vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,ar=null,lr=null;function ja(e){if(e=Ei(e)){if(typeof cs!="function")throw Error(a(280));var n=e.stateNode;n&&(n=xo(n),cs(e.stateNode,e.type,n))}}function Na(e){ar?lr?lr.push(e):lr=[e]:ar=e}function Ho(){if(ar){var e=ar,n=lr;if(lr=ar=null,ja(e),n)for(e=0;e<n.length;e++)ja(n[e])}}function Zo(e,n){return e(n)}function Fa(){}var Wo=!1;function Js(e,n,l){if(Wo)return e(n,l);Wo=!0;try{return Zo(e,n,l)}finally{Wo=!1,(ar!==null||lr!==null)&&(Fa(),Ho())}}function Nr(e,n){var l=e.stateNode;if(l===null)return null;var p=xo(l);if(p===null)return null;l=p[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(e=e.type,p=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!p;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(a(231,n,typeof l));return l}var qo=!1;if(b)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){qo=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{qo=!1}function Sl(e,n,l,p,w,k,A,V,Q){var ve=Array.prototype.slice.call(arguments,3);try{n.apply(l,ve)}catch(Me){this.onError(Me)}}var gn=!1,Ze=null,fs=!1,Ys=null,Ko={onError:function(e){gn=!0,Ze=e}};function za(e,n,l,p,w,k,A,V,Q){gn=!1,Ze=null,Sl.apply(Ko,arguments)}function Jo(e,n,l,p,w,k,A,V,Q){if(za.apply(this,arguments),gn){if(gn){var ve=Ze;gn=!1,Ze=null}else throw Error(a(198));fs||(fs=!0,Ys=ve)}}function $i(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function ur(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Yo(e){if($i(e)!==e)throw Error(a(188))}function Ml(e){var n=e.alternate;if(!n){if(n=$i(e),n===null)throw Error(a(188));return n!==e?null:e}for(var l=e,p=n;;){var w=l.return;if(w===null)break;var k=w.alternate;if(k===null){if(p=w.return,p!==null){l=p;continue}break}if(w.child===k.child){for(k=w.child;k;){if(k===l)return Yo(w),e;if(k===p)return Yo(w),n;k=k.sibling}throw Error(a(188))}if(l.return!==p.return)l=w,p=k;else{for(var A=!1,V=w.child;V;){if(V===l){A=!0,l=w,p=k;break}if(V===p){A=!0,p=w,l=k;break}V=V.sibling}if(!A){for(V=k.child;V;){if(V===l){A=!0,l=k,p=w;break}if(V===p){A=!0,p=k,l=w;break}V=V.sibling}if(!A)throw Error(a(189))}}if(l.alternate!==p)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?e:n}function Ua(e){return e=Ml(e),e!==null?$a(e):null}function $a(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=$a(e);if(n!==null)return n;e=e.sibling}return null}var Ga=o.unstable_scheduleCallback,ps=o.unstable_cancelCallback,Xo=o.unstable_shouldYield,Xs=o.unstable_requestPaint,Vt=o.unstable_now,Bl=o.unstable_getCurrentPriorityLevel,Qo=o.unstable_ImmediatePriority,Va=o.unstable_UserBlockingPriority,Qs=o.unstable_NormalPriority,ea=o.unstable_LowPriority,Fr=o.unstable_IdlePriority,ms=null,qn=null;function Gi(e){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(ms,e,void 0,(e.current.flags&128)===128)}catch{}}var dt=Math.clz32?Math.clz32:zr,Ot=Math.log,gs=Math.LN2;function zr(e){return e>>>=0,e===0?32:31-(Ot(e)/gs|0)|0}var ci=64,Ur=4194304;function lt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function It(e,n){var l=e.pendingLanes;if(l===0)return 0;var p=0,w=e.suspendedLanes,k=e.pingedLanes,A=l&268435455;if(A!==0){var V=A&~w;V!==0?p=lt(V):(k&=A,k!==0&&(p=lt(k)))}else A=l&~w,A!==0?p=lt(A):k!==0&&(p=lt(k));if(p===0)return 0;if(n!==0&&n!==p&&(n&w)===0&&(w=p&-p,k=n&-n,w>=k||w===16&&(k&4194240)!==0))return n;if((p&4)!==0&&(p|=l&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=p;0<n;)l=31-dt(n),w=1<<l,p|=e[l],n&=~w;return p}function ta(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eo(e,n){for(var l=e.suspendedLanes,p=e.pingedLanes,w=e.expirationTimes,k=e.pendingLanes;0<k;){var A=31-dt(k),V=1<<A,Q=w[A];Q===-1?((V&l)===0||(V&p)!==0)&&(w[A]=ta(V,n)):Q<=n&&(e.expiredLanes|=V),k&=~V}}function En(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ha(){var e=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),e}function $r(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function Kn(e,n,l){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-dt(n),e[n]=l}function Zt(e,n){var l=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var p=e.eventTimes;for(e=e.expirationTimes;0<l;){var w=31-dt(l),k=1<<w;n[w]=0,p[w]=-1,e[w]=-1,l&=~k}}function Ai(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var p=31-dt(l),w=1<<p;w&n|e[p]&n&&(e[p]|=n),l&=~w}}var Lt=0;function Gr(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var to,Vi,no,io,_s,ys=!1,Vr=[],Jn=null,Di=null,di=null,vs=new Map,ot=new Map,tn=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function na(e,n){switch(e){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":vs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ot.delete(n.pointerId)}}function hr(e,n,l,p,w,k){return e===null||e.nativeEvent!==k?(e={blockedOn:n,domEventName:l,eventSystemFlags:p,nativeEvent:k,targetContainers:[w]},n!==null&&(n=Ei(n),n!==null&&Vi(n)),e):(e.eventSystemFlags|=p,n=e.targetContainers,w!==null&&n.indexOf(w)===-1&&n.push(w),e)}function ia(e,n,l,p,w){switch(n){case"focusin":return Jn=hr(Jn,e,n,l,p,w),!0;case"dragenter":return Di=hr(Di,e,n,l,p,w),!0;case"mouseover":return di=hr(di,e,n,l,p,w),!0;case"pointerover":var k=w.pointerId;return vs.set(k,hr(vs.get(k)||null,e,n,l,p,w)),!0;case"gotpointercapture":return k=w.pointerId,ot.set(k,hr(ot.get(k)||null,e,n,l,p,w)),!0}return!1}function Ri(e){var n=vr(e.target);if(n!==null){var l=$i(n);if(l!==null){if(n=l.tag,n===13){if(n=ur(l),n!==null){e.blockedOn=n,_s(e.priority,function(){no(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=so(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var p=new l.constructor(l.type,l);Go=p,l.target.dispatchEvent(p),Go=null}else return n=Ei(l),n!==null&&Vi(n),e.blockedOn=l,!1;n.shift()}return!0}function ro(e,n,l){fi(e)&&l.delete(n)}function ws(){ys=!1,Jn!==null&&fi(Jn)&&(Jn=null),Di!==null&&fi(Di)&&(Di=null),di!==null&&fi(di)&&(di=null),vs.forEach(ro),ot.forEach(ro)}function Ht(e,n){e.blockedOn===n&&(e.blockedOn=null,ys||(ys=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ws)))}function Yn(e){function n(w){return Ht(w,e)}if(0<Vr.length){Ht(Vr[0],e);for(var l=1;l<Vr.length;l++){var p=Vr[l];p.blockedOn===e&&(p.blockedOn=null)}}for(Jn!==null&&Ht(Jn,e),Di!==null&&Ht(Di,e),di!==null&&Ht(di,e),vs.forEach(n),ot.forEach(n),l=0;l<tn.length;l++)p=tn[l],p.blockedOn===e&&(p.blockedOn=null);for(;0<tn.length&&(l=tn[0],l.blockedOn===null);)Ri(l),l.blockedOn===null&&tn.shift()}var cr=Re.ReactCurrentBatchConfig,xs=!0;function Tl(e,n,l,p){var w=Lt,k=cr.transition;cr.transition=null;try{Lt=1,Ls(e,n,l,p)}finally{Lt=w,cr.transition=k}}function Za(e,n,l,p){var w=Lt,k=cr.transition;cr.transition=null;try{Lt=4,Ls(e,n,l,p)}finally{Lt=w,cr.transition=k}}function Ls(e,n,l,p){if(xs){var w=so(e,n,l,p);if(w===null)t(e,n,p,dr,l),na(e,p);else if(ia(w,e,n,l,p))p.stopPropagation();else if(na(e,p),n&4&&-1<Rt.indexOf(e)){for(;w!==null;){var k=Ei(w);if(k!==null&&to(k),k=so(e,n,l,p),k===null&&t(e,n,p,dr,l),k===w)break;w=k}w!==null&&p.stopPropagation()}else t(e,n,p,null,l)}}var dr=null;function so(e,n,l,p){if(dr=null,e=Vo(p),e=vr(e),e!==null)if(n=$i(e),n===null)e=null;else if(l=n.tag,l===13){if(e=ur(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return dr=e,null}function vt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Qo:return 1;case Va:return 4;case Qs:case ea:return 16;case Fr:return 536870912;default:return 16}default:return 16}}var Oi=null,ut=null,pi=null;function Hr(){if(pi)return pi;var e,n=ut,l=n.length,p,w="value"in Oi?Oi.value:Oi.textContent,k=w.length;for(e=0;e<l&&n[e]===w[e];e++);var A=l-e;for(p=1;p<=A&&n[l-p]===w[k-p];p++);return pi=w.slice(e,1<p?1-p:void 0)}function oo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function Wa(){return!1}function hn(e){function n(l,p,w,k,A){this._reactName=l,this._targetInst=w,this.type=p,this.nativeEvent=k,this.target=A,this.currentTarget=null;for(var V in e)e.hasOwnProperty(V)&&(l=e[V],this[V]=l?l(k):k[V]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?fr:Wa,this.isPropagationStopped=Wa,this}return be(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),n}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=hn(Ii),Pn=be({},Ii,{view:0,detail:0}),qa=hn(Pn),nn,sa,Zr,Xn=be({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zr&&(Zr&&e.type==="mousemove"?(nn=e.screenX-Zr.screenX,sa=e.screenY-Zr.screenY):sa=nn=0,Zr=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:sa}}),oa=hn(Xn),Ka=be({},Xn,{dataTransfer:0}),aa=hn(Ka),Al=be({},Pn,{relatedTarget:0}),ao=hn(Al),la=be({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Dl=hn(la),rn=be({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cn=hn(rn),Ja=be({},Ii,{data:0}),Hi=hn(Ja),pr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rl(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Sn[e])?!!n[e]:!1}function mr(){return Rl}var Mn=be({},Pn,{key:function(e){if(e.key){var n=pr[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Un=hn(Mn),ua=be({},Xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=hn(ua),ha=be({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),$n=hn(ha),mi=be({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),lo=hn(mi),ca=be({},Xn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),da=hn(ca),_n=[9,13,27,32],Wi=b&&"CompositionEvent"in window,Cs=null;b&&"documentMode"in document&&(Cs=document.documentMode);var Qn=b&&"TextEvent"in window&&!Cs,Ya=b&&(!Wi||Cs&&8<Cs&&11>=Cs),gr=" ",Xa=!1;function Wr(e,n){switch(e){case"keyup":return _n.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ji=!1;function Ol(e,n){switch(e){case"compositionend":return bs(n);case"keypress":return n.which!==32?null:(Xa=!0,gr);case"textInput":return e=n.data,e===gr&&Xa?null:e;default:return null}}function Ni(e,n){if(ji)return e==="compositionend"||!Wi&&Wr(e,n)?(e=Hr(),pi=ut=Oi=null,ji=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ya&&n.locale!=="ko"?null:n.data;default:return null}}var gi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!gi[e.type]:n==="textarea"}function uo(e,n,l,p){Na(p),n=d(n,"onChange"),0<n.length&&(l=new ra("onChange","change",null,l,p),e.push({event:l,listeners:n}))}var ei=null,On=null;function Il(e){xi(e,0)}function ti(e){var n=Xi(e);if(Tr(n))return e}function Es(e,n){if(e==="change")return n}var _i=!1;if(b){var qr;if(b){var ho="oninput"in document;if(!ho){var Ps=document.createElement("div");Ps.setAttribute("oninput","return;"),ho=typeof Ps.oninput=="function"}qr=ho}else qr=!1;_i=qr&&(!document.documentMode||9<document.documentMode)}function Ss(){ei&&(ei.detachEvent("onpropertychange",Ms),On=ei=null)}function Ms(e){if(e.propertyName==="value"&&ti(On)){var n=[];uo(n,On,e,Vo(e)),Js(Il,n)}}function co(e,n,l){e==="focusin"?(Ss(),ei=n,On=l,ei.attachEvent("onpropertychange",Ms)):e==="focusout"&&Ss()}function Kr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ti(On)}function fo(e,n){if(e==="click")return ti(n)}function po(e,n){if(e==="input"||e==="change")return ti(n)}function mo(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Gn=typeof Object.is=="function"?Object.is:mo;function yi(e,n){if(Gn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),p=Object.keys(n);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var w=l[p];if(!E.call(n,w)||!Gn(e[w],n[w]))return!1}return!0}function Qa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jr(e,n){var l=Qa(e);e=0;for(var p;l;){if(l.nodeType===3){if(p=e+l.textContent.length,e<=n&&p>=n)return{node:l,offset:n-e};e=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qa(l)}}function pa(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?pa(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ma(){for(var e=window,n=Ar();n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=Ar(e.document)}return n}function ga(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function vi(e){var n=ma(),l=e.focusedElem,p=e.selectionRange;if(n!==l&&l&&l.ownerDocument&&pa(l.ownerDocument.documentElement,l)){if(p!==null&&ga(l)){if(n=p.start,e=p.end,e===void 0&&(e=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(e,l.value.length);else if(e=(n=l.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var w=l.textContent.length,k=Math.min(p.start,w);p=p.end===void 0?k:Math.min(p.end,w),!e.extend&&k>p&&(w=p,p=k,k=w),w=Jr(l,k);var A=Jr(l,p);w&&A&&(e.rangeCount!==1||e.anchorNode!==w.node||e.anchorOffset!==w.offset||e.focusNode!==A.node||e.focusOffset!==A.offset)&&(n=n.createRange(),n.setStart(w.node,w.offset),e.removeAllRanges(),k>p?(e.addRange(n),e.extend(A.node,A.offset)):(n.setEnd(A.node,A.offset),e.addRange(n)))}}for(n=[],e=l;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)e=n[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qi=b&&"documentMode"in document&&11>=document.documentMode,Yr=null,Xr=null,Bs=null,go=!1;function el(e,n,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;go||Yr==null||Yr!==Ar(p)||(p=Yr,"selectionStart"in p&&ga(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Bs&&yi(Bs,p)||(Bs=p,p=d(Xr,"onSelect"),0<p.length&&(n=new ra("onSelect","select",null,n,l),e.push({event:n,listeners:p}),n.target=Yr)))}function Ki(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var Qr={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},Ji={},_o={};b&&(_o=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function _r(e){if(Ji[e])return Ji[e];if(!Qr[e])return e;var n=Qr[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in _o)return Ji[e]=n[l];return e}var tl=_r("animationend"),wi=_r("animationiteration"),yo=_r("animationstart"),Ts=_r("transitionend"),es=new Map,nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(e,n){es.set(e,n),_(n,[e])}for(var Yt=0;Yt<nl.length;Yt++){var sn=nl[Yt],_a=sn.toLowerCase(),ni=sn[0].toUpperCase()+sn.slice(1);In(_a,"on"+ni)}In(tl,"onAnimationEnd"),In(wi,"onAnimationIteration"),In(yo,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Ts,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_("onBeforeInput",["compositionend","keypress","textInput","paste"]),_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var it="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vo=new Set("cancel close invalid load scroll toggle".split(" ").concat(it));function As(e,n,l){var p=e.type||"unknown-event";e.currentTarget=l,Jo(p,n,void 0,e),e.currentTarget=null}function xi(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var p=e[l],w=p.event;p=p.listeners;e:{var k=void 0;if(n)for(var A=p.length-1;0<=A;A--){var V=p[A],Q=V.instance,ve=V.currentTarget;if(V=V.listener,Q!==k&&w.isPropagationStopped())break e;As(w,V,ve),k=Q}else for(A=0;A<p.length;A++){if(V=p[A],Q=V.instance,ve=V.currentTarget,V=V.listener,Q!==k&&w.isPropagationStopped())break e;As(w,V,ve),k=Q}}}if(fs)throw e=Ys,fs=!1,Ys=null,e}function ht(e,n){var l=n[yr];l===void 0&&(l=n[yr]=new Set);var p=e+"__bubble";l.has(p)||(Yi(n,e,2,!1),l.add(p))}function wo(e,n,l){var p=0;n&&(p|=4),Yi(l,e,p,n)}var dn="_reactListening"+Math.random().toString(36).slice(2);function on(e){if(!e[dn]){e[dn]=!0,c.forEach(function(l){l!=="selectionchange"&&(vo.has(l)||wo(l,!1,e),wo(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[dn]||(n[dn]=!0,wo("selectionchange",!1,n))}}function Yi(e,n,l,p){switch(vt(n)){case 1:var w=Tl;break;case 4:w=Za;break;default:w=Ls}l=w.bind(null,n,l,e),w=void 0,!qo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(w=!0),p?w!==void 0?e.addEventListener(n,l,{capture:!0,passive:w}):e.addEventListener(n,l,!0):w!==void 0?e.addEventListener(n,l,{passive:w}):e.addEventListener(n,l,!1)}function t(e,n,l,p,w){var k=p;if((n&1)===0&&(n&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var V=p.stateNode.containerInfo;if(V===w||V.nodeType===8&&V.parentNode===w)break;if(A===4)for(A=p.return;A!==null;){var Q=A.tag;if((Q===3||Q===4)&&(Q=A.stateNode.containerInfo,Q===w||Q.nodeType===8&&Q.parentNode===w))return;A=A.return}for(;V!==null;){if(A=vr(V),A===null)return;if(Q=A.tag,Q===5||Q===6){p=k=A;continue e}V=V.parentNode}}p=p.return}Js(function(){var ve=k,Me=Vo(l),Be=[];e:{var Se=es.get(e);if(Se!==void 0){var Ne=ra,Ve=e;switch(e){case"keypress":if(oo(l)===0)break e;case"keydown":case"keyup":Ne=Un;break;case"focusin":Ve="focus",Ne=ao;break;case"focusout":Ve="blur",Ne=ao;break;case"beforeblur":case"afterblur":Ne=ao;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=aa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=$n;break;case tl:case wi:case yo:Ne=Dl;break;case Ts:Ne=lo;break;case"scroll":Ne=qa;break;case"wheel":Ne=da;break;case"copy":case"cut":case"paste":Ne=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=ks}var qe=(n&4)!==0,un=!qe&&e==="scroll",pe=qe?Se!==null?Se+"Capture":null:Se;qe=[];for(var re=ve,ge;re!==null;){ge=re;var Ae=ge.stateNode;if(ge.tag===5&&Ae!==null&&(ge=Ae,pe!==null&&(Ae=Nr(re,pe),Ae!=null&&qe.push(s(re,Ae,ge)))),un)break;re=re.return}0<qe.length&&(Se=new Ne(Se,Ve,null,l,Me),Be.push({event:Se,listeners:qe}))}}if((n&7)===0){e:{if(Se=e==="mouseover"||e==="pointerover",Ne=e==="mouseout"||e==="pointerout",Se&&l!==Go&&(Ve=l.relatedTarget||l.fromElement)&&(vr(Ve)||Ve[Et]))break e;if((Ne||Se)&&(Se=Me.window===Me?Me:(Se=Me.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ne?(Ve=l.relatedTarget||l.toElement,Ne=ve,Ve=Ve?vr(Ve):null,Ve!==null&&(un=$i(Ve),Ve!==un||Ve.tag!==5&&Ve.tag!==6)&&(Ve=null)):(Ne=null,Ve=ve),Ne!==Ve)){if(qe=oa,Ae="onMouseLeave",pe="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(qe=ks,Ae="onPointerLeave",pe="onPointerEnter",re="pointer"),un=Ne==null?Se:Xi(Ne),ge=Ve==null?Se:Xi(Ve),Se=new qe(Ae,re+"leave",Ne,l,Me),Se.target=un,Se.relatedTarget=ge,Ae=null,vr(Me)===ve&&(qe=new qe(pe,re+"enter",Ve,l,Me),qe.target=ge,qe.relatedTarget=un,Ae=qe),un=Ae,Ne&&Ve)t:{for(qe=Ne,pe=Ve,re=0,ge=qe;ge;ge=v(ge))re++;for(ge=0,Ae=pe;Ae;Ae=v(Ae))ge++;for(;0<re-ge;)qe=v(qe),re--;for(;0<ge-re;)pe=v(pe),ge--;for(;re--;){if(qe===pe||pe!==null&&qe===pe.alternate)break t;qe=v(qe),pe=v(pe)}qe=null}else qe=null;Ne!==null&&S(Be,Se,Ne,qe,!1),Ve!==null&&un!==null&&S(Be,un,Ve,qe,!0)}}e:{if(Se=ve?Xi(ve):window,Ne=Se.nodeName&&Se.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&Se.type==="file")var Je=Es;else if(fa(Se))if(_i)Je=po;else{Je=Kr;var rt=co}else(Ne=Se.nodeName)&&Ne.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(Je=fo);if(Je&&(Je=Je(e,ve))){uo(Be,Je,l,Me);break e}rt&&rt(e,Se,ve),e==="focusout"&&(rt=Se._wrapperState)&&rt.controlled&&Se.type==="number"&&Hs(Se,"number",Se.value)}switch(rt=ve?Xi(ve):window,e){case"focusin":(fa(rt)||rt.contentEditable==="true")&&(Yr=rt,Xr=ve,Bs=null);break;case"focusout":Bs=Xr=Yr=null;break;case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":go=!1,el(Be,l,Me);break;case"selectionchange":if(qi)break;case"keydown":case"keyup":el(Be,l,Me)}var st;if(Wi)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else ji?Wr(e,l)&&(ct="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(ct="onCompositionStart");ct&&(Ya&&l.locale!=="ko"&&(ji||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&ji&&(st=Hr()):(Oi=Me,ut="value"in Oi?Oi.value:Oi.textContent,ji=!0)),rt=d(ve,ct),0<rt.length&&(ct=new Hi(ct,e,null,l,Me),Be.push({event:ct,listeners:rt}),st?ct.data=st:(st=bs(l),st!==null&&(ct.data=st)))),(st=Qn?Ol(e,l):Ni(e,l))&&(ve=d(ve,"onBeforeInput"),0<ve.length&&(Me=new Hi("onBeforeInput","beforeinput",null,l,Me),Be.push({event:Me,listeners:ve}),Me.data=st))}xi(Be,n)})}function s(e,n,l){return{instance:e,listener:n,currentTarget:l}}function d(e,n){for(var l=n+"Capture",p=[];e!==null;){var w=e,k=w.stateNode;w.tag===5&&k!==null&&(w=k,k=Nr(e,l),k!=null&&p.unshift(s(e,k,w)),k=Nr(e,n),k!=null&&p.push(s(e,k,w))),e=e.return}return p}function v(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S(e,n,l,p,w){for(var k=n._reactName,A=[];l!==null&&l!==p;){var V=l,Q=V.alternate,ve=V.stateNode;if(Q!==null&&Q===p)break;V.tag===5&&ve!==null&&(V=ve,w?(Q=Nr(l,k),Q!=null&&A.unshift(s(l,Q,V))):w||(Q=Nr(l,k),Q!=null&&A.push(s(l,Q,V)))),l=l.return}A.length!==0&&e.push({event:n,listeners:A})}var R=/\r\n?/g,q=/\u0000|\uFFFD/g;function he(e){return(typeof e=="string"?e:""+e).replace(R,`
`).replace(q,"")}function ye(e,n,l){if(n=he(n),he(e)!==n&&l)throw Error(a(425))}function Ee(){}var Oe=null,nt=null;function ft(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var an=typeof setTimeout=="function"?setTimeout:void 0,Xt=typeof clearTimeout=="function"?clearTimeout:void 0,yn=typeof Promise=="function"?Promise:void 0,zt=typeof queueMicrotask=="function"?queueMicrotask:typeof yn<"u"?function(e){return yn.resolve(null).then(e).catch(Li)}:an;function Li(e){setTimeout(function(){throw e})}function Ds(e,n){var l=n,p=0;do{var w=l.nextSibling;if(e.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(p===0){e.removeChild(w),Yn(n);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=w}while(l);Yn(n)}function ii(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ya(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return e;n--}else l==="/$"&&n++}e=e.previousSibling}return null}var ki=Math.random().toString(36).slice(2),Ci="__reactFiber$"+ki,ts="__reactProps$"+ki,Et="__reactContainer$"+ki,yr="__reactEvents$"+ki,jl="__reactListeners$"+ki,bi="__reactHandles$"+ki;function vr(e){var n=e[Ci];if(n)return n;for(var l=e.parentNode;l;){if(n=l[Et]||l[Ci]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=ya(e);e!==null;){if(l=e[Ci])return l;e=ya(e)}return n}e=l,l=e.parentNode}return null}function Ei(e){return e=e[Ci]||e[Et],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function xo(e){return e[ts]||null}var il=[],Lo=-1;function wr(e){return{current:e}}function Nt(e){0>Lo||(e.current=il[Lo],il[Lo]=null,Lo--)}function jt(e,n){Lo++,il[Lo]=e.current,e.current=n}var ns={},Qt=wr(ns),vn=wr(!1),Rs=ns;function ko(e,n){var l=e.type.contextTypes;if(!l)return ns;var p=e.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===n)return p.__reactInternalMemoizedMaskedChildContext;var w={},k;for(k in l)w[k]=n[k];return p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=w),w}function wn(e){return e=e.childContextTypes,e!=null}function Os(){Nt(vn),Nt(Qt)}function Nl(e,n,l){if(Qt.current!==ns)throw Error(a(168));jt(Qt,n),jt(vn,l)}function vu(e,n,l){var p=e.stateNode;if(n=n.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var w in p)if(!(w in n))throw Error(a(108,wt(e)||"Unknown",w));return be({},l,p)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ns,Rs=Qt.current,jt(Qt,e),jt(vn,vn.current),!0}function Fl(e,n,l){var p=e.stateNode;if(!p)throw Error(a(169));l?(e=vu(e,n,Rs),p.__reactInternalMemoizedMergedChildContext=e,Nt(vn),Nt(Qt),jt(Qt,e)):Nt(vn),jt(vn,l)}var Qi=null,sl=!1,zl=!1;function Ul(e){Qi===null?Qi=[e]:Qi.push(e)}function fh(e){sl=!0,Ul(e)}function is(){if(!zl&&Qi!==null){zl=!0;var e=0,n=Lt;try{var l=Qi;for(Lt=1;e<l.length;e++){var p=l[e];do p=p(!0);while(p!==null)}Qi=null,sl=!1}catch(w){throw Qi!==null&&(Qi=Qi.slice(e+1)),Ga(Qo,is),w}finally{Lt=n,zl=!1}}return null}var Co=[],bo=0,ol=null,al=0,ri=[],xn=0,er=null,xr=1,Lr="";function Is(e,n){Co[bo++]=al,Co[bo++]=ol,ol=e,al=n}function ln(e,n,l){ri[xn++]=xr,ri[xn++]=Lr,ri[xn++]=er,er=e;var p=xr;e=Lr;var w=32-dt(p)-1;p&=~(1<<w),l+=1;var k=32-dt(n)+w;if(30<k){var A=w-w%5;k=(p&(1<<A)-1).toString(32),p>>=A,w-=A,xr=1<<32-dt(n)+w|l<<w|p,Lr=k+e}else xr=1<<k|l<<w|p,Lr=e}function tr(e){e.return!==null&&(Is(e,1),ln(e,1,0))}function $l(e){for(;e===ol;)ol=Co[--bo],Co[bo]=null,al=Co[--bo],Co[bo]=null;for(;e===er;)er=ri[--xn],ri[xn]=null,Lr=ri[--xn],ri[xn]=null,xr=ri[--xn],ri[xn]=null}var si=null,jn=null,Ut=!1,Fi=null;function wu(e,n){var l=rr(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=e,n=e.deletions,n===null?(e.deletions=[l],e.flags|=16):n.push(l)}function i(e,n){switch(e.tag){case 5:var l=e.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,si=e,jn=ii(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,si=e,jn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=er!==null?{id:xr,overflow:Lr}:null,e.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=rr(18,null,null,0),l.stateNode=n,l.return=e,e.child=l,si=e,jn=null,!0):!1;default:return!1}}function r(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u(e){if(Ut){var n=jn;if(n){var l=n;if(!i(e,n)){if(r(e))throw Error(a(418));n=ii(l.nextSibling);var p=si;n&&i(e,n)?wu(p,l):(e.flags=e.flags&-4097|2,Ut=!1,si=e)}}else{if(r(e))throw Error(a(418));e.flags=e.flags&-4097|2,Ut=!1,si=e}}}function h(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;si=e}function g(e){if(e!==si)return!1;if(!Ut)return h(e),Ut=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ft(e.type,e.memoizedProps)),n&&(n=jn)){if(r(e))throw x(),Error(a(418));for(;n;)wu(e,n),n=ii(n.nextSibling)}if(h(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(n===0){jn=ii(e.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}e=e.nextSibling}jn=null}}else jn=si?ii(e.stateNode.nextSibling):null;return!0}function x(){for(var e=jn;e;)e=ii(e.nextSibling)}function C(){jn=si=null,Ut=!1}function P(e){Fi===null?Fi=[e]:Fi.push(e)}var T=Re.ReactCurrentBatchConfig;function D(e,n,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(a(309));var p=l.stateNode}if(!p)throw Error(a(147,e));var w=p,k=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===k?n.ref:(n=function(A){var V=w.refs;A===null?delete V[k]:V[k]=A},n._stringRef=k,n)}if(typeof e!="string")throw Error(a(284));if(!l._owner)throw Error(a(290,e))}return e}function H(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function $(e){var n=e._init;return n(e._payload)}function fe(e){function n(pe,re){if(e){var ge=pe.deletions;ge===null?(pe.deletions=[re],pe.flags|=16):ge.push(re)}}function l(pe,re){if(!e)return null;for(;re!==null;)n(pe,re),re=re.sibling;return null}function p(pe,re){for(pe=new Map;re!==null;)re.key!==null?pe.set(re.key,re):pe.set(re.index,re),re=re.sibling;return pe}function w(pe,re){return pe=To(pe,re),pe.index=0,pe.sibling=null,pe}function k(pe,re,ge){return pe.index=ge,e?(ge=pe.alternate,ge!==null?(ge=ge.index,ge<re?(pe.flags|=2,re):ge):(pe.flags|=2,re)):(pe.flags|=1048576,re)}function A(pe){return e&&pe.alternate===null&&(pe.flags|=2),pe}function V(pe,re,ge,Ae){return re===null||re.tag!==6?(re=Wh(ge,pe.mode,Ae),re.return=pe,re):(re=w(re,ge),re.return=pe,re)}function Q(pe,re,ge,Ae){var Je=ge.type;return Je===Xe?Me(pe,re,ge.props.children,Ae,ge.key):re!==null&&(re.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===At&&$(Je)===re.type)?(Ae=w(re,ge.props),Ae.ref=D(pe,re,ge),Ae.return=pe,Ae):(Ae=Nu(ge.type,ge.key,ge.props,null,pe.mode,Ae),Ae.ref=D(pe,re,ge),Ae.return=pe,Ae)}function ve(pe,re,ge,Ae){return re===null||re.tag!==4||re.stateNode.containerInfo!==ge.containerInfo||re.stateNode.implementation!==ge.implementation?(re=qh(ge,pe.mode,Ae),re.return=pe,re):(re=w(re,ge.children||[]),re.return=pe,re)}function Me(pe,re,ge,Ae,Je){return re===null||re.tag!==7?(re=Ea(ge,pe.mode,Ae,Je),re.return=pe,re):(re=w(re,ge),re.return=pe,re)}function Be(pe,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Wh(""+re,pe.mode,ge),re.return=pe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Ye:return ge=Nu(re.type,re.key,re.props,null,pe.mode,ge),ge.ref=D(pe,null,re),ge.return=pe,ge;case We:return re=qh(re,pe.mode,ge),re.return=pe,re;case At:var Ae=re._init;return Be(pe,Ae(re._payload),ge)}if(Rr(re)||tt(re))return re=Ea(re,pe.mode,ge,null),re.return=pe,re;H(pe,re)}return null}function Se(pe,re,ge,Ae){var Je=re!==null?re.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Je!==null?null:V(pe,re,""+ge,Ae);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case Ye:return ge.key===Je?Q(pe,re,ge,Ae):null;case We:return ge.key===Je?ve(pe,re,ge,Ae):null;case At:return Je=ge._init,Se(pe,re,Je(ge._payload),Ae)}if(Rr(ge)||tt(ge))return Je!==null?null:Me(pe,re,ge,Ae,null);H(pe,ge)}return null}function Ne(pe,re,ge,Ae,Je){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return pe=pe.get(ge)||null,V(re,pe,""+Ae,Je);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case Ye:return pe=pe.get(Ae.key===null?ge:Ae.key)||null,Q(re,pe,Ae,Je);case We:return pe=pe.get(Ae.key===null?ge:Ae.key)||null,ve(re,pe,Ae,Je);case At:var rt=Ae._init;return Ne(pe,re,ge,rt(Ae._payload),Je)}if(Rr(Ae)||tt(Ae))return pe=pe.get(ge)||null,Me(re,pe,Ae,Je,null);H(re,Ae)}return null}function Ve(pe,re,ge,Ae){for(var Je=null,rt=null,st=re,ct=re=0,An=null;st!==null&&ct<ge.length;ct++){st.index>ct?(An=st,st=null):An=st.sibling;var Tt=Se(pe,st,ge[ct],Ae);if(Tt===null){st===null&&(st=An);break}e&&st&&Tt.alternate===null&&n(pe,st),re=k(Tt,re,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt,st=An}if(ct===ge.length)return l(pe,st),Ut&&Is(pe,ct),Je;if(st===null){for(;ct<ge.length;ct++)st=Be(pe,ge[ct],Ae),st!==null&&(re=k(st,re,ct),rt===null?Je=st:rt.sibling=st,rt=st);return Ut&&Is(pe,ct),Je}for(st=p(pe,st);ct<ge.length;ct++)An=Ne(st,pe,ct,ge[ct],Ae),An!==null&&(e&&An.alternate!==null&&st.delete(An.key===null?ct:An.key),re=k(An,re,ct),rt===null?Je=An:rt.sibling=An,rt=An);return e&&st.forEach(function(Ao){return n(pe,Ao)}),Ut&&Is(pe,ct),Je}function qe(pe,re,ge,Ae){var Je=tt(ge);if(typeof Je!="function")throw Error(a(150));if(ge=Je.call(ge),ge==null)throw Error(a(151));for(var rt=Je=null,st=re,ct=re=0,An=null,Tt=ge.next();st!==null&&!Tt.done;ct++,Tt=ge.next()){st.index>ct?(An=st,st=null):An=st.sibling;var Ao=Se(pe,st,Tt.value,Ae);if(Ao===null){st===null&&(st=An);break}e&&st&&Ao.alternate===null&&n(pe,st),re=k(Ao,re,ct),rt===null?Je=Ao:rt.sibling=Ao,rt=Ao,st=An}if(Tt.done)return l(pe,st),Ut&&Is(pe,ct),Je;if(st===null){for(;!Tt.done;ct++,Tt=ge.next())Tt=Be(pe,Tt.value,Ae),Tt!==null&&(re=k(Tt,re,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt);return Ut&&Is(pe,ct),Je}for(st=p(pe,st);!Tt.done;ct++,Tt=ge.next())Tt=Ne(st,pe,ct,Tt.value,Ae),Tt!==null&&(e&&Tt.alternate!==null&&st.delete(Tt.key===null?ct:Tt.key),re=k(Tt,re,ct),rt===null?Je=Tt:rt.sibling=Tt,rt=Tt);return e&&st.forEach(function(Cm){return n(pe,Cm)}),Ut&&Is(pe,ct),Je}function un(pe,re,ge,Ae){if(typeof ge=="object"&&ge!==null&&ge.type===Xe&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case Ye:e:{for(var Je=ge.key,rt=re;rt!==null;){if(rt.key===Je){if(Je=ge.type,Je===Xe){if(rt.tag===7){l(pe,rt.sibling),re=w(rt,ge.props.children),re.return=pe,pe=re;break e}}else if(rt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===At&&$(Je)===rt.type){l(pe,rt.sibling),re=w(rt,ge.props),re.ref=D(pe,rt,ge),re.return=pe,pe=re;break e}l(pe,rt);break}else n(pe,rt);rt=rt.sibling}ge.type===Xe?(re=Ea(ge.props.children,pe.mode,Ae,ge.key),re.return=pe,pe=re):(Ae=Nu(ge.type,ge.key,ge.props,null,pe.mode,Ae),Ae.ref=D(pe,re,ge),Ae.return=pe,pe=Ae)}return A(pe);case We:e:{for(rt=ge.key;re!==null;){if(re.key===rt)if(re.tag===4&&re.stateNode.containerInfo===ge.containerInfo&&re.stateNode.implementation===ge.implementation){l(pe,re.sibling),re=w(re,ge.children||[]),re.return=pe,pe=re;break e}else{l(pe,re);break}else n(pe,re);re=re.sibling}re=qh(ge,pe.mode,Ae),re.return=pe,pe=re}return A(pe);case At:return rt=ge._init,un(pe,re,rt(ge._payload),Ae)}if(Rr(ge))return Ve(pe,re,ge,Ae);if(tt(ge))return qe(pe,re,ge,Ae);H(pe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,re!==null&&re.tag===6?(l(pe,re.sibling),re=w(re,ge),re.return=pe,pe=re):(l(pe,re),re=Wh(ge,pe.mode,Ae),re.return=pe,pe=re),A(pe)):l(pe,re)}return un}var me=fe(!0),Pe=fe(!1),De=wr(null),Ie=null,mt=null,G=null;function J(){G=mt=Ie=null}function se(e){var n=De.current;Nt(De),e._currentValue=n}function _e(e,n,l){for(;e!==null;){var p=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,p!==null&&(p.childLanes|=n)):p!==null&&(p.childLanes&n)!==n&&(p.childLanes|=n),e===l)break;e=e.return}}function oe(e,n){Ie=e,G=mt=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Pi=!0),e.firstContext=null)}function de(e){var n=e._currentValue;if(G!==e)if(e={context:e,memoizedValue:n,next:null},mt===null){if(Ie===null)throw Error(a(308));mt=e,Ie.dependencies={lanes:0,firstContext:e}}else mt=mt.next=e;return n}var B=null;function O(e){B===null?B=[e]:B.push(e)}function F(e,n,l,p){var w=n.interleaved;return w===null?(l.next=l,O(n)):(l.next=w.next,w.next=l),n.interleaved=l,j(e,p)}function j(e,n){e.lanes|=n;var l=e.alternate;for(l!==null&&(l.lanes|=n),l=e,e=e.return;e!==null;)e.childLanes|=n,l=e.alternate,l!==null&&(l.childLanes|=n),l=e,e=e.return;return l.tag===3?l.stateNode:null}var z=!1;function U(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function K(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ee(e,n,l){var p=e.updateQueue;if(p===null)return null;if(p=p.shared,(Pt&2)!==0){var w=p.pending;return w===null?n.next=n:(n.next=w.next,w.next=n),p.pending=n,j(e,l)}return w=p.interleaved,w===null?(n.next=n,O(p)):(n.next=w.next,w.next=n),p.interleaved=n,j(e,l)}function ue(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var p=n.lanes;p&=e.pendingLanes,l|=p,n.lanes=l,Ai(e,l)}}function ce(e,n){var l=e.updateQueue,p=e.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var w=null,k=null;if(l=l.firstBaseUpdate,l!==null){do{var A={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};k===null?w=k=A:k=k.next=A,l=l.next}while(l!==null);k===null?w=k=n:k=k.next=n}else w=k=n;l={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:k,shared:p.shared,effects:p.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}function Ce(e,n,l,p){var w=e.updateQueue;z=!1;var k=w.firstBaseUpdate,A=w.lastBaseUpdate,V=w.shared.pending;if(V!==null){w.shared.pending=null;var Q=V,ve=Q.next;Q.next=null,A===null?k=ve:A.next=ve,A=Q;var Me=e.alternate;Me!==null&&(Me=Me.updateQueue,V=Me.lastBaseUpdate,V!==A&&(V===null?Me.firstBaseUpdate=ve:V.next=ve,Me.lastBaseUpdate=Q))}if(k!==null){var Be=w.baseState;A=0,Me=ve=Q=null,V=k;do{var Se=V.lane,Ne=V.eventTime;if((p&Se)===Se){Me!==null&&(Me=Me.next={eventTime:Ne,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Ve=e,qe=V;switch(Se=n,Ne=l,qe.tag){case 1:if(Ve=qe.payload,typeof Ve=="function"){Be=Ve.call(Ne,Be,Se);break e}Be=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=qe.payload,Se=typeof Ve=="function"?Ve.call(Ne,Be,Se):Ve,Se==null)break e;Be=be({},Be,Se);break e;case 2:z=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,Se=w.effects,Se===null?w.effects=[V]:Se.push(V))}else Ne={eventTime:Ne,lane:Se,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Me===null?(ve=Me=Ne,Q=Be):Me=Me.next=Ne,A|=Se;if(V=V.next,V===null){if(V=w.shared.pending,V===null)break;Se=V,V=Se.next,Se.next=null,w.lastBaseUpdate=Se,w.shared.pending=null}}while(!0);if(Me===null&&(Q=Be),w.baseState=Q,w.firstBaseUpdate=ve,w.lastBaseUpdate=Me,n=w.shared.interleaved,n!==null){w=n;do A|=w.lane,w=w.next;while(w!==n)}else k===null&&(w.shared.lanes=0);La|=A,e.lanes=A,e.memoizedState=Be}}function je(e,n,l){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var p=e[n],w=p.callback;if(w!==null){if(p.callback=null,p=l,typeof w!="function")throw Error(a(191,w));w.call(p)}}}var ze={},$e=wr(ze),Ct=wr(ze),bt=wr(ze);function _t(e){if(e===ze)throw Error(a(174));return e}function Bt(e,n){switch(jt(bt,n),jt(Ct,e),jt($e,ze),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:qs(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=qs(n,e)}Nt($e),jt($e,n)}function qt(){Nt($e),Nt(Ct),Nt(bt)}function va(e){_t(bt.current);var n=_t($e.current),l=qs(n,e.type);n!==l&&(jt(Ct,e),jt($e,l))}function wa(e){Ct.current===e&&(Nt($e),Nt(Ct))}var Ft=wr(0);function oi(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var js=[];function Vn(){for(var e=0;e<js.length;e++)js[e]._workInProgressVersionPrimary=null;js.length=0}var fn=Re.ReactCurrentDispatcher,$t=Re.ReactCurrentBatchConfig,xa=0,Kt=null,Ln=null,Bn=null,xu=!1,Gl=!1,Vl=0,Zp=0;function Hn(){throw Error(a(321))}function ph(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!Gn(e[l],n[l]))return!1;return!0}function mh(e,n,l,p,w,k){if(xa=k,Kt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,fn.current=e===null||e.memoizedState===null?Jp:Yp,e=l(p,w),Gl){k=0;do{if(Gl=!1,Vl=0,25<=k)throw Error(a(301));k+=1,Bn=Ln=null,n.updateQueue=null,fn.current=Xp,e=l(p,w)}while(Gl)}if(fn.current=Cu,n=Ln!==null&&Ln.next!==null,xa=0,Bn=Ln=Kt=null,xu=!1,n)throw Error(a(300));return e}function gh(){var e=Vl!==0;return Vl=0,e}function rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Kt.memoizedState=Bn=e:Bn=Bn.next=e,Bn}function nr(){if(Ln===null){var e=Kt.alternate;e=e!==null?e.memoizedState:null}else e=Ln.next;var n=Bn===null?Kt.memoizedState:Bn.next;if(n!==null)Bn=n,Ln=e;else{if(e===null)throw Error(a(310));Ln=e,e={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Bn===null?Kt.memoizedState=Bn=e:Bn=Bn.next=e}return Bn}function Hl(e,n){return typeof n=="function"?n(e):n}function _h(e){var n=nr(),l=n.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var p=Ln,w=p.baseQueue,k=l.pending;if(k!==null){if(w!==null){var A=w.next;w.next=k.next,k.next=A}p.baseQueue=w=k,l.pending=null}if(w!==null){k=w.next,p=p.baseState;var V=A=null,Q=null,ve=k;do{var Me=ve.lane;if((xa&Me)===Me)Q!==null&&(Q=Q.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),p=ve.hasEagerState?ve.eagerState:e(p,ve.action);else{var Be={lane:Me,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};Q===null?(V=Q=Be,A=p):Q=Q.next=Be,Kt.lanes|=Me,La|=Me}ve=ve.next}while(ve!==null&&ve!==k);Q===null?A=p:Q.next=V,Gn(p,n.memoizedState)||(Pi=!0),n.memoizedState=p,n.baseState=A,n.baseQueue=Q,l.lastRenderedState=p}if(e=l.interleaved,e!==null){w=e;do k=w.lane,Kt.lanes|=k,La|=k,w=w.next;while(w!==e)}else w===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function yh(e){var n=nr(),l=n.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var p=l.dispatch,w=l.pending,k=n.memoizedState;if(w!==null){l.pending=null;var A=w=w.next;do k=e(k,A.action),A=A.next;while(A!==w);Gn(k,n.memoizedState)||(Pi=!0),n.memoizedState=k,n.baseQueue===null&&(n.baseState=k),l.lastRenderedState=k}return[k,p]}function Vc(){}function Hc(e,n){var l=Kt,p=nr(),w=n(),k=!Gn(p.memoizedState,w);if(k&&(p.memoizedState=w,Pi=!0),p=p.queue,vh(qc.bind(null,l,p,e),[e]),p.getSnapshot!==n||k||Bn!==null&&Bn.memoizedState.tag&1){if(l.flags|=2048,Zl(9,Wc.bind(null,l,p,w,n),void 0,null),Tn===null)throw Error(a(349));(xa&30)!==0||Zc(l,n,w)}return w}function Zc(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=Kt.updateQueue,n===null?(n={lastEffect:null,stores:null},Kt.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function Wc(e,n,l,p){n.value=l,n.getSnapshot=p,Kc(n)&&Jc(e)}function qc(e,n,l){return l(function(){Kc(n)&&Jc(e)})}function Kc(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!Gn(e,l)}catch{return!0}}function Jc(e){var n=j(e,1);n!==null&&Er(n,e,1,-1)}function Yc(e){var n=rs();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:e},n.queue=e,e=e.dispatch=Kp.bind(null,Kt,e),[n.memoizedState,e]}function Zl(e,n,l,p){return e={tag:e,create:n,destroy:l,deps:p,next:null},n=Kt.updateQueue,n===null?(n={lastEffect:null,stores:null},Kt.updateQueue=n,n.lastEffect=e.next=e):(l=n.lastEffect,l===null?n.lastEffect=e.next=e:(p=l.next,l.next=e,e.next=p,n.lastEffect=e)),e}function Xc(){return nr().memoizedState}function Lu(e,n,l,p){var w=rs();Kt.flags|=e,w.memoizedState=Zl(1|n,l,void 0,p===void 0?null:p)}function ku(e,n,l,p){var w=nr();p=p===void 0?null:p;var k=void 0;if(Ln!==null){var A=Ln.memoizedState;if(k=A.destroy,p!==null&&ph(p,A.deps)){w.memoizedState=Zl(n,l,k,p);return}}Kt.flags|=e,w.memoizedState=Zl(1|n,l,k,p)}function Qc(e,n){return Lu(8390656,8,e,n)}function vh(e,n){return ku(2048,8,e,n)}function ed(e,n){return ku(4,2,e,n)}function td(e,n){return ku(4,4,e,n)}function nd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function id(e,n,l){return l=l!=null?l.concat([e]):null,ku(4,4,nd.bind(null,n,e),l)}function wh(){}function rd(e,n){var l=nr();n=n===void 0?null:n;var p=l.memoizedState;return p!==null&&n!==null&&ph(n,p[1])?p[0]:(l.memoizedState=[e,n],e)}function sd(e,n){var l=nr();n=n===void 0?null:n;var p=l.memoizedState;return p!==null&&n!==null&&ph(n,p[1])?p[0]:(e=e(),l.memoizedState=[e,n],e)}function od(e,n,l){return(xa&21)===0?(e.baseState&&(e.baseState=!1,Pi=!0),e.memoizedState=l):(Gn(l,n)||(l=Ha(),Kt.lanes|=l,La|=l,e.baseState=!0),n)}function Wp(e,n){var l=Lt;Lt=l!==0&&4>l?l:4,e(!0);var p=$t.transition;$t.transition={};try{e(!1),n()}finally{Lt=l,$t.transition=p}}function ad(){return nr().memoizedState}function qp(e,n,l){var p=Mo(e);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},ld(e))ud(n,l);else if(l=F(e,n,l,p),l!==null){var w=li();Er(l,e,p,w),hd(l,n,p)}}function Kp(e,n,l){var p=Mo(e),w={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(ld(e))ud(n,w);else{var k=e.alternate;if(e.lanes===0&&(k===null||k.lanes===0)&&(k=n.lastRenderedReducer,k!==null))try{var A=n.lastRenderedState,V=k(A,l);if(w.hasEagerState=!0,w.eagerState=V,Gn(V,A)){var Q=n.interleaved;Q===null?(w.next=w,O(n)):(w.next=Q.next,Q.next=w),n.interleaved=w;return}}catch{}finally{}l=F(e,n,w,p),l!==null&&(w=li(),Er(l,e,p,w),hd(l,n,p))}}function ld(e){var n=e.alternate;return e===Kt||n!==null&&n===Kt}function ud(e,n){Gl=xu=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function hd(e,n,l){if((l&4194240)!==0){var p=n.lanes;p&=e.pendingLanes,l|=p,n.lanes=l,Ai(e,l)}}var Cu={readContext:de,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},Jp={readContext:de,useCallback:function(e,n){return rs().memoizedState=[e,n===void 0?null:n],e},useContext:de,useEffect:Qc,useImperativeHandle:function(e,n,l){return l=l!=null?l.concat([e]):null,Lu(4194308,4,nd.bind(null,n,e),l)},useLayoutEffect:function(e,n){return Lu(4194308,4,e,n)},useInsertionEffect:function(e,n){return Lu(4,2,e,n)},useMemo:function(e,n){var l=rs();return n=n===void 0?null:n,e=e(),l.memoizedState=[e,n],e},useReducer:function(e,n,l){var p=rs();return n=l!==void 0?l(n):n,p.memoizedState=p.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},p.queue=e,e=e.dispatch=qp.bind(null,Kt,e),[p.memoizedState,e]},useRef:function(e){var n=rs();return e={current:e},n.memoizedState=e},useState:Yc,useDebugValue:wh,useDeferredValue:function(e){return rs().memoizedState=e},useTransition:function(){var e=Yc(!1),n=e[0];return e=Wp.bind(null,e[1]),rs().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,l){var p=Kt,w=rs();if(Ut){if(l===void 0)throw Error(a(407));l=l()}else{if(l=n(),Tn===null)throw Error(a(349));(xa&30)!==0||Zc(p,n,l)}w.memoizedState=l;var k={value:l,getSnapshot:n};return w.queue=k,Qc(qc.bind(null,p,k,e),[e]),p.flags|=2048,Zl(9,Wc.bind(null,p,k,l,n),void 0,null),l},useId:function(){var e=rs(),n=Tn.identifierPrefix;if(Ut){var l=Lr,p=xr;l=(p&~(1<<32-dt(p)-1)).toString(32)+l,n=":"+n+"R"+l,l=Vl++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=Zp++,n=":"+n+"r"+l.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Yp={readContext:de,useCallback:rd,useContext:de,useEffect:vh,useImperativeHandle:id,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:_h,useRef:Xc,useState:function(){return _h(Hl)},useDebugValue:wh,useDeferredValue:function(e){var n=nr();return od(n,Ln.memoizedState,e)},useTransition:function(){var e=_h(Hl)[0],n=nr().memoizedState;return[e,n]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:ad,unstable_isNewReconciler:!1},Xp={readContext:de,useCallback:rd,useContext:de,useEffect:vh,useImperativeHandle:id,useInsertionEffect:ed,useLayoutEffect:td,useMemo:sd,useReducer:yh,useRef:Xc,useState:function(){return yh(Hl)},useDebugValue:wh,useDeferredValue:function(e){var n=nr();return Ln===null?n.memoizedState=e:od(n,Ln.memoizedState,e)},useTransition:function(){var e=yh(Hl)[0],n=nr().memoizedState;return[e,n]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:ad,unstable_isNewReconciler:!1};function kr(e,n){if(e&&e.defaultProps){n=be({},n),e=e.defaultProps;for(var l in e)n[l]===void 0&&(n[l]=e[l]);return n}return n}function xh(e,n,l,p){n=e.memoizedState,l=l(p,n),l=l==null?n:be({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var bu={isMounted:function(e){return(e=e._reactInternals)?$i(e)===e:!1},enqueueSetState:function(e,n,l){e=e._reactInternals;var p=li(),w=Mo(e),k=K(p,w);k.payload=n,l!=null&&(k.callback=l),n=ee(e,k,w),n!==null&&(Er(n,e,w,p),ue(n,e,w))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var p=li(),w=Mo(e),k=K(p,w);k.tag=1,k.payload=n,l!=null&&(k.callback=l),n=ee(e,k,w),n!==null&&(Er(n,e,w,p),ue(n,e,w))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=li(),p=Mo(e),w=K(l,p);w.tag=2,n!=null&&(w.callback=n),n=ee(e,w,p),n!==null&&(Er(n,e,p,l),ue(n,e,p))}};function cd(e,n,l,p,w,k,A){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(p,k,A):n.prototype&&n.prototype.isPureReactComponent?!yi(l,p)||!yi(w,k):!0}function dd(e,n,l){var p=!1,w=ns,k=n.contextType;return typeof k=="object"&&k!==null?k=de(k):(w=wn(n)?Rs:Qt.current,p=n.contextTypes,k=(p=p!=null)?ko(e,w):ns),n=new n(l,k),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=bu,e.stateNode=n,n._reactInternals=e,p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=w,e.__reactInternalMemoizedMaskedChildContext=k),n}function fd(e,n,l,p){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,p),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,p),n.state!==e&&bu.enqueueReplaceState(n,n.state,null)}function Lh(e,n,l,p){var w=e.stateNode;w.props=l,w.state=e.memoizedState,w.refs={},U(e);var k=n.contextType;typeof k=="object"&&k!==null?w.context=de(k):(k=wn(n)?Rs:Qt.current,w.context=ko(e,k)),w.state=e.memoizedState,k=n.getDerivedStateFromProps,typeof k=="function"&&(xh(e,n,k,l),w.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(n=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),n!==w.state&&bu.enqueueReplaceState(w,w.state,null),Ce(e,l,w,p),w.state=e.memoizedState),typeof w.componentDidMount=="function"&&(e.flags|=4194308)}function ll(e,n){try{var l="",p=n;do l+=He(p),p=p.return;while(p);var w=l}catch(k){w=`
Error generating stack: `+k.message+`
`+k.stack}return{value:e,source:n,stack:w,digest:null}}function kh(e,n,l){return{value:e,source:null,stack:l??null,digest:n??null}}function Ch(e,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var Qp=typeof WeakMap=="function"?WeakMap:Map;function pd(e,n,l){l=K(-1,l),l.tag=3,l.payload={element:null};var p=n.value;return l.callback=function(){Au||(Au=!0,Fh=p),Ch(e,n)},l}function md(e,n,l){l=K(-1,l),l.tag=3;var p=e.type.getDerivedStateFromError;if(typeof p=="function"){var w=n.value;l.payload=function(){return p(w)},l.callback=function(){Ch(e,n)}}var k=e.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(l.callback=function(){Ch(e,n),typeof p!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var A=n.stack;this.componentDidCatch(n.value,{componentStack:A!==null?A:""})}),l}function gd(e,n,l){var p=e.pingCache;if(p===null){p=e.pingCache=new Qp;var w=new Set;p.set(n,w)}else w=p.get(n),w===void 0&&(w=new Set,p.set(n,w));w.has(l)||(w.add(l),e=fm.bind(null,e,n,l),n.then(e,e))}function _d(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function yd(e,n,l,p,w){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=K(-1,1),n.tag=2,ee(l,n,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=w,e)}var em=Re.ReactCurrentOwner,Pi=!1;function ai(e,n,l,p){n.child=e===null?Pe(n,null,l,p):me(n,e.child,l,p)}function vd(e,n,l,p,w){l=l.render;var k=n.ref;return oe(n,w),p=mh(e,n,l,p,k,w),l=gh(),e!==null&&!Pi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~w,Ns(e,n,w)):(Ut&&l&&tr(n),n.flags|=1,ai(e,n,p,w),n.child)}function wd(e,n,l,p,w){if(e===null){var k=l.type;return typeof k=="function"&&!Zh(k)&&k.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=k,xd(e,n,k,p,w)):(e=Nu(l.type,null,p,n,n.mode,w),e.ref=n.ref,e.return=n,n.child=e)}if(k=e.child,(e.lanes&w)===0){var A=k.memoizedProps;if(l=l.compare,l=l!==null?l:yi,l(A,p)&&e.ref===n.ref)return Ns(e,n,w)}return n.flags|=1,e=To(k,p),e.ref=n.ref,e.return=n,n.child=e}function xd(e,n,l,p,w){if(e!==null){var k=e.memoizedProps;if(yi(k,p)&&e.ref===n.ref)if(Pi=!1,n.pendingProps=p=k,(e.lanes&w)!==0)(e.flags&131072)!==0&&(Pi=!0);else return n.lanes=e.lanes,Ns(e,n,w)}return bh(e,n,l,p,w)}function Ld(e,n,l){var p=n.pendingProps,w=p.children,k=e!==null?e.memoizedState:null;if(p.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(hl,zi),zi|=l;else{if((l&1073741824)===0)return e=k!==null?k.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,jt(hl,zi),zi|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=k!==null?k.baseLanes:l,jt(hl,zi),zi|=p}else k!==null?(p=k.baseLanes|l,n.memoizedState=null):p=l,jt(hl,zi),zi|=p;return ai(e,n,w,l),n.child}function kd(e,n){var l=n.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function bh(e,n,l,p,w){var k=wn(l)?Rs:Qt.current;return k=ko(n,k),oe(n,w),l=mh(e,n,l,p,k,w),p=gh(),e!==null&&!Pi?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~w,Ns(e,n,w)):(Ut&&p&&tr(n),n.flags|=1,ai(e,n,l,w),n.child)}function Cd(e,n,l,p,w){if(wn(l)){var k=!0;rl(n)}else k=!1;if(oe(n,w),n.stateNode===null)Pu(e,n),dd(n,l,p),Lh(n,l,p,w),p=!0;else if(e===null){var A=n.stateNode,V=n.memoizedProps;A.props=V;var Q=A.context,ve=l.contextType;typeof ve=="object"&&ve!==null?ve=de(ve):(ve=wn(l)?Rs:Qt.current,ve=ko(n,ve));var Me=l.getDerivedStateFromProps,Be=typeof Me=="function"||typeof A.getSnapshotBeforeUpdate=="function";Be||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(V!==p||Q!==ve)&&fd(n,A,p,ve),z=!1;var Se=n.memoizedState;A.state=Se,Ce(n,p,A,w),Q=n.memoizedState,V!==p||Se!==Q||vn.current||z?(typeof Me=="function"&&(xh(n,l,Me,p),Q=n.memoizedState),(V=z||cd(n,l,V,p,Se,Q,ve))?(Be||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(n.flags|=4194308)):(typeof A.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=p,n.memoizedState=Q),A.props=p,A.state=Q,A.context=ve,p=V):(typeof A.componentDidMount=="function"&&(n.flags|=4194308),p=!1)}else{A=n.stateNode,X(e,n),V=n.memoizedProps,ve=n.type===n.elementType?V:kr(n.type,V),A.props=ve,Be=n.pendingProps,Se=A.context,Q=l.contextType,typeof Q=="object"&&Q!==null?Q=de(Q):(Q=wn(l)?Rs:Qt.current,Q=ko(n,Q));var Ne=l.getDerivedStateFromProps;(Me=typeof Ne=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(V!==Be||Se!==Q)&&fd(n,A,p,Q),z=!1,Se=n.memoizedState,A.state=Se,Ce(n,p,A,w);var Ve=n.memoizedState;V!==Be||Se!==Ve||vn.current||z?(typeof Ne=="function"&&(xh(n,l,Ne,p),Ve=n.memoizedState),(ve=z||cd(n,l,ve,p,Se,Ve,Q)||!1)?(Me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,Ve,Q),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,Ve,Q)),typeof A.componentDidUpdate=="function"&&(n.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof A.componentDidUpdate!="function"||V===e.memoizedProps&&Se===e.memoizedState||(n.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&Se===e.memoizedState||(n.flags|=1024),n.memoizedProps=p,n.memoizedState=Ve),A.props=p,A.state=Ve,A.context=Q,p=ve):(typeof A.componentDidUpdate!="function"||V===e.memoizedProps&&Se===e.memoizedState||(n.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&Se===e.memoizedState||(n.flags|=1024),p=!1)}return Eh(e,n,l,p,k,w)}function Eh(e,n,l,p,w,k){kd(e,n);var A=(n.flags&128)!==0;if(!p&&!A)return w&&Fl(n,l,!1),Ns(e,n,k);p=n.stateNode,em.current=n;var V=A&&typeof l.getDerivedStateFromError!="function"?null:p.render();return n.flags|=1,e!==null&&A?(n.child=me(n,e.child,null,k),n.child=me(n,null,V,k)):ai(e,n,V,k),n.memoizedState=p.state,w&&Fl(n,l,!0),n.child}function bd(e){var n=e.stateNode;n.pendingContext?Nl(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Nl(e,n.context,!1),Bt(e,n.containerInfo)}function Ed(e,n,l,p,w){return C(),P(w),n.flags|=256,ai(e,n,l,p),n.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Sh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pd(e,n,l){var p=n.pendingProps,w=Ft.current,k=!1,A=(n.flags&128)!==0,V;if((V=A)||(V=e!==null&&e.memoizedState===null?!1:(w&2)!==0),V?(k=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(w|=1),jt(Ft,w&1),e===null)return u(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(A=p.children,e=p.fallback,k?(p=n.mode,k=n.child,A={mode:"hidden",children:A},(p&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=A):k=Fu(A,p,0,null),e=Ea(e,p,l,null),k.return=n,e.return=n,k.sibling=e,n.child=k,n.child.memoizedState=Sh(l),n.memoizedState=Ph,e):Mh(n,A));if(w=e.memoizedState,w!==null&&(V=w.dehydrated,V!==null))return tm(e,n,A,p,V,w,l);if(k){k=p.fallback,A=n.mode,w=e.child,V=w.sibling;var Q={mode:"hidden",children:p.children};return(A&1)===0&&n.child!==w?(p=n.child,p.childLanes=0,p.pendingProps=Q,n.deletions=null):(p=To(w,Q),p.subtreeFlags=w.subtreeFlags&14680064),V!==null?k=To(V,k):(k=Ea(k,A,l,null),k.flags|=2),k.return=n,p.return=n,p.sibling=k,n.child=p,p=k,k=n.child,A=e.child.memoizedState,A=A===null?Sh(l):{baseLanes:A.baseLanes|l,cachePool:null,transitions:A.transitions},k.memoizedState=A,k.childLanes=e.childLanes&~l,n.memoizedState=Ph,p}return k=e.child,e=k.sibling,p=To(k,{mode:"visible",children:p.children}),(n.mode&1)===0&&(p.lanes=l),p.return=n,p.sibling=null,e!==null&&(l=n.deletions,l===null?(n.deletions=[e],n.flags|=16):l.push(e)),n.child=p,n.memoizedState=null,p}function Mh(e,n){return n=Fu({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Eu(e,n,l,p){return p!==null&&P(p),me(n,e.child,null,l),e=Mh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function tm(e,n,l,p,w,k,A){if(l)return n.flags&256?(n.flags&=-257,p=kh(Error(a(422))),Eu(e,n,A,p)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(k=p.fallback,w=n.mode,p=Fu({mode:"visible",children:p.children},w,0,null),k=Ea(k,w,A,null),k.flags|=2,p.return=n,k.return=n,p.sibling=k,n.child=p,(n.mode&1)!==0&&me(n,e.child,null,A),n.child.memoizedState=Sh(A),n.memoizedState=Ph,k);if((n.mode&1)===0)return Eu(e,n,A,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var V=p.dgst;return p=V,k=Error(a(419)),p=kh(k,p,void 0),Eu(e,n,A,p)}if(V=(A&e.childLanes)!==0,Pi||V){if(p=Tn,p!==null){switch(A&-A){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|A))!==0?0:w,w!==0&&w!==k.retryLane&&(k.retryLane=w,j(e,w),Er(p,e,w,-1))}return Hh(),p=kh(Error(a(421))),Eu(e,n,A,p)}return w.data==="$?"?(n.flags|=128,n.child=e.child,n=pm.bind(null,e),w._reactRetry=n,null):(e=k.treeContext,jn=ii(w.nextSibling),si=n,Ut=!0,Fi=null,e!==null&&(ri[xn++]=xr,ri[xn++]=Lr,ri[xn++]=er,xr=e.id,Lr=e.overflow,er=n),n=Mh(n,p.children),n.flags|=4096,n)}function Sd(e,n,l){e.lanes|=n;var p=e.alternate;p!==null&&(p.lanes|=n),_e(e.return,n,l)}function Bh(e,n,l,p,w){var k=e.memoizedState;k===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:w}:(k.isBackwards=n,k.rendering=null,k.renderingStartTime=0,k.last=p,k.tail=l,k.tailMode=w)}function Md(e,n,l){var p=n.pendingProps,w=p.revealOrder,k=p.tail;if(ai(e,n,p.children,l),p=Ft.current,(p&2)!==0)p=p&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sd(e,l,n);else if(e.tag===19)Sd(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}p&=1}if(jt(Ft,p),(n.mode&1)===0)n.memoizedState=null;else switch(w){case"forwards":for(l=n.child,w=null;l!==null;)e=l.alternate,e!==null&&oi(e)===null&&(w=l),l=l.sibling;l=w,l===null?(w=n.child,n.child=null):(w=l.sibling,l.sibling=null),Bh(n,!1,w,l,k);break;case"backwards":for(l=null,w=n.child,n.child=null;w!==null;){if(e=w.alternate,e!==null&&oi(e)===null){n.child=w;break}e=w.sibling,w.sibling=l,l=w,w=e}Bh(n,!0,l,null,k);break;case"together":Bh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Pu(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Ns(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),La|=n.lanes,(l&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,l=To(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=To(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function nm(e,n,l){switch(n.tag){case 3:bd(n),C();break;case 5:va(n);break;case 1:wn(n.type)&&rl(n);break;case 4:Bt(n,n.stateNode.containerInfo);break;case 10:var p=n.type._context,w=n.memoizedProps.value;jt(De,p._currentValue),p._currentValue=w;break;case 13:if(p=n.memoizedState,p!==null)return p.dehydrated!==null?(jt(Ft,Ft.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?Pd(e,n,l):(jt(Ft,Ft.current&1),e=Ns(e,n,l),e!==null?e.sibling:null);jt(Ft,Ft.current&1);break;case 19:if(p=(l&n.childLanes)!==0,(e.flags&128)!==0){if(p)return Md(e,n,l);n.flags|=128}if(w=n.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),jt(Ft,Ft.current),p)break;return null;case 22:case 23:return n.lanes=0,Ld(e,n,l)}return Ns(e,n,l)}var Bd,Th,Td,Ad;Bd=function(e,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Th=function(){},Td=function(e,n,l,p){var w=e.memoizedProps;if(w!==p){e=n.stateNode,_t($e.current);var k=null;switch(l){case"input":w=Vs(e,w),p=Vs(e,p),k=[];break;case"select":w=be({},w,{value:void 0}),p=be({},p,{value:void 0}),k=[];break;case"textarea":w=Zs(e,w),p=Zs(e,p),k=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(e.onclick=Ee)}Ks(l,p);var A;l=null;for(ve in w)if(!p.hasOwnProperty(ve)&&w.hasOwnProperty(ve)&&w[ve]!=null)if(ve==="style"){var V=w[ve];for(A in V)V.hasOwnProperty(A)&&(l||(l={}),l[A]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(f.hasOwnProperty(ve)?k||(k=[]):(k=k||[]).push(ve,null));for(ve in p){var Q=p[ve];if(V=w?.[ve],p.hasOwnProperty(ve)&&Q!==V&&(Q!=null||V!=null))if(ve==="style")if(V){for(A in V)!V.hasOwnProperty(A)||Q&&Q.hasOwnProperty(A)||(l||(l={}),l[A]="");for(A in Q)Q.hasOwnProperty(A)&&V[A]!==Q[A]&&(l||(l={}),l[A]=Q[A])}else l||(k||(k=[]),k.push(ve,l)),l=Q;else ve==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,V=V?V.__html:void 0,Q!=null&&V!==Q&&(k=k||[]).push(ve,Q)):ve==="children"?typeof Q!="string"&&typeof Q!="number"||(k=k||[]).push(ve,""+Q):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(f.hasOwnProperty(ve)?(Q!=null&&ve==="onScroll"&&ht("scroll",e),k||V===Q||(k=[])):(k=k||[]).push(ve,Q))}l&&(k=k||[]).push("style",l);var ve=k;(n.updateQueue=ve)&&(n.flags|=4)}},Ad=function(e,n,l,p){l!==p&&(n.flags|=4)};function Wl(e,n){if(!Ut)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:p.sibling=null}}function Zn(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,p=0;if(n)for(var w=e.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=e,w=w.sibling;else for(w=e.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=e,w=w.sibling;return e.subtreeFlags|=p,e.childLanes=l,n}function im(e,n,l){var p=n.pendingProps;switch($l(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(n),null;case 1:return wn(n.type)&&Os(),Zn(n),null;case 3:return p=n.stateNode,qt(),Nt(vn),Nt(Qt),Vn(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(e===null||e.child===null)&&(g(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Fi!==null&&($h(Fi),Fi=null))),Th(e,n),Zn(n),null;case 5:wa(n);var w=_t(bt.current);if(l=n.type,e!==null&&n.stateNode!=null)Td(e,n,l,p,w),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!p){if(n.stateNode===null)throw Error(a(166));return Zn(n),null}if(e=_t($e.current),g(n)){p=n.stateNode,l=n.type;var k=n.memoizedProps;switch(p[Ci]=n,p[ts]=k,e=(n.mode&1)!==0,l){case"dialog":ht("cancel",p),ht("close",p);break;case"iframe":case"object":case"embed":ht("load",p);break;case"video":case"audio":for(w=0;w<it.length;w++)ht(it[w],p);break;case"source":ht("error",p);break;case"img":case"image":case"link":ht("error",p),ht("load",p);break;case"details":ht("toggle",p);break;case"input":No(p,k),ht("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!k.multiple},ht("invalid",p);break;case"textarea":zo(p,k),ht("invalid",p)}Ks(l,k),w=null;for(var A in k)if(k.hasOwnProperty(A)){var V=k[A];A==="children"?typeof V=="string"?p.textContent!==V&&(k.suppressHydrationWarning!==!0&&ye(p.textContent,V,e),w=["children",V]):typeof V=="number"&&p.textContent!==""+V&&(k.suppressHydrationWarning!==!0&&ye(p.textContent,V,e),w=["children",""+V]):f.hasOwnProperty(A)&&V!=null&&A==="onScroll"&&ht("scroll",p)}switch(l){case"input":Br(p),sr(p,k,!0);break;case"textarea":Br(p),Ia(p);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(p.onclick=Ee)}p=w,n.updateQueue=p,p!==null&&(n.flags|=4)}else{A=w.nodeType===9?w:w.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ws(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=A.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof p.is=="string"?e=A.createElement(l,{is:p.is}):(e=A.createElement(l),l==="select"&&(A=e,p.multiple?A.multiple=!0:p.size&&(A.size=p.size))):e=A.createElementNS(e,l),e[Ci]=n,e[ts]=p,Bd(e,n,!1,!1),n.stateNode=e;e:{switch(A=Ti(l,p),l){case"dialog":ht("cancel",e),ht("close",e),w=p;break;case"iframe":case"object":case"embed":ht("load",e),w=p;break;case"video":case"audio":for(w=0;w<it.length;w++)ht(it[w],e);w=p;break;case"source":ht("error",e),w=p;break;case"img":case"image":case"link":ht("error",e),ht("load",e),w=p;break;case"details":ht("toggle",e),w=p;break;case"input":No(e,p),w=Vs(e,p),ht("invalid",e);break;case"option":w=p;break;case"select":e._wrapperState={wasMultiple:!!p.multiple},w=be({},p,{value:void 0}),ht("invalid",e);break;case"textarea":zo(e,p),w=Zs(e,p),ht("invalid",e);break;default:w=p}Ks(l,w),V=w;for(k in V)if(V.hasOwnProperty(k)){var Q=V[k];k==="style"?hs(e,Q):k==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&Uo(e,Q)):k==="children"?typeof Q=="string"?(l!=="textarea"||Q!=="")&&or(e,Q):typeof Q=="number"&&or(e,""+Q):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(f.hasOwnProperty(k)?Q!=null&&k==="onScroll"&&ht("scroll",e):Q!=null&&xe(e,k,Q,A))}switch(l){case"input":Br(e),sr(e,p,!1);break;case"textarea":Br(e),Ia(e);break;case"option":p.value!=null&&e.setAttribute("value",""+yt(p.value));break;case"select":e.multiple=!!p.multiple,k=p.value,k!=null?Ui(e,!!p.multiple,k,!1):p.defaultValue!=null&&Ui(e,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(e.onclick=Ee)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Zn(n),null;case 6:if(e&&n.stateNode!=null)Ad(e,n,e.memoizedProps,p);else{if(typeof p!="string"&&n.stateNode===null)throw Error(a(166));if(l=_t(bt.current),_t($e.current),g(n)){if(p=n.stateNode,l=n.memoizedProps,p[Ci]=n,(k=p.nodeValue!==l)&&(e=si,e!==null))switch(e.tag){case 3:ye(p.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ye(p.nodeValue,l,(e.mode&1)!==0)}k&&(n.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[Ci]=n,n.stateNode=p}return Zn(n),null;case 13:if(Nt(Ft),p=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ut&&jn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)x(),C(),n.flags|=98560,k=!1;else if(k=g(n),p!==null&&p.dehydrated!==null){if(e===null){if(!k)throw Error(a(318));if(k=n.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(a(317));k[Ci]=n}else C(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zn(n),k=!1}else Fi!==null&&($h(Fi),Fi=null),k=!0;if(!k)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(p=p!==null,p!==(e!==null&&e.memoizedState!==null)&&p&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ft.current&1)!==0?kn===0&&(kn=3):Hh())),n.updateQueue!==null&&(n.flags|=4),Zn(n),null);case 4:return qt(),Th(e,n),e===null&&on(n.stateNode.containerInfo),Zn(n),null;case 10:return se(n.type._context),Zn(n),null;case 17:return wn(n.type)&&Os(),Zn(n),null;case 19:if(Nt(Ft),k=n.memoizedState,k===null)return Zn(n),null;if(p=(n.flags&128)!==0,A=k.rendering,A===null)if(p)Wl(k,!1);else{if(kn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(A=oi(e),A!==null){for(n.flags|=128,Wl(k,!1),p=A.updateQueue,p!==null&&(n.updateQueue=p,n.flags|=4),n.subtreeFlags=0,p=l,l=n.child;l!==null;)k=l,e=p,k.flags&=14680066,A=k.alternate,A===null?(k.childLanes=0,k.lanes=e,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=A.childLanes,k.lanes=A.lanes,k.child=A.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=A.memoizedProps,k.memoizedState=A.memoizedState,k.updateQueue=A.updateQueue,k.type=A.type,e=A.dependencies,k.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return jt(Ft,Ft.current&1|2),n.child}e=e.sibling}k.tail!==null&&Vt()>cl&&(n.flags|=128,p=!0,Wl(k,!1),n.lanes=4194304)}else{if(!p)if(e=oi(A),e!==null){if(n.flags|=128,p=!0,l=e.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),Wl(k,!0),k.tail===null&&k.tailMode==="hidden"&&!A.alternate&&!Ut)return Zn(n),null}else 2*Vt()-k.renderingStartTime>cl&&l!==1073741824&&(n.flags|=128,p=!0,Wl(k,!1),n.lanes=4194304);k.isBackwards?(A.sibling=n.child,n.child=A):(l=k.last,l!==null?l.sibling=A:n.child=A,k.last=A)}return k.tail!==null?(n=k.tail,k.rendering=n,k.tail=n.sibling,k.renderingStartTime=Vt(),n.sibling=null,l=Ft.current,jt(Ft,p?l&1|2:l&1),n):(Zn(n),null);case 22:case 23:return Vh(),p=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==p&&(n.flags|=8192),p&&(n.mode&1)!==0?(zi&1073741824)!==0&&(Zn(n),n.subtreeFlags&6&&(n.flags|=8192)):Zn(n),null;case 24:return null;case 25:return null}throw Error(a(156,n.tag))}function rm(e,n){switch($l(n),n.tag){case 1:return wn(n.type)&&Os(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return qt(),Nt(vn),Nt(Qt),Vn(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return wa(n),null;case 13:if(Nt(Ft),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));C()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Nt(Ft),null;case 4:return qt(),null;case 10:return se(n.type._context),null;case 22:case 23:return Vh(),null;case 24:return null;default:return null}}var Su=!1,Wn=!1,sm=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function ul(e,n){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){en(e,n,p)}else l.current=null}function Ah(e,n,l){try{l()}catch(p){en(e,n,p)}}var Dd=!1;function om(e,n){if(Oe=xs,e=ma(),ga(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var w=p.anchorOffset,k=p.focusNode;p=p.focusOffset;try{l.nodeType,k.nodeType}catch{l=null;break e}var A=0,V=-1,Q=-1,ve=0,Me=0,Be=e,Se=null;t:for(;;){for(var Ne;Be!==l||w!==0&&Be.nodeType!==3||(V=A+w),Be!==k||p!==0&&Be.nodeType!==3||(Q=A+p),Be.nodeType===3&&(A+=Be.nodeValue.length),(Ne=Be.firstChild)!==null;)Se=Be,Be=Ne;for(;;){if(Be===e)break t;if(Se===l&&++ve===w&&(V=A),Se===k&&++Me===p&&(Q=A),(Ne=Be.nextSibling)!==null)break;Be=Se,Se=Be.parentNode}Be=Ne}l=V===-1||Q===-1?null:{start:V,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(nt={focusedElem:e,selectionRange:l},xs=!1,Ge=n;Ge!==null;)if(n=Ge,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ge=e;else for(;Ge!==null;){n=Ge;try{var Ve=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Ve!==null){var qe=Ve.memoizedProps,un=Ve.memoizedState,pe=n.stateNode,re=pe.getSnapshotBeforeUpdate(n.elementType===n.type?qe:kr(n.type,qe),un);pe.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ge=n.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ae){en(n,n.return,Ae)}if(e=n.sibling,e!==null){e.return=n.return,Ge=e;break}Ge=n.return}return Ve=Dd,Dd=!1,Ve}function ql(e,n,l){var p=n.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&e)===e){var k=w.destroy;w.destroy=void 0,k!==void 0&&Ah(n,l,k)}w=w.next}while(w!==p)}}function Mu(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var p=l.create;l.destroy=p()}l=l.next}while(l!==n)}}function Dh(e){var n=e.ref;if(n!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof n=="function"?n(e):n.current=e}}function Rd(e){var n=e.alternate;n!==null&&(e.alternate=null,Rd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Ci],delete n[ts],delete n[yr],delete n[jl],delete n[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Od(e){return e.tag===5||e.tag===3||e.tag===4}function Id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Od(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rh(e,n,l){var p=e.tag;if(p===5||p===6)e=e.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(e,n):l.insertBefore(e,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(e,l)):(n=l,n.appendChild(e)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Ee));else if(p!==4&&(e=e.child,e!==null))for(Rh(e,n,l),e=e.sibling;e!==null;)Rh(e,n,l),e=e.sibling}function Oh(e,n,l){var p=e.tag;if(p===5||p===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(p!==4&&(e=e.child,e!==null))for(Oh(e,n,l),e=e.sibling;e!==null;)Oh(e,n,l),e=e.sibling}var Nn=null,Cr=!1;function Eo(e,n,l){for(l=l.child;l!==null;)jd(e,n,l),l=l.sibling}function jd(e,n,l){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(ms,l)}catch{}switch(l.tag){case 5:Wn||ul(l,n);case 6:var p=Nn,w=Cr;Nn=null,Eo(e,n,l),Nn=p,Cr=w,Nn!==null&&(Cr?(e=Nn,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):Nn.removeChild(l.stateNode));break;case 18:Nn!==null&&(Cr?(e=Nn,l=l.stateNode,e.nodeType===8?Ds(e.parentNode,l):e.nodeType===1&&Ds(e,l),Yn(e)):Ds(Nn,l.stateNode));break;case 4:p=Nn,w=Cr,Nn=l.stateNode.containerInfo,Cr=!0,Eo(e,n,l),Nn=p,Cr=w;break;case 0:case 11:case 14:case 15:if(!Wn&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var k=w,A=k.destroy;k=k.tag,A!==void 0&&((k&2)!==0||(k&4)!==0)&&Ah(l,n,A),w=w.next}while(w!==p)}Eo(e,n,l);break;case 1:if(!Wn&&(ul(l,n),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(V){en(l,n,V)}Eo(e,n,l);break;case 21:Eo(e,n,l);break;case 22:l.mode&1?(Wn=(p=Wn)||l.memoizedState!==null,Eo(e,n,l),Wn=p):Eo(e,n,l);break;default:Eo(e,n,l)}}function Nd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new sm),n.forEach(function(p){var w=mm.bind(null,e,p);l.has(p)||(l.add(p),p.then(w,w))})}}function br(e,n){var l=n.deletions;if(l!==null)for(var p=0;p<l.length;p++){var w=l[p];try{var k=e,A=n,V=A;e:for(;V!==null;){switch(V.tag){case 5:Nn=V.stateNode,Cr=!1;break e;case 3:Nn=V.stateNode.containerInfo,Cr=!0;break e;case 4:Nn=V.stateNode.containerInfo,Cr=!0;break e}V=V.return}if(Nn===null)throw Error(a(160));jd(k,A,w),Nn=null,Cr=!1;var Q=w.alternate;Q!==null&&(Q.return=null),w.return=null}catch(ve){en(w,n,ve)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Fd(n,e),n=n.sibling}function Fd(e,n){var l=e.alternate,p=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(n,e),ss(e),p&4){try{ql(3,e,e.return),Mu(3,e)}catch(qe){en(e,e.return,qe)}try{ql(5,e,e.return)}catch(qe){en(e,e.return,qe)}}break;case 1:br(n,e),ss(e),p&512&&l!==null&&ul(l,l.return);break;case 5:if(br(n,e),ss(e),p&512&&l!==null&&ul(l,l.return),e.flags&32){var w=e.stateNode;try{or(w,"")}catch(qe){en(e,e.return,qe)}}if(p&4&&(w=e.stateNode,w!=null)){var k=e.memoizedProps,A=l!==null?l.memoizedProps:k,V=e.type,Q=e.updateQueue;if(e.updateQueue=null,Q!==null)try{V==="input"&&k.type==="radio"&&k.name!=null&&Fo(w,k),Ti(V,A);var ve=Ti(V,k);for(A=0;A<Q.length;A+=2){var Me=Q[A],Be=Q[A+1];Me==="style"?hs(w,Be):Me==="dangerouslySetInnerHTML"?Uo(w,Be):Me==="children"?or(w,Be):xe(w,Me,Be,ve)}switch(V){case"input":Dr(w,k);break;case"textarea":Oa(w,k);break;case"select":var Se=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!k.multiple;var Ne=k.value;Ne!=null?Ui(w,!!k.multiple,Ne,!1):Se!==!!k.multiple&&(k.defaultValue!=null?Ui(w,!!k.multiple,k.defaultValue,!0):Ui(w,!!k.multiple,k.multiple?[]:"",!1))}w[ts]=k}catch(qe){en(e,e.return,qe)}}break;case 6:if(br(n,e),ss(e),p&4){if(e.stateNode===null)throw Error(a(162));w=e.stateNode,k=e.memoizedProps;try{w.nodeValue=k}catch(qe){en(e,e.return,qe)}}break;case 3:if(br(n,e),ss(e),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Yn(n.containerInfo)}catch(qe){en(e,e.return,qe)}break;case 4:br(n,e),ss(e);break;case 13:br(n,e),ss(e),w=e.child,w.flags&8192&&(k=w.memoizedState!==null,w.stateNode.isHidden=k,!k||w.alternate!==null&&w.alternate.memoizedState!==null||(Nh=Vt())),p&4&&Nd(e);break;case 22:if(Me=l!==null&&l.memoizedState!==null,e.mode&1?(Wn=(ve=Wn)||Me,br(n,e),Wn=ve):br(n,e),ss(e),p&8192){if(ve=e.memoizedState!==null,(e.stateNode.isHidden=ve)&&!Me&&(e.mode&1)!==0)for(Ge=e,Me=e.child;Me!==null;){for(Be=Ge=Me;Ge!==null;){switch(Se=Ge,Ne=Se.child,Se.tag){case 0:case 11:case 14:case 15:ql(4,Se,Se.return);break;case 1:ul(Se,Se.return);var Ve=Se.stateNode;if(typeof Ve.componentWillUnmount=="function"){p=Se,l=Se.return;try{n=p,Ve.props=n.memoizedProps,Ve.state=n.memoizedState,Ve.componentWillUnmount()}catch(qe){en(p,l,qe)}}break;case 5:ul(Se,Se.return);break;case 22:if(Se.memoizedState!==null){$d(Be);continue}}Ne!==null?(Ne.return=Se,Ge=Ne):$d(Be)}Me=Me.sibling}e:for(Me=null,Be=e;;){if(Be.tag===5){if(Me===null){Me=Be;try{w=Be.stateNode,ve?(k=w.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(V=Be.stateNode,Q=Be.memoizedProps.style,A=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,V.style.display=$o("display",A))}catch(qe){en(e,e.return,qe)}}}else if(Be.tag===6){if(Me===null)try{Be.stateNode.nodeValue=ve?"":Be.memoizedProps}catch(qe){en(e,e.return,qe)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===e)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===e)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===e)break e;Me===Be&&(Me=null),Be=Be.return}Me===Be&&(Me=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:br(n,e),ss(e),p&4&&Nd(e);break;case 21:break;default:br(n,e),ss(e)}}function ss(e){var n=e.flags;if(n&2){try{e:{for(var l=e.return;l!==null;){if(Od(l)){var p=l;break e}l=l.return}throw Error(a(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(or(w,""),p.flags&=-33);var k=Id(e);Oh(e,k,w);break;case 3:case 4:var A=p.stateNode.containerInfo,V=Id(e);Rh(e,V,A);break;default:throw Error(a(161))}}catch(Q){en(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function am(e,n,l){Ge=e,zd(e)}function zd(e,n,l){for(var p=(e.mode&1)!==0;Ge!==null;){var w=Ge,k=w.child;if(w.tag===22&&p){var A=w.memoizedState!==null||Su;if(!A){var V=w.alternate,Q=V!==null&&V.memoizedState!==null||Wn;V=Su;var ve=Wn;if(Su=A,(Wn=Q)&&!ve)for(Ge=w;Ge!==null;)A=Ge,Q=A.child,A.tag===22&&A.memoizedState!==null?Gd(w):Q!==null?(Q.return=A,Ge=Q):Gd(w);for(;k!==null;)Ge=k,zd(k),k=k.sibling;Ge=w,Su=V,Wn=ve}Ud(e)}else(w.subtreeFlags&8772)!==0&&k!==null?(k.return=w,Ge=k):Ud(e)}}function Ud(e){for(;Ge!==null;){var n=Ge;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Wn||Mu(5,n);break;case 1:var p=n.stateNode;if(n.flags&4&&!Wn)if(l===null)p.componentDidMount();else{var w=n.elementType===n.type?l.memoizedProps:kr(n.type,l.memoizedProps);p.componentDidUpdate(w,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var k=n.updateQueue;k!==null&&je(n,k,p);break;case 3:var A=n.updateQueue;if(A!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}je(n,A,l)}break;case 5:var V=n.stateNode;if(l===null&&n.flags&4){l=V;var Q=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&l.focus();break;case"img":Q.src&&(l.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ve=n.alternate;if(ve!==null){var Me=ve.memoizedState;if(Me!==null){var Be=Me.dehydrated;Be!==null&&Yn(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Wn||n.flags&512&&Dh(n)}catch(Se){en(n,n.return,Se)}}if(n===e){Ge=null;break}if(l=n.sibling,l!==null){l.return=n.return,Ge=l;break}Ge=n.return}}function $d(e){for(;Ge!==null;){var n=Ge;if(n===e){Ge=null;break}var l=n.sibling;if(l!==null){l.return=n.return,Ge=l;break}Ge=n.return}}function Gd(e){for(;Ge!==null;){var n=Ge;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Mu(4,n)}catch(Q){en(n,l,Q)}break;case 1:var p=n.stateNode;if(typeof p.componentDidMount=="function"){var w=n.return;try{p.componentDidMount()}catch(Q){en(n,w,Q)}}var k=n.return;try{Dh(n)}catch(Q){en(n,k,Q)}break;case 5:var A=n.return;try{Dh(n)}catch(Q){en(n,A,Q)}}}catch(Q){en(n,n.return,Q)}if(n===e){Ge=null;break}var V=n.sibling;if(V!==null){V.return=n.return,Ge=V;break}Ge=n.return}}var lm=Math.ceil,Bu=Re.ReactCurrentDispatcher,Ih=Re.ReactCurrentOwner,ir=Re.ReactCurrentBatchConfig,Pt=0,Tn=null,pn=null,Fn=0,zi=0,hl=wr(0),kn=0,Kl=null,La=0,Tu=0,jh=0,Jl=null,Si=null,Nh=0,cl=1/0,Fs=null,Au=!1,Fh=null,Po=null,Du=!1,So=null,Ru=0,Yl=0,zh=null,Ou=-1,Iu=0;function li(){return(Pt&6)!==0?Vt():Ou!==-1?Ou:Ou=Vt()}function Mo(e){return(e.mode&1)===0?1:(Pt&2)!==0&&Fn!==0?Fn&-Fn:T.transition!==null?(Iu===0&&(Iu=Ha()),Iu):(e=Lt,e!==0||(e=window.event,e=e===void 0?16:vt(e.type)),e)}function Er(e,n,l,p){if(50<Yl)throw Yl=0,zh=null,Error(a(185));Kn(e,l,p),((Pt&2)===0||e!==Tn)&&(e===Tn&&((Pt&2)===0&&(Tu|=l),kn===4&&Bo(e,Fn)),Mi(e,p),l===1&&Pt===0&&(n.mode&1)===0&&(cl=Vt()+500,sl&&is()))}function Mi(e,n){var l=e.callbackNode;eo(e,n);var p=It(e,e===Tn?Fn:0);if(p===0)l!==null&&ps(l),e.callbackNode=null,e.callbackPriority=0;else if(n=p&-p,e.callbackPriority!==n){if(l!=null&&ps(l),n===1)e.tag===0?fh(Hd.bind(null,e)):Ul(Hd.bind(null,e)),zt(function(){(Pt&6)===0&&is()}),l=null;else{switch(Gr(p)){case 1:l=Qo;break;case 4:l=Va;break;case 16:l=Qs;break;case 536870912:l=Fr;break;default:l=Qs}l=Qd(l,Vd.bind(null,e))}e.callbackPriority=n,e.callbackNode=l}}function Vd(e,n){if(Ou=-1,Iu=0,(Pt&6)!==0)throw Error(a(327));var l=e.callbackNode;if(dl()&&e.callbackNode!==l)return null;var p=It(e,e===Tn?Fn:0);if(p===0)return null;if((p&30)!==0||(p&e.expiredLanes)!==0||n)n=ju(e,p);else{n=p;var w=Pt;Pt|=2;var k=Wd();(Tn!==e||Fn!==n)&&(Fs=null,cl=Vt()+500,Ca(e,n));do try{cm();break}catch(V){Zd(e,V)}while(!0);J(),Bu.current=k,Pt=w,pn!==null?n=0:(Tn=null,Fn=0,n=kn)}if(n!==0){if(n===2&&(w=En(e),w!==0&&(p=w,n=Uh(e,w))),n===1)throw l=Kl,Ca(e,0),Bo(e,p),Mi(e,Vt()),l;if(n===6)Bo(e,p);else{if(w=e.current.alternate,(p&30)===0&&!um(w)&&(n=ju(e,p),n===2&&(k=En(e),k!==0&&(p=k,n=Uh(e,k))),n===1))throw l=Kl,Ca(e,0),Bo(e,p),Mi(e,Vt()),l;switch(e.finishedWork=w,e.finishedLanes=p,n){case 0:case 1:throw Error(a(345));case 2:ba(e,Si,Fs);break;case 3:if(Bo(e,p),(p&130023424)===p&&(n=Nh+500-Vt(),10<n)){if(It(e,0)!==0)break;if(w=e.suspendedLanes,(w&p)!==p){li(),e.pingedLanes|=e.suspendedLanes&w;break}e.timeoutHandle=an(ba.bind(null,e,Si,Fs),n);break}ba(e,Si,Fs);break;case 4:if(Bo(e,p),(p&4194240)===p)break;for(n=e.eventTimes,w=-1;0<p;){var A=31-dt(p);k=1<<A,A=n[A],A>w&&(w=A),p&=~k}if(p=w,p=Vt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*lm(p/1960))-p,10<p){e.timeoutHandle=an(ba.bind(null,e,Si,Fs),p);break}ba(e,Si,Fs);break;case 5:ba(e,Si,Fs);break;default:throw Error(a(329))}}}return Mi(e,Vt()),e.callbackNode===l?Vd.bind(null,e):null}function Uh(e,n){var l=Jl;return e.current.memoizedState.isDehydrated&&(Ca(e,n).flags|=256),e=ju(e,n),e!==2&&(n=Si,Si=l,n!==null&&$h(n)),e}function $h(e){Si===null?Si=e:Si.push.apply(Si,e)}function um(e){for(var n=e;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var w=l[p],k=w.getSnapshot;w=w.value;try{if(!Gn(k(),w))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Bo(e,n){for(n&=~jh,n&=~Tu,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var l=31-dt(n),p=1<<l;e[l]=-1,n&=~p}}function Hd(e){if((Pt&6)!==0)throw Error(a(327));dl();var n=It(e,0);if((n&1)===0)return Mi(e,Vt()),null;var l=ju(e,n);if(e.tag!==0&&l===2){var p=En(e);p!==0&&(n=p,l=Uh(e,p))}if(l===1)throw l=Kl,Ca(e,0),Bo(e,n),Mi(e,Vt()),l;if(l===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ba(e,Si,Fs),Mi(e,Vt()),null}function Gh(e,n){var l=Pt;Pt|=1;try{return e(n)}finally{Pt=l,Pt===0&&(cl=Vt()+500,sl&&is())}}function ka(e){So!==null&&So.tag===0&&(Pt&6)===0&&dl();var n=Pt;Pt|=1;var l=ir.transition,p=Lt;try{if(ir.transition=null,Lt=1,e)return e()}finally{Lt=p,ir.transition=l,Pt=n,(Pt&6)===0&&is()}}function Vh(){zi=hl.current,Nt(hl)}function Ca(e,n){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,Xt(l)),pn!==null)for(l=pn.return;l!==null;){var p=l;switch($l(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Os();break;case 3:qt(),Nt(vn),Nt(Qt),Vn();break;case 5:wa(p);break;case 4:qt();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:se(p.type._context);break;case 22:case 23:Vh()}l=l.return}if(Tn=e,pn=e=To(e.current,null),Fn=zi=n,kn=0,Kl=null,jh=Tu=La=0,Si=Jl=null,B!==null){for(n=0;n<B.length;n++)if(l=B[n],p=l.interleaved,p!==null){l.interleaved=null;var w=p.next,k=l.pending;if(k!==null){var A=k.next;k.next=w,p.next=A}l.pending=p}B=null}return e}function Zd(e,n){do{var l=pn;try{if(J(),fn.current=Cu,xu){for(var p=Kt.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}xu=!1}if(xa=0,Bn=Ln=Kt=null,Gl=!1,Vl=0,Ih.current=null,l===null||l.return===null){kn=1,Kl=n,pn=null;break}e:{var k=e,A=l.return,V=l,Q=n;if(n=Fn,V.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ve=Q,Me=V,Be=Me.tag;if((Me.mode&1)===0&&(Be===0||Be===11||Be===15)){var Se=Me.alternate;Se?(Me.updateQueue=Se.updateQueue,Me.memoizedState=Se.memoizedState,Me.lanes=Se.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Ne=_d(A);if(Ne!==null){Ne.flags&=-257,yd(Ne,A,V,k,n),Ne.mode&1&&gd(k,ve,n),n=Ne,Q=ve;var Ve=n.updateQueue;if(Ve===null){var qe=new Set;qe.add(Q),n.updateQueue=qe}else Ve.add(Q);break e}else{if((n&1)===0){gd(k,ve,n),Hh();break e}Q=Error(a(426))}}else if(Ut&&V.mode&1){var un=_d(A);if(un!==null){(un.flags&65536)===0&&(un.flags|=256),yd(un,A,V,k,n),P(ll(Q,V));break e}}k=Q=ll(Q,V),kn!==4&&(kn=2),Jl===null?Jl=[k]:Jl.push(k),k=A;do{switch(k.tag){case 3:k.flags|=65536,n&=-n,k.lanes|=n;var pe=pd(k,Q,n);ce(k,pe);break e;case 1:V=Q;var re=k.type,ge=k.stateNode;if((k.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Po===null||!Po.has(ge)))){k.flags|=65536,n&=-n,k.lanes|=n;var Ae=md(k,V,n);ce(k,Ae);break e}}k=k.return}while(k!==null)}Kd(l)}catch(Je){n=Je,pn===l&&l!==null&&(pn=l=l.return);continue}break}while(!0)}function Wd(){var e=Bu.current;return Bu.current=Cu,e===null?Cu:e}function Hh(){(kn===0||kn===3||kn===2)&&(kn=4),Tn===null||(La&268435455)===0&&(Tu&268435455)===0||Bo(Tn,Fn)}function ju(e,n){var l=Pt;Pt|=2;var p=Wd();(Tn!==e||Fn!==n)&&(Fs=null,Ca(e,n));do try{hm();break}catch(w){Zd(e,w)}while(!0);if(J(),Pt=l,Bu.current=p,pn!==null)throw Error(a(261));return Tn=null,Fn=0,kn}function hm(){for(;pn!==null;)qd(pn)}function cm(){for(;pn!==null&&!Xo();)qd(pn)}function qd(e){var n=Xd(e.alternate,e,zi);e.memoizedProps=e.pendingProps,n===null?Kd(e):pn=n,Ih.current=null}function Kd(e){var n=e;do{var l=n.alternate;if(e=n.return,(n.flags&32768)===0){if(l=im(l,n,zi),l!==null){pn=l;return}}else{if(l=rm(l,n),l!==null){l.flags&=32767,pn=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kn=6,pn=null;return}}if(n=n.sibling,n!==null){pn=n;return}pn=n=e}while(n!==null);kn===0&&(kn=5)}function ba(e,n,l){var p=Lt,w=ir.transition;try{ir.transition=null,Lt=1,dm(e,n,l,p)}finally{ir.transition=w,Lt=p}return null}function dm(e,n,l,p){do dl();while(So!==null);if((Pt&6)!==0)throw Error(a(327));l=e.finishedWork;var w=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var k=l.lanes|l.childLanes;if(Zt(e,k),e===Tn&&(pn=Tn=null,Fn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Du||(Du=!0,Qd(Qs,function(){return dl(),null})),k=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||k){k=ir.transition,ir.transition=null;var A=Lt;Lt=1;var V=Pt;Pt|=4,Ih.current=null,om(e,l),Fd(l,e),vi(nt),xs=!!Oe,nt=Oe=null,e.current=l,am(l),Xs(),Pt=V,Lt=A,ir.transition=k}else e.current=l;if(Du&&(Du=!1,So=e,Ru=w),k=e.pendingLanes,k===0&&(Po=null),Gi(l.stateNode),Mi(e,Vt()),n!==null)for(p=e.onRecoverableError,l=0;l<n.length;l++)w=n[l],p(w.value,{componentStack:w.stack,digest:w.digest});if(Au)throw Au=!1,e=Fh,Fh=null,e;return(Ru&1)!==0&&e.tag!==0&&dl(),k=e.pendingLanes,(k&1)!==0?e===zh?Yl++:(Yl=0,zh=e):Yl=0,is(),null}function dl(){if(So!==null){var e=Gr(Ru),n=ir.transition,l=Lt;try{if(ir.transition=null,Lt=16>e?16:e,So===null)var p=!1;else{if(e=So,So=null,Ru=0,(Pt&6)!==0)throw Error(a(331));var w=Pt;for(Pt|=4,Ge=e.current;Ge!==null;){var k=Ge,A=k.child;if((Ge.flags&16)!==0){var V=k.deletions;if(V!==null){for(var Q=0;Q<V.length;Q++){var ve=V[Q];for(Ge=ve;Ge!==null;){var Me=Ge;switch(Me.tag){case 0:case 11:case 15:ql(8,Me,k)}var Be=Me.child;if(Be!==null)Be.return=Me,Ge=Be;else for(;Ge!==null;){Me=Ge;var Se=Me.sibling,Ne=Me.return;if(Rd(Me),Me===ve){Ge=null;break}if(Se!==null){Se.return=Ne,Ge=Se;break}Ge=Ne}}}var Ve=k.alternate;if(Ve!==null){var qe=Ve.child;if(qe!==null){Ve.child=null;do{var un=qe.sibling;qe.sibling=null,qe=un}while(qe!==null)}}Ge=k}}if((k.subtreeFlags&2064)!==0&&A!==null)A.return=k,Ge=A;else e:for(;Ge!==null;){if(k=Ge,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:ql(9,k,k.return)}var pe=k.sibling;if(pe!==null){pe.return=k.return,Ge=pe;break e}Ge=k.return}}var re=e.current;for(Ge=re;Ge!==null;){A=Ge;var ge=A.child;if((A.subtreeFlags&2064)!==0&&ge!==null)ge.return=A,Ge=ge;else e:for(A=re;Ge!==null;){if(V=Ge,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Mu(9,V)}}catch(Je){en(V,V.return,Je)}if(V===A){Ge=null;break e}var Ae=V.sibling;if(Ae!==null){Ae.return=V.return,Ge=Ae;break e}Ge=V.return}}if(Pt=w,is(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(ms,e)}catch{}p=!0}return p}finally{Lt=l,ir.transition=n}}return!1}function Jd(e,n,l){n=ll(l,n),n=pd(e,n,1),e=ee(e,n,1),n=li(),e!==null&&(Kn(e,1,n),Mi(e,n))}function en(e,n,l){if(e.tag===3)Jd(e,e,l);else for(;n!==null;){if(n.tag===3){Jd(n,e,l);break}else if(n.tag===1){var p=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Po===null||!Po.has(p))){e=ll(l,e),e=md(n,e,1),n=ee(n,e,1),e=li(),n!==null&&(Kn(n,1,e),Mi(n,e));break}}n=n.return}}function fm(e,n,l){var p=e.pingCache;p!==null&&p.delete(n),n=li(),e.pingedLanes|=e.suspendedLanes&l,Tn===e&&(Fn&l)===l&&(kn===4||kn===3&&(Fn&130023424)===Fn&&500>Vt()-Nh?Ca(e,0):jh|=l),Mi(e,n)}function Yd(e,n){n===0&&((e.mode&1)===0?n=1:(n=Ur,Ur<<=1,(Ur&130023424)===0&&(Ur=4194304)));var l=li();e=j(e,n),e!==null&&(Kn(e,n,l),Mi(e,l))}function pm(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),Yd(e,l)}function mm(e,n){var l=0;switch(e.tag){case 13:var p=e.stateNode,w=e.memoizedState;w!==null&&(l=w.retryLane);break;case 19:p=e.stateNode;break;default:throw Error(a(314))}p!==null&&p.delete(n),Yd(e,l)}var Xd;Xd=function(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps||vn.current)Pi=!0;else{if((e.lanes&l)===0&&(n.flags&128)===0)return Pi=!1,nm(e,n,l);Pi=(e.flags&131072)!==0}else Pi=!1,Ut&&(n.flags&1048576)!==0&&ln(n,al,n.index);switch(n.lanes=0,n.tag){case 2:var p=n.type;Pu(e,n),e=n.pendingProps;var w=ko(n,Qt.current);oe(n,l),w=mh(null,n,p,e,w,l);var k=gh();return n.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,wn(p)?(k=!0,rl(n)):k=!1,n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,U(n),w.updater=bu,n.stateNode=w,w._reactInternals=n,Lh(n,p,e,l),n=Eh(null,n,p,!0,k,l)):(n.tag=0,Ut&&k&&tr(n),ai(null,n,w,l),n=n.child),n;case 16:p=n.elementType;e:{switch(Pu(e,n),e=n.pendingProps,w=p._init,p=w(p._payload),n.type=p,w=n.tag=_m(p),e=kr(p,e),w){case 0:n=bh(null,n,p,e,l);break e;case 1:n=Cd(null,n,p,e,l);break e;case 11:n=vd(null,n,p,e,l);break e;case 14:n=wd(null,n,p,kr(p.type,e),l);break e}throw Error(a(306,p,""))}return n;case 0:return p=n.type,w=n.pendingProps,w=n.elementType===p?w:kr(p,w),bh(e,n,p,w,l);case 1:return p=n.type,w=n.pendingProps,w=n.elementType===p?w:kr(p,w),Cd(e,n,p,w,l);case 3:e:{if(bd(n),e===null)throw Error(a(387));p=n.pendingProps,k=n.memoizedState,w=k.element,X(e,n),Ce(n,p,null,l);var A=n.memoizedState;if(p=A.element,k.isDehydrated)if(k={element:p,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},n.updateQueue.baseState=k,n.memoizedState=k,n.flags&256){w=ll(Error(a(423)),n),n=Ed(e,n,p,l,w);break e}else if(p!==w){w=ll(Error(a(424)),n),n=Ed(e,n,p,l,w);break e}else for(jn=ii(n.stateNode.containerInfo.firstChild),si=n,Ut=!0,Fi=null,l=Pe(n,null,p,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(C(),p===w){n=Ns(e,n,l);break e}ai(e,n,p,l)}n=n.child}return n;case 5:return va(n),e===null&&u(n),p=n.type,w=n.pendingProps,k=e!==null?e.memoizedProps:null,A=w.children,ft(p,w)?A=null:k!==null&&ft(p,k)&&(n.flags|=32),kd(e,n),ai(e,n,A,l),n.child;case 6:return e===null&&u(n),null;case 13:return Pd(e,n,l);case 4:return Bt(n,n.stateNode.containerInfo),p=n.pendingProps,e===null?n.child=me(n,null,p,l):ai(e,n,p,l),n.child;case 11:return p=n.type,w=n.pendingProps,w=n.elementType===p?w:kr(p,w),vd(e,n,p,w,l);case 7:return ai(e,n,n.pendingProps,l),n.child;case 8:return ai(e,n,n.pendingProps.children,l),n.child;case 12:return ai(e,n,n.pendingProps.children,l),n.child;case 10:e:{if(p=n.type._context,w=n.pendingProps,k=n.memoizedProps,A=w.value,jt(De,p._currentValue),p._currentValue=A,k!==null)if(Gn(k.value,A)){if(k.children===w.children&&!vn.current){n=Ns(e,n,l);break e}}else for(k=n.child,k!==null&&(k.return=n);k!==null;){var V=k.dependencies;if(V!==null){A=k.child;for(var Q=V.firstContext;Q!==null;){if(Q.context===p){if(k.tag===1){Q=K(-1,l&-l),Q.tag=2;var ve=k.updateQueue;if(ve!==null){ve=ve.shared;var Me=ve.pending;Me===null?Q.next=Q:(Q.next=Me.next,Me.next=Q),ve.pending=Q}}k.lanes|=l,Q=k.alternate,Q!==null&&(Q.lanes|=l),_e(k.return,l,n),V.lanes|=l;break}Q=Q.next}}else if(k.tag===10)A=k.type===n.type?null:k.child;else if(k.tag===18){if(A=k.return,A===null)throw Error(a(341));A.lanes|=l,V=A.alternate,V!==null&&(V.lanes|=l),_e(A,l,n),A=k.sibling}else A=k.child;if(A!==null)A.return=k;else for(A=k;A!==null;){if(A===n){A=null;break}if(k=A.sibling,k!==null){k.return=A.return,A=k;break}A=A.return}k=A}ai(e,n,w.children,l),n=n.child}return n;case 9:return w=n.type,p=n.pendingProps.children,oe(n,l),w=de(w),p=p(w),n.flags|=1,ai(e,n,p,l),n.child;case 14:return p=n.type,w=kr(p,n.pendingProps),w=kr(p.type,w),wd(e,n,p,w,l);case 15:return xd(e,n,n.type,n.pendingProps,l);case 17:return p=n.type,w=n.pendingProps,w=n.elementType===p?w:kr(p,w),Pu(e,n),n.tag=1,wn(p)?(e=!0,rl(n)):e=!1,oe(n,l),dd(n,p,w),Lh(n,p,w,l),Eh(null,n,p,!0,e,l);case 19:return Md(e,n,l);case 22:return Ld(e,n,l)}throw Error(a(156,n.tag))};function Qd(e,n){return Ga(e,n)}function gm(e,n,l,p){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(e,n,l,p){return new gm(e,n,l,p)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _m(e){if(typeof e=="function")return Zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===St)return 11;if(e===hi)return 14}return 2}function To(e,n){var l=e.alternate;return l===null?(l=rr(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function Nu(e,n,l,p,w,k){var A=2;if(p=e,typeof e=="function")Zh(e)&&(A=1);else if(typeof e=="string")A=5;else e:switch(e){case Xe:return Ea(l.children,w,k,n);case Ue:A=8,w|=8;break;case Qe:return e=rr(12,l,n,w|2),e.elementType=Qe,e.lanes=k,e;case Rn:return e=rr(13,l,n,w),e.elementType=Rn,e.lanes=k,e;case Wt:return e=rr(19,l,n,w),e.elementType=Wt,e.lanes=k,e;case Dt:return Fu(l,w,k,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pt:A=10;break e;case at:A=9;break e;case St:A=11;break e;case hi:A=14;break e;case At:A=16,p=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return n=rr(A,l,n,w),n.elementType=e,n.type=p,n.lanes=k,n}function Ea(e,n,l,p){return e=rr(7,e,p,n),e.lanes=l,e}function Fu(e,n,l,p){return e=rr(22,e,p,n),e.elementType=Dt,e.lanes=l,e.stateNode={isHidden:!1},e}function Wh(e,n,l){return e=rr(6,e,null,n),e.lanes=l,e}function qh(e,n,l){return n=rr(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ym(e,n,l,p,w){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$r(0),this.expirationTimes=$r(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Kh(e,n,l,p,w,k,A,V,Q){return e=new ym(e,n,l,V,Q),n===1?(n=1,k===!0&&(n|=8)):n=0,k=rr(3,null,null,n),e.current=k,k.stateNode=e,k.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},U(k),e}function vm(e,n,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:We,key:p==null?null:""+p,children:e,containerInfo:n,implementation:l}}function ef(e){if(!e)return ns;e=e._reactInternals;e:{if($i(e)!==e||e.tag!==1)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(wn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(a(171))}if(e.tag===1){var l=e.type;if(wn(l))return vu(e,l,n)}return n}function tf(e,n,l,p,w,k,A,V,Q){return e=Kh(l,p,!0,e,w,k,A,V,Q),e.context=ef(null),l=e.current,p=li(),w=Mo(l),k=K(p,w),k.callback=n??null,ee(l,k,w),e.current.lanes=w,Kn(e,w,p),Mi(e,p),e}function zu(e,n,l,p){var w=n.current,k=li(),A=Mo(w);return l=ef(l),n.context===null?n.context=l:n.pendingContext=l,n=K(k,A),n.payload={element:e},p=p===void 0?null:p,p!==null&&(n.callback=p),e=ee(w,n,A),e!==null&&(Er(e,w,A,k),ue(e,w,A)),A}function Uu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function Jh(e,n){nf(e,n),(e=e.alternate)&&nf(e,n)}function wm(){return null}var rf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yh(e){this._internalRoot=e}$u.prototype.render=Yh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));zu(e,n,null,null)},$u.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ka(function(){zu(null,e,null,null)}),n[Et]=null}};function $u(e){this._internalRoot=e}$u.prototype.unstable_scheduleHydration=function(e){if(e){var n=io();e={blockedOn:null,target:e,priority:n};for(var l=0;l<tn.length&&n!==0&&n<tn[l].priority;l++);tn.splice(l,0,e),l===0&&Ri(e)}};function Xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function xm(e,n,l,p,w){if(w){if(typeof p=="function"){var k=p;p=function(){var ve=Uu(A);k.call(ve)}}var A=tf(n,p,e,0,null,!1,!1,"",sf);return e._reactRootContainer=A,e[Et]=A.current,on(e.nodeType===8?e.parentNode:e),ka(),A}for(;w=e.lastChild;)e.removeChild(w);if(typeof p=="function"){var V=p;p=function(){var ve=Uu(Q);V.call(ve)}}var Q=Kh(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=Q,e[Et]=Q.current,on(e.nodeType===8?e.parentNode:e),ka(function(){zu(n,Q,l,p)}),Q}function Vu(e,n,l,p,w){var k=l._reactRootContainer;if(k){var A=k;if(typeof w=="function"){var V=w;w=function(){var Q=Uu(A);V.call(Q)}}zu(n,A,e,w)}else A=xm(l,n,e,w,p);return Uu(A)}to=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var l=lt(n.pendingLanes);l!==0&&(Ai(n,l|1),Mi(n,Vt()),(Pt&6)===0&&(cl=Vt()+500,is()))}break;case 13:ka(function(){var p=j(e,1);if(p!==null){var w=li();Er(p,e,1,w)}}),Jh(e,1)}},Vi=function(e){if(e.tag===13){var n=j(e,134217728);if(n!==null){var l=li();Er(n,e,134217728,l)}Jh(e,134217728)}},no=function(e){if(e.tag===13){var n=Mo(e),l=j(e,n);if(l!==null){var p=li();Er(l,e,n,p)}Jh(e,n)}},io=function(){return Lt},_s=function(e,n){var l=Lt;try{return Lt=e,n()}finally{Lt=l}},cs=function(e,n,l){switch(n){case"input":if(Dr(e,l),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var p=l[n];if(p!==e&&p.form===e.form){var w=xo(p);if(!w)throw Error(a(90));Tr(p),Dr(p,w)}}}break;case"textarea":Oa(e,l);break;case"select":n=l.value,n!=null&&Ui(e,!!l.multiple,n,!1)}},Zo=Gh,Fa=ka;var Lm={usingClientEntryPoint:!1,Events:[Ei,Xi,xo,Na,Ho,Gh]},Xl={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},km={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Re.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ua(e),e===null?null:e.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||wm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{ms=Hu.inject(km),qn=Hu}catch{}}return Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm,Bi.createPortal=function(e,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(n))throw Error(a(200));return vm(e,n,null,l)},Bi.createRoot=function(e,n){if(!Xh(e))throw Error(a(299));var l=!1,p="",w=rf;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),n=Kh(e,1,!1,null,null,l,!1,p,w),e[Et]=n.current,on(e.nodeType===8?e.parentNode:e),new Yh(n)},Bi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=Ua(n),e=e===null?null:e.stateNode,e},Bi.flushSync=function(e){return ka(e)},Bi.hydrate=function(e,n,l){if(!Gu(n))throw Error(a(200));return Vu(null,e,n,!0,l)},Bi.hydrateRoot=function(e,n,l){if(!Xh(e))throw Error(a(405));var p=l!=null&&l.hydratedSources||null,w=!1,k="",A=rf;if(l!=null&&(l.unstable_strictMode===!0&&(w=!0),l.identifierPrefix!==void 0&&(k=l.identifierPrefix),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),n=tf(n,null,e,1,l??null,w,!1,k,A),e[Et]=n.current,on(e),p)for(e=0;e<p.length;e++)l=p[e],w=l._getVersion,w=w(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,w]:n.mutableSourceEagerHydrationData.push(l,w);return new $u(n)},Bi.render=function(e,n,l){if(!Gu(n))throw Error(a(200));return Vu(null,e,n,!1,l)},Bi.unmountComponentAtNode=function(e){if(!Gu(e))throw Error(a(40));return e._reactRootContainer?(ka(function(){Vu(null,null,e,!1,function(){e._reactRootContainer=null,e[Et]=null})}),!0):!1},Bi.unstable_batchedUpdates=Gh,Bi.unstable_renderSubtreeIntoContainer=function(e,n,l,p){if(!Gu(l))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Vu(e,n,l,!1,p)},Bi.version="18.3.1-next-f1338f8080-20240426",Bi}var ff;function ep(){if(ff)return tc.exports;ff=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(o){console.error(o)}}return m(),tc.exports=Tm(),tc.exports}var pf;function Am(){if(pf)return Wu;pf=1;var m=ep();return Wu.createRoot=m.createRoot,Wu.hydrateRoot=m.hydrateRoot,Wu}var Dm=Am();const Rm=lh(Dm),Om="modulepreload",Im=function(m){return"/pudumaps/"+m},mf={},pu=function(o,a,c){let f=Promise.resolve();if(a&&a.length>0){let M=function(I){return Promise.all(I.map(N=>Promise.resolve(N).then(W=>({status:"fulfilled",value:W}),W=>({status:"rejected",reason:W}))))};var y=M;document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),E=b?.nonce||b?.getAttribute("nonce");f=M(a.map(I=>{if(I=Im(I),I in mf)return;mf[I]=!0;const N=I.endsWith(".css"),W=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${W}`))return;const Y=document.createElement("link");if(Y.rel=N?"stylesheet":Om,N||(Y.as="script"),Y.crossOrigin="",Y.href=I,E&&Y.setAttribute("nonce",E),document.head.appendChild(Y),N)return new Promise((le,ae)=>{Y.addEventListener("load",le),Y.addEventListener("error",()=>ae(new Error(`Unable to preload CSS for ${I}`)))})}))}function _(b){const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=b,window.dispatchEvent(E),!E.defaultPrevented)throw b}return f.then(b=>{for(const E of b||[])E.status==="rejected"&&_(E.reason);return o().catch(_)})},jm=m=>{let o;return m?o=m:typeof fetch>"u"?o=(...a)=>pu(async()=>{const{default:c}=await Promise.resolve().then(()=>El);return{default:c}},[]).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)};class Bc extends Error{constructor(o,a="FunctionsError",c){super(o),this.name=a,this.context=c}}class Nm extends Bc{constructor(o){super("Failed to send a request to the Edge Function","FunctionsFetchError",o)}}class gf extends Bc{constructor(o){super("Relay Error invoking the Edge Function","FunctionsRelayError",o)}}class _f extends Bc{constructor(o){super("Edge Function returned a non-2xx status code","FunctionsHttpError",o)}}var pc;(function(m){m.Any="any",m.ApNortheast1="ap-northeast-1",m.ApNortheast2="ap-northeast-2",m.ApSouth1="ap-south-1",m.ApSoutheast1="ap-southeast-1",m.ApSoutheast2="ap-southeast-2",m.CaCentral1="ca-central-1",m.EuCentral1="eu-central-1",m.EuWest1="eu-west-1",m.EuWest2="eu-west-2",m.EuWest3="eu-west-3",m.SaEast1="sa-east-1",m.UsEast1="us-east-1",m.UsWest1="us-west-1",m.UsWest2="us-west-2"})(pc||(pc={}));var Fm=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};class zm{constructor(o,{headers:a={},customFetch:c,region:f=pc.Any}={}){this.url=o,this.headers=a,this.region=f,this.fetch=jm(c)}setAuth(o){this.headers.Authorization=`Bearer ${o}`}invoke(o,a={}){var c;return Fm(this,void 0,void 0,function*(){try{const{headers:f,method:_,body:y}=a;let b={},{region:E}=a;E||(E=this.region);const M=new URL(`${this.url}/${o}`);E&&E!=="any"&&(b["x-region"]=E,M.searchParams.set("forceFunctionRegion",E));let I;y&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)&&(typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",I=y):typeof y=="string"?(b["Content-Type"]="text/plain",I=y):typeof FormData<"u"&&y instanceof FormData?I=y:(b["Content-Type"]="application/json",I=JSON.stringify(y)));const N=yield this.fetch(M.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),f),body:I}).catch(ae=>{throw new Nm(ae)}),W=N.headers.get("x-relay-error");if(W&&W==="true")throw new gf(N);if(!N.ok)throw new _f(N);let Y=((c=N.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),le;return Y==="application/json"?le=yield N.json():Y==="application/octet-stream"?le=yield N.blob():Y==="text/event-stream"?le=N:Y==="multipart/form-data"?le=yield N.formData():le=yield N.text(),{data:le,error:null,response:N}}catch(f){return{data:null,error:f,response:f instanceof _f||f instanceof gf?f.context:void 0}}})}}var Dn={},fl={},pl={},ml={},gl={},_l={},Um=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bl=Um();const $m=bl.fetch,tp=bl.fetch.bind(bl),np=bl.Headers,Gm=bl.Request,Vm=bl.Response,El=Object.freeze(Object.defineProperty({__proto__:null,Headers:np,Request:Gm,Response:Vm,default:tp,fetch:$m},Symbol.toStringTag,{value:"Module"})),Hm=bm(El);var qu={},yf;function ip(){if(yf)return qu;yf=1,Object.defineProperty(qu,"__esModule",{value:!0});class m extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return qu.default=m,qu}var vf;function rp(){if(vf)return _l;vf=1;var m=_l&&_l.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(_l,"__esModule",{value:!0});const o=m(Hm),a=m(ip());class c{constructor(_){this.shouldThrowOnError=!1,this.method=_.method,this.url=_.url,this.headers=_.headers,this.schema=_.schema,this.body=_.body,this.shouldThrowOnError=_.shouldThrowOnError,this.signal=_.signal,this.isMaybeSingle=_.isMaybeSingle,_.fetch?this.fetch=_.fetch:typeof fetch>"u"?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(_,y){return this.headers=Object.assign({},this.headers),this.headers[_]=y,this}then(_,y){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const b=this.fetch;let E=b(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async M=>{var I,N,W;let Y=null,le=null,ae=null,ie=M.status,we=M.statusText;if(M.ok){if(this.method!=="HEAD"){const Ye=await M.text();Ye===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?le=Ye:le=JSON.parse(Ye))}const xe=(I=this.headers.Prefer)===null||I===void 0?void 0:I.match(/count=(exact|planned|estimated)/),Re=(N=M.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");xe&&Re&&Re.length>1&&(ae=parseInt(Re[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(le)&&(le.length>1?(Y={code:"PGRST116",details:`Results contain ${le.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},le=null,ae=null,ie=406,we="Not Acceptable"):le.length===1?le=le[0]:le=null)}else{const xe=await M.text();try{Y=JSON.parse(xe),Array.isArray(Y)&&M.status===404&&(le=[],Y=null,ie=200,we="OK")}catch{M.status===404&&xe===""?(ie=204,we="No Content"):Y={message:xe}}if(Y&&this.isMaybeSingle&&(!((W=Y?.details)===null||W===void 0)&&W.includes("0 rows"))&&(Y=null,ie=200,we="OK"),Y&&this.shouldThrowOnError)throw new a.default(Y)}return{error:Y,data:le,count:ae,status:ie,statusText:we}});return this.shouldThrowOnError||(E=E.catch(M=>{var I,N,W;return{error:{message:`${(I=M?.name)!==null&&I!==void 0?I:"FetchError"}: ${M?.message}`,details:`${(N=M?.stack)!==null&&N!==void 0?N:""}`,hint:"",code:`${(W=M?.code)!==null&&W!==void 0?W:""}`},data:null,count:null,status:0,statusText:""}})),E.then(_,y)}returns(){return this}overrideTypes(){return this}}return _l.default=c,_l}var wf;function sp(){if(wf)return gl;wf=1;var m=gl&&gl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(gl,"__esModule",{value:!0});const o=m(rp());class a extends o.default{select(f){let _=!1;const y=(f??"*").split("").map(b=>/\s/.test(b)&&!_?"":(b==='"'&&(_=!_),b)).join("");return this.url.searchParams.set("select",y),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(f,{ascending:_=!0,nullsFirst:y,foreignTable:b,referencedTable:E=b}={}){const M=E?`${E}.order`:"order",I=this.url.searchParams.get(M);return this.url.searchParams.set(M,`${I?`${I},`:""}${f}.${_?"asc":"desc"}${y===void 0?"":y?".nullsfirst":".nullslast"}`),this}limit(f,{foreignTable:_,referencedTable:y=_}={}){const b=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(b,`${f}`),this}range(f,_,{foreignTable:y,referencedTable:b=y}={}){const E=typeof b>"u"?"offset":`${b}.offset`,M=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(E,`${f}`),this.url.searchParams.set(M,`${_-f+1}`),this}abortSignal(f){return this.signal=f,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:f=!1,verbose:_=!1,settings:y=!1,buffers:b=!1,wal:E=!1,format:M="text"}={}){var I;const N=[f?"analyze":null,_?"verbose":null,y?"settings":null,b?"buffers":null,E?"wal":null].filter(Boolean).join("|"),W=(I=this.headers.Accept)!==null&&I!==void 0?I:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${M}; for="${W}"; options=${N};`,M==="json"?this:this}rollback(){var f;return((f=this.headers.Prefer)!==null&&f!==void 0?f:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gl.default=a,gl}var xf;function Tc(){if(xf)return ml;xf=1;var m=ml&&ml.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ml,"__esModule",{value:!0});const o=m(sp());class a extends o.default{eq(f,_){return this.url.searchParams.append(f,`eq.${_}`),this}neq(f,_){return this.url.searchParams.append(f,`neq.${_}`),this}gt(f,_){return this.url.searchParams.append(f,`gt.${_}`),this}gte(f,_){return this.url.searchParams.append(f,`gte.${_}`),this}lt(f,_){return this.url.searchParams.append(f,`lt.${_}`),this}lte(f,_){return this.url.searchParams.append(f,`lte.${_}`),this}like(f,_){return this.url.searchParams.append(f,`like.${_}`),this}likeAllOf(f,_){return this.url.searchParams.append(f,`like(all).{${_.join(",")}}`),this}likeAnyOf(f,_){return this.url.searchParams.append(f,`like(any).{${_.join(",")}}`),this}ilike(f,_){return this.url.searchParams.append(f,`ilike.${_}`),this}ilikeAllOf(f,_){return this.url.searchParams.append(f,`ilike(all).{${_.join(",")}}`),this}ilikeAnyOf(f,_){return this.url.searchParams.append(f,`ilike(any).{${_.join(",")}}`),this}is(f,_){return this.url.searchParams.append(f,`is.${_}`),this}in(f,_){const y=Array.from(new Set(_)).map(b=>typeof b=="string"&&new RegExp("[,()]").test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(f,`in.(${y})`),this}contains(f,_){return typeof _=="string"?this.url.searchParams.append(f,`cs.${_}`):Array.isArray(_)?this.url.searchParams.append(f,`cs.{${_.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(_)}`),this}containedBy(f,_){return typeof _=="string"?this.url.searchParams.append(f,`cd.${_}`):Array.isArray(_)?this.url.searchParams.append(f,`cd.{${_.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(_)}`),this}rangeGt(f,_){return this.url.searchParams.append(f,`sr.${_}`),this}rangeGte(f,_){return this.url.searchParams.append(f,`nxl.${_}`),this}rangeLt(f,_){return this.url.searchParams.append(f,`sl.${_}`),this}rangeLte(f,_){return this.url.searchParams.append(f,`nxr.${_}`),this}rangeAdjacent(f,_){return this.url.searchParams.append(f,`adj.${_}`),this}overlaps(f,_){return typeof _=="string"?this.url.searchParams.append(f,`ov.${_}`):this.url.searchParams.append(f,`ov.{${_.join(",")}}`),this}textSearch(f,_,{config:y,type:b}={}){let E="";b==="plain"?E="pl":b==="phrase"?E="ph":b==="websearch"&&(E="w");const M=y===void 0?"":`(${y})`;return this.url.searchParams.append(f,`${E}fts${M}.${_}`),this}match(f){return Object.entries(f).forEach(([_,y])=>{this.url.searchParams.append(_,`eq.${y}`)}),this}not(f,_,y){return this.url.searchParams.append(f,`not.${_}.${y}`),this}or(f,{foreignTable:_,referencedTable:y=_}={}){const b=y?`${y}.or`:"or";return this.url.searchParams.append(b,`(${f})`),this}filter(f,_,y){return this.url.searchParams.append(f,`${_}.${y}`),this}}return ml.default=a,ml}var Lf;function op(){if(Lf)return pl;Lf=1;var m=pl&&pl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(pl,"__esModule",{value:!0});const o=m(Tc());class a{constructor(f,{headers:_={},schema:y,fetch:b}){this.url=f,this.headers=_,this.schema=y,this.fetch=b}select(f,{head:_=!1,count:y}={}){const b=_?"HEAD":"GET";let E=!1;const M=(f??"*").split("").map(I=>/\s/.test(I)&&!E?"":(I==='"'&&(E=!E),I)).join("");return this.url.searchParams.set("select",M),y&&(this.headers.Prefer=`count=${y}`),new o.default({method:b,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(f,{count:_,defaultToNull:y=!0}={}){const b="POST",E=[];if(this.headers.Prefer&&E.push(this.headers.Prefer),_&&E.push(`count=${_}`),y||E.push("missing=default"),this.headers.Prefer=E.join(","),Array.isArray(f)){const M=f.reduce((I,N)=>I.concat(Object.keys(N)),[]);if(M.length>0){const I=[...new Set(M)].map(N=>`"${N}"`);this.url.searchParams.set("columns",I.join(","))}}return new o.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}upsert(f,{onConflict:_,ignoreDuplicates:y=!1,count:b,defaultToNull:E=!0}={}){const M="POST",I=[`resolution=${y?"ignore":"merge"}-duplicates`];if(_!==void 0&&this.url.searchParams.set("on_conflict",_),this.headers.Prefer&&I.push(this.headers.Prefer),b&&I.push(`count=${b}`),E||I.push("missing=default"),this.headers.Prefer=I.join(","),Array.isArray(f)){const N=f.reduce((W,Y)=>W.concat(Object.keys(Y)),[]);if(N.length>0){const W=[...new Set(N)].map(Y=>`"${Y}"`);this.url.searchParams.set("columns",W.join(","))}}return new o.default({method:M,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}update(f,{count:_}={}){const y="PATCH",b=[];return this.headers.Prefer&&b.push(this.headers.Prefer),_&&b.push(`count=${_}`),this.headers.Prefer=b.join(","),new o.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:f,fetch:this.fetch,allowEmpty:!1})}delete({count:f}={}){const _="DELETE",y=[];return f&&y.push(`count=${f}`),this.headers.Prefer&&y.unshift(this.headers.Prefer),this.headers.Prefer=y.join(","),new o.default({method:_,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pl.default=a,pl}var eu={},tu={},kf;function Zm(){return kf||(kf=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.version=void 0,tu.version="0.0.0-automated"),tu}var Cf;function Wm(){if(Cf)return eu;Cf=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.DEFAULT_HEADERS=void 0;const m=Zm();return eu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${m.version}`},eu}var bf;function qm(){if(bf)return fl;bf=1;var m=fl&&fl.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(fl,"__esModule",{value:!0});const o=m(op()),a=m(Tc()),c=Wm();class f{constructor(y,{headers:b={},schema:E,fetch:M}={}){this.url=y,this.headers=Object.assign(Object.assign({},c.DEFAULT_HEADERS),b),this.schemaName=E,this.fetch=M}from(y){const b=new URL(`${this.url}/${y}`);return new o.default(b,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(y){return new f(this.url,{headers:this.headers,schema:y,fetch:this.fetch})}rpc(y,b={},{head:E=!1,get:M=!1,count:I}={}){let N;const W=new URL(`${this.url}/rpc/${y}`);let Y;E||M?(N=E?"HEAD":"GET",Object.entries(b).filter(([ae,ie])=>ie!==void 0).map(([ae,ie])=>[ae,Array.isArray(ie)?`{${ie.join(",")}}`:`${ie}`]).forEach(([ae,ie])=>{W.searchParams.append(ae,ie)})):(N="POST",Y=b);const le=Object.assign({},this.headers);return I&&(le.Prefer=`count=${I}`),new a.default({method:N,url:W,headers:le,schema:this.schemaName,body:Y,fetch:this.fetch,allowEmpty:!1})}}return fl.default=f,fl}var Ef;function Km(){if(Ef)return Dn;Ef=1;var m=Dn&&Dn.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.PostgrestError=Dn.PostgrestBuilder=Dn.PostgrestTransformBuilder=Dn.PostgrestFilterBuilder=Dn.PostgrestQueryBuilder=Dn.PostgrestClient=void 0;const o=m(qm());Dn.PostgrestClient=o.default;const a=m(op());Dn.PostgrestQueryBuilder=a.default;const c=m(Tc());Dn.PostgrestFilterBuilder=c.default;const f=m(sp());Dn.PostgrestTransformBuilder=f.default;const _=m(rp());Dn.PostgrestBuilder=_.default;const y=m(ip());return Dn.PostgrestError=y.default,Dn.default={PostgrestClient:o.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:f.default,PostgrestBuilder:_.default,PostgrestError:y.default},Dn}var Jm=Km();const Ym=lh(Jm),{PostgrestClient:Xm,PostgrestQueryBuilder:zy,PostgrestFilterBuilder:Uy,PostgrestTransformBuilder:$y,PostgrestBuilder:Gy,PostgrestError:Vy}=Ym;class Qm{static detectEnvironment(){var o;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((o=navigator.userAgent)===null||o===void 0)&&o.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const a=parseInt(process.versions.node.split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const o=this.detectEnvironment();if(o.constructor)return o.constructor;let a=o.error||"WebSocket not supported in this environment.";throw o.workaround&&(a+=`

Suggested solution: ${o.workaround}`),new Error(a)}static createWebSocket(o,a){const c=this.getWebSocketConstructor();return new c(o,a)}static isWebSocketSupported(){try{const o=this.detectEnvironment();return o.type==="native"||o.type==="ws"}catch{return!1}}}const eg="2.15.1",tg=`realtime-js/${eg}`,ng="1.0.0",mc=1e4,ig=1e3,rg=100;var au;(function(m){m[m.connecting=0]="connecting",m[m.open=1]="open",m[m.closing=2]="closing",m[m.closed=3]="closed"})(au||(au={}));var Cn;(function(m){m.closed="closed",m.errored="errored",m.joined="joined",m.joining="joining",m.leaving="leaving"})(Cn||(Cn={}));var Sr;(function(m){m.close="phx_close",m.error="phx_error",m.join="phx_join",m.reply="phx_reply",m.leave="phx_leave",m.access_token="access_token"})(Sr||(Sr={}));var gc;(function(m){m.websocket="websocket"})(gc||(gc={}));var Ba;(function(m){m.Connecting="connecting",m.Open="open",m.Closing="closing",m.Closed="closed"})(Ba||(Ba={}));class sg{constructor(){this.HEADER_LENGTH=1}decode(o,a){return o.constructor===ArrayBuffer?a(this._binaryDecode(o)):a(typeof o=="string"?JSON.parse(o):{})}_binaryDecode(o){const a=new DataView(o),c=new TextDecoder;return this._decodeBroadcast(o,a,c)}_decodeBroadcast(o,a,c){const f=a.getUint8(1),_=a.getUint8(2);let y=this.HEADER_LENGTH+2;const b=c.decode(o.slice(y,y+f));y=y+f;const E=c.decode(o.slice(y,y+_));y=y+_;const M=JSON.parse(c.decode(o.slice(y,o.byteLength)));return{ref:null,topic:b,event:E,payload:M}}}class ap{constructor(o,a){this.callback=o,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=o,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(m){m.abstime="abstime",m.bool="bool",m.date="date",m.daterange="daterange",m.float4="float4",m.float8="float8",m.int2="int2",m.int4="int4",m.int4range="int4range",m.int8="int8",m.int8range="int8range",m.json="json",m.jsonb="jsonb",m.money="money",m.numeric="numeric",m.oid="oid",m.reltime="reltime",m.text="text",m.time="time",m.timestamp="timestamp",m.timestamptz="timestamptz",m.timetz="timetz",m.tsrange="tsrange",m.tstzrange="tstzrange"})(Gt||(Gt={}));const Pf=(m,o,a={})=>{var c;const f=(c=a.skipTypes)!==null&&c!==void 0?c:[];return Object.keys(o).reduce((_,y)=>(_[y]=og(y,m,o,f),_),{})},og=(m,o,a,c)=>{const f=o.find(b=>b.name===m),_=f?.type,y=a[m];return _&&!c.includes(_)?lp(_,y):_c(y)},lp=(m,o)=>{if(m.charAt(0)==="_"){const a=m.slice(1,m.length);return hg(o,a)}switch(m){case Gt.bool:return ag(o);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return lg(o);case Gt.json:case Gt.jsonb:return ug(o);case Gt.timestamp:return cg(o);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return _c(o);default:return _c(o)}},_c=m=>m,ag=m=>{switch(m){case"t":return!0;case"f":return!1;default:return m}},lg=m=>{if(typeof m=="string"){const o=parseFloat(m);if(!Number.isNaN(o))return o}return m},ug=m=>{if(typeof m=="string")try{return JSON.parse(m)}catch(o){return console.log(`JSON parse error: ${o}`),m}return m},hg=(m,o)=>{if(typeof m!="string")return m;const a=m.length-1,c=m[a];if(m[0]==="{"&&c==="}"){let _;const y=m.slice(1,a);try{_=JSON.parse("["+y+"]")}catch{_=y?y.split(","):[]}return _.map(b=>lp(o,b))}return m},cg=m=>typeof m=="string"?m.replace(" ","T"):m,up=m=>{let o=m;return o=o.replace(/^ws/i,"http"),o=o.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),o.replace(/\/+$/,"")+"/api/broadcast"};class rc{constructor(o,a,c={},f=mc){this.channel=o,this.event=a,this.payload=c,this.timeout=f,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(o){this.timeout=o,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(o){this.payload=Object.assign(Object.assign({},this.payload),o)}receive(o,a){var c;return this._hasReceived(o)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:o,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const o=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},o),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(o,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:o,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:o,response:a}){this.recHooks.filter(c=>c.status===o).forEach(c=>c.callback(a))}_hasReceived(o){return this.receivedResp&&this.receivedResp.status===o}}var Sf;(function(m){m.SYNC="sync",m.JOIN="join",m.LEAVE="leave"})(Sf||(Sf={}));class lu{constructor(o,a){this.channel=o,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},f=>{const{onJoin:_,onLeave:y,onSync:b}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,f,_,y),this.pendingDiffs.forEach(E=>{this.state=lu.syncDiff(this.state,E,_,y)}),this.pendingDiffs=[],b()}),this.channel._on(c.diff,{},f=>{const{onJoin:_,onLeave:y,onSync:b}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(f):(this.state=lu.syncDiff(this.state,f,_,y),b())}),this.onJoin((f,_,y)=>{this.channel._trigger("presence",{event:"join",key:f,currentPresences:_,newPresences:y})}),this.onLeave((f,_,y)=>{this.channel._trigger("presence",{event:"leave",key:f,currentPresences:_,leftPresences:y})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(o,a,c,f){const _=this.cloneDeep(o),y=this.transformState(a),b={},E={};return this.map(_,(M,I)=>{y[M]||(E[M]=I)}),this.map(y,(M,I)=>{const N=_[M];if(N){const W=I.map(ie=>ie.presence_ref),Y=N.map(ie=>ie.presence_ref),le=I.filter(ie=>Y.indexOf(ie.presence_ref)<0),ae=N.filter(ie=>W.indexOf(ie.presence_ref)<0);le.length>0&&(b[M]=le),ae.length>0&&(E[M]=ae)}else b[M]=I}),this.syncDiff(_,{joins:b,leaves:E},c,f)}static syncDiff(o,a,c,f){const{joins:_,leaves:y}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),f||(f=()=>{}),this.map(_,(b,E)=>{var M;const I=(M=o[b])!==null&&M!==void 0?M:[];if(o[b]=this.cloneDeep(E),I.length>0){const N=o[b].map(Y=>Y.presence_ref),W=I.filter(Y=>N.indexOf(Y.presence_ref)<0);o[b].unshift(...W)}c(b,I,E)}),this.map(y,(b,E)=>{let M=o[b];if(!M)return;const I=E.map(N=>N.presence_ref);M=M.filter(N=>I.indexOf(N.presence_ref)<0),o[b]=M,f(b,M,E),M.length===0&&delete o[b]}),o}static map(o,a){return Object.getOwnPropertyNames(o).map(c=>a(c,o[c]))}static transformState(o){return o=this.cloneDeep(o),Object.getOwnPropertyNames(o).reduce((a,c)=>{const f=o[c];return"metas"in f?a[c]=f.metas.map(_=>(_.presence_ref=_.phx_ref,delete _.phx_ref,delete _.phx_ref_prev,_)):a[c]=f,a},{})}static cloneDeep(o){return JSON.parse(JSON.stringify(o))}onJoin(o){this.caller.onJoin=o}onLeave(o){this.caller.onLeave=o}onSync(o){this.caller.onSync=o}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mf;(function(m){m.ALL="*",m.INSERT="INSERT",m.UPDATE="UPDATE",m.DELETE="DELETE"})(Mf||(Mf={}));var uu;(function(m){m.BROADCAST="broadcast",m.PRESENCE="presence",m.POSTGRES_CHANGES="postgres_changes",m.SYSTEM="system"})(uu||(uu={}));var Us;(function(m){m.SUBSCRIBED="SUBSCRIBED",m.TIMED_OUT="TIMED_OUT",m.CLOSED="CLOSED",m.CHANNEL_ERROR="CHANNEL_ERROR"})(Us||(Us={}));class Ac{constructor(o,a={config:{}},c){this.topic=o,this.params=a,this.socket=c,this.bindings={},this.state=Cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=o.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new rc(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new ap(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cn.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(f,_)=>{this._trigger(this._replyEventName(_),f)}),this.presence=new lu(this),this.broadcastEndpointURL=up(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(o,a=this.timeout){var c,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Cn.closed){const{config:{broadcast:_,presence:y,private:b}}=this.params,E=(f=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(W=>W.filter))!==null&&f!==void 0?f:[],M=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0,I={},N={broadcast:_,presence:Object.assign(Object.assign({},y),{enabled:M}),postgres_changes:E,private:b};this.socket.accessTokenValue&&(I.access_token=this.socket.accessTokenValue),this._onError(W=>o?.(Us.CHANNEL_ERROR,W)),this._onClose(()=>o?.(Us.CLOSED)),this.updateJoinPayload(Object.assign({config:N},I)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:W})=>{var Y;if(this.socket.setAuth(),W===void 0){o?.(Us.SUBSCRIBED);return}else{const le=this.bindings.postgres_changes,ae=(Y=le?.length)!==null&&Y!==void 0?Y:0,ie=[];for(let we=0;we<ae;we++){const Te=le[we],{filter:{event:xe,schema:Re,table:Ye,filter:We}}=Te,Xe=W&&W[we];if(Xe&&Xe.event===xe&&Xe.schema===Re&&Xe.table===Ye&&Xe.filter===We)ie.push(Object.assign(Object.assign({},Te),{id:Xe.id}));else{this.unsubscribe(),this.state=Cn.errored,o?.(Us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ie,o&&o(Us.SUBSCRIBED);return}}).receive("error",W=>{this.state=Cn.errored,o?.(Us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(W).join(", ")||"error")))}).receive("timeout",()=>{o?.(Us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(o,a={}){return await this.send({type:"presence",event:"track",payload:o},a.timeout||this.timeout)}async untrack(o={}){return await this.send({type:"presence",event:"untrack"},o)}on(o,a,c){return this.state===Cn.joined&&o===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(o,a,c)}async send(o,a={}){var c,f;if(!this._canPush()&&o.type==="broadcast"){const{event:_,payload:y}=o,E={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:_,payload:y,private:this.private}]})};try{const M=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((f=M.body)===null||f===void 0?void 0:f.cancel()),M.ok?"ok":"error"}catch(M){return M.name==="AbortError"?"timed out":"error"}}else return new Promise(_=>{var y,b,E;const M=this._push(o.type,o,a.timeout||this.timeout);o.type==="broadcast"&&!(!((E=(b=(y=this.params)===null||y===void 0?void 0:y.config)===null||b===void 0?void 0:b.broadcast)===null||E===void 0)&&E.ack)&&_("ok"),M.receive("ok",()=>_("ok")),M.receive("error",()=>_("error")),M.receive("timeout",()=>_("timed out"))})}updateJoinPayload(o){this.joinPush.updatePayload(o)}unsubscribe(o=this.timeout){this.state=Cn.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(f=>{c=new rc(this,Sr.leave,{},o),c.receive("ok",()=>{a(),f("ok")}).receive("timeout",()=>{a(),f("timed out")}).receive("error",()=>{f("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(o=>o.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Cn.closed,this.bindings={}}async _fetchWithTimeout(o,a,c){const f=new AbortController,_=setTimeout(()=>f.abort(),c),y=await this.socket.fetch(o,Object.assign(Object.assign({},a),{signal:f.signal}));return clearTimeout(_),y}_push(o,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${o}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let f=new rc(this,o,a,c);return this._canPush()?f.send():this._addToPushBuffer(f),f}_addToPushBuffer(o){if(o.startTimeout(),this.pushBuffer.push(o),this.pushBuffer.length>rg){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(o,a,c){return a}_isMember(o){return this.topic===o}_joinRef(){return this.joinPush.ref}_trigger(o,a,c){var f,_;const y=o.toLocaleLowerCase(),{close:b,error:E,leave:M,join:I}=Sr;if(c&&[b,E,M,I].indexOf(y)>=0&&c!==this._joinRef())return;let W=this._onMessage(y,a,c);if(a&&!W)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(y)?(f=this.bindings.postgres_changes)===null||f===void 0||f.filter(Y=>{var le,ae,ie;return((le=Y.filter)===null||le===void 0?void 0:le.event)==="*"||((ie=(ae=Y.filter)===null||ae===void 0?void 0:ae.event)===null||ie===void 0?void 0:ie.toLocaleLowerCase())===y}).map(Y=>Y.callback(W,c)):(_=this.bindings[y])===null||_===void 0||_.filter(Y=>{var le,ae,ie,we,Te,xe;if(["broadcast","presence","postgres_changes"].includes(y))if("id"in Y){const Re=Y.id,Ye=(le=Y.filter)===null||le===void 0?void 0:le.event;return Re&&((ae=a.ids)===null||ae===void 0?void 0:ae.includes(Re))&&(Ye==="*"||Ye?.toLocaleLowerCase()===((ie=a.data)===null||ie===void 0?void 0:ie.type.toLocaleLowerCase()))}else{const Re=(Te=(we=Y?.filter)===null||we===void 0?void 0:we.event)===null||Te===void 0?void 0:Te.toLocaleLowerCase();return Re==="*"||Re===((xe=a?.event)===null||xe===void 0?void 0:xe.toLocaleLowerCase())}else return Y.type.toLocaleLowerCase()===y}).map(Y=>{if(typeof W=="object"&&"ids"in W){const le=W.data,{schema:ae,table:ie,commit_timestamp:we,type:Te,errors:xe}=le;W=Object.assign(Object.assign({},{schema:ae,table:ie,commit_timestamp:we,eventType:Te,new:{},old:{},errors:xe}),this._getPayloadRecords(le))}Y.callback(W,c)})}_isClosed(){return this.state===Cn.closed}_isJoined(){return this.state===Cn.joined}_isJoining(){return this.state===Cn.joining}_isLeaving(){return this.state===Cn.leaving}_replyEventName(o){return`chan_reply_${o}`}_on(o,a,c){const f=o.toLocaleLowerCase(),_={type:f,filter:a,callback:c};return this.bindings[f]?this.bindings[f].push(_):this.bindings[f]=[_],this}_off(o,a){const c=o.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(f=>{var _;return!(((_=f.type)===null||_===void 0?void 0:_.toLocaleLowerCase())===c&&Ac.isEqual(f.filter,a))})),this}static isEqual(o,a){if(Object.keys(o).length!==Object.keys(a).length)return!1;for(const c in o)if(o[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(o){this._on(Sr.close,{},o)}_onError(o){this._on(Sr.error,{},a=>o(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(o=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cn.joining,this.joinPush.resend(o))}_getPayloadRecords(o){const a={new:{},old:{}};return(o.type==="INSERT"||o.type==="UPDATE")&&(a.new=Pf(o.columns,o.record)),(o.type==="UPDATE"||o.type==="DELETE")&&(a.old=Pf(o.columns,o.old_record)),a}}const Bf=()=>{},Ku={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dg=[1e3,2e3,5e3,1e4],fg=1e4,pg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mg{constructor(o,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=Ku.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bf,this.ref=0,this.reconnectTimer=null,this.logger=Bf,this.conn=null,this.sendBuffer=[],this.serializer=new sg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=f=>{let _;return f?_=f:typeof fetch>"u"?_=(...y)=>pu(async()=>{const{default:b}=await Promise.resolve().then(()=>El);return{default:b}},void 0).then(({default:b})=>b(...y)).catch(b=>{throw new Error(`Failed to load @supabase/node-fetch: ${b.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):_=fetch,(...y)=>_(...y)},!(!((c=a?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${o}/${gc.websocket}`,this.httpEndpoint=up(o),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qm.createWebSocket(this.endpointURL())}catch(o){this._setConnectionState("disconnected");const a=o.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ng}))}disconnect(o,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},o?this.conn.close(o,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(o){const a=await o.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const o=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),o}log(o,a,c){this.logger(o,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case au.connecting:return Ba.Connecting;case au.open:return Ba.Open;case au.closing:return Ba.Closing;default:return Ba.Closed}}isConnected(){return this.connectionState()===Ba.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(o,a={config:{}}){const c=`realtime:${o}`,f=this.getChannels().find(_=>_.topic===c);if(f)return f;{const _=new Ac(`realtime:${o}`,a,this);return this.channels.push(_),_}}push(o){const{topic:a,event:c,payload:f,ref:_}=o,y=()=>{this.encode(o,b=>{var E;(E=this.conn)===null||E===void 0||E.send(b)})};this.log("push",`${a} ${c} (${_})`,f),this.isConnected()?y():this.sendBuffer.push(y)}async setAuth(o=null){this._authPromise=this._performAuth(o);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var o;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(o=this.conn)===null||o===void 0||o.close(ig,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Ku.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(o){this.heartbeatCallback=o}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(o=>o()),this.sendBuffer=[])}_makeRef(){let o=this.ref+1;return o===this.ref?this.ref=0:this.ref=o,this.ref.toString()}_leaveOpenTopic(o){let a=this.channels.find(c=>c.topic===o&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${o}"`),a.unsubscribe())}_remove(o){this.channels=this.channels.filter(a=>a.topic!==o.topic)}_onConnMessage(o){this.decode(o.data,a=>{a.topic==="phoenix"&&a.event==="phx_reply"&&this.heartbeatCallback(a.payload.status==="ok"?"ok":"error"),a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:f,payload:_,ref:y}=a,b=y?`(${y})`:"",E=_.status||"";this.log("receive",`${E} ${c} ${f} ${b}`.trim(),_),this.channels.filter(M=>M._isMember(c)).forEach(M=>M._trigger(f,_,y)),this._triggerStateCallbacks("message",a)})}_clearTimer(o){var a;o==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):o==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=o=>this._onConnError(o),this.conn.onmessage=o=>this._onConnMessage(o),this.conn.onclose=o=>this._onConnClose(o))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(o=>o.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const o=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(o),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(o){var a;this._setConnectionState("disconnected"),this.log("transport","close",o),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",o)}_onConnError(o){this._setConnectionState("disconnected"),this.log("transport",`${o}`),this._triggerChanError(),this._triggerStateCallbacks("error",o)}_triggerChanError(){this.channels.forEach(o=>o._trigger(Sr.error))}_appendParams(o,a){if(Object.keys(a).length===0)return o;const c=o.match(/\?/)?"&":"?",f=new URLSearchParams(a);return`${o}${c}${f}`}_workerObjectUrl(o){let a;if(o)a=o;else{const c=new Blob([pg],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(o,a=!1){this._connectionState=o,o==="connecting"?this._wasManualDisconnect=!1:o==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(o=null){let a;o?a=o:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const f={access_token:a,version:tg};a&&c.updateJoinPayload(f),c.joinedOnce&&c._isJoined()&&c._push(Sr.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(o="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${o}`,a)})}_triggerStateCallbacks(o,a){try{this.stateChangeCallbacks[o].forEach(c=>{try{c(a)}catch(f){this.log("error",`error in ${o} callback`,f)}})}catch(c){this.log("error",`error triggering ${o} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new ap(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ku.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(o){var a,c,f,_,y,b,E,M;if(this.transport=(a=o?.transport)!==null&&a!==void 0?a:null,this.timeout=(c=o?.timeout)!==null&&c!==void 0?c:mc,this.heartbeatIntervalMs=(f=o?.heartbeatIntervalMs)!==null&&f!==void 0?f:Ku.HEARTBEAT_INTERVAL,this.worker=(_=o?.worker)!==null&&_!==void 0?_:!1,this.accessToken=(y=o?.accessToken)!==null&&y!==void 0?y:null,o?.params&&(this.params=o.params),o?.logger&&(this.logger=o.logger),(o?.logLevel||o?.log_level)&&(this.logLevel=o.logLevel||o.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=o?.reconnectAfterMs)!==null&&b!==void 0?b:(I=>dg[I-1]||fg),this.encode=(E=o?.encode)!==null&&E!==void 0?E:((I,N)=>N(JSON.stringify(I))),this.decode=(M=o?.decode)!==null&&M!==void 0?M:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=o?.workerUrl}}}class Dc extends Error{constructor(o){super(o),this.__isStorageError=!0,this.name="StorageError"}}function bn(m){return typeof m=="object"&&m!==null&&"__isStorageError"in m}class gg extends Dc{constructor(o,a,c){super(o),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yc extends Dc{constructor(o,a){super(o),this.name="StorageUnknownError",this.originalError=a}}var _g=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};const hp=m=>{let o;return m?o=m:typeof fetch>"u"?o=(...a)=>pu(async()=>{const{default:c}=await Promise.resolve().then(()=>El);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},yg=()=>_g(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pu(()=>Promise.resolve().then(()=>El),void 0)).Response:Response}),vc=m=>{if(Array.isArray(m))return m.map(a=>vc(a));if(typeof m=="function"||m!==Object(m))return m;const o={};return Object.entries(m).forEach(([a,c])=>{const f=a.replace(/([-_][a-z])/gi,_=>_.toUpperCase().replace(/[-_]/g,""));o[f]=vc(c)}),o},vg=m=>{if(typeof m!="object"||m===null)return!1;const o=Object.getPrototypeOf(m);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in m)&&!(Symbol.iterator in m)};var Ta=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};const sc=m=>m.msg||m.message||m.error_description||m.error||JSON.stringify(m),wg=(m,o,a)=>Ta(void 0,void 0,void 0,function*(){const c=yield yg();m instanceof c&&!a?.noResolveJson?m.json().then(f=>{const _=m.status||500,y=f?.statusCode||_+"";o(new gg(sc(f),_,y))}).catch(f=>{o(new yc(sc(f),f))}):o(new yc(sc(m),m))}),xg=(m,o,a,c)=>{const f={method:m,headers:o?.headers||{}};return m==="GET"||!c?f:(vg(c)?(f.headers=Object.assign({"Content-Type":"application/json"},o?.headers),f.body=JSON.stringify(c)):f.body=c,o?.duplex&&(f.duplex=o.duplex),Object.assign(Object.assign({},f),a))};function mu(m,o,a,c,f,_){return Ta(this,void 0,void 0,function*(){return new Promise((y,b)=>{m(a,xg(o,c,f,_)).then(E=>{if(!E.ok)throw E;return c?.noResolveJson?E:E.json()}).then(E=>y(E)).catch(E=>wg(E,b,c))})})}function sh(m,o,a,c){return Ta(this,void 0,void 0,function*(){return mu(m,"GET",o,a,c)})}function os(m,o,a,c,f){return Ta(this,void 0,void 0,function*(){return mu(m,"POST",o,c,f,a)})}function wc(m,o,a,c,f){return Ta(this,void 0,void 0,function*(){return mu(m,"PUT",o,c,f,a)})}function Lg(m,o,a,c){return Ta(this,void 0,void 0,function*(){return mu(m,"HEAD",o,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function cp(m,o,a,c,f){return Ta(this,void 0,void 0,function*(){return mu(m,"DELETE",o,c,f,a)})}var ui=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};const kg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cg{constructor(o,a={},c,f){this.url=o,this.headers=a,this.bucketId=c,this.fetch=hp(f)}uploadOrUpdate(o,a,c,f){return ui(this,void 0,void 0,function*(){try{let _;const y=Object.assign(Object.assign({},Tf),f);let b=Object.assign(Object.assign({},this.headers),o==="POST"&&{"x-upsert":String(y.upsert)});const E=y.metadata;typeof Blob<"u"&&c instanceof Blob?(_=new FormData,_.append("cacheControl",y.cacheControl),E&&_.append("metadata",this.encodeMetadata(E)),_.append("",c)):typeof FormData<"u"&&c instanceof FormData?(_=c,_.append("cacheControl",y.cacheControl),E&&_.append("metadata",this.encodeMetadata(E))):(_=c,b["cache-control"]=`max-age=${y.cacheControl}`,b["content-type"]=y.contentType,E&&(b["x-metadata"]=this.toBase64(this.encodeMetadata(E)))),f?.headers&&(b=Object.assign(Object.assign({},b),f.headers));const M=this._removeEmptyFolders(a),I=this._getFinalPath(M),N=yield(o=="PUT"?wc:os)(this.fetch,`${this.url}/object/${I}`,_,Object.assign({headers:b},y?.duplex?{duplex:y.duplex}:{}));return{data:{path:M,id:N.Id,fullPath:N.Key},error:null}}catch(_){if(bn(_))return{data:null,error:_};throw _}})}upload(o,a,c){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",o,a,c)})}uploadToSignedUrl(o,a,c,f){return ui(this,void 0,void 0,function*(){const _=this._removeEmptyFolders(o),y=this._getFinalPath(_),b=new URL(this.url+`/object/upload/sign/${y}`);b.searchParams.set("token",a);try{let E;const M=Object.assign({upsert:Tf.upsert},f),I=Object.assign(Object.assign({},this.headers),{"x-upsert":String(M.upsert)});typeof Blob<"u"&&c instanceof Blob?(E=new FormData,E.append("cacheControl",M.cacheControl),E.append("",c)):typeof FormData<"u"&&c instanceof FormData?(E=c,E.append("cacheControl",M.cacheControl)):(E=c,I["cache-control"]=`max-age=${M.cacheControl}`,I["content-type"]=M.contentType);const N=yield wc(this.fetch,b.toString(),E,{headers:I});return{data:{path:_,fullPath:N.Key},error:null}}catch(E){if(bn(E))return{data:null,error:E};throw E}})}createSignedUploadUrl(o,a){return ui(this,void 0,void 0,function*(){try{let c=this._getFinalPath(o);const f=Object.assign({},this.headers);a?.upsert&&(f["x-upsert"]="true");const _=yield os(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:f}),y=new URL(this.url+_.url),b=y.searchParams.get("token");if(!b)throw new Dc("No token returned by API");return{data:{signedUrl:y.toString(),path:o,token:b},error:null}}catch(c){if(bn(c))return{data:null,error:c};throw c}})}update(o,a,c){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",o,a,c)})}move(o,a,c){return ui(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:o,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers}),error:null}}catch(f){if(bn(f))return{data:null,error:f};throw f}})}copy(o,a,c){return ui(this,void 0,void 0,function*(){try{return{data:{path:(yield os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:o,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(f){if(bn(f))return{data:null,error:f};throw f}})}createSignedUrl(o,a,c){return ui(this,void 0,void 0,function*(){try{let f=this._getFinalPath(o),_=yield os(this.fetch,`${this.url}/object/sign/${f}`,Object.assign({expiresIn:a},c?.transform?{transform:c.transform}:{}),{headers:this.headers});const y=c?.download?`&download=${c.download===!0?"":c.download}`:"";return _={signedUrl:encodeURI(`${this.url}${_.signedURL}${y}`)},{data:_,error:null}}catch(f){if(bn(f))return{data:null,error:f};throw f}})}createSignedUrls(o,a,c){return ui(this,void 0,void 0,function*(){try{const f=yield os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:o},{headers:this.headers}),_=c?.download?`&download=${c.download===!0?"":c.download}`:"";return{data:f.map(y=>Object.assign(Object.assign({},y),{signedUrl:y.signedURL?encodeURI(`${this.url}${y.signedURL}${_}`):null})),error:null}}catch(f){if(bn(f))return{data:null,error:f};throw f}})}download(o,a){return ui(this,void 0,void 0,function*(){const f=typeof a?.transform<"u"?"render/image/authenticated":"object",_=this.transformOptsToQueryString(a?.transform||{}),y=_?`?${_}`:"";try{const b=this._getFinalPath(o);return{data:yield(yield sh(this.fetch,`${this.url}/${f}/${b}${y}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(b){if(bn(b))return{data:null,error:b};throw b}})}info(o){return ui(this,void 0,void 0,function*(){const a=this._getFinalPath(o);try{const c=yield sh(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:vc(c),error:null}}catch(c){if(bn(c))return{data:null,error:c};throw c}})}exists(o){return ui(this,void 0,void 0,function*(){const a=this._getFinalPath(o);try{return yield Lg(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(bn(c)&&c instanceof yc){const f=c.originalError;if([400,404].includes(f?.status))return{data:!1,error:c}}throw c}})}getPublicUrl(o,a){const c=this._getFinalPath(o),f=[],_=a?.download?`download=${a.download===!0?"":a.download}`:"";_!==""&&f.push(_);const b=typeof a?.transform<"u"?"render/image":"object",E=this.transformOptsToQueryString(a?.transform||{});E!==""&&f.push(E);let M=f.join("&");return M!==""&&(M=`?${M}`),{data:{publicUrl:encodeURI(`${this.url}/${b}/public/${c}${M}`)}}}remove(o){return ui(this,void 0,void 0,function*(){try{return{data:yield cp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:o},{headers:this.headers}),error:null}}catch(a){if(bn(a))return{data:null,error:a};throw a}})}list(o,a,c){return ui(this,void 0,void 0,function*(){try{const f=Object.assign(Object.assign(Object.assign({},kg),a),{prefix:o||""});return{data:yield os(this.fetch,`${this.url}/object/list/${this.bucketId}`,f,{headers:this.headers},c),error:null}}catch(f){if(bn(f))return{data:null,error:f};throw f}})}listV2(o,a){return ui(this,void 0,void 0,function*(){try{const c=Object.assign({},o);return{data:yield os(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(bn(c))return{data:null,error:c};throw c}})}encodeMetadata(o){return JSON.stringify(o)}toBase64(o){return typeof Buffer<"u"?Buffer.from(o).toString("base64"):btoa(o)}_getFinalPath(o){return`${this.bucketId}/${o.replace(/^\/+/,"")}`}_removeEmptyFolders(o){return o.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(o){const a=[];return o.width&&a.push(`width=${o.width}`),o.height&&a.push(`height=${o.height}`),o.resize&&a.push(`resize=${o.resize}`),o.format&&a.push(`format=${o.format}`),o.quality&&a.push(`quality=${o.quality}`),a.join("&")}}const bg="2.11.0",Eg={"X-Client-Info":`storage-js/${bg}`};var yl=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};class Pg{constructor(o,a={},c,f){const _=new URL(o);f?.useNewHostname&&/supabase\.(co|in|red)$/.test(_.hostname)&&!_.hostname.includes("storage.supabase.")&&(_.hostname=_.hostname.replace("supabase.","storage.supabase.")),this.url=_.href,this.headers=Object.assign(Object.assign({},Eg),a),this.fetch=hp(c)}listBuckets(){return yl(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(o){if(bn(o))return{data:null,error:o};throw o}})}getBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket/${o}`,{headers:this.headers}),error:null}}catch(a){if(bn(a))return{data:null,error:a};throw a}})}createBucket(o,a={public:!1}){return yl(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{id:o,name:o,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(bn(c))return{data:null,error:c};throw c}})}updateBucket(o,a){return yl(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${o}`,{id:o,name:o,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(bn(c))return{data:null,error:c};throw c}})}emptyBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${o}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(bn(a))return{data:null,error:a};throw a}})}deleteBucket(o){return yl(this,void 0,void 0,function*(){try{return{data:yield cp(this.fetch,`${this.url}/bucket/${o}`,{},{headers:this.headers}),error:null}}catch(a){if(bn(a))return{data:null,error:a};throw a}})}}class Sg extends Pg{constructor(o,a={},c,f){super(o,a,c,f)}from(o){return new Cg(this.url,this.headers,o,this.fetch)}}const Mg="2.55.0";let iu="";typeof Deno<"u"?iu="deno":typeof document<"u"?iu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?iu="react-native":iu="node";const Bg={"X-Client-Info":`supabase-js-${iu}/${Mg}`},Tg={headers:Bg},Ag={schema:"public"},Dg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rg={};var Og=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};const Ig=m=>{let o;return m?o=m:typeof fetch>"u"?o=tp:o=fetch,(...a)=>o(...a)},jg=()=>typeof Headers>"u"?np:Headers,Ng=(m,o,a)=>{const c=Ig(a),f=jg();return(_,y)=>Og(void 0,void 0,void 0,function*(){var b;const E=(b=yield o())!==null&&b!==void 0?b:m;let M=new f(y?.headers);return M.has("apikey")||M.set("apikey",m),M.has("Authorization")||M.set("Authorization",`Bearer ${E}`),c(_,Object.assign(Object.assign({},y),{headers:M}))})};var Fg=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};function zg(m){return m.endsWith("/")?m:m+"/"}function Ug(m,o){var a,c;const{db:f,auth:_,realtime:y,global:b}=m,{db:E,auth:M,realtime:I,global:N}=o,W={db:Object.assign(Object.assign({},E),f),auth:Object.assign(Object.assign({},M),_),realtime:Object.assign(Object.assign({},I),y),storage:{},global:Object.assign(Object.assign(Object.assign({},N),b),{headers:Object.assign(Object.assign({},(a=N?.headers)!==null&&a!==void 0?a:{}),(c=b?.headers)!==null&&c!==void 0?c:{})}),accessToken:()=>Fg(this,void 0,void 0,function*(){return""})};return m.accessToken?W.accessToken=m.accessToken:delete W.accessToken,W}const dp="2.71.1",kl=30*1e3,xc=3,oc=xc*kl,$g="http://localhost:9999",Gg="supabase.auth.token",Vg={"X-Client-Info":`gotrue-js/${dp}`},Lc="X-Supabase-Api-Version",fp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zg=600*1e3;class Rc extends Error{constructor(o,a,c){super(o),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function gt(m){return typeof m=="object"&&m!==null&&"__isAuthError"in m}class Wg extends Rc{constructor(o,a,c){super(o,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function qg(m){return gt(m)&&m.name==="AuthApiError"}class pp extends Rc{constructor(o,a){super(o),this.name="AuthUnknownError",this.originalError=a}}class jo extends Rc{constructor(o,a,c,f){super(o,c,f),this.name=a,this.status=c}}class Ro extends jo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Kg(m){return gt(m)&&m.name==="AuthSessionMissingError"}class Ju extends jo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yu extends jo{constructor(o){super(o,"AuthInvalidCredentialsError",400,void 0)}}class Xu extends jo{constructor(o,a=null){super(o,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jg(m){return gt(m)&&m.name==="AuthImplicitGrantRedirectError"}class Af extends jo{constructor(o,a=null){super(o,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kc extends jo{constructor(o,a){super(o,"AuthRetryableFetchError",a,void 0)}}function ac(m){return gt(m)&&m.name==="AuthRetryableFetchError"}class Df extends jo{constructor(o,a,c){super(o,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class Cc extends jo{constructor(o){super(o,"AuthInvalidJwtError",400,"invalid_jwt")}}const oh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rf=` 	
\r=`.split(""),Yg=(()=>{const m=new Array(128);for(let o=0;o<m.length;o+=1)m[o]=-1;for(let o=0;o<Rf.length;o+=1)m[Rf[o].charCodeAt(0)]=-2;for(let o=0;o<oh.length;o+=1)m[oh[o].charCodeAt(0)]=o;return m})();function Of(m,o,a){if(m!==null)for(o.queue=o.queue<<8|m,o.queuedBits+=8;o.queuedBits>=6;){const c=o.queue>>o.queuedBits-6&63;a(oh[c]),o.queuedBits-=6}else if(o.queuedBits>0)for(o.queue=o.queue<<6-o.queuedBits,o.queuedBits=6;o.queuedBits>=6;){const c=o.queue>>o.queuedBits-6&63;a(oh[c]),o.queuedBits-=6}}function mp(m,o,a){const c=Yg[m];if(c>-1)for(o.queue=o.queue<<6|c,o.queuedBits+=6;o.queuedBits>=8;)a(o.queue>>o.queuedBits-8&255),o.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(m)}"`)}}function If(m){const o=[],a=y=>{o.push(String.fromCodePoint(y))},c={utf8seq:0,codepoint:0},f={queue:0,queuedBits:0},_=y=>{e0(y,c,a)};for(let y=0;y<m.length;y+=1)mp(m.charCodeAt(y),f,_);return o.join("")}function Xg(m,o){if(m<=127){o(m);return}else if(m<=2047){o(192|m>>6),o(128|m&63);return}else if(m<=65535){o(224|m>>12),o(128|m>>6&63),o(128|m&63);return}else if(m<=1114111){o(240|m>>18),o(128|m>>12&63),o(128|m>>6&63),o(128|m&63);return}throw new Error(`Unrecognized Unicode codepoint: ${m.toString(16)}`)}function Qg(m,o){for(let a=0;a<m.length;a+=1){let c=m.charCodeAt(a);if(c>55295&&c<=56319){const f=(c-55296)*1024&65535;c=(m.charCodeAt(a+1)-56320&65535|f)+65536,a+=1}Xg(c,o)}}function e0(m,o,a){if(o.utf8seq===0){if(m<=127){a(m);return}for(let c=1;c<6;c+=1)if((m>>7-c&1)===0){o.utf8seq=c;break}if(o.utf8seq===2)o.codepoint=m&31;else if(o.utf8seq===3)o.codepoint=m&15;else if(o.utf8seq===4)o.codepoint=m&7;else throw new Error("Invalid UTF-8 sequence");o.utf8seq-=1}else if(o.utf8seq>0){if(m<=127)throw new Error("Invalid UTF-8 sequence");o.codepoint=o.codepoint<<6|m&63,o.utf8seq-=1,o.utf8seq===0&&a(o.codepoint)}}function t0(m){const o=[],a={queue:0,queuedBits:0},c=f=>{o.push(f)};for(let f=0;f<m.length;f+=1)mp(m.charCodeAt(f),a,c);return new Uint8Array(o)}function n0(m){const o=[];return Qg(m,a=>o.push(a)),new Uint8Array(o)}function i0(m){const o=[],a={queue:0,queuedBits:0},c=f=>{o.push(f)};return m.forEach(f=>Of(f,a,c)),Of(null,a,c),o.join("")}function r0(m){return Math.round(Date.now()/1e3)+m}function s0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){const o=Math.random()*16|0;return(m=="x"?o:o&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",Pa={tested:!1,writable:!1},gp=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pa.tested)return Pa.writable;const m=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(m,m),globalThis.localStorage.removeItem(m),Pa.tested=!0,Pa.writable=!0}catch{Pa.tested=!0,Pa.writable=!1}return Pa.writable};function o0(m){const o={},a=new URL(m);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((f,_)=>{o[_]=f})}catch{}return a.searchParams.forEach((c,f)=>{o[f]=c}),o}const _p=m=>{let o;return m?o=m:typeof fetch>"u"?o=(...a)=>pu(async()=>{const{default:c}=await Promise.resolve().then(()=>El);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},a0=m=>typeof m=="object"&&m!==null&&"status"in m&&"ok"in m&&"json"in m&&typeof m.json=="function",Cl=async(m,o,a)=>{await m.setItem(o,JSON.stringify(a))},Sa=async(m,o)=>{const a=await m.getItem(o);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Do=async(m,o)=>{await m.removeItem(o)};class uh{constructor(){this.promise=new uh.promiseConstructor((o,a)=>{this.resolve=o,this.reject=a})}}uh.promiseConstructor=Promise;function lc(m){const o=m.split(".");if(o.length!==3)throw new Cc("Invalid JWT structure");for(let c=0;c<o.length;c++)if(!Hg.test(o[c]))throw new Cc("JWT not in base64url format");return{header:JSON.parse(If(o[0])),payload:JSON.parse(If(o[1])),signature:t0(o[2]),raw:{header:o[0],payload:o[1]}}}async function l0(m){return await new Promise(o=>{setTimeout(()=>o(null),m)})}function u0(m,o){return new Promise((c,f)=>{(async()=>{for(let _=0;_<1/0;_++)try{const y=await m(_);if(!o(_,null,y)){c(y);return}}catch(y){if(!o(_,y)){f(y);return}}})()})}function h0(m){return("0"+m.toString(16)).substr(-2)}function c0(){const o=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let f="";for(let _=0;_<56;_++)f+=a.charAt(Math.floor(Math.random()*c));return f}return crypto.getRandomValues(o),Array.from(o,h0).join("")}async function d0(m){const a=new TextEncoder().encode(m),c=await crypto.subtle.digest("SHA-256",a),f=new Uint8Array(c);return Array.from(f).map(_=>String.fromCharCode(_)).join("")}async function f0(m){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),m;const a=await d0(m);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vl(m,o,a=!1){const c=c0();let f=c;a&&(f+="/PASSWORD_RECOVERY"),await Cl(m,`${o}-code-verifier`,f);const _=await f0(c);return[_,c===_?"plain":"s256"]}const p0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function m0(m){const o=m.headers.get(Lc);if(!o||!o.match(p0))return null;try{return new Date(`${o}T00:00:00.0Z`)}catch{return null}}function g0(m){if(!m)throw new Error("Missing exp claim");const o=Math.floor(Date.now()/1e3);if(m<=o)throw new Error("JWT has expired")}function _0(m){switch(m){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wl(m){if(!y0.test(m))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uc(){const m={};return new Proxy(m,{get:(o,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(o,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(o,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jf(m){return JSON.parse(JSON.stringify(m))}var v0=function(m,o){var a={};for(var c in m)Object.prototype.hasOwnProperty.call(m,c)&&o.indexOf(c)<0&&(a[c]=m[c]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(m);f<c.length;f++)o.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(m,c[f])&&(a[c[f]]=m[c[f]]);return a};const Ma=m=>m.msg||m.message||m.error_description||m.error||JSON.stringify(m),w0=[502,503,504];async function Nf(m){var o;if(!a0(m))throw new kc(Ma(m),0);if(w0.includes(m.status))throw new kc(Ma(m),m.status);let a;try{a=await m.json()}catch(_){throw new pp(Ma(_),_)}let c;const f=m0(m);if(f&&f.getTime()>=fp["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new Df(Ma(a),m.status,((o=a.weak_password)===null||o===void 0?void 0:o.reasons)||[]);if(c==="session_not_found")throw new Ro}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((_,y)=>_&&typeof y=="string",!0))throw new Df(Ma(a),m.status,a.weak_password.reasons);throw new Wg(Ma(a),m.status||500,c)}const x0=(m,o,a,c)=>{const f={method:m,headers:o?.headers||{}};return m==="GET"?f:(f.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},o?.headers),f.body=JSON.stringify(c),Object.assign(Object.assign({},f),a))};async function kt(m,o,a,c){var f;const _=Object.assign({},c?.headers);_[Lc]||(_[Lc]=fp["2024-01-01"].name),c?.jwt&&(_.Authorization=`Bearer ${c.jwt}`);const y=(f=c?.query)!==null&&f!==void 0?f:{};c?.redirectTo&&(y.redirect_to=c.redirectTo);const b=Object.keys(y).length?"?"+new URLSearchParams(y).toString():"",E=await L0(m,o,a+b,{headers:_,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(E):{data:Object.assign({},E),error:null}}async function L0(m,o,a,c,f,_){const y=x0(o,c,f,_);let b;try{b=await m(a,Object.assign({},y))}catch(E){throw console.error(E),new kc(Ma(E),0)}if(b.ok||await Nf(b),c?.noResolveJson)return b;try{return await b.json()}catch(E){await Nf(E)}}function zs(m){var o;let a=null;E0(m)&&(a=Object.assign({},m),m.expires_at||(a.expires_at=r0(m.expires_in)));const c=(o=m.user)!==null&&o!==void 0?o:m;return{data:{session:a,user:c},error:null}}function Ff(m){const o=zs(m);return!o.error&&m.weak_password&&typeof m.weak_password=="object"&&Array.isArray(m.weak_password.reasons)&&m.weak_password.reasons.length&&m.weak_password.message&&typeof m.weak_password.message=="string"&&m.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(o.data.weak_password=m.weak_password),o}function Oo(m){var o;return{data:{user:(o=m.user)!==null&&o!==void 0?o:m},error:null}}function k0(m){return{data:m,error:null}}function C0(m){const{action_link:o,email_otp:a,hashed_token:c,redirect_to:f,verification_type:_}=m,y=v0(m,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),b={action_link:o,email_otp:a,hashed_token:c,redirect_to:f,verification_type:_},E=Object.assign({},y);return{data:{properties:b,user:E},error:null}}function b0(m){return m}function E0(m){return m.access_token&&m.refresh_token&&m.expires_in}const hc=["global","local","others"];var P0=function(m,o){var a={};for(var c in m)Object.prototype.hasOwnProperty.call(m,c)&&o.indexOf(c)<0&&(a[c]=m[c]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(m);f<c.length;f++)o.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(m,c[f])&&(a[c[f]]=m[c[f]]);return a};class S0{constructor({url:o="",headers:a={},fetch:c}){this.url=o,this.headers=a,this.fetch=_p(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(o,a=hc[0]){if(hc.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hc.join(", ")}`);try{return await kt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:o,noResolveJson:!0}),{data:null,error:null}}catch(c){if(gt(c))return{data:null,error:c};throw c}}async inviteUserByEmail(o,a={}){try{return await kt(this.fetch,"POST",`${this.url}/invite`,{body:{email:o,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Oo})}catch(c){if(gt(c))return{data:{user:null},error:c};throw c}}async generateLink(o){try{const{options:a}=o,c=P0(o,["options"]),f=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(f.new_email=c?.newEmail,delete f.newEmail),await kt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:f,headers:this.headers,xform:C0,redirectTo:a?.redirectTo})}catch(a){if(gt(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(o){try{return await kt(this.fetch,"POST",`${this.url}/admin/users`,{body:o,headers:this.headers,xform:Oo})}catch(a){if(gt(a))return{data:{user:null},error:a};throw a}}async listUsers(o){var a,c,f,_,y,b,E;try{const M={nextPage:null,lastPage:0,total:0},I=await kt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=o?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(_=(f=o?.perPage)===null||f===void 0?void 0:f.toString())!==null&&_!==void 0?_:""},xform:b0});if(I.error)throw I.error;const N=await I.json(),W=(y=I.headers.get("x-total-count"))!==null&&y!==void 0?y:0,Y=(E=(b=I.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&E!==void 0?E:[];return Y.length>0&&(Y.forEach(le=>{const ae=parseInt(le.split(";")[0].split("=")[1].substring(0,1)),ie=JSON.parse(le.split(";")[1].split("=")[1]);M[`${ie}Page`]=ae}),M.total=parseInt(W)),{data:Object.assign(Object.assign({},N),M),error:null}}catch(M){if(gt(M))return{data:{users:[]},error:M};throw M}}async getUserById(o){wl(o);try{return await kt(this.fetch,"GET",`${this.url}/admin/users/${o}`,{headers:this.headers,xform:Oo})}catch(a){if(gt(a))return{data:{user:null},error:a};throw a}}async updateUserById(o,a){wl(o);try{return await kt(this.fetch,"PUT",`${this.url}/admin/users/${o}`,{body:a,headers:this.headers,xform:Oo})}catch(c){if(gt(c))return{data:{user:null},error:c};throw c}}async deleteUser(o,a=!1){wl(o);try{return await kt(this.fetch,"DELETE",`${this.url}/admin/users/${o}`,{headers:this.headers,body:{should_soft_delete:a},xform:Oo})}catch(c){if(gt(c))return{data:{user:null},error:c};throw c}}async _listFactors(o){wl(o.userId);try{const{data:a,error:c}=await kt(this.fetch,"GET",`${this.url}/admin/users/${o.userId}/factors`,{headers:this.headers,xform:f=>({data:{factors:f},error:null})});return{data:a,error:c}}catch(a){if(gt(a))return{data:null,error:a};throw a}}async _deleteFactor(o){wl(o.userId),wl(o.id);try{return{data:await kt(this.fetch,"DELETE",`${this.url}/admin/users/${o.userId}/factors/${o.id}`,{headers:this.headers}),error:null}}catch(a){if(gt(a))return{data:null,error:a};throw a}}}function zf(m={}){return{getItem:o=>m[o]||null,setItem:(o,a)=>{m[o]=a},removeItem:o=>{delete m[o]}}}function M0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xl={debug:!!(globalThis&&gp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yp extends Error{constructor(o){super(o),this.isAcquireTimeout=!0}}class B0 extends yp{}async function T0(m,o,a){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",m,o);const c=new globalThis.AbortController;return o>0&&setTimeout(()=>{c.abort(),xl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",m)},o),await Promise.resolve().then(()=>globalThis.navigator.locks.request(m,o===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async f=>{if(f){xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",m,f.name);try{return await a()}finally{xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",m,f.name)}}else{if(o===0)throw xl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",m),new B0(`Acquiring an exclusive Navigator LockManager lock "${m}" immediately failed`);if(xl.debug)try{const _=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(_,null,"  "))}catch(_){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",_)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}M0();const A0={url:$g,storageKey:Gg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uf(m,o,a){return await a()}const Ll={};class du{constructor(o){var a,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=du.nextInstanceID,du.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const f=Object.assign(Object.assign({},A0),o);if(this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.persistSession=f.persistSession,this.storageKey=f.storageKey,this.autoRefreshToken=f.autoRefreshToken,this.admin=new S0({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=_p(f.fetch),this.lock=f.lock||Uf,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,f.lock?this.lock=f.lock:Pr()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=T0:this.lock=Uf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:gp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zf(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=zf(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(_){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",_)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async _=>{this._debug("received broadcast notification from other tab or client",_),await this._notifyAllSubscribers(_.data.event,_.data.session,!1)})}this.initialize()}get jwks(){var o,a;return(a=(o=Ll[this.storageKey])===null||o===void 0?void 0:o.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(o){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{jwks:o})}get jwks_cached_at(){var o,a;return(a=(o=Ll[this.storageKey])===null||o===void 0?void 0:o.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(o){Ll[this.storageKey]=Object.assign(Object.assign({},Ll[this.storageKey]),{cachedAt:o})}_debug(...o){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dp}) ${new Date().toISOString()}`,...o),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var o;try{const a=o0(window.location.href);let c="none";if(this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce"),Pr()&&this.detectSessionInUrl&&c!=="none"){const{data:f,error:_}=await this._getSessionFromURL(a,c);if(_){if(this._debug("#_initialize()","error detecting session from URL",_),Jg(_)){const E=(o=_.details)===null||o===void 0?void 0:o.code;if(E==="identity_already_exists"||E==="identity_not_found"||E==="single_identity_not_deletable")return{error:_}}return await this._removeSession(),{error:_}}const{session:y,redirectType:b}=f;return this._debug("#_initialize()","detected session in URL",y,"redirect type",b),await this._saveSession(y),setTimeout(async()=>{b==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",y):await this._notifyAllSubscribers("SIGNED_IN",y)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return gt(a)?{error:a}:{error:new pp("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(o){var a,c,f;try{const _=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=o?.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(f=o?.options)===null||f===void 0?void 0:f.captchaToken}},xform:zs}),{data:y,error:b}=_;if(b||!y)return{data:{user:null,session:null},error:b};const E=y.session,M=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",E)),{data:{user:M,session:E},error:null}}catch(_){if(gt(_))return{data:{user:null,session:null},error:_};throw _}}async signUp(o){var a,c,f;try{let _;if("email"in o){const{email:I,password:N,options:W}=o;let Y=null,le=null;this.flowType==="pkce"&&([Y,le]=await vl(this.storage,this.storageKey)),_=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:W?.emailRedirectTo,body:{email:I,password:N,data:(a=W?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:W?.captchaToken},code_challenge:Y,code_challenge_method:le},xform:zs})}else if("phone"in o){const{phone:I,password:N,options:W}=o;_=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:I,password:N,data:(c=W?.data)!==null&&c!==void 0?c:{},channel:(f=W?.channel)!==null&&f!==void 0?f:"sms",gotrue_meta_security:{captcha_token:W?.captchaToken}},xform:zs})}else throw new Yu("You must provide either an email or phone number and a password");const{data:y,error:b}=_;if(b||!y)return{data:{user:null,session:null},error:b};const E=y.session,M=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",E)),{data:{user:M,session:E},error:null}}catch(_){if(gt(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithPassword(o){try{let a;if("email"in o){const{email:_,password:y,options:b}=o;a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:_,password:y,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ff})}else if("phone"in o){const{phone:_,password:y,options:b}=o;a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:_,password:y,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ff})}else throw new Yu("You must provide either an email or phone number and a password");const{data:c,error:f}=a;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ju}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:f})}catch(a){if(gt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(o){var a,c,f,_;return await this._handleProviderSignIn(o.provider,{redirectTo:(a=o.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=o.options)===null||c===void 0?void 0:c.scopes,queryParams:(f=o.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:(_=o.options)===null||_===void 0?void 0:_.skipBrowserRedirect})}async exchangeCodeForSession(o){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(o))}async signInWithWeb3(o){const{chain:a}=o;if(a==="solana")return await this.signInWithSolana(o);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(o){var a,c,f,_,y,b,E,M,I,N,W,Y;let le,ae;if("message"in o)le=o.message,ae=o.signature;else{const{chain:ie,wallet:we,statement:Te,options:xe}=o;let Re;if(Pr())if(typeof we=="object")Re=we;else{const We=window;if("solana"in We&&typeof We.solana=="object"&&("signIn"in We.solana&&typeof We.solana.signIn=="function"||"signMessage"in We.solana&&typeof We.solana.signMessage=="function"))Re=We.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof we!="object"||!xe?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Re=we}const Ye=new URL((a=xe?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in Re&&Re.signIn){const We=await Re.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},xe?.signInWithSolana),{version:"1",domain:Ye.host,uri:Ye.href}),Te?{statement:Te}:null));let Xe;if(Array.isArray(We)&&We[0]&&typeof We[0]=="object")Xe=We[0];else if(We&&typeof We=="object"&&"signedMessage"in We&&"signature"in We)Xe=We;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Xe&&"signature"in Xe&&(typeof Xe.signedMessage=="string"||Xe.signedMessage instanceof Uint8Array)&&Xe.signature instanceof Uint8Array)le=typeof Xe.signedMessage=="string"?Xe.signedMessage:new TextDecoder().decode(Xe.signedMessage),ae=Xe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Re)||typeof Re.signMessage!="function"||!("publicKey"in Re)||typeof Re!="object"||!Re.publicKey||!("toBase58"in Re.publicKey)||typeof Re.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");le=[`${Ye.host} wants you to sign in with your Solana account:`,Re.publicKey.toBase58(),...Te?["",Te,""]:[""],"Version: 1",`URI: ${Ye.href}`,`Issued At: ${(f=(c=xe?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date().toISOString()}`,...!((_=xe?.signInWithSolana)===null||_===void 0)&&_.notBefore?[`Not Before: ${xe.signInWithSolana.notBefore}`]:[],...!((y=xe?.signInWithSolana)===null||y===void 0)&&y.expirationTime?[`Expiration Time: ${xe.signInWithSolana.expirationTime}`]:[],...!((b=xe?.signInWithSolana)===null||b===void 0)&&b.chainId?[`Chain ID: ${xe.signInWithSolana.chainId}`]:[],...!((E=xe?.signInWithSolana)===null||E===void 0)&&E.nonce?[`Nonce: ${xe.signInWithSolana.nonce}`]:[],...!((M=xe?.signInWithSolana)===null||M===void 0)&&M.requestId?[`Request ID: ${xe.signInWithSolana.requestId}`]:[],...!((N=(I=xe?.signInWithSolana)===null||I===void 0?void 0:I.resources)===null||N===void 0)&&N.length?["Resources",...xe.signInWithSolana.resources.map(Xe=>`- ${Xe}`)]:[]].join(`
`);const We=await Re.signMessage(new TextEncoder().encode(le),"utf8");if(!We||!(We instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");ae=We}}try{const{data:ie,error:we}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:le,signature:i0(ae)},!((W=o.options)===null||W===void 0)&&W.captchaToken?{gotrue_meta_security:{captcha_token:(Y=o.options)===null||Y===void 0?void 0:Y.captchaToken}}:null),xform:zs});if(we)throw we;return!ie||!ie.session||!ie.user?{data:{user:null,session:null},error:new Ju}:(ie.session&&(await this._saveSession(ie.session),await this._notifyAllSubscribers("SIGNED_IN",ie.session)),{data:Object.assign({},ie),error:we})}catch(ie){if(gt(ie))return{data:{user:null,session:null},error:ie};throw ie}}async _exchangeCodeForSession(o){const a=await Sa(this.storage,`${this.storageKey}-code-verifier`),[c,f]=(a??"").split("/");try{const{data:_,error:y}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:o,code_verifier:c},xform:zs});if(await Do(this.storage,`${this.storageKey}-code-verifier`),y)throw y;return!_||!_.session||!_.user?{data:{user:null,session:null,redirectType:null},error:new Ju}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign(Object.assign({},_),{redirectType:f??null}),error:y})}catch(_){if(gt(_))return{data:{user:null,session:null,redirectType:null},error:_};throw _}}async signInWithIdToken(o){try{const{options:a,provider:c,token:f,access_token:_,nonce:y}=o,b=await kt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:f,access_token:_,nonce:y,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:zs}),{data:E,error:M}=b;return M?{data:{user:null,session:null},error:M}:!E||!E.session||!E.user?{data:{user:null,session:null},error:new Ju}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:E,error:M})}catch(a){if(gt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(o){var a,c,f,_,y;try{if("email"in o){const{email:b,options:E}=o;let M=null,I=null;this.flowType==="pkce"&&([M,I]=await vl(this.storage,this.storageKey));const{error:N}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:b,data:(a=E?.data)!==null&&a!==void 0?a:{},create_user:(c=E?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:M,code_challenge_method:I},redirectTo:E?.emailRedirectTo});return{data:{user:null,session:null},error:N}}if("phone"in o){const{phone:b,options:E}=o,{data:M,error:I}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:(f=E?.data)!==null&&f!==void 0?f:{},create_user:(_=E?.shouldCreateUser)!==null&&_!==void 0?_:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},channel:(y=E?.channel)!==null&&y!==void 0?y:"sms"}});return{data:{user:null,session:null,messageId:M?.message_id},error:I}}throw new Yu("You must provide either an email or phone number.")}catch(b){if(gt(b))return{data:{user:null,session:null},error:b};throw b}}async verifyOtp(o){var a,c;try{let f,_;"options"in o&&(f=(a=o.options)===null||a===void 0?void 0:a.redirectTo,_=(c=o.options)===null||c===void 0?void 0:c.captchaToken);const{data:y,error:b}=await kt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},o),{gotrue_meta_security:{captcha_token:_}}),redirectTo:f,xform:zs});if(b)throw b;if(!y)throw new Error("An error occurred on token verification.");const E=y.session,M=y.user;return E?.access_token&&(await this._saveSession(E),await this._notifyAllSubscribers(o.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",E)),{data:{user:M,session:E},error:null}}catch(f){if(gt(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithSSO(o){var a,c,f;try{let _=null,y=null;return this.flowType==="pkce"&&([_,y]=await vl(this.storage,this.storageKey)),await kt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in o?{provider_id:o.providerId}:null),"domain"in o?{domain:o.domain}:null),{redirect_to:(c=(a=o.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((f=o?.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:o.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:y}),headers:this.headers,xform:k0})}catch(_){if(gt(_))return{data:null,error:_};throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async o=>{const{data:{session:a},error:c}=o;if(c)throw c;if(!a)throw new Ro;const{error:f}=await kt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:f}})}catch(o){if(gt(o))return{data:{user:null,session:null},error:o};throw o}}async resend(o){try{const a=`${this.url}/resend`;if("email"in o){const{email:c,type:f,options:_}=o,{error:y}=await kt(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:f,gotrue_meta_security:{captcha_token:_?.captchaToken}},redirectTo:_?.emailRedirectTo});return{data:{user:null,session:null},error:y}}else if("phone"in o){const{phone:c,type:f,options:_}=o,{data:y,error:b}=await kt(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:f,gotrue_meta_security:{captcha_token:_?.captchaToken}}});return{data:{user:null,session:null,messageId:y?.message_id},error:b}}throw new Yu("You must provide either an email or phone number and a type")}catch(a){if(gt(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(o,a){this._debug("#_acquireLock","begin",o);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),f=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await f}catch{}})()),f}return await this.lock(`lock:${this.storageKey}`,o,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const f=[...this.pendingInLock];await Promise.all(f),this.pendingInLock.splice(0,f.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(o){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await o(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let o=null;const a=await Sa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?o=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!o)return{data:{session:null},error:null};const c=o.expires_at?o.expires_at*1e3-Date.now()<oc:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",o.expires_at),!c){if(this.userStorage){const y=await Sa(this.userStorage,this.storageKey+"-user");y?.user?o.user=y.user:o.user=uc()}if(this.storage.isServer&&o.user){let y=this.suppressGetSessionWarning;o=new Proxy(o,{get:(E,M,I)=>(!y&&M==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),y=!0,this.suppressGetSessionWarning=!0),Reflect.get(E,M,I))})}return{data:{session:o},error:null}}const{session:f,error:_}=await this._callRefreshToken(o.refresh_token);return _?{data:{session:null},error:_}:{data:{session:f},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(o){return o?await this._getUser(o):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(o){try{return o?await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:o,xform:Oo}):await this._useSession(async a=>{var c,f,_;const{data:y,error:b}=a;if(b)throw b;return!(!((c=y.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ro}:await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(_=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&_!==void 0?_:void 0,xform:Oo})})}catch(a){if(gt(a))return Kg(a)&&(await this._removeSession(),await Do(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(o,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(o,a))}async _updateUser(o,a={}){try{return await this._useSession(async c=>{const{data:f,error:_}=c;if(_)throw _;if(!f.session)throw new Ro;const y=f.session;let b=null,E=null;this.flowType==="pkce"&&o.email!=null&&([b,E]=await vl(this.storage,this.storageKey));const{data:M,error:I}=await kt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:b,code_challenge_method:E}),jwt:y.access_token,xform:Oo});if(I)throw I;return y.user=M.user,await this._saveSession(y),await this._notifyAllSubscribers("USER_UPDATED",y),{data:{user:y.user},error:null}})}catch(c){if(gt(c))return{data:{user:null},error:c};throw c}}async setSession(o){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(o))}async _setSession(o){try{if(!o.access_token||!o.refresh_token)throw new Ro;const a=Date.now()/1e3;let c=a,f=!0,_=null;const{payload:y}=lc(o.access_token);if(y.exp&&(c=y.exp,f=c<=a),f){const{session:b,error:E}=await this._callRefreshToken(o.refresh_token);if(E)return{data:{user:null,session:null},error:E};if(!b)return{data:{user:null,session:null},error:null};_=b}else{const{data:b,error:E}=await this._getUser(o.access_token);if(E)throw E;_={access_token:o.access_token,refresh_token:o.refresh_token,user:b.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(_),await this._notifyAllSubscribers("SIGNED_IN",_)}return{data:{user:_.user,session:_},error:null}}catch(a){if(gt(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(o){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(o))}async _refreshSession(o){try{return await this._useSession(async a=>{var c;if(!o){const{data:y,error:b}=a;if(b)throw b;o=(c=y.session)!==null&&c!==void 0?c:void 0}if(!o?.refresh_token)throw new Ro;const{session:f,error:_}=await this._callRefreshToken(o.refresh_token);return _?{data:{user:null,session:null},error:_}:f?{data:{user:f.user,session:f},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(gt(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(o,a){try{if(!Pr())throw new Xu("No browser detected.");if(o.error||o.error_description||o.error_code)throw new Xu(o.error_description||"Error in URL with unspecified error_description",{error:o.error||"unspecified_error",code:o.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Af("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xu("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!o.code)throw new Af("No code detected.");const{data:Te,error:xe}=await this._exchangeCodeForSession(o.code);if(xe)throw xe;const Re=new URL(window.location.href);return Re.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Re.toString()),{data:{session:Te.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:f,access_token:_,refresh_token:y,expires_in:b,expires_at:E,token_type:M}=o;if(!_||!b||!y||!M)throw new Xu("No session defined in URL");const I=Math.round(Date.now()/1e3),N=parseInt(b);let W=I+N;E&&(W=parseInt(E));const Y=W-I;Y*1e3<=kl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${Y}s, should have been closer to ${N}s`);const le=W-N;I-le>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",le,W,I):I-le<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",le,W,I);const{data:ae,error:ie}=await this._getUser(_);if(ie)throw ie;const we={provider_token:c,provider_refresh_token:f,access_token:_,expires_in:N,expires_at:W,refresh_token:y,token_type:M,user:ae.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:we,redirectType:o.type},error:null}}catch(c){if(gt(c))return{data:{session:null,redirectType:null},error:c};throw c}}_isImplicitGrantCallback(o){return!!(o.access_token||o.error_description)}async _isPKCECallback(o){const a=await Sa(this.storage,`${this.storageKey}-code-verifier`);return!!(o.code&&a)}async signOut(o={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(o))}async _signOut({scope:o}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:f,error:_}=a;if(_)return{error:_};const y=(c=f.session)===null||c===void 0?void 0:c.access_token;if(y){const{error:b}=await this.admin.signOut(y,o);if(b&&!(qg(b)&&(b.status===404||b.status===401||b.status===403)))return{error:b}}return o!=="others"&&(await this._removeSession(),await Do(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(o){const a=s0(),c={id:a,callback:o,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(o){return await this._useSession(async a=>{var c,f;try{const{data:{session:_},error:y}=a;if(y)throw y;await((c=this.stateChangeEmitters.get(o))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",_)),this._debug("INITIAL_SESSION","callback id",o,"session",_)}catch(_){await((f=this.stateChangeEmitters.get(o))===null||f===void 0?void 0:f.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",o,"error",_),console.error(_)}})}async resetPasswordForEmail(o,a={}){let c=null,f=null;this.flowType==="pkce"&&([c,f]=await vl(this.storage,this.storageKey,!0));try{return await kt(this.fetch,"POST",`${this.url}/recover`,{body:{email:o,code_challenge:c,code_challenge_method:f,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(_){if(gt(_))return{data:null,error:_};throw _}}async getUserIdentities(){var o;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return{data:{identities:(o=a.user.identities)!==null&&o!==void 0?o:[]},error:null}}catch(a){if(gt(a))return{data:null,error:a};throw a}}async linkIdentity(o){var a;try{const{data:c,error:f}=await this._useSession(async _=>{var y,b,E,M,I;const{data:N,error:W}=_;if(W)throw W;const Y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,o.provider,{redirectTo:(y=o.options)===null||y===void 0?void 0:y.redirectTo,scopes:(b=o.options)===null||b===void 0?void 0:b.scopes,queryParams:(E=o.options)===null||E===void 0?void 0:E.queryParams,skipBrowserRedirect:!0});return await kt(this.fetch,"GET",Y,{headers:this.headers,jwt:(I=(M=N.session)===null||M===void 0?void 0:M.access_token)!==null&&I!==void 0?I:void 0})});if(f)throw f;return Pr()&&!(!((a=o.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c?.url),{data:{provider:o.provider,url:c?.url},error:null}}catch(c){if(gt(c))return{data:{provider:o.provider,url:null},error:c};throw c}}async unlinkIdentity(o){try{return await this._useSession(async a=>{var c,f;const{data:_,error:y}=a;if(y)throw y;return await kt(this.fetch,"DELETE",`${this.url}/user/identities/${o.identity_id}`,{headers:this.headers,jwt:(f=(c=_.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0})})}catch(a){if(gt(a))return{data:null,error:a};throw a}}async _refreshAccessToken(o){const a=`#_refreshAccessToken(${o.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await u0(async f=>(f>0&&await l0(200*Math.pow(2,f-1)),this._debug(a,"refreshing attempt",f),await kt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:o},headers:this.headers,xform:zs})),(f,_)=>{const y=200*Math.pow(2,f);return _&&ac(_)&&Date.now()+y-c<kl})}catch(c){if(this._debug(a,"error",c),gt(c))return{data:{session:null,user:null},error:c};throw c}finally{this._debug(a,"end")}}_isValidSession(o){return typeof o=="object"&&o!==null&&"access_token"in o&&"refresh_token"in o&&"expires_at"in o}async _handleProviderSignIn(o,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,o,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",o,"options",a,"url",c),Pr()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:o,url:c},error:null}}async _recoverAndRefresh(){var o,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const f=await Sa(this.storage,this.storageKey);if(f&&this.userStorage){let y=await Sa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!y&&(y={user:f.user},await Cl(this.userStorage,this.storageKey+"-user",y)),f.user=(o=y?.user)!==null&&o!==void 0?o:uc()}else if(f&&!f.user&&!f.user){const y=await Sa(this.storage,this.storageKey+"-user");y&&y?.user?(f.user=y.user,await Do(this.storage,this.storageKey+"-user"),await Cl(this.storage,this.storageKey,f)):f.user=uc()}if(this._debug(c,"session from storage",f),!this._isValidSession(f)){this._debug(c,"session is not valid"),f!==null&&await this._removeSession();return}const _=((a=f.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<oc;if(this._debug(c,`session has${_?"":" not"} expired with margin of ${oc}s`),_){if(this.autoRefreshToken&&f.refresh_token){const{error:y}=await this._callRefreshToken(f.refresh_token);y&&(console.error(y),ac(y)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",y),await this._removeSession()))}}else if(f.user&&f.user.__isUserNotAvailableProxy===!0)try{const{data:y,error:b}=await this._getUser(f.access_token);!b&&y?.user?(f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(y){console.error("Error getting user data:",y),this._debug(c,"error getting user data, skipping SIGNED_IN notification",y)}else await this._notifyAllSubscribers("SIGNED_IN",f)}catch(f){this._debug(c,"error",f),console.error(f);return}finally{this._debug(c,"end")}}async _callRefreshToken(o){var a,c;if(!o)throw new Ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const f=`#_callRefreshToken(${o.substring(0,5)}...)`;this._debug(f,"begin");try{this.refreshingDeferred=new uh;const{data:_,error:y}=await this._refreshAccessToken(o);if(y)throw y;if(!_.session)throw new Ro;await this._saveSession(_.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",_.session);const b={session:_.session,error:null};return this.refreshingDeferred.resolve(b),b}catch(_){if(this._debug(f,"error",_),gt(_)){const y={session:null,error:_};return ac(_)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(y),y}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(_),_}finally{this.refreshingDeferred=null,this._debug(f,"end")}}async _notifyAllSubscribers(o,a,c=!0){const f=`#_notifyAllSubscribers(${o})`;this._debug(f,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:o,session:a});const _=[],y=Array.from(this.stateChangeEmitters.values()).map(async b=>{try{await b.callback(o,a)}catch(E){_.push(E)}});if(await Promise.all(y),_.length>0){for(let b=0;b<_.length;b+=1)console.error(_[b]);throw _[0]}}finally{this._debug(f,"end")}}async _saveSession(o){this._debug("#_saveSession()",o),this.suppressGetSessionWarning=!0;const a=Object.assign({},o),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await Cl(this.userStorage,this.storageKey+"-user",{user:a.user});const f=Object.assign({},a);delete f.user;const _=jf(f);await Cl(this.storage,this.storageKey,_)}else{const f=jf(a);await Cl(this.storage,this.storageKey,f)}}async _removeSession(){this._debug("#_removeSession()"),await Do(this.storage,this.storageKey),await Do(this.storage,this.storageKey+"-code-verifier"),await Do(this.storage,this.storageKey+"-user"),this.userStorage&&await Do(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const o=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{o&&Pr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",o)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const o=setInterval(()=>this._autoRefreshTokenTick(),kl);this.autoRefreshTicker=o,o&&typeof o=="object"&&typeof o.unref=="function"?o.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(o),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const o=this.autoRefreshTicker;this.autoRefreshTicker=null,o&&clearInterval(o)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const o=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const f=Math.floor((c.expires_at*1e3-o)/kl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${f} ticks, a tick lasts ${kl}ms, refresh threshold is ${xc} ticks`),f<=xc&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(o){if(o.isAcquireTimeout||o instanceof yp)this._debug("auto refresh token tick lock not available");else throw o}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(o){console.error("_handleVisibilityChange",o)}}async _onVisibilityChanged(o){const a=`#_onVisibilityChanged(${o})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),o||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(o,a,c){const f=[`provider=${encodeURIComponent(a)}`];if(c?.redirectTo&&f.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&f.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[_,y]=await vl(this.storage,this.storageKey),b=new URLSearchParams({code_challenge:`${encodeURIComponent(_)}`,code_challenge_method:`${encodeURIComponent(y)}`});f.push(b.toString())}if(c?.queryParams){const _=new URLSearchParams(c.queryParams);f.push(_.toString())}return c?.skipBrowserRedirect&&f.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${o}?${f.join("&")}`}async _unenroll(o){try{return await this._useSession(async a=>{var c;const{data:f,error:_}=a;return _?{data:null,error:_}:await kt(this.fetch,"DELETE",`${this.url}/factors/${o.factorId}`,{headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(gt(a))return{data:null,error:a};throw a}}async _enroll(o){try{return await this._useSession(async a=>{var c,f;const{data:_,error:y}=a;if(y)return{data:null,error:y};const b=Object.assign({friendly_name:o.friendlyName,factor_type:o.factorType},o.factorType==="phone"?{phone:o.phone}:{issuer:o.issuer}),{data:E,error:M}=await kt(this.fetch,"POST",`${this.url}/factors`,{body:b,headers:this.headers,jwt:(c=_?.session)===null||c===void 0?void 0:c.access_token});return M?{data:null,error:M}:(o.factorType==="totp"&&(!((f=E?.totp)===null||f===void 0)&&f.qr_code)&&(E.totp.qr_code=`data:image/svg+xml;utf-8,${E.totp.qr_code}`),{data:E,error:null})})}catch(a){if(gt(a))return{data:null,error:a};throw a}}async _verify(o){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:f,error:_}=a;if(_)return{data:null,error:_};const{data:y,error:b}=await kt(this.fetch,"POST",`${this.url}/factors/${o.factorId}/verify`,{body:{code:o.code,challenge_id:o.challengeId},headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token});return b?{data:null,error:b}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+y.expires_in},y)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",y),{data:y,error:b})})}catch(a){if(gt(a))return{data:null,error:a};throw a}})}async _challenge(o){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:f,error:_}=a;return _?{data:null,error:_}:await kt(this.fetch,"POST",`${this.url}/factors/${o.factorId}/challenge`,{body:{channel:o.channel},headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(gt(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(o){const{data:a,error:c}=await this._challenge({factorId:o.factorId});return c?{data:null,error:c}:await this._verify({factorId:o.factorId,challengeId:a.id,code:o.code})}async _listFactors(){const{data:{user:o},error:a}=await this.getUser();if(a)return{data:null,error:a};const c=o?.factors||[],f=c.filter(y=>y.factor_type==="totp"&&y.status==="verified"),_=c.filter(y=>y.factor_type==="phone"&&y.status==="verified");return{data:{all:c,totp:f,phone:_},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async o=>{var a,c;const{data:{session:f},error:_}=o;if(_)return{data:null,error:_};if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=lc(f.access_token);let b=null;y.aal&&(b=y.aal);let E=b;((c=(a=f.user.factors)===null||a===void 0?void 0:a.filter(N=>N.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(E="aal2");const I=y.amr||[];return{data:{currentLevel:b,nextLevel:E,currentAuthenticationMethods:I},error:null}}))}async fetchJwk(o,a={keys:[]}){let c=a.keys.find(b=>b.kid===o);if(c)return c;const f=Date.now();if(c=this.jwks.keys.find(b=>b.kid===o),c&&this.jwks_cached_at+Zg>f)return c;const{data:_,error:y}=await kt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(y)throw y;return!_.keys||_.keys.length===0||(this.jwks=_,this.jwks_cached_at=f,c=_.keys.find(b=>b.kid===o),!c)?null:c}async getClaims(o,a={}){try{let c=o;if(!c){const{data:Y,error:le}=await this.getSession();if(le||!Y.session)return{data:null,error:le};c=Y.session.access_token}const{header:f,payload:_,signature:y,raw:{header:b,payload:E}}=lc(c);a?.allowExpired||g0(_.exp);const M=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!M){const{error:Y}=await this.getUser(c);if(Y)throw Y;return{data:{claims:_,header:f,signature:y},error:null}}const I=_0(f.alg),N=await crypto.subtle.importKey("jwk",M,I,!0,["verify"]);if(!await crypto.subtle.verify(I,N,y,n0(`${b}.${E}`)))throw new Cc("Invalid JWT signature");return{data:{claims:_,header:f,signature:y},error:null}}catch(c){if(gt(c))return{data:null,error:c};throw c}}}du.nextInstanceID=0;const D0=du;class R0 extends D0{constructor(o){super(o)}}var O0=function(m,o,a,c){function f(_){return _ instanceof a?_:new a(function(y){y(_)})}return new(a||(a=Promise))(function(_,y){function b(I){try{M(c.next(I))}catch(N){y(N)}}function E(I){try{M(c.throw(I))}catch(N){y(N)}}function M(I){I.done?_(I.value):f(I.value).then(b,E)}M((c=c.apply(m,o||[])).next())})};class I0{constructor(o,a,c){var f,_,y;if(this.supabaseUrl=o,this.supabaseKey=a,!o)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const b=zg(o),E=new URL(b);this.realtimeUrl=new URL("realtime/v1",E),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",E),this.storageUrl=new URL("storage/v1",E),this.functionsUrl=new URL("functions/v1",E);const M=`sb-${E.hostname.split(".")[0]}-auth-token`,I={db:Ag,realtime:Rg,auth:Object.assign(Object.assign({},Dg),{storageKey:M}),global:Tg},N=Ug(c??{},I);this.storageKey=(f=N.auth.storageKey)!==null&&f!==void 0?f:"",this.headers=(_=N.global.headers)!==null&&_!==void 0?_:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(W,Y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(Y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((y=N.auth)!==null&&y!==void 0?y:{},this.headers,N.global.fetch),this.fetch=Ng(a,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.rest=new Xm(new URL("rest/v1",E).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new Sg(this.storageUrl.href,this.headers,this.fetch,c?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new zm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(o){return this.rest.from(o)}schema(o){return this.rest.schema(o)}rpc(o,a={},c={}){return this.rest.rpc(o,a,c)}channel(o,a={config:{}}){return this.realtime.channel(o,a)}getChannels(){return this.realtime.getChannels()}removeChannel(o){return this.realtime.removeChannel(o)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var o,a;return O0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:c}=yield this.auth.getSession();return(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:o,persistSession:a,detectSessionInUrl:c,storage:f,storageKey:_,flowType:y,lock:b,debug:E},M,I){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new R0({url:this.authUrl.href,headers:Object.assign(Object.assign({},N),M),storageKey:_,autoRefreshToken:o,persistSession:a,detectSessionInUrl:c,storage:f,flowType:y,lock:b,debug:E,fetch:I,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(o){return new mg(this.realtimeUrl.href,Object.assign(Object.assign({},o),{params:Object.assign({apikey:this.supabaseKey},o?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c?.access_token)})}_handleTokenChanged(o,a,c){(o==="TOKEN_REFRESHED"||o==="SIGNED_IN")&&this.changedAccessToken!==c?this.changedAccessToken=c:o==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j0=(m,o,a)=>new I0(m,o,a);function N0(){if(typeof window<"u"||typeof process>"u")return!1;const m=process.version;if(m==null)return!1;const o=m.match(/^v(\d+)\./);return o?parseInt(o[1],10)<=18:!1}N0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const F0="https://tyftyoexdxrjvxjbdyux.supabase.co",z0="sb_publishable_CUCrsx84syqTmA-uMJyF3g_EnrX-aW6",zn=j0(F0,z0),U0="/pudumaps/assets/pudulogo-pI67wG3d.png";/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $f="popstate";function $0(m={}){function o(f,_){let{pathname:y="/",search:b="",hash:E=""}=Aa(f.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),bc("",{pathname:y,search:b,hash:E},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function a(f,_){let y=f.document.querySelector("base"),b="";if(y&&y.getAttribute("href")){let E=f.location.href,M=E.indexOf("#");b=M===-1?E:E.slice(0,M)}return b+"#"+(typeof _=="string"?_:fu(_))}function c(f,_){Mr(f.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(_)})`)}return V0(o,a,c,m)}function Jt(m,o){if(m===!1||m===null||typeof m>"u")throw new Error(o)}function Mr(m,o){if(!m){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function G0(){return Math.random().toString(36).substring(2,10)}function Gf(m,o){return{usr:m.state,key:m.key,idx:o}}function bc(m,o,a=null,c){return{pathname:typeof m=="string"?m:m.pathname,search:"",hash:"",...typeof o=="string"?Aa(o):o,state:a,key:o&&o.key||c||G0()}}function fu({pathname:m="/",search:o="",hash:a=""}){return o&&o!=="?"&&(m+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(m+=a.charAt(0)==="#"?a:"#"+a),m}function Aa(m){let o={};if(m){let a=m.indexOf("#");a>=0&&(o.hash=m.substring(a),m=m.substring(0,a));let c=m.indexOf("?");c>=0&&(o.search=m.substring(c),m=m.substring(0,c)),m&&(o.pathname=m)}return o}function V0(m,o,a,c={}){let{window:f=document.defaultView,v5Compat:_=!1}=c,y=f.history,b="POP",E=null,M=I();M==null&&(M=0,y.replaceState({...y.state,idx:M},""));function I(){return(y.state||{idx:null}).idx}function N(){b="POP";let ie=I(),we=ie==null?null:ie-M;M=ie,E&&E({action:b,location:ae.location,delta:we})}function W(ie,we){b="PUSH";let Te=bc(ae.location,ie,we);a&&a(Te,ie),M=I()+1;let xe=Gf(Te,M),Re=ae.createHref(Te);try{y.pushState(xe,"",Re)}catch(Ye){if(Ye instanceof DOMException&&Ye.name==="DataCloneError")throw Ye;f.location.assign(Re)}_&&E&&E({action:b,location:ae.location,delta:1})}function Y(ie,we){b="REPLACE";let Te=bc(ae.location,ie,we);a&&a(Te,ie),M=I();let xe=Gf(Te,M),Re=ae.createHref(Te);y.replaceState(xe,"",Re),_&&E&&E({action:b,location:ae.location,delta:0})}function le(ie){return H0(ie)}let ae={get action(){return b},get location(){return m(f,y)},listen(ie){if(E)throw new Error("A history only accepts one active listener");return f.addEventListener($f,N),E=ie,()=>{f.removeEventListener($f,N),E=null}},createHref(ie){return o(f,ie)},createURL:le,encodeLocation(ie){let we=le(ie);return{pathname:we.pathname,search:we.search,hash:we.hash}},push:W,replace:Y,go(ie){return y.go(ie)}};return ae}function H0(m,o=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(a,"No window.location.(origin|href) available to create URL");let c=typeof m=="string"?m:fu(m);return c=c.replace(/ $/,"%20"),!o&&c.startsWith("//")&&(c=a+c),new URL(c,a)}function vp(m,o,a="/"){return Z0(m,o,a,!1)}function Z0(m,o,a,c){let f=typeof o=="string"?Aa(o):o,_=Gs(f.pathname||"/",a);if(_==null)return null;let y=wp(m);W0(y);let b=null;for(let E=0;b==null&&E<y.length;++E){let M=r_(_);b=n_(y[E],M,c)}return b}function wp(m,o=[],a=[],c=""){let f=(_,y,b)=>{let E={relativePath:b===void 0?_.path||"":b,caseSensitive:_.caseSensitive===!0,childrenIndex:y,route:_};E.relativePath.startsWith("/")&&(Jt(E.relativePath.startsWith(c),`Absolute route path "${E.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(c.length));let M=$s([c,E.relativePath]),I=a.concat(E);_.children&&_.children.length>0&&(Jt(_.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),wp(_.children,o,I,M)),!(_.path==null&&!_.index)&&o.push({path:M,score:e_(M,_.index),routesMeta:I})};return m.forEach((_,y)=>{if(_.path===""||!_.path?.includes("?"))f(_,y);else for(let b of xp(_.path))f(_,y,b)}),o}function xp(m){let o=m.split("/");if(o.length===0)return[];let[a,...c]=o,f=a.endsWith("?"),_=a.replace(/\?$/,"");if(c.length===0)return f?[_,""]:[_];let y=xp(c.join("/")),b=[];return b.push(...y.map(E=>E===""?_:[_,E].join("/"))),f&&b.push(...y),b.map(E=>m.startsWith("/")&&E===""?"/":E)}function W0(m){m.sort((o,a)=>o.score!==a.score?a.score-o.score:t_(o.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var q0=/^:[\w-]+$/,K0=3,J0=2,Y0=1,X0=10,Q0=-2,Vf=m=>m==="*";function e_(m,o){let a=m.split("/"),c=a.length;return a.some(Vf)&&(c+=Q0),o&&(c+=J0),a.filter(f=>!Vf(f)).reduce((f,_)=>f+(q0.test(_)?K0:_===""?Y0:X0),c)}function t_(m,o){return m.length===o.length&&m.slice(0,-1).every((c,f)=>c===o[f])?m[m.length-1]-o[o.length-1]:0}function n_(m,o,a=!1){let{routesMeta:c}=m,f={},_="/",y=[];for(let b=0;b<c.length;++b){let E=c[b],M=b===c.length-1,I=_==="/"?o:o.slice(_.length)||"/",N=ah({path:E.relativePath,caseSensitive:E.caseSensitive,end:M},I),W=E.route;if(!N&&M&&a&&!c[c.length-1].route.index&&(N=ah({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},I)),!N)return null;Object.assign(f,N.params),y.push({params:f,pathname:$s([_,N.pathname]),pathnameBase:l_($s([_,N.pathnameBase])),route:W}),N.pathnameBase!=="/"&&(_=$s([_,N.pathnameBase]))}return y}function ah(m,o){typeof m=="string"&&(m={path:m,caseSensitive:!1,end:!0});let[a,c]=i_(m.path,m.caseSensitive,m.end),f=o.match(a);if(!f)return null;let _=f[0],y=_.replace(/(.)\/+$/,"$1"),b=f.slice(1);return{params:c.reduce((M,{paramName:I,isOptional:N},W)=>{if(I==="*"){let le=b[W]||"";y=_.slice(0,_.length-le.length).replace(/(.)\/+$/,"$1")}const Y=b[W];return N&&!Y?M[I]=void 0:M[I]=(Y||"").replace(/%2F/g,"/"),M},{}),pathname:_,pathnameBase:y,pattern:m}}function i_(m,o=!1,a=!0){Mr(m==="*"||!m.endsWith("*")||m.endsWith("/*"),`Route path "${m}" will be treated as if it were "${m.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${m.replace(/\*$/,"/*")}".`);let c=[],f="^"+m.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,E)=>(c.push({paramName:b,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)"));return m.endsWith("*")?(c.push({paramName:"*"}),f+=m==="*"||m==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?f+="\\/*$":m!==""&&m!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,o?void 0:"i"),c]}function r_(m){try{return m.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Mr(!1,`The URL path "${m}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),m}}function Gs(m,o){if(o==="/")return m;if(!m.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,c=m.charAt(a);return c&&c!=="/"?null:m.slice(a)||"/"}function s_(m,o="/"){let{pathname:a,search:c="",hash:f=""}=typeof m=="string"?Aa(m):m;return{pathname:a?a.startsWith("/")?a:o_(a,o):o,search:u_(c),hash:h_(f)}}function o_(m,o){let a=o.replace(/\/+$/,"").split("/");return m.split("/").forEach(f=>{f===".."?a.length>1&&a.pop():f!=="."&&a.push(f)}),a.length>1?a.join("/"):"/"}function cc(m,o,a,c){return`Cannot include a '${m}' character in a manually specified \`to.${o}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a_(m){return m.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function Lp(m){let o=a_(m);return o.map((a,c)=>c===o.length-1?a.pathname:a.pathnameBase)}function kp(m,o,a,c=!1){let f;typeof m=="string"?f=Aa(m):(f={...m},Jt(!f.pathname||!f.pathname.includes("?"),cc("?","pathname","search",f)),Jt(!f.pathname||!f.pathname.includes("#"),cc("#","pathname","hash",f)),Jt(!f.search||!f.search.includes("#"),cc("#","search","hash",f)));let _=m===""||f.pathname==="",y=_?"/":f.pathname,b;if(y==null)b=a;else{let N=o.length-1;if(!c&&y.startsWith("..")){let W=y.split("/");for(;W[0]==="..";)W.shift(),N-=1;f.pathname=W.join("/")}b=N>=0?o[N]:"/"}let E=s_(f,b),M=y&&y!=="/"&&y.endsWith("/"),I=(_||y===".")&&a.endsWith("/");return!E.pathname.endsWith("/")&&(M||I)&&(E.pathname+="/"),E}var $s=m=>m.join("/").replace(/\/\/+/g,"/"),l_=m=>m.replace(/\/+$/,"").replace(/^\/*/,"/"),u_=m=>!m||m==="?"?"":m.startsWith("?")?m:"?"+m,h_=m=>!m||m==="#"?"":m.startsWith("#")?m:"#"+m;function c_(m){return m!=null&&typeof m.status=="number"&&typeof m.statusText=="string"&&typeof m.internal=="boolean"&&"data"in m}var Cp=["POST","PUT","PATCH","DELETE"];new Set(Cp);var d_=["GET",...Cp];new Set(d_);var Pl=ne.createContext(null);Pl.displayName="DataRouter";var hh=ne.createContext(null);hh.displayName="DataRouterState";ne.createContext(!1);var bp=ne.createContext({isTransitioning:!1});bp.displayName="ViewTransition";var f_=ne.createContext(new Map);f_.displayName="Fetchers";var p_=ne.createContext(null);p_.displayName="Await";var as=ne.createContext(null);as.displayName="Navigation";var gu=ne.createContext(null);gu.displayName="Location";var ls=ne.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var Oc=ne.createContext(null);Oc.displayName="RouteError";function m_(m,{relative:o}={}){Jt(_u(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=ne.useContext(as),{hash:f,pathname:_,search:y}=yu(m,{relative:o}),b=_;return a!=="/"&&(b=_==="/"?a:$s([a,_])),c.createHref({pathname:b,search:y,hash:f})}function _u(){return ne.useContext(gu)!=null}function Da(){return Jt(_u(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(gu).location}var Ep="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Pp(m){ne.useContext(as).static||ne.useLayoutEffect(m)}function Sp(){let{isDataRoute:m}=ne.useContext(ls);return m?M_():g_()}function g_(){Jt(_u(),"useNavigate() may be used only in the context of a <Router> component.");let m=ne.useContext(Pl),{basename:o,navigator:a}=ne.useContext(as),{matches:c}=ne.useContext(ls),{pathname:f}=Da(),_=JSON.stringify(Lp(c)),y=ne.useRef(!1);return Pp(()=>{y.current=!0}),ne.useCallback((E,M={})=>{if(Mr(y.current,Ep),!y.current)return;if(typeof E=="number"){a.go(E);return}let I=kp(E,JSON.parse(_),f,M.relative==="path");m==null&&o!=="/"&&(I.pathname=I.pathname==="/"?o:$s([o,I.pathname])),(M.replace?a.replace:a.push)(I,M.state,M)},[o,a,_,f,m])}ne.createContext(null);function __(){let{matches:m}=ne.useContext(ls),o=m[m.length-1];return o?o.params:{}}function yu(m,{relative:o}={}){let{matches:a}=ne.useContext(ls),{pathname:c}=Da(),f=JSON.stringify(Lp(a));return ne.useMemo(()=>kp(m,JSON.parse(f),c,o==="path"),[m,f,c,o])}function y_(m,o){return Mp(m,o)}function Mp(m,o,a,c){Jt(_u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=ne.useContext(as),{matches:_}=ne.useContext(ls),y=_[_.length-1],b=y?y.params:{},E=y?y.pathname:"/",M=y?y.pathnameBase:"/",I=y&&y.route;{let we=I&&I.path||"";Bp(E,!I||we.endsWith("*")||we.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${we}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${we}"> to <Route path="${we==="/"?"*":`${we}/*`}">.`)}let N=Da(),W;if(o){let we=typeof o=="string"?Aa(o):o;Jt(M==="/"||we.pathname?.startsWith(M),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${M}" but pathname "${we.pathname}" was given in the \`location\` prop.`),W=we}else W=N;let Y=W.pathname||"/",le=Y;if(M!=="/"){let we=M.replace(/^\//,"").split("/");le="/"+Y.replace(/^\//,"").split("/").slice(we.length).join("/")}let ae=vp(m,{pathname:le});Mr(I||ae!=null,`No routes matched location "${W.pathname}${W.search}${W.hash}" `),Mr(ae==null||ae[ae.length-1].route.element!==void 0||ae[ae.length-1].route.Component!==void 0||ae[ae.length-1].route.lazy!==void 0,`Matched leaf route at location "${W.pathname}${W.search}${W.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=k_(ae&&ae.map(we=>Object.assign({},we,{params:Object.assign({},b,we.params),pathname:$s([M,f.encodeLocation?f.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?M:$s([M,f.encodeLocation?f.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),_,a,c);return o&&ie?ne.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...W},navigationType:"POP"}},ie):ie}function v_(){let m=S_(),o=c_(m)?`${m.status} ${m.statusText}`:m instanceof Error?m.message:JSON.stringify(m),a=m instanceof Error?m.stack:null,c="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:c},_={padding:"2px 4px",backgroundColor:c},y=null;return console.error("Error handled by React Router default ErrorBoundary:",m),y=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:_},"ErrorBoundary")," or"," ",ne.createElement("code",{style:_},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},o),a?ne.createElement("pre",{style:f},a):null,y)}var w_=ne.createElement(v_,null),x_=class extends ne.Component{constructor(m){super(m),this.state={location:m.location,revalidation:m.revalidation,error:m.error}}static getDerivedStateFromError(m){return{error:m}}static getDerivedStateFromProps(m,o){return o.location!==m.location||o.revalidation!=="idle"&&m.revalidation==="idle"?{error:m.error,location:m.location,revalidation:m.revalidation}:{error:m.error!==void 0?m.error:o.error,location:o.location,revalidation:m.revalidation||o.revalidation}}componentDidCatch(m,o){console.error("React Router caught the following error during render",m,o)}render(){return this.state.error!==void 0?ne.createElement(ls.Provider,{value:this.props.routeContext},ne.createElement(Oc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function L_({routeContext:m,match:o,children:a}){let c=ne.useContext(Pl);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),ne.createElement(ls.Provider,{value:m},a)}function k_(m,o=[],a=null,c=null){if(m==null){if(!a)return null;if(a.errors)m=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)m=a.matches;else return null}let f=m,_=a?.errors;if(_!=null){let E=f.findIndex(M=>M.route.id&&_?.[M.route.id]!==void 0);Jt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(_).join(",")}`),f=f.slice(0,Math.min(f.length,E+1))}let y=!1,b=-1;if(a)for(let E=0;E<f.length;E++){let M=f[E];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(b=E),M.route.id){let{loaderData:I,errors:N}=a,W=M.route.loader&&!I.hasOwnProperty(M.route.id)&&(!N||N[M.route.id]===void 0);if(M.route.lazy||W){y=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}return f.reduceRight((E,M,I)=>{let N,W=!1,Y=null,le=null;a&&(N=_&&M.route.id?_[M.route.id]:void 0,Y=M.route.errorElement||w_,y&&(b<0&&I===0?(Bp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,le=null):b===I&&(W=!0,le=M.route.hydrateFallbackElement||null)));let ae=o.concat(f.slice(0,I+1)),ie=()=>{let we;return N?we=Y:W?we=le:M.route.Component?we=ne.createElement(M.route.Component,null):M.route.element?we=M.route.element:we=E,ne.createElement(L_,{match:M,routeContext:{outlet:E,matches:ae,isDataRoute:a!=null},children:we})};return a&&(M.route.ErrorBoundary||M.route.errorElement||I===0)?ne.createElement(x_,{location:a.location,revalidation:a.revalidation,component:Y,error:N,children:ie(),routeContext:{outlet:null,matches:ae,isDataRoute:!0}}):ie()},null)}function Ic(m){return`${m} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C_(m){let o=ne.useContext(Pl);return Jt(o,Ic(m)),o}function b_(m){let o=ne.useContext(hh);return Jt(o,Ic(m)),o}function E_(m){let o=ne.useContext(ls);return Jt(o,Ic(m)),o}function jc(m){let o=E_(m),a=o.matches[o.matches.length-1];return Jt(a.route.id,`${m} can only be used on routes that contain a unique "id"`),a.route.id}function P_(){return jc("useRouteId")}function S_(){let m=ne.useContext(Oc),o=b_("useRouteError"),a=jc("useRouteError");return m!==void 0?m:o.errors?.[a]}function M_(){let{router:m}=C_("useNavigate"),o=jc("useNavigate"),a=ne.useRef(!1);return Pp(()=>{a.current=!0}),ne.useCallback(async(f,_={})=>{Mr(a.current,Ep),a.current&&(typeof f=="number"?m.navigate(f):await m.navigate(f,{fromRouteId:o,..._}))},[m,o])}var Hf={};function Bp(m,o,a){!o&&!Hf[m]&&(Hf[m]=!0,Mr(!1,a))}ne.memo(B_);function B_({routes:m,future:o,state:a}){return Mp(m,void 0,a,o)}function ru(m){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function T_({basename:m="/",children:o=null,location:a,navigationType:c="POP",navigator:f,static:_=!1}){Jt(!_u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=m.replace(/^\/*/,"/"),b=ne.useMemo(()=>({basename:y,navigator:f,static:_,future:{}}),[y,f,_]);typeof a=="string"&&(a=Aa(a));let{pathname:E="/",search:M="",hash:I="",state:N=null,key:W="default"}=a,Y=ne.useMemo(()=>{let le=Gs(E,y);return le==null?null:{location:{pathname:le,search:M,hash:I,state:N,key:W},navigationType:c}},[y,E,M,I,N,W,c]);return Mr(Y!=null,`<Router basename="${y}"> is not able to match the URL "${E}${M}${I}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:ne.createElement(as.Provider,{value:b},ne.createElement(gu.Provider,{children:o,value:Y}))}function A_({children:m,location:o}){return y_(Ec(m),o)}function Ec(m,o=[]){let a=[];return ne.Children.forEach(m,(c,f)=>{if(!ne.isValidElement(c))return;let _=[...o,f];if(c.type===ne.Fragment){a.push.apply(a,Ec(c.props.children,_));return}Jt(c.type===ru,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!c.props.index||!c.props.children,"An index route cannot have child routes.");let y={id:c.props.id||_.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(y.children=Ec(c.props.children,_)),a.push(y)}),a}var nh="get",ih="application/x-www-form-urlencoded";function ch(m){return m!=null&&typeof m.tagName=="string"}function D_(m){return ch(m)&&m.tagName.toLowerCase()==="button"}function R_(m){return ch(m)&&m.tagName.toLowerCase()==="form"}function O_(m){return ch(m)&&m.tagName.toLowerCase()==="input"}function I_(m){return!!(m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)}function j_(m,o){return m.button===0&&(!o||o==="_self")&&!I_(m)}var Qu=null;function N_(){if(Qu===null)try{new FormData(document.createElement("form"),0),Qu=!1}catch{Qu=!0}return Qu}var F_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dc(m){return m!=null&&!F_.has(m)?(Mr(!1,`"${m}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ih}"`),null):m}function z_(m,o){let a,c,f,_,y;if(R_(m)){let b=m.getAttribute("action");c=b?Gs(b,o):null,a=m.getAttribute("method")||nh,f=dc(m.getAttribute("enctype"))||ih,_=new FormData(m)}else if(D_(m)||O_(m)&&(m.type==="submit"||m.type==="image")){let b=m.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=m.getAttribute("formaction")||b.getAttribute("action");if(c=E?Gs(E,o):null,a=m.getAttribute("formmethod")||b.getAttribute("method")||nh,f=dc(m.getAttribute("formenctype"))||dc(b.getAttribute("enctype"))||ih,_=new FormData(b,m),!N_()){let{name:M,type:I,value:N}=m;if(I==="image"){let W=M?`${M}.`:"";_.append(`${W}x`,"0"),_.append(`${W}y`,"0")}else M&&_.append(M,N)}}else{if(ch(m))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=nh,c=null,f=ih,y=m}return _&&f==="text/plain"&&(y=_,_=void 0),{action:c,method:a.toLowerCase(),encType:f,formData:_,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nc(m,o){if(m===!1||m===null||typeof m>"u")throw new Error(o)}function U_(m,o,a){let c=typeof m=="string"?new URL(m,typeof window>"u"?"server://singlefetch/":window.location.origin):m;return c.pathname==="/"?c.pathname=`_root.${a}`:o&&Gs(c.pathname,o)==="/"?c.pathname=`${o.replace(/\/$/,"")}/_root.${a}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${a}`,c}async function $_(m,o){if(m.id in o)return o[m.id];try{let a=await import(m.module);return o[m.id]=a,a}catch(a){return console.error(`Error loading route module \`${m.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function G_(m){return m==null?!1:m.href==null?m.rel==="preload"&&typeof m.imageSrcSet=="string"&&typeof m.imageSizes=="string":typeof m.rel=="string"&&typeof m.href=="string"}async function V_(m,o,a){let c=await Promise.all(m.map(async f=>{let _=o.routes[f.route.id];if(_){let y=await $_(_,a);return y.links?y.links():[]}return[]}));return q_(c.flat(1).filter(G_).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function Zf(m,o,a,c,f,_){let y=(E,M)=>a[M]?E.route.id!==a[M].route.id:!0,b=(E,M)=>a[M].pathname!==E.pathname||a[M].route.path?.endsWith("*")&&a[M].params["*"]!==E.params["*"];return _==="assets"?o.filter((E,M)=>y(E,M)||b(E,M)):_==="data"?o.filter((E,M)=>{let I=c.routes[E.route.id];if(!I||!I.hasLoader)return!1;if(y(E,M)||b(E,M))return!0;if(E.route.shouldRevalidate){let N=E.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(m,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function H_(m,o,{includeHydrateFallback:a}={}){return Z_(m.map(c=>{let f=o.routes[c.route.id];if(!f)return[];let _=[f.module];return f.clientActionModule&&(_=_.concat(f.clientActionModule)),f.clientLoaderModule&&(_=_.concat(f.clientLoaderModule)),a&&f.hydrateFallbackModule&&(_=_.concat(f.hydrateFallbackModule)),f.imports&&(_=_.concat(f.imports)),_}).flat(1))}function Z_(m){return[...new Set(m)]}function W_(m){let o={},a=Object.keys(m).sort();for(let c of a)o[c]=m[c];return o}function q_(m,o){let a=new Set;return new Set(o),m.reduce((c,f)=>{let _=JSON.stringify(W_(f));return a.has(_)||(a.add(_),c.push({key:_,link:f})),c},[])}function Tp(){let m=ne.useContext(Pl);return Nc(m,"You must render this element inside a <DataRouterContext.Provider> element"),m}function K_(){let m=ne.useContext(hh);return Nc(m,"You must render this element inside a <DataRouterStateContext.Provider> element"),m}var Fc=ne.createContext(void 0);Fc.displayName="FrameworkContext";function Ap(){let m=ne.useContext(Fc);return Nc(m,"You must render this element inside a <HydratedRouter> element"),m}function J_(m,o){let a=ne.useContext(Fc),[c,f]=ne.useState(!1),[_,y]=ne.useState(!1),{onFocus:b,onBlur:E,onMouseEnter:M,onMouseLeave:I,onTouchStart:N}=o,W=ne.useRef(null);ne.useEffect(()=>{if(m==="render"&&y(!0),m==="viewport"){let ae=we=>{we.forEach(Te=>{y(Te.isIntersecting)})},ie=new IntersectionObserver(ae,{threshold:.5});return W.current&&ie.observe(W.current),()=>{ie.disconnect()}}},[m]),ne.useEffect(()=>{if(c){let ae=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(ae)}}},[c]);let Y=()=>{f(!0)},le=()=>{f(!1),y(!1)};return a?m!=="intent"?[_,W,{}]:[_,W,{onFocus:nu(b,Y),onBlur:nu(E,le),onMouseEnter:nu(M,Y),onMouseLeave:nu(I,le),onTouchStart:nu(N,Y)}]:[!1,W,{}]}function nu(m,o){return a=>{m&&m(a),a.defaultPrevented||o(a)}}function Y_({page:m,...o}){let{router:a}=Tp(),c=ne.useMemo(()=>vp(a.routes,m,a.basename),[a.routes,m,a.basename]);return c?ne.createElement(Q_,{page:m,matches:c,...o}):null}function X_(m){let{manifest:o,routeModules:a}=Ap(),[c,f]=ne.useState([]);return ne.useEffect(()=>{let _=!1;return V_(m,o,a).then(y=>{_||f(y)}),()=>{_=!0}},[m,o,a]),c}function Q_({page:m,matches:o,...a}){let c=Da(),{manifest:f,routeModules:_}=Ap(),{basename:y}=Tp(),{loaderData:b,matches:E}=K_(),M=ne.useMemo(()=>Zf(m,o,E,f,c,"data"),[m,o,E,f,c]),I=ne.useMemo(()=>Zf(m,o,E,f,c,"assets"),[m,o,E,f,c]),N=ne.useMemo(()=>{if(m===c.pathname+c.search+c.hash)return[];let le=new Set,ae=!1;if(o.forEach(we=>{let Te=f.routes[we.route.id];!Te||!Te.hasLoader||(!M.some(xe=>xe.route.id===we.route.id)&&we.route.id in b&&_[we.route.id]?.shouldRevalidate||Te.hasClientLoader?ae=!0:le.add(we.route.id))}),le.size===0)return[];let ie=U_(m,y,"data");return ae&&le.size>0&&ie.searchParams.set("_routes",o.filter(we=>le.has(we.route.id)).map(we=>we.route.id).join(",")),[ie.pathname+ie.search]},[y,b,c,f,M,o,m,_]),W=ne.useMemo(()=>H_(I,f),[I,f]),Y=X_(I);return ne.createElement(ne.Fragment,null,N.map(le=>ne.createElement("link",{key:le,rel:"prefetch",as:"fetch",href:le,...a})),W.map(le=>ne.createElement("link",{key:le,rel:"modulepreload",href:le,...a})),Y.map(({key:le,link:ae})=>ne.createElement("link",{key:le,nonce:a.nonce,...ae})))}function ey(...m){return o=>{m.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var Dp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dp&&(window.__reactRouterVersion="7.8.0")}catch{}function ty({basename:m,children:o,window:a}){let c=ne.useRef();c.current==null&&(c.current=$0({window:a,v5Compat:!0}));let f=c.current,[_,y]=ne.useState({action:f.action,location:f.location}),b=ne.useCallback(E=>{ne.startTransition(()=>y(E))},[y]);return ne.useLayoutEffect(()=>f.listen(b),[f,b]),ne.createElement(T_,{basename:m,children:o,location:_.location,navigationType:_.action,navigator:f})}var Rp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dh=ne.forwardRef(function({onClick:o,discover:a="render",prefetch:c="none",relative:f,reloadDocument:_,replace:y,state:b,target:E,to:M,preventScrollReset:I,viewTransition:N,...W},Y){let{basename:le}=ne.useContext(as),ae=typeof M=="string"&&Rp.test(M),ie,we=!1;if(typeof M=="string"&&ae&&(ie=M,Dp))try{let Qe=new URL(window.location.href),pt=M.startsWith("//")?new URL(Qe.protocol+M):new URL(M),at=Gs(pt.pathname,le);pt.origin===Qe.origin&&at!=null?M=at+pt.search+pt.hash:we=!0}catch{Mr(!1,`<Link to="${M}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Te=m_(M,{relative:f}),[xe,Re,Ye]=J_(c,W),We=sy(M,{replace:y,state:b,target:E,preventScrollReset:I,relative:f,viewTransition:N});function Xe(Qe){o&&o(Qe),Qe.defaultPrevented||We(Qe)}let Ue=ne.createElement("a",{...W,...Ye,href:ie||Te,onClick:we||_?o:Xe,ref:ey(Y,Re),target:E,"data-discover":!ae&&a==="render"?"true":void 0});return xe&&!ae?ne.createElement(ne.Fragment,null,Ue,ne.createElement(Y_,{page:Te})):Ue});dh.displayName="Link";var ny=ne.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:c="",end:f=!1,style:_,to:y,viewTransition:b,children:E,...M},I){let N=yu(y,{relative:M.relative}),W=Da(),Y=ne.useContext(hh),{navigator:le,basename:ae}=ne.useContext(as),ie=Y!=null&&hy(N)&&b===!0,we=le.encodeLocation?le.encodeLocation(N).pathname:N.pathname,Te=W.pathname,xe=Y&&Y.navigation&&Y.navigation.location?Y.navigation.location.pathname:null;a||(Te=Te.toLowerCase(),xe=xe?xe.toLowerCase():null,we=we.toLowerCase()),xe&&ae&&(xe=Gs(xe,ae)||xe);const Re=we!=="/"&&we.endsWith("/")?we.length-1:we.length;let Ye=Te===we||!f&&Te.startsWith(we)&&Te.charAt(Re)==="/",We=xe!=null&&(xe===we||!f&&xe.startsWith(we)&&xe.charAt(we.length)==="/"),Xe={isActive:Ye,isPending:We,isTransitioning:ie},Ue=Ye?o:void 0,Qe;typeof c=="function"?Qe=c(Xe):Qe=[c,Ye?"active":null,We?"pending":null,ie?"transitioning":null].filter(Boolean).join(" ");let pt=typeof _=="function"?_(Xe):_;return ne.createElement(dh,{...M,"aria-current":Ue,className:Qe,ref:I,style:pt,to:y,viewTransition:b},typeof E=="function"?E(Xe):E)});ny.displayName="NavLink";var iy=ne.forwardRef(({discover:m="render",fetcherKey:o,navigate:a,reloadDocument:c,replace:f,state:_,method:y=nh,action:b,onSubmit:E,relative:M,preventScrollReset:I,viewTransition:N,...W},Y)=>{let le=ly(),ae=uy(b,{relative:M}),ie=y.toLowerCase()==="get"?"get":"post",we=typeof b=="string"&&Rp.test(b),Te=xe=>{if(E&&E(xe),xe.defaultPrevented)return;xe.preventDefault();let Re=xe.nativeEvent.submitter,Ye=Re?.getAttribute("formmethod")||y;le(Re||xe.currentTarget,{fetcherKey:o,method:Ye,navigate:a,replace:f,state:_,relative:M,preventScrollReset:I,viewTransition:N})};return ne.createElement("form",{ref:Y,method:ie,action:ae,onSubmit:c?E:Te,...W,"data-discover":!we&&m==="render"?"true":void 0})});iy.displayName="Form";function ry(m){return`${m} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Op(m){let o=ne.useContext(Pl);return Jt(o,ry(m)),o}function sy(m,{target:o,replace:a,state:c,preventScrollReset:f,relative:_,viewTransition:y}={}){let b=Sp(),E=Da(),M=yu(m,{relative:_});return ne.useCallback(I=>{if(j_(I,o)){I.preventDefault();let N=a!==void 0?a:fu(E)===fu(M);b(m,{replace:N,state:c,preventScrollReset:f,relative:_,viewTransition:y})}},[E,b,M,a,c,o,m,f,_,y])}var oy=0,ay=()=>`__${String(++oy)}__`;function ly(){let{router:m}=Op("useSubmit"),{basename:o}=ne.useContext(as),a=P_();return ne.useCallback(async(c,f={})=>{let{action:_,method:y,encType:b,formData:E,body:M}=z_(c,o);if(f.navigate===!1){let I=f.fetcherKey||ay();await m.fetch(I,a,f.action||_,{preventScrollReset:f.preventScrollReset,formData:E,body:M,formMethod:f.method||y,formEncType:f.encType||b,flushSync:f.flushSync})}else await m.navigate(f.action||_,{preventScrollReset:f.preventScrollReset,formData:E,body:M,formMethod:f.method||y,formEncType:f.encType||b,replace:f.replace,state:f.state,fromRouteId:a,flushSync:f.flushSync,viewTransition:f.viewTransition})},[m,o,a])}function uy(m,{relative:o}={}){let{basename:a}=ne.useContext(as),c=ne.useContext(ls);Jt(c,"useFormAction must be used inside a RouteContext");let[f]=c.matches.slice(-1),_={...yu(m||".",{relative:o})},y=Da();if(m==null){_.search=y.search;let b=new URLSearchParams(_.search),E=b.getAll("index");if(E.some(I=>I==="")){b.delete("index"),E.filter(N=>N).forEach(N=>b.append("index",N));let I=b.toString();_.search=I?`?${I}`:""}}return(!m||m===".")&&f.route.index&&(_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(_.pathname=_.pathname==="/"?a:$s([a,_.pathname])),fu(_)}function hy(m,{relative:o}={}){let a=ne.useContext(bp);Jt(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Op("useViewTransitionState"),f=yu(m,{relative:o});if(!a.isTransitioning)return!1;let _=Gs(a.currentLocation.pathname,c)||a.currentLocation.pathname,y=Gs(a.nextLocation.pathname,c)||a.nextLocation.pathname;return ah(f.pathname,y)!=null||ah(f.pathname,_)!=null}ep();function eh(){const[m,o]=ne.useState(""),[a,c]=ne.useState(""),[f,_]=ne.useState(!1),[y,b]=ne.useState(!1),[E,M]=ne.useState(null),I=Sp(),N=async Y=>{Y.preventDefault(),_(!0),M(null);const{error:le}=await zn.auth.signInWithPassword({email:m,password:a});le?M(le.message):I("/dashboard",{replace:!0}),_(!1)},W=async()=>{b(!0),M(null);const{error:Y}=await zn.auth.signUp({email:m,password:a});Y?M(Y.message):I("/dashboard",{replace:!0}),b(!1)};return Z.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:Z.jsxs("div",{className:"card max-w-md w-full",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsx("img",{src:U0,alt:"Pudumaps logo",className:"w-16 h-16 mx-auto"}),Z.jsx("h1",{className:"text-2xl font-bold mt-2",children:"Pudumaps"}),Z.jsx("p",{className:"text-gray-400 text-sm",children:"Inicia sesión o crea tu cuenta"})]}),Z.jsxs("form",{className:"space-y-5",onSubmit:N,children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Correo electrónico"}),Z.jsx("input",{type:"email",className:"input",value:m,onChange:Y=>o(Y.target.value),placeholder:"ejemplo@correo.com",required:!0})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Contraseña"}),Z.jsx("input",{type:"password",className:"input",value:a,onChange:Y=>c(Y.target.value),placeholder:"********",required:!0})]}),E&&Z.jsx("p",{className:"text-red-400 text-sm",children:E}),Z.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:f,children:f?"Entrando...":"Entrar"}),Z.jsx("button",{type:"button",onClick:W,className:"btn btn-secondary w-full",disabled:y,children:y?"Creando...":"Crear cuenta"})]}),Z.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["¿Primera vez?"," ",Z.jsx("span",{className:"text-green-400",children:"Crea tu cuenta"})," y revisa tu correo para confirmar."]}),Z.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-4 text-sm text-gray-400",children:[Z.jsx("h3",{className:"text-gray-200 font-semibold mb-3",children:"🚀 Roadmap Pudumaps"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{children:[Z.jsx("h4",{className:"text-gray-300 font-medium",children:"✅ Ahora"}),Z.jsxs("ul",{className:"list-disc list-inside",children:[Z.jsx("li",{children:"Gestión de proyectos (crear, editar, eliminar, favoritos)"}),Z.jsx("li",{children:"Capas GeoJSON con estilos editables y persistentes"}),Z.jsx("li",{children:"Capas externas WMS con consulta GetFeatureInfo"}),Z.jsx("li",{children:"Exportación de mapas a KMZ y PDF"})]})]}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"text-gray-300 font-medium",children:"⏳ Próximo"}),Z.jsxs("ul",{className:"list-disc list-inside",children:[Z.jsx("li",{children:"Soporte para servicios ArcGIS REST"}),Z.jsx("li",{children:"Herramientas de medición y dibujo en el mapa"}),Z.jsx("li",{children:"Compartir proyectos de forma pública/privada"})]})]}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"text-gray-300 font-medium",children:"🌌 Futuro"}),Z.jsxs("ul",{className:"list-disc list-inside",children:[Z.jsx("li",{children:"Roles y permisos colaborativos por proyecto"}),Z.jsx("li",{children:"Filtros y estadísticas por atributos"}),Z.jsx("li",{children:"Optimización para grandes volúmenes de datos"})]})]})]})]})]})})}function cy({id:m,initialName:o,initialDescription:a,initialVisibility:c="private",onClose:f,onUpdated:_,onNotify:y}){const[b,E]=ne.useState(o),[M,I]=ne.useState(a||""),[N,W]=ne.useState(c),[Y,le]=ne.useState(!1);async function ae(){if(!b){y?.("❌ El proyecto debe tener un nombre","error");return}le(!0);const{error:ie}=await zn.from("projects").update({name:b,description:M,visibility:N}).eq("id",m);if(le(!1),ie){y?.("❌ No se pudo actualizar el proyecto","error");return}_(),f(),y?.("✅ Proyecto actualizado","success")}return Z.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:Z.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[Z.jsx("h2",{className:"text-lg font-semibold text-white",children:"✏️ Editar proyecto"}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300",children:"Nombre"}),Z.jsx("input",{type:"text",className:"input w-full",value:b,onChange:ie=>E(ie.target.value)})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300",children:"Descripción"}),Z.jsx("input",{type:"text",className:"input w-full",value:M,onChange:ie=>I(ie.target.value)})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300",children:"Visibilidad"}),Z.jsxs("select",{className:"input w-full",value:N,onChange:ie=>W(ie.target.value),children:[Z.jsx("option",{value:"private",children:"🔒 Privado"}),Z.jsx("option",{value:"public",children:"🌍 Público"})]})]})]}),Z.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[Z.jsx("button",{onClick:f,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),Z.jsx("button",{onClick:ae,disabled:Y,className:"px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white transition disabled:opacity-60",children:Y?"Guardando…":"Guardar"})]})]})})}function dy({id:m,name:o,description:a,isFavorite:c,visibility:f="private",onDelete:_,onUpdated:y,onToggleFavorite:b,onNotify:E}){const[M,I]=ne.useState(!1);function N(){const W=`${window.location.origin}/project/${m}`;navigator.clipboard.writeText(W).then(()=>{E?.("🔗 Enlace copiado al portapapeles","success")})}return Z.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-md p-5 flex justify-between items-center hover:bg-gray-750 transition",children:[Z.jsxs("div",{children:[Z.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:["📂 ",o,Z.jsx("button",{onClick:b,className:"ml-2 text-lg focus:outline-none hover:scale-110 transition",title:c?"Quitar de favoritos":"Marcar como favorito",children:c?"⭐":"☆"})]}),a?Z.jsx("p",{className:"text-sm text-gray-400",children:a}):Z.jsx("p",{className:"text-sm text-gray-600 italic",children:"Sin descripción"}),Z.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f==="public"?"🌍 Público":"🔒 Privado"})]}),Z.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 items-end sm:items-center",children:[Z.jsx(dh,{to:`/project/${m}`,className:"px-3 py-1.5 text-sm font-medium rounded-md bg-blue-600 hover:bg-blue-700 text-white transition",children:"Abrir"}),f==="public"&&Z.jsx("button",{onClick:N,className:"px-3 py-1.5 text-sm font-medium rounded-md border border-green-500 text-green-400 hover:bg-green-500 hover:text-white transition",children:"🔗 Copiar enlace"}),Z.jsx("button",{onClick:()=>I(!0),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-white transition",children:"✏️ Editar"}),Z.jsx("button",{onClick:()=>_(m),className:"px-3 py-1.5 text-sm font-medium rounded-md border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition",children:"🗑️ Eliminar"})]}),M&&Z.jsx(cy,{id:m,initialName:o,initialDescription:a,initialVisibility:f,onClose:()=>I(!1),onUpdated:y,onNotify:E})]})}function fy({onProjectCreated:m,onNotify:o}){const[a,c]=ne.useState(""),[f,_]=ne.useState(""),[y,b]=ne.useState("private"),[E,M]=ne.useState(!1);async function I(){if(!a){o?.("❌ El proyecto debe tener un nombre","error");return}M(!0);const{data:{user:N}}=await zn.auth.getUser(),{error:W}=await zn.from("projects").insert([{name:a,description:f,owner_id:N?.id,visibility:y}]);if(M(!1),W){o?.("❌ No se pudo crear el proyecto","error");return}c(""),_(""),b("private"),m(),o?.("✅ Proyecto creado","success")}return Z.jsxs("div",{className:"card space-y-4",children:[Z.jsx("h2",{className:"subtitle",children:"Tus proyectos"}),Z.jsx("input",{type:"text",placeholder:"Nombre del proyecto",value:a,onChange:N=>c(N.target.value),className:"input"}),Z.jsx("input",{type:"text",placeholder:"Descripción (ej: Capas base de Chile)",value:f,onChange:N=>_(N.target.value),className:"input"}),Z.jsxs("div",{children:[Z.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Visibilidad"}),Z.jsxs("select",{className:"input w-full",value:y,onChange:N=>b(N.target.value),children:[Z.jsx("option",{value:"private",children:"🔒 Privado"}),Z.jsx("option",{value:"public",children:"🌍 Público"})]})]}),Z.jsx("div",{className:"flex gap-3",children:Z.jsx("button",{onClick:I,disabled:E,className:"btn btn-primary disabled:opacity-60",children:E?"Creando…":"Crear y abrir"})})]})}function Ip({message:m,type:o="info",duration:a=3e3,onClose:c}){const[f,_]=ne.useState(!0);if(ne.useEffect(()=>{const M=setTimeout(()=>_(!1),a-300),I=setTimeout(()=>c&&c(),a);return()=>{clearTimeout(M),clearTimeout(I)}},[a,c]),!f)return null;const y="px-4 py-2 rounded-md shadow-md text-sm font-medium flex items-center gap-2 transition-opacity duration-300",b={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-blue-600 text-white"},E={success:"✔️",error:"❌",info:"ℹ️"};return Z.jsxs("div",{className:`${y} ${b[o]}`,children:[Z.jsx("span",{children:E[o]}),Z.jsx("span",{children:m})]})}function py({message:m,onConfirm:o,onCancel:a}){return Z.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:Z.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 space-y-4",children:[Z.jsx("h2",{className:"text-lg font-semibold text-white",children:"⚠️ Confirmar acción"}),Z.jsx("p",{className:"text-gray-300",children:m}),Z.jsxs("div",{className:"flex justify-end gap-3",children:[Z.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded-md bg-gray-600 hover:bg-gray-500 text-white transition",children:"Cancelar"}),Z.jsx("button",{onClick:o,className:"px-3 py-1.5 rounded-md bg-red-600 hover:bg-red-700 text-white transition",children:"Eliminar"})]})]})})}function my({email:m}){const[o,a]=ne.useState([]),[c,f]=ne.useState(null),[_,y]=ne.useState(null),[b,E]=ne.useState("");function M(ae,ie="info"){f({msg:ae,type:ie})}async function I(){const{data:ae,error:ie}=await zn.from("projects").select("id, name, description, owner_id, is_favorite, visibility").order("is_favorite",{ascending:!1}).order("created_at",{ascending:!1});if(ie){M("❌ No se pudieron cargar los proyectos","error");return}ae&&a(ae)}async function N(ae,ie=!1){const{error:we}=await zn.from("projects").update({is_favorite:!ie}).eq("id",ae);if(we){M("❌ No se pudo actualizar favorito","error");return}I(),M(ie?"⭐ Proyecto quitado de favoritos":"⭐ Proyecto marcado como favorito","success")}async function W(ae){const{error:ie}=await zn.from("projects").delete().eq("id",ae);if(ie){M("❌ Error al eliminar proyecto","error");return}a(we=>we.filter(Te=>Te.id!==ae)),M("🗑️ Proyecto eliminado","success")}async function Y(){await zn.auth.signOut(),M("👋 Sesión cerrada","info"),setTimeout(()=>window.location.reload(),1e3)}ne.useEffect(()=>{I()},[]);const le=o.filter(ae=>ae.name.toLowerCase().includes(b.toLowerCase())||(ae.description?.toLowerCase()||"").includes(b.toLowerCase()));return Z.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-6 relative",children:[c&&Z.jsx("div",{className:"fixed top-4 right-4 z-50",children:Z.jsx(Ip,{message:c.msg,type:c.type,duration:3e3,onClose:()=>f(null)})}),Z.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"title",children:"Sesión iniciada en Pudumaps"}),Z.jsx("p",{className:"text-muted",children:m})]}),Z.jsx("button",{onClick:Y,className:"btn btn-danger",children:"Cerrar sesión"})]}),Z.jsx(fy,{onProjectCreated:()=>{I(),M("✅ Proyecto creado","success")},onNotify:M}),Z.jsx("div",{children:Z.jsx("input",{type:"text",placeholder:"🔍 Buscar proyectos...",value:b,onChange:ae=>E(ae.target.value),className:"input w-full"})}),Z.jsxs("div",{className:"space-y-3",children:[le.map(ae=>Z.jsx(dy,{id:ae.id,name:ae.name,description:ae.description,isFavorite:ae.is_favorite??!1,visibility:ae.visibility??"private",onDelete:ie=>y(ie),onUpdated:()=>{I(),M("✅ Proyecto actualizado","success")},onToggleFavorite:()=>N(ae.id,ae.is_favorite??!1),onNotify:M},ae.id)),le.length===0&&Z.jsx("p",{className:"text-muted text-center",children:"No se encontraron proyectos."})]})]}),_&&Z.jsx(py,{message:"¿Seguro que deseas eliminar este proyecto?",onCancel:()=>y(null),onConfirm:()=>{W(_),y(null)}})]})}function Wf({children:m,fallback:o}){const[a,c]=ne.useState(null),[f,_]=ne.useState(!0);return ne.useEffect(()=>{zn.auth.getSession().then(({data:b})=>{c(b.session),_(!1)});const{data:{subscription:y}}=zn.auth.onAuthStateChange((b,E)=>{c(E)});return()=>y.unsubscribe()},[]),f?Z.jsx("div",{className:"flex min-h-screen items-center justify-center",children:Z.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-xl shadow p-6",children:"Cargando…"})}):a?Z.jsx(Z.Fragment,{children:m(a)}):Z.jsx(Z.Fragment,{children:o})}function gy({projectId:m,onLayerAdded:o,onError:a}){const c=ne.useRef(null),[f,_]=ne.useState(!1);async function y(b){if(!b||b.length===0)return;const E=b[0];_(!0);try{const M=await E.text(),I=JSON.parse(M),{data:N,error:W}=await zn.from("project_layers").insert({project_id:m,name:E.name.replace(/\.[^.]+$/,""),geojson:I}).select().single();if(W)throw W;const Y={layer_id:N.id,color:"#3388ff",weight:2,opacity:1,fillColor:"#3388ff",fillOpacity:.2,radius:6};o?.(N,Y)}catch(M){console.error(M),a?.(M.message||"No se pudo subir el archivo")}finally{_(!1)}}return Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("input",{ref:c,type:"file",accept:".geojson,.json",className:"hidden",onChange:b=>y(b.target.files)}),Z.jsx("button",{type:"button",onClick:()=>c.current?.click(),disabled:f,className:"w-full sm:w-auto px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow disabled:opacity-60 transition",children:f?"Subiendo…":"📤 Subir GeoJSON/KMZ/KML"})]})}function _y({layers:m,visible:o,onToggleVisible:a,onZoom:c,onDelete:f}){return m.length===0?Z.jsx("div",{className:"hint",children:"No hay capas todavía. Sube una para empezar."}):Z.jsx("div",{className:"layer-list",children:m.map(_=>Z.jsxs("div",{className:"layer-item",children:[Z.jsxs("label",{children:[Z.jsx("input",{type:"checkbox",checked:o[_.id],onChange:()=>a(_.id)}),_.name]}),Z.jsx("button",{onClick:()=>c(_),children:"🔍"}),Z.jsx("button",{onClick:()=>f(_),children:"🗑️"})]},_.id))})}function yy(m,o){const a=ne.useRef(o);ne.useEffect(function(){o!==a.current&&m.attributionControl!=null&&(a.current!=null&&m.attributionControl.removeAttribution(a.current),o!=null&&m.attributionControl.addAttribution(o)),a.current=o},[m,o])}const vy=1;function wy(m){return Object.freeze({__version:vy,map:m})}function jp(m,o){return Object.freeze({...m,...o})}const Np=ne.createContext(null),zc=Np.Provider;function Uc(){const m=ne.useContext(Np);if(m==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return m}function xy(m){function o(a,c){const{instance:f,context:_}=m(a).current;return ne.useImperativeHandle(c,()=>f),a.children==null?null:cu.createElement(zc,{value:_},a.children)}return ne.forwardRef(o)}function Fp(m){function o(a,c){const{instance:f}=m(a).current;return ne.useImperativeHandle(c,()=>f),null}return ne.forwardRef(o)}function zp(m){return function(a){const c=Uc(),f=m(a,c),{instance:_}=f.current,y=ne.useRef(a.position),{position:b}=a;return ne.useEffect(function(){return _.addTo(c.map),function(){_.remove()}},[c.map,_]),ne.useEffect(function(){b!=null&&b!==y.current&&(_.setPosition(b),y.current=b)},[_,b]),f}}function Ly(m,o){const a=ne.useRef();ne.useEffect(function(){return o!=null&&m.instance.on(o),a.current=o,function(){a.current!=null&&m.instance.off(a.current),a.current=null}},[m,o])}function Up(m,o){const a=m.pane??o.pane;return a?{...m,pane:a}:m}var su={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ky=su.exports,qf;function $p(){return qf||(qf=1,(function(m,o){(function(a,c){c(o)})(ky,(function(a){var c="1.9.4";function f(t){var s,d,v,S;for(d=1,v=arguments.length;d<v;d++){S=arguments[d];for(s in S)t[s]=S[s]}return t}var _=Object.create||(function(){function t(){}return function(s){return t.prototype=s,new t}})();function y(t,s){var d=Array.prototype.slice;if(t.bind)return t.bind.apply(t,d.call(arguments,1));var v=d.call(arguments,2);return function(){return t.apply(s,v.length?v.concat(d.call(arguments)):arguments)}}var b=0;function E(t){return"_leaflet_id"in t||(t._leaflet_id=++b),t._leaflet_id}function M(t,s,d){var v,S,R,q;return q=function(){v=!1,S&&(R.apply(d,S),S=!1)},R=function(){v?S=arguments:(t.apply(d,arguments),setTimeout(q,s),v=!0)},R}function I(t,s,d){var v=s[1],S=s[0],R=v-S;return t===v&&d?t:((t-S)%R+R)%R+S}function N(){return!1}function W(t,s){if(s===!1)return t;var d=Math.pow(10,s===void 0?6:s);return Math.round(t*d)/d}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function le(t){return Y(t).split(/\s+/)}function ae(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?_(t.options):{});for(var d in s)t.options[d]=s[d];return t.options}function ie(t,s,d){var v=[];for(var S in t)v.push(encodeURIComponent(d?S.toUpperCase():S)+"="+encodeURIComponent(t[S]));return(!s||s.indexOf("?")===-1?"?":"&")+v.join("&")}var we=/\{ *([\w_ -]+) *\}/g;function Te(t,s){return t.replace(we,function(d,v){var S=s[v];if(S===void 0)throw new Error("No value provided for variable "+d);return typeof S=="function"&&(S=S(s)),S})}var xe=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Re(t,s){for(var d=0;d<t.length;d++)if(t[d]===s)return d;return-1}var Ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function We(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Xe=0;function Ue(t){var s=+new Date,d=Math.max(0,16-(s-Xe));return Xe=s+d,window.setTimeout(t,d)}var Qe=window.requestAnimationFrame||We("RequestAnimationFrame")||Ue,pt=window.cancelAnimationFrame||We("CancelAnimationFrame")||We("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function at(t,s,d){if(d&&Qe===Ue)t.call(s);else return Qe.call(window,y(t,s))}function St(t){t&&pt.call(window,t)}var Rn={__proto__:null,extend:f,create:_,bind:y,get lastId(){return b},stamp:E,throttle:M,wrapNum:I,falseFn:N,formatNum:W,trim:Y,splitWords:le,setOptions:ae,getParamString:ie,template:Te,isArray:xe,indexOf:Re,emptyImageUrl:Ye,requestFn:Qe,cancelFn:pt,requestAnimFrame:at,cancelAnimFrame:St};function Wt(){}Wt.extend=function(t){var s=function(){ae(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=s.__super__=this.prototype,v=_(d);v.constructor=s,s.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(s[S]=this[S]);return t.statics&&f(s,t.statics),t.includes&&(hi(t.includes),f.apply(null,[v].concat(t.includes))),f(v,t),delete v.statics,delete v.includes,v.options&&(v.options=d.options?_(d.options):{},f(v.options,t.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,q=v._initHooks.length;R<q;R++)v._initHooks[R].call(this)}},s},Wt.include=function(t){var s=this.prototype.options;return f(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},Wt.mergeOptions=function(t){return f(this.prototype.options,t),this},Wt.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),d=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function hi(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=xe(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var At={on:function(t,s,d){if(typeof t=="object")for(var v in t)this._on(v,t[v],s);else{t=le(t);for(var S=0,R=t.length;S<R;S++)this._on(t[S],s,d)}return this},off:function(t,s,d){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var v in t)this._off(v,t[v],s);else{t=le(t);for(var S=arguments.length===1,R=0,q=t.length;R<q;R++)S?this._off(t[R]):this._off(t[R],s,d)}return this},_on:function(t,s,d,v){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,d)===!1){d===this&&(d=void 0);var S={fn:s,ctx:d};v&&(S.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(S)}},_off:function(t,s,d){var v,S,R;if(this._events&&(v=this._events[t],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,R=v.length;S<R;S++)v[S].fn=N;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var q=this._listens(t,s,d);if(q!==!1){var he=v[q];this._firingCount&&(he.fn=N,this._events[t]=v=v.slice()),v.splice(q,1)}}},fire:function(t,s,d){if(!this.listens(t,d))return this;var v=f({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var S=this._events[t];if(S){this._firingCount=this._firingCount+1||1;for(var R=0,q=S.length;R<q;R++){var he=S[R],ye=he.fn;he.once&&this.off(t,ye,he.ctx),ye.call(he.ctx||this,v)}this._firingCount--}}return d&&this._propagateEvent(v),this},listens:function(t,s,d,v){typeof t!="string"&&console.warn('"string" type argument expected');var S=s;typeof s!="function"&&(v=!!s,S=void 0,d=void 0);var R=this._events&&this._events[t];if(R&&R.length&&this._listens(t,S,d)!==!1)return!0;if(v){for(var q in this._eventParents)if(this._eventParents[q].listens(t,s,d,v))return!0}return!1},_listens:function(t,s,d){if(!this._events)return!1;var v=this._events[t]||[];if(!s)return!!v.length;d===this&&(d=void 0);for(var S=0,R=v.length;S<R;S++)if(v[S].fn===s&&v[S].ctx===d)return S;return!1},once:function(t,s,d){if(typeof t=="object")for(var v in t)this._on(v,t[v],s,!0);else{t=le(t);for(var S=0,R=t.length;S<R;S++)this._on(t[S],s,d,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[E(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[E(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,f({layer:t.target,propagatedFrom:t.target},t),!0)}};At.addEventListener=At.on,At.removeEventListener=At.clearAllEventListeners=At.off,At.addOneTimeEventListener=At.once,At.fireEvent=At.fire,At.hasEventListeners=At.listens;var Dt=Wt.extend(At);function Le(t,s,d){this.x=d?Math.round(t):t,this.y=d?Math.round(s):s}var tt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Le.prototype={clone:function(){return new Le(this.x,this.y)},add:function(t){return this.clone()._add(be(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(be(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Le(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Le(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tt(this.x),this.y=tt(this.y),this},distanceTo:function(t){t=be(t);var s=t.x-this.x,d=t.y-this.y;return Math.sqrt(s*s+d*d)},equals:function(t){return t=be(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=be(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+W(this.x)+", "+W(this.y)+")"}};function be(t,s,d){return t instanceof Le?t:xe(t)?new Le(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Le(t.x,t.y):new Le(t,s,d)}function te(t,s){if(t)for(var d=s?[t,s]:t,v=0,S=d.length;v<S;v++)this.extend(d[v])}te.prototype={extend:function(t){var s,d;if(!t)return this;if(t instanceof Le||typeof t[0]=="number"||"x"in t)s=d=be(t);else if(t=ke(t),s=t.min,d=t.max,!s||!d)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=d.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(t){return be((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return be(this.min.x,this.max.y)},getTopRight:function(){return be(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,d;return typeof t[0]=="number"||t instanceof Le?t=be(t):t=ke(t),t instanceof te?(s=t.min,d=t.max):s=d=t,s.x>=this.min.x&&d.x<=this.max.x&&s.y>=this.min.y&&d.y<=this.max.y},intersects:function(t){t=ke(t);var s=this.min,d=this.max,v=t.min,S=t.max,R=S.x>=s.x&&v.x<=d.x,q=S.y>=s.y&&v.y<=d.y;return R&&q},overlaps:function(t){t=ke(t);var s=this.min,d=this.max,v=t.min,S=t.max,R=S.x>s.x&&v.x<d.x,q=S.y>s.y&&v.y<d.y;return R&&q},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,d=this.max,v=Math.abs(s.x-d.x)*t,S=Math.abs(s.y-d.y)*t;return ke(be(s.x-v,s.y-S),be(d.x+v,d.y+S))},equals:function(t){return t?(t=ke(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ke(t,s){return!t||t instanceof te?t:new te(t,s)}function et(t,s){if(t)for(var d=s?[t,s]:t,v=0,S=d.length;v<S;v++)this.extend(d[v])}et.prototype={extend:function(t){var s=this._southWest,d=this._northEast,v,S;if(t instanceof He)v=t,S=t;else if(t instanceof et){if(v=t._southWest,S=t._northEast,!v||!S)return this}else return t?this.extend(Fe(t)||Ke(t)):this;return!s&&!d?(this._southWest=new He(v.lat,v.lng),this._northEast=new He(S.lat,S.lng)):(s.lat=Math.min(v.lat,s.lat),s.lng=Math.min(v.lng,s.lng),d.lat=Math.max(S.lat,d.lat),d.lng=Math.max(S.lng,d.lng)),this},pad:function(t){var s=this._southWest,d=this._northEast,v=Math.abs(s.lat-d.lat)*t,S=Math.abs(s.lng-d.lng)*t;return new et(new He(s.lat-v,s.lng-S),new He(d.lat+v,d.lng+S))},getCenter:function(){return new He((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new He(this.getNorth(),this.getWest())},getSouthEast:function(){return new He(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof He||"lat"in t?t=Fe(t):t=Ke(t);var s=this._southWest,d=this._northEast,v,S;return t instanceof et?(v=t.getSouthWest(),S=t.getNorthEast()):v=S=t,v.lat>=s.lat&&S.lat<=d.lat&&v.lng>=s.lng&&S.lng<=d.lng},intersects:function(t){t=Ke(t);var s=this._southWest,d=this._northEast,v=t.getSouthWest(),S=t.getNorthEast(),R=S.lat>=s.lat&&v.lat<=d.lat,q=S.lng>=s.lng&&v.lng<=d.lng;return R&&q},overlaps:function(t){t=Ke(t);var s=this._southWest,d=this._northEast,v=t.getSouthWest(),S=t.getNorthEast(),R=S.lat>s.lat&&v.lat<d.lat,q=S.lng>s.lng&&v.lng<d.lng;return R&&q},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=Ke(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ke(t,s){return t instanceof et?t:new et(t,s)}function He(t,s,d){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,d!==void 0&&(this.alt=+d)}He.prototype={equals:function(t,s){if(!t)return!1;t=Fe(t);var d=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return d<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+W(this.lat,t)+", "+W(this.lng,t)+")"},distanceTo:function(t){return yt.distance(this,Fe(t))},wrap:function(){return yt.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,d=s/Math.cos(Math.PI/180*this.lat);return Ke([this.lat-s,this.lng-d],[this.lat+s,this.lng+d])},clone:function(){return new He(this.lat,this.lng,this.alt)}};function Fe(t,s,d){return t instanceof He?t:xe(t)&&typeof t[0]!="object"?t.length===3?new He(t[0],t[1],t[2]):t.length===2?new He(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new He(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new He(t,s,d)}var wt={latLngToPoint:function(t,s){var d=this.projection.project(t),v=this.scale(s);return this.transformation._transform(d,v)},pointToLatLng:function(t,s){var d=this.scale(s),v=this.transformation.untransform(t,d);return this.projection.unproject(v)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,d=this.scale(t),v=this.transformation.transform(s.min,d),S=this.transformation.transform(s.max,d);return new te(v,S)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?I(t.lng,this.wrapLng,!0):t.lng,d=this.wrapLat?I(t.lat,this.wrapLat,!0):t.lat,v=t.alt;return new He(d,s,v)},wrapLatLngBounds:function(t){var s=t.getCenter(),d=this.wrapLatLng(s),v=s.lat-d.lat,S=s.lng-d.lng;if(v===0&&S===0)return t;var R=t.getSouthWest(),q=t.getNorthEast(),he=new He(R.lat-v,R.lng-S),ye=new He(q.lat-v,q.lng-S);return new et(he,ye)}},yt=f({},wt,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var d=Math.PI/180,v=t.lat*d,S=s.lat*d,R=Math.sin((s.lat-t.lat)*d/2),q=Math.sin((s.lng-t.lng)*d/2),he=R*R+Math.cos(v)*Math.cos(S)*q*q,ye=2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he));return this.R*ye}}),Mt=6378137,mn={R:Mt,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,d=this.MAX_LATITUDE,v=Math.max(Math.min(d,t.lat),-d),S=Math.sin(v*s);return new Le(this.R*t.lng*s,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(t){var s=180/Math.PI;return new He((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:(function(){var t=Mt*Math.PI;return new te([-t,-t],[t,t])})()};function Br(t,s,d,v){if(xe(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=d,this._d=v}Br.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new Le((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function Tr(t,s,d,v){return new Br(t,s,d,v)}var Ar=f({},yt,{code:"EPSG:3857",projection:mn,transformation:(function(){var t=.5/(Math.PI*mn.R);return Tr(t,.5,-t,.5)})()}),Vs=f({},Ar,{code:"EPSG:900913"});function No(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Fo(t,s){var d="",v,S,R,q,he,ye;for(v=0,R=t.length;v<R;v++){for(he=t[v],S=0,q=he.length;S<q;S++)ye=he[S],d+=(S?"L":"M")+ye.x+" "+ye.y;d+=s?Ze.svg?"z":"x":""}return d||"M0 0"}var Dr=document.documentElement.style,sr="ActiveXObject"in window,Hs=sr&&!document.addEventListener,Rr="msLaunchUri"in navigator&&!("documentMode"in document),Ui=gn("webkit"),Zs=gn("android"),zo=gn("android 2")||gn("android 3"),Oa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ia=Zs&&gn("Google")&&Oa<537&&!("AudioNode"in window),Ws=!!window.opera,qs=!Rr&&gn("chrome"),us=gn("gecko")&&!Ui&&!Ws&&!sr,Uo=!qs&&gn("safari"),or=gn("phantom"),Or="OTransition"in Dr,Ir=navigator.platform.indexOf("Win")===0,$o=sr&&"transition"in Dr,hs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!zo,jr="MozPerspective"in Dr,Ks=!window.L_DISABLE_3D&&($o||hs||jr)&&!Or&&!or,Ti=typeof orientation<"u"||gn("mobile"),Go=Ti&&Ui,Vo=Ti&&hs,cs=!window.PointerEvent&&window.MSPointerEvent,ar=!!(window.PointerEvent||cs),lr="ontouchstart"in window||!!window.TouchEvent,ja=!window.L_NO_TOUCH&&(lr||ar),Na=Ti&&Ws,Ho=Ti&&us,Zo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fa=(function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",N,s),window.removeEventListener("testPassiveEventSupport",N,s)}catch{}return t})(),Wo=(function(){return!!document.createElement("canvas").getContext})(),Js=!!(document.createElementNS&&No("svg").createSVGRect),Nr=!!Js&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),qo=!Js&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}})(),ds=navigator.platform.indexOf("Mac")===0,Sl=navigator.platform.indexOf("Linux")===0;function gn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Ze={ie:sr,ielt9:Hs,edge:Rr,webkit:Ui,android:Zs,android23:zo,androidStock:Ia,opera:Ws,chrome:qs,gecko:us,safari:Uo,phantom:or,opera12:Or,win:Ir,ie3d:$o,webkit3d:hs,gecko3d:jr,any3d:Ks,mobile:Ti,mobileWebkit:Go,mobileWebkit3d:Vo,msPointer:cs,pointer:ar,touch:ja,touchNative:lr,mobileOpera:Na,mobileGecko:Ho,retina:Zo,passiveEvents:Fa,canvas:Wo,svg:Js,vml:qo,inlineSvg:Nr,mac:ds,linux:Sl},fs=Ze.msPointer?"MSPointerDown":"pointerdown",Ys=Ze.msPointer?"MSPointerMove":"pointermove",Ko=Ze.msPointer?"MSPointerUp":"pointerup",za=Ze.msPointer?"MSPointerCancel":"pointercancel",Jo={touchstart:fs,touchmove:Ys,touchend:Ko,touchcancel:za},$i={touchstart:Vt,touchmove:Xs,touchend:Xs,touchcancel:Xs},ur={},Yo=!1;function Ml(t,s,d){return s==="touchstart"&&Xo(),$i[s]?(d=$i[s].bind(this,d),t.addEventListener(Jo[s],d,!1),d):(console.warn("wrong event specified:",s),N)}function Ua(t,s,d){if(!Jo[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Jo[s],d,!1)}function $a(t){ur[t.pointerId]=t}function Ga(t){ur[t.pointerId]&&(ur[t.pointerId]=t)}function ps(t){delete ur[t.pointerId]}function Xo(){Yo||(document.addEventListener(fs,$a,!0),document.addEventListener(Ys,Ga,!0),document.addEventListener(Ko,ps,!0),document.addEventListener(za,ps,!0),Yo=!0)}function Xs(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var d in ur)s.touches.push(ur[d]);s.changedTouches=[s],t(s)}}function Vt(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Ht(s),Xs(t,s)}function Bl(t){var s={},d,v;for(v in t)d=t[v],s[v]=d&&d.bind?d.bind(t):d;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var Qo=200;function Va(t,s){t.addEventListener("dblclick",s);var d=0,v;function S(R){if(R.detail!==1){v=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var q=cr(R);if(!(q.some(function(ye){return ye instanceof HTMLLabelElement&&ye.attributes.for})&&!q.some(function(ye){return ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement}))){var he=Date.now();he-d<=Qo?(v++,v===2&&s(Bl(R))):v=1,d=he}}}return t.addEventListener("click",S),{dblclick:s,simDblclick:S}}function Qs(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var ea=$r(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Fr=$r(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ms=Fr==="webkitTransition"||Fr==="OTransition"?Fr+"End":"transitionend";function qn(t){return typeof t=="string"?document.getElementById(t):t}function Gi(t,s){var d=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!d||d==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(t,null);d=v?v[s]:null}return d==="auto"?null:d}function dt(t,s,d){var v=document.createElement(t);return v.className=s||"",d&&d.appendChild(v),v}function Ot(t){var s=t.parentNode;s&&s.removeChild(t)}function gs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function zr(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function ci(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function Ur(t,s){if(t.classList!==void 0)return t.classList.contains(s);var d=eo(t);return d.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(d)}function lt(t,s){if(t.classList!==void 0)for(var d=le(s),v=0,S=d.length;v<S;v++)t.classList.add(d[v]);else if(!Ur(t,s)){var R=eo(t);ta(t,(R?R+" ":"")+s)}}function It(t,s){t.classList!==void 0?t.classList.remove(s):ta(t,Y((" "+eo(t)+" ").replace(" "+s+" "," ")))}function ta(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function eo(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function En(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&Ha(t,s)}function Ha(t,s){var d=!1,v="DXImageTransform.Microsoft.Alpha";try{d=t.filters.item(v)}catch{if(s===1)return}s=Math.round(s*100),d?(d.Enabled=s!==100,d.Opacity=s):t.style.filter+=" progid:"+v+"(opacity="+s+")"}function $r(t){for(var s=document.documentElement.style,d=0;d<t.length;d++)if(t[d]in s)return t[d];return!1}function Kn(t,s,d){var v=s||new Le(0,0);t.style[ea]=(Ze.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(d?" scale("+d+")":"")}function Zt(t,s){t._leaflet_pos=s,Ze.any3d?Kn(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function Ai(t){return t._leaflet_pos||new Le(0,0)}var Lt,Gr,to;if("onselectstart"in document)Lt=function(){ot(window,"selectstart",Ht)},Gr=function(){Rt(window,"selectstart",Ht)};else{var Vi=$r(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Lt=function(){if(Vi){var t=document.documentElement.style;to=t[Vi],t[Vi]="none"}},Gr=function(){Vi&&(document.documentElement.style[Vi]=to,to=void 0)}}function no(){ot(window,"dragstart",Ht)}function io(){Rt(window,"dragstart",Ht)}var _s,ys;function Vr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Jn(),_s=t,ys=t.style.outlineStyle,t.style.outlineStyle="none",ot(window,"keydown",Jn))}function Jn(){_s&&(_s.style.outlineStyle=ys,_s=void 0,ys=void 0,Rt(window,"keydown",Jn))}function Di(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function di(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var vs={__proto__:null,TRANSFORM:ea,TRANSITION:Fr,TRANSITION_END:ms,get:qn,getStyle:Gi,create:dt,remove:Ot,empty:gs,toFront:zr,toBack:ci,hasClass:Ur,addClass:lt,removeClass:It,setClass:ta,getClass:eo,setOpacity:En,testProp:$r,setTransform:Kn,setPosition:Zt,getPosition:Ai,get disableTextSelection(){return Lt},get enableTextSelection(){return Gr},disableImageDrag:no,enableImageDrag:io,preventOutline:Vr,restoreOutline:Jn,getSizedParentNode:Di,getScale:di};function ot(t,s,d,v){if(s&&typeof s=="object")for(var S in s)ia(t,S,s[S],d);else{s=le(s);for(var R=0,q=s.length;R<q;R++)ia(t,s[R],d,v)}return this}var tn="_leaflet_events";function Rt(t,s,d,v){if(arguments.length===1)na(t),delete t[tn];else if(s&&typeof s=="object")for(var S in s)Ri(t,S,s[S],d);else if(s=le(s),arguments.length===2)na(t,function(he){return Re(s,he)!==-1});else for(var R=0,q=s.length;R<q;R++)Ri(t,s[R],d,v);return this}function na(t,s){for(var d in t[tn]){var v=d.split(/\d/)[0];(!s||s(v))&&Ri(t,v,null,null,d)}}var hr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ia(t,s,d,v){var S=s+E(d)+(v?"_"+E(v):"");if(t[tn]&&t[tn][S])return this;var R=function(he){return d.call(v||t,he||window.event)},q=R;!Ze.touchNative&&Ze.pointer&&s.indexOf("touch")===0?R=Ml(t,s,R):Ze.touch&&s==="dblclick"?R=Va(t,R):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(hr[s]||s,R,Ze.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(R=function(he){he=he||window.event,Ls(t,he)&&q(he)},t.addEventListener(hr[s],R,!1)):t.addEventListener(s,q,!1):t.attachEvent("on"+s,R),t[tn]=t[tn]||{},t[tn][S]=R}function Ri(t,s,d,v,S){S=S||s+E(d)+(v?"_"+E(v):"");var R=t[tn]&&t[tn][S];if(!R)return this;!Ze.touchNative&&Ze.pointer&&s.indexOf("touch")===0?Ua(t,s,R):Ze.touch&&s==="dblclick"?Qs(t,R):"removeEventListener"in t?t.removeEventListener(hr[s]||s,R,!1):t.detachEvent("on"+s,R),t[tn][S]=null}function fi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ro(t){return ia(t,"wheel",fi),this}function ws(t){return ot(t,"mousedown touchstart dblclick contextmenu",fi),t._leaflet_disable_click=!0,this}function Ht(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Yn(t){return Ht(t),fi(t),this}function cr(t){if(t.composedPath)return t.composedPath();for(var s=[],d=t.target;d;)s.push(d),d=d.parentNode;return s}function xs(t,s){if(!s)return new Le(t.clientX,t.clientY);var d=di(s),v=d.boundingClientRect;return new Le((t.clientX-v.left)/d.x-s.clientLeft,(t.clientY-v.top)/d.y-s.clientTop)}var Tl=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Za(t){return Ze.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Tl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ls(t,s){var d=s.relatedTarget;if(!d)return!0;try{for(;d&&d!==t;)d=d.parentNode}catch{return!1}return d!==t}var dr={__proto__:null,on:ot,off:Rt,stopPropagation:fi,disableScrollPropagation:ro,disableClickPropagation:ws,preventDefault:Ht,stop:Yn,getPropagationPath:cr,getMousePosition:xs,getWheelDelta:Za,isExternalTarget:Ls,addListener:ot,removeListener:Rt},so=Dt.extend({run:function(t,s,d,v){this.stop(),this._el=t,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Ai(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=at(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,d=this._duration*1e3;s<d?this._runFrame(this._easeOut(s/d),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var d=this._startPos.add(this._offset.multiplyBy(t));s&&d._round(),Zt(this._el,d),this.fire("step")},_complete:function(){St(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),vt=Dt.extend({options:{crs:Ar,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=ae(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=y(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Fe(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Fr&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ot(this._proxy,ms,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,d){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(Fe(t),s,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=f({animate:d.animate},d.zoom),d.pan=f({animate:d.animate,duration:d.duration},d.pan));var v=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,d.zoom):this._tryAnimatedPan(t,d.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,d.pan&&d.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,d){var v=this.getZoomScale(s),S=this.getSize().divideBy(2),R=t instanceof Le?t:this.latLngToContainerPoint(t),q=R.subtract(S).multiplyBy(1-1/v),he=this.containerPointToLatLng(S.add(q));return this.setView(he,s,{zoom:d})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():Ke(t);var d=be(s.paddingTopLeft||s.padding||[0,0]),v=be(s.paddingBottomRight||s.padding||[0,0]),S=this.getBoundsZoom(t,!1,d.add(v));if(S=typeof s.maxZoom=="number"?Math.min(s.maxZoom,S):S,S===1/0)return{center:t.getCenter(),zoom:S};var R=v.subtract(d).divideBy(2),q=this.project(t.getSouthWest(),S),he=this.project(t.getNorthEast(),S),ye=this.unproject(q.add(he).divideBy(2).add(R),S);return{center:ye,zoom:S}},fitBounds:function(t,s){if(t=Ke(t),!t.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(t,s);return this.setView(d.center,d.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=be(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new so,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,d,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,d){if(d=d||{},d.animate===!1||!Ze.any3d)return this.setView(t,s,d);this._stop();var v=this.project(this.getCenter()),S=this.project(t),R=this.getSize(),q=this._zoom;t=Fe(t),s=s===void 0?q:s;var he=Math.max(R.x,R.y),ye=he*this.getZoomScale(q,s),Ee=S.distanceTo(v)||1,Oe=1.42,nt=Oe*Oe;function ft(Et){var yr=Et?-1:1,jl=Et?ye:he,bi=ye*ye-he*he+yr*nt*nt*Ee*Ee,vr=2*jl*nt*Ee,Ei=bi/vr,Xi=Math.sqrt(Ei*Ei+1)-Ei,xo=Xi<1e-9?-18:Math.log(Xi);return xo}function an(Et){return(Math.exp(Et)-Math.exp(-Et))/2}function Xt(Et){return(Math.exp(Et)+Math.exp(-Et))/2}function yn(Et){return an(Et)/Xt(Et)}var zt=ft(0);function Li(Et){return he*(Xt(zt)/Xt(zt+Oe*Et))}function Ds(Et){return he*(Xt(zt)*yn(zt+Oe*Et)-an(zt))/nt}function ii(Et){return 1-Math.pow(1-Et,1.5)}var ya=Date.now(),ki=(ft(1)-zt)/Oe,Ci=d.duration?1e3*d.duration:1e3*ki*.8;function ts(){var Et=(Date.now()-ya)/Ci,yr=ii(Et)*ki;Et<=1?(this._flyToFrame=at(ts,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(Ds(yr)/Ee)),q),this.getScaleZoom(he/Li(yr),q),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),ts.call(this),this},flyToBounds:function(t,s){var d=this._getBoundsCenterZoom(t,s);return this.flyTo(d.center,d.zoom,s)},setMaxBounds:function(t){return t=Ke(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var d=this.getCenter(),v=this._limitCenter(d,this._zoom,Ke(t));return d.equals(v)||this.panTo(v,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var d=be(s.paddingTopLeft||s.padding||[0,0]),v=be(s.paddingBottomRight||s.padding||[0,0]),S=this.project(this.getCenter()),R=this.project(t),q=this.getPixelBounds(),he=ke([q.min.add(d),q.max.subtract(v)]),ye=he.getSize();if(!he.contains(R)){this._enforcingBounds=!0;var Ee=R.subtract(he.getCenter()),Oe=he.extend(R).getSize().subtract(ye);S.x+=Ee.x<0?-Oe.x:Oe.x,S.y+=Ee.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(S),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=f({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),v=s.divideBy(2).round(),S=d.divideBy(2).round(),R=v.subtract(S);return!R.x&&!R.y?this:(t.animate&&t.pan?this.panBy(R):(t.pan&&this._rawPanBy(R),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(y(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=f({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=y(this._handleGeolocationResponse,this),d=y(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,d,t):navigator.geolocation.getCurrentPosition(s,d,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,d=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,d=t.coords.longitude,v=new He(s,d),S=v.toBounds(t.coords.accuracy*2),R=this._locateOptions;if(R.setView){var q=this.getBoundsZoom(S);this.setView(v,R.maxZoom?Math.min(q,R.maxZoom):q)}var he={latlng:v,bounds:S,timestamp:t.timestamp};for(var ye in t.coords)typeof t.coords[ye]=="number"&&(he[ye]=t.coords[ye]);this.fire("locationfound",he)}},addHandler:function(t,s){if(!s)return this;var d=this[t]=new s(this);return this._handlers.push(d),this.options[t]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(St(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ot(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var d="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),v=dt("div",d,s||this._mapPane);return t&&(this._panes[t]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),d=this.unproject(t.getTopRight());return new et(s,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,d){t=Ke(t),d=be(d||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),R=this.getMaxZoom(),q=t.getNorthWest(),he=t.getSouthEast(),ye=this.getSize().subtract(d),Ee=ke(this.project(he,v),this.project(q,v)).getSize(),Oe=Ze.any3d?this.options.zoomSnap:1,nt=ye.x/Ee.x,ft=ye.y/Ee.y,an=s?Math.max(nt,ft):Math.min(nt,ft);return v=this.getScaleZoom(an,v),Oe&&(v=Math.round(v/(Oe/100))*(Oe/100),v=s?Math.ceil(v/Oe)*Oe:Math.floor(v/Oe)*Oe),Math.max(S,Math.min(R,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var d=this._getTopLeftPoint(t,s);return new te(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var d=this.options.crs;return s=s===void 0?this._zoom:s,d.scale(t)/d.scale(s)},getScaleZoom:function(t,s){var d=this.options.crs;s=s===void 0?this._zoom:s;var v=d.zoom(t*d.scale(s));return isNaN(v)?1/0:v},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Fe(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(be(t),s)},layerPointToLatLng:function(t){var s=be(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(Fe(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Fe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Ke(t))},distance:function(t,s){return this.options.crs.distance(Fe(t),Fe(s))},containerPointToLayerPoint:function(t){return be(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return be(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(be(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Fe(t)))},mouseEventToContainerPoint:function(t){return xs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=qn(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ot(s,"scroll",this._onScroll,this),this._containerId=E(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,lt(t,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Gi(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Zt(this._mapPane,new Le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(t.markerPane,"leaflet-zoom-hide"),lt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,d){Zt(this._mapPane,new Le(0,0));var v=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var S=this._zoom!==s;this._moveStart(S,d)._move(t,s)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,d,v){s===void 0&&(s=this._zoom);var S=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),v?d&&d.pinch&&this.fire("zoom",d):((S||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return St(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Zt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[E(this._container)]=this;var s=t?Rt:ot;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){St(this._resizeRequest),this._resizeRequest=at(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var d=[],v,S=s==="mouseout"||s==="mouseover",R=t.target||t.srcElement,q=!1;R;){if(v=this._targets[E(R)],v&&(s==="click"||s==="preclick")&&this._draggableMoved(v)){q=!0;break}if(v&&v.listens(s,!0)&&(S&&!Ls(R,t)||(d.push(v),S))||R===this._container)break;R=R.parentNode}return!d.length&&!q&&!S&&this.listens(s,!0)&&(d=[this]),d},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var d=t.type;d==="mousedown"&&Vr(s),this._fireDOMEvent(t,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,d){if(t.type==="click"){var v=f({},t);v.type="preclick",this._fireDOMEvent(v,v.type,d)}var S=this._findEventTargets(t,s);if(d){for(var R=[],q=0;q<d.length;q++)d[q].listens(s,!0)&&R.push(d[q]);S=R.concat(S)}if(S.length){s==="contextmenu"&&Ht(t);var he=S[0],ye={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Ee=he.getLatLng&&(!he._radius||he._radius<=10);ye.containerPoint=Ee?this.latLngToContainerPoint(he.getLatLng()):this.mouseEventToContainerPoint(t),ye.layerPoint=this.containerPointToLayerPoint(ye.containerPoint),ye.latlng=Ee?he.getLatLng():this.layerPointToLatLng(ye.layerPoint)}for(q=0;q<S.length;q++)if(S[q].fire(s,ye,!0),ye.originalEvent._stopped||S[q].options.bubblingMouseEvents===!1&&Re(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return Ai(this._mapPane)||new Le(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var d=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var d=this.getSize()._divideBy(2);return this.project(t,s)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,d){var v=this._getNewPixelOrigin(d,s);return this.project(t,s)._subtract(v)},_latLngBoundsToNewLayerBounds:function(t,s,d){var v=this._getNewPixelOrigin(d,s);return ke([this.project(t.getSouthWest(),s)._subtract(v),this.project(t.getNorthWest(),s)._subtract(v),this.project(t.getSouthEast(),s)._subtract(v),this.project(t.getNorthEast(),s)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,d){if(!d)return t;var v=this.project(t,s),S=this.getSize().divideBy(2),R=new te(v.subtract(S),v.add(S)),q=this._getBoundsOffset(R,d,s);return Math.abs(q.x)<=1&&Math.abs(q.y)<=1?t:this.unproject(v.add(q),s)},_limitOffset:function(t,s){if(!s)return t;var d=this.getPixelBounds(),v=new te(d.min.add(t),d.max.add(t));return t.add(this._getBoundsOffset(v,s))},_getBoundsOffset:function(t,s,d){var v=ke(this.project(s.getNorthEast(),d),this.project(s.getSouthWest(),d)),S=v.min.subtract(t.min),R=v.max.subtract(t.max),q=this._rebound(S.x,-R.x),he=this._rebound(S.y,-R.y);return new Le(q,he)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),d=this.getMaxZoom(),v=Ze.any3d?this.options.zoomSnap:1;return v&&(t=Math.round(t/v)*v),Math.max(s,Math.min(d,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){It(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var d=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,s),!0)},_createAnimProxy:function(){var t=this._proxy=dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var d=ea,v=this._proxy.style[d];Kn(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),v===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();Kn(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(s),S=this._getCenterOffset(t)._divideBy(1-1/v);return d.animate!==!0&&!this.getSize().contains(S)?!1:(at(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,d,v){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(y(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&It(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oi(t,s){return new vt(t,s)}var ut=Wt.extend({options:{position:"topright"},initialize:function(t){ae(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),d=this.getPosition(),v=t._controlCorners[d];return lt(s,"leaflet-control"),d.indexOf("bottom")!==-1?v.insertBefore(s,v.firstChild):v.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),pi=function(t){return new ut(t)};vt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",d=this._controlContainer=dt("div",s+"control-container",this._container);function v(S,R){var q=s+S+" "+s+R;t[S+R]=dt("div",q,d)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ot(this._controlCorners[t]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hr=ut.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,d,v){return d<v?-1:v<d?1:0}},initialize:function(t,s,d){ae(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in t)this._addLayer(t[v],v);for(v in s)this._addLayer(s[v],v,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ut.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(E(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):It(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return It(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=dt("div",t),d=this.options.collapsed;s.setAttribute("aria-haspopup",!0),ws(s),ro(s);var v=this._section=dt("section",t+"-list");d&&(this._map.on("click",this.collapse,this),ot(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=dt("a",t+"-toggle",s);S.href="#",S.title="Layers",S.setAttribute("role","button"),ot(S,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Ht(R),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=dt("div",t+"-base",v),this._separator=dt("div",t+"-separator",v),this._overlaysList=dt("div",t+"-overlays",v),s.appendChild(v)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&E(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,d){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:d}),this.options.sortLayers&&this._layers.sort(y(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gs(this._baseLayersList),gs(this._overlaysList),this._layerControlInputs=[];var t,s,d,v,S=0;for(d=0;d<this._layers.length;d++)v=this._layers[d],this._addItem(v),s=s||v.overlay,t=t||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(t=t&&S>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(E(t.target)),d=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;d&&this._map.fire(d,s)},_createRadioElement:function(t,s){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=d,v.firstChild},_addItem:function(t){var s=document.createElement("label"),d=this._map.hasLayer(t.layer),v;t.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=d):v=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(v),v.layerId=E(t.layer),ot(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+t.name;var R=document.createElement("span");s.appendChild(R),R.appendChild(v),R.appendChild(S);var q=t.overlay?this._overlaysList:this._baseLayersList;return q.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,d,v=[],S=[];this._handlingClick=!0;for(var R=t.length-1;R>=0;R--)s=t[R],d=this._getLayer(s.layerId).layer,s.checked?v.push(d):s.checked||S.push(d);for(R=0;R<S.length;R++)this._map.hasLayer(S[R])&&this._map.removeLayer(S[R]);for(R=0;R<v.length;R++)this._map.hasLayer(v[R])||this._map.addLayer(v[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,d,v=this._map.getZoom(),S=t.length-1;S>=0;S--)s=t[S],d=this._getLayer(s.layerId).layer,s.disabled=d.options.minZoom!==void 0&&v<d.options.minZoom||d.options.maxZoom!==void 0&&v>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ot(t,"click",Ht),this.expand();var s=this;setTimeout(function(){Rt(t,"click",Ht),s._preventClick=!1})}}),oo=function(t,s,d){return new Hr(t,s,d)},fr=ut.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",d=dt("div",s+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,s+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,s+"-out",d,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,d,v,S){var R=dt("a",d,v);return R.innerHTML=t,R.href="#",R.title=s,R.setAttribute("role","button"),R.setAttribute("aria-label",s),ws(R),ot(R,"click",Yn),ot(R,"click",S,this),ot(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";It(this._zoomInButton,s),It(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(lt(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(lt(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fr,this.addControl(this.zoomControl))});var Wa=function(t){return new fr(t)},hn=ut.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",d=dt("div",s),v=this.options;return this._addScales(v,s+"-line",d),t.on(v.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),d},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,d){t.metric&&(this._mScale=dt("div",s,d)),t.imperial&&(this._iScale=dt("div",s,d))},_update:function(){var t=this._map,s=t.getSize().y/2,d=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(d)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),d=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,d,s/t)},_updateImperial:function(t){var s=t*3.2808399,d,v,S;s>5280?(d=s/5280,v=this._getRoundNum(d),this._updateScale(this._iScale,v+" mi",v/d)):(S=this._getRoundNum(s),this._updateScale(this._iScale,S+" ft",S/s))},_updateScale:function(t,s,d){t.style.width=Math.round(this.options.maxWidth*d)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),d=t/s;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,s*d}}),Ii=function(t){return new hn(t)},ra='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Pn=ut.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?ra+" ":"")+"Leaflet</a>"},initialize:function(t){ae(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=dt("div","leaflet-control-attribution"),ws(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var d=[];this.options.prefix&&d.push(this.options.prefix),t.length&&d.push(t.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new Pn().addTo(this)});var qa=function(t){return new Pn(t)};ut.Layers=Hr,ut.Zoom=fr,ut.Scale=hn,ut.Attribution=Pn,pi.layers=oo,pi.zoom=Wa,pi.scale=Ii,pi.attribution=qa;var nn=Wt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,s){return t.addHandler(s,this),this};var sa={Events:At},Zr=Ze.touch?"touchstart mousedown":"mousedown",Xn=Dt.extend({options:{clickTolerance:3},initialize:function(t,s,d,v){ae(this,v),this._element=t,this._dragStartTarget=s||t,this._preventOutline=d},enable:function(){this._enabled||(ot(this._dragStartTarget,Zr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xn._dragging===this&&this.finishDrag(!0),Rt(this._dragStartTarget,Zr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ur(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Xn._dragging===this&&this.finishDrag();return}if(!(Xn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Xn._dragging=this,this._preventOutline&&Vr(this._element),no(),Lt(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,d=Di(this._element);this._startPoint=new Le(s.clientX,s.clientY),this._startPos=Ai(this._element),this._parentScale=di(d);var v=t.type==="mousedown";ot(document,v?"mousemove":"touchmove",this._onMove,this),ot(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,d=new Le(s.clientX,s.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ht(t),this._moved||(this.fire("dragstart"),this._moved=!0,lt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Zt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){It(document.body,"leaflet-dragging"),this._lastTarget&&(It(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Rt(document,"mousemove touchmove",this._onMove,this),Rt(document,"mouseup touchend touchcancel",this._onUp,this),io(),Gr();var s=this._moved&&this._moving;this._moving=!1,Xn._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function oa(t,s,d){var v,S=[1,4,2,8],R,q,he,ye,Ee,Oe,nt,ft;for(R=0,Oe=t.length;R<Oe;R++)t[R]._code=Sn(t[R],s);for(he=0;he<4;he++){for(nt=S[he],v=[],R=0,Oe=t.length,q=Oe-1;R<Oe;q=R++)ye=t[R],Ee=t[q],ye._code&nt?Ee._code&nt||(ft=Zi(Ee,ye,nt,s,d),ft._code=Sn(ft,s),v.push(ft)):(Ee._code&nt&&(ft=Zi(Ee,ye,nt,s,d),ft._code=Sn(ft,s),v.push(ft)),v.push(ye));t=v}return t}function Ka(t,s){var d,v,S,R,q,he,ye,Ee,Oe;if(!t||t.length===0)throw new Error("latlngs not passed");Mn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var nt=Fe([0,0]),ft=Ke(t),an=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());an<1700&&(nt=aa(t));var Xt=t.length,yn=[];for(d=0;d<Xt;d++){var zt=Fe(t[d]);yn.push(s.project(Fe([zt.lat-nt.lat,zt.lng-nt.lng])))}for(he=ye=Ee=0,d=0,v=Xt-1;d<Xt;v=d++)S=yn[d],R=yn[v],q=S.y*R.x-R.y*S.x,ye+=(S.x+R.x)*q,Ee+=(S.y+R.y)*q,he+=q*3;he===0?Oe=yn[0]:Oe=[ye/he,Ee/he];var Li=s.unproject(be(Oe));return Fe([Li.lat+nt.lat,Li.lng+nt.lng])}function aa(t){for(var s=0,d=0,v=0,S=0;S<t.length;S++){var R=Fe(t[S]);s+=R.lat,d+=R.lng,v++}return Fe([s/v,d/v])}var Al={__proto__:null,clipPolygon:oa,polygonCenter:Ka,centroid:aa};function ao(t,s){if(!s||!t.length)return t.slice();var d=s*s;return t=Ja(t,d),t=rn(t,d),t}function la(t,s,d){return Math.sqrt(mr(t,s,d,!0))}function Dl(t,s,d){return mr(t,s,d)}function rn(t,s){var d=t.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(d);S[0]=S[d-1]=1,cn(t,S,s,0,d-1);var R,q=[];for(R=0;R<d;R++)S[R]&&q.push(t[R]);return q}function cn(t,s,d,v,S){var R=0,q,he,ye;for(he=v+1;he<=S-1;he++)ye=mr(t[he],t[v],t[S],!0),ye>R&&(q=he,R=ye);R>d&&(s[q]=1,cn(t,s,d,v,q),cn(t,s,d,q,S))}function Ja(t,s){for(var d=[t[0]],v=1,S=0,R=t.length;v<R;v++)Rl(t[v],t[S])>s&&(d.push(t[v]),S=v);return S<R-1&&d.push(t[R-1]),d}var Hi;function pr(t,s,d,v,S){var R=v?Hi:Sn(t,d),q=Sn(s,d),he,ye,Ee;for(Hi=q;;){if(!(R|q))return[t,s];if(R&q)return!1;he=R||q,ye=Zi(t,s,he,d,S),Ee=Sn(ye,d),he===R?(t=ye,R=Ee):(s=ye,q=Ee)}}function Zi(t,s,d,v,S){var R=s.x-t.x,q=s.y-t.y,he=v.min,ye=v.max,Ee,Oe;return d&8?(Ee=t.x+R*(ye.y-t.y)/q,Oe=ye.y):d&4?(Ee=t.x+R*(he.y-t.y)/q,Oe=he.y):d&2?(Ee=ye.x,Oe=t.y+q*(ye.x-t.x)/R):d&1&&(Ee=he.x,Oe=t.y+q*(he.x-t.x)/R),new Le(Ee,Oe,S)}function Sn(t,s){var d=0;return t.x<s.min.x?d|=1:t.x>s.max.x&&(d|=2),t.y<s.min.y?d|=4:t.y>s.max.y&&(d|=8),d}function Rl(t,s){var d=s.x-t.x,v=s.y-t.y;return d*d+v*v}function mr(t,s,d,v){var S=s.x,R=s.y,q=d.x-S,he=d.y-R,ye=q*q+he*he,Ee;return ye>0&&(Ee=((t.x-S)*q+(t.y-R)*he)/ye,Ee>1?(S=d.x,R=d.y):Ee>0&&(S+=q*Ee,R+=he*Ee)),q=t.x-S,he=t.y-R,v?q*q+he*he:new Le(S,R)}function Mn(t){return!xe(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Un(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(t)}function ua(t,s){var d,v,S,R,q,he,ye,Ee;if(!t||t.length===0)throw new Error("latlngs not passed");Mn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Oe=Fe([0,0]),nt=Ke(t),ft=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());ft<1700&&(Oe=aa(t));var an=t.length,Xt=[];for(d=0;d<an;d++){var yn=Fe(t[d]);Xt.push(s.project(Fe([yn.lat-Oe.lat,yn.lng-Oe.lng])))}for(d=0,v=0;d<an-1;d++)v+=Xt[d].distanceTo(Xt[d+1])/2;if(v===0)Ee=Xt[0];else for(d=0,R=0;d<an-1;d++)if(q=Xt[d],he=Xt[d+1],S=q.distanceTo(he),R+=S,R>v){ye=(R-v)/S,Ee=[he.x-ye*(he.x-q.x),he.y-ye*(he.y-q.y)];break}var zt=s.unproject(be(Ee));return Fe([zt.lat+Oe.lat,zt.lng+Oe.lng])}var ks={__proto__:null,simplify:ao,pointToSegmentDistance:la,closestPointOnSegment:Dl,clipSegment:pr,_getEdgeIntersection:Zi,_getBitCode:Sn,_sqClosestPointOnSegment:mr,isFlat:Mn,_flat:Un,polylineCenter:ua},ha={project:function(t){return new Le(t.lng,t.lat)},unproject:function(t){return new He(t.y,t.x)},bounds:new te([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,d=this.R,v=t.lat*s,S=this.R_MINOR/d,R=Math.sqrt(1-S*S),q=R*Math.sin(v),he=Math.tan(Math.PI/4-v/2)/Math.pow((1-q)/(1+q),R/2);return v=-d*Math.log(Math.max(he,1e-10)),new Le(t.lng*s*d,v)},unproject:function(t){for(var s=180/Math.PI,d=this.R,v=this.R_MINOR/d,S=Math.sqrt(1-v*v),R=Math.exp(-t.y/d),q=Math.PI/2-2*Math.atan(R),he=0,ye=.1,Ee;he<15&&Math.abs(ye)>1e-7;he++)Ee=S*Math.sin(q),Ee=Math.pow((1-Ee)/(1+Ee),S/2),ye=Math.PI/2-2*Math.atan(R*Ee)-q,q+=ye;return new He(q*s,t.x*s/d)}},mi={__proto__:null,LonLat:ha,Mercator:$n,SphericalMercator:mn},lo=f({},yt,{code:"EPSG:3395",projection:$n,transformation:(function(){var t=.5/(Math.PI*$n.R);return Tr(t,.5,-t,.5)})()}),ca=f({},yt,{code:"EPSG:4326",projection:ha,transformation:Tr(1/180,1,-1/180,.5)}),da=f({},wt,{projection:ha,transformation:Tr(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var d=s.lng-t.lng,v=s.lat-t.lat;return Math.sqrt(d*d+v*v)},infinite:!0});wt.Earth=yt,wt.EPSG3395=lo,wt.EPSG3857=Ar,wt.EPSG900913=Vs,wt.EPSG4326=ca,wt.Simple=da;var _n=Dt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[E(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[E(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var d=this.getEvents();s.on(d,this),this.once("remove",function(){s.off(d,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=E(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=E(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return E(t)in this._layers},eachLayer:function(t,s){for(var d in this._layers)t.call(s,this._layers[d]);return this},_addLayers:function(t){t=t?xe(t)?t:[t]:[];for(var s=0,d=t.length;s<d;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[E(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=E(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,d=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;t=S.minZoom===void 0?t:Math.min(t,S.minZoom),s=S.maxZoom===void 0?s:Math.max(s,S.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wi=_n.extend({initialize:function(t,s){ae(this,s),this._layers={};var d,v;if(t)for(d=0,v=t.length;d<v;d++)this.addLayer(t[d])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),d,v;for(d in this._layers)v=this._layers[d],v[t]&&v[t].apply(v,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var d in this._layers)t.call(s,this._layers[d]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return E(t)}}),Cs=function(t,s){return new Wi(t,s)},Qn=Wi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Wi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Wi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new et;for(var s in this._layers){var d=this._layers[s];t.extend(d.getBounds?d.getBounds():d.getLatLng())}return t}}),Ya=function(t,s){return new Qn(t,s)},gr=Wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){ae(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var d=this._getIconUrl(t);if(!d){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(d,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(v,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(t,s){var d=this.options,v=d[s+"Size"];typeof v=="number"&&(v=[v,v]);var S=be(v),R=be(s==="shadow"&&d.shadowAnchor||d.iconAnchor||S&&S.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(d.className||""),R&&(t.style.marginLeft=-R.x+"px",t.style.marginTop=-R.y+"px"),S&&(t.style.width=S.x+"px",t.style.height=S.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return Ze.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Xa(t){return new gr(t)}var Wr=gr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Wr.imagePath!="string"&&(Wr.imagePath=this._detectIconPath()),(this.options.imagePath||Wr.imagePath)+gr.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(d,v,S){var R=v.exec(d);return R&&R[S]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=dt("div","leaflet-default-icon-path",document.body),s=Gi(t,"background-image")||Gi(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),bs=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&It(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,d=s._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,R=Ai(s._icon),q=d.getPixelBounds(),he=d.getPixelOrigin(),ye=ke(q.min._subtract(he).add(S),q.max._subtract(he).subtract(S));if(!ye.contains(R)){var Ee=be((Math.max(ye.max.x,R.x)-ye.max.x)/(q.max.x-ye.max.x)-(Math.min(ye.min.x,R.x)-ye.min.x)/(q.min.x-ye.min.x),(Math.max(ye.max.y,R.y)-ye.max.y)/(q.max.y-ye.max.y)-(Math.min(ye.min.y,R.y)-ye.min.y)/(q.min.y-ye.min.y)).multiplyBy(v);d.panBy(Ee,{animate:!1}),this._draggable._newPos._add(Ee),this._draggable._startPos._add(Ee),Zt(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=at(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(St(this._panRequest),this._panRequest=at(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,d=s._shadow,v=Ai(s._icon),S=s._map.layerPointToLatLng(v);d&&Zt(d,v),s._latlng=S,t.latlng=S,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){St(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ji=_n.extend({options:{icon:new Wr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){ae(this,s),this._latlng=Fe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=Fe(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=t.icon.createIcon(this._icon),v=!1;d!==this._icon&&(this._icon&&this._removeIcon(),v=!0,t.title&&(d.title=t.title),d.tagName==="IMG"&&(d.alt=t.alt||"")),lt(d,s),t.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ot(d,"focus",this._panOnFocus,this);var S=t.icon.createShadow(this._shadow),R=!1;S!==this._shadow&&(this._removeShadow(),R=!0),S&&(lt(S,s),S.alt=""),this._shadow=S,t.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&R&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(this._icon,"focus",this._panOnFocus,this),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Zt(this._icon,t),this._shadow&&Zt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bs)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bs(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&En(this._icon,t),this._shadow&&En(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,d=s.iconSize?be(s.iconSize):be(0,0),v=s.iconAnchor?be(s.iconAnchor):be(0,0);t.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:d.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ol(t,s){return new ji(t,s)}var Ni=_n.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return ae(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gi=Ni.extend({options:{fill:!0,radius:10},initialize:function(t,s){ae(this,s),this._latlng=Fe(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=Fe(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Ni.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,d=this._clickTolerance(),v=[t+d,s+d];this._pxBounds=new te(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fa(t,s){return new gi(t,s)}var uo=gi.extend({initialize:function(t,s,d){if(typeof s=="number"&&(s=f({},d,{radius:s})),ae(this,s),this._latlng=Fe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new et(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ni.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,d=this._map,v=d.options.crs;if(v.distance===yt.distance){var S=Math.PI/180,R=this._mRadius/yt.R/S,q=d.project([s+R,t]),he=d.project([s-R,t]),ye=q.add(he).divideBy(2),Ee=d.unproject(ye).lat,Oe=Math.acos((Math.cos(R*S)-Math.sin(s*S)*Math.sin(Ee*S))/(Math.cos(s*S)*Math.cos(Ee*S)))/S;(isNaN(Oe)||Oe===0)&&(Oe=R/Math.cos(Math.PI/180*s)),this._point=ye.subtract(d.getPixelOrigin()),this._radius=isNaN(Oe)?0:ye.x-d.project([Ee,t-Oe]).x,this._radiusY=ye.y-q.y}else{var nt=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(nt).x}this._updateBounds()}});function ei(t,s,d){return new uo(t,s,d)}var On=Ni.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){ae(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,d=null,v=mr,S,R,q=0,he=this._parts.length;q<he;q++)for(var ye=this._parts[q],Ee=1,Oe=ye.length;Ee<Oe;Ee++){S=ye[Ee-1],R=ye[Ee];var nt=v(t,S,R,!0);nt<s&&(s=nt,d=v(t,S,R))}return d&&(d.distance=Math.sqrt(s)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ua(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=Fe(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new et,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],d=Mn(t),v=0,S=t.length;v<S;v++)d?(s[v]=Fe(t[v]),this._bounds.extend(s[v])):s[v]=this._convertLatLngs(t[v]);return s},_project:function(){var t=new te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new Le(t,t);this._rawPxBounds&&(this._pxBounds=new te([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,d){var v=t[0]instanceof He,S=t.length,R,q;if(v){for(q=[],R=0;R<S;R++)q[R]=this._map.latLngToLayerPoint(t[R]),d.extend(q[R]);s.push(q)}else for(R=0;R<S;R++)this._projectLatlngs(t[R],s,d)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,d,v,S,R,q,he,ye;for(d=0,S=0,R=this._rings.length;d<R;d++)for(ye=this._rings[d],v=0,q=ye.length;v<q-1;v++)he=pr(ye[v],ye[v+1],t,v,!0),he&&(s[S]=s[S]||[],s[S].push(he[0]),(he[1]!==ye[v+1]||v===q-2)&&(s[S].push(he[1]),S++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,d=0,v=t.length;d<v;d++)t[d]=ao(t[d],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var d,v,S,R,q,he,ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,R=this._parts.length;d<R;d++)for(he=this._parts[d],v=0,q=he.length,S=q-1;v<q;S=v++)if(!(!s&&v===0)&&la(t,he[S],he[v])<=ye)return!0;return!1}});function Il(t,s){return new On(t,s)}On._flat=Un;var ti=On.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ka(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=On.prototype._convertLatLngs.call(this,t),d=s.length;return d>=2&&s[0]instanceof He&&s[0].equals(s[d-1])&&s.pop(),s},_setLatLngs:function(t){On.prototype._setLatLngs.call(this,t),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,d=new Le(s,s);if(t=new te(t.min.subtract(d),t.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,R;v<S;v++)R=oa(this._rings[v],t,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,d,v,S,R,q,he,ye,Ee;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(R=0,ye=this._parts.length;R<ye;R++)for(d=this._parts[R],q=0,Ee=d.length,he=Ee-1;q<Ee;he=q++)v=d[q],S=d[he],v.y>t.y!=S.y>t.y&&t.x<(S.x-v.x)*(t.y-v.y)/(S.y-v.y)+v.x&&(s=!s);return s||On.prototype._containsPoint.call(this,t,!0)}});function Es(t,s){return new ti(t,s)}var _i=Qn.extend({initialize:function(t,s){ae(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=xe(t)?t:t.features,d,v,S;if(s){for(d=0,v=s.length;d<v;d++)S=s[d],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var R=this.options;if(R.filter&&!R.filter(t))return this;var q=qr(t,R);return q?(q.feature=fo(t),q.defaultOptions=q.options,this.resetStyle(q),R.onEachFeature&&R.onEachFeature(t,q),this.addLayer(q)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=f({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function qr(t,s){var d=t.type==="Feature"?t.geometry:t,v=d?d.coordinates:null,S=[],R=s&&s.pointToLayer,q=s&&s.coordsToLatLng||Ps,he,ye,Ee,Oe;if(!v&&!d)return null;switch(d.type){case"Point":return he=q(v),ho(R,t,he,s);case"MultiPoint":for(Ee=0,Oe=v.length;Ee<Oe;Ee++)he=q(v[Ee]),S.push(ho(R,t,he,s));return new Qn(S);case"LineString":case"MultiLineString":return ye=Ss(v,d.type==="LineString"?0:1,q),new On(ye,s);case"Polygon":case"MultiPolygon":return ye=Ss(v,d.type==="Polygon"?1:2,q),new ti(ye,s);case"GeometryCollection":for(Ee=0,Oe=d.geometries.length;Ee<Oe;Ee++){var nt=qr({geometry:d.geometries[Ee],type:"Feature",properties:t.properties},s);nt&&S.push(nt)}return new Qn(S);case"FeatureCollection":for(Ee=0,Oe=d.features.length;Ee<Oe;Ee++){var ft=qr(d.features[Ee],s);ft&&S.push(ft)}return new Qn(S);default:throw new Error("Invalid GeoJSON object.")}}function ho(t,s,d,v){return t?t(s,d):new ji(d,v&&v.markersInheritOptions&&v)}function Ps(t){return new He(t[1],t[0],t[2])}function Ss(t,s,d){for(var v=[],S=0,R=t.length,q;S<R;S++)q=s?Ss(t[S],s-1,d):(d||Ps)(t[S]),v.push(q);return v}function Ms(t,s){return t=Fe(t),t.alt!==void 0?[W(t.lng,s),W(t.lat,s),W(t.alt,s)]:[W(t.lng,s),W(t.lat,s)]}function co(t,s,d,v){for(var S=[],R=0,q=t.length;R<q;R++)S.push(s?co(t[R],Mn(t[R])?0:s-1,d,v):Ms(t[R],v));return!s&&d&&S.length>0&&S.push(S[0].slice()),S}function Kr(t,s){return t.feature?f({},t.feature,{geometry:s}):fo(s)}function fo(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var po={toGeoJSON:function(t){return Kr(this,{type:"Point",coordinates:Ms(this.getLatLng(),t)})}};ji.include(po),uo.include(po),gi.include(po),On.include({toGeoJSON:function(t){var s=!Mn(this._latlngs),d=co(this._latlngs,s?1:0,!1,t);return Kr(this,{type:(s?"Multi":"")+"LineString",coordinates:d})}}),ti.include({toGeoJSON:function(t){var s=!Mn(this._latlngs),d=s&&!Mn(this._latlngs[0]),v=co(this._latlngs,d?2:s?1:0,!0,t);return s||(v=[v]),Kr(this,{type:(d?"Multi":"")+"Polygon",coordinates:v})}}),Wi.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(d){s.push(d.toGeoJSON(t).geometry.coordinates)}),Kr(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var d=s==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var R=S.toGeoJSON(t);if(d)v.push(R.geometry);else{var q=fo(R);q.type==="FeatureCollection"?v.push.apply(v,q.features):v.push(q)}}}),d?Kr(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function mo(t,s){return new _i(t,s)}var Gn=mo,yi=_n.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,d){this._url=t,this._bounds=Ke(s),ae(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&zr(this._image),this},bringToBack:function(){return this._map&&ci(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Ke(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:dt("img");if(lt(s,"leaflet-image-layer"),this._zoomAnimated&&lt(s,"leaflet-zoom-animated"),this.options.className&&lt(s,this.options.className),s.onselectstart=N,s.onmousemove=N,s.onload=y(this.fire,this,"load"),s.onerror=y(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Kn(this._image,d,s)},_reset:function(){var t=this._image,s=new te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=s.getSize();Zt(t,s.min),t.style.width=d.x+"px",t.style.height=d.y+"px"},_updateOpacity:function(){En(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Qa=function(t,s,d){return new yi(t,s,d)},Jr=yi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:dt("video");if(lt(s,"leaflet-image-layer"),this._zoomAnimated&&lt(s,"leaflet-zoom-animated"),this.options.className&&lt(s,this.options.className),s.onselectstart=N,s.onmousemove=N,s.onloadeddata=y(this.fire,this,"load"),t){for(var d=s.getElementsByTagName("source"),v=[],S=0;S<d.length;S++)v.push(d[S].src);this._url=d.length>0?v:[s.src];return}xe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var q=dt("source");q.src=this._url[R],s.appendChild(q)}}});function pa(t,s,d){return new Jr(t,s,d)}var ma=yi.extend({_initImage:function(){var t=this._image=this._url;lt(t,"leaflet-image-layer"),this._zoomAnimated&&lt(t,"leaflet-zoom-animated"),this.options.className&&lt(t,this.options.className),t.onselectstart=N,t.onmousemove=N}});function ga(t,s,d){return new ma(t,s,d)}var vi=_n.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof He||xe(t))?(this._latlng=Fe(t),ae(this,s)):(ae(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&En(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&En(this._container,1),this.bringToFront(),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(En(this._container,0),this._removeTimeout=setTimeout(y(Ot,void 0,this._container),200)):Ot(this._container),this.options.interactive&&(It(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Fe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&zr(this._container),this},bringToBack:function(){return this._map&&ci(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof Qn){s=null;var d=this._source._layers;for(var v in d)if(d[v]._map){s=d[v];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=be(this.options.offset),d=this._getAnchor();this._zoomAnimated?Zt(this._container,t.add(d)):s=s.add(t).add(d);var v=this._containerBottom=-s.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(t,s,d,v){var S=s;return S instanceof t||(S=new t(v).setContent(s)),d&&S.setLatLng(d),S}}),_n.include({_initOverlay:function(t,s,d,v){var S=d;return S instanceof t?(ae(S,v),S._source=this):(S=s&&!v?s:new t(v,this),S.setContent(d)),S}});var qi=vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,vi.prototype.openOn.call(this,t)},onAdd:function(t){vi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ni||this._source.on("preclick",fi))},onRemove:function(t){vi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ni||this._source.off("preclick",fi))},getEvents:function(){var t=vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=dt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=dt("div",t+"-content-wrapper",s);if(this._contentNode=dt("div",t+"-content",d),ws(s),ro(this._contentNode),ot(s,"contextmenu",fi),this._tipContainer=dt("div",t+"-tip-container",s),this._tip=dt("div",t+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=dt("a",t+"-close-button",s);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',ot(v,"click",function(S){Ht(S),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var d=t.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),s.width=d+1+"px",s.whiteSpace="",s.height="";var v=t.offsetHeight,S=this.options.maxHeight,R="leaflet-popup-scrolled";S&&v>S?(s.height=S+"px",lt(t,R)):It(t,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),d=this._getAnchor();Zt(this._container,s.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(Gi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+s,v=this._containerWidth,S=new Le(this._containerLeft,-d-this._containerBottom);S._add(Ai(this._container));var R=t.layerPointToContainerPoint(S),q=be(this.options.autoPanPadding),he=be(this.options.autoPanPaddingTopLeft||q),ye=be(this.options.autoPanPaddingBottomRight||q),Ee=t.getSize(),Oe=0,nt=0;R.x+v+ye.x>Ee.x&&(Oe=R.x+v-Ee.x+ye.x),R.x-Oe-he.x<0&&(Oe=R.x-he.x),R.y+d+ye.y>Ee.y&&(nt=R.y+d-Ee.y+ye.y),R.y-nt-he.y<0&&(nt=R.y-he.y),(Oe||nt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Oe,nt]))}},_getAnchor:function(){return be(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Yr=function(t,s){return new qi(t,s)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(t,s,d){return this._initOverlay(qi,t,s,d).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),_n.include({bindPopup:function(t,s){return this._popup=this._initOverlay(qi,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Yn(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Ni)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Xr=vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){vi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){vi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=vi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=dt("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,d,v=this._map,S=this._container,R=v.latLngToContainerPoint(v.getCenter()),q=v.layerPointToContainerPoint(t),he=this.options.direction,ye=S.offsetWidth,Ee=S.offsetHeight,Oe=be(this.options.offset),nt=this._getAnchor();he==="top"?(s=ye/2,d=Ee):he==="bottom"?(s=ye/2,d=0):he==="center"?(s=ye/2,d=Ee/2):he==="right"?(s=0,d=Ee/2):he==="left"?(s=ye,d=Ee/2):q.x<R.x?(he="right",s=0,d=Ee/2):(he="left",s=ye+(Oe.x+nt.x)*2,d=Ee/2),t=t.subtract(be(s,d,!0)).add(Oe).add(nt),It(S,"leaflet-tooltip-right"),It(S,"leaflet-tooltip-left"),It(S,"leaflet-tooltip-top"),It(S,"leaflet-tooltip-bottom"),lt(S,"leaflet-tooltip-"+he),Zt(S,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&En(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return be(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Bs=function(t,s){return new Xr(t,s)};vt.include({openTooltip:function(t,s,d){return this._initOverlay(Xr,t,s,d).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),_n.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xr,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[s](d),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(ot(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ot(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,d,v;this._tooltip.options.sticky&&t.originalEvent&&(d=this._map.mouseEventToContainerPoint(t.originalEvent),v=this._map.containerPointToLayerPoint(d),s=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(s)}});var go=gr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),d=this.options;if(d.html instanceof Element?(gs(s),s.appendChild(d.html)):s.innerHTML=d.html!==!1?d.html:"",d.bgPos){var v=be(d.bgPos);s.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function el(t){return new go(t)}gr.Default=Wr;var Ki=_n.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){ae(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ot(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(zr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Le?t:new Le(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,d=-t(-1/0,1/0),v=0,S=s.length,R;v<S;v++)R=s[v].style.zIndex,s[v]!==this._container&&R&&(d=t(d,+R));isFinite(d)&&(this.options.zIndex=d+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){En(this._container,this.options.opacity);var t=+new Date,s=!1,d=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var R=Math.min(1,(t-S.loaded)/200);En(S.el,R),R<1?s=!0:(S.active?d=!0:this._onOpaqueTile(S),S.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),s&&(St(this._fadeFrame),this._fadeFrame=at(this._updateOpacity,this))}},_onOpaqueTile:N,_initContainer:function(){this._container||(this._container=dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===t?(this._levels[d].el.style.zIndex=s-Math.abs(t-d),this._onUpdateLevel(d)):(Ot(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var v=this._levels[t],S=this._map;return v||(v=this._levels[t]={},v.el=dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=s,v.origin=S.project(S.unproject(S.getPixelOrigin()),t).round(),v.zoom=t,this._setZoomTransform(v,S.getCenter(),S.getZoom()),N(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:N,_onRemoveLevel:N,_onCreateLevel:N,_pruneTiles:function(){if(this._map){var t,s,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var v=s.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ot(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,d,v){var S=Math.floor(t/2),R=Math.floor(s/2),q=d-1,he=new Le(+S,+R);he.z=+q;var ye=this._tileCoordsToKey(he),Ee=this._tiles[ye];return Ee&&Ee.active?(Ee.retain=!0,!0):(Ee&&Ee.loaded&&(Ee.retain=!0),q>v?this._retainParent(S,R,q,v):!1)},_retainChildren:function(t,s,d,v){for(var S=2*t;S<2*t+2;S++)for(var R=2*s;R<2*s+2;R++){var q=new Le(S,R);q.z=d+1;var he=this._tileCoordsToKey(q),ye=this._tiles[he];if(ye&&ye.active){ye.retain=!0;continue}else ye&&ye.loaded&&(ye.retain=!0);d+1<v&&this._retainChildren(S,R,d+1,v)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,d,v){var S=Math.round(s);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var R=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||R)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(t),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var d in this._levels)this._setZoomTransform(this._levels[d],t,s)},_setZoomTransform:function(t,s,d){var v=this._map.getZoomScale(d,t.zoom),S=t.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(s,d)).round();Ze.any3d?Kn(t.el,S,v):Zt(t.el,S)},_resetGrid:function(){var t=this._map,s=t.options.crs,d=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],v).x/d.x),Math.ceil(t.project([0,s.wrapLng[1]],v).x/d.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],v).y/d.x),Math.ceil(t.project([s.wrapLat[1],0],v).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,d=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),v=s.getZoomScale(d,this._tileZoom),S=s.project(t,this._tileZoom).floor(),R=s.getSize().divideBy(v*2);return new te(S.subtract(R),S.add(R))},_update:function(t){var s=this._map;if(s){var d=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(t),S=this._pxBoundsToTileRange(v),R=S.getCenter(),q=[],he=this.options.keepBuffer,ye=new te(S.getBottomLeft().subtract([he,-he]),S.getTopRight().add([he,-he]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ee in this._tiles){var Oe=this._tiles[Ee].coords;(Oe.z!==this._tileZoom||!ye.contains(new Le(Oe.x,Oe.y)))&&(this._tiles[Ee].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(t,d);return}for(var nt=S.min.y;nt<=S.max.y;nt++)for(var ft=S.min.x;ft<=S.max.x;ft++){var an=new Le(ft,nt);if(an.z=this._tileZoom,!!this._isValidTile(an)){var Xt=this._tiles[this._tileCoordsToKey(an)];Xt?Xt.current=!0:q.push(an)}}if(q.sort(function(zt,Li){return zt.distanceTo(R)-Li.distanceTo(R)}),q.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(ft=0;ft<q.length;ft++)this._addTile(q[ft],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var d=this._globalTileRange;if(!s.wrapLng&&(t.x<d.min.x||t.x>d.max.x)||!s.wrapLat&&(t.y<d.min.y||t.y>d.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(t);return Ke(this.options.bounds).overlaps(v)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,d=this.getTileSize(),v=t.scaleBy(d),S=v.add(d),R=s.unproject(v,t.z),q=s.unproject(S,t.z);return[R,q]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),d=new et(s[0],s[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),d=new Le(+s[0],+s[1]);return d.z=+s[2],d},_removeTile:function(t){var s=this._tiles[t];s&&(Ot(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){lt(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=N,t.onmousemove=N,Ze.ielt9&&this.options.opacity<1&&En(t,this.options.opacity)},_addTile:function(t,s){var d=this._getTilePos(t),v=this._tileCoordsToKey(t),S=this.createTile(this._wrapCoords(t),y(this._tileReady,this,t));this._initTile(S),this.createTile.length<2&&at(y(this._tileReady,this,t,null,S)),Zt(S,d),this._tiles[v]={el:S,coords:t,current:!0},s.appendChild(S),this.fire("tileloadstart",{tile:S,coords:t})},_tileReady:function(t,s,d){s&&this.fire("tileerror",{error:s,tile:d,coords:t});var v=this._tileCoordsToKey(t);d=this._tiles[v],d&&(d.loaded=+new Date,this._map._fadeAnimated?(En(d.el,0),St(this._fadeFrame),this._fadeFrame=at(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),s||(lt(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?at(this._pruneTiles,this):setTimeout(y(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new Le(this._wrapX?I(t.x,this._wrapX):t.x,this._wrapY?I(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new te(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Qr(t){return new Ki(t)}var Ji=Ki.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=ae(this,s),s.detectRetina&&Ze.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var d=document.createElement("img");return ot(d,"load",y(this._tileOnLoad,this,s,d)),ot(d,"error",y(this._tileOnError,this,s,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(t),d},getTileUrl:function(t){var s={r:Ze.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=d),s["-y"]=d}return Te(this._url,f(s,this.options))},_tileOnLoad:function(t,s){Ze.ielt9?setTimeout(y(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,d){var v=this.options.errorTileUrl;v&&s.getAttribute("src")!==v&&(s.src=v),t(d,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,d=this.options.zoomReverse,v=this.options.zoomOffset;return d&&(t=s-t),t+v},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=N,s.onerror=N,!s.complete)){s.src=Ye;var d=this._tiles[t].coords;Ot(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:d})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",Ye),Ki.prototype._removeTile.call(this,t)},_tileReady:function(t,s,d){if(!(!this._map||d&&d.getAttribute("src")===Ye))return Ki.prototype._tileReady.call(this,t,s,d)}});function _o(t,s){return new Ji(t,s)}var _r=Ji.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var d=f({},this.defaultWmsParams);for(var v in s)v in this.options||(d[v]=s[v]);s=ae(this,s);var S=s.detectRetina&&Ze.retina?2:1,R=this.getTileSize();d.width=R.x*S,d.height=R.y*S,this.wmsParams=d},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Ji.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),d=this._crs,v=ke(d.project(s[0]),d.project(s[1])),S=v.min,R=v.max,q=(this._wmsVersion>=1.3&&this._crs===ca?[S.y,S.x,R.y,R.x]:[S.x,S.y,R.x,R.y]).join(","),he=Ji.prototype.getTileUrl.call(this,t);return he+ie(this.wmsParams,he,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+q},setParams:function(t,s){return f(this.wmsParams,t),s||this.redraw(),this}});function tl(t,s){return new _r(t,s)}Ji.WMS=_r,_o.wms=tl;var wi=_n.extend({options:{padding:.1},initialize:function(t){ae(this,t),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var d=this._map.getZoomScale(s,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,s),R=v.multiplyBy(-d).add(S).subtract(this._map._getNewPixelOrigin(t,s));Ze.any3d?Kn(this._container,R,d):Zt(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),d=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new te(d,d.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yo=wi.extend({options:{tolerance:0},getEvents:function(){var t=wi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ot(t,"mousemove",this._onMouseMove,this),ot(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ot(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){St(this._redrawRequest),delete this._ctx,Ot(this._container),Rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wi.prototype._update.call(this);var t=this._bounds,s=this._container,d=t.getSize(),v=Ze.retina?2:1;Zt(s,t.min),s.width=v*d.x,s.height=v*d.y,s.style.width=d.x+"px",s.style.height=d.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[E(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,d=s.next,v=s.prev;d?d.prev=v:this._drawLast=v,v?v.next=d:this._drawFirst=d,delete t._order,delete this._layers[E(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),d=[],v,S;for(S=0;S<s.length;S++){if(v=Number(s[S]),isNaN(v))return;d.push(v)}t.options._dashArray=d}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||at(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new te,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var d=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)t=v.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var d,v,S,R,q=t._parts,he=q.length,ye=this._ctx;if(he){for(ye.beginPath(),d=0;d<he;d++){for(v=0,S=q[d].length;v<S;v++)R=q[d][v],ye[v?"lineTo":"moveTo"](R.x,R.y);s&&ye.closePath()}this._fillStroke(ye,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,d=this._ctx,v=Math.max(Math.round(t._radius),1),S=(Math.max(Math.round(t._radiusY),1)||v)/v;S!==1&&(d.save(),d.scale(1,S)),d.beginPath(),d.arc(s.x,s.y/S,v,0,Math.PI*2,!1),S!==1&&d.restore(),this._fillStroke(d,t)}},_fillStroke:function(t,s){var d=s.options;d.fill&&(t.globalAlpha=d.fillOpacity,t.fillStyle=d.fillColor||d.color,t.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=d.opacity,t.lineWidth=d.weight,t.strokeStyle=d.color,t.lineCap=d.lineCap,t.lineJoin=d.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),d,v,S=this._drawFirst;S;S=S.next)d=S.layer,d.options.interactive&&d._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(d))&&(v=d);this._fireEvent(v?[v]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(It(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var d,v,S=this._drawFirst;S;S=S.next)d=S.layer,d.options.interactive&&d._containsPoint(s)&&(v=d);v!==this._hoveredLayer&&(this._handleMouseOut(t),v&&(lt(this._container,"leaflet-interactive"),this._fireEvent([v],t,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(y(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,d){this._map._fireDOMEvent(s,d||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var d=s.next,v=s.prev;if(d)d.prev=v;else return;v?v.next=d:d&&(this._drawFirst=d),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var d=s.next,v=s.prev;if(v)v.next=d;else return;d?d.prev=v:v&&(this._drawLast=v),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function Ts(t){return Ze.canvas?new yo(t):null}var es=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),nl={_initContainer:function(){this._container=dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=es("shape");lt(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=es("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[E(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Ot(s),t.removeInteractiveTarget(s),delete this._layers[E(t)]},_updateStyle:function(t){var s=t._stroke,d=t._fill,v=t.options,S=t._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(s||(s=t._stroke=es("stroke")),S.appendChild(s),s.weight=v.weight+"px",s.color=v.color,s.opacity=v.opacity,v.dashArray?s.dashStyle=xe(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=v.lineCap.replace("butt","flat"),s.joinstyle=v.lineJoin):s&&(S.removeChild(s),t._stroke=null),v.fill?(d||(d=t._fill=es("fill")),S.appendChild(d),d.color=v.fillColor||v.color,d.opacity=v.fillOpacity):d&&(S.removeChild(d),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),d=Math.round(t._radius),v=Math.round(t._radiusY||d);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+d+","+v+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){zr(t._container)},_bringToBack:function(t){ci(t._container)}},In=Ze.vml?es:No,Yt=wi.extend({_initContainer:function(){this._container=In("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=In("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),Rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wi.prototype._update.call(this);var t=this._bounds,s=t.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,d.setAttribute("width",s.x),d.setAttribute("height",s.y)),Zt(d,t.min),d.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=In("path");t.options.className&&lt(s,t.options.className),t.options.interactive&&lt(s,"leaflet-interactive"),this._updateStyle(t),this._layers[E(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ot(t._path),t.removeInteractiveTarget(t._path),delete this._layers[E(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,d=t.options;s&&(d.stroke?(s.setAttribute("stroke",d.color),s.setAttribute("stroke-opacity",d.opacity),s.setAttribute("stroke-width",d.weight),s.setAttribute("stroke-linecap",d.lineCap),s.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?s.setAttribute("stroke-dasharray",d.dashArray):s.removeAttribute("stroke-dasharray"),d.dashOffset?s.setAttribute("stroke-dashoffset",d.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),d.fill?(s.setAttribute("fill",d.fillColor||d.color),s.setAttribute("fill-opacity",d.fillOpacity),s.setAttribute("fill-rule",d.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,Fo(t._parts,s))},_updateCircle:function(t){var s=t._point,d=Math.max(Math.round(t._radius),1),v=Math.max(Math.round(t._radiusY),1)||d,S="a"+d+","+v+" 0 1,0 ",R=t._empty()?"M0 0":"M"+(s.x-d)+","+s.y+S+d*2+",0 "+S+-d*2+",0 ";this._setPath(t,R)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){zr(t._path)},_bringToBack:function(t){ci(t._path)}});Ze.vml&&Yt.include(nl);function sn(t){return Ze.svg||Ze.vml?new Yt(t):null}vt.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&Ts(t)||sn(t)}});var _a=ti.extend({initialize:function(t,s){ti.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Ke(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ni(t,s){return new _a(t,s)}Yt.create=In,Yt.pointsToPath=Fo,_i.geometryToLayer=qr,_i.coordsToLatLng=Ps,_i.coordsToLatLngs=Ss,_i.latLngToCoords=Ms,_i.latLngsToCoords=co,_i.getFeature=Kr,_i.asFeature=fo,vt.mergeOptions({boxZoom:!0});var it=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ot(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Lt(),no(),this._startPoint=this._map.mouseEventToContainerPoint(t),ot(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=dt("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new te(this._point,this._startPoint),d=s.getSize();Zt(this._box,s.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Ot(this._box),It(this._container,"leaflet-crosshair")),Gr(),io(),Rt(document,{contextmenu:Yn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(y(this._resetState,this),0);var s=new et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",it),vt.mergeOptions({doubleClickZoom:!0});var vo=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,d=s.getZoom(),v=s.options.zoomDelta,S=t.originalEvent.shiftKey?d-v:d+v;s.options.doubleClickZoom==="center"?s.setZoom(S):s.setZoomAround(t.containerPoint,S)}});vt.addInitHook("addHandler","doubleClickZoom",vo),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var As=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Xn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){It(this._map._container,"leaflet-grab"),It(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=Ke(this._map.options.maxBounds);this._offsetLimit=ke(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),d=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-s+d)%t+s-d,R=(v+s+d)%t-s-d,q=Math.abs(S+d)<Math.abs(R+d)?S:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=q},_onDragEnd:function(t){var s=this._map,d=s.options,v=!d.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),v)s.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,q=d.easeLinearity,he=S.multiplyBy(q/R),ye=he.distanceTo([0,0]),Ee=Math.min(d.inertiaMaxSpeed,ye),Oe=he.multiplyBy(Ee/ye),nt=Ee/(d.inertiaDeceleration*q),ft=Oe.multiplyBy(-nt/2).round();!ft.x&&!ft.y?s.fire("moveend"):(ft=s._limitOffset(ft,s.options.maxBounds),at(function(){s.panBy(ft,{duration:nt,easeLinearity:q,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",As),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xi=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ot(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,d=t.scrollTop||s.scrollTop,v=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(v,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},d=this.keyCodes,v,S;for(v=0,S=d.left.length;v<S;v++)s[d.left[v]]=[-1*t,0];for(v=0,S=d.right.length;v<S;v++)s[d.right[v]]=[t,0];for(v=0,S=d.down.length;v<S;v++)s[d.down[v]]=[0,t];for(v=0,S=d.up.length;v<S;v++)s[d.up[v]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},d=this.keyCodes,v,S;for(v=0,S=d.zoomIn.length;v<S;v++)s[d.zoomIn[v]]=t;for(v=0,S=d.zoomOut.length;v<S;v++)s[d.zoomOut[v]]=-t},_addHooks:function(){ot(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,d=this._map,v;if(s in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(v=this._panKeys[s],t.shiftKey&&(v=be(v).multiplyBy(3)),d.options.maxBounds&&(v=d._limitOffset(be(v),d.options.maxBounds)),d.options.worldCopyJump){var S=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(v)));d.panTo(S)}else d.panBy(v)}else if(s in this._zoomKeys)d.setZoom(d.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Yn(t)}}});vt.addInitHook("addHandler","keyboard",xi),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ht=nn.extend({addHooks:function(){ot(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=Za(t),d=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var v=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(y(this._performZoom,this),v),Yn(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),d=this._map.options.zoomSnap||0;t._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,R=d?Math.ceil(S/d)*d:S,q=t._limitZoom(s+(this._delta>0?R:-R))-s;this._delta=0,this._startTime=null,q&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+q):t.setZoomAround(this._lastMousePos,s+q))}});vt.addInitHook("addHandler","scrollWheelZoom",ht);var wo=600;vt.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var dn=nn.extend({addHooks:function(){ot(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new Le(s.clientX,s.clientY),this._holdTimeout=setTimeout(y(function(){this._cancel(),this._isTapValid()&&(ot(document,"touchend",Ht),ot(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),wo),ot(document,"touchend touchcancel contextmenu",this._cancel,this),ot(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Rt(document,"touchend",Ht),Rt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new Le(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var d=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});d._simulated=!0,s.target.dispatchEvent(d)}});vt.addInitHook("addHandler","tapHold",dn),vt.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var on=nn.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),ot(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){It(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var d=s.mouseEventToContainerPoint(t.touches[0]),v=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(d.add(v)._divideBy(2))),this._startDist=d.distanceTo(v),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),ot(document,"touchmove",this._onTouchMove,this),ot(document,"touchend touchcancel",this._onTouchEnd,this),Ht(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,d=s.mouseEventToContainerPoint(t.touches[0]),v=s.mouseEventToContainerPoint(t.touches[1]),S=d.distanceTo(v)/this._startDist;if(this._zoom=s.getScaleZoom(S,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&S<1||this._zoom>s.getMaxZoom()&&S>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var R=d._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&R.x===0&&R.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),St(this._animRequest);var q=y(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=at(q,this,!0),Ht(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,St(this._animRequest),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",on),vt.BoxZoom=it,vt.DoubleClickZoom=vo,vt.Drag=As,vt.Keyboard=xi,vt.ScrollWheelZoom=ht,vt.TapHold=dn,vt.TouchZoom=on,a.Bounds=te,a.Browser=Ze,a.CRS=wt,a.Canvas=yo,a.Circle=uo,a.CircleMarker=gi,a.Class=Wt,a.Control=ut,a.DivIcon=go,a.DivOverlay=vi,a.DomEvent=dr,a.DomUtil=vs,a.Draggable=Xn,a.Evented=Dt,a.FeatureGroup=Qn,a.GeoJSON=_i,a.GridLayer=Ki,a.Handler=nn,a.Icon=gr,a.ImageOverlay=yi,a.LatLng=He,a.LatLngBounds=et,a.Layer=_n,a.LayerGroup=Wi,a.LineUtil=ks,a.Map=vt,a.Marker=ji,a.Mixin=sa,a.Path=Ni,a.Point=Le,a.PolyUtil=Al,a.Polygon=ti,a.Polyline=On,a.Popup=qi,a.PosAnimation=so,a.Projection=mi,a.Rectangle=_a,a.Renderer=wi,a.SVG=Yt,a.SVGOverlay=ma,a.TileLayer=Ji,a.Tooltip=Xr,a.Transformation=Br,a.Util=Rn,a.VideoOverlay=Jr,a.bind=y,a.bounds=ke,a.canvas=Ts,a.circle=ei,a.circleMarker=fa,a.control=pi,a.divIcon=el,a.extend=f,a.featureGroup=Ya,a.geoJSON=mo,a.geoJson=Gn,a.gridLayer=Qr,a.icon=Xa,a.imageOverlay=Qa,a.latLng=Fe,a.latLngBounds=Ke,a.layerGroup=Cs,a.map=Oi,a.marker=Ol,a.point=be,a.polygon=Es,a.polyline=Il,a.popup=Yr,a.rectangle=ni,a.setOptions=ae,a.stamp=E,a.svg=sn,a.svgOverlay=ga,a.tileLayer=_o,a.tooltip=Bs,a.transformation=Tr,a.version=c,a.videoOverlay=pa;var Yi=window.L;a.noConflict=function(){return window.L=Yi,this},window.L=a}))})(su,su.exports)),su.exports}var Ra=$p();const Io=lh(Ra);function $c(m,o,a){return Object.freeze({instance:m,context:o,container:a})}function Gc(m,o){return o==null?function(c,f){const _=ne.useRef();return _.current||(_.current=m(c,f)),_}:function(c,f){const _=ne.useRef();_.current||(_.current=m(c,f));const y=ne.useRef(c),{instance:b}=_.current;return ne.useEffect(function(){y.current!==c&&(o(b,c,y.current),y.current=c)},[b,c,f]),_}}function Cy(m,o){ne.useEffect(function(){return(o.layerContainer??o.map).addLayer(m.instance),function(){o.layerContainer?.removeLayer(m.instance),o.map.removeLayer(m.instance)}},[o,m])}function by(m){return function(a){const c=Uc(),f=m(Up(a,c),c);return yy(c.map,a.attribution),Ly(f.current,a.eventHandlers),Cy(f.current,c),f}}function Gp(m){function o(f,_){return $c(m(f),_)}const a=Gc(o),c=zp(a);return Fp(c)}function Ey(m,o){const a=Gc(m,o),c=by(a);return Fp(c)}function Py(m,o,a){const{opacity:c,zIndex:f}=o;c!=null&&c!==a.opacity&&m.setOpacity(c),f!=null&&f!==a.zIndex&&m.setZIndex(f)}const Sy=Gc(function({children:o,...a},c){const f=new Ra.Control.Layers(void 0,void 0,a);return $c(f,jp(c,{layersControl:f}))},function(o,a,c){a.collapsed!==c.collapsed&&(a.collapsed===!0?o.collapse():o.expand())}),My=zp(Sy),hu=xy(My);function Vp(m){return function(a){const c=Uc(),f=ne.useRef(a),[_,y]=ne.useState(null),{layersControl:b,map:E}=c,M=ne.useCallback(W=>{b!=null&&(f.current.checked&&E.addLayer(W),m(b,W,f.current.name),y(W))},[b,E]),I=ne.useCallback(W=>{b?.removeLayer(W),y(null)},[b]),N=ne.useMemo(()=>jp(c,{layerContainer:{addLayer:M,removeLayer:I}}),[c,M,I]);return ne.useEffect(()=>{_!==null&&f.current!==a&&(a.checked===!0&&(f.current.checked==null||f.current.checked===!1)?E.addLayer(_):f.current.checked===!0&&(a.checked==null||a.checked===!1)&&E.removeLayer(_),f.current=a)}),a.children?cu.createElement(zc,{value:N},a.children):null}}hu.BaseLayer=Vp(function(o,a,c){o.addBaseLayer(a,c)});hu.Overlay=Vp(function(o,a,c){o.addOverlay(a,c)});function Pc(){return Pc=Object.assign||function(m){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(m[c]=a[c])}return m},Pc.apply(this,arguments)}function By({bounds:m,boundsOptions:o,center:a,children:c,className:f,id:_,placeholder:y,style:b,whenReady:E,zoom:M,...I},N){const[W]=ne.useState({className:f,id:_,style:b}),[Y,le]=ne.useState(null);ne.useImperativeHandle(N,()=>Y?.map??null,[Y]);const ae=ne.useCallback(we=>{if(we!==null&&Y===null){const Te=new Ra.Map(we,I);a!=null&&M!=null?Te.setView(a,M):m!=null&&Te.fitBounds(m,o),E!=null&&Te.whenReady(E),le(wy(Te))}},[]);ne.useEffect(()=>()=>{Y?.map.remove()},[Y]);const ie=Y?cu.createElement(zc,{value:Y},c):y??null;return cu.createElement("div",Pc({},W,{ref:ae}),ie)}const Ty=ne.forwardRef(By),Ay=Gp(function(o){return new Ra.Control.Scale(o)}),Kf=Ey(function({url:o,...a},c){const f=new Ra.TileLayer(o,Up(a,c));return $c(f,c)},function(o,a,c){Py(o,a,c);const{url:f}=a;f!=null&&f!==c.url&&o.setUrl(f)}),Dy=Gp(function(o){return new Ra.Control.Zoom(o)});var Jf={},Yf;function Ry(){return Yf||(Yf=1,(()=>{var m=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,f=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,y=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),b=(i,r,u,h)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of c(r))!_.call(i,g)&&g!==u&&o(i,g,{get:()=>r[g],enumerable:!(h=a(r,g))||h.enumerable});return i},E=(i,r,u)=>(u=i!=null?m(f(i)):{},b(r||!i||!i.__esModule?o(u,"default",{value:i,enumerable:!0}):u,i)),M=y((i,r)=>{function u(){this.__data__=[],this.size=0}r.exports=u}),I=y((i,r)=>{function u(h,g){return h===g||h!==h&&g!==g}r.exports=u}),N=y((i,r)=>{var u=I();function h(g,x){for(var C=g.length;C--;)if(u(g[C][0],x))return C;return-1}r.exports=h}),W=y((i,r)=>{var u=N(),h=Array.prototype,g=h.splice;function x(C){var P=this.__data__,T=u(P,C);if(T<0)return!1;var D=P.length-1;return T==D?P.pop():g.call(P,T,1),--this.size,!0}r.exports=x}),Y=y((i,r)=>{var u=N();function h(g){var x=this.__data__,C=u(x,g);return C<0?void 0:x[C][1]}r.exports=h}),le=y((i,r)=>{var u=N();function h(g){return u(this.__data__,g)>-1}r.exports=h}),ae=y((i,r)=>{var u=N();function h(g,x){var C=this.__data__,P=u(C,g);return P<0?(++this.size,C.push([g,x])):C[P][1]=x,this}r.exports=h}),ie=y((i,r)=>{var u=M(),h=W(),g=Y(),x=le(),C=ae();function P(T){var D=-1,H=T==null?0:T.length;for(this.clear();++D<H;){var $=T[D];this.set($[0],$[1])}}P.prototype.clear=u,P.prototype.delete=h,P.prototype.get=g,P.prototype.has=x,P.prototype.set=C,r.exports=P}),we=y((i,r)=>{var u=ie();function h(){this.__data__=new u,this.size=0}r.exports=h}),Te=y((i,r)=>{function u(h){var g=this.__data__,x=g.delete(h);return this.size=g.size,x}r.exports=u}),xe=y((i,r)=>{function u(h){return this.__data__.get(h)}r.exports=u}),Re=y((i,r)=>{function u(h){return this.__data__.has(h)}r.exports=u}),Ye=y((i,r)=>{var u=typeof Zu=="object"&&Zu&&Zu.Object===Object&&Zu;r.exports=u}),We=y((i,r)=>{var u=Ye(),h=typeof self=="object"&&self&&self.Object===Object&&self,g=u||h||Function("return this")();r.exports=g}),Xe=y((i,r)=>{var u=We(),h=u.Symbol;r.exports=h}),Ue=y((i,r)=>{var u=Xe(),h=Object.prototype,g=h.hasOwnProperty,x=h.toString,C=u?u.toStringTag:void 0;function P(T){var D=g.call(T,C),H=T[C];try{T[C]=void 0;var $=!0}catch{}var fe=x.call(T);return $&&(D?T[C]=H:delete T[C]),fe}r.exports=P}),Qe=y((i,r)=>{var u=Object.prototype,h=u.toString;function g(x){return h.call(x)}r.exports=g}),pt=y((i,r)=>{var u=Xe(),h=Ue(),g=Qe(),x="[object Null]",C="[object Undefined]",P=u?u.toStringTag:void 0;function T(D){return D==null?D===void 0?C:x:P&&P in Object(D)?h(D):g(D)}r.exports=T}),at=y((i,r)=>{function u(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")}r.exports=u}),St=y((i,r)=>{var u=pt(),h=at(),g="[object AsyncFunction]",x="[object Function]",C="[object GeneratorFunction]",P="[object Proxy]";function T(D){if(!h(D))return!1;var H=u(D);return H==x||H==C||H==g||H==P}r.exports=T}),Rn=y((i,r)=>{var u=We(),h=u["__core-js_shared__"];r.exports=h}),Wt=y((i,r)=>{var u=Rn(),h=(function(){var x=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""})();function g(x){return!!h&&h in x}r.exports=g}),hi=y((i,r)=>{var u=Function.prototype,h=u.toString;function g(x){if(x!=null){try{return h.call(x)}catch{}try{return x+""}catch{}}return""}r.exports=g}),At=y((i,r)=>{var u=St(),h=Wt(),g=at(),x=hi(),C=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,T=Function.prototype,D=Object.prototype,H=T.toString,$=D.hasOwnProperty,fe=RegExp("^"+H.call($).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function me(Pe){if(!g(Pe)||h(Pe))return!1;var De=u(Pe)?fe:P;return De.test(x(Pe))}r.exports=me}),Dt=y((i,r)=>{function u(h,g){return h?.[g]}r.exports=u}),Le=y((i,r)=>{var u=At(),h=Dt();function g(x,C){var P=h(x,C);return u(P)?P:void 0}r.exports=g}),tt=y((i,r)=>{var u=Le(),h=We(),g=u(h,"Map");r.exports=g}),be=y((i,r)=>{var u=Le(),h=u(Object,"create");r.exports=h}),te=y((i,r)=>{var u=be();function h(){this.__data__=u?u(null):{},this.size=0}r.exports=h}),ke=y((i,r)=>{function u(h){var g=this.has(h)&&delete this.__data__[h];return this.size-=g?1:0,g}r.exports=u}),et=y((i,r)=>{var u=be(),h="__lodash_hash_undefined__",g=Object.prototype,x=g.hasOwnProperty;function C(P){var T=this.__data__;if(u){var D=T[P];return D===h?void 0:D}return x.call(T,P)?T[P]:void 0}r.exports=C}),Ke=y((i,r)=>{var u=be(),h=Object.prototype,g=h.hasOwnProperty;function x(C){var P=this.__data__;return u?P[C]!==void 0:g.call(P,C)}r.exports=x}),He=y((i,r)=>{var u=be(),h="__lodash_hash_undefined__";function g(x,C){var P=this.__data__;return this.size+=this.has(x)?0:1,P[x]=u&&C===void 0?h:C,this}r.exports=g}),Fe=y((i,r)=>{var u=te(),h=ke(),g=et(),x=Ke(),C=He();function P(T){var D=-1,H=T==null?0:T.length;for(this.clear();++D<H;){var $=T[D];this.set($[0],$[1])}}P.prototype.clear=u,P.prototype.delete=h,P.prototype.get=g,P.prototype.has=x,P.prototype.set=C,r.exports=P}),wt=y((i,r)=>{var u=Fe(),h=ie(),g=tt();function x(){this.size=0,this.__data__={hash:new u,map:new(g||h),string:new u}}r.exports=x}),yt=y((i,r)=>{function u(h){var g=typeof h;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?h!=="__proto__":h===null}r.exports=u}),Mt=y((i,r)=>{var u=yt();function h(g,x){var C=g.__data__;return u(x)?C[typeof x=="string"?"string":"hash"]:C.map}r.exports=h}),mn=y((i,r)=>{var u=Mt();function h(g){var x=u(this,g).delete(g);return this.size-=x?1:0,x}r.exports=h}),Br=y((i,r)=>{var u=Mt();function h(g){return u(this,g).get(g)}r.exports=h}),Tr=y((i,r)=>{var u=Mt();function h(g){return u(this,g).has(g)}r.exports=h}),Ar=y((i,r)=>{var u=Mt();function h(g,x){var C=u(this,g),P=C.size;return C.set(g,x),this.size+=C.size==P?0:1,this}r.exports=h}),Vs=y((i,r)=>{var u=wt(),h=mn(),g=Br(),x=Tr(),C=Ar();function P(T){var D=-1,H=T==null?0:T.length;for(this.clear();++D<H;){var $=T[D];this.set($[0],$[1])}}P.prototype.clear=u,P.prototype.delete=h,P.prototype.get=g,P.prototype.has=x,P.prototype.set=C,r.exports=P}),No=y((i,r)=>{var u=ie(),h=tt(),g=Vs(),x=200;function C(P,T){var D=this.__data__;if(D instanceof u){var H=D.__data__;if(!h||H.length<x-1)return H.push([P,T]),this.size=++D.size,this;D=this.__data__=new g(H)}return D.set(P,T),this.size=D.size,this}r.exports=C}),Fo=y((i,r)=>{var u=ie(),h=we(),g=Te(),x=xe(),C=Re(),P=No();function T(D){var H=this.__data__=new u(D);this.size=H.size}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=x,T.prototype.has=C,T.prototype.set=P,r.exports=T}),Dr=y((i,r)=>{var u=Le(),h=(function(){try{var g=u(Object,"defineProperty");return g({},"",{}),g}catch{}})();r.exports=h}),sr=y((i,r)=>{var u=Dr();function h(g,x,C){x=="__proto__"&&u?u(g,x,{configurable:!0,enumerable:!0,value:C,writable:!0}):g[x]=C}r.exports=h}),Hs=y((i,r)=>{var u=sr(),h=I();function g(x,C,P){(P!==void 0&&!h(x[C],P)||P===void 0&&!(C in x))&&u(x,C,P)}r.exports=g}),Rr=y((i,r)=>{function u(h){return function(g,x,C){for(var P=-1,T=Object(g),D=C(g),H=D.length;H--;){var $=D[h?H:++P];if(x(T[$],$,T)===!1)break}return g}}r.exports=u}),Ui=y((i,r)=>{var u=Rr(),h=u();r.exports=h}),Zs=y((i,r)=>{var u=We(),h=typeof i=="object"&&i&&!i.nodeType&&i,g=h&&typeof r=="object"&&r&&!r.nodeType&&r,x=g&&g.exports===h,C=x?u.Buffer:void 0,P=C?C.allocUnsafe:void 0;function T(D,H){if(H)return D.slice();var $=D.length,fe=P?P($):new D.constructor($);return D.copy(fe),fe}r.exports=T}),zo=y((i,r)=>{var u=We(),h=u.Uint8Array;r.exports=h}),Oa=y((i,r)=>{var u=zo();function h(g){var x=new g.constructor(g.byteLength);return new u(x).set(new u(g)),x}r.exports=h}),Ia=y((i,r)=>{var u=Oa();function h(g,x){var C=x?u(g.buffer):g.buffer;return new g.constructor(C,g.byteOffset,g.length)}r.exports=h}),Ws=y((i,r)=>{function u(h,g){var x=-1,C=h.length;for(g||(g=Array(C));++x<C;)g[x]=h[x];return g}r.exports=u}),qs=y((i,r)=>{var u=at(),h=Object.create,g=(function(){function x(){}return function(C){if(!u(C))return{};if(h)return h(C);x.prototype=C;var P=new x;return x.prototype=void 0,P}})();r.exports=g}),us=y((i,r)=>{function u(h,g){return function(x){return h(g(x))}}r.exports=u}),Uo=y((i,r)=>{var u=us(),h=u(Object.getPrototypeOf,Object);r.exports=h}),or=y((i,r)=>{var u=Object.prototype;function h(g){var x=g&&g.constructor,C=typeof x=="function"&&x.prototype||u;return g===C}r.exports=h}),Or=y((i,r)=>{var u=qs(),h=Uo(),g=or();function x(C){return typeof C.constructor=="function"&&!g(C)?u(h(C)):{}}r.exports=x}),Ir=y((i,r)=>{function u(h){return h!=null&&typeof h=="object"}r.exports=u}),$o=y((i,r)=>{var u=pt(),h=Ir(),g="[object Arguments]";function x(C){return h(C)&&u(C)==g}r.exports=x}),hs=y((i,r)=>{var u=$o(),h=Ir(),g=Object.prototype,x=g.hasOwnProperty,C=g.propertyIsEnumerable,P=u((function(){return arguments})())?u:function(T){return h(T)&&x.call(T,"callee")&&!C.call(T,"callee")};r.exports=P}),jr=y((i,r)=>{var u=Array.isArray;r.exports=u}),Ks=y((i,r)=>{var u=9007199254740991;function h(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=u}r.exports=h}),Ti=y((i,r)=>{var u=St(),h=Ks();function g(x){return x!=null&&h(x.length)&&!u(x)}r.exports=g}),Go=y((i,r)=>{var u=Ti(),h=Ir();function g(x){return h(x)&&u(x)}r.exports=g}),Vo=y((i,r)=>{function u(){return!1}r.exports=u}),cs=y((i,r)=>{var u=We(),h=Vo(),g=typeof i=="object"&&i&&!i.nodeType&&i,x=g&&typeof r=="object"&&r&&!r.nodeType&&r,C=x&&x.exports===g,P=C?u.Buffer:void 0,T=P?P.isBuffer:void 0,D=T||h;r.exports=D}),ar=y((i,r)=>{var u=pt(),h=Uo(),g=Ir(),x="[object Object]",C=Function.prototype,P=Object.prototype,T=C.toString,D=P.hasOwnProperty,H=T.call(Object);function $(fe){if(!g(fe)||u(fe)!=x)return!1;var me=h(fe);if(me===null)return!0;var Pe=D.call(me,"constructor")&&me.constructor;return typeof Pe=="function"&&Pe instanceof Pe&&T.call(Pe)==H}r.exports=$}),lr=y((i,r)=>{var u=pt(),h=Ks(),g=Ir(),x="[object Arguments]",C="[object Array]",P="[object Boolean]",T="[object Date]",D="[object Error]",H="[object Function]",$="[object Map]",fe="[object Number]",me="[object Object]",Pe="[object RegExp]",De="[object Set]",Ie="[object String]",mt="[object WeakMap]",G="[object ArrayBuffer]",J="[object DataView]",se="[object Float32Array]",_e="[object Float64Array]",oe="[object Int8Array]",de="[object Int16Array]",B="[object Int32Array]",O="[object Uint8Array]",F="[object Uint8ClampedArray]",j="[object Uint16Array]",z="[object Uint32Array]",U={};U[se]=U[_e]=U[oe]=U[de]=U[B]=U[O]=U[F]=U[j]=U[z]=!0,U[x]=U[C]=U[G]=U[P]=U[J]=U[T]=U[D]=U[H]=U[$]=U[fe]=U[me]=U[Pe]=U[De]=U[Ie]=U[mt]=!1;function X(K){return g(K)&&h(K.length)&&!!U[u(K)]}r.exports=X}),ja=y((i,r)=>{function u(h){return function(g){return h(g)}}r.exports=u}),Na=y((i,r)=>{var u=Ye(),h=typeof i=="object"&&i&&!i.nodeType&&i,g=h&&typeof r=="object"&&r&&!r.nodeType&&r,x=g&&g.exports===h,C=x&&u.process,P=(function(){try{var T=g&&g.require&&g.require("util").types;return T||C&&C.binding&&C.binding("util")}catch{}})();r.exports=P}),Ho=y((i,r)=>{var u=lr(),h=ja(),g=Na(),x=g&&g.isTypedArray,C=x?h(x):u;r.exports=C}),Zo=y((i,r)=>{function u(h,g){if(!(g==="constructor"&&typeof h[g]=="function")&&g!="__proto__")return h[g]}r.exports=u}),Fa=y((i,r)=>{var u=sr(),h=I(),g=Object.prototype,x=g.hasOwnProperty;function C(P,T,D){var H=P[T];(!(x.call(P,T)&&h(H,D))||D===void 0&&!(T in P))&&u(P,T,D)}r.exports=C}),Wo=y((i,r)=>{var u=Fa(),h=sr();function g(x,C,P,T){var D=!P;P||(P={});for(var H=-1,$=C.length;++H<$;){var fe=C[H],me=T?T(P[fe],x[fe],fe,P,x):void 0;me===void 0&&(me=x[fe]),D?h(P,fe,me):u(P,fe,me)}return P}r.exports=g}),Js=y((i,r)=>{function u(h,g){for(var x=-1,C=Array(h);++x<h;)C[x]=g(x);return C}r.exports=u}),Nr=y((i,r)=>{var u=9007199254740991,h=/^(?:0|[1-9]\d*)$/;function g(x,C){var P=typeof x;return C=C??u,!!C&&(P=="number"||P!="symbol"&&h.test(x))&&x>-1&&x%1==0&&x<C}r.exports=g}),qo=y((i,r)=>{var u=Js(),h=hs(),g=jr(),x=cs(),C=Nr(),P=Ho(),T=Object.prototype,D=T.hasOwnProperty;function H($,fe){var me=g($),Pe=!me&&h($),De=!me&&!Pe&&x($),Ie=!me&&!Pe&&!De&&P($),mt=me||Pe||De||Ie,G=mt?u($.length,String):[],J=G.length;for(var se in $)(fe||D.call($,se))&&!(mt&&(se=="length"||De&&(se=="offset"||se=="parent")||Ie&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||C(se,J)))&&G.push(se);return G}r.exports=H}),ds=y((i,r)=>{function u(h){var g=[];if(h!=null)for(var x in Object(h))g.push(x);return g}r.exports=u}),Sl=y((i,r)=>{var u=at(),h=or(),g=ds(),x=Object.prototype,C=x.hasOwnProperty;function P(T){if(!u(T))return g(T);var D=h(T),H=[];for(var $ in T)$=="constructor"&&(D||!C.call(T,$))||H.push($);return H}r.exports=P}),gn=y((i,r)=>{var u=qo(),h=Sl(),g=Ti();function x(C){return g(C)?u(C,!0):h(C)}r.exports=x}),Ze=y((i,r)=>{var u=Wo(),h=gn();function g(x){return u(x,h(x))}r.exports=g}),fs=y((i,r)=>{var u=Hs(),h=Zs(),g=Ia(),x=Ws(),C=Or(),P=hs(),T=jr(),D=Go(),H=cs(),$=St(),fe=at(),me=ar(),Pe=Ho(),De=Zo(),Ie=Ze();function mt(G,J,se,_e,oe,de,B){var O=De(G,se),F=De(J,se),j=B.get(F);if(j){u(G,se,j);return}var z=de?de(O,F,se+"",G,J,B):void 0,U=z===void 0;if(U){var X=T(F),K=!X&&H(F),ee=!X&&!K&&Pe(F);z=F,X||K||ee?T(O)?z=O:D(O)?z=x(O):K?(U=!1,z=h(F,!0)):ee?(U=!1,z=g(F,!0)):z=[]:me(F)||P(F)?(z=O,P(O)?z=Ie(O):(!fe(O)||$(O))&&(z=C(F))):U=!1}U&&(B.set(F,z),oe(z,F,_e,de,B),B.delete(F)),u(G,se,z)}r.exports=mt}),Ys=y((i,r)=>{var u=Fo(),h=Hs(),g=Ui(),x=fs(),C=at(),P=gn(),T=Zo();function D(H,$,fe,me,Pe){H!==$&&g($,function(De,Ie){if(Pe||(Pe=new u),C(De))x(H,$,Ie,fe,D,me,Pe);else{var mt=me?me(T(H,Ie),De,Ie+"",H,$,Pe):void 0;mt===void 0&&(mt=De),h(H,Ie,mt)}},P)}r.exports=D}),Ko=y((i,r)=>{function u(h){return h}r.exports=u}),za=y((i,r)=>{function u(h,g,x){switch(x.length){case 0:return h.call(g);case 1:return h.call(g,x[0]);case 2:return h.call(g,x[0],x[1]);case 3:return h.call(g,x[0],x[1],x[2])}return h.apply(g,x)}r.exports=u}),Jo=y((i,r)=>{var u=za(),h=Math.max;function g(x,C,P){return C=h(C===void 0?x.length-1:C,0),function(){for(var T=arguments,D=-1,H=h(T.length-C,0),$=Array(H);++D<H;)$[D]=T[C+D];D=-1;for(var fe=Array(C+1);++D<C;)fe[D]=T[D];return fe[C]=P($),u(x,this,fe)}}r.exports=g}),$i=y((i,r)=>{function u(h){return function(){return h}}r.exports=u}),ur=y((i,r)=>{var u=$i(),h=Dr(),g=Ko(),x=h?function(C,P){return h(C,"toString",{configurable:!0,enumerable:!1,value:u(P),writable:!0})}:g;r.exports=x}),Yo=y((i,r)=>{var u=800,h=16,g=Date.now;function x(C){var P=0,T=0;return function(){var D=g(),H=h-(D-T);if(T=D,H>0){if(++P>=u)return arguments[0]}else P=0;return C.apply(void 0,arguments)}}r.exports=x}),Ml=y((i,r)=>{var u=ur(),h=Yo(),g=h(u);r.exports=g}),Ua=y((i,r)=>{var u=Ko(),h=Jo(),g=Ml();function x(C,P){return g(h(C,P,u),C+"")}r.exports=x}),$a=y((i,r)=>{var u=I(),h=Ti(),g=Nr(),x=at();function C(P,T,D){if(!x(D))return!1;var H=typeof T;return(H=="number"?h(D)&&g(T,D.length):H=="string"&&T in D)?u(D[T],P):!1}r.exports=C}),Ga=y((i,r)=>{var u=Ua(),h=$a();function g(x){return u(function(C,P){var T=-1,D=P.length,H=D>1?P[D-1]:void 0,$=D>2?P[2]:void 0;for(H=x.length>3&&typeof H=="function"?(D--,H):void 0,$&&h(P[0],P[1],$)&&(H=D<3?void 0:H,D=1),C=Object(C);++T<D;){var fe=P[T];fe&&x(C,fe,T,H)}return C})}r.exports=g}),ps=y((i,r)=>{var u=Ys(),h=Ga(),g=h(function(x,C,P){u(x,C,P)});r.exports=g}),Xo=y((i,r)=>{var u=pt(),h=Ir(),g="[object Symbol]";function x(C){return typeof C=="symbol"||h(C)&&u(C)==g}r.exports=x}),Xs=y((i,r)=>{var u=jr(),h=Xo(),g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;function C(P,T){if(u(P))return!1;var D=typeof P;return D=="number"||D=="symbol"||D=="boolean"||P==null||h(P)?!0:x.test(P)||!g.test(P)||T!=null&&P in Object(T)}r.exports=C}),Vt=y((i,r)=>{var u=Vs(),h="Expected a function";function g(x,C){if(typeof x!="function"||C!=null&&typeof C!="function")throw new TypeError(h);var P=function(){var T=arguments,D=C?C.apply(this,T):T[0],H=P.cache;if(H.has(D))return H.get(D);var $=x.apply(this,T);return P.cache=H.set(D,$)||H,$};return P.cache=new(g.Cache||u),P}g.Cache=u,r.exports=g}),Bl=y((i,r)=>{var u=Vt(),h=500;function g(x){var C=u(x,function(T){return P.size===h&&P.clear(),T}),P=C.cache;return C}r.exports=g}),Qo=y((i,r)=>{var u=Bl(),h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,x=u(function(C){var P=[];return C.charCodeAt(0)===46&&P.push(""),C.replace(h,function(T,D,H,$){P.push(H?$.replace(g,"$1"):D||T)}),P});r.exports=x}),Va=y((i,r)=>{function u(h,g){for(var x=-1,C=h==null?0:h.length,P=Array(C);++x<C;)P[x]=g(h[x],x,h);return P}r.exports=u}),Qs=y((i,r)=>{var u=Xe(),h=Va(),g=jr(),x=Xo(),C=u?u.prototype:void 0,P=C?C.toString:void 0;function T(D){if(typeof D=="string")return D;if(g(D))return h(D,T)+"";if(x(D))return P?P.call(D):"";var H=D+"";return H=="0"&&1/D==-1/0?"-0":H}r.exports=T}),ea=y((i,r)=>{var u=Qs();function h(g){return g==null?"":u(g)}r.exports=h}),Fr=y((i,r)=>{var u=jr(),h=Xs(),g=Qo(),x=ea();function C(P,T){return u(P)?P:h(P,T)?[P]:g(x(P))}r.exports=C}),ms=y((i,r)=>{var u=Xo();function h(g){if(typeof g=="string"||u(g))return g;var x=g+"";return x=="0"&&1/g==-1/0?"-0":x}r.exports=h}),qn=y((i,r)=>{var u=Fr(),h=ms();function g(x,C){C=u(C,x);for(var P=0,T=C.length;x!=null&&P<T;)x=x[h(C[P++])];return P&&P==T?x:void 0}r.exports=g}),Gi=y((i,r)=>{var u=qn();function h(g,x,C){var P=g==null?void 0:u(g,x);return P===void 0?C:P}r.exports=h}),dt=y((i,r)=>{(function(u,h){typeof i=="object"&&typeof r<"u"?r.exports=h():(u=u||self).RBush=h()})(i,function(){function u(G,J,se,_e,oe){(function de(B,O,F,j,z){for(;j>F;){if(j-F>600){var U=j-F+1,X=O-F+1,K=Math.log(U),ee=.5*Math.exp(2*K/3),ue=.5*Math.sqrt(K*ee*(U-ee)/U)*(X-U/2<0?-1:1),ce=Math.max(F,Math.floor(O-X*ee/U+ue)),Ce=Math.min(j,Math.floor(O+(U-X)*ee/U+ue));de(B,O,ce,Ce,z)}var je=B[O],ze=F,$e=j;for(h(B,F,O),z(B[j],je)>0&&h(B,F,j);ze<$e;){for(h(B,ze,$e),ze++,$e--;z(B[ze],je)<0;)ze++;for(;z(B[$e],je)>0;)$e--}z(B[F],je)===0?h(B,F,$e):h(B,++$e,j),$e<=O&&(F=$e+1),O<=$e&&(j=$e-1)}})(G,J,se||0,_e||G.length-1,oe||g)}function h(G,J,se){var _e=G[J];G[J]=G[se],G[se]=_e}function g(G,J){return G<J?-1:G>J?1:0}var x=function(G){G===void 0&&(G=9),this._maxEntries=Math.max(4,G),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function C(G,J,se){if(!se)return J.indexOf(G);for(var _e=0;_e<J.length;_e++)if(se(G,J[_e]))return _e;return-1}function P(G,J){T(G,0,G.children.length,J,G)}function T(G,J,se,_e,oe){oe||(oe=Ie(null)),oe.minX=1/0,oe.minY=1/0,oe.maxX=-1/0,oe.maxY=-1/0;for(var de=J;de<se;de++){var B=G.children[de];D(oe,G.leaf?_e(B):B)}return oe}function D(G,J){return G.minX=Math.min(G.minX,J.minX),G.minY=Math.min(G.minY,J.minY),G.maxX=Math.max(G.maxX,J.maxX),G.maxY=Math.max(G.maxY,J.maxY),G}function H(G,J){return G.minX-J.minX}function $(G,J){return G.minY-J.minY}function fe(G){return(G.maxX-G.minX)*(G.maxY-G.minY)}function me(G){return G.maxX-G.minX+(G.maxY-G.minY)}function Pe(G,J){return G.minX<=J.minX&&G.minY<=J.minY&&J.maxX<=G.maxX&&J.maxY<=G.maxY}function De(G,J){return J.minX<=G.maxX&&J.minY<=G.maxY&&J.maxX>=G.minX&&J.maxY>=G.minY}function Ie(G){return{children:G,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(G,J,se,_e,oe){for(var de=[J,se];de.length;)if(!((se=de.pop())-(J=de.pop())<=_e)){var B=J+Math.ceil((se-J)/_e/2)*_e;u(G,B,J,se,oe),de.push(J,B,B,se)}}return x.prototype.all=function(){return this._all(this.data,[])},x.prototype.search=function(G){var J=this.data,se=[];if(!De(G,J))return se;for(var _e=this.toBBox,oe=[];J;){for(var de=0;de<J.children.length;de++){var B=J.children[de],O=J.leaf?_e(B):B;De(G,O)&&(J.leaf?se.push(B):Pe(G,O)?this._all(B,se):oe.push(B))}J=oe.pop()}return se},x.prototype.collides=function(G){var J=this.data;if(!De(G,J))return!1;for(var se=[];J;){for(var _e=0;_e<J.children.length;_e++){var oe=J.children[_e],de=J.leaf?this.toBBox(oe):oe;if(De(G,de)){if(J.leaf||Pe(G,de))return!0;se.push(oe)}}J=se.pop()}return!1},x.prototype.load=function(G){if(!G||!G.length)return this;if(G.length<this._minEntries){for(var J=0;J<G.length;J++)this.insert(G[J]);return this}var se=this._build(G.slice(),0,G.length-1,0);if(this.data.children.length)if(this.data.height===se.height)this._splitRoot(this.data,se);else{if(this.data.height<se.height){var _e=this.data;this.data=se,se=_e}this._insert(se,this.data.height-se.height-1,!0)}else this.data=se;return this},x.prototype.insert=function(G){return G&&this._insert(G,this.data.height-1),this},x.prototype.clear=function(){return this.data=Ie([]),this},x.prototype.remove=function(G,J){if(!G)return this;for(var se,_e,oe,de=this.data,B=this.toBBox(G),O=[],F=[];de||O.length;){if(de||(de=O.pop(),_e=O[O.length-1],se=F.pop(),oe=!0),de.leaf){var j=C(G,de.children,J);if(j!==-1)return de.children.splice(j,1),O.push(de),this._condense(O),this}oe||de.leaf||!Pe(de,B)?_e?(se++,de=_e.children[se],oe=!1):de=null:(O.push(de),F.push(se),se=0,_e=de,de=de.children[0])}return this},x.prototype.toBBox=function(G){return G},x.prototype.compareMinX=function(G,J){return G.minX-J.minX},x.prototype.compareMinY=function(G,J){return G.minY-J.minY},x.prototype.toJSON=function(){return this.data},x.prototype.fromJSON=function(G){return this.data=G,this},x.prototype._all=function(G,J){for(var se=[];G;)G.leaf?J.push.apply(J,G.children):se.push.apply(se,G.children),G=se.pop();return J},x.prototype._build=function(G,J,se,_e){var oe,de=se-J+1,B=this._maxEntries;if(de<=B)return P(oe=Ie(G.slice(J,se+1)),this.toBBox),oe;_e||(_e=Math.ceil(Math.log(de)/Math.log(B)),B=Math.ceil(de/Math.pow(B,_e-1))),(oe=Ie([])).leaf=!1,oe.height=_e;var O=Math.ceil(de/B),F=O*Math.ceil(Math.sqrt(B));mt(G,J,se,F,this.compareMinX);for(var j=J;j<=se;j+=F){var z=Math.min(j+F-1,se);mt(G,j,z,O,this.compareMinY);for(var U=j;U<=z;U+=O){var X=Math.min(U+O-1,z);oe.children.push(this._build(G,U,X,_e-1))}}return P(oe,this.toBBox),oe},x.prototype._chooseSubtree=function(G,J,se,_e){for(;_e.push(J),!J.leaf&&_e.length-1!==se;){for(var oe=1/0,de=1/0,B=void 0,O=0;O<J.children.length;O++){var F=J.children[O],j=fe(F),z=(U=G,X=F,(Math.max(X.maxX,U.maxX)-Math.min(X.minX,U.minX))*(Math.max(X.maxY,U.maxY)-Math.min(X.minY,U.minY))-j);z<de?(de=z,oe=j<oe?j:oe,B=F):z===de&&j<oe&&(oe=j,B=F)}J=B||J.children[0]}var U,X;return J},x.prototype._insert=function(G,J,se){var _e=se?G:this.toBBox(G),oe=[],de=this._chooseSubtree(_e,this.data,J,oe);for(de.children.push(G),D(de,_e);J>=0&&oe[J].children.length>this._maxEntries;)this._split(oe,J),J--;this._adjustParentBBoxes(_e,oe,J)},x.prototype._split=function(G,J){var se=G[J],_e=se.children.length,oe=this._minEntries;this._chooseSplitAxis(se,oe,_e);var de=this._chooseSplitIndex(se,oe,_e),B=Ie(se.children.splice(de,se.children.length-de));B.height=se.height,B.leaf=se.leaf,P(se,this.toBBox),P(B,this.toBBox),J?G[J-1].children.push(B):this._splitRoot(se,B)},x.prototype._splitRoot=function(G,J){this.data=Ie([G,J]),this.data.height=G.height+1,this.data.leaf=!1,P(this.data,this.toBBox)},x.prototype._chooseSplitIndex=function(G,J,se){for(var _e,oe,de,B,O,F,j,z=1/0,U=1/0,X=J;X<=se-J;X++){var K=T(G,0,X,this.toBBox),ee=T(G,X,se,this.toBBox),ue=(oe=K,de=ee,B=void 0,O=void 0,F=void 0,j=void 0,B=Math.max(oe.minX,de.minX),O=Math.max(oe.minY,de.minY),F=Math.min(oe.maxX,de.maxX),j=Math.min(oe.maxY,de.maxY),Math.max(0,F-B)*Math.max(0,j-O)),ce=fe(K)+fe(ee);ue<z?(z=ue,_e=X,U=ce<U?ce:U):ue===z&&ce<U&&(U=ce,_e=X)}return _e||se-J},x.prototype._chooseSplitAxis=function(G,J,se){var _e=G.leaf?this.compareMinX:H,oe=G.leaf?this.compareMinY:$;this._allDistMargin(G,J,se,_e)<this._allDistMargin(G,J,se,oe)&&G.children.sort(_e)},x.prototype._allDistMargin=function(G,J,se,_e){G.children.sort(_e);for(var oe=this.toBBox,de=T(G,0,J,oe),B=T(G,se-J,se,oe),O=me(de)+me(B),F=J;F<se-J;F++){var j=G.children[F];D(de,G.leaf?oe(j):j),O+=me(de)}for(var z=se-J-1;z>=J;z--){var U=G.children[z];D(B,G.leaf?oe(U):U),O+=me(B)}return O},x.prototype._adjustParentBBoxes=function(G,J,se){for(var _e=se;_e>=0;_e--)D(J[_e],G)},x.prototype._condense=function(G){for(var J=G.length-1,se=void 0;J>=0;J--)G[J].children.length===0?J>0?(se=G[J-1].children).splice(se.indexOf(G[J]),1):this.clear():P(G[J],this.toBBox)},x})}),Ot=y(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(j,z,U){U===void 0&&(U={});var X={type:"Feature"};return(U.id===0||U.id)&&(X.id=U.id),U.bbox&&(X.bbox=U.bbox),X.properties=z||{},X.geometry=j,X}i.feature=r;function u(j,z,U){switch(j){case"Point":return h(z).geometry;case"LineString":return P(z).geometry;case"Polygon":return x(z).geometry;case"MultiPoint":return $(z).geometry;case"MultiLineString":return H(z).geometry;case"MultiPolygon":return fe(z).geometry;default:throw new Error(j+" is invalid")}}i.geometry=u;function h(j,z,U){if(U===void 0&&(U={}),!j)throw new Error("coordinates is required");if(!Array.isArray(j))throw new Error("coordinates must be an Array");if(j.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!de(j[0])||!de(j[1]))throw new Error("coordinates must contain numbers");var X={type:"Point",coordinates:j};return r(X,z,U)}i.point=h;function g(j,z,U){return U===void 0&&(U={}),D(j.map(function(X){return h(X,z)}),U)}i.points=g;function x(j,z,U){U===void 0&&(U={});for(var X=0,K=j;X<K.length;X++){var ee=K[X];if(ee.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ue=0;ue<ee[ee.length-1].length;ue++)if(ee[ee.length-1][ue]!==ee[0][ue])throw new Error("First and last Position are not equivalent.")}var ce={type:"Polygon",coordinates:j};return r(ce,z,U)}i.polygon=x;function C(j,z,U){return U===void 0&&(U={}),D(j.map(function(X){return x(X,z)}),U)}i.polygons=C;function P(j,z,U){if(U===void 0&&(U={}),j.length<2)throw new Error("coordinates must be an array of two or more positions");var X={type:"LineString",coordinates:j};return r(X,z,U)}i.lineString=P;function T(j,z,U){return U===void 0&&(U={}),D(j.map(function(X){return P(X,z)}),U)}i.lineStrings=T;function D(j,z){z===void 0&&(z={});var U={type:"FeatureCollection"};return z.id&&(U.id=z.id),z.bbox&&(U.bbox=z.bbox),U.features=j,U}i.featureCollection=D;function H(j,z,U){U===void 0&&(U={});var X={type:"MultiLineString",coordinates:j};return r(X,z,U)}i.multiLineString=H;function $(j,z,U){U===void 0&&(U={});var X={type:"MultiPoint",coordinates:j};return r(X,z,U)}i.multiPoint=$;function fe(j,z,U){U===void 0&&(U={});var X={type:"MultiPolygon",coordinates:j};return r(X,z,U)}i.multiPolygon=fe;function me(j,z,U){U===void 0&&(U={});var X={type:"GeometryCollection",geometries:j};return r(X,z,U)}i.geometryCollection=me;function Pe(j,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var U=Math.pow(10,z||0);return Math.round(j*U)/U}i.round=Pe;function De(j,z){z===void 0&&(z="kilometers");var U=i.factors[z];if(!U)throw new Error(z+" units is invalid");return j*U}i.radiansToLength=De;function Ie(j,z){z===void 0&&(z="kilometers");var U=i.factors[z];if(!U)throw new Error(z+" units is invalid");return j/U}i.lengthToRadians=Ie;function mt(j,z){return J(Ie(j,z))}i.lengthToDegrees=mt;function G(j){var z=j%360;return z<0&&(z+=360),z}i.bearingToAzimuth=G;function J(j){var z=j%(2*Math.PI);return z*180/Math.PI}i.radiansToDegrees=J;function se(j){var z=j%360;return z*Math.PI/180}i.degreesToRadians=se;function _e(j,z,U){if(z===void 0&&(z="kilometers"),U===void 0&&(U="kilometers"),!(j>=0))throw new Error("length must be a positive number");return De(Ie(j,z),U)}i.convertLength=_e;function oe(j,z,U){if(z===void 0&&(z="meters"),U===void 0&&(U="kilometers"),!(j>=0))throw new Error("area must be a positive number");var X=i.areaFactors[z];if(!X)throw new Error("invalid original units");var K=i.areaFactors[U];if(!K)throw new Error("invalid final units");return j/X*K}i.convertArea=oe;function de(j){return!isNaN(j)&&j!==null&&!Array.isArray(j)}i.isNumber=de;function B(j){return!!j&&j.constructor===Object}i.isObject=B;function O(j){if(!j)throw new Error("bbox is required");if(!Array.isArray(j))throw new Error("bbox must be an Array");if(j.length!==4&&j.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");j.forEach(function(z){if(!de(z))throw new Error("bbox must only contain numbers")})}i.validateBBox=O;function F(j){if(!j)throw new Error("id is required");if(["string","number"].indexOf(typeof j)===-1)throw new Error("id must be a number or a string")}i.validateId=F}),gs=y(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Ot();function u(J,se,_e){if(J!==null)for(var oe,de,B,O,F,j,z,U=0,X=0,K,ee=J.type,ue=ee==="FeatureCollection",ce=ee==="Feature",Ce=ue?J.features.length:1,je=0;je<Ce;je++){z=ue?J.features[je].geometry:ce?J.geometry:J,K=z?z.type==="GeometryCollection":!1,F=K?z.geometries.length:1;for(var ze=0;ze<F;ze++){var $e=0,Ct=0;if(O=K?z.geometries[ze]:z,O!==null){j=O.coordinates;var bt=O.type;switch(U=_e&&(bt==="Polygon"||bt==="MultiPolygon")?1:0,bt){case null:break;case"Point":if(se(j,X,je,$e,Ct)===!1)return!1;X++,$e++;break;case"LineString":case"MultiPoint":for(oe=0;oe<j.length;oe++){if(se(j[oe],X,je,$e,Ct)===!1)return!1;X++,bt==="MultiPoint"&&$e++}bt==="LineString"&&$e++;break;case"Polygon":case"MultiLineString":for(oe=0;oe<j.length;oe++){for(de=0;de<j[oe].length-U;de++){if(se(j[oe][de],X,je,$e,Ct)===!1)return!1;X++}bt==="MultiLineString"&&$e++,bt==="Polygon"&&Ct++}bt==="Polygon"&&$e++;break;case"MultiPolygon":for(oe=0;oe<j.length;oe++){for(Ct=0,de=0;de<j[oe].length;de++){for(B=0;B<j[oe][de].length-U;B++){if(se(j[oe][de][B],X,je,$e,Ct)===!1)return!1;X++}Ct++}$e++}break;case"GeometryCollection":for(oe=0;oe<O.geometries.length;oe++)if(u(O.geometries[oe],se,_e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function h(J,se,_e,oe){var de=_e;return u(J,function(B,O,F,j,z){O===0&&_e===void 0?de=B:de=se(de,B,O,F,j,z)},oe),de}function g(J,se){var _e;switch(J.type){case"FeatureCollection":for(_e=0;_e<J.features.length&&se(J.features[_e].properties,_e)!==!1;_e++);break;case"Feature":se(J.properties,0);break}}function x(J,se,_e){var oe=_e;return g(J,function(de,B){B===0&&_e===void 0?oe=de:oe=se(oe,de,B)}),oe}function C(J,se){if(J.type==="Feature")se(J,0);else if(J.type==="FeatureCollection")for(var _e=0;_e<J.features.length&&se(J.features[_e],_e)!==!1;_e++);}function P(J,se,_e){var oe=_e;return C(J,function(de,B){B===0&&_e===void 0?oe=de:oe=se(oe,de,B)}),oe}function T(J){var se=[];return u(J,function(_e){se.push(_e)}),se}function D(J,se){var _e,oe,de,B,O,F,j,z,U,X,K=0,ee=J.type==="FeatureCollection",ue=J.type==="Feature",ce=ee?J.features.length:1;for(_e=0;_e<ce;_e++){for(F=ee?J.features[_e].geometry:ue?J.geometry:J,z=ee?J.features[_e].properties:ue?J.properties:{},U=ee?J.features[_e].bbox:ue?J.bbox:void 0,X=ee?J.features[_e].id:ue?J.id:void 0,j=F?F.type==="GeometryCollection":!1,O=j?F.geometries.length:1,de=0;de<O;de++){if(B=j?F.geometries[de]:F,B===null){if(se(null,K,z,U,X)===!1)return!1;continue}switch(B.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(se(B,K,z,U,X)===!1)return!1;break}case"GeometryCollection":{for(oe=0;oe<B.geometries.length;oe++)if(se(B.geometries[oe],K,z,U,X)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}K++}}function H(J,se,_e){var oe=_e;return D(J,function(de,B,O,F,j){B===0&&_e===void 0?oe=de:oe=se(oe,de,B,O,F,j)}),oe}function $(J,se){D(J,function(_e,oe,de,B,O){var F=_e===null?null:_e.type;switch(F){case null:case"Point":case"LineString":case"Polygon":return se(r.feature(_e,de,{bbox:B,id:O}),oe,0)===!1?!1:void 0}var j;switch(F){case"MultiPoint":j="Point";break;case"MultiLineString":j="LineString";break;case"MultiPolygon":j="Polygon";break}for(var z=0;z<_e.coordinates.length;z++){var U=_e.coordinates[z],X={type:j,coordinates:U};if(se(r.feature(X,de),oe,z)===!1)return!1}})}function fe(J,se,_e){var oe=_e;return $(J,function(de,B,O){B===0&&O===0&&_e===void 0?oe=de:oe=se(oe,de,B,O)}),oe}function me(J,se){$(J,function(_e,oe,de){var B=0;if(_e.geometry){var O=_e.geometry.type;if(!(O==="Point"||O==="MultiPoint")){var F,j=0,z=0,U=0;if(u(_e,function(X,K,ee,ue,ce){if(F===void 0||oe>j||ue>z||ce>U){F=X,j=oe,z=ue,U=ce,B=0;return}var Ce=r.lineString([F,X],_e.properties);if(se(Ce,oe,de,ce,B)===!1)return!1;B++,F=X})===!1)return!1}}})}function Pe(J,se,_e){var oe=_e,de=!1;return me(J,function(B,O,F,j,z){de===!1&&_e===void 0?oe=B:oe=se(oe,B,O,F,j,z),de=!0}),oe}function De(J,se){if(!J)throw new Error("geojson is required");$(J,function(_e,oe,de){if(_e.geometry!==null){var B=_e.geometry.type,O=_e.geometry.coordinates;switch(B){case"LineString":if(se(_e,oe,de,0,0)===!1)return!1;break;case"Polygon":for(var F=0;F<O.length;F++)if(se(r.lineString(O[F],_e.properties),oe,de,F)===!1)return!1;break}}})}function Ie(J,se,_e){var oe=_e;return De(J,function(de,B,O,F){B===0&&_e===void 0?oe=de:oe=se(oe,de,B,O,F)}),oe}function mt(J,se){if(se=se||{},!r.isObject(se))throw new Error("options is invalid");var _e=se.featureIndex||0,oe=se.multiFeatureIndex||0,de=se.geometryIndex||0,B=se.segmentIndex||0,O=se.properties,F;switch(J.type){case"FeatureCollection":_e<0&&(_e=J.features.length+_e),O=O||J.features[_e].properties,F=J.features[_e].geometry;break;case"Feature":O=O||J.properties,F=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":F=J;break;default:throw new Error("geojson is invalid")}if(F===null)return null;var j=F.coordinates;switch(F.type){case"Point":case"MultiPoint":return null;case"LineString":return B<0&&(B=j.length+B-1),r.lineString([j[B],j[B+1]],O,se);case"Polygon":return de<0&&(de=j.length+de),B<0&&(B=j[de].length+B-1),r.lineString([j[de][B],j[de][B+1]],O,se);case"MultiLineString":return oe<0&&(oe=j.length+oe),B<0&&(B=j[oe].length+B-1),r.lineString([j[oe][B],j[oe][B+1]],O,se);case"MultiPolygon":return oe<0&&(oe=j.length+oe),de<0&&(de=j[oe].length+de),B<0&&(B=j[oe][de].length-B-1),r.lineString([j[oe][de][B],j[oe][de][B+1]],O,se)}throw new Error("geojson is invalid")}function G(J,se){if(se=se||{},!r.isObject(se))throw new Error("options is invalid");var _e=se.featureIndex||0,oe=se.multiFeatureIndex||0,de=se.geometryIndex||0,B=se.coordIndex||0,O=se.properties,F;switch(J.type){case"FeatureCollection":_e<0&&(_e=J.features.length+_e),O=O||J.features[_e].properties,F=J.features[_e].geometry;break;case"Feature":O=O||J.properties,F=J.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":F=J;break;default:throw new Error("geojson is invalid")}if(F===null)return null;var j=F.coordinates;switch(F.type){case"Point":return r.point(j,O,se);case"MultiPoint":return oe<0&&(oe=j.length+oe),r.point(j[oe],O,se);case"LineString":return B<0&&(B=j.length+B),r.point(j[B],O,se);case"Polygon":return de<0&&(de=j.length+de),B<0&&(B=j[de].length+B),r.point(j[de][B],O,se);case"MultiLineString":return oe<0&&(oe=j.length+oe),B<0&&(B=j[oe].length+B),r.point(j[oe][B],O,se);case"MultiPolygon":return oe<0&&(oe=j.length+oe),de<0&&(de=j[oe].length+de),B<0&&(B=j[oe][de].length-B),r.point(j[oe][de][B],O,se)}throw new Error("geojson is invalid")}i.coordAll=T,i.coordEach=u,i.coordReduce=h,i.featureEach=C,i.featureReduce=P,i.findPoint=G,i.findSegment=mt,i.flattenEach=$,i.flattenReduce=fe,i.geomEach=D,i.geomReduce=H,i.lineEach=De,i.lineReduce=Ie,i.propEach=g,i.propReduce=x,i.segmentEach=me,i.segmentReduce=Pe}),zr=y(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=gs();function u(h){var g=[1/0,1/0,-1/0,-1/0];return r.coordEach(h,function(x){g[0]>x[0]&&(g[0]=x[0]),g[1]>x[1]&&(g[1]=x[1]),g[2]<x[0]&&(g[2]=x[0]),g[3]<x[1]&&(g[3]=x[1])}),g}u.default=u,i.default=u}),ci=y((i,r)=>{var u=dt(),h=Ot(),g=gs(),x=zr().default,C=g.featureEach;g.coordEach,h.polygon;var P=h.featureCollection;function T(D){var H=new u(D);return H.insert=function($){if($.type!=="Feature")throw new Error("invalid feature");return $.bbox=$.bbox?$.bbox:x($),u.prototype.insert.call(this,$)},H.load=function($){var fe=[];return Array.isArray($)?$.forEach(function(me){if(me.type!=="Feature")throw new Error("invalid features");me.bbox=me.bbox?me.bbox:x(me),fe.push(me)}):C($,function(me){if(me.type!=="Feature")throw new Error("invalid features");me.bbox=me.bbox?me.bbox:x(me),fe.push(me)}),u.prototype.load.call(this,fe)},H.remove=function($,fe){if($.type!=="Feature")throw new Error("invalid feature");return $.bbox=$.bbox?$.bbox:x($),u.prototype.remove.call(this,$,fe)},H.clear=function(){return u.prototype.clear.call(this)},H.search=function($){var fe=u.prototype.search.call(this,this.toBBox($));return P(fe)},H.collides=function($){return u.prototype.collides.call(this,this.toBBox($))},H.all=function(){var $=u.prototype.all.call(this);return P($)},H.toJSON=function(){return u.prototype.toJSON.call(this)},H.fromJSON=function($){return u.prototype.fromJSON.call(this,$)},H.toBBox=function($){var fe;if($.bbox)fe=$.bbox;else if(Array.isArray($)&&$.length===4)fe=$;else if(Array.isArray($)&&$.length===6)fe=[$[0],$[1],$[3],$[4]];else if($.type==="Feature")fe=x($);else if($.type==="FeatureCollection")fe=x($);else throw new Error("invalid geojson");return{minX:fe[0],minY:fe[1],maxX:fe[2],maxY:fe[3]}},H}r.exports=T,r.exports.default=T});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),u=r.length>>>0,h=arguments[1],g=0;g<u;g++)if(i.call(h,r[g],g,r))return g;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),u=r.length>>>0,h=arguments[1],g=0;g<u;g++){var x=r[g];if(i.call(h,x,g,r))return x}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var u=arguments[r];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(i[h]=u[h])}return i}),(function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var u=Object(this),h=u.length>>>0;if(h===0)return!1;var g=r|0,x=Math.max(g>=0?g:h-Math.abs(g),0);function C(P,T){return P===T||typeof P=="number"&&typeof T=="number"&&isNaN(P)&&isNaN(T)}for(;x<h;){if(C(u[x],i))return!0;x++}return!1}});var Ur={version:"2.18.3"},lt=E(ps()),It={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},ta={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},eo={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},En={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ha={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},$r={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Kn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Zt={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ai={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Lt={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Gr={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},to={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Vi={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},no={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},io={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},_s={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},ys={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Vr={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Jn={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Di={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},di={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},vs={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},ot={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},tn={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Rt={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},na={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},hr={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},ia=Vi,Ri={en:It,de:ta,it:eo,id:En,ro:Ha,ru:$r,es:Kn,nl:Zt,fr:Ai,pt:ia,pt_br:to,pt_pt:Vi,zh:Lt,zh_tw:Gr,pl:no,sv:io,el:_s,hu:ys,da:Vr,no:Jn,fa:Di,ua:di,tr:vs,cz:ot,ja:tn,fi:Rt,ko:na,ky:hr},fi={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(u=>{this._isRelevantForEdit(u)&&u.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let u=i[r];this._isRelevantForEdit(u)&&u.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},ro=fi,ws={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let u=i[r];this._isRelevantForDrag(u)&&u.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},Ht=ws,Yn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let u=i[r];this._isRelevantForRemoval(u)&&(u.pm.enabled()&&u.pm.disable(),u.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},cr=Yn,xs={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let u=i[r];this._isRelevantForRemoval(u)&&u.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},Tl=xs,Za=E(ps()),Ls={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",u={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,u)},_fireCenterPlaced(i="Draw",r={}){let u=i==="Draw"?this._layer:void 0,h=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:u,layer:h,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,u,h="Draw",g={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:u},h,g)},_fireEdit(i=this._layer,r="Edit",u={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,u)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,u="Edit",h={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},u,h)},_fireMarkerDrag(i,r=void 0,u="Edit",h={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},u,h)},_fireMarkerDragEnd(i,r=void 0,u=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:u},h,g)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",u={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,u)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,u="Edit",h={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},u,h)},_fireVertexAdded(i,r,u,h="Edit",g={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:u,shape:this.getShape()},h,g)},_fireVertexRemoved(i,r,u="Edit",h={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},u,h)},_fireVertexClick(i,r,u="Edit",h={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},u,h)},_fireIntersect(i,r=this._layer,u="Edit",h={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},u,h)},_fireLayerReset(i,r,u="Edit",h={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},u,h)},_fireChange(i,r="Edit",u={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,u)},_fireTextChange(i,r="Edit",u={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,u)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,u="Snapping",h={}){this.__fire(i,"pm:snapdrag",r,u,h)},_fireSnap(i,r,u="Snapping",h={}){this.__fire(i,"pm:snap",r,u,h)},_fireUnsnap(i,r,u="Snapping",h={}){this.__fire(i,"pm:unsnap",r,u,h)},_fireRotationEnable(i,r,u="Rotation",h={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},u,h)},_fireRotationDisable(i,r="Rotation",u={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,u)},_fireRotationStart(i,r,u="Rotation",h={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},u,h)},_fireRotation(i,r,u,h=this._rotationLayer,g="Rotation",x={}){this.__fire(i,"pm:rotate",{layer:h,helpLayer:this._layer,startAngle:this._startAngle,angle:h.pm.getAngle(),angleDiff:r,oldLatLngs:u,newLatLngs:h.getLatLngs()},g,x)},_fireRotationEnd(i,r,u,h="Rotation",g={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:u,newLatLngs:this._rotationLayer.getLatLngs()},h,g)},_fireActionClick(i,r,u,h="Toolbar",g={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:u},h,g)},_fireButtonClick(i,r,u="Toolbar",h={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},u,h)},_fireLangChange(i,r,u,h,g="Global",x={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:u,translations:h},g,x)},_fireGlobalDragModeToggled(i,r="Global",u={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,u)},_fireGlobalEditModeToggled(i,r="Global",u={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,u)},_fireGlobalRemovalModeToggled(i,r="Global",u={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,u)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,u="Edit",h={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},u,h)},_fireKeyeventEvent(i,r,u,h="Global",g={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:u},h,g)},__fire(i,r,u,h,g={}){u=(0,Za.default)(u,g,{source:h}),L.PM.Utils._fireEvent(i,r,u)}},dr=Ls,so=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let u={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=u,this._lastEvents.current=u,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){return this._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return this._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return this._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return this._lastEvents.current?.event.metaKey},getPressedKey(){return this._lastEvents.current?.event.key}}),vt=so,Oi=E(Gi());function ut(i){let r=L.PM.activeLang;return(0,Oi.default)(Ri[r],i)||(0,Oi.default)(Ri.en,i)||i}function pi(i){for(let r=0;r<i.length;r+=1){let u=i[r];if(Array.isArray(u)){if(pi(u))return!0}else if(u!=null&&u!=="")return!0}return!1}function Hr(i){return i.reduce((r,u)=>{if(u.length!==0){let h=Array.isArray(u)?Hr(u):u;Array.isArray(h)?h.length!==0&&r.push(h):r.push(h)}return r},[])}function oo(i,r,u){let h={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:g,b:x,f:C}=h,P=i.lng,T=i.lat,D=u,H=Math.PI,$=r*H/180,fe=Math.sin($),me=Math.cos($),Pe=(1-C)*Math.tan(T*H/180),De=1/Math.sqrt(1+Pe*Pe),Ie=Pe*De,mt=Math.atan2(Pe,me),G=De*fe,J=1-G*G,se=J*(g*g-x*x)/(x*x),_e=1+se/16384*(4096+se*(-768+se*(320-175*se))),oe=se/1024*(256+se*(-128+se*(74-47*se))),de=D/(x*_e),B=2*Math.PI,O,F,j;for(;Math.abs(de-B)>1e-12;){O=Math.cos(2*mt+de),F=Math.sin(de),j=Math.cos(de);let Ce=oe*F*(O+oe/4*(j*(-1+2*O*O)-oe/6*O*(-3+4*F*F)*(-3+4*O*O)));B=de,de=D/(x*_e)+Ce}let z=Ie*F-De*j*me,U=Math.atan2(Ie*j+De*F*me,(1-C)*Math.sqrt(G*G+z*z)),X=Math.atan2(F*fe,De*j-Ie*F*me),K=C/16*J*(4+C*(4-3*J)),ee=X-(1-K)*C*G*(de+K*F*(O+K*j*(-1+2*O*O))),ue=P+ee*180/H,ce=U*180/H;return L.latLng(ue,ce)}function fr(i,r,u,h,g=!0){let x,C,P,T=[];for(let D=0;D<u;D+=1){if(g)x=D*360/u+h,C=oo(i,x,r),P=L.latLng(C.lng,C.lat);else{let H=i.lat+Math.cos(2*D*Math.PI/u)*r,$=i.lng+Math.sin(2*D*Math.PI/u)*r;P=L.latLng(H,$)}T.push(P)}return T}function Wa(i,r,u){r=(r+360)%360;let h=Math.PI/180,g=180/Math.PI,{R:x}=L.CRS.Earth,C=i.lng*h,P=i.lat*h,T=r*h,D=Math.sin(P),H=Math.cos(P),$=Math.cos(u/x),fe=Math.sin(u/x),me=Math.asin(D*$+H*fe*Math.cos(T)),Pe=C+Math.atan2(Math.sin(T)*fe*H,$-D*Math.sin(me));Pe*=g;let De=Pe-360,Ie=Pe<-180?Pe+360:Pe;return Pe=Pe>180?De:Ie,L.latLng([me*g,Pe])}function hn(i,r,u){let h=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(u),x=Math.atan2(g.y-h.y,g.x-h.x)*180/Math.PI+90;return x+=x<0?360:0,x}function Ii(i,r,u,h){let g=hn(i,r,u);return Wa(r,g,h)}function ra(i,r,u="asc"){if(!r||Object.keys(r).length===0)return(T,D)=>T-D;let h=Object.keys(r),g,x=h.length-1,C={};for(;x>=0;)g=h[x],C[g.toLowerCase()]=r[g],x-=1;function P(T){if(T instanceof L.Marker)return"Marker";if(T instanceof L.Circle)return"Circle";if(T instanceof L.CircleMarker)return"CircleMarker";if(T instanceof L.Rectangle)return"Rectangle";if(T instanceof L.Polygon)return"Polygon";if(T instanceof L.Polyline)return"Line"}return(T,D)=>{let H,$;if(H=P(T.layer).toLowerCase(),$=P(D.layer).toLowerCase(),!H||!$)return 0;let fe=H in C?C[H]:Number.MAX_SAFE_INTEGER,me=$ in C?C[$]:Number.MAX_SAFE_INTEGER,Pe=0;return fe<me?Pe=-1:fe>me&&(Pe=1),u==="desc"?Pe*-1:Pe}}function Pn(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function qa(i,r){if(r.options.crs?.projection?.MAX_LATITUDE){let u=r.options.crs?.projection?.MAX_LATITUDE;i.lat=Math.max(Math.min(u,i.lat),-u)}return i}function nn(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var sa=L.Class.extend({includes:[ro,Ht,cr,Tl,dr],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=vt(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,u="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let g=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(g){let x=[`${g[1]}_${g[2]}`,`${g[1]}`];for(let C of x)if(Ri[C]){i=C;break}}}let h=L.PM.activeLang;r&&(Ri[i]=(0,lt.default)(Ri[u],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(h,i,u,Ri[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let u=r.ignoreShapes||[],h=r.merge||!1;this.map.pm.Draw.shapes.forEach(g=>{u.indexOf(g)===-1&&this.map.pm.Draw[g].setPathOptions(i,h)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,lt.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let u=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),u=!0);let h=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),h=!0),this.map.pm.Draw.shapes.forEach(g=>{this.map.pm.Draw[g].setOptions(r)}),u&&this.map.pm.Draw.CircleMarker.enable(),h&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(g=>{g.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let u=L.featureGroup();return u._pmTempLayer=!0,r.forEach(h=>{u.addLayer(h)}),u},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(h=>h._drawnByGeoman===!0);if(!i)return r;let u=L.featureGroup();return u._pmTempLayer=!0,r.forEach(h=>{u.addLayer(h)}),u},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){nn(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&nn(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let u,h=r.touches[0]||r.changedTouches[0];try{u=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:h.detail,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{u=document.createEvent("MouseEvents"),u.initMouseEvent(i,r.bubbles,r.cancelable,r.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return u}}),Zr=sa,Xn=L.Control.extend({includes:[dr],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",u=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&u.setAttribute("title",i.title);let h=L.DomUtil.create("a","leaflet-buttons-control-button",u);h.setAttribute("role","button"),h.setAttribute("tabindex","0"),h.href="#";let g=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,u),x=i.actions,C={cancel:{text:ut("actions.cancel"),title:ut("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ut("actions.finish"),title:ut("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ut("actions.removeLastVertex"),title:ut("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:ut("actions.finish"),title:ut("actions.finish"),onClick(T){this._map.pm.Draw[i.jsClass]._finishShape(T)}}};i._preparedActions=x.map(T=>{let D=typeof T=="string"?T:T.name,H;if(C[D])H=C[D];else if(T.text)H=T;else return H;let $=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${D}`,g);if($.setAttribute("role","button"),$.setAttribute("tabindex","0"),$.href="#",H.title&&($.title=H.title),$.innerHTML=H.text,L.DomEvent.disableClickPropagation($),L.DomEvent.on($,"click",L.DomEvent.stop),H._node=$,!i.disabled&&H.onClick){let fe=me=>{me.preventDefault();let Pe="",{buttons:De}=this._map.pm.Toolbar;for(let Ie in De)if(De[Ie]._button===i){Pe=Ie;break}this._fireActionClick(H,Pe,i)};L.DomEvent.addListener($,"click",fe,this),L.DomEvent.addListener($,"click",H.onClick,this),L.DomEvent.addListener($,"click",()=>this._updateActiveAction(i))}return H}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(u,"active");let P=L.DomUtil.create("div","control-icon",h);return i.iconUrl&&P.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(P,i.className),L.DomEvent.disableClickPropagation(h),L.DomEvent.on(h,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(h,"click",this._onBtnClick,this),L.DomEvent.addListener(h,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(h,"pm-disabled"),h.setAttribute("aria-disabled","true")),u},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let u in r)if(r[u]._button===this._button){i=u;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){i._preparedActions?.forEach(r=>{r?._node&&(r.isActive&&r.isActive.call(this)?L.DomUtil.addClass(r._node,"active-action"):L.DomUtil.removeClass(r._node,"active-action"))})}}),oa=Xn;L.Control.PMButton=oa;var Ka=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let u in i){let h=i[u];L.Util.setOptions(h,{className:r.geomanIcons[u]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let u=this.buttons[r];u._button.disableByOtherButtons&&u!==i&&u.toggled()&&u._triggerClick()}},toggleButton(i,r,u=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let h=i;return u&&this.triggerClickOnToggledButtons(this.buttons[h]),this.buttons[h]?this.buttons[h].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:ut("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:ut("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={className:"control-icon leaflet-pm-icon-polyline",title:ut("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={title:ut("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:ut("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:ut("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:ut("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},P={title:ut("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:ut("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},D={title:ut("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},H={title:ut("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},$={className:"control-icon leaflet-pm-icon-text",title:ut("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(fe,me)=>{this.map.pm.Draw[me.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(u)),this._addButton("drawRectangle",new L.Control.PMButton(x)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(h)),this._addButton("drawCircleMarker",new L.Control.PMButton(g)),this._addButton("drawText",new L.Control.PMButton($)),this._addButton("editMode",new L.Control.PMButton(C)),this._addButton("dragMode",new L.Control.PMButton(P)),this._addButton("cutPolygon",new L.Control.PMButton(T)),this._addButton("removalMode",new L.Control.PMButton(D)),this._addButton("rotateMode",new L.Control.PMButton(H))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(u=>!i[u]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(u=>i[u]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(u=>i[u]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(u=>i[u]._button.tool==="custom")));for(let u in i)if(this.options[u]&&r.indexOf(u)===-1){let h=i[u]._button.tool;h||(h="draw"),i[u].setPosition(this._getBtnPosition(h)),i[u].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let u=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let h=this.map.pm.Draw.createNewDrawInstance(r.name,u);r={...this.buttons[u]._button,...r};let g=this.createCustomControl(r);return{drawInstance:h,control:g}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let u=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),u},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let u in this.getButtons()){let h=this.getButtons()[u];(h._button.tool===i||i==="draw"&&!h._button.tool)&&(r[u]=h)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),u=[];i.forEach(x=>{r[x]?u.push(r[x]):u.push(x)});let h=this.getButtons(),g={};u.forEach(x=>{h[x]&&(g[x]=h[x])}),Object.keys(h).filter(x=>!h[x]._button.tool||h[x]._button.tool==="draw").forEach(x=>{u.indexOf(x)===-1&&(g[x]=h[x])}),Object.keys(h).filter(x=>h[x]._button.tool==="edit").forEach(x=>{u.indexOf(x)===-1&&(g[x]=h[x])}),Object.keys(h).filter(x=>h[x]._button.tool==="options").forEach(x=>{u.indexOf(x)===-1&&(g[x]=h[x])}),Object.keys(h).filter(x=>h[x]._button.tool==="custom").forEach(x=>{u.indexOf(x)===-1&&(g[x]=h[x])}),Object.keys(h).forEach(x=>{u.indexOf(x)===-1&&(g[x]=h[x])}),this.map.pm.Toolbar.buttons=g,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let u in i)r.push(u);return r},changeActionsOfControl(i,r){let u=this._btnNameMapping(i);if(!u)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[u])throw new TypeError("Button with this name not exists");this.buttons[u]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let u=this._btnNameMapping(i);r?this.buttons[u].disable():this.buttons[u].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),aa=Ka,Al=E(ps()),ao={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),i?.originalEvent?.altKey||this._map?.pm?.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let u=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(u).length===0)return!1;let h=u.layer instanceof L.Marker||u.layer instanceof L.CircleMarker||!this.options.snapSegment,g;h?g=u.latlng:g=this._checkPrioritiySnapping(u);let x=this.options.snapDistance,C={marker:r,shape:this._shape,snapLatLng:g,segment:u.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:u.layer,distance:u.distance};if(this._fireSnapDrag(C.marker,C),this._fireSnapDrag(this._layer,C),u.distance<x){r._orgLatLng=r.getLatLng(),r.setLatLng(g),r._snapped=!0,r._snapInfo=C;let P=()=>{this._snapLatLng=g,this._fireSnap(r,C),this._fireSnap(this._layer,C)},T=this._snapLatLng||{},D=g||{};(T.lat!==D.lat||T.lng!==D.lng)&&P()}else this._snapLatLng&&(this._unsnap(C),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(C.marker,C),this._fireUnsnap(this._layer,C));return!0},_createSnapList(){let i=[],r=[],u=this._map;u.off("layerremove",this._handleSnapLayerRemoval,this),u.on("layerremove",this._handleSnapLayerRemoval,this),u.eachLayer(h=>{if((h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&h.options.snapIgnore!==!0){if(h.options.snapIgnore===void 0&&(!L.PM.optIn&&h.options.pmIgnore===!0||L.PM.optIn&&h.options.pmIgnore!==!1))return;(h instanceof L.Circle||h instanceof L.CircleMarker)&&h.pm&&h.pm._hiddenPolyCircle?i.push(h.pm._hiddenPolyCircle):h instanceof L.ImageOverlay&&(h=L.rectangle(h.getBounds())),i.push(h);let g=L.polyline([],{color:"red",pmIgnore:!0});g._pmTempLayer=!0,r.push(g),(h instanceof L.Circle||h instanceof L.CircleMarker)&&r.push(g)}}),i=i.filter(h=>this._layer!==h),i=i.filter(h=>h._latlng||h._latlngs&&pi(h._latlngs)),i=i.filter(h=>!h._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let h=L.polyline([],{color:"red",pmIgnore:!0});h._pmTempLayer=!0,r.push(h)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(u=>u._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,u=1){let h=[],g={};r.forEach((C,P)=>{if(C._parentCopy&&C._parentCopy===this._layer||C.getLatLngs?.().flat(5).length<2)return;let T=this._calcLayerDistances(i,C);if(T.distance=Math.floor(T.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[P]){let D=L.polyline([],{color:"red",pmIgnore:!0});D._pmTempLayer=!0,this.debugIndicatorLines[P]=D}this.debugIndicatorLines[P].setLatLngs([i,T.latlng])}u===1&&(g.distance===void 0||T.distance-5<=g.distance)?(T.distance+5<g.distance&&(h=[]),g=T,g.layer=C,h.push(g)):u!==1&&(g={},g=T,g.layer=C,h.push(g))}),u!==1&&(h=h.sort((C,P)=>C.distance-P.distance)),u===-1&&(u=h.length);let x=this._getClosestLayerByPriority(h,u);return L.Util.isArray(x)?x:[x]},_calcLayerDistances(i,r){let u=this._map,h=r instanceof L.Marker||r instanceof L.CircleMarker,g=r instanceof L.Polygon,x=i;if(h){let C=r.getLatLng();return{latlng:{...C},distance:this._getDistance(u,C,x)}}return this._calcLatLngDistances(x,r.getLatLngs(),u,g)},_calcLatLngDistances(i,r,u,h=!1){let g,x,C,P=T=>{T.forEach((D,H)=>{if(Array.isArray(D)){P(D);return}if(this.options.snapSegment){let $=D,fe;h?fe=H+1===T.length?0:H+1:fe=H+1===T.length?void 0:H+1;let me=T[fe];if(me){let Pe=this._getDistanceToSegment(u,i,$,me);(x===void 0||Pe<x)&&(x=Pe,C=[$,me])}}else{let $=this._getDistance(u,i,D);(x===void 0||$<x)&&(x=$,g=D)}})};return P(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(u,i,C[0],C[1])},segment:C,distance:x}:{latlng:g,distance:x}},_getClosestLayerByPriority(i,r=1){i=i.sort((C,P)=>C._leaflet_id-P._leaflet_id);let u=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],h=this._map.pm.globalOptions.snappingOrder||[],g=0,x={};return h.concat(u).forEach(C=>{x[C]||(g+=1,x[C]=g)}),i.sort(ra("instanceofShape",x)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,u=i.segment[0],h=i.segment[1],g=i.latlng,x=g;if(this.options.snapVertex){let C=this._getDistance(r,u,g),P=this._getDistance(r,h,g),T=C<P?u:h,D=C<P?C:P;if(this.options.snapMiddle){let $=L.PM.Utils.calcMiddleLatLng(r,u,h),fe=this._getDistance(r,$,g);fe<C&&fe<P&&(T=$,D=fe)}let H=this.options.snapDistance;D<H&&(x=T)}return{...x}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,u,h){let g=i.getMaxZoom();g===1/0&&(g=i.getZoom());let x=i.project(r,g),C=i.project(u,g),P=i.project(h,g),T=L.LineUtil.closestPointOnSegment(x,C,P);return i.unproject(T,g)},_getDistanceToSegment(i,r,u,h){let g=i.latLngToContainerPoint(r),x=i.latLngToContainerPoint(u),C=i.latLngToContainerPoint(h);return L.LineUtil.pointToSegmentDistance(g,x,C)},_getDistance(i,r,u){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(u))}},la=ao,Dl=L.Class.extend({includes:[la,dr],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(u=>{this[u]=new L.PM.Draw[u](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,Al.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let u=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[u])throw new TypeError(`There is no class L.PM.Draw.${u}`);return this[i]=new L.PM.Draw[u](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),rn=Dl;rn.Marker=rn.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),u=new L.Marker(r,this.options.markerStyle);this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm&&this.options.markerEditable?u.pm.enable():u.dragging&&u.dragging.disable(),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){this.options.markerStyle?.icon&&this._hintMarker?.setIcon(this.options.markerStyle.icon)}});var cn=63710088e-1,Ja={centimeters:cn*100,centimetres:cn*100,degrees:cn/111325,feet:cn*3.28084,inches:cn*39.37,kilometers:cn/1e3,kilometres:cn/1e3,meters:cn,metres:cn,miles:cn/1609.344,millimeters:cn*1e3,millimetres:cn*1e3,nauticalmiles:cn/1852,radians:1,yards:cn*1.0936};function Hi(i,r,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=r||{},h.geometry=i,h}function pr(i,r,u){if(u===void 0&&(u={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ua(i[0])||!ua(i[1]))throw new Error("coordinates must contain numbers");var h={type:"Point",coordinates:i};return Hi(h,r,u)}function Zi(i,r,u){if(u===void 0&&(u={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var h={type:"LineString",coordinates:i};return Hi(h,r,u)}function Sn(i,r){r===void 0&&(r={});var u={type:"FeatureCollection"};return r.id&&(u.id=r.id),r.bbox&&(u.bbox=r.bbox),u.features=i,u}function Rl(i,r){r===void 0&&(r="kilometers");var u=Ja[r];if(!u)throw new Error(r+" units is invalid");return i*u}function mr(i,r){r===void 0&&(r="kilometers");var u=Ja[r];if(!u)throw new Error(r+" units is invalid");return i/u}function Mn(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Un(i){var r=i%360;return r*Math.PI/180}function ua(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function ks(i){var r,u,h={type:"FeatureCollection",features:[]};if(i.type==="Feature"?u=i.geometry:u=i,u.type==="LineString")r=[u.coordinates];else if(u.type==="MultiLineString")r=u.coordinates;else if(u.type==="MultiPolygon")r=[].concat.apply([],u.coordinates);else if(u.type==="Polygon")r=u.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(g){r.forEach(function(x){for(var C=0;C<g.length-1;C++)for(var P=C;P<x.length-1;P++)if(!(g===x&&(Math.abs(C-P)===1||C===0&&P===g.length-2&&g[C][0]===g[g.length-1][0]&&g[C][1]===g[g.length-1][1]))){var T=ha(g[C][0],g[C][1],g[C+1][0],g[C+1][1],x[P][0],x[P][1],x[P+1][0],x[P+1][1]);T&&h.features.push(pr([T[0],T[1]]))}})}),h}function ha(i,r,u,h,g,x,C,P){var T,D,H,$,fe,me={x:null,y:null,onLine1:!1,onLine2:!1};return T=(P-x)*(u-i)-(C-g)*(h-r),T===0?me.x!==null&&me.y!==null?me:!1:(D=r-x,H=i-g,$=(C-g)*D-(P-x)*H,fe=(u-i)*D-(h-r)*H,D=$/T,H=fe/T,me.x=i+D*(u-i),me.y=r+D*(h-r),D>=0&&D<=1&&(me.onLine1=!0),H>=0&&H<=1&&(me.onLine2=!0),me.onLine1&&me.onLine2?[me.x,me.y]:!1)}rn.Line=rn.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return ks(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let u=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),u.addLatLng(r));let h=ks(u.toGeoJSON(15));this._doesSelfIntersect=h.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(h,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),u=this._layer.getLatLngs(),h=u[u.length-1];if(r.equals(u[0])||u.length>0&&r.equals(h)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let g=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(g,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),u=i[i.length-1],{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(i,u);i.pop(),this._layerGroup.removeLayer(u);let g=i[i.length-1],x=r.indexOf(g.getLatLng());r=r.slice(0,x+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(u,h,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=ut("tooltips.continueLine"):r=ut("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){this._layer?.setStyle(this.options.templineStyle),this._hintline?.setStyle(this.options.hintlineStyle)}}),rn.Polygon=rn.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=ut("tooltips.continueLine"):r=ut("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))}}),rn.Rectangle=rn.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let u=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._styleMarkers.push(u)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(u=>{L.DomUtil.addClass(u._icon,"visible"),u.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ut("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=qa(this._startMarker.getLatLng(),this._map),r=qa(this._hintMarker.getLatLng(),this._map),u=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(u),this.options.cursorMarker&&this._styleMarkers){let h=[];u.forEach(g=>{!g.equals(i,1e-8)&&!g.equals(r,1e-8)&&h.push(g)}),h.forEach((g,x)=>{try{this._styleMarkers[x].setLatLng(g)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),u=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||u.equals(r))return;let h=L.rectangle([u,r],this.options.pathOptions);if(this.options.rectangleAngle){let x=L.PM.Utils._getRotatedRectangle(u,r,this.options.rectangleAngle||0,this._map);h.setLatLngs(x),h.pm&&h.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},setStyle(){this._layer?.setStyle(this.options.pathOptions)}}),rn.CircleMarker=rn.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ut("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),u=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let u=i;u.target=this._hintMarker,this._handleSnapping(u)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),u=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(u),this._fireCreate(u),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),u=this._defaultRadius;if(this.options[this._editableOption]){let C=this._hintMarker.getLatLng();u=this._distanceCalculation(r,C),this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?u=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(u=this.options[this._maxRadiusOption])}let h={...this.options.pathOptions,radius:u},g=new this._BaseCircleClass(r,h);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),g.pm&&g.pm._updateHiddenPolyCircle(),this._fireCreate(g);let x=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(x))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),u=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?i=Ii(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(i=Ii(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),u=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),this._layer?.setStyle(i),this._hintline?.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),rn.Circle=rn.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function $n(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function mi(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function lo(i){return i.type==="Feature"?i.geometry:i}function ca(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function da(i,r,u){if(i!==null)for(var h,g,x,C,P,T,D,H=0,$=0,fe,me=i.type,Pe=me==="FeatureCollection",De=me==="Feature",Ie=Pe?i.features.length:1,mt=0;mt<Ie;mt++){D=Pe?i.features[mt].geometry:De?i.geometry:i,fe=D?D.type==="GeometryCollection":!1,P=fe?D.geometries.length:1;for(var G=0;G<P;G++){var J=0,se=0;if(C=fe?D.geometries[G]:D,C!==null){T=C.coordinates;var _e=C.type;switch(H=0,_e){case null:break;case"Point":if(r(T,$,mt,J,se)===!1)return!1;$++,J++;break;case"LineString":case"MultiPoint":for(h=0;h<T.length;h++){if(r(T[h],$,mt,J,se)===!1)return!1;$++,_e==="MultiPoint"&&J++}_e==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(h=0;h<T.length;h++){for(g=0;g<T[h].length-H;g++){if(r(T[h][g],$,mt,J,se)===!1)return!1;$++}_e==="MultiLineString"&&J++,_e==="Polygon"&&se++}_e==="Polygon"&&J++;break;case"MultiPolygon":for(h=0;h<T.length;h++){for(se=0,g=0;g<T[h].length;g++){for(x=0;x<T[h][g].length-H;x++){if(r(T[h][g][x],$,mt,J,se)===!1)return!1;$++}se++}J++}break;case"GeometryCollection":for(h=0;h<C.geometries.length;h++)if(da(C.geometries[h],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _n(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var u=0;u<i.features.length&&r(i.features[u],u)!==!1;u++);}function Wi(i,r,u){var h=u;return _n(i,function(g,x){x===0&&u===void 0?h=g:h=r(h,g,x)}),h}function Cs(i,r){var u,h,g,x,C,P,T,D,H,$,fe=0,me=i.type==="FeatureCollection",Pe=i.type==="Feature",De=me?i.features.length:1;for(u=0;u<De;u++){for(P=me?i.features[u].geometry:Pe?i.geometry:i,D=me?i.features[u].properties:Pe?i.properties:{},H=me?i.features[u].bbox:Pe?i.bbox:void 0,$=me?i.features[u].id:Pe?i.id:void 0,T=P?P.type==="GeometryCollection":!1,C=T?P.geometries.length:1,g=0;g<C;g++){if(x=T?P.geometries[g]:P,x===null){if(r(null,fe,D,H,$)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(x,fe,D,H,$)===!1)return!1;break}case"GeometryCollection":{for(h=0;h<x.geometries.length;h++)if(r(x.geometries[h],fe,D,H,$)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}fe++}}function Qn(i,r){Cs(i,function(u,h,g,x,C){var P=u===null?null:u.type;switch(P){case null:case"Point":case"LineString":case"Polygon":return r(Hi(u,g,{bbox:x,id:C}),h,0)===!1?!1:void 0}var T;switch(P){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var D=0;D<u.coordinates.length;D++){var H=u.coordinates[D],$={type:T,coordinates:H};if(r(Hi($,g),h,D)===!1)return!1}})}function Ya(i){if(!i)throw new Error("geojson is required");var r=[];return Qn(i,function(u){gr(u,r)}),Sn(r)}function gr(i,r){var u=[],h=i.geometry;if(h!==null){switch(h.type){case"Polygon":u=mi(h);break;case"LineString":u=[mi(h)]}u.forEach(function(g){var x=Xa(g,i.properties);x.forEach(function(C){C.id=r.length,r.push(C)})})}}function Xa(i,r){var u=[];return i.reduce(function(h,g){var x=Zi([h,g],r);return x.bbox=Wr(h,g),u.push(x),g}),u}function Wr(i,r){var u=i[0],h=i[1],g=r[0],x=r[1],C=u<g?u:g,P=h<x?h:x,T=u>g?u:g,D=h>x?h:x;return[C,P,T,D]}var bs=Ya,ji=E(ci(),1);function Ol(i,r){var u={},h=[];if(i.type==="LineString"&&(i=Hi(i)),r.type==="LineString"&&(r=Hi(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var g=Ni(i,r);return g&&h.push(g),Sn(h)}var x=(0,ji.default)();return x.load(bs(r)),_n(bs(i),function(C){_n(x.search(C),function(P){var T=Ni(C,P);if(T){var D=mi(T).join(",");u[D]||(u[D]=!0,h.push(T))}})}),Sn(h)}function Ni(i,r){var u=mi(i),h=mi(r);if(u.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(h.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var g=u[0][0],x=u[0][1],C=u[1][0],P=u[1][1],T=h[0][0],D=h[0][1],H=h[1][0],$=h[1][1],fe=($-D)*(C-g)-(H-T)*(P-x),me=(H-T)*(x-D)-($-D)*(g-T),Pe=(C-g)*(x-D)-(P-x)*(g-T);if(fe===0)return null;var De=me/fe,Ie=Pe/fe;if(De>=0&&De<=1&&Ie>=0&&Ie<=1){var mt=g+De*(C-g),G=x+De*(P-x);return pr([mt,G])}return null}var gi=Ol,fa=E(ci(),1);function uo(i,r,u){u===void 0&&(u={});var h=$n(i),g=$n(r),x=Un(g[1]-h[1]),C=Un(g[0]-h[0]),P=Un(h[1]),T=Un(g[1]),D=Math.pow(Math.sin(x/2),2)+Math.pow(Math.sin(C/2),2)*Math.cos(P)*Math.cos(T);return Rl(2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D)),u.units)}var ei=uo;function On(i){var r=i[0],u=i[1],h=i[2],g=i[3],x=ei(i.slice(0,2),[h,u]),C=ei(i.slice(0,2),[r,g]);if(x>=C){var P=(u+g)/2;return[r,P-(h-r)/2,h,P+(h-r)/2]}else{var T=(r+h)/2;return[T-(g-u)/2,u,T+(g-u)/2,g]}}var Il=On;function ti(i){var r=[1/0,1/0,-1/0,-1/0];return da(i,function(u){r[0]>u[0]&&(r[0]=u[0]),r[1]>u[1]&&(r[1]=u[1]),r[2]<u[0]&&(r[2]=u[0]),r[3]<u[1]&&(r[3]=u[1])}),r}ti.default=ti;var Es=ti;function _i(i,r){r===void 0&&(r={});var u=r.precision,h=r.coordinates,g=r.mutate;if(u=u==null||isNaN(u)?6:u,h=h==null||isNaN(h)?3:h,!i)throw new Error("<geojson> is required");if(typeof u!="number")throw new Error("<precision> must be a number");if(typeof h!="number")throw new Error("<coordinates> must be a number");(g===!1||g===void 0)&&(i=JSON.parse(JSON.stringify(i)));var x=Math.pow(10,u);return da(i,function(C){qr(C,x,h)}),i}function qr(i,r,u){i.length>u&&i.splice(u,i.length);for(var h=0;h<i.length;h++)i[h]=Math.round(i[h]*r)/r;return i}var ho=_i;function Ps(i,r,u){if(u===void 0&&(u={}),u.final===!0)return Ss(i,r);var h=$n(i),g=$n(r),x=Un(h[0]),C=Un(g[0]),P=Un(h[1]),T=Un(g[1]),D=Math.sin(C-x)*Math.cos(T),H=Math.cos(P)*Math.sin(T)-Math.sin(P)*Math.cos(T)*Math.cos(C-x);return Mn(Math.atan2(D,H))}function Ss(i,r){var u=Ps(r,i);return u=(u+180)%360,u}function Ms(i,r,u,h){h===void 0&&(h={});var g=$n(i),x=Un(g[0]),C=Un(g[1]),P=Un(u),T=mr(r,h.units),D=Math.asin(Math.sin(C)*Math.cos(T)+Math.cos(C)*Math.sin(T)*Math.cos(P)),H=x+Math.atan2(Math.sin(P)*Math.sin(T)*Math.cos(C),Math.cos(T)-Math.sin(C)*Math.sin(D)),$=Mn(H),fe=Mn(D);return pr([$,fe],h.properties)}function co(i,r,u){u===void 0&&(u={});var h=pr([1/0,1/0],{dist:1/0}),g=0;return Qn(i,function(x){for(var C=mi(x),P=0;P<C.length-1;P++){var T=pr(C[P]);T.properties.dist=ei(r,T,u);var D=pr(C[P+1]);D.properties.dist=ei(r,D,u);var H=ei(T,D,u),$=Math.max(T.properties.dist,D.properties.dist),fe=Ps(T,D),me=Ms(r,$,fe+90,u),Pe=Ms(r,$,fe-90,u),De=gi(Zi([me.geometry.coordinates,Pe.geometry.coordinates]),Zi([T.geometry.coordinates,D.geometry.coordinates])),Ie=null;De.features.length>0&&(Ie=De.features[0],Ie.properties.dist=ei(r,Ie,u),Ie.properties.location=g+ei(T,Ie,u)),T.properties.dist<h.properties.dist&&(h=T,h.properties.index=P,h.properties.location=g),D.properties.dist<h.properties.dist&&(h=D,h.properties.index=P+1,h.properties.location=g+H),Ie&&Ie.properties.dist<h.properties.dist&&(h=Ie,h.properties.index=P),g+=H}}),h}var Kr=co;function fo(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var u=ca(i),h=ca(r);if(u!=="LineString")throw new Error("line must be LineString");if(h==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(h==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var g=ho(r,{precision:7});switch(h){case"Point":return mo(i,g);case"MultiPoint":return po(i,g);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return po(i,gi(i,g))}}function po(i,r){var u=[],h=(0,fa.default)();return Qn(r,function(g){if(u.forEach(function(P,T){P.id=T}),!u.length)u=mo(i,g).features,u.forEach(function(P){P.bbox||(P.bbox=Il(Es(P)))}),h.load(Sn(u));else{var x=h.search(g);if(x.features.length){var C=Gn(g,x);u=u.filter(function(P){return P.id!==C.id}),h.remove(C),_n(mo(C,g),function(P){u.push(P),h.insert(P)})}}}),Sn(u)}function mo(i,r){var u=[],h=mi(i)[0],g=mi(i)[i.geometry.coordinates.length-1];if(yi(h,$n(r))||yi(g,$n(r)))return Sn([i]);var x=(0,fa.default)(),C=bs(i);x.load(C);var P=x.search(r);if(!P.features.length)return Sn([i]);var T=Gn(r,P),D=[h],H=Wi(C,function($,fe,me){var Pe=mi(fe)[1],De=$n(r);return me===T.id?($.push(De),u.push(Zi($)),yi(De,Pe)?[De]:[De,Pe]):($.push(Pe),$)},D);return H.length>1&&u.push(Zi(H)),Sn(u)}function Gn(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var u,h=1/0;return _n(r,function(g){var x=Kr(g,i),C=x.properties.dist;C<h&&(u=g,h=C)}),u}function yi(i,r){return i[0]===r[0]&&i[1]===r[1]}var Qa=fo;function Jr(i,r,u){if(u===void 0&&(u={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var h=$n(i),g=lo(r),x=g.type,C=r.bbox,P=g.coordinates;if(C&&ma(h,C)===!1)return!1;x==="Polygon"&&(P=[P]);for(var T=!1,D=0;D<P.length&&!T;D++)if(pa(h,P[D][0],u.ignoreBoundary)){for(var H=!1,$=1;$<P[D].length&&!H;)pa(h,P[D][$],!u.ignoreBoundary)&&(H=!0),$++;H||(T=!0)}return T}function pa(i,r,u){var h=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var g=0,x=r.length-1;g<r.length;x=g++){var C=r[g][0],P=r[g][1],T=r[x][0],D=r[x][1],H=i[1]*(C-T)+P*(T-i[0])+D*(i[0]-C)===0&&(C-i[0])*(T-i[0])<=0&&(P-i[1])*(D-i[1])<=0;if(H)return!u;var $=P>i[1]!=D>i[1]&&i[0]<(T-C)*(i[1]-P)/(D-P)+C;$&&(h=!h)}return h}function ma(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function ga(i,r,u){u===void 0&&(u={});for(var h=$n(i),g=mi(r),x=0;x<g.length-1;x++){var C=!1;if(u.ignoreEndVertices&&(x===0&&(C="start"),x===g.length-2&&(C="end"),x===0&&x+1===g.length-1&&(C="both")),vi(g[x],g[x+1],h,C,typeof u.epsilon>"u"?null:u.epsilon))return!0}return!1}function vi(i,r,u,h,g){var x=u[0],C=u[1],P=i[0],T=i[1],D=r[0],H=r[1],$=u[0]-P,fe=u[1]-T,me=D-P,Pe=H-T,De=$*Pe-fe*me;if(g!==null){if(Math.abs(De)>g)return!1}else if(De!==0)return!1;if(h){if(h==="start")return Math.abs(me)>=Math.abs(Pe)?me>0?P<x&&x<=D:D<=x&&x<P:Pe>0?T<C&&C<=H:H<=C&&C<T;if(h==="end")return Math.abs(me)>=Math.abs(Pe)?me>0?P<=x&&x<D:D<x&&x<=P:Pe>0?T<=C&&C<H:H<C&&C<=T;if(h==="both")return Math.abs(me)>=Math.abs(Pe)?me>0?P<x&&x<D:D<x&&x<P:Pe>0?T<C&&C<H:H<C&&C<T}else return Math.abs(me)>=Math.abs(Pe)?me>0?P<=x&&x<=D:D<=x&&x<=P:Pe>0?T<=C&&C<=H:H<=C&&C<=T;return!1}var qi=ga;function Yr(i,r){var u=lo(i),h=lo(r),g=u.type,x=h.type,C=u.coordinates,P=h.coordinates;switch(g){case"Point":switch(x){case"Point":return _r(C,P);default:throw new Error("feature2 "+x+" geometry not supported")}case"MultiPoint":switch(x){case"Point":return Xr(u,h);case"MultiPoint":return Bs(u,h);default:throw new Error("feature2 "+x+" geometry not supported")}case"LineString":switch(x){case"Point":return qi(h,u,{ignoreEndVertices:!0});case"LineString":return Ki(u,h);case"MultiPoint":return go(u,h);default:throw new Error("feature2 "+x+" geometry not supported")}case"Polygon":switch(x){case"Point":return Jr(h,u,{ignoreBoundary:!0});case"LineString":return Qr(u,h);case"Polygon":return Ji(u,h);case"MultiPoint":return el(u,h);default:throw new Error("feature2 "+x+" geometry not supported")}default:throw new Error("feature1 "+g+" geometry not supported")}}function Xr(i,r){var u,h=!1;for(u=0;u<i.coordinates.length;u++)if(_r(i.coordinates[u],r.coordinates)){h=!0;break}return h}function Bs(i,r){for(var u=0,h=r.coordinates;u<h.length;u++){for(var g=h[u],x=!1,C=0,P=i.coordinates;C<P.length;C++){var T=P[C];if(_r(g,T)){x=!0;break}}if(!x)return!1}return!0}function go(i,r){for(var u=!1,h=0,g=r.coordinates;h<g.length;h++){var x=g[h];if(qi(x,i,{ignoreEndVertices:!0})&&(u=!0),!qi(x,i))return!1}return!!u}function el(i,r){for(var u=0,h=r.coordinates;u<h.length;u++){var g=h[u];if(!Jr(g,i,{ignoreBoundary:!0}))return!1}return!0}function Ki(i,r){for(var u=!1,h=0,g=r.coordinates;h<g.length;h++){var x=g[h];if(qi({type:"Point",coordinates:x},i,{ignoreEndVertices:!0})&&(u=!0),!qi({type:"Point",coordinates:x},i,{ignoreEndVertices:!1}))return!1}return u}function Qr(i,r){var u=!1,h=0,g=Es(i),x=Es(r);if(!_o(g,x))return!1;for(h;h<r.coordinates.length-1;h++){var C=tl(r.coordinates[h],r.coordinates[h+1]);if(Jr({type:"Point",coordinates:C},i,{ignoreBoundary:!0})){u=!0;break}}return u}function Ji(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var u=Es(i),h=Es(r);if(!_o(u,h))return!1;for(var g=lo(r).coordinates,x=0,C=g;x<C.length;x++)for(var P=C[x],T=0,D=P;T<D.length;T++){var H=D[T];if(!Jr(H,i))return!1}return!0}function _o(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function _r(i,r){return i[0]===r[0]&&i[1]===r[1]}function tl(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var wi=E(Gi()),yo=i=>()=>i,Ts=i=>{let r=i?(u,h)=>h.minus(u).abs().isLessThanOrEqualTo(i):yo(!1);return(u,h)=>r(u,h)?0:u.comparedTo(h)};function es(i){let r=i?(u,h,g,x,C)=>u.exponentiatedBy(2).isLessThanOrEqualTo(x.minus(h).exponentiatedBy(2).plus(C.minus(g).exponentiatedBy(2)).times(i)):yo(!1);return(u,h,g)=>{let x=u.x,C=u.y,P=g.x,T=g.y,D=C.minus(T).times(h.x.minus(P)).minus(x.minus(P).times(h.y.minus(T)));return r(D,x,C,P,T)?0:D.comparedTo(0)}}var nl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,In=Math.ceil,Yt=Math.floor,sn="[BigNumber Error] ",_a=sn+"Number primitive has more than 15 significant digits: ",ni=1e14,it=14,vo=9007199254740991,As=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],xi=1e7,ht=1e9;function wo(i){var r,u,h,g=G.prototype={constructor:G,toString:null,valueOf:null},x=new G(1),C=20,P=4,T=-7,D=21,H=-1e7,$=1e7,fe=!1,me=1,Pe=0,De={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ie="0123456789abcdefghijklmnopqrstuvwxyz",mt=!0;function G(B,O){var F,j,z,U,X,K,ee,ue,ce=this;if(!(ce instanceof G))return new G(B,O);if(O==null){if(B&&B._isBigNumber===!0){ce.s=B.s,!B.c||B.e>$?ce.c=ce.e=null:B.e<H?ce.c=[ce.e=0]:(ce.e=B.e,ce.c=B.c.slice());return}if((K=typeof B=="number")&&B*0==0){if(ce.s=1/B<0?(B=-B,-1):1,B===~~B){for(U=0,X=B;X>=10;X/=10,U++);U>$?ce.c=ce.e=null:(ce.e=U,ce.c=[B]);return}ue=String(B)}else{if(!nl.test(ue=String(B)))return h(ce,ue,K);ce.s=ue.charCodeAt(0)==45?(ue=ue.slice(1),-1):1}(U=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(X=ue.search(/e/i))>0?(U<0&&(U=X),U+=+ue.slice(X+1),ue=ue.substring(0,X)):U<0&&(U=ue.length)}else{if(t(O,2,Ie.length,"Base"),O==10&&mt)return ce=new G(B),oe(ce,C+ce.e+1,P);if(ue=String(B),K=typeof B=="number"){if(B*0!=0)return h(ce,ue,K,O);if(ce.s=1/B<0?(ue=ue.slice(1),-1):1,G.DEBUG&&ue.replace(/^0\.0*|\./,"").length>15)throw Error(_a+B)}else ce.s=ue.charCodeAt(0)===45?(ue=ue.slice(1),-1):1;for(F=Ie.slice(0,O),U=X=0,ee=ue.length;X<ee;X++)if(F.indexOf(j=ue.charAt(X))<0){if(j=="."){if(X>U){U=ee;continue}}else if(!z&&(ue==ue.toUpperCase()&&(ue=ue.toLowerCase())||ue==ue.toLowerCase()&&(ue=ue.toUpperCase()))){z=!0,X=-1,U=0;continue}return h(ce,String(B),K,O)}K=!1,ue=u(ue,O,10,ce.s),(U=ue.indexOf("."))>-1?ue=ue.replace(".",""):U=ue.length}for(X=0;ue.charCodeAt(X)===48;X++);for(ee=ue.length;ue.charCodeAt(--ee)===48;);if(ue=ue.slice(X,++ee)){if(ee-=X,K&&G.DEBUG&&ee>15&&(B>vo||B!==Yt(B)))throw Error(_a+ce.s*B);if((U=U-X-1)>$)ce.c=ce.e=null;else if(U<H)ce.c=[ce.e=0];else{if(ce.e=U,ce.c=[],X=(U+1)%it,U<0&&(X+=it),X<ee){for(X&&ce.c.push(+ue.slice(0,X)),ee-=it;X<ee;)ce.c.push(+ue.slice(X,X+=it));X=it-(ue=ue.slice(X)).length}else X-=ee;for(;X--;ue+="0");ce.c.push(+ue)}}else ce.c=[ce.e=0]}G.clone=wo,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(B){var O,F;if(B!=null)if(typeof B=="object"){if(B.hasOwnProperty(O="DECIMAL_PLACES")&&(F=B[O],t(F,0,ht,O),C=F),B.hasOwnProperty(O="ROUNDING_MODE")&&(F=B[O],t(F,0,8,O),P=F),B.hasOwnProperty(O="EXPONENTIAL_AT")&&(F=B[O],F&&F.pop?(t(F[0],-ht,0,O),t(F[1],0,ht,O),T=F[0],D=F[1]):(t(F,-ht,ht,O),T=-(D=F<0?-F:F))),B.hasOwnProperty(O="RANGE"))if(F=B[O],F&&F.pop)t(F[0],-ht,-1,O),t(F[1],1,ht,O),H=F[0],$=F[1];else if(t(F,-ht,ht,O),F)H=-($=F<0?-F:F);else throw Error(sn+O+" cannot be zero: "+F);if(B.hasOwnProperty(O="CRYPTO"))if(F=B[O],F===!!F)if(F)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))fe=F;else throw fe=!F,Error(sn+"crypto unavailable");else fe=F;else throw Error(sn+O+" not true or false: "+F);if(B.hasOwnProperty(O="MODULO_MODE")&&(F=B[O],t(F,0,9,O),me=F),B.hasOwnProperty(O="POW_PRECISION")&&(F=B[O],t(F,0,ht,O),Pe=F),B.hasOwnProperty(O="FORMAT"))if(F=B[O],typeof F=="object")De=F;else throw Error(sn+O+" not an object: "+F);if(B.hasOwnProperty(O="ALPHABET"))if(F=B[O],typeof F=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(F))mt=F.slice(0,10)=="0123456789",Ie=F;else throw Error(sn+O+" invalid: "+F)}else throw Error(sn+"Object expected: "+B);return{DECIMAL_PLACES:C,ROUNDING_MODE:P,EXPONENTIAL_AT:[T,D],RANGE:[H,$],CRYPTO:fe,MODULO_MODE:me,POW_PRECISION:Pe,FORMAT:De,ALPHABET:Ie}},G.isBigNumber=function(B){if(!B||B._isBigNumber!==!0)return!1;if(!G.DEBUG)return!0;var O,F,j=B.c,z=B.e,U=B.s;e:if({}.toString.call(j)=="[object Array]"){if((U===1||U===-1)&&z>=-ht&&z<=ht&&z===Yt(z)){if(j[0]===0){if(z===0&&j.length===1)return!0;break e}if(O=(z+1)%it,O<1&&(O+=it),String(j[0]).length==O){for(O=0;O<j.length;O++)if(F=j[O],F<0||F>=ni||F!==Yt(F))break e;if(F!==0)return!0}}}else if(j===null&&z===null&&(U===null||U===1||U===-1))return!0;throw Error(sn+"Invalid BigNumber: "+B)},G.maximum=G.max=function(){return se(arguments,-1)},G.minimum=G.min=function(){return se(arguments,1)},G.random=(function(){var B=9007199254740992,O=Math.random()*B&2097151?function(){return Yt(Math.random()*B)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(F){var j,z,U,X,K,ee=0,ue=[],ce=new G(x);if(F==null?F=C:t(F,0,ht),X=In(F/it),fe)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(X*=2));ee<X;)K=j[ee]*131072+(j[ee+1]>>>11),K>=9e15?(z=crypto.getRandomValues(new Uint32Array(2)),j[ee]=z[0],j[ee+1]=z[1]):(ue.push(K%1e14),ee+=2);ee=X/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(X*=7);ee<X;)K=(j[ee]&31)*281474976710656+j[ee+1]*1099511627776+j[ee+2]*4294967296+j[ee+3]*16777216+(j[ee+4]<<16)+(j[ee+5]<<8)+j[ee+6],K>=9e15?crypto.randomBytes(7).copy(j,ee):(ue.push(K%1e14),ee+=7);ee=X/7}else throw fe=!1,Error(sn+"crypto unavailable");if(!fe)for(;ee<X;)K=O(),K<9e15&&(ue[ee++]=K%1e14);for(X=ue[--ee],F%=it,X&&F&&(K=As[it-F],ue[ee]=Yt(X/K)*K);ue[ee]===0;ue.pop(),ee--);if(ee<0)ue=[U=0];else{for(U=-1;ue[0]===0;ue.splice(0,1),U-=it);for(ee=1,K=ue[0];K>=10;K/=10,ee++);ee<it&&(U-=it-ee)}return ce.e=U,ce.c=ue,ce}})(),G.sum=function(){for(var B=1,O=arguments,F=new G(O[0]);B<O.length;)F=F.plus(O[B++]);return F},u=(function(){var B="0123456789";function O(F,j,z,U){for(var X,K=[0],ee,ue=0,ce=F.length;ue<ce;){for(ee=K.length;ee--;K[ee]*=j);for(K[0]+=U.indexOf(F.charAt(ue++)),X=0;X<K.length;X++)K[X]>z-1&&(K[X+1]==null&&(K[X+1]=0),K[X+1]+=K[X]/z|0,K[X]%=z)}return K.reverse()}return function(F,j,z,U,X){var K,ee,ue,ce,Ce,je,ze,$e,Ct=F.indexOf("."),bt=C,_t=P;for(Ct>=0&&(ce=Pe,Pe=0,F=F.replace(".",""),$e=new G(j),je=$e.pow(F.length-Ct),Pe=ce,$e.c=O(v(on(je.c),je.e,"0"),10,z,B),$e.e=$e.c.length),ze=O(F,j,z,X?(K=Ie,B):(K=B,Ie)),ue=ce=ze.length;ze[--ce]==0;ze.pop());if(!ze[0])return K.charAt(0);if(Ct<0?--ue:(je.c=ze,je.e=ue,je.s=U,je=r(je,$e,bt,_t,z),ze=je.c,Ce=je.r,ue=je.e),ee=ue+bt+1,Ct=ze[ee],ce=z/2,Ce=Ce||ee<0||ze[ee+1]!=null,Ce=_t<4?(Ct!=null||Ce)&&(_t==0||_t==(je.s<0?3:2)):Ct>ce||Ct==ce&&(_t==4||Ce||_t==6&&ze[ee-1]&1||_t==(je.s<0?8:7)),ee<1||!ze[0])F=Ce?v(K.charAt(1),-bt,K.charAt(0)):K.charAt(0);else{if(ze.length=ee,Ce)for(--z;++ze[--ee]>z;)ze[ee]=0,ee||(++ue,ze=[1].concat(ze));for(ce=ze.length;!ze[--ce];);for(Ct=0,F="";Ct<=ce;F+=K.charAt(ze[Ct++]));F=v(F,ue,K.charAt(0))}return F}})(),r=(function(){function B(j,z,U){var X,K,ee,ue,ce=0,Ce=j.length,je=z%xi,ze=z/xi|0;for(j=j.slice();Ce--;)ee=j[Ce]%xi,ue=j[Ce]/xi|0,X=ze*ee+ue*je,K=je*ee+X%xi*xi+ce,ce=(K/U|0)+(X/xi|0)+ze*ue,j[Ce]=K%U;return ce&&(j=[ce].concat(j)),j}function O(j,z,U,X){var K,ee;if(U!=X)ee=U>X?1:-1;else for(K=ee=0;K<U;K++)if(j[K]!=z[K]){ee=j[K]>z[K]?1:-1;break}return ee}function F(j,z,U,X){for(var K=0;U--;)j[U]-=K,K=j[U]<z[U]?1:0,j[U]=K*X+j[U]-z[U];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,z,U,X,K){var ee,ue,ce,Ce,je,ze,$e,Ct,bt,_t,Bt,qt,va,wa,Ft,oi,js,Vn=j.s==z.s?1:-1,fn=j.c,$t=z.c;if(!fn||!fn[0]||!$t||!$t[0])return new G(!j.s||!z.s||(fn?$t&&fn[0]==$t[0]:!$t)?NaN:fn&&fn[0]==0||!$t?Vn*0:Vn/0);for(Ct=new G(Vn),bt=Ct.c=[],ue=j.e-z.e,Vn=U+ue+1,K||(K=ni,ue=dn(j.e/it)-dn(z.e/it),Vn=Vn/it|0),ce=0;$t[ce]==(fn[ce]||0);ce++);if($t[ce]>(fn[ce]||0)&&ue--,Vn<0)bt.push(1),Ce=!0;else{for(wa=fn.length,oi=$t.length,ce=0,Vn+=2,je=Yt(K/($t[0]+1)),je>1&&($t=B($t,je,K),fn=B(fn,je,K),oi=$t.length,wa=fn.length),va=oi,_t=fn.slice(0,oi),Bt=_t.length;Bt<oi;_t[Bt++]=0);js=$t.slice(),js=[0].concat(js),Ft=$t[0],$t[1]>=K/2&&Ft++;do{if(je=0,ee=O($t,_t,oi,Bt),ee<0){if(qt=_t[0],oi!=Bt&&(qt=qt*K+(_t[1]||0)),je=Yt(qt/Ft),je>1)for(je>=K&&(je=K-1),ze=B($t,je,K),$e=ze.length,Bt=_t.length;O(ze,_t,$e,Bt)==1;)je--,F(ze,oi<$e?js:$t,$e,K),$e=ze.length,ee=1;else je==0&&(ee=je=1),ze=$t.slice(),$e=ze.length;if($e<Bt&&(ze=[0].concat(ze)),F(_t,ze,Bt,K),Bt=_t.length,ee==-1)for(;O($t,_t,oi,Bt)<1;)je++,F(_t,oi<Bt?js:$t,Bt,K),Bt=_t.length}else ee===0&&(je++,_t=[0]);bt[ce++]=je,_t[0]?_t[Bt++]=fn[va]||0:(_t=[fn[va]],Bt=1)}while((va++<wa||_t[0]!=null)&&Vn--);Ce=_t[0]!=null,bt[0]||bt.splice(0,1)}if(K==ni){for(ce=1,Vn=bt[0];Vn>=10;Vn/=10,ce++);oe(Ct,U+(Ct.e=ce+ue*it-1)+1,X,Ce)}else Ct.e=ue,Ct.r=+Ce;return Ct}})();function J(B,O,F,j){var z,U,X,K,ee;if(F==null?F=P:t(F,0,8),!B.c)return B.toString();if(z=B.c[0],X=B.e,O==null)ee=on(B.c),ee=j==1||j==2&&(X<=T||X>=D)?d(ee,X):v(ee,X,"0");else if(B=oe(new G(B),O,F),U=B.e,ee=on(B.c),K=ee.length,j==1||j==2&&(O<=U||U<=T)){for(;K<O;ee+="0",K++);ee=d(ee,U)}else if(O-=X,ee=v(ee,U,"0"),U+1>K){if(--O>0)for(ee+=".";O--;ee+="0");}else if(O+=U-K,O>0)for(U+1==K&&(ee+=".");O--;ee+="0");return B.s<0&&z?"-"+ee:ee}function se(B,O){for(var F,j,z=1,U=new G(B[0]);z<B.length;z++)j=new G(B[z]),(!j.s||(F=Yi(U,j))===O||F===0&&U.s===O)&&(U=j);return U}function _e(B,O,F){for(var j=1,z=O.length;!O[--z];O.pop());for(z=O[0];z>=10;z/=10,j++);return(F=j+F*it-1)>$?B.c=B.e=null:F<H?B.c=[B.e=0]:(B.e=F,B.c=O),B}h=(function(){var B=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,F=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,z=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,X,K,ee){var ue,ce=K?X:X.replace(z,"");if(j.test(ce))U.s=isNaN(ce)?null:ce<0?-1:1;else{if(!K&&(ce=ce.replace(B,function(Ce,je,ze){return ue=(ze=ze.toLowerCase())=="x"?16:ze=="b"?2:8,!ee||ee==ue?je:Ce}),ee&&(ue=ee,ce=ce.replace(O,"$1").replace(F,"0.$1")),X!=ce))return new G(ce,ue);if(G.DEBUG)throw Error(sn+"Not a"+(ee?" base "+ee:"")+" number: "+X);U.s=null}U.c=U.e=null}})();function oe(B,O,F,j){var z,U,X,K,ee,ue,ce,Ce=B.c,je=As;if(Ce){e:{for(z=1,K=Ce[0];K>=10;K/=10,z++);if(U=O-z,U<0)U+=it,X=O,ee=Ce[ue=0],ce=Yt(ee/je[z-X-1]%10);else if(ue=In((U+1)/it),ue>=Ce.length)if(j){for(;Ce.length<=ue;Ce.push(0));ee=ce=0,z=1,U%=it,X=U-it+1}else break e;else{for(ee=K=Ce[ue],z=1;K>=10;K/=10,z++);U%=it,X=U-it+z,ce=X<0?0:Yt(ee/je[z-X-1]%10)}if(j=j||O<0||Ce[ue+1]!=null||(X<0?ee:ee%je[z-X-1]),j=F<4?(ce||j)&&(F==0||F==(B.s<0?3:2)):ce>5||ce==5&&(F==4||j||F==6&&(U>0?X>0?ee/je[z-X]:0:Ce[ue-1])%10&1||F==(B.s<0?8:7)),O<1||!Ce[0])return Ce.length=0,j?(O-=B.e+1,Ce[0]=je[(it-O%it)%it],B.e=-O||0):Ce[0]=B.e=0,B;if(U==0?(Ce.length=ue,K=1,ue--):(Ce.length=ue+1,K=je[it-U],Ce[ue]=X>0?Yt(ee/je[z-X]%je[X])*K:0),j)for(;;)if(ue==0){for(U=1,X=Ce[0];X>=10;X/=10,U++);for(X=Ce[0]+=K,K=1;X>=10;X/=10,K++);U!=K&&(B.e++,Ce[0]==ni&&(Ce[0]=1));break}else{if(Ce[ue]+=K,Ce[ue]!=ni)break;Ce[ue--]=0,K=1}for(U=Ce.length;Ce[--U]===0;Ce.pop());}B.e>$?B.c=B.e=null:B.e<H&&(B.c=[B.e=0])}return B}function de(B){var O,F=B.e;return F===null?B.toString():(O=on(B.c),O=F<=T||F>=D?d(O,F):v(O,F,"0"),B.s<0?"-"+O:O)}return g.absoluteValue=g.abs=function(){var B=new G(this);return B.s<0&&(B.s=1),B},g.comparedTo=function(B,O){return Yi(this,new G(B,O))},g.decimalPlaces=g.dp=function(B,O){var F,j,z,U=this;if(B!=null)return t(B,0,ht),O==null?O=P:t(O,0,8),oe(new G(U),B+U.e+1,O);if(!(F=U.c))return null;if(j=((z=F.length-1)-dn(this.e/it))*it,z=F[z])for(;z%10==0;z/=10,j--);return j<0&&(j=0),j},g.dividedBy=g.div=function(B,O){return r(this,new G(B,O),C,P)},g.dividedToIntegerBy=g.idiv=function(B,O){return r(this,new G(B,O),0,1)},g.exponentiatedBy=g.pow=function(B,O){var F,j,z,U,X,K,ee,ue,ce,Ce=this;if(B=new G(B),B.c&&!B.isInteger())throw Error(sn+"Exponent not an integer: "+de(B));if(O!=null&&(O=new G(O)),K=B.e>14,!Ce.c||!Ce.c[0]||Ce.c[0]==1&&!Ce.e&&Ce.c.length==1||!B.c||!B.c[0])return ce=new G(Math.pow(+de(Ce),K?B.s*(2-s(B)):+de(B))),O?ce.mod(O):ce;if(ee=B.s<0,O){if(O.c?!O.c[0]:!O.s)return new G(NaN);j=!ee&&Ce.isInteger()&&O.isInteger(),j&&(Ce=Ce.mod(O))}else{if(B.e>9&&(Ce.e>0||Ce.e<-1||(Ce.e==0?Ce.c[0]>1||K&&Ce.c[1]>=24e7:Ce.c[0]<8e13||K&&Ce.c[0]<=9999975e7)))return U=Ce.s<0&&s(B)?-0:0,Ce.e>-1&&(U=1/U),new G(ee?1/U:U);Pe&&(U=In(Pe/it+2))}for(K?(F=new G(.5),ee&&(B.s=1),ue=s(B)):(z=Math.abs(+de(B)),ue=z%2),ce=new G(x);;){if(ue){if(ce=ce.times(Ce),!ce.c)break;U?ce.c.length>U&&(ce.c.length=U):j&&(ce=ce.mod(O))}if(z){if(z=Yt(z/2),z===0)break;ue=z%2}else if(B=B.times(F),oe(B,B.e+1,1),B.e>14)ue=s(B);else{if(z=+de(B),z===0)break;ue=z%2}Ce=Ce.times(Ce),U?Ce.c&&Ce.c.length>U&&(Ce.c.length=U):j&&(Ce=Ce.mod(O))}return j?ce:(ee&&(ce=x.div(ce)),O?ce.mod(O):U?oe(ce,Pe,P,X):ce)},g.integerValue=function(B){var O=new G(this);return B==null?B=P:t(B,0,8),oe(O,O.e+1,B)},g.isEqualTo=g.eq=function(B,O){return Yi(this,new G(B,O))===0},g.isFinite=function(){return!!this.c},g.isGreaterThan=g.gt=function(B,O){return Yi(this,new G(B,O))>0},g.isGreaterThanOrEqualTo=g.gte=function(B,O){return(O=Yi(this,new G(B,O)))===1||O===0},g.isInteger=function(){return!!this.c&&dn(this.e/it)>this.c.length-2},g.isLessThan=g.lt=function(B,O){return Yi(this,new G(B,O))<0},g.isLessThanOrEqualTo=g.lte=function(B,O){return(O=Yi(this,new G(B,O)))===-1||O===0},g.isNaN=function(){return!this.s},g.isNegative=function(){return this.s<0},g.isPositive=function(){return this.s>0},g.isZero=function(){return!!this.c&&this.c[0]==0},g.minus=function(B,O){var F,j,z,U,X=this,K=X.s;if(B=new G(B,O),O=B.s,!K||!O)return new G(NaN);if(K!=O)return B.s=-O,X.plus(B);var ee=X.e/it,ue=B.e/it,ce=X.c,Ce=B.c;if(!ee||!ue){if(!ce||!Ce)return ce?(B.s=-O,B):new G(Ce?X:NaN);if(!ce[0]||!Ce[0])return Ce[0]?(B.s=-O,B):new G(ce[0]?X:P==3?-0:0)}if(ee=dn(ee),ue=dn(ue),ce=ce.slice(),K=ee-ue){for((U=K<0)?(K=-K,z=ce):(ue=ee,z=Ce),z.reverse(),O=K;O--;z.push(0));z.reverse()}else for(j=(U=(K=ce.length)<(O=Ce.length))?K:O,K=O=0;O<j;O++)if(ce[O]!=Ce[O]){U=ce[O]<Ce[O];break}if(U&&(z=ce,ce=Ce,Ce=z,B.s=-B.s),O=(j=Ce.length)-(F=ce.length),O>0)for(;O--;ce[F++]=0);for(O=ni-1;j>K;){if(ce[--j]<Ce[j]){for(F=j;F&&!ce[--F];ce[F]=O);--ce[F],ce[j]+=ni}ce[j]-=Ce[j]}for(;ce[0]==0;ce.splice(0,1),--ue);return ce[0]?_e(B,ce,ue):(B.s=P==3?-1:1,B.c=[B.e=0],B)},g.modulo=g.mod=function(B,O){var F,j,z=this;return B=new G(B,O),!z.c||!B.s||B.c&&!B.c[0]?new G(NaN):!B.c||z.c&&!z.c[0]?new G(z):(me==9?(j=B.s,B.s=1,F=r(z,B,0,3),B.s=j,F.s*=j):F=r(z,B,0,me),B=z.minus(F.times(B)),!B.c[0]&&me==1&&(B.s=z.s),B)},g.multipliedBy=g.times=function(B,O){var F,j,z,U,X,K,ee,ue,ce,Ce,je,ze,$e,Ct,bt,_t=this,Bt=_t.c,qt=(B=new G(B,O)).c;if(!Bt||!qt||!Bt[0]||!qt[0])return!_t.s||!B.s||Bt&&!Bt[0]&&!qt||qt&&!qt[0]&&!Bt?B.c=B.e=B.s=null:(B.s*=_t.s,!Bt||!qt?B.c=B.e=null:(B.c=[0],B.e=0)),B;for(j=dn(_t.e/it)+dn(B.e/it),B.s*=_t.s,ee=Bt.length,Ce=qt.length,ee<Ce&&($e=Bt,Bt=qt,qt=$e,z=ee,ee=Ce,Ce=z),z=ee+Ce,$e=[];z--;$e.push(0));for(Ct=ni,bt=xi,z=Ce;--z>=0;){for(F=0,je=qt[z]%bt,ze=qt[z]/bt|0,X=ee,U=z+X;U>z;)ue=Bt[--X]%bt,ce=Bt[X]/bt|0,K=ze*ue+ce*je,ue=je*ue+K%bt*bt+$e[U]+F,F=(ue/Ct|0)+(K/bt|0)+ze*ce,$e[U--]=ue%Ct;$e[U]=F}return F?++j:$e.splice(0,1),_e(B,$e,j)},g.negated=function(){var B=new G(this);return B.s=-B.s||null,B},g.plus=function(B,O){var F,j=this,z=j.s;if(B=new G(B,O),O=B.s,!z||!O)return new G(NaN);if(z!=O)return B.s=-O,j.minus(B);var U=j.e/it,X=B.e/it,K=j.c,ee=B.c;if(!U||!X){if(!K||!ee)return new G(z/0);if(!K[0]||!ee[0])return ee[0]?B:new G(K[0]?j:z*0)}if(U=dn(U),X=dn(X),K=K.slice(),z=U-X){for(z>0?(X=U,F=ee):(z=-z,F=K),F.reverse();z--;F.push(0));F.reverse()}for(z=K.length,O=ee.length,z-O<0&&(F=ee,ee=K,K=F,O=z),z=0;O;)z=(K[--O]=K[O]+ee[O]+z)/ni|0,K[O]=ni===K[O]?0:K[O]%ni;return z&&(K=[z].concat(K),++X),_e(B,K,X)},g.precision=g.sd=function(B,O){var F,j,z,U=this;if(B!=null&&B!==!!B)return t(B,1,ht),O==null?O=P:t(O,0,8),oe(new G(U),B,O);if(!(F=U.c))return null;if(z=F.length-1,j=z*it+1,z=F[z]){for(;z%10==0;z/=10,j--);for(z=F[0];z>=10;z/=10,j++);}return B&&U.e+1>j&&(j=U.e+1),j},g.shiftedBy=function(B){return t(B,-vo,vo),this.times("1e"+B)},g.squareRoot=g.sqrt=function(){var B,O,F,j,z,U=this,X=U.c,K=U.s,ee=U.e,ue=C+4,ce=new G("0.5");if(K!==1||!X||!X[0])return new G(!K||K<0&&(!X||X[0])?NaN:X?U:1/0);if(K=Math.sqrt(+de(U)),K==0||K==1/0?(O=on(X),(O.length+ee)%2==0&&(O+="0"),K=Math.sqrt(+O),ee=dn((ee+1)/2)-(ee<0||ee%2),K==1/0?O="5e"+ee:(O=K.toExponential(),O=O.slice(0,O.indexOf("e")+1)+ee),F=new G(O)):F=new G(K+""),F.c[0]){for(ee=F.e,K=ee+ue,K<3&&(K=0);;)if(z=F,F=ce.times(z.plus(r(U,z,ue,1))),on(z.c).slice(0,K)===(O=on(F.c)).slice(0,K))if(F.e<ee&&--K,O=O.slice(K-3,K+1),O=="9999"||!j&&O=="4999"){if(!j&&(oe(z,z.e+C+2,0),z.times(z).eq(U))){F=z;break}ue+=4,K+=4,j=1}else{(!+O||!+O.slice(1)&&O.charAt(0)=="5")&&(oe(F,F.e+C+2,1),B=!F.times(F).eq(U));break}}return oe(F,F.e+C+1,P,B)},g.toExponential=function(B,O){return B!=null&&(t(B,0,ht),B++),J(this,B,O,1)},g.toFixed=function(B,O){return B!=null&&(t(B,0,ht),B=B+this.e+1),J(this,B,O)},g.toFormat=function(B,O,F){var j,z=this;if(F==null)B!=null&&O&&typeof O=="object"?(F=O,O=null):B&&typeof B=="object"?(F=B,B=O=null):F=De;else if(typeof F!="object")throw Error(sn+"Argument not an object: "+F);if(j=z.toFixed(B,O),z.c){var U,X=j.split("."),K=+F.groupSize,ee=+F.secondaryGroupSize,ue=F.groupSeparator||"",ce=X[0],Ce=X[1],je=z.s<0,ze=je?ce.slice(1):ce,$e=ze.length;if(ee&&(U=K,K=ee,ee=U,$e-=U),K>0&&$e>0){for(U=$e%K||K,ce=ze.substr(0,U);U<$e;U+=K)ce+=ue+ze.substr(U,K);ee>0&&(ce+=ue+ze.slice(U)),je&&(ce="-"+ce)}j=Ce?ce+(F.decimalSeparator||"")+((ee=+F.fractionGroupSize)?Ce.replace(new RegExp("\\d{"+ee+"}\\B","g"),"$&"+(F.fractionGroupSeparator||"")):Ce):ce}return(F.prefix||"")+j+(F.suffix||"")},g.toFraction=function(B){var O,F,j,z,U,X,K,ee,ue,ce,Ce,je,ze=this,$e=ze.c;if(B!=null&&(K=new G(B),!K.isInteger()&&(K.c||K.s!==1)||K.lt(x)))throw Error(sn+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+de(K));if(!$e)return new G(ze);for(O=new G(x),ue=F=new G(x),j=ee=new G(x),je=on($e),U=O.e=je.length-ze.e-1,O.c[0]=As[(X=U%it)<0?it+X:X],B=!B||K.comparedTo(O)>0?U>0?O:ue:K,X=$,$=1/0,K=new G(je),ee.c[0]=0;ce=r(K,O,0,1),z=F.plus(ce.times(j)),z.comparedTo(B)!=1;)F=j,j=z,ue=ee.plus(ce.times(z=ue)),ee=z,O=K.minus(ce.times(z=O)),K=z;return z=r(B.minus(F),j,0,1),ee=ee.plus(z.times(ue)),F=F.plus(z.times(j)),ee.s=ue.s=ze.s,U=U*2,Ce=r(ue,j,U,P).minus(ze).abs().comparedTo(r(ee,F,U,P).minus(ze).abs())<1?[ue,j]:[ee,F],$=X,Ce},g.toNumber=function(){return+de(this)},g.toPrecision=function(B,O){return B!=null&&t(B,1,ht),J(this,B,O,2)},g.toString=function(B){var O,F=this,j=F.s,z=F.e;return z===null?j?(O="Infinity",j<0&&(O="-"+O)):O="NaN":(B==null?O=z<=T||z>=D?d(on(F.c),z):v(on(F.c),z,"0"):B===10&&mt?(F=oe(new G(F),C+z+1,P),O=v(on(F.c),F.e,"0")):(t(B,2,Ie.length,"Base"),O=u(v(on(F.c),z,"0"),10,B,j,!0)),j<0&&F.c[0]&&(O="-"+O)),O},g.valueOf=g.toJSON=function(){return de(this)},g._isBigNumber=!0,g[Symbol.toStringTag]="BigNumber",g[Symbol.for("nodejs.util.inspect.custom")]=g.valueOf,i!=null&&G.set(i),G}function dn(i){var r=i|0;return i>0||i===r?r:r-1}function on(i){for(var r,u,h=1,g=i.length,x=i[0]+"";h<g;){for(r=i[h++]+"",u=it-r.length;u--;r="0"+r);x+=r}for(g=x.length;x.charCodeAt(--g)===48;);return x.slice(0,g+1||1)}function Yi(i,r){var u,h,g=i.c,x=r.c,C=i.s,P=r.s,T=i.e,D=r.e;if(!C||!P)return null;if(u=g&&!g[0],h=x&&!x[0],u||h)return u?h?0:-P:C;if(C!=P)return C;if(u=C<0,h=T==D,!g||!x)return h?0:!g^u?1:-1;if(!h)return T>D^u?1:-1;for(P=(T=g.length)<(D=x.length)?T:D,C=0;C<P;C++)if(g[C]!=x[C])return g[C]>x[C]^u?1:-1;return T==D?0:T>D^u?1:-1}function t(i,r,u,h){if(i<r||i>u||i!==Yt(i))throw Error(sn+(h||"Argument")+(typeof i=="number"?i<r||i>u?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function s(i){var r=i.c.length-1;return dn(i.e/it)==r&&i.c[r]%2!=0}function d(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function v(i,r,u){var h,g;if(r<0){for(g=u+".";++r;g+=u);i=g+i}else if(h=i.length,++r>h){for(g=u,r-=h;--r;g+=u);i+=g}else r<h&&(i=i.slice(0,r)+"."+i.slice(r));return i}var S=wo(),R=S,q=class{key;left=null;right=null;constructor(i){this.key=i}},he=class extends q{constructor(i){super(i)}},ye=class{size=0;modificationCount=0;splayCount=0;splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let u=null,h=null,g=null,x=null,C=r,P=this.compare,T;for(;;)if(T=P(C.key,i),T>0){let D=C.left;if(D==null||(T=P(D.key,i),T>0&&(C.left=D.right,D.right=C,C=D,D=C.left,D==null)))break;u==null?h=C:u.left=C,u=C,C=D}else if(T<0){let D=C.right;if(D==null||(T=P(D.key,i),T<0&&(C.right=D.left,D.left=C,C=D,D=C.right,D==null)))break;g==null?x=C:g.right=C,g=C,C=D}else break;return g!=null&&(g.right=C.left,C.left=x),u!=null&&(u.left=C.right,C.right=h),this.root!==C&&(this.root=C,this.splayCount++),T}splayMin(i){let r=i,u=r.left;for(;u!=null;){let h=u;r.left=h.right,h.right=r,r=h,u=r.left}return r}splayMax(i){let r=i,u=r.right;for(;u!=null;){let h=u;r.right=h.left,h.left=r,r=h,u=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,u=r,h=r.left;if(this.size--,h==null)this.root=r.right;else{let g=r.right;r=this.splayMax(h),r.right=g,this.root=r}return this.modificationCount++,u}addNewRoot(i,r){this.size++,this.modificationCount++;let u=this.root;if(u==null){this.root=i;return}r<0?(i.left=u,i.right=u.right,u.right=null):(i.right=u,i.left=u.left,u.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Ee=class ou extends ye{root=null;compare;validKey;constructor(r,u){super(),this.compare=r??this.defaultCompare(),this.validKey=u??(h=>h!=null&&h!=null)}delete(r){return this.validKey(r)?this._delete(r)!=null:!1}deleteAll(r){for(let u of r)this.delete(u)}forEach(r){let u=this[Symbol.iterator](),h;for(;h=u.next(),!h.done;)r(h.value,h.value,this)}add(r){let u=this.splay(r);return u!=0&&this.addNewRoot(new he(r),u),this}addAndReturn(r){let u=this.splay(r);return u!=0&&this.addNewRoot(new he(r),u),this.root.key}addAll(r){for(let u of r)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(r){if(r==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(r)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let h=u.right;for(;h!=null;)u=h,h=u.right;return u.key}firstAfter(r){if(r==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(r)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let h=u.left;for(;h!=null;)u=h,h=u.left;return u.key}retainAll(r){let u=new ou(this.compare,this.validKey),h=this.modificationCount;for(let g of r){if(h!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(r){return!this.validKey(r)||this.splay(r)!=0?null:this.root.key}intersection(r){let u=new ou(this.compare,this.validKey);for(let h of this)r.has(h)&&u.add(h);return u}difference(r){let u=new ou(this.compare,this.validKey);for(let h of this)r.has(h)||u.add(h);return u}union(r){let u=this.clone();return u.addAll(r),u}clone(){let r=new ou(this.compare,this.validKey);return r.size=this.size,r.root=this.copyNode(this.root),r}copyNode(r){if(r==null)return null;function u(g,x){let C,P;do{if(C=g.left,P=g.right,C!=null){let T=new he(C.key);x.left=T,u(C,T)}if(P!=null){let T=new he(P.key);x.right=T,g=P,x=T}}while(P!=null)}let h=new he(r.key);return u(r,h),h}toSet(){return this.clone()}entries(){return new ft(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new nt(this.wrap())}[Symbol.toStringTag]="[object Set]"},Oe=class{tree;path=new Array;modificationCount=null;splayCount;constructor(i){this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let u=this.tree.getRoot();for(;u!=null;)this.path.push(u),u=u.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},nt=class extends Oe{getValue(i){return i.key}},ft=class extends Oe{getValue(i){return[i.key,i.key]}},an=i=>i,Xt=i=>{if(i){let r=new Ee(Ts(i)),u=new Ee(Ts(i)),h=(x,C)=>C.addAndReturn(x),g=x=>({x:h(x.x,r),y:h(x.y,u)});return g({x:new R(0),y:new R(0)}),g}return an},yn=i=>({set:r=>{zt=yn(r)},reset:()=>yn(i),compare:Ts(i),snap:Xt(i),orient:es(i)}),zt=yn(),Li=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),Ds=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let u=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,h=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,g=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,x=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:u,y:g},ur:{x:h,y:x}}},ii=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),ya=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),ki=i=>ya(i,i).sqrt(),Ci=(i,r,u)=>{let h={x:r.x.minus(i.x),y:r.y.minus(i.y)},g={x:u.x.minus(i.x),y:u.y.minus(i.y)};return ii(g,h).div(ki(g)).div(ki(h))},ts=(i,r,u)=>{let h={x:r.x.minus(i.x),y:r.y.minus(i.y)},g={x:u.x.minus(i.x),y:u.y.minus(i.y)};return ya(g,h).div(ki(g)).div(ki(h))},Et=(i,r,u)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(u.minus(i.y))),y:u},yr=(i,r,u)=>r.x.isZero()?null:{x:u,y:i.y.plus(r.y.div(r.x).times(u.minus(i.x)))},jl=(i,r,u,h)=>{if(r.x.isZero())return yr(u,h,i.x);if(h.x.isZero())return yr(i,r,u.x);if(r.y.isZero())return Et(u,h,i.y);if(h.y.isZero())return Et(i,r,u.y);let g=ii(r,h);if(g.isZero())return null;let x={x:u.x.minus(i.x),y:u.y.minus(i.y)},C=ii(x,r).div(g),P=ii(x,h).div(g),T=i.x.plus(P.times(r.x)),D=u.x.plus(C.times(h.x)),H=i.y.plus(P.times(r.y)),$=u.y.plus(C.times(h.y)),fe=T.plus(D).div(2),me=H.plus($).div(2);return{x:fe,y:me}},bi=class Hp{point;isLeft;segment;otherSE;consumedBy;static compare(r,u){let h=Hp.comparePoints(r.point,u.point);return h!==0?h:(r.point!==u.point&&r.link(u),r.isLeft!==u.isLeft?r.isLeft?1:-1:Ei.compare(r.segment,u.segment))}static comparePoints(r,u){return r.x.isLessThan(u.x)?-1:r.x.isGreaterThan(u.x)?1:r.y.isLessThan(u.y)?-1:r.y.isGreaterThan(u.y)?1:0}constructor(r,u){r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=u}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let u=r.point.events;for(let h=0,g=u.length;h<g;h++){let x=u[h];this.point.events.push(x),x.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let u=0;u<r;u++){let h=this.point.events[u];if(h.segment.consumedBy===void 0)for(let g=u+1;g<r;g++){let x=this.point.events[g];x.consumedBy===void 0&&h.otherSE.point.events===x.otherSE.point.events&&h.segment.consume(x.segment)}}}getAvailableLinkedEvents(){let r=[];for(let u=0,h=this.point.events.length;u<h;u++){let g=this.point.events[u];g!==this&&!g.segment.ringOut&&g.segment.isInResult()&&r.push(g)}return r}getLeftmostComparator(r){let u=new Map,h=g=>{let x=g.otherSE;u.set(g,{sine:Ci(this.point,r.point,x.point),cosine:ts(this.point,r.point,x.point)})};return(g,x)=>{u.has(g)||h(g),u.has(x)||h(x);let{sine:C,cosine:P}=u.get(g),{sine:T,cosine:D}=u.get(x);return C.isGreaterThanOrEqualTo(0)&&T.isGreaterThanOrEqualTo(0)?P.isLessThan(D)?1:P.isGreaterThan(D)?-1:0:C.isLessThan(0)&&T.isLessThan(0)?P.isLessThan(D)?-1:P.isGreaterThan(D)?1:0:T.isLessThan(C)?-1:T.isGreaterThan(C)?1:0}}},vr=0,Ei=class rh{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(r,u){let h=r.leftSE.point.x,g=u.leftSE.point.x,x=r.rightSE.point.x,C=u.rightSE.point.x;if(C.isLessThan(h))return 1;if(x.isLessThan(g))return-1;let P=r.leftSE.point.y,T=u.leftSE.point.y,D=r.rightSE.point.y,H=u.rightSE.point.y;if(h.isLessThan(g)){if(T.isLessThan(P)&&T.isLessThan(D))return 1;if(T.isGreaterThan(P)&&T.isGreaterThan(D))return-1;let $=r.comparePoint(u.leftSE.point);if($<0)return 1;if($>0)return-1;let fe=u.comparePoint(r.rightSE.point);return fe!==0?fe:-1}if(h.isGreaterThan(g)){if(P.isLessThan(T)&&P.isLessThan(H))return-1;if(P.isGreaterThan(T)&&P.isGreaterThan(H))return 1;let $=u.comparePoint(r.leftSE.point);if($!==0)return $;let fe=r.comparePoint(u.rightSE.point);return fe<0?1:fe>0?-1:1}if(P.isLessThan(T))return-1;if(P.isGreaterThan(T))return 1;if(x.isLessThan(C)){let $=u.comparePoint(r.rightSE.point);if($!==0)return $}if(x.isGreaterThan(C)){let $=r.comparePoint(u.rightSE.point);if($<0)return 1;if($>0)return-1}if(!x.eq(C)){let $=D.minus(P),fe=x.minus(h),me=H.minus(T),Pe=C.minus(g);if($.isGreaterThan(fe)&&me.isLessThan(Pe))return 1;if($.isLessThan(fe)&&me.isGreaterThan(Pe))return-1}return x.isGreaterThan(C)?1:x.isLessThan(C)||D.isLessThan(H)?-1:D.isGreaterThan(H)?1:r.id<u.id?-1:r.id>u.id?1:0}constructor(r,u,h,g){this.id=++vr,this.leftSE=r,r.segment=this,r.otherSE=u,this.rightSE=u,u.segment=this,u.otherSE=r,this.rings=h,this.windings=g}static fromRing(r,u,h){let g,x,C,P=bi.comparePoints(r,u);if(P<0)g=r,x=u,C=1;else if(P>0)g=u,x=r,C=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let T=new bi(g,!0),D=new bi(x,!1);return new rh(T,D,[h],[C])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,u=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(u)?r:u},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(u)?r:u}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return zt.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let u=this.bbox(),h=r.bbox(),g=Ds(u,h);if(g===null)return null;let x=this.leftSE.point,C=this.rightSE.point,P=r.leftSE.point,T=r.rightSE.point,D=Li(u,P)&&this.comparePoint(P)===0,H=Li(h,x)&&r.comparePoint(x)===0,$=Li(u,T)&&this.comparePoint(T)===0,fe=Li(h,C)&&r.comparePoint(C)===0;if(H&&D)return fe&&!$?C:!fe&&$?T:null;if(H)return $&&x.x.eq(T.x)&&x.y.eq(T.y)?null:x;if(D)return fe&&C.x.eq(P.x)&&C.y.eq(P.y)?null:P;if(fe&&$)return null;if(fe)return C;if($)return T;let me=jl(x,this.vector(),P,r.vector());return me===null||!Li(g,me)?null:zt.snap(me)}split(r){let u=[],h=r.events!==void 0,g=new bi(r,!0),x=new bi(r,!1),C=this.rightSE;this.replaceRightSE(x),u.push(x),u.push(g);let P=new rh(g,C,this.rings.slice(),this.windings.slice());return bi.comparePoints(P.leftSE.point,P.rightSE.point)>0&&P.swapEvents(),bi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),h&&(g.checkForConsuming(),x.checkForConsuming()),u}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let u=0,h=this.windings.length;u<h;u++)this.windings[u]*=-1}consume(r){let u=this,h=r;for(;u.consumedBy;)u=u.consumedBy;for(;h.consumedBy;)h=h.consumedBy;let g=rh.compare(u,h);if(g!==0){if(g>0){let x=u;u=h,h=x}if(u.prev===h){let x=u;u=h,h=x}for(let x=0,C=h.rings.length;x<C;x++){let P=h.rings[x],T=h.windings[x],D=u.rings.indexOf(P);D===-1?(u.rings.push(P),u.windings.push(T)):u.windings[D]+=T}h.rings=null,h.windings=null,h.consumedBy=u,h.leftSE.consumedBy=u.leftSE,h.rightSE.consumedBy=u.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let u=this._afterState.rings,h=this._afterState.windings,g=this._afterState.multiPolys;for(let P=0,T=this.rings.length;P<T;P++){let D=this.rings[P],H=this.windings[P],$=u.indexOf(D);$===-1?(u.push(D),h.push(H)):h[$]+=H}let x=[],C=[];for(let P=0,T=u.length;P<T;P++){if(h[P]===0)continue;let D=u[P],H=D.poly;if(C.indexOf(H)===-1)if(D.isExterior)x.push(H);else{C.indexOf(H)===-1&&C.push(H);let $=x.indexOf(D.poly);$!==-1&&x.splice($,1)}}for(let P=0,T=x.length;P<T;P++){let D=x[P].multiPoly;g.indexOf(D)===-1&&g.push(D)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,u=this.afterState().multiPolys;switch(vn.type){case"union":{let h=r.length===0,g=u.length===0;this._isInResult=h!==g;break}case"intersection":{let h,g;r.length<u.length?(h=r.length,g=u.length):(h=u.length,g=r.length),this._isInResult=g===vn.numMultiPolys&&h<g;break}case"xor":{let h=Math.abs(r.length-u.length);this._isInResult=h%2===1;break}case"difference":{let h=g=>g.length===1&&g[0].isSubject;this._isInResult=h(r)!==h(u);break}}return this._isInResult}},Xi=class{poly;isExterior;segments;bbox;constructor(i,r,u){if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=u,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let h=zt.snap({x:new R(i[0][0]),y:new R(i[0][1])});this.bbox={ll:{x:h.x,y:h.y},ur:{x:h.x,y:h.y}};let g=h;for(let x=1,C=i.length;x<C;x++){if(typeof i[x][0]!="number"||typeof i[x][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let P=zt.snap({x:new R(i[x][0]),y:new R(i[x][1])});P.x.eq(g.x)&&P.y.eq(g.y)||(this.segments.push(Ei.fromRing(g,P,this)),P.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.x),P.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.y),P.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.x),P.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.y),g=P)}(!h.x.eq(g.x)||!h.y.eq(g.y))&&this.segments.push(Ei.fromRing(g,h,this))}getSweepEvents(){let i=[];for(let r=0,u=this.segments.length;r<u;r++){let h=this.segments[r];i.push(h.leftSE),i.push(h.rightSE)}return i}},xo=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(i,r){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Xi(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let u=1,h=i.length;u<h;u++){let g=new Xi(i[u],this,!1);g.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=g.bbox.ur.y),this.interiorRings.push(g)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,u=this.interiorRings.length;r<u;r++){let h=this.interiorRings[r].getSweepEvents();for(let g=0,x=h.length;g<x;g++)i.push(h[g])}return i}},il=class{isSubject;polys;bbox;constructor(i,r){if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new R(Number.POSITIVE_INFINITY),y:new R(Number.POSITIVE_INFINITY)},ur:{x:new R(Number.NEGATIVE_INFINITY),y:new R(Number.NEGATIVE_INFINITY)}};for(let u=0,h=i.length;u<h;u++){let g=new xo(i[u],this);g.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=g.bbox.ll.x),g.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=g.bbox.ll.y),g.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=g.bbox.ur.x),g.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=g.bbox.ur.y),this.polys.push(g)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,u=this.polys.length;r<u;r++){let h=this.polys[r].getSweepEvents();for(let g=0,x=h.length;g<x;g++)i.push(h[g])}return i}},Lo=class Sc{events;poly;_isExteriorRing;_enclosingRing;static factory(r){let u=[];for(let h=0,g=r.length;h<g;h++){let x=r[h];if(!x.isInResult()||x.ringOut)continue;let C=null,P=x.leftSE,T=x.rightSE,D=[P],H=P.point,$=[];for(;C=P,P=T,D.push(P),P.point!==H;)for(;;){let fe=P.getAvailableLinkedEvents();if(fe.length===0){let De=D[0].point,Ie=D[D.length-1].point;throw new Error(`Unable to complete output ring starting at [${De.x}, ${De.y}]. Last matching segment found ends at [${Ie.x}, ${Ie.y}].`)}if(fe.length===1){T=fe[0].otherSE;break}let me=null;for(let De=0,Ie=$.length;De<Ie;De++)if($[De].point===P.point){me=De;break}if(me!==null){let De=$.splice(me)[0],Ie=D.splice(De.index);Ie.unshift(Ie[0].otherSE),u.push(new Sc(Ie.reverse()));continue}$.push({index:D.length,point:P.point});let Pe=P.getLeftmostComparator(C);T=fe.sort(Pe)[0].otherSE;break}u.push(new Sc(D))}return u}constructor(r){this.events=r;for(let u=0,h=r.length;u<h;u++)r[u].segment.ringOut=this;this.poly=null}getGeom(){let r=this.events[0].point,u=[r];for(let D=1,H=this.events.length-1;D<H;D++){let $=this.events[D].point,fe=this.events[D+1].point;zt.orient($,r,fe)!==0&&(u.push($),r=$)}if(u.length===1)return null;let h=u[0],g=u[1];zt.orient(h,r,g)===0&&u.shift(),u.push(u[0]);let x=this.isExteriorRing()?1:-1,C=this.isExteriorRing()?0:u.length-1,P=this.isExteriorRing()?u.length:-1,T=[];for(let D=C;D!=P;D+=x)T.push([u[D].x.toNumber(),u[D].y.toNumber()]);return T}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let r=this.events[0];for(let g=1,x=this.events.length;g<x;g++){let C=this.events[g];bi.compare(r,C)>0&&(r=C)}let u=r.segment.prevInResult(),h=u?u.prevInResult():null;for(;;){if(!u)return null;if(!h)return u.ringOut;if(h.ringOut!==u.ringOut)return h.ringOut?.enclosingRing()!==u.ringOut?u.ringOut:u.ringOut?.enclosingRing();u=h.prevInResult(),h=u?u.prevInResult():null}}},wr=class{exteriorRing;interiorRings;constructor(i){this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let u=0,h=this.interiorRings.length;u<h;u++){let g=this.interiorRings[u].getGeom();g!==null&&r.push(g)}return r}},Nt=class{rings;polys;constructor(i){this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,u=this.polys.length;r<u;r++){let h=this.polys[r].getGeom();h!==null&&i.push(h)}return i}_composePolys(i){let r=[];for(let u=0,h=i.length;u<h;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new wr(g));else{let x=g.enclosingRing();x?.poly||r.push(new wr(x)),x?.poly?.addInterior(g)}}return r}},jt=class{queue;tree;segments;constructor(i,r=Ei.compare){this.queue=i,this.tree=new Ee(r),this.segments=[]}process(i){let r=i.segment,u=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),u;i.isLeft&&this.tree.add(r);let h=r,g=r;do h=this.tree.lastBefore(h);while(h!=null&&h.consumedBy!=null);do g=this.tree.firstAfter(g);while(g!=null&&g.consumedBy!=null);if(i.isLeft){let x=null;if(h){let P=h.getIntersection(r);if(P!==null&&(r.isAnEndpoint(P)||(x=P),!h.isAnEndpoint(P))){let T=this._splitSafely(h,P);for(let D=0,H=T.length;D<H;D++)u.push(T[D])}}let C=null;if(g){let P=g.getIntersection(r);if(P!==null&&(r.isAnEndpoint(P)||(C=P),!g.isAnEndpoint(P))){let T=this._splitSafely(g,P);for(let D=0,H=T.length;D<H;D++)u.push(T[D])}}if(x!==null||C!==null){let P=null;x===null?P=C:C===null?P=x:P=bi.comparePoints(x,C)<=0?x:C,this.queue.delete(r.rightSE),u.push(r.rightSE);let T=r.split(P);for(let D=0,H=T.length;D<H;D++)u.push(T[D])}u.length>0?(this.tree.delete(r),u.push(i)):(this.segments.push(r),r.prev=h)}else{if(h&&g){let x=h.getIntersection(g);if(x!==null){if(!h.isAnEndpoint(x)){let C=this._splitSafely(h,x);for(let P=0,T=C.length;P<T;P++)u.push(C[P])}if(!g.isAnEndpoint(x)){let C=this._splitSafely(g,x);for(let P=0,T=C.length;P<T;P++)u.push(C[P])}}}this.tree.delete(r)}return u}_splitSafely(i,r){this.tree.delete(i);let u=i.rightSE;this.queue.delete(u);let h=i.split(r);return h.push(u),i.consumedBy===void 0&&this.tree.add(i),h}},ns=class{type;numMultiPolys;run(i,r,u){Qt.type=i;let h=[new il(r,!0)];for(let T=0,D=u.length;T<D;T++)h.push(new il(u[T],!1));if(Qt.numMultiPolys=h.length,Qt.type==="difference"){let T=h[0],D=1;for(;D<h.length;)Ds(h[D].bbox,T.bbox)!==null?D++:h.splice(D,1)}if(Qt.type==="intersection")for(let T=0,D=h.length;T<D;T++){let H=h[T];for(let $=T+1,fe=h.length;$<fe;$++)if(Ds(H.bbox,h[$].bbox)===null)return[]}let g=new Ee(bi.compare);for(let T=0,D=h.length;T<D;T++){let H=h[T].getSweepEvents();for(let $=0,fe=H.length;$<fe;$++)g.add(H[$])}let x=new jt(g),C=null;for(g.size!=0&&(C=g.first(),g.delete(C));C;){let T=x.process(C);for(let D=0,H=T.length;D<H;D++){let $=T[D];$.consumedBy===void 0&&g.add($)}g.size!=0?(C=g.first(),g.delete(C)):C=null}zt.reset();let P=Lo.factory(x.segments);return new Nt(P).getGeom()}},Qt=new ns,vn=Qt,Rs=(i,...r)=>vn.run("intersection",i,r),ko=(i,...r)=>vn.run("difference",i,r);zt.set;function wn(i){let r={type:"Feature"};return r.geometry=i,r}function Os(i){return i.type==="Feature"?i.geometry:i}function Nl(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function vu(i){return wn({type:"LineString",coordinates:i})}function rl(i){return wn({type:"MultiLineString",coordinates:i})}function Fl(i){return wn({type:"Polygon",coordinates:i})}function Qi(i){return wn({type:"MultiPolygon",coordinates:i})}function sl(i,r){let u=Os(i),h=Os(r),g=Rs(u.coordinates,h.coordinates);return g.length===0?null:g.length===1?Fl(g[0]):Qi(g)}function zl(i,r){let u=Os(i),h=Os(r),g=ko(u.coordinates,h.coordinates);return g.length===0?null:g.length===1?Fl(g[0]):Qi(g)}function Ul(i){return Array.isArray(i)?1+Ul(i[0]):-1}function fh(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=Nl(i),u=Ul(r),h=[];return u>1?r.forEach(g=>{h.push(vu(g))}):h.push(i),h}function is(i){let r=[];return i.eachLayer(u=>{r.push(Nl(u.toGeoJSON(15)))}),rl(r)}rn.Cut=rn.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:h,originalLayer:g})=>{this._fireCut(g,h,g),this._fireCut(this._map,h,g),g.pm._fireEdit()}),this._editedLayers=[];let u=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(u))},cut(i){let r=this._map._layers,u=i._latlngInfos||[];Object.keys(r).map(h=>r[h]).filter(h=>h.pm).filter(h=>!h._pmTempLayer).filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1).filter(h=>h instanceof L.Polyline).filter(h=>h!==i).filter(h=>h.pm.options.allowCutting).filter(h=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(h)>-1:!0).filter(h=>!this._layerGroup.hasLayer(h)).filter(h=>{try{let g=!!gi(i.toGeoJSON(15),h.toGeoJSON(15)).features.length>0;return g||h instanceof L.Polyline&&!(h instanceof L.Polygon)?g:!!sl(i.toGeoJSON(15),h.toGeoJSON(15))}catch{return h instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(h=>{let g;if(h instanceof L.Polygon){g=L.polygon(h.getLatLngs());let T=g.getLatLngs();u.forEach(D=>{if(D&&D.snapInfo){let{latlng:H}=D,$=this._calcClosestLayer(H,[g]);if($&&$.segment&&$.distance<this.options.snapDistance){let{segment:fe}=$;if(fe&&fe.length===2){let{indexPath:me,parentPath:Pe,newIndex:De}=L.PM.Utils._getIndexFromSegment(T,fe);(me.length>1?(0,wi.default)(T,Pe):T).splice(De,0,H)}}}})}else g=h;let x=this._cutLayer(i,g),C=L.geoJSON(x,h.options);C.getLayers().length===1&&([C]=C.getLayers()),this._setPane(C,"layerPane");let P=C.addTo(this._map.pm._getContainingLayer());if(P.pm.enable(h.pm.options),P.pm.disable(),h._pmTempLayer=!0,i._pmTempLayer=!0,h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),P.getLayers&&P.getLayers().length===0&&this._map.pm.removeLayer({target:P}),P instanceof L.LayerGroup?(P.eachLayer(T=>{this._addDrawnLayerProp(T)}),this._addDrawnLayerProp(P)):this._addDrawnLayerProp(P),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let T=this.options.layersToCut.indexOf(h);T>-1&&this.options.layersToCut.splice(T,1)}this._editedLayers.push({layer:P,originalLayer:h})})},_cutLayer(i,r){let u=L.geoJSON(),h;if(r instanceof L.Polygon)h=zl(r.toGeoJSON(15),i.toGeoJSON(15));else{let g=fh(r);g.forEach(x=>{let C=Qa(x,i.toGeoJSON(15)),P;C&&C.features.length>0?P=L.geoJSON(C):P=L.geoJSON(x),P.getLayers().forEach(T=>{Yr(i.toGeoJSON(15),T.toGeoJSON(15))||T.addTo(u)})}),g.length>1?h=is(u):h=u.toGeoJSON(15)}return h},_change:L.Util.falseFn}),rn.Text=rn.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ut("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker?.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),this.options.textOptions?.className){let g=this.options.textOptions.className.split(" ");this.textArea.classList.add(...g)}let u=this._createTextIcon(this.textArea),h=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:u});if(this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm){h.pm.textArea=this.textArea,L.setOptions(h.pm,{removeIfEmpty:this.options.textOptions?.removeIfEmpty??!0});let g=this.options.textOptions?.focusAfterDraw??!0;h.pm._createTextMarker(g),this.options.textOptions?.text&&h.pm.setText(this.options.textOptions.text)}this._fireCreate(h),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var Co={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,nn(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(nn(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,nn(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(nn(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,u={originalEvent:r,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(r),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseDown(u),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,u={originalEvent:r,target:this._layer};return u.containerPoint=this._map.mouseEventToContainerPoint(r),u.latlng=this._map.containerPointToLatLng(u.containerPoint),this._dragMixinOnMouseMove(u),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,u=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!u?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let h="resizeableCircleMarker";this._layer instanceof L.Circle&&(h="resizeableCircle"),this.options.snappable&&!r&&!u?this._layer.pm.options[h]||this._initSnappableMarkersDrag():this._layer.pm.options[h]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,u={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},h=g=>g.map(x=>{if(Array.isArray(x))return h(x);let C={lat:x.lat+u.lat,lng:x.lng+u.lng};return(x.alt||x.alt===0)&&(C.alt=x.alt),C});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let g=h([this._layer.getLatLng()]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let g=this._layer.getLatLng();this._layer._snapped&&(g=this._layer._orgLatLng);let x=h([g]);this._layer.setLatLng(x[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let g=h([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(g),this._fireChange(this._layer.getBounds(),"Edit")}else{let g=h(this._layer.getLatLngs());this._layer.setLatLngs(g),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let u=[];if(L.Util.isArray(this.options.syncLayersOnDrag))u=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(h=>{h instanceof L.LayerGroup&&(u=u.concat(h.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let h in this._parentLayerGroup){let g=this._parentLayerGroup[h];g.pm&&(u=g.pm.getLayers(!0))}return L.Util.isArray(u)&&u.length>0&&(u=u.filter(h=>!!h.pm).filter(h=>!!h.pm.options.draggable),u.forEach(h=>{h!==this._layer&&h.pm[i]&&(h._snapped=!1,h.pm[i](r))})),u.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},bo=Co,ol=E(Gi());function al(i,r,u,h){return u.unproject(r.transform(u.project(i,h)),h)}function ri(i,r,u){let h=u.getMaxZoom();if(h===1/0&&(h=u.getZoom()),L.Util.isArray(i)){let g=[];return i.forEach(x=>{g.push(ri(x,r,u))}),g}return i instanceof L.LatLng?al(i,r,u,h):null}function xn(i,r){r instanceof L.Layer&&(r=r.getLatLng());let u=i.getMaxZoom();return u===1/0&&(u=i.getZoom()),i.project(r,u)}function er(i,r){let u=i.getMaxZoom();return u===1/0&&(u=i.getZoom()),i.unproject(r,u)}var xr={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=xn(this._map,this._rotationOriginLatLng),this._rotationStartPoint=xn(this._map,i.target.getLatLng()),this._initialRotateLatLng=Pn(this._layer),this._startAngle=this.getAngle();let r=Pn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=xn(this._map,i.target.getLatLng()),u=this._rotationStartPoint,h=this._rotationOriginPoint,g=Math.atan2(r.y-h.y,r.x-h.x)-Math.atan2(u.y-h.y,u.x-h.x);this._layer.setLatLngs(this._rotateLayer(g,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let x=this;function C(H,$=[],fe=-1){if(fe>-1&&$.push(fe),L.Util.isArray(H[0]))H.forEach((me,Pe)=>C(me,$.slice(),Pe));else{let me=$.length>0?(0,ol.default)(x._markers,$):x._markers[0];H.forEach((Pe,De)=>{me[De].setLatLng(Pe)})}}C(this._layer.getLatLngs());let P=Pn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(g,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let T=g*180/Math.PI;T=T<0?T+360:T;let D=T+this._startAngle;this._setAngle(D),this._rotationLayer.pm._setAngle(D),this._fireRotation(this._rotationLayer,T,P),this._fireRotation(this._map,T,P),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=Pn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Pn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,u,h,g){let x=xn(g,u);return this._matrix=h.clone().rotate(i,x).flip(),ri(r,this._matrix,g)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(hn(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Pn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),u=this._layer.getLatLngs(),h=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(h,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(h,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let g=this.getAngle()-r;g=g<0?g+360:g,this._startAngle=r,this._fireRotation(this._layer,g,u,this._layer),this._fireRotation(this._map||this._layer._map,g,u,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},Lr=xr,Is=L.Class.extend({includes:[bo,la,Lr,dr],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let u=r.target,h={layer:this._layer,marker:u,event:r},g="";return i==="move"?g="moveVertexValidation":i==="add"?g="addVertexValidation":i==="remove"&&(g="removeVertexValidation"),this.options[g]&&typeof this.options[g]=="function"&&!this.options[g](h)?(i==="move"&&(u._cancelDragEventChain=u.getLatLng()),!1):(u._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),ln=Is;ln.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(h=>this._initLayer(h));let r=h=>{if(h.layer._pmTempLayer)return;this._layers=this.getLayers();let g=this._layers.filter(x=>!x.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in x.pm._parentLayerGroup));g.forEach(x=>{this._initLayer(x)}),g.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",h=>{this._removeLayerFromGroup(h.target)},this);let u=h=>{h.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(u,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(u=>{u instanceof L.LayerGroup?r.indexOf(u._leaflet_id)===-1&&(r.push(u._leaflet_id),u.pm.enable(i,r)):u.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(u=>{u instanceof L.LayerGroup?r.indexOf(u._leaflet_id)===-1&&(r.push(u._leaflet_id),u.pm.toggleEdit(i,r)):u.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){return this._map||this._layers.find(i=>!!i._map)?._map||null},getLayers(i=!1,r=!0,u=!0,h=[]){let g=[];return i?this._layerGroup.getLayers().forEach(x=>{g.push(x),x instanceof L.LayerGroup&&h.indexOf(x._leaflet_id)===-1&&(h.push(x._leaflet_id),g=g.concat(x.pm.getLayers(!0,!0,!0,h)))}):g=this._layerGroup.getLayers(),u&&(g=g.filter(x=>!(x instanceof L.LayerGroup))),r&&(g=g.filter(x=>!!x.pm),g=g.filter(x=>!x._pmTempLayer),g=g.filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1)),g},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(u=>{u.pm&&(u instanceof L.LayerGroup?r.indexOf(u._leaflet_id)===-1&&(r.push(u._leaflet_id),u.pm.setOptions(i,r)):u.pm.setOptions(i))})}}),ln.Marker=ln.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var tr=E(Gi()),$l={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,u,h)=>h.indexOf(r)===u)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],u=this.options.limitMarkersToCount;return u===-1?r:(r.sort((h,g)=>{let x=h._latlng.distanceTo(i),C=g._latlng.distanceTo(i);return x-C}),r.filter((h,g)=>u>-1?g<u:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},si=$l;ln.Line=ln.extend({includes:[si],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let u=h=>{if(Array.isArray(h[0]))return h.map(u,this);let g=h.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&h.map((x,C)=>{let P=this.isPolygon()?(C+1)%h.length:C+1;return this._createMiddleMarker(g[C],g[P])}),g};this._markers=u(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let u=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),h=this._createMarker(u),g=L.divIcon({className:"marker-icon marker-icon-middle"});return h.setIcon(g),h.leftM=i,h.rightM=r,i._middleMarkerNext=h,r._middleMarkerPrev=h,h.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),h.on("movestart",this._onMiddleMarkerMoveStart,this),h},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let u=L.divIcon({className:"marker-icon"});r.setIcon(u),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let u=L.divIcon({className:"marker-icon"});r.setIcon(u),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,u){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let h=i.getLatLng(),g=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:x,index:C,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),T=x.length>1?(0,tr.default)(g,P):g,D=x.length>1?(0,tr.default)(this._markers,P):this._markers;T.splice(C+1,0,h),D.splice(C+1,0,i),this._layer.setLatLngs(g),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,u)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,h),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return ks(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,u,h;if(this.options.allowSelfIntersection?u=!1:(h=ks(this._layer.toGeoJSON(15)),u=h.features.length>0),u){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return u;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(h)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return u},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(u=>{Array.isArray(u)?this._updateDisabledMarkerStyle(u,r):u._icon&&(r&&!this._checkMarkerAllowedToDrag(u)?L.DomUtil.addClass(u._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(u._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Pn(this._layer,this._layer.getLatLngs()));let u=this._layer.getLatLngs(),{indexPath:h,index:g,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!h)return;let C=h.length>1?(0,tr.default)(u,x):u,P=h.length>1?(0,tr.default)(this._markers,x):this._markers,T=x[x.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!T&&(C.length<=2||this.isPolygon()&&C.length<=3)){this._flashLayer();return}C.splice(g,1),this._layer.setLatLngs(u),this.isPolygon()&&C.length<=2&&C.splice(0,C.length);let D=!1;if(C.length<=1&&(C.splice(0,C.length),x.length>1&&h.length>1&&(u=Hr(u)),this._layer.setLatLngs(u),this._initMarkers(),D=!0),pi(u)||this._layer.remove(),u=Hr(u),this._layer.setLatLngs(u),this._markers=Hr(this._markers),!D&&(P=h.length>1?(0,tr.default)(this._markers,x):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),P)){let H,$;if(this.isPolygon()?(H=(g+1)%P.length,$=(g+(P.length-1))%P.length):($=g-1<0?void 0:g-1,H=g+1>=P.length?void 0:g+1),H!==$){let fe=P[$],me=P[H];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(fe,me)}P.splice(g,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,h),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),u=i.getLatLng(),{indexPath:h,index:g,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(h.length>1?(0,tr.default)(r,x):r).splice(g,1,u),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:u,parentPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),g=r.length>1?(0,tr.default)(this._markers,h):this._markers,x=(u+1)%g.length,C=(u+(g.length-1))%g.length,P=g[C],T=g[x];return{prevMarker:P,nextMarker:T}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:u}=this._getNeighborMarkers(i),h=L.polyline([r.getLatLng(),i.getLatLng()]),g=L.polyline([i.getLatLng(),u.getLatLng()]),x=gi(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,C=gi(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?C+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(x+=1),!(x<=2&&C<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Pn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:u,index:h,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let x=u.length>1?(0,tr.default)(this._markers,g):this._markers,C=(h+1)%x.length,P=(h+(x.length-1))%x.length,T=r.getLatLng(),D=x[P].getLatLng(),H=x[C].getLatLng();if(r._middleMarkerNext){let $=L.PM.Utils.calcMiddleLatLng(this._map,T,H);r._middleMarkerNext.setLatLng($)}if(r._middleMarkerPrev){let $=L.PM.Utils.calcMiddleLatLng(this._map,T,D);r._middleMarkerPrev.setLatLng($)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),h=!this.options.allowSelfIntersection&&this.hasSelfIntersection();h&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(h=!1);let g=!this.options.allowSelfIntersection&&h;if(this._fireMarkerDragEnd(i,u,g),g){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,u);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,u)}}),ln.Polygon=ln.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:u}=this._getNeighborMarkers(i),h=L.polyline([r.getLatLng(),i.getLatLng()]),g=L.polyline([i.getLatLng(),u.getLatLng()]),x=gi(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,C=gi(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length;return!(x<=2&&C<=2)}}),ln.Rectangle=ln.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((u,h)=>{let g=this._cornerMarkers.find(x=>x._index===h);g&&g.setLatLng(u)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let u=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._origLatLng=i,u._index=r,u._pmTempLayer=!0,u.on("click",this._onVertexClick,this),this._markerGroup.addLayer(u),u},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,u=this._cornerMarkers;r._oppositeCornerLatLng=u.find(g=>g._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,h)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,u),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(h=>{delete h._oppositeCornerLatLng});let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,u),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((u,h)=>{this._cornerMarkers[h].setLatLng(u)}),this._cornerMarkers.slice(r.length).forEach(u=>{u.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let u=r.findIndex(h=>i.getLatLng().equals(h));u>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(u+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(u+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(u+3)%4])):this._cornerMarkers.forEach(h=>{h.setLatLng(r[h._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(hn(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),ln.CircleMarker=ln.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),u=this._layer._radius,h=this._getLatLngOnCircle(r,u);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(h),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let u=this._map.project(i),h=L.point(u.x+r,u.y);return this._map.unproject(h)},_createHintLine(i,r){let u=i.getLatLng(),h=r.getLatLng();this._hintline=L.polyline([u,h],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let u=this._layer._radius,h=this._getLatLngOnCircle(r,u);this._outerMarker._latlng=h,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,u=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(u),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(u),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),u=L.circle(this._layer.getLatLng(),this._layer.options);u.setRadius(r);let h=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(u,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(u,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?r=Ii(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&(r=Ii(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),u=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&u<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&u>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ln.Circle=ln.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ln.ImageOverlay=ln.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),u=i.getNorthEast(),h=i.getSouthEast(),g=i.getSouthWest();return[r,u,h,g]}}),ln.Text=ln.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var jn=function(i,r,u,h,g,x){this._matrix=[i,r,u,h,g,x]};jn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),jn.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:u,y:h}=i;return i.x=r[0]*u+r[1]*h+r[4],i.y=r[2]*u+r[3]*h+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,u;return typeof i=="number"?(r=i,u=i):(r=i.x,u=i.y),this._add(1,0,0,1,r,u)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let u,h;return r=r||L.point(0,0),typeof i=="number"?(u=i,h=i):(u=i.x,h=i.y),this._add(u,0,0,h,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let u=Math.cos(i),h=Math.sin(i);return r=r||new L.Point(0,0),this._add(u,h,-h,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,u,h,g,x){let C=[[],[],[]],P=this._matrix,T=[[P[0],P[2],P[4]],[P[1],P[3],P[5]],[0,0,1]],D=[[i,u,g],[r,h,x],[0,0,1]],H;i&&i instanceof L.PM.Matrix&&(P=i._matrix,D=[[P[0],P[2],P[4]],[P[1],P[3],P[5]],[0,0,1]]);for(let $=0;$<3;$+=1)for(let fe=0;fe<3;fe+=1){H=0;for(let me=0;me<3;me+=1)H+=T[$][me]*D[me][fe];C[$][fe]=H}return this._matrix=[C[0][0],C[1][0],C[0][1],C[1][1],C[0][2],C[1][2]],this}};var Ut=jn,Fi={calcMiddleLatLng(i,r,u){let h=i.project(r),g=i.project(u);return i.unproject(h._add(g)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(u=>{(u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.Circle||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&r.push(u)}),r=r.filter(u=>!!u.pm),r=r.filter(u=>!u._pmTempLayer),r=r.filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1),r},circleToPolygon(i,r=60,u=!0){let h=i.getLatLng(),g=i.getRadius(),x=fr(h,g,r,0,u),C=[];for(let P=0;P<x.length;P+=1){let T=[x[P].lat,x[P].lng];C.push(T)}return L.polygon(C,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,u,h=!1){i.fire(r,u,h);let{groups:g}=this.getAllParentGroups(i);g.forEach(x=>{x.fire(r,u,h)})},getAllParentGroups(i){let r=[],u=[],h=g=>{for(let x in g._eventParents)if(r.indexOf(x)===-1){r.push(x);let C=g._eventParents[x];u.push(C),h(C)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(h(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:u,groupIds:r},{groupIds:r,groups:u}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:fr,getTranslation:ut,findDeepCoordIndex(i,r,u=!0){let h,g=C=>(P,T)=>{let D=C.concat(T);if(u){if(P.lat&&P.lat===r.lat&&P.lng===r.lng)return h=D,!0}else if(P.lat&&L.latLng(P).equals(r))return h=D,!0;return Array.isArray(P)&&P.some(g(D))};i.some(g([]));let x={};return h&&(x={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),x},findDeepMarkerIndex(i,r){let u,h=x=>(C,P)=>{let T=x.concat(P);return C._leaflet_id===r._leaflet_id?(u=T,!0):Array.isArray(C)&&C.some(h(T))};i.some(h([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},_getIndexFromSegment(i,r){if(r&&r.length===2){let u=this.findDeepCoordIndex(i,r[0]),h=this.findDeepCoordIndex(i,r[1]),g=Math.max(u.index,h.index);return(u.index===0||h.index===0)&&g!==1&&(g+=1),{indexA:u,indexB:h,newIndex:g,indexPath:u.indexPath,parentPath:u.parentPath}}return null},_getRotatedRectangle(i,r,u,h){let g=xn(h,i),x=xn(h,r),C=u*Math.PI/180,P=Math.cos(C),T=Math.sin(C),D=(x.x-g.x)*P+(x.y-g.y)*T,H=(x.y-g.y)*P-(x.x-g.x)*T,$=D*P+g.x,fe=D*T+g.y,me=-H*T+g.x,Pe=H*P+g.y,De=er(h,g),Ie=er(h,{x:$,y:fe}),mt=er(h,x),G=er(h,{x:me,y:Pe});return[De,Ie,mt,G]},pxRadiusToMeterRadius(i,r,u){let h=r.project(u),g=L.point(h.x+i,h.y);return r.distance(r.unproject(g),u)}},wu=Fi;L.PM=L.PM||{version:Ur.version,Map:Zr,Toolbar:aa,Draw:rn,Edit:ln,Utils:wu,Matrix:Ut,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(u);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(g);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(x);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(C);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(P);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(T)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),u,h;for(let g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);h&&(L.DomEvent.fakeStop(i),this._fireEvent([h],i))}}),L.PM.initialize()})()),Jf}Ry();var fc={exports:{}},Xf;function Oy(){return Xf||(Xf=1,(function(m){(function(o){var a;a=$p(),m.exports=o(a)})(function(o){return o.Polyline._flat=o.LineUtil.isFlat||o.Polyline._flat||function(a){return!o.Util.isArray(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"},o.GeometryUtil=o.extend(o.GeometryUtil||{},{distance:function(a,c,f){return a.latLngToLayerPoint(c).distanceTo(a.latLngToLayerPoint(f))},distanceSegment:function(a,c,f,_){var y=a.latLngToLayerPoint(c),b=a.latLngToLayerPoint(f),E=a.latLngToLayerPoint(_);return o.LineUtil.pointToSegmentDistance(y,b,E)},readableDistance:function(a,c){var f=c!=="imperial",_;return f?a>1e3?_=(a/1e3).toFixed(2)+" km":_=a.toFixed(1)+" m":(a*=1.09361,a>1760?_=(a/1760).toFixed(2)+" miles":_=a.toFixed(1)+" yd"),_},belongsSegment:function(a,c,f,_){_=_===void 0?.2:_;var y=c.distanceTo(f),b=c.distanceTo(a)+a.distanceTo(f)-y;return b/y<_},length:function(a){var c=o.GeometryUtil.accumulatedLengths(a);return c.length>0?c[c.length-1]:0},accumulatedLengths:function(a){if(typeof a.getLatLngs=="function"&&(a=a.getLatLngs()),a.length===0)return[];for(var c=0,f=[0],_=0,y=a.length-1;_<y;_++)c+=a[_].distanceTo(a[_+1]),f.push(c);return f},closestOnSegment:function(a,c,f,_){var y=a.getMaxZoom();y===1/0&&(y=a.getZoom());var b=a.project(c,y),E=a.project(f,y),M=a.project(_,y),I=o.LineUtil.closestPointOnSegment(b,E,M);return a.unproject(I,y)},closestOnCircle:function(a,c){const f=a.getLatLng(),_=a.getRadius(),y=typeof _=="number"?_:_.radius,b=c.lng,E=c.lat,M=f.lng,I=f.lat,N=b-M,W=E-I,Y=Math.sqrt(N*N+W*W),le=M+N/Y*y,ae=I+W/Y*y;return new o.LatLng(ae,le)},closest:function(a,c,f,_){var y,b=1/0,E=null,M,I,N,W;if(c instanceof Array)if(c[0]instanceof Array&&typeof c[0][0]!="number"){for(M=0;M<c.length;M++)W=o.GeometryUtil.closest(a,c[M],f,_),W&&W.distance<b&&(b=W.distance,E=W);return E}else if(c[0]instanceof o.LatLng||typeof c[0][0]=="number"||typeof c[0].lat=="number")c=o.polyline(c);else return E;if(!(c instanceof o.Polyline))return E;if(y=JSON.parse(JSON.stringify(c.getLatLngs().slice(0))),c instanceof o.Polygon){var Y=function(we){if(o.Polyline._flat(we))we.push(we[0]);else for(var Te=0;Te<we.length;Te++)Y(we[Te])};Y(y)}if(o.Polyline._flat(y)){if(_){for(M=0,I=y.length;M<I;M++){var le=y[M];N=o.GeometryUtil.distance(a,f,le),N<b&&(b=N,E=le,E.distance=N)}return E}for(M=0,I=y.length;M<I-1;M++){var ae=y[M],ie=y[M+1];N=o.GeometryUtil.distanceSegment(a,f,ae,ie),N<=b&&(b=N,E=o.GeometryUtil.closestOnSegment(a,f,ae,ie),E.distance=N)}return E}else{for(M=0;M<y.length;M++)W=o.GeometryUtil.closest(a,y[M],f,_),W.distance<b&&(b=W.distance,E=W);return E}},closestLayer:function(a,c,f){for(var _=1/0,y=null,b=null,E=1/0,M=0,I=c.length;M<I;M++){var N=c[M];if(N instanceof o.LayerGroup){var W=o.GeometryUtil.closestLayer(a,N.getLayers(),f);W.distance<_&&(_=W.distance,y=W)}else N instanceof o.Circle?(b=this.closestOnCircle(N,f),E=o.GeometryUtil.distance(a,f,b)):typeof N.getLatLng=="function"?(b=N.getLatLng(),E=o.GeometryUtil.distance(a,f,b)):(b=o.GeometryUtil.closest(a,N,f),b&&(E=b.distance)),E<_&&(_=E,y={layer:N,latlng:b,distance:E})}return y},nClosestLayers:function(a,c,f,_){if(_=typeof _=="number"?_:c.length,_<1||c.length<1)return null;for(var y=[],b,E,M=0,I=c.length;M<I;M++){var N=c[M];if(N instanceof o.LayerGroup){var W=o.GeometryUtil.closestLayer(a,N.getLayers(),f);y.push(W)}else N instanceof o.Circle?(E=this.closestOnCircle(N,f),b=o.GeometryUtil.distance(a,f,E)):typeof N.getLatLng=="function"?(E=N.getLatLng(),b=o.GeometryUtil.distance(a,f,E)):(E=o.GeometryUtil.closest(a,N,f),E&&(b=E.distance)),y.push({layer:N,latlng:E,distance:b})}return y.sort(function(Y,le){return Y.distance-le.distance}),y.length>_?y.slice(0,_):y},layersWithin:function(a,c,f,_){_=typeof _=="number"?_:1/0;for(var y=[],b=null,E=0,M=0,I=c.length;M<I;M++){var N=c[M];typeof N.getLatLng=="function"?(b=N.getLatLng(),E=o.GeometryUtil.distance(a,f,b)):(b=o.GeometryUtil.closest(a,N,f),b&&(E=b.distance)),b&&E<_&&y.push({layer:N,latlng:b,distance:E})}var W=y.sort(function(Y,le){return Y.distance-le.distance});return W},closestLayerSnap:function(a,c,f,_,y){_=typeof _=="number"?_:1/0,y=typeof y=="boolean"?y:!0;var b=o.GeometryUtil.closestLayer(a,c,f);if(!b||b.distance>_)return null;if(y&&typeof b.layer.getLatLngs=="function"){var E=o.GeometryUtil.closest(a,b.layer,b.latlng,!0);E.distance<_&&(b.latlng=E,b.distance=o.GeometryUtil.distance(a,E,f))}return b},interpolateOnPointSegment:function(a,c,f){return o.point(a.x*(1-f)+f*c.x,a.y*(1-f)+f*c.y)},interpolateOnLine:function(a,c,f){c=c instanceof o.Polyline?c.getLatLngs():c;var _=c.length;if(_<2)return null;if(f=Math.max(Math.min(f,1),0),f===0)return{latLng:c[0]instanceof o.LatLng?c[0]:o.latLng(c[0]),predecessor:-1};if(f==1)return{latLng:c[c.length-1]instanceof o.LatLng?c[c.length-1]:o.latLng(c[c.length-1]),predecessor:c.length-2};var y=a.getMaxZoom();y===1/0&&(y=a.getZoom());for(var b=[],E=0,M=0;M<_;M++)b[M]=a.project(c[M],y),M>0&&(E+=b[M-1].distanceTo(b[M]));for(var I=E*f,N=0,W=0,M=0;W<I;M++){var Y=b[M],le=b[M+1];N=W,W+=Y.distanceTo(le)}if(Y==null&&le==null)var Y=b[0],le=b[1],M=1;var ae=W-N!==0?(I-N)/(W-N):0,ie=o.GeometryUtil.interpolateOnPointSegment(Y,le,ae);return{latLng:a.unproject(ie,y),predecessor:M-1}},locateOnLine:function(a,c,f){var _=c.getLatLngs();if(f.equals(_[0]))return 0;if(f.equals(_[_.length-1]))return 1;for(var y=o.GeometryUtil.closest(a,c,f,!1),b=o.GeometryUtil.accumulatedLengths(_),E=b[b.length-1],M=0,I=!1,N=0,W=_.length-1;N<W;N++){var Y=_[N],le=_[N+1];if(M=b[N],o.GeometryUtil.belongsSegment(y,Y,le,.001)){M+=Y.distanceTo(y),I=!0;break}}if(!I)throw"Could not interpolate "+f.toString()+" within "+c.toString();return M/E},reverse:function(a){return o.polyline(a.getLatLngs().slice(0).reverse())},extract:function(a,c,f,_){if(f>_)return o.GeometryUtil.extract(a,o.GeometryUtil.reverse(c),1-f,1-_);f=Math.max(Math.min(f,1),0),_=Math.max(Math.min(_,1),0);var y=c.getLatLngs(),b=o.GeometryUtil.interpolateOnLine(a,c,f),E=o.GeometryUtil.interpolateOnLine(a,c,_);if(f==_){var M=o.GeometryUtil.interpolateOnLine(a,c,_);return[M.latLng]}b.predecessor==-1&&(b.predecessor=0),E.predecessor==-1&&(E.predecessor=0);var I=y.slice(b.predecessor+1,E.predecessor+1);return I.unshift(b.latLng),I.push(E.latLng),I},isBefore:function(a,c){if(!c)return!1;var f=a.getLatLngs(),_=c.getLatLngs();return f[f.length-1].equals(_[0])},isAfter:function(a,c){if(!c)return!1;var f=a.getLatLngs(),_=c.getLatLngs();return f[0].equals(_[_.length-1])},startsAtExtremity:function(a,c){if(!c)return!1;var f=a.getLatLngs(),_=c.getLatLngs(),y=f[0];return y.equals(_[0])||y.equals(_[_.length-1])},computeAngle:function(a,c){return Math.atan2(c.y-a.y,c.x-a.x)*180/Math.PI},computeSlope:function(a,c){var f=(c.y-a.y)/(c.x-a.x),_=a.y-f*a.x;return{a:f,b:_}},rotatePoint:function(a,c,f,_){var y=a.getMaxZoom();y===1/0&&(y=a.getZoom());var b=f*Math.PI/180,E=a.project(c,y),M=a.project(_,y),I=Math.cos(b)*(E.x-M.x)-Math.sin(b)*(E.y-M.y)+M.x,N=Math.sin(b)*(E.x-M.x)+Math.cos(b)*(E.y-M.y)+M.y;return a.unproject(new o.Point(I,N),y)},bearing:function(a,c){var f=Math.PI/180,_=a.lat*f,y=c.lat*f,b=a.lng*f,E=c.lng*f,M=Math.sin(E-b)*Math.cos(y),I=Math.cos(_)*Math.sin(y)-Math.sin(_)*Math.cos(y)*Math.cos(E-b),N=(Math.atan2(M,I)*180/Math.PI+360)%360;return N>=180?N-360:N},destination:function(a,c,f){c=(c+360)%360;var _=Math.PI/180,y=180/Math.PI,b=o.CRS.Earth.R,E=a.lng*_,M=a.lat*_,I=c*_,N=Math.sin(M),W=Math.cos(M),Y=Math.cos(f/b),le=Math.sin(f/b),ae=Math.asin(N*Y+W*le*Math.cos(I)),ie=E+Math.atan2(Math.sin(I)*le*W,Y-N*Math.sin(ae));return ie=ie*y,ie=ie>180?ie-360:ie<-180?ie+360:ie,o.latLng([ae*y,ie])},angle:function(a,c,f){var _=a.latLngToContainerPoint(c),y=a.latLngToContainerPoint(f),b=Math.atan2(y.y-_.y,y.x-_.x)*180/Math.PI+90;return b+=b<0?360:0,b},destinationOnSegment:function(a,c,f,_){var y=o.GeometryUtil.angle(a,c,f),b=o.GeometryUtil.destination(c,y,_);return o.GeometryUtil.closestOnSegment(a,b,c,f)}}),o.GeometryUtil})})(fc)),fc.exports}Oy();const Iy=ne.forwardRef(function({layers:o,visible:a,styles:c},f){const _=ne.useRef(null),[y,b]=ne.useState(null),[E,M]=ne.useState(null),[I,N]=ne.useState([]),[W,Y]=ne.useState(1),le=ne.useMemo(()=>({lat:-33.45,lng:-70.65}),[]);ne.useImperativeHandle(f,()=>({zoomTo(Ue){if(_.current)try{const pt=Io.geoJSON(Ue).getBounds();pt.isValid()&&_.current.fitBounds(pt,{padding:[20,20]})}catch(Qe){console.error("❌ Error en zoomTo:",Qe)}},get leafletMap(){return _.current}}));function ae(Ue,Qe){if(Qe==="Polygon"){const pt=Io.GeometryUtil.geodesicArea(Ue.getLatLngs()[0]),at=Io.GeometryUtil.length(Ue.getLatLngs()[0]);return`📐 Polígono → Área: ${(pt/1e4).toFixed(2)} ha | Perímetro: ${(at/1e3).toFixed(2)} km`}if(Qe==="Line"){const pt=Ue.getLatLngs(),at=Io.GeometryUtil.length(pt);return`📏 Línea → ${at<1e3?at.toFixed(1)+" m":(at/1e3).toFixed(2)} km`}return""}ne.useEffect(()=>{if(!_.current)return;const Ue=_.current;Ue.pm&&(Ue.pm.addControls({position:"topleft",drawCircle:!1,drawMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1}),Ue.on("pm:create",Qe=>{console.log("✅ pm:create ejecutado",Qe.shape);const pt=Qe.shape==="Line"||Qe.shape==="Polyline"?"Line":"Polygon",at=ae(Qe.layer,pt);at?(Qe.layer.bindPopup(at).openPopup(),M({msg:at,type:"info"}),N(St=>[...St,{id:W,type:pt,value:at,layer:Qe.layer}]),Y(St=>St+1),console.log("📊 Resultado final guardado:",at)):console.warn("⚠️ No se pudo calcular medición para la capa creada:",Qe),b(null)}),Ue.on("pm:drawchange",Qe=>{const pt=ae(Qe.workingLayer,Qe.shape);pt&&console.log("📊 Medición parcial:",pt)}))},[W]);function ie(Ue){if(!_.current)return;const Qe=_.current;Qe.pm.disableDraw(),Qe.pm.enableDraw(Ue,{snappable:!0}),b(Ue),M({msg:`📐 Medición de ${Ue} iniciada`,type:"info"}),console.log(`📐 Medición de ${Ue} iniciada`)}function we(){if(!_.current)return;const Ue=_.current;Ue.pm.disableDraw(),Ue.eachLayer(Qe=>{Qe.pm&&Qe.pm._shape&&Ue.removeLayer(Qe)}),b(null),N([]),M({msg:"🗑️ Todas las geometrías eliminadas",type:"info"}),console.log("🗑️ Todas las geometrías eliminadas")}function Te(Ue){_.current&&N(Qe=>{const pt=Qe.find(at=>at.id===Ue);return pt&&pt.layer&&(_.current.removeLayer(pt.layer),console.log(`🗑️ Medición #${Ue} eliminada del mapa y del panel`)),Qe.filter(at=>at.id!==Ue)})}function xe(){if(!_.current)return;const Ue=[[-56,-76],[-17.5,-66]];_.current.fitBounds(Ue,{padding:[20,20]}),console.log("↺ Vista ajustada a Chile")}async function Re(){if(_.current){if(!("geolocation"in navigator)){M({msg:"❌ Geolocalización no disponible",type:"error"}),console.warn("❌ Geolocalización no disponible en navegador");return}navigator.geolocation.getCurrentPosition(Ue=>{const Qe=new Ra.LatLng(Ue.coords.latitude,Ue.coords.longitude);_.current.setView(Qe,13),Io.circleMarker(Qe,{radius:6}).addTo(_.current),M({msg:"📍 Ubicación encontrada",type:"success"}),console.log("📍 Ubicación encontrada:",Ue.coords)},Ue=>{M({msg:"❌ No se pudo obtener tu ubicación: "+Ue.message,type:"error"}),console.error("❌ Error de geolocalización:",Ue)},{enableHighAccuracy:!0,timeout:1e4})}}const[Ye,We]=ne.useState(!1);function Xe(){const Ue=_.current?.getContainer();Ue&&(document.fullscreenElement?(document.exitFullscreen?.(),We(!1),console.log("⛶ Saliendo de pantalla completa")):(Ue.requestFullscreen?.(),We(!0),console.log("⛶ Entrando a pantalla completa")))}return Z.jsxs("div",{className:"relative w-full rounded-xl border shadow-lg overflow-hidden flex flex-col md:flex-row",children:[E&&Z.jsx("div",{className:"fixed top-4 right-4 z-[2000]",children:Z.jsx(Ip,{message:E.msg,type:E.type,duration:3e3,onClose:()=>M(null)})}),Z.jsxs("div",{className:"absolute top-2 left-2 z-[1000] flex flex-wrap gap-2 p-2 bg-black/70 backdrop-blur rounded-lg shadow-md max-w-[95vw]",children:[Z.jsxs("button",{onClick:xe,className:"btn-map",children:["↺ ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Chile"})]}),Z.jsxs("button",{onClick:Re,className:"btn-map",children:["📍 ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Ubicación"})]}),Z.jsxs("button",{onClick:Xe,className:"btn-map",children:["⛶ ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Pantalla completa"})]}),Z.jsxs("button",{onClick:()=>ie("Line"),className:`btn-map ${y==="Line"?"btn-map-active":""}`,children:["📏 ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Medir línea"})]}),Z.jsxs("button",{onClick:()=>ie("Polygon"),className:`btn-map ${y==="Polygon"?"btn-map-active":""}`,children:["📐 ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Medir polígono"})]}),y&&Z.jsxs("button",{onClick:we,className:"btn-map btn-map-danger",children:["❌ ",Z.jsx("span",{className:"hidden sm:inline ml-1",children:"Cancelar"})]})]}),Z.jsxs("div",{className:"w-full md:w-64 bg-gray-900 border-t md:border-t-0 md:border-l border-gray-700 text-white p-4 overflow-y-auto",children:[Z.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📊 Resultados"}),I.length===0?Z.jsx("p",{className:"text-gray-400 text-sm",children:"No hay mediciones todavía"}):Z.jsx("ul",{className:"space-y-2 text-sm",children:I.map(Ue=>Z.jsxs("li",{className:"p-2 bg-gray-800 rounded-md flex justify-between items-center",children:[Z.jsxs("span",{children:[Z.jsx("span",{className:"font-bold",children:Ue.type}),": ",Ue.value]}),Z.jsx("button",{onClick:()=>Te(Ue.id),className:"ml-2 bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs",children:"❌"})]},Ue.id))})]}),Z.jsxs(Ty,{center:[le.lat,le.lng],zoom:5,className:"flex-1 h-[70vh] rounded-xl",preferCanvas:!0,zoomControl:!1,ref:Ue=>{Ue&&(_.current=Ue)},children:[Z.jsx(Dy,{position:"bottomright"}),Z.jsx(Ay,{position:"bottomleft"}),Z.jsx("div",{className:"hidden sm:block",children:Z.jsxs(hu,{position:"bottomleft",children:[Z.jsx(hu.BaseLayer,{checked:!0,name:"OpenStreetMap",children:Z.jsx(Kf,{attribution:"© OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",crossOrigin:"anonymous"})}),Z.jsx(hu.BaseLayer,{name:"Esri World Imagery",children:Z.jsx(Kf,{attribution:"Tiles © Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",crossOrigin:"anonymous"})})]})})]})]})});function jy({layers:m,styles:o,onLocalChange:a}){const[c,f]=ne.useState(!1);return m.length===0?null:Z.jsxs("div",{className:"mt-4",children:[Z.jsxs("button",{onClick:()=>f(!c),className:"btn btn-secondary w-full flex justify-between items-center text-sm sm:text-base",children:["🎨 Estilos de capas",Z.jsx("span",{children:c?"▲":"▼"})]}),c&&Z.jsx("div",{className:"mt-4 bg-gray-800 rounded-xl shadow-md p-4 sm:p-6 space-y-6",children:m.map(_=>{const y=o[_.id]||{};return Z.jsxs("div",{className:"border-b border-gray-700 pb-4 last:border-0 last:pb-0",children:[Z.jsx("h4",{className:"font-semibold text-gray-100 mb-2 text-sm sm:text-base",children:_.name}),Z.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Borde",Z.jsx("input",{type:"color",value:y.color||"#000000",onChange:b=>a(_.id,{color:b.target.value}),className:"ml-2 w-10 h-6 border border-gray-600 rounded cursor-pointer"})]}),Z.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Opacidad",Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"range",min:0,max:1,step:.05,value:y.opacity??1,onChange:b=>a(_.id,{opacity:parseFloat(b.target.value)}),className:"w-full accent-green-500"}),Z.jsxs("span",{className:"text-gray-300",children:[Math.round((y.opacity??1)*100),"%"]})]})]}),Z.jsxs("label",{className:"block mb-3 text-xs sm:text-sm text-gray-200",children:["Relleno",Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"color",value:y.fillColor||"#000000",onChange:b=>a(_.id,{fillColor:b.target.value}),className:"w-10 h-6 border border-gray-600 rounded cursor-pointer"}),Z.jsx("input",{type:"range",min:0,max:1,step:.05,value:y.fillOpacity??.5,onChange:b=>a(_.id,{fillOpacity:parseFloat(b.target.value)}),className:"w-full accent-green-500"}),Z.jsxs("span",{className:"text-gray-300",children:[Math.round((y.fillOpacity??.5)*100),"%"]})]})]}),Z.jsxs("label",{className:"block mb-2 text-xs sm:text-sm text-gray-200",children:["Radio",Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"range",min:1,max:20,step:1,value:y.radius??5,onChange:b=>a(_.id,{radius:parseInt(b.target.value)}),className:"w-full accent-green-500"}),Z.jsxs("span",{className:"text-gray-300",children:[y.radius??5,"px"]})]})]})]},_.id)})})]})}const th=[{id:"sernageomin-mineria-19s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",name:"🌐 WMS Minero 19S",layer:Io.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_19S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1},{id:"sernageomin-mineria-18s",url:"https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",name:"🌐 WMS Minero 18S",layer:Io.tileLayer.wms("https://catastromineronline.sernageomin.cl/arcgismin/services/MINERIA/WMS_PROPIEDAD_MINERA_18S/MapServer/WMSServer",{layers:"0,1,2,3",format:"image/png",transparent:!0,version:"1.3.0"}),visible:!1}];function Qf({mapRef:m}){const[o,a]=ne.useState(""),[c,f]=ne.useState(""),[_,y]=ne.useState([]),[b,E]=ne.useState({type:null,text:""});ne.useEffect(()=>{y(th)},[]);const M=(Y,le)=>{E({type:Y,text:le}),Y!=="loading"&&setTimeout(()=>E({type:null,text:""}),3e3)},I=()=>{const Y=m.current?.leafletMap;if(!Y||!o.trim())return;const le=o.trim(),ae=`${Date.now()}`;M("loading","⏳ Cargando capa...");try{const ie=Io.tileLayer.wms(le,{layers:c||"0",format:"image/png",transparent:!0,version:"1.3.0"});ie.addTo(Y),y(we=>[...we,{id:ae,url:le,name:c||"0",layer:ie,visible:!0}]),M("success","✅ Capa cargada correctamente"),a(""),f("")}catch(ie){console.error(ie),M("error","❌ Error al cargar la capa")}},N=Y=>{const le=m.current?.leafletMap;le&&y(ae=>ae.map(ie=>ie.id===Y?(ie.visible&&ie.layer?le.removeLayer(ie.layer):ie.layer&&ie.layer.addTo(le),{...ie,visible:!ie.visible}):ie))},W=Y=>{const le=m.current?.leafletMap;le&&y(ae=>{const ie=ae.find(we=>we.id===Y);return ie&&ie.layer&&le.removeLayer(ie.layer),ae.filter(we=>we.id!==Y)})};return Z.jsxs("div",{className:"p-5 text-white bg-[#1e293b] h-full flex flex-col rounded-lg",children:[Z.jsx("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:"🌐 Capas externas"}),Z.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[Z.jsx("input",{type:"text",value:o,onChange:Y=>a(Y.target.value),placeholder:"🔗 URL WMS",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),Z.jsx("input",{type:"text",value:c,onChange:Y=>f(Y.target.value),placeholder:"📌 Nombre/ID de capa (ej: 0 o 0,1,2)",className:"px-3 py-2 rounded-md text-white border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}),Z.jsx("button",{onClick:I,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-medium shadow transition",children:"➕ Agregar"})]}),b.type&&Z.jsx("div",{className:`mb-4 text-sm px-3 py-2 rounded-md font-medium ${b.type==="loading"?"bg-yellow-600":b.type==="success"?"bg-green-600":"bg-red-600"}`,children:b.text}),Z.jsx("h3",{className:"text-md font-semibold mb-3",children:"📋 Capas activas"}),Z.jsxs("div",{className:"mb-4",children:[Z.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas Sernageomin"}),Z.jsx("ul",{className:"space-y-2",children:_.filter(Y=>th.find(le=>le.id===Y.id)).map(Y=>Z.jsx("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:Z.jsxs("label",{className:"flex items-center gap-2 truncate",children:[Z.jsx("input",{type:"checkbox",checked:Y.visible,onChange:()=>N(Y.id),className:"accent-blue-500"}),Z.jsx("span",{className:"truncate",children:Y.name})]})},Y.id))})]}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Capas agregadas manualmente"}),Z.jsxs("ul",{className:"space-y-2",children:[_.filter(Y=>!th.find(le=>le.id===Y.id)).length===0&&Z.jsx("li",{className:"text-gray-400 text-sm italic",children:"No hay capas manuales"}),_.filter(Y=>!th.find(le=>le.id===Y.id)).map(Y=>Z.jsxs("li",{className:"flex justify-between items-center bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md transition",children:[Z.jsxs("label",{className:"flex items-center gap-2 truncate",children:[Z.jsx("input",{type:"checkbox",checked:Y.visible,onChange:()=>N(Y.id),className:"accent-blue-500"}),Z.jsx("span",{className:"truncate",children:Y.name})]}),Z.jsx("button",{onClick:()=>W(Y.id),className:"bg-red-600 hover:bg-red-700 px-2 py-1 rounded text-xs",children:"✕"})]},Y.id))]})]})]})}function Ny(){const{projectId:m}=__(),[o,a]=ne.useState([]),[c,f]=ne.useState({}),[_,y]=ne.useState({}),[b,E]=ne.useState(!0),[M,I]=ne.useState(null),[N,W]=ne.useState(null),Y=ne.useRef(null),[le,ae]=ne.useState(!1);ne.useEffect(()=>{async function Te(){if(!m)return;const{data:xe,error:Re}=await zn.from("projects").select("owner_id, visibility").eq("id",m).single();if(Re){W("❌ Proyecto no encontrado");return}if(xe.visibility==="private"){const{data:{user:Ye}}=await zn.auth.getUser();(!Ye||Ye.id!==xe.owner_id)&&W("🚫 No tienes acceso a este proyecto")}}Te()},[m]);async function ie(){if(!m)return;E(!0);const{data:Te,error:xe}=await zn.from("project_layers").select("id,name,geojson").eq("project_id",m).order("created_at",{ascending:!1});if(xe){a([]),W(xe.message),E(!1);return}a(Te||[]);const Re={};for(const Ye of Te||[])Re[Ye.id]=!0;f(Re),E(!1)}async function we(Te){if(Te.length===0){y({});return}const{data:xe,error:Re}=await zn.from("project_layer_styles").select("layer_id, stroke, weight, opacity, fill, fill_opacity, point_radius").in("layer_id",Te);if(Re)return;const Ye={};for(const We of Te){const Xe=xe?.find(Ue=>Ue.layer_id===We);Ye[We]={layer_id:We,color:Xe?.stroke??"#1f2937",weight:Xe?.weight??2,opacity:Xe?.opacity??1,fillColor:Xe?.fill??"#1f2937",fillOpacity:Xe?.fill_opacity??.2,radius:Xe?.point_radius??5}}y(Ye)}return ne.useEffect(()=>{ie()},[m]),ne.useEffect(()=>{we(o.map(Te=>Te.id))},[o]),N?Z.jsx("div",{className:"p-6 text-center text-red-600 font-medium",children:N}):Z.jsxs("div",{className:"wrap",children:[Z.jsxs("div",{className:"card flex flex-col lg:flex-row",style:{width:"min(1400px, 98vw)"},children:[Z.jsxs("div",{className:"flex-1 flex flex-col",children:[Z.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[Z.jsxs(dh,{to:"/dashboard",className:`inline-flex items-center gap-2 px-3 py-1.5 \r
             text-sm font-medium text-white \r
             bg-gray-700 hover:bg-gray-600 \r
             rounded-lg shadow transition`,children:[Z.jsx("span",{className:"text-lg",children:"←"}),"Volver"]}),Z.jsx("h2",{className:"title text-lg sm:text-xl",children:"Proyecto"}),Z.jsx("div",{className:"sm:ml-auto w-full sm:w-auto",children:Z.jsx(gy,{projectId:m,onLayerAdded:()=>{I("✅ Capa creada"),ie()},onError:Te=>W(Te)})})]}),b&&Z.jsx("div",{className:"hint text-blue-600 mb-2",children:"⏳ Cargando capas..."}),N&&Z.jsx("div",{className:"hint text-red-700 mb-2",children:N}),M&&Z.jsx("div",{className:"hint text-green-700 mb-2",children:M}),Z.jsx(_y,{layers:o,visible:c,onToggleVisible:Te=>f(xe=>({...xe,[Te]:!xe[Te]})),onZoom:Te=>Y.current?.zoomTo(Te.geojson),onDelete:Te=>{confirm(`¿Eliminar la capa "${Te.name}"?`)&&zn.from("project_layers").delete().eq("id",Te.id).then(()=>ie())}}),Z.jsx(jy,{layers:o,styles:_,onLocalChange:(Te,xe)=>y(Re=>({...Re,[Te]:{...Re[Te],...xe}}))}),Z.jsx("div",{style:{flex:1,minHeight:"500px"},children:Z.jsx(Iy,{ref:Y,layers:o,visible:c,styles:_})})]}),Z.jsx("div",{className:"hidden lg:block w-80 bg-[#1e293b] border-l border-gray-700",children:Z.jsx(Qf,{mapRef:Y})})]}),Z.jsx("button",{onClick:()=>ae(!0),className:"lg:hidden fixed top-4 right-4 z-[1500] w-12 h-12 flex items-center justify-center rounded-full bg-green-600 hover:bg-green-700 text-white shadow-lg transition","aria-label":"Capas externas",children:"🌐"}),le&&Z.jsxs("div",{className:"fixed inset-0 z-[2000] flex",children:[Z.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>ae(!1)}),Z.jsxs("aside",{className:`relative w-72 bg-[#1e293b] h-full p-4 shadow-xl z-[2000] overflow-y-auto 
              transform transition-transform duration-300 ease-in-out
              ${le?"translate-x-0":"translate-x-full"}`,children:[Z.jsxs("div",{className:"flex justify-between items-center mb-4 text-white",children:[Z.jsx("h2",{className:"font-semibold",children:"Capas externas"}),Z.jsx("button",{onClick:()=>ae(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),Z.jsx(Qf,{mapRef:Y})]})]})]})}function Fy(){return Z.jsx(ty,{basename:"/",children:Z.jsxs(A_,{children:[Z.jsx(ru,{path:"/login",element:Z.jsx(eh,{})}),Z.jsx(ru,{path:"/dashboard",element:Z.jsx(Wf,{fallback:Z.jsx(eh,{}),children:m=>Z.jsx(my,{email:m.user.email??"sin-email"})})}),Z.jsx(ru,{path:"/project/:projectId",element:Z.jsx(Wf,{fallback:Z.jsx(eh,{}),children:()=>Z.jsx(Ny,{})})}),Z.jsx(ru,{path:"*",element:Z.jsx(eh,{})})]})})}Rm.createRoot(document.getElementById("root")).render(Z.jsx(cu.StrictMode,{children:Z.jsx(Fy,{})}));
